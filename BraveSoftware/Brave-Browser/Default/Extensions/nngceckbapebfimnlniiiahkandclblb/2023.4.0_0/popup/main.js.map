{"version":3,"file":"popup/main.js","mappings":"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AAa,EACb,KAAAC,aAAe,EACf,KAAAC,eAAiB,EACjB,KAAAC,YAAa,EACb,KAAAC,eAAgB,CAiBlB,CAfEC,WACE,MACuB,KAArBle,KAAKwd,aACLxd,KAAKyY,UAAY,GACjBzY,KAAK4d,YAAc,GACnB5d,KAAK8d,aAAe,GACpB9d,KAAKyd,cACLzd,KAAK0d,cACL1d,KAAK2d,YACL3d,KAAK6d,YACL7d,KAAK+d,eAAiB,GACtB/d,KAAKge,YACLhe,KAAKie,aAET,EC5BK,MAAME,GAAkB,CAC7B,SACA,UACA,YACA,QACA,UACA,UACA,SACA,OACA,WACA,WACA,WACA,UACA,UACA,SACA,WACA,UACA,WACA,WACA,WACA,WACA,UACA,UACA,WACA,SACA,SACA,UACA,YACA,YACA,UACA,WACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,WACA,UACA,OACA,UACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,WACA,WACA,UACA,OACA,UACA,YACA,WACA,WACA,UACA,YACA,OACA,SACA,WACA,YACA,YACA,YACA,YACA,SACA,QACA,YACA,WACA,SACA,UACA,SACA,SACA,WACA,QACA,SACA,YACA,YACA,YACA,YACA,YACA,OACA,UACA,SACA,SACA,QACA,YACA,SACA,QACA,UACA,QACA,WACA,UACA,YACA,QACA,YACA,YACA,SACA,WACA,YACA,UACA,QACA,OACA,OACA,OACA,MACA,OACA,YACA,QACA,YACA,QACA,UACA,UACA,YACA,QACA,QACA,YACA,WACA,SACA,QACA,QACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,QACA,QACA,YACA,QACA,WACA,UACA,WACA,WACA,OACA,WACA,SACA,SACA,WACA,QACA,YACA,QACA,WACA,YACA,YACA,WACA,YACA,YACA,SACA,YACA,YACA,SACA,UACA,UACA,WACA,OACA,QACA,QACA,QACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,QACA,YACA,UACA,QACA,QACA,SACA,WACA,SACA,YACA,SACA,UACA,WACA,YACA,UACA,YACA,UACA,SACA,UACA,UACA,UACA,SACA,SACA,WACA,OACA,YACA,UACA,QACA,SACA,SACA,SACA,UACA,UACA,YACA,YACA,UACA,SACA,UACA,YACA,YACA,WACA,QACA,YACA,QACA,QACA,WACA,YACA,WACA,WACA,UACA,WACA,UACA,YACA,UACA,YACA,WACA,WACA,WACA,SACA,UACA,YACA,WACA,SACA,WACA,WACA,YACA,WACA,YACA,WACA,YACA,YACA,YACA,YACA,SACA,UACA,QACA,QACA,UACA,SACA,UACA,SACA,WACA,WACA,UACA,SACA,WACA,QACA,SACA,UACA,YACA,SACA,UACA,YACA,YACA,WACA,WACA,YACA,UACA,WACA,QACA,YACA,YACA,UACA,QACA,YACA,YACA,YACA,YACA,WACA,WACA,UACA,UACA,QACA,QACA,WACA,QACA,OACA,WACA,YACA,YACA,WACA,OACA,QACA,WACA,WACA,QACA,QACA,YACA,UACA,WACA,QACA,SACA,UACA,SACA,UACA,UACA,UACA,SACA,UACA,OACA,QACA,QACA,SACA,UACA,UACA,QACA,SACA,UACA,SACA,YACA,WACA,QACA,MACA,SACA,YACA,SACA,YACA,UACA,QACA,QACA,OACA,QACA,QACA,SACA,YACA,SACA,WACA,SACA,UACA,WACA,UACA,UACA,YACA,YACA,YACA,SACA,WACA,QACA,OACA,WACA,OACA,SACA,YACA,UACA,SACA,SACA,UACA,YACA,WACA,YACA,YACA,SACA,QACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,WACA,UACA,UACA,WACA,QACA,WACA,YACA,SACA,YACA,SACA,SACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,SACA,SACA,WACA,SACA,UACA,WACA,QACA,WACA,UACA,OACA,QACA,QACA,SACA,QACA,QACA,SACA,UACA,SACA,QACA,OACA,OACA,SACA,WACA,SACA,SACA,WACA,YACA,YACA,WACA,SACA,SACA,YACA,WACA,WACA,UACA,YACA,WACA,WACA,YACA,UACA,UACA,WACA,YACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,YACA,SACA,WACA,WACA,YACA,WACA,QACA,WACA,YACA,SACA,QACA,UACA,QACA,UACA,SACA,WACA,QACA,SACA,UACA,SACA,SACA,YACA,UACA,QACA,UACA,WACA,QACA,SACA,WACA,SACA,UACA,YACA,UACA,QACA,WACA,SACA,SACA,SACA,WACA,QACA,WACA,WACA,SACA,SACA,UACA,WACA,WACA,SACA,YACA,UACA,SACA,WACA,SACA,UACA,SACA,UACA,QACA,WACA,UACA,WACA,SACA,UACA,SACA,OACA,YACA,UACA,YACA,SACA,WACA,YACA,UACA,WACA,YACA,WACA,OACA,YACA,SACA,QACA,QACA,QACA,SACA,SACA,QACA,OACA,QACA,OACA,YACA,WACA,YACA,UACA,UACA,SACA,SACA,UACA,UACA,UACA,QACA,OACA,QACA,UACA,YACA,YACA,QACA,YACA,YACA,QACA,WACA,YACA,SACA,UACA,SACA,QACA,QACA,UACA,QACA,QACA,WACA,QACA,QACA,UACA,UACA,WACA,SACA,OACA,WACA,QACA,WACA,UACA,WACA,OACA,OACA,WACA,WACA,UACA,OACA,SACA,UACA,QACA,SACA,YACA,QACA,QACA,UACA,SACA,QACA,QACA,WACA,UACA,WACA,WACA,OACA,SACA,UACA,SACA,SACA,UACA,UACA,YACA,OACA,SACA,SACA,QACA,OACA,MACA,UACA,OACA,UACA,SACA,UACA,WACA,QACA,WACA,WACA,WACA,QACA,UACA,SACA,SACA,QACA,OACA,YACA,YACA,OACA,YACA,SACA,QACA,SACA,UACA,WACA,UACA,QACA,QACA,QACA,SACA,UACA,WACA,YACA,OACA,YACA,WACA,SACA,QACA,OACA,SACA,WACA,SACA,SACA,WACA,SACA,WACA,YACA,YACA,SACA,SACA,QACA,SACA,UACA,OACA,SACA,SACA,WACA,YACA,UACA,WACA,SACA,SACA,WACA,UACA,UACA,QACA,QACA,QACA,QACA,UACA,UACA,SACA,YACA,OACA,QACA,QACA,UACA,UACA,YACA,UACA,UACA,YACA,YACA,UACA,UACA,YACA,YACA,YACA,UACA,WACA,SACA,SACA,YACA,SACA,SACA,WACA,QACA,QACA,UACA,WACA,YACA,SACA,WACA,WACA,SACA,WACA,QACA,QACA,WACA,QACA,YACA,SACA,WACA,SACA,YACA,SACA,SACA,SACA,WACA,WACA,YACA,YACA,WACA,WACA,UACA,QACA,SACA,UACA,SACA,SACA,UACA,UACA,QACA,OACA,QACA,YACA,SACA,OACA,UACA,YACA,YACA,WACA,WACA,UACA,UACA,UACA,WACA,WACA,WACA,QACA,QACA,SACA,SACA,SACA,UACA,YACA,WACA,QACA,OACA,SACA,OACA,SACA,UACA,OACA,WACA,OACA,SACA,UACA,SACA,YACA,QACA,UACA,QACA,SACA,QACA,SACA,SACA,QACA,QACA,WACA,UACA,OACA,UACA,OACA,WACA,WACA,UACA,YACA,WACA,UACA,YACA,OACA,UACA,UACA,UACA,YACA,QACA,SACA,WACA,SACA,WACA,UACA,WACA,SACA,QACA,SACA,SACA,UACA,SACA,QACA,OACA,SACA,WACA,WACA,SACA,UACA,SACA,SACA,SACA,QACA,YACA,SACA,UACA,SACA,UACA,UACA,WACA,OACA,YACA,UACA,UACA,SACA,YACA,UACA,UACA,UACA,YACA,UACA,YACA,UACA,UACA,QACA,UACA,SACA,YACA,SACA,UACA,WACA,WACA,YACA,YACA,YACA,WACA,SACA,YACA,QACA,SACA,UACA,UACA,WACA,UACA,YACA,WACA,YACA,QACA,YACA,YACA,UACA,UACA,UACA,SACA,YACA,QACA,SACA,WACA,SACA,UACA,YACA,YACA,QACA,UACA,UACA,UACA,OACA,OACA,SACA,SACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,WACA,SACA,UACA,WACA,WACA,UACA,YACA,WACA,UACA,SACA,SACA,SACA,UACA,YACA,SACA,QACA,UACA,YACA,SACA,SACA,YACA,QACA,UACA,YACA,UACA,WACA,WACA,UACA,SACA,SACA,QACA,SACA,YACA,WACA,WACA,SACA,SACA,SACA,WACA,WACA,YACA,YACA,YACA,UACA,WACA,WACA,QACA,WACA,QACA,QACA,UACA,YACA,UACA,YACA,WACA,SACA,SACA,UACA,QACA,QACA,YACA,WACA,UACA,QACA,UACA,YACA,YACA,WACA,UACA,WACA,UACA,UACA,QACA,UACA,UACA,WACA,QACA,UACA,SACA,WACA,WACA,WACA,UACA,WACA,SACA,WACA,UACA,QACA,QACA,SACA,SACA,OACA,YACA,UACA,QACA,YACA,SACA,QACA,QACA,UACA,QACA,WACA,SACA,UACA,QACA,QACA,YACA,YACA,YACA,WACA,YACA,YACA,QACA,QACA,QACA,OACA,WACA,SACA,WACA,WACA,QACA,WACA,WACA,SACA,YACA,UACA,QACA,UACA,WACA,SACA,OACA,SACA,UACA,WACA,SACA,SACA,QACA,OACA,SACA,QACA,QACA,QACA,QACA,QACA,WACA,QACA,SACA,WACA,SACA,WACA,WACA,YACA,SACA,UACA,UACA,WACA,UACA,SACA,SACA,OACA,QACA,QACA,OACA,QACA,WACA,SACA,SACA,QACA,YACA,QACA,WACA,UACA,UACA,WACA,UACA,WACA,UACA,QACA,QACA,QACA,UACA,SACA,WACA,OACA,OACA,QACA,QACA,QACA,UACA,QACA,SACA,YACA,WACA,QACA,SACA,UACA,SACA,UACA,WACA,QACA,SACA,WACA,OACA,SACA,QACA,UACA,QACA,QACA,UACA,WACA,UACA,UACA,WACA,QACA,SACA,UACA,WACA,YACA,QACA,WACA,SACA,SACA,YACA,SACA,UACA,QACA,YACA,UACA,UACA,WACA,YACA,YACA,OACA,WACA,SACA,UACA,SACA,QACA,UACA,MACA,WACA,SACA,UACA,SACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,OACA,OACA,OACA,OACA,WACA,WACA,UACA,WACA,SACA,YACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,SACA,WACA,OACA,OACA,OACA,UACA,QACA,QACA,SACA,QACA,WACA,UACA,UACA,WACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,SACA,UACA,SACA,YACA,WACA,WACA,YACA,UACA,YACA,WACA,WACA,YACA,WACA,YACA,UACA,UACA,UACA,WACA,UACA,YACA,UACA,QACA,YACA,UACA,WACA,WACA,SACA,WACA,YACA,YACA,UACA,YACA,YACA,UACA,OACA,UACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,YACA,UACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,WACA,WACA,UACA,YACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,UACA,YACA,YACA,WACA,UACA,UACA,UACA,UACA,WACA,UACA,YACA,UACA,UACA,YACA,OACA,SACA,SACA,UACA,SACA,UACA,SACA,OACA,QACA,OACA,WACA,YACA,UACA,SACA,SACA,SACA,YACA,YACA,WACA,WACA,YACA,QACA,WACA,UACA,WACA,YACA,SACA,UACA,WACA,UACA,YACA,YACA,UACA,SACA,SACA,WACA,YACA,SACA,SACA,YACA,OACA,UACA,SACA,QACA,QACA,QACA,YACA,YACA,WACA,YACA,UACA,SACA,UACA,WACA,QACA,UACA,WACA,UACA,SACA,WACA,OACA,WACA,YACA,WACA,WACA,SACA,WACA,UACA,WACA,YACA,YACA,SACA,QACA,YACA,QACA,UACA,UACA,QACA,QACA,QACA,UACA,WACA,WACA,WACA,WACA,SACA,SACA,UACA,YACA,QACA,UACA,UACA,YACA,SACA,WACA,YACA,SACA,WACA,WACA,WACA,WACA,WACA,SACA,QACA,QACA,SACA,QACA,QACA,WACA,UACA,WACA,YACA,UACA,WACA,UACA,WACA,OACA,UACA,QACA,QACA,QACA,UACA,SACA,WACA,UACA,UACA,UACA,WACA,UACA,YACA,SACA,WACA,UACA,QACA,QACA,QACA,QACA,OACA,QACA,SACA,UACA,UACA,QACA,QACA,UACA,UACA,YACA,UACA,YACA,UACA,QACA,YACA,SACA,UACA,WACA,WACA,YACA,UACA,WACA,YACA,UACA,UACA,WACA,QACA,OACA,SACA,UACA,UACA,YACA,OACA,UACA,UACA,WACA,SACA,SACA,WACA,WACA,YACA,WACA,UACA,YACA,WACA,UACA,YACA,UACA,QACA,SACA,UACA,UACA,UACA,SACA,OACA,SACA,SACA,SACA,SACA,YACA,UACA,QACA,QACA,QACA,UACA,SACA,UACA,SACA,SACA,YACA,QACA,QACA,QACA,OACA,SACA,UACA,YACA,UACA,YACA,WACA,YACA,UACA,MACA,QACA,SACA,UACA,UACA,WACA,SACA,YACA,YACA,MACA,MACA,WACA,SACA,QACA,WACA,SACA,QACA,QACA,WACA,QACA,UACA,YACA,SACA,WACA,QACA,SACA,SACA,WACA,YACA,QACA,WACA,WACA,YACA,UACA,WACA,WACA,UACA,OACA,OACA,YACA,OACA,YACA,OACA,WACA,SACA,WACA,WACA,UACA,OACA,SACA,WACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,WACA,SACA,YACA,WACA,SACA,UACA,YACA,QACA,OACA,YACA,SACA,WACA,QACA,UACA,WACA,SACA,QACA,SACA,SACA,QACA,QACA,YACA,QACA,WACA,SACA,WACA,YACA,WACA,UACA,SACA,YACA,YACA,UACA,YACA,UACA,YACA,WACA,OACA,WACA,UACA,SACA,YACA,YACA,YACA,QACA,WACA,SACA,WACA,YACA,SACA,SACA,OACA,OACA,SACA,SACA,WACA,SACA,WACA,SACA,UACA,SACA,YACA,YACA,YACA,WACA,UACA,YACA,WACA,WACA,WACA,UACA,SACA,WACA,SACA,WACA,UACA,YACA,WACA,YACA,YACA,QACA,WACA,UACA,UACA,SACA,SACA,OACA,WACA,YACA,WACA,SACA,YACA,QACA,WACA,QACA,WACA,YACA,SACA,WACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,UACA,QACA,SACA,WACA,SACA,YACA,YACA,WACA,SACA,YACA,WACA,SACA,WACA,YACA,YACA,WACA,SACA,QACA,SACA,QACA,UACA,SACA,UACA,UACA,OACA,YACA,YACA,WACA,YACA,SACA,UACA,YACA,WACA,SACA,SACA,SACA,WACA,YACA,YACA,UACA,UACA,QACA,WACA,SACA,SACA,WACA,QACA,UACA,YACA,UACA,YACA,YACA,WACA,WACA,YACA,YACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,YACA,WACA,WACA,SACA,YACA,YACA,WACA,YACA,YACA,SACA,WACA,YACA,WACA,UACA,QACA,UACA,WACA,UACA,UACA,YACA,WACA,SACA,UACA,YACA,UACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,YACA,YACA,UACA,OACA,WACA,SACA,YACA,QACA,OACA,SACA,UACA,YACA,WACA,YACA,WACA,WACA,YACA,YACA,MACA,WACA,YACA,WACA,OACA,SACA,OACA,WACA,QACA,SACA,SACA,UACA,SACA,QACA,UACA,SACA,YACA,QACA,QACA,SACA,SACA,UACA,UACA,UACA,SACA,SACA,UACA,WACA,YACA,YACA,WACA,YACA,WACA,YACA,WACA,WACA,WACA,SACA,WACA,WACA,UACA,YACA,WACA,UACA,UACA,YACA,WACA,WACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,WACA,OACA,YACA,UACA,OACA,UACA,YACA,YACA,WACA,WACA,YACA,SACA,UACA,WACA,UACA,WACA,SACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,YACA,WACA,UACA,WACA,UACA,YACA,UACA,WACA,WACA,UACA,WACA,UACA,WACA,UACA,WACA,WACA,WACA,WACA,QACA,QACA,QACA,YACA,UACA,WACA,WACA,WACA,WACA,SACA,WACA,YACA,YACA,WACA,WACA,WACA,YACA,QACA,SACA,SACA,OACA,WACA,WACA,QACA,QACA,QACA,QACA,OACA,SACA,YACA,SACA,QACA,UACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,UACA,QACA,QACA,SACA,WACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,UACA,QACA,OACA,YACA,SACA,SACA,OACA,SACA,WACA,SACA,OACA,OACA,QACA,OACA,OACA,WACA,YACA,YACA,WACA,YACA,WACA,UACA,UACA,YACA,WACA,YACA,QACA,UACA,UACA,OACA,UACA,WACA,YACA,YACA,WACA,YACA,YACA,YACA,SACA,SACA,WACA,SACA,SACA,QACA,OACA,UACA,QACA,QACA,QACA,UACA,WACA,YACA,WACA,WACA,SACA,WACA,SACA,SACA,WACA,UACA,UACA,UACA,QACA,QACA,QACA,YACA,UACA,WACA,UACA,UACA,UACA,QACA,QACA,WACA,SACA,OACA,MACA,SACA,YACA,UACA,WACA,UACA,WACA,WACA,QACA,OACA,OACA,SACA,SACA,MACA,OACA,SACA,WACA,OACA,UACA,WACA,WACA,MACA,OACA,SACA,YACA,YACA,UACA,UACA,WACA,SACA,SACA,OACA,OACA,UACA,OACA,QACA,QACA,QACA,UACA,UACA,WACA,UACA,YACA,UACA,WACA,UACA,WACA,WACA,OACA,QACA,UACA,UACA,UACA,SACA,UACA,QACA,UACA,UACA,WACA,WACA,WACA,UACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,SACA,UACA,QACA,UACA,SACA,WACA,SACA,YACA,YACA,SACA,WACA,UACA,QACA,SACA,SACA,OACA,OACA,QACA,QACA,QACA,YACA,OACA,SACA,UACA,YACA,UACA,WACA,YACA,UACA,YACA,YACA,OACA,WACA,SACA,OACA,UACA,SACA,WACA,YACA,WACA,MACA,YACA,UACA,YACA,SACA,YACA,SACA,SACA,WACA,WACA,YACA,UACA,YACA,SACA,QACA,YACA,UACA,SACA,QACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,UACA,YACA,YACA,WACA,SACA,MACA,WACA,WACA,YACA,QACA,UACA,SACA,MACA,UACA,WACA,MACA,YACA,QACA,YACA,WACA,YACA,QACA,UACA,QACA,QACA,UACA,SACA,UACA,YACA,YACA,QACA,WACA,UACA,SACA,SACA,WACA,SACA,YACA,QACA,UACA,YACA,WACA,OACA,QACA,WACA,UACA,WACA,UACA,UACA,WACA,WACA,YACA,WACA,YACA,WACA,WACA,WACA,WACA,UACA,UACA,YACA,QACA,MACA,SACA,YACA,SACA,YACA,YACA,WACA,UACA,YACA,SACA,SACA,YACA,YACA,WACA,UACA,UACA,WACA,WACA,YACA,QACA,SACA,UACA,UACA,YACA,YACA,UACA,YACA,WACA,YACA,YACA,WACA,YACA,WACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,WACA,WACA,YACA,UACA,SACA,UACA,YACA,YACA,YACA,UACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,SACA,SACA,SACA,UACA,UACA,SACA,SACA,YACA,WACA,YACA,WACA,SACA,UACA,SACA,SACA,YACA,SACA,SACA,WACA,UACA,WACA,UACA,YACA,WACA,WACA,WACA,UACA,WACA,QACA,OACA,SACA,OACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,WACA,UACA,QACA,SACA,WACA,UACA,UACA,YACA,SACA,YACA,YACA,WACA,SACA,SACA,UACA,YACA,SACA,SACA,UACA,QACA,QACA,WACA,YACA,YACA,WACA,WACA,WACA,SACA,YACA,YACA,WACA,UACA,QACA,UACA,YACA,YACA,SACA,WACA,WACA,YACA,YACA,WACA,UACA,UACA,WACA,UACA,QACA,YACA,SACA,YACA,WACA,UACA,QACA,WACA,YACA,YACA,UACA,UACA,OACA,YACA,YACA,YACA,WACA,WACA,QACA,WACA,UACA,OACA,QACA,YACA,SACA,QACA,UACA,UACA,WACA,YACA,YACA,YACA,SACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,SACA,YACA,YACA,YACA,YACA,QACA,OACA,YACA,SACA,UACA,SACA,QACA,WACA,OACA,SACA,YACA,WACA,WACA,SACA,UACA,YACA,YACA,YACA,YACA,YACA,QACA,SACA,WACA,YACA,SACA,SACA,WACA,UACA,YACA,WACA,UACA,UACA,UACA,YACA,WACA,WACA,YACA,SACA,WACA,UACA,YACA,YACA,WACA,YACA,SACA,YACA,WACA,WACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,WACA,YACA,UACA,SACA,WACA,SACA,YACA,UACA,UACA,SACA,YACA,UACA,UACA,OACA,SACA,UACA,SACA,OACA,QACA,UACA,OACA,WACA,SACA,SACA,WACA,UACA,UACA,YACA,QACA,UACA,OACA,UACA,YACA,YACA,UACA,UACA,WACA,SACA,UACA,WACA,SACA,YACA,YACA,UACA,WACA,WACA,MACA,QACA,UACA,SACA,SACA,OACA,OACA,SACA,SACA,WACA,WACA,WACA,WACA,WACA,QACA,QACA,UACA,SACA,UACA,WACA,YACA,WACA,SACA,SACA,QACA,SACA,SACA,WACA,UACA,YACA,QACA,QACA,QACA,QACA,UACA,SACA,WACA,WACA,YACA,UACA,UACA,QACA,WACA,QACA,UACA,SACA,WACA,SACA,SACA,SACA,UACA,OACA,SACA,QACA,WACA,SACA,WACA,WACA,UACA,UACA,YACA,QACA,WACA,QACA,UACA,WACA,WACA,YACA,SACA,UACA,UACA,WACA,MACA,OACA,UACA,UACA,WACA,WACA,YACA,YACA,QACA,UACA,QACA,QACA,YACA,UACA,WACA,WACA,OACA,UACA,YACA,YACA,YACA,WACA,WACA,SACA,QACA,UACA,WACA,SACA,WACA,UACA,YACA,YACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,OACA,UACA,SACA,QACA,QACA,SACA,SACA,QACA,QACA,OACA,QACA,QACA,QACA,WACA,OACA,SACA,UACA,QACA,WACA,UACA,UACA,QACA,SACA,UACA,WACA,OACA,MACA,MACA,OACA,QACA,OACA,WACA,SACA,WACA,SACA,WACA,SACA,OACA,OACA,OACA,UACA,WACA,WACA,YACA,SACA,WACA,WACA,WACA,UACA,WACA,UACA,WACA,UACA,WACA,YACA,WACA,UACA,WACA,WACA,WACA,SACA,SACA,UACA,WACA,WACA,MACA,QACA,WACA,WACA,UACA,YACA,WACA,YACA,WACA,QACA,QACA,UACA,UACA,YACA,SACA,UACA,QACA,WACA,WACA,WACA,UACA,UACA,UACA,WACA,WACA,UACA,WACA,SACA,YACA,WACA,YACA,WACA,UACA,WACA,YACA,WACA,UACA,SACA,WACA,SACA,YACA,WACA,QACA,UACA,UACA,WACA,SACA,SACA,QACA,SACA,WACA,YACA,YACA,WACA,QACA,SACA,UACA,QACA,UACA,YACA,SACA,OACA,QACA,YACA,UACA,WACA,WACA,YACA,SACA,QACA,QACA,SACA,WACA,YACA,WACA,QACA,YACA,SACA,MACA,QACA,MACA,YACA,UACA,QACA,OACA,YACA,WACA,UACA,SACA,SACA,UACA,YACA,SACA,YACA,WACA,OACA,SACA,QACA,SACA,SACA,WACA,UACA,MACA,SACA,UACA,SACA,SACA,UACA,SACA,UACA,SACA,UACA,SACA,MACA,WACA,YACA,SACA,UACA,WACA,QACA,OACA,OACA,SACA,OACA,QACA,OACA,SACA,MACA,SACA,UACA,WACA,WACA,QACA,UACA,YACA,SACA,QACA,YACA,WACA,YACA,UACA,YACA,WACA,WACA,SACA,YACA,YACA,YACA,WACA,YACA,UACA,YACA,UACA,UACA,UACA,QACA,QACA,YACA,SACA,UACA,YACA,QACA,OACA,WACA,YACA,WACA,SACA,WACA,SACA,SACA,SACA,QACA,UACA,SACA,WACA,QACA,QACA,SACA,QACA,UACA,UACA,UACA,QACA,YACA,SACA,YACA,UACA,SACA,WACA,YACA,QACA,UACA,QACA,WACA,UACA,WACA,UACA,SACA,UACA,UACA,UACA,UACA,SACA,UACA,SACA,UACA,WACA,WACA,SACA,YACA,YACA,UACA,WACA,QACA,QACA,QACA,UACA,WACA,UACA,OACA,SACA,YACA,UACA,SACA,OACA,OACA,WACA,OACA,UACA,QACA,WACA,WACA,YACA,OACA,UACA,QACA,UACA,OACA,OACA,OACA,QACA,WACA,YACA,QACA,SACA,OACA,SACA,OACA,SACA,WACA,OACA,UACA,SACA,SACA,SACA,OACA,OACA,OACA,WACA,YACA,WACA,YACA,SACA,SACA,WACA,UACA,YACA,WACA,WACA,UACA,WACA,QACA,WACA,WACA,UACA,UACA,UACA,WACA,UACA,SACA,UACA,QACA,WACA,QACA,QACA,UACA,YACA,QACA,QACA,YACA,UACA,UACA,YACA,WACA,SACA,YACA,SACA,YACA,YACA,UACA,QACA,OACA,UACA,WACA,WACA,YACA,SACA,QACA,UACA,WACA,OACA,YACA,OACA,QACA,YACA,WACA,WACA,QACA,UACA,YACA,QACA,YACA,QACA,SACA,WACA,OACA,UACA,OACA,WACA,SACA,QACA,QACA,SACA,WACA,SACA,QACA,SACA,UACA,QACA,QACA,SACA,UACA,QACA,OACA,SACA,WACA,WACA,UACA,UACA,YACA,UACA,WACA,SACA,QACA,YACA,WACA,WACA,QACA,UACA,YACA,QACA,OACA,WACA,QACA,OACA,UACA,UACA,YACA,UACA,QACA,SACA,WACA,OACA,OACA,QACA,QACA,UACA,OACA,SACA,MACA,UACA,WACA,YACA,WACA,UACA,WACA,SACA,SACA,UACA,UACA,MACA,UACA,QACA,OACA,UACA,OACA,SACA,SACA,YACA,SACA,UACA,SACA,UACA,YACA,UACA,WACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,SACA,UACA,WACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,SACA,YACA,SACA,QACA,YACA,YACA,UACA,WACA,UACA,YACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,WACA,YACA,UACA,WACA,YACA,SACA,WACA,WACA,WACA,YACA,WACA,QACA,UACA,WACA,YACA,YACA,YACA,UACA,UACA,UACA,QACA,UACA,OACA,SACA,QACA,UACA,YACA,QACA,SACA,YACA,WACA,UACA,WACA,YACA,OACA,UACA,SACA,QACA,QACA,SACA,WACA,SACA,WACA,SACA,OACA,WACA,WACA,YACA,YACA,YACA,SACA,SACA,YACA,WACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,UACA,WACA,YACA,YACA,UACA,WACA,OACA,OACA,QACA,UACA,YACA,UACA,QACA,UACA,YACA,QACA,SACA,SACA,SACA,UACA,UACA,WACA,WACA,UACA,YACA,QACA,WACA,QACA,SACA,SACA,YACA,QACA,WACA,SACA,UACA,UACA,UACA,UACA,QACA,YACA,WACA,WACA,UACA,WACA,SACA,SACA,WACA,OACA,MACA,OACA,OACA,OACA,QACA,SACA,WACA,SACA,QACA,YACA,WACA,UACA,SACA,YACA,WACA,YACA,WACA,WACA,SACA,SACA,YACA,YACA,SACA,WACA,SACA,OACA,SACA,UACA,WACA,WACA,SACA,SACA,SACA,UACA,SACA,YACA,UACA,QACA,OACA,UACA,OACA,SACA,YACA,MACA,SACA,UACA,WACA,YACA,WACA,YACA,YACA,YACA,SACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,MACA,UACA,QACA,OACA,OACA,MACA,WACA,WACA,WACA,UACA,YACA,YACA,WACA,WACA,WACA,SACA,QACA,OACA,QACA,WACA,SACA,SACA,YACA,WACA,WACA,QACA,YACA,WACA,UACA,WACA,UACA,YACA,WACA,UACA,YACA,WACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,SACA,SACA,YACA,UACA,WACA,YACA,YACA,WACA,SACA,UACA,YACA,YACA,WACA,UACA,YACA,YACA,QACA,WACA,YACA,WACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,UACA,WACA,YACA,WACA,UACA,YACA,YACA,YACA,UACA,YACA,SACA,WACA,SACA,SACA,MACA,OACA,SACA,OACA,QACA,MACA,OACA,YACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,WACA,YACA,YACA,UACA,QACA,UACA,YACA,UACA,OACA,YACA,SACA,QACA,MACA,MACA,SACA,SACA,YACA,UACA,WACA,YACA,SACA,YACA,WACA,MACA,UACA,UACA,SACA,UACA,UACA,WACA,QACA,OACA,QACA,UACA,UACA,OACA,UACA,YACA,OACA,OACA,YACA,UACA,QACA,SACA,SACA,MACA,QACA,SACA,QACA,SACA,WACA,OACA,UACA,UACA,MACA,SACA,YACA,SACA,UACA,OACA,UACA,WACA,WACA,YACA,QACA,OACA,MACA,SACA,WACA,YACA,SACA,UACA,WACA,YACA,WACA,QACA,YACA,WACA,YACA,OACA,SACA,WACA,UACA,QACA,YACA,QACA,UACA,UACA,OACA,SACA,QACA,OACA,WACA,WACA,OACA,SACA,UACA,SACA,UACA,WACA,SACA,QACA,OACA,UACA,YACA,UACA,SACA,WACA,WACA,QACA,WACA,UACA,SACA,QACA,QACA,SACA,WACA,OACA,MACA,OACA,SACA,OACA,WACA,WACA,SACA,OACA,OACA,WACA,WACA,YACA,WACA,OACA,SACA,SACA,WACA,SACA,WACA,UACA,UACA,UACA,OACA,UACA,UACA,YACA,WACA,SACA,UACA,UACA,OACA,SACA,QACA,OACA,UACA,WACA,OACA,QACA,WACA,QACA,QACA,QACA,SACA,UACA,QACA,OACA,UACA,UACA,WACA,YACA,WACA,SACA,SACA,QACA,UACA,WACA,SACA,UACA,SACA,OACA,OACA,QACA,SACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,YACA,YACA,WACA,YACA,WACA,YACA,QACA,UACA,SACA,QACA,SACA,UACA,SACA,OACA,QACA,OACA,OACA,QACA,OACA,QACA,OACA,SACA,WACA,UACA,SACA,WACA,SACA,UACA,UACA,SACA,WACA,SACA,WACA,SACA,WACA,OACA,WACA,OACA,SACA,QACA,SACA,SACA,WACA,UACA,UACA,YACA,OACA,UACA,SACA,YACA,UACA,QACA,OACA,SACA,OACA,OACA,UACA,SACA,UACA,YACA,WACA,SACA,UACA,QACA,WACA,SACA,WACA,YACA,YACA,SACA,UACA,YACA,UACA,UACA,WACA,MACA,OACA,SACA,UACA,UACA,WACA,SACA,WACA,WACA,SACA,QACA,QACA,OACA,OACA,UACA,YACA,QACA,QACA,UACA,WACA,OACA,QACA,WACA,WACA,SACA,SACA,WACA,UACA,OACA,OACA,MACA,UACA,UACA,SACA,OACA,OACA,WACA,YACA,SACA,SACA,SACA,UACA,QACA,SACA,QACA,YACA,UACA,SACA,SACA,YACA,YACA,QACA,UACA,YACA,WACA,YACA,YACA,SACA,WACA,UACA,SACA,YACA,WACA,YACA,UACA,UACA,SACA,QACA,WACA,WACA,YACA,YACA,OACA,QACA,OACA,YACA,OACA,SACA,WACA,SACA,YACA,UACA,YACA,WACA,QACA,YACA,SACA,QACA,YACA,WACA,WACA,SACA,WACA,WACA,QACA,OACA,UACA,YACA,WACA,UACA,SACA,UACA,WACA,QACA,YACA,WACA,YACA,YACA,YACA,UACA,YACA,WACA,WACA,SACA,WACA,UACA,YACA,WACA,WACA,QACA,YACA,SACA,YACA,OACA,OACA,SACA,UACA,YACA,UACA,WACA,UACA,WACA,UACA,YACA,WACA,SACA,SACA,QACA,QACA,YACA,UACA,UACA,UACA,YACA,WACA,YACA,SACA,UACA,UACA,YACA,QACA,UACA,SACA,UACA,QACA,WACA,SACA,SACA,SACA,OACA,MACA,WACA,YACA,UACA,UACA,WACA,QACA,QACA,YACA,YACA,SACA,WACA,SACA,SACA,UACA,WACA,SACA,YACA,SACA,UACA,SACA,QACA,YACA,SACA,YACA,YACA,UACA,SACA,YACA,SACA,UACA,WACA,SACA,UACA,UACA,UACA,YACA,WACA,UACA,WACA,YACA,WACA,WACA,YACA,OACA,SACA,YACA,YACA,SACA,SACA,SACA,SACA,WACA,WACA,WACA,QACA,WACA,WACA,UACA,QACA,SACA,YACA,SACA,UACA,SACA,WACA,WACA,UACA,QACA,SACA,SACA,WACA,SACA,UACA,YACA,SACA,UACA,YACA,WACA,QACA,WACA,OACA,YACA,WACA,WACA,UACA,MACA,YACA,SACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,YACA,UACA,WACA,UACA,YACA,QACA,SACA,WACA,SACA,YACA,WACA,UACA,WACA,YACA,YACA,YACA,WACA,MACA,SACA,WACA,UACA,YACA,WACA,WACA,WACA,QACA,YACA,WACA,YACA,YACA,UACA,WACA,SACA,QACA,OACA,WACA,YACA,SACA,WACA,YACA,SACA,YACA,QACA,QACA,YACA,WACA,UACA,WACA,UACA,WACA,QACA,YACA,YACA,QACA,QACA,UACA,OACA,QACA,SACA,QACA,SACA,OACA,OACA,MACA,MACA,WACA,QACA,OACA,SACA,UACA,WACA,WACA,YACA,YACA,SACA,WACA,QACA,YACA,UACA,QACA,QACA,WACA,UACA,YACA,SACA,QACA,YACA,QACA,YACA,WACA,SACA,UACA,YACA,WACA,QACA,QACA,SACA,YACA,QACA,UACA,UACA,SACA,YACA,QACA,UACA,SACA,WACA,OACA,YACA,YACA,SACA,OACA,SACA,SACA,SACA,UACA,YACA,UACA,OACA,QACA,MACA,OACA,OACA,SACA,QACA,YACA,OACA,SACA,SACA,UACA,QACA,SACA,UACA,YACA,WACA,SACA,WACA,UACA,SACA,WACA,WACA,WACA,YACA,OACA,SACA,UACA,SACA,WACA,SACA,WACA,SACA,YACA,SACA,SACA,WACA,WACA,YACA,WACA,YACA,YACA,UACA,UACA,OACA,SACA,OACA,UACA,QACA,OACA,MACA,YACA,SACA,WACA,WACA,SACA,UACA,QACA,OACA,SACA,WACA,WACA,QACA,QACA,SACA,SACA,WACA,YACA,QACA,WACA,QACA,UACA,SACA,UACA,SACA,UACA,SACA,UACA,SACA,WACA,UACA,WACA,YACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,SACA,WACA,WACA,YACA,QACA,SACA,QACA,MACA,MACA,QACA,MACA,YACA,WACA,WACA,SACA,WACA,UACA,WACA,YACA,SACA,YACA,OACA,UACA,YACA,YACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,SACA,YACA,SACA,UACA,YACA,YACA,WACA,WACA,SACA,QACA,SACA,UACA,SACA,UACA,UACA,OACA,MACA,OACA,WACA,OACA,MACA,QACA,WACA,QACA,OACA,UACA,WACA,OACA,WACA,UACA,WACA,UACA,QACA,SACA,WACA,OACA,WACA,QACA,UACA,YACA,UACA,OACA,SACA,OACA,OACA,OACA,OACA,UACA,OACA,OACA,WACA,UACA,YACA,YACA,YACA,WACA,QACA,UACA,WACA,SACA,WACA,WACA,YACA,YACA,MACA,YACA,UACA,QACA,QACA,OACA,QACA,QACA,SACA,UACA,SACA,WACA,WACA,WACA,WACA,UACA,WACA,UACA,WACA,WACA,QACA,WACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,SACA,UACA,UACA,WACA,WACA,UACA,YACA,YACA,UACA,UACA,SACA,UACA,UACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,YACA,WACA,YACA,YACA,WACA,WACA,UACA,WACA,SACA,OACA,QACA,OACA,UACA,UACA,WACA,UACA,WACA,WACA,YACA,YACA,WACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,UACA,YACA,YACA,YACA,UACA,WACA,WACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,YACA,WACA,YACA,WACA,UACA,UACA,WACA,WACA,WACA,YACA,YACA,WACA,UACA,YACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,WACA,WACA,UACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,UACA,WACA,WACA,WACA,UACA,YACA,WACA,YACA,MACA,SACA,UACA,YACA,UACA,YACA,SACA,WACA,SACA,QACA,QACA,YACA,UACA,WACA,WACA,WACA,SACA,SACA,UACA,SACA,WACA,UACA,QACA,QACA,SACA,UACA,SACA,YACA,OACA,WACA,YACA,SACA,WACA,WACA,UACA,WACA,SACA,UACA,WACA,QACA,WACA,OACA,YACA,QACA,UACA,WACA,YACA,UACA,YACA,SACA,QACA,YACA,YACA,SACA,QACA,UACA,UACA,WACA,YACA,SACA,UACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,WACA,WACA,YACA,SACA,UACA,YACA,SACA,SACA,QACA,UACA,UACA,SACA,WACA,SACA,SACA,UACA,UACA,UACA,SACA,UACA,YACA,SACA,UACA,YACA,QACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,UACA,UACA,YACA,WACA,WACA,WACA,QACA,SACA,SACA,UACA,SACA,WACA,UACA,QACA,YACA,SACA,WACA,YACA,OACA,WACA,UACA,QACA,YACA,UACA,SACA,YACA,YACA,SACA,WACA,QACA,YACA,WACA,SACA,SACA,UACA,UACA,WACA,SACA,QACA,QACA,SACA,UACA,WACA,UACA,SACA,SACA,QACA,SACA,WACA,WACA,YACA,WACA,WACA,YACA,WACA,UACA,SACA,OACA,SACA,WACA,UACA,SACA,UACA,UACA,YACA,WACA,UACA,YACA,QACA,SACA,UACA,WACA,YACA,MACA,WACA,UACA,QACA,YACA,YACA,YACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,QACA,OACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,QACA,OACA,YACA,YACA,SACA,YACA,QACA,SACA,WACA,QACA,YACA,SACA,YACA,YACA,QACA,UACA,UACA,SACA,UACA,YACA,SACA,UACA,YACA,QACA,YACA,QACA,SACA,WACA,UACA,UACA,WACA,QACA,UACA,QACA,SACA,UACA,UACA,SACA,WACA,UACA,WACA,WACA,UACA,WACA,YACA,YACA,WACA,WACA,SACA,UACA,YACA,YACA,UACA,WACA,YACA,WACA,UACA,UACA,WACA,UACA,YACA,WACA,QACA,WACA,QACA,SACA,YACA,SACA,WACA,YACA,UACA,OACA,OACA,OACA,OACA,OACA,QACA,OACA,UACA,WACA,SACA,OACA,YACA,UACA,QACA,MACA,OACA,OACA,OACA,UACA,UACA,WACA,YACA,SACA,QACA,SACA,QACA,SACA,QACA,SACA,SACA,QACA,SACA,WACA,QACA,OACA,YACA,UACA,YACA,UACA,SACA,OACA,OACA,UACA,OACA,SACA,SACA,QACA,WACA,WACA,UACA,WACA,YACA,OACA,SACA,WACA,WACA,SACA,YACA,WACA,UACA,SACA,WACA,QACA,OACA,SACA,WACA,WACA,SACA,UACA,SACA,UACA,WACA,SACA,SACA,UACA,YACA,UACA,UACA,QACA,SACA,WACA,QACA,UACA,OACA,WACA,YACA,UACA,QACA,SACA,MACA,WACA,SACA,WACA,UACA,WACA,YACA,SACA,UACA,WACA,YACA,UACA,WACA,WACA,UACA,YACA,UACA,SACA,WACA,YACA,UACA,UACA,SACA,YACA,YACA,UACA,YACA,WACA,YACA,YACA,SACA,UACA,WACA,WACA,UACA,WACA,YACA,WACA,UACA,SACA,UACA,SACA,YACA,YACA,YACA,SACA,UACA,YACA,UACA,QACA,UACA,YACA,UACA,YACA,YACA,WACA,UACA,SACA,UACA,UACA,YACA,UACA,UACA,WACA,SACA,YACA,WACA,QACA,SACA,YACA,UACA,UACA,SACA,QACA,WACA,QACA,QACA,QACA,SACA,SACA,WACA,UACA,UACA,YACA,QACA,YACA,WACA,WACA,YACA,QACA,UACA,YACA,UACA,YACA,UACA,WACA,YACA,WACA,WACA,UACA,UACA,UACA,UACA,YACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,UACA,WACA,YACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,QACA,QACA,YACA,SACA,WACA,YACA,SACA,YACA,WACA,WACA,YACA,WACA,UACA,QACA,UACA,YACA,WACA,SACA,YACA,YACA,WACA,WACA,QACA,WACA,SACA,SACA,WACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,UACA,UACA,WACA,YACA,QACA,SACA,QACA,YACA,QACA,UACA,MACA,UACA,SACA,YACA,SACA,SACA,MACA,OACA,YACA,OACA,UACA,QACA,YACA,OACA,SACA,SACA,QACA,WACA,YACA,YACA,UACA,WACA,OACA,QACA,SACA,QACA,WACA,YACA,WACA,SACA,WACA,YACA,QACA,UACA,WACA,SACA,SACA,UACA,SACA,SACA,WACA,YACA,OACA,QACA,YACA,WACA,UACA,WACA,WACA,YACA,SACA,YACA,UACA,WACA,UACA,SACA,QACA,UACA,OACA,SACA,WACA,UACA,YACA,SACA,QACA,WACA,QACA,WACA,QACA,UACA,YACA,YACA,UACA,UACA,QACA,UACA,UACA,SACA,YACA,YACA,WACA,UACA,SACA,QACA,UACA,UACA,YACA,YACA,YACA,QACA,QACA,QACA,UACA,YACA,QACA,OACA,SACA,YACA,WACA,YACA,QACA,QACA,OACA,SACA,SACA,OACA,SACA,QACA,SACA,WACA,YACA,WACA,YACA,WACA,QACA,SACA,SACA,OACA,OACA,SACA,SACA,UACA,SACA,UACA,UACA,WACA,UACA,SACA,OACA,SACA,QACA,SACA,WACA,OACA,SACA,QACA,YACA,SACA,SACA,SACA,UACA,SACA,UACA,UACA,UACA,QACA,OACA,SACA,SACA,OACA,UACA,SACA,QACA,SACA,SACA,UACA,YACA,WACA,QACA,YACA,WACA,WACA,UACA,WACA,OACA,YACA,WACA,UACA,YACA,YACA,YACA,WACA,SACA,WACA,WACA,WACA,UACA,YACA,SACA,QACA,UACA,SACA,SACA,UACA,SACA,UACA,UACA,WACA,WACA,SACA,SACA,YACA,SACA,SACA,SACA,SACA,YACA,YACA,UACA,SACA,WACA,UACA,WACA,YACA,UACA,YACA,YACA,SACA,YACA,UACA,YACA,YACA,YACA,SACA,SACA,UACA,SACA,WACA,WACA,SACA,YACA,YACA,UACA,WACA,WACA,YACA,WACA,UACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,YACA,UACA,WACA,WACA,WACA,YACA,YACA,SACA,SACA,UACA,SACA,WACA,WACA,WACA,WACA,YACA,UACA,UACA,WACA,UACA,UACA,YACA,SACA,YACA,YACA,UACA,SACA,WACA,YACA,SACA,SACA,UACA,UACA,SACA,SACA,SACA,WACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,YACA,QACA,SACA,SACA,YACA,YACA,UACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,YACA,UACA,WACA,WACA,QACA,QACA,UACA,UACA,YACA,WACA,WACA,WACA,UACA,QACA,UACA,YACA,UACA,SACA,SACA,SACA,WACA,SACA,YACA,OACA,SACA,SACA,UACA,UACA,WACA,SACA,WACA,WACA,YACA,YACA,QACA,UACA,YACA,SACA,UACA,SACA,YACA,UACA,UACA,UACA,WACA,SACA,WACA,YACA,YACA,WACA,YACA,YACA,UACA,UACA,WACA,WACA,YACA,WACA,SACA,SACA,SACA,WACA,UACA,SACA,UACA,YACA,YACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,WACA,SACA,WACA,UACA,SACA,UACA,QACA,WACA,SACA,YACA,SACA,YACA,YACA,UACA,UACA,WACA,YACA,YACA,YACA,OACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,YACA,UACA,QACA,SACA,WACA,UACA,SACA,WACA,WACA,WACA,WACA,SACA,SACA,QACA,UACA,UACA,YACA,YACA,YACA,WACA,WACA,UACA,WACA,YACA,YACA,YACA,SACA,WACA,WACA,WACA,WACA,SACA,WACA,UACA,WACA,SACA,SACA,WACA,YACA,YACA,SACA,WACA,YACA,SACA,YACA,YACA,UACA,UACA,UACA,UACA,WACA,SACA,SACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,YACA,YACA,QACA,SACA,UACA,SACA,UACA,UACA,WACA,QACA,SACA,UACA,UACA,UACA,SACA,UACA,YACA,WACA,WACA,UACA,YACA,YACA,SACA,YACA,SACA,WACA,UACA,YACA,UACA,UACA,WACA,YACA,SACA,SACA,WACA,YACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,UACA,QACA,SACA,UACA,OACA,SACA,SACA,WACA,UACA,UACA,WACA,SACA,OACA,SACA,UACA,OACA,UACA,QACA,QACA,UACA,SACA,OACA,OACA,QACA,UACA,OACA,UACA,WACA,WACA,UACA,SACA,WACA,UACA,OACA,SACA,OACA,UACA,UACA,QACA,QACA,YACA,WACA,YACA,YACA,UACA,WACA,SACA,UACA,QACA,UACA,OACA,QACA,WACA,SACA,WACA,SACA,SACA,WACA,YACA,UACA,WACA,YACA,WACA,QACA,QACA,QACA,OACA,OACA,SACA,SACA,OACA,SACA,UACA,UACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,UACA,QACA,SACA,QACA,SACA,SACA,UACA,SACA,UACA,OACA,SACA,SACA,MACA,SACA,OACA,SACA,WACA,UACA,QACA,YACA,UACA,SACA,UACA,QACA,OACA,SACA,UACA,QACA,OACA,OACA,OACA,MACA,UACA,WACA,YACA,SACA,YACA,SACA,YACA,UACA,WACA,QACA,UACA,SACA,YACA,YACA,SACA,WACA,UACA,OACA,OACA,UACA,QACA,OACA,QACA,OACA,QACA,SACA,WACA,SACA,SACA,QACA,SACA,QACA,OACA,WACA,SACA,UACA,YACA,YACA,OACA,SACA,WACA,WACA,WACA,YACA,SACA,UACA,WACA,UACA,YACA,UACA,SACA,WACA,UACA,UACA,YACA,UACA,YACA,YACA,WACA,QACA,WACA,YACA,OACA,QACA,UACA,YACA,QACA,UACA,YACA,UACA,OACA,YACA,QACA,UACA,WACA,QACA,YACA,YACA,UACA,WACA,WACA,YACA,QACA,QACA,SACA,UACA,QACA,UACA,SACA,QACA,YACA,MACA,UACA,SACA,UACA,WACA,QACA,UACA,WACA,UACA,WACA,OACA,UACA,UACA,WACA,QACA,YACA,SACA,WACA,YACA,SACA,QACA,UACA,YACA,WACA,QACA,YACA,SACA,WACA,YACA,SACA,WACA,YACA,WACA,UACA,UACA,YACA,QACA,QACA,WACA,QACA,QACA,UACA,QACA,SACA,YACA,YACA,SACA,YACA,SACA,UACA,QACA,WACA,SACA,YACA,UACA,WACA,WACA,SACA,WACA,WACA,WACA,YACA,YACA,QACA,UACA,UACA,SACA,WACA,SACA,WACA,YACA,SACA,SACA,UACA,YACA,WACA,WACA,UACA,UACA,WACA,QACA,QACA,WACA,YACA,SACA,UACA,WACA,YACA,YACA,SACA,UACA,SACA,YACA,SACA,UACA,WACA,WACA,QACA,SACA,WACA,WACA,WACA,SACA,WACA,UACA,UACA,UACA,SACA,WACA,YACA,YACA,WACA,OACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,SACA,UACA,OACA,SACA,WACA,YACA,YACA,YACA,YACA,WACA,QACA,YACA,SACA,SACA,SACA,WACA,YACA,SACA,SACA,YACA,UACA,WACA,QACA,UACA,UACA,SACA,WACA,UACA,UACA,SACA,WACA,QACA,YACA,YACA,UACA,UACA,WACA,SACA,QACA,SACA,UACA,YACA,UACA,SACA,QACA,QACA,WACA,UACA,YACA,UACA,QACA,QACA,UACA,UACA,QACA,UACA,WACA,QACA,SACA,QACA,UACA,QACA,YACA,UACA,UACA,UACA,YACA,QACA,SACA,OACA,QACA,QACA,QACA,QACA,UACA,SACA,WACA,SACA,SACA,UACA,WACA,YACA,SACA,UACA,SACA,UACA,QACA,UACA,YACA,UACA,QACA,OACA,QACA,YACA,QACA,QACA,WACA,UACA,WACA,WACA,QACA,WACA,YACA,WACA,UACA,UACA,YACA,YACA,UACA,YACA,SACA,YACA,SACA,QACA,QACA,UACA,WACA,WACA,SACA,WACA,UACA,UACA,QACA,UACA,YACA,YACA,WACA,QACA,SACA,WACA,WACA,YACA,WACA,SACA,SACA,SACA,SACA,SACA,UACA,WACA,YACA,SACA,QACA,SACA,WACA,UACA,UACA,YACA,OACA,QACA,OACA,MACA,UACA,WACA,UACA,SACA,SACA,SACA,OACA,UACA,WACA,WACA,SACA,SACA,UACA,OACA,YACA,QACA,OACA,OACA,SACA,YACA,SACA,YACA,SACA,WACA,SACA,UACA,YACA,SACA,UACA,SACA,WACA,WACA,UACA,SACA,UACA,MACA,QACA,SACA,SACA,SACA,UACA,WACA,YACA,UACA,UACA,QACA,UACA,WACA,YACA,UACA,UACA,OACA,SACA,SACA,WACA,SACA,UACA,YACA,WACA,WACA,UACA,SACA,SACA,SACA,OACA,QACA,QACA,QACA,SACA,UACA,UACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,SACA,YACA,UACA,WACA,WACA,QACA,UACA,WACA,WACA,UACA,QACA,YACA,UACA,OACA,UACA,UACA,WACA,YACA,SACA,QACA,OACA,UACA,QACA,WACA,YACA,UACA,WACA,QACA,UACA,OACA,OACA,QACA,QACA,QACA,SACA,QACA,YACA,SACA,SACA,UACA,QACA,SACA,YACA,UACA,WACA,YACA,WACA,WACA,QACA,WACA,YACA,SACA,OACA,OACA,SACA,WACA,SACA,SACA,UACA,WACA,SACA,OACA,YACA,UACA,SACA,OACA,OACA,QACA,QACA,MACA,QACA,UACA,YACA,UACA,WACA,UACA,QACA,WACA,QACA,YACA,QACA,QACA,QACA,UACA,QACA,OACA,SACA,YACA,YACA,UACA,QACA,UACA,SACA,UACA,SACA,SACA,WACA,YACA,SACA,WACA,QACA,UACA,UACA,OACA,QACA,QACA,SACA,QACA,QACA,SACA,WACA,QACA,QACA,UACA,WACA,SACA,UACA,SACA,QACA,UACA,UACA,QACA,QACA,WACA,YACA,YACA,UACA,YACA,WACA,WACA,YACA,YACA,YACA,WACA,UACA,WACA,WACA,YACA,WACA,QACA,OACA,QACA,UACA,SACA,WACA,QACA,YACA,YACA,WACA,YACA,UACA,WACA,UACA,WACA,SACA,YACA,YACA,WACA,YACA,SACA,QACA,YACA,UACA,WACA,YACA,UACA,WACA,QACA,OACA,SACA,YACA,SACA,SACA,QACA,SACA,QACA,QACA,UACA,SACA,UACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,YACA,UACA,YACA,WACA,YACA,UACA,WACA,SACA,WACA,WACA,SACA,WACA,WACA,WACA,UACA,WACA,UACA,UACA,WACA,SACA,SACA,YACA,SACA,SACA,UACA,QACA,WACA,SACA,QACA,QACA,QACA,WACA,SACA,SACA,WACA,YACA,UACA,UACA,WACA,SACA,UACA,SACA,QACA,SACA,SACA,SACA,QACA,QACA,QACA,SACA,YACA,YACA,SACA,SACA,SACA,SACA,SACA,OACA,OACA,OACA,UACA,WACA,WACA,QACA,SACA,WACA,SACA,WACA,WACA,YACA,SACA,WACA,YACA,YACA,WACA,UACA,YACA,QACA,WACA,WACA,SACA,SACA,SACA,YACA,UACA,YACA,YACA,SACA,QACA,UACA,QACA,QACA,UACA,WACA,WACA,YACA,UACA,WACA,YACA,YACA,YACA,WACA,WACA,UACA,UACA,QACA,QACA,QACA,SACA,WACA,YACA,SACA,UACA,WACA,WACA,YACA,UACA,QACA,WACA,UACA,YACA,UACA,WACA,SACA,WACA,UACA,WACA,UACA,YACA,UACA,UACA,WACA,QACA,QACA,SACA,YACA,SACA,UACA,SACA,UACA,YACA,UACA,QACA,YACA,WACA,WACA,YACA,QACA,QACA,QACA,YACA,WACA,YACA,YACA,UACA,OACA,SACA,UACA,OACA,SACA,UACA,YACA,YACA,WACA,YACA,UACA,OACA,QACA,UACA,UACA,YACA,SACA,WACA,YACA,QACA,YACA,YACA,UACA,WACA,UACA,WACA,WACA,WACA,SACA,WACA,SACA,UACA,YACA,OACA,SACA,QACA,QACA,QACA,QACA,QACA,YACA,YACA,YACA,UACA,QACA,QACA,SACA,QACA,QACA,YACA,YACA,WACA,UACA,UACA,WACA,YACA,WACA,UACA,YACA,YACA,QACA,QACA,QACA,WACA,UACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,UACA,QACA,QACA,SACA,SACA,SACA,WACA,YACA,QACA,SACA,UACA,SACA,WACA,SACA,SACA,SACA,SACA,WACA,SACA,WACA,SACA,SACA,WACA,YACA,WACA,YACA,SACA,YACA,UACA,WACA,QACA,SACA,QACA,UACA,UACA,UACA,WACA,SACA,QACA,UACA,UACA,SACA,QACA,UACA,WACA,SACA,UACA,YACA,QACA,QACA,UACA,UACA,WACA,QACA,SACA,WACA,SACA,UACA,YACA,UACA,WACA,SACA,QACA,YACA,YACA,YACA,UACA,WACA,WACA,WACA,YACA,UACA,WACA,SACA,WACA,UACA,YACA,WACA,YACA,YACA,WACA,SACA,UACA,WACA,YACA,YACA,YACA,UACA,YACA,YACA,UACA,UACA,WACA,YACA,YACA,UACA,WACA,SACA,WACA,WACA,UACA,SACA,SACA,YACA,UACA,YACA,OACA,UACA,SACA,SACA,OACA,WACA,YACA,UACA,SACA,YACA,WACA,QACA,UACA,QACA,WACA,WACA,WACA,SACA,UACA,UACA,UACA,SACA,OACA,SACA,WACA,YACA,SACA,YACA,YACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,SACA,WACA,SACA,UACA,YACA,UACA,YACA,SACA,WACA,UACA,YACA,YACA,SACA,UACA,WACA,UACA,UACA,UACA,UACA,WACA,UACA,YACA,YACA,WACA,SACA,WACA,UACA,YACA,WACA,QACA,UACA,UACA,WACA,YACA,YACA,OACA,YACA,UACA,YACA,OACA,WACA,QACA,OACA,QACA,QACA,QACA,QACA,QACA,SACA,UACA,UACA,YACA,YACA,UACA,WACA,WACA,WACA,UACA,WACA,QACA,QACA,SACA,SACA,UACA,UACA,QACA,SACA,QACA,QACA,QACA,WACA,WACA,YACA,WACA,UACA,UACA,WACA,UACA,WACA,WACA,YACA,YACA,QACA,SACA,UACA,UACA,QACA,WACA,SACA,SACA,YACA,UACA,YACA,UACA,SACA,WACA,QACA,OACA,UACA,WACA,UACA,UACA,WACA,UACA,YACA,MACA,UACA,OACA,SACA,SACA,WACA,OACA,QACA,SACA,WACA,QACA,SACA,OACA,SACA,UACA,UACA,UACA,WACA,UACA,WACA,WACA,UACA,UACA,OACA,YACA,SACA,SACA,UACA,QACA,SACA,SACA,WACA,OACA,SACA,QACA,YACA,UACA,QACA,WACA,SACA,WACA,SACA,QACA,SACA,QACA,OACA,OACA,UACA,YACA,OACA,QACA,QACA,WACA,WACA,UACA,UACA,YACA,QACA,SACA,WACA,UACA,UACA,YACA,WACA,WACA,QACA,UACA,QACA,QACA,SACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,SACA,QACA,QACA,QACA,WACA,SACA,SACA,WACA,YACA,SACA,SACA,SACA,WACA,SACA,YACA,SACA,WACA,YACA,YACA,UACA,WACA,OACA,QACA,WACA,WACA,OACA,YACA,UACA,QACA,QACA,QACA,SACA,WACA,UACA,OACA,QACA,UACA,UACA,YACA,YACA,WACA,UACA,OACA,SACA,OACA,OACA,QACA,SACA,UACA,YACA,UACA,SACA,WACA,SACA,SACA,WACA,SACA,WACA,OACA,UACA,OACA,SACA,SACA,SACA,UACA,YACA,SACA,SACA,SACA,QACA,UACA,QACA,WACA,UACA,QACA,UACA,YACA,UACA,UACA,WACA,YACA,QACA,UACA,SACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,QACA,QACA,SACA,WACA,WACA,OACA,YACA,WACA,YACA,UACA,QACA,SACA,OACA,UACA,UACA,YACA,SACA,SACA,QACA,WACA,SACA,QACA,WACA,YACA,WACA,UACA,YACA,UACA,UACA,WACA,WACA,WACA,UACA,YACA,SACA,WACA,WACA,UACA,QACA,SACA,YACA,WACA,UACA,YACA,UACA,WACA,WACA,UACA,OACA,SACA,WACA,UACA,UACA,UACA,WACA,WACA,SACA,WACA,UACA,UACA,YACA,SACA,WACA,QACA,SACA,QACA,QACA,UACA,QACA,SACA,YACA,UACA,WACA,WACA,YACA,QACA,MACA,QACA,WACA,UACA,UACA,UACA,MACA,UACA,QACA,SACA,WACA,QACA,SACA,UACA,WACA,WACA,YACA,OACA,SACA,UACA,SACA,SACA,OACA,QACA,OACA,MACA,QACA,QACA,QACA,WACA,SACA,YACA,SACA,QACA,QACA,UACA,YACA,OACA,WACA,QACA,QACA,QACA,YACA,UACA,UACA,WACA,SACA,SACA,UACA,SACA,QACA,OACA,QACA,WACA,YACA,QACA,YACA,WACA,SACA,YACA,SACA,YACA,YACA,WACA,UACA,YACA,YACA,YACA,YACA,YACA,UACA,UACA,UACA,YACA,WACA,SACA,SACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,UACA,WACA,WACA,YACA,UACA,YACA,YACA,UACA,UACA,SACA,YACA,YACA,UACA,QACA,SACA,UACA,SACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,SACA,YACA,YACA,WACA,UACA,UACA,UACA,UACA,YACA,UACA,YACA,WACA,QACA,YACA,UACA,YACA,SACA,YACA,YACA,WACA,WACA,YACA,YACA,WACA,WACA,YACA,WACA,YACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,UACA,SACA,YACA,UACA,YACA,WACA,UACA,WACA,UACA,SACA,WACA,SACA,YACA,UACA,WACA,YACA,WACA,YACA,WACA,UACA,YACA,SACA,YACA,YACA,YACA,SACA,WACA,UACA,YACA,UACA,WACA,WACA,YACA,YACA,UACA,WACA,YACA,SACA,YACA,WACA,WACA,YACA,WACA,WACA,WACA,WACA,SACA,UACA,WACA,YACA,YACA,WACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,YACA,WACA,UACA,YACA,SACA,SACA,UACA,WACA,UACA,UACA,YACA,YACA,QACA,YACA,YACA,YACA,YACA,YACA,QACA,WACA,YACA,SACA,WACA,OACA,YACA,WACA,WACA,UACA,SACA,YACA,YACA,UACA,UACA,UACA,WACA,WACA,YACA,UACA,SACA,YACA,YACA,YACA,YACA,UACA,WACA,WACA,QACA,YACA,WACA,WACA,WACA,YACA,YACA,UACA,WACA,WACA,YACA,UACA,SACA,YACA,WACA,WACA,WACA,WACA,YACA,YACA,YACA,YACA,UACA,WACA,UACA,YACA,UACA,WACA,YACA,UACA,YACA,WACA,UACA,YACA,YACA,WACA,YACA,SACA,WACA,SACA,YACA,WACA,UACA,WACA,WACA,YACA,WACA,YACA,YACA,YACA,YACA,WACA,SACA,YACA,WACA,UACA,WACA,UACA,YACA,YACA,SACA,SACA,YACA,YACA,YACA,WACA,SACA,YACA,YACA,WACA,SACA,YACA,YACA,UACA,SACA,YACA,SACA,WACA,WACA,SACA,SACA,WACA,UACA,WACA,YACA,YACA,UACA,WACA,WACA,YACA,WACA,WACA,SACA,WACA,YACA,SACA,YACA,YACA,WACA,WACA,WACA,YACA,YACA,YACA,WACA,YACA,WACA,WACA,SACA,WACA,WACA,SACA,WACA,WACA,YACA,WACA,WACA,YACA,YACA,WACA,YACA,YACA,WACA,YACA,UACA,YACA,YACA,WACA,WACA,WACA,SACA,UACA,WACA,YACA,UACA,UACA,YACA,WACA,UACA,WACA,WACA,SACA,QACA,QACA,UACA,WACA,WACA,YACA,SACA,YACA,YACA,YACA,YACA,UACA,YACA,SACA,UACA,WACA,UACA,UACA,WACA,SACA,UACA,WACA,WACA,YACA,WACA,YACA,WACA,WACA,YACA,UACA,WACA,YACA,SACA,WACA,YACA,UACA,QACA,YACA,SACA,WACA,YACA,SACA,UACA,YACA,YACA,YACA,SACA,YACA,WACA,UACA,UACA,YACA,YACA,QACA,SACA,UACA,WACA,YACA,SACA,UACA,UACA,WACA,SACA,SACA,SACA,WACA,YACA,SACA,OACA,QACA,UACA,WACA,UACA,SACA,SACA,UACA,SACA,UACA,WACA,UACA,UACA,WACA,WACA,UACA,SACA,UACA,SACA,WACA,SACA,SACA,UACA,QACA,SACA,WACA,UACA,SACA,SACA,YACA,UACA,SACA,QACA,UACA,OACA,YACA,OACA,QACA,QACA,UACA,UACA,UACA,SACA,SACA,QACA,UACA,SACA,SACA,WACA,WACA,WACA,YACA,UACA,YACA,UACA,QACA,SACA,SACA,YACA,QACA,UACA,SACA,SACA,WACA,UACA,YACA,WACA,WACA,SACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,SACA,WACA,OACA,QACA,SACA,YACA,SACA,WACA,SACA,WACA,UACA,SACA,YACA,WACA,WACA,YACA,UACA,QACA,QACA,YACA,WACA,UACA,UACA,SACA,QACA,UACA,SACA,YACA,WACA,UACA,OACA,SACA,OACA,UACA,OACA,WACA,YACA,SACA,QACA,OACA,WACA,UACA,QACA,WACA,SACA,UACA,WACA,YACA,WACA,UACA,UACA,YACA,WACA,UACA,UACA,YACA,WACA,SACA,SACA,QACA,QACA,UACA,WACA,QACA,OACA,YACA,UACA,WACA,UACA,UACA,SACA,WACA,UACA,QACA,QACA,WACA,WACA,UACA,WACA,YACA,UACA,YACA,QACA,WACA,WACA,UACA,WACA,QACA,UACA,OACA,WACA,SACA,UACA,UACA,QACA,SACA,UACA,QACA,QACA,SACA,YACA,MACA,QACA,SACA,QACA,QACA,QACA,SACA,QACA,OACA,SACA,OACA,UACA,SACA,SACA,QACA,OACA,UACA,SACA,UACA,SACA,WACA,YACA,YACA,WACA,YACA,UACA,SACA,SACA,YACA,UACA,UACA,WACA,YACA,UACA,OACA,UACA,QACA,QACA,WACA,SACA,OACA,WACA,SACA,OACA,QACA,QACA,WACA,QACA,YACA,SACA,QACA,WACA,UACA,QACA,WACA,UACA,WACA,SACA,MACA,OACA,SACA,QACA,SACA,QACA,QACA,YACA,UACA,OACA,OACA,YACA,WACA,UACA,SACA,WACA,WACA,WACA,WACA,SACA,WACA,SACA,YACA,UACA,SACA,YACA,OACA,OACA,QACA,UACA,OACA,OACA,UACA,SACA,WACA,SACA,OACA,QACA,WACA,SACA,OACA,SACA,OACA,OACA,WACA,QACA,UACA,SACA,SACA,WACA,SACA,MACA,OACA,YACA,YACA,YACA,YACA,YACA,UACA,OACA,OACA,SACA,OACA,QACA,OACA,OACA,UACA,UACA,YACA,QACA,YACA,YACA,QACA,QACA,QACA,MACA,UACA,QACA,SACA,WACA,UACA,WACA,SACA,UACA,UACA,UACA,UACA,QACA,UACA,UACA,YACA,UACA,WACA,UACA,YACA,UACA,OACA,QACA,QACA,MACA,UACA,UACA,OACA,OACA,OACA,WACA,WACA,SACA,WACA,QACA,UACA,OACA,MACA,YACA,UACA,QACA,MACA,SACA,QACA,QACA,OACA,SACA,SACA,OACA,QACA,MACA,UACA,QACA,MACA,WACA,OACA,YACA,QACA,YACA,UACA,UACA,QACA,OACA,MACA,SACA,SACA,OACA,SACA,YACA,YACA,UACA,QCjmPK,MAAMC,GAIXthB,YAAYuhB,EAAkBC,GAC5Bte,KAAKqe,SAAWA,EAChBre,KAAKse,KAAOA,CACd,E,2SCOF,MAAMC,GAA2C,CAC/C1f,OAAQ,GACR2f,WAAW,EACXC,QAAQ,EACRC,UAAW,EACXC,WAAW,EACXC,aAAc,EACdC,WAAW,EACXC,aAAc,EACdC,SAAS,EACTC,WAAY,EACZvT,KAAM,WACNwT,SAAU,EACVC,cAAe,IACflB,YAAY,EACZC,eAAe,GAKV,MAAMkB,GACXriB,YACUoa,EACAkI,EACAlc,GAFA,KAAAgU,cAAAA,EACA,KAAAkI,cAAAA,EACA,KAAAlc,aAAAA,CACP,CAEGmc,iBAAiBrG,G,0CAErB,MAAMsG,EAAI/Y,OAAOC,OA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A0sE,GACAx4B,GACAD,GACA1qC,GACA6qC,GACAlsD,GACAyhB,GACA82B,GACAxgC,GACA9X,GACAC,GACA4kF,GACAvV,GACAprB,GACA1L,GACAorC,KAGJ,CAAE7oF,QAASqxC,GAA+Bi0C,SAAU,IACpD,CACEtlF,QAASwpF,GACTlE,SAAU,GACVq/D,KAAM,CAACz/I,KAET,CACElF,QAASumB,GACT++D,SAAU,GACVq/D,KAAM,CACJt+H,GACA4mD,GACAxmD,GACAvhB,KAGJ,CACElF,QAASsmB,GACTg/D,SAAU,GACVq/D,KAAM,CACJ5zF,GACAC,GACAE,GACA7qC,GACAvf,GACA9B,GACAggD,GACA//C,GACAC,GACAH,GACAwhB,GACAuiE,GACAD,KAGJ,CACE7oF,QAASkF,GACTogF,SAAU,GACVq/D,KAAM,CACJj7D,GACAhB,GACAD,GACA1rE,GACA0sE,GACAd,GACAC,KAGJ,CACE5oF,QAASypF,GACTnE,SAAU,GACVq/D,KAAM,CAACj7D,GAAwBhB,GAAgBC,KAEjD,CACE3oF,QAAS+xE,GACTuT,SAAU,GACVq/D,KAAM,CACJ3zF,GACAD,GACAj0C,GACAuJ,GACA0X,GACA74B,KAGJ,CACElF,QAASglD,GACTsgC,SAAU,GACVq/D,KAAM,CAAC5nI,GAAYhb,KAErB,CACE/B,QAASspF,GACThE,SAAU,GACVq/D,KAAM,CACJ/jH,GACA5C,GACAlhB,GACA/V,GACA8hF,GACA9rE,GACA7X,GACAH,GACAC,KAGJ,CACEhF,QAAS+9B,GACTunD,SAAU+sD,GACVsS,KAAM,CAACn8D,KAET,CACExoF,QAASmpF,GACTu7D,WAuJN,SACEO,EACAx5I,EACAwiH,GAEA,OAAOhjH,GAAY,yBACf,IAAI+lH,GAAwCi0B,EAAuBx5I,EAAYwiH,GAC/E,IAAID,GAA6Bi3B,EAAuBx5I,EAAYwiH,EAC1E,EA9JM02B,KAAM,CAAC5mH,GAAkChhB,GAAYksE,KAEvD,CACEjpF,QAASopF,GACT9D,SAAU,GACVq/D,KAAM,CAAC7nI,GAAuB5X,GAAyB6X,KAEzD,CACE/c,QAASmxD,GAC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ACK,IAAIgB,SACH,GAAsB7+G,EAAO69G,SCjCpC,SACL79G,EACA69G,GAEA,OAAOF,GACL39G,EACA,uBACA69G,GACA,IAAY,8CAAIoC,SAA2BH,GAA6B9/G,EAAO69G,GAAM,KAEzF,CDwBcyC,CAA4BtgH,EAAO69G,IAGtC,IAAItF,EACb,KACF,C,slBEjBO,SAAegI,GACpBvgH,EACA69G,G,0CAEA,MAAM2C,QAAgB7C,GACpB39G,EACA,eACA69G,GACA,IAAW,mCACT,aAAM,IAAI,SACFsC,GAA0BngH,EAAO69G,SACjCuC,GAA4BpgH,EAAO69G,SACnCwC,GAA4BrgH,EAAO69G,SACnCO,GAAkBp+G,EAAO69G,SCxBhC,SACL79G,EACA69G,GAEA,OAAOF,GACL39G,EACA,wBACA69G,GACA,IAAW,mCACT,WAAI,SACIsC,GAA0BngH,EAAO69G,SACjCuC,GAA4BpgH,EAAO69G,GACzCA,EAAK4C,6BAA6Bz0B,a,KAG1C,CDUc00B,CAA6B1gH,EAAO69G,GAC1CA,EAAK8C,oBAAoB30B,aACzB6xB,EAAK8C,oBAAoB10B,gB,MAI/B,OADAu0B,EAAQr8I,OACDq8I,CACT,G,4SEtCO,SAASI,GACd5gH,EACA69G,GAEA,OAAOF,GACL39G,EACA,sBACA69G,GACA,IAAY,8CAAI9F,SAAiCwI,GAAoBvgH,EAAO69G,GAAM,KAEtF,C,2SCJO,SAASgD,GACd7gH,EACA69G,GAEA,OAAOF,GACL39G,EACA,gBACA69G,GACA,IAAW,mCACT,WAAI7F,SACIuI,GAAoBvgH,EAAO69G,SAC3B+C,GAA2B5gH,EAAO69G,G,KAGhD,C,2SCrBO,SAASiD,GACd9gH,EACA69G,GAEA,OAAOF,GACL39G,EACA,eACA69G,GACA,IAAY,8CAAI,SAAmB0C,GAAoBvgH,EAAO69G,GAAM,KAExE,C,2SCfO,SAASkD,GACd/gH,EACA69G,GAEA,OAAOF,GACL39G,EACA,eACA69G,GACA,IAAY,8CAAI,SAAmBsC,GAA0BngH,EAAO69G,GAAM,KAE9E,C,2SCPO,SAASmD,GACdhhH,EACA69G,GAEA,OAAOF,GACL39G,EACA,qBACA69G,GACA,IAAW,mCACT,WAAIhmJ,SACI0oJ,GAAoBvgH,EAAO69G,SAC3BO,GAAkBp+G,EAAO69G,G,KAGvC,CCzBe,MAAMoD,GACnB7uJ,KAAKmvB,EAAoBC,EAAW,CAAC,GACnC,OAAO,eAAuBD,EAAYC,EAC5C,ECGK,SAAS0/H,GACdlhH,EACA69G,GAEA,OAAOF,GAAQ39G,EAAO,mBAAoB69G,GAAM,IAAM,IAAIoD,IAC5D,C,2SCGO,SAASE,GACdnhH,EACA69G,GAEA,OAAOF,GACL39G,EACA,uBACA69G,GACA,IAAW,mCACT,WAAIpkI,SACIynI,GAAwBlhH,EAAO69G,GACrCA,EAAKuD,4BAA4B1nI,uBACjCmkI,EAAKuD,4BAA4BznI,kBACjCkkI,EAAKuD,4BAA4Bn+I,I,KAGzC,C,2SCFO,SAASo+I,GACdrhH,EACA69G,GAEA,OAAOF,GACL39G,EACA,aACA69G,GACA,IAAW,mCACT,WAAI,SACIiD,GAAoB9gH,EAAO69G,SAC3BsD,GAA4BnhH,EAAO69G,SACnCmD,GAA0BhhH,EAAO69G,SACjCkD,GAAoB/gH,EAAO69G,GACjCA,EAAKyD,kBAAkBzvD,eACvBgsD,EAAKyD,kBAAkBpgD,gB,KAG/B,C,2SC/CO,MAAMqgD,WAA6B,GACxBrtC,uBAAuBL,G,4IACrC,MAAkB,cAAdA,SACIllH,KAAKikH,oBAAoBl0F,wBACH,QAApB,QAAM/vB,KAAK6lB,gBAAS,eAAE4R,cAGnB,EAAM8tF,uBAAsB,UAACL,E,gTCgBvC,SAAS2tC,GACdxhH,EACA69G,GAEA,OAAOF,GACL39G,EACA,gBACA69G,GACA,IAAW,mCACT,WAAI0D,SACIzB,GAA6B9/G,EAAO69G,SACpC,GAAsB79G,EAAO69G,SAC7BsD,GAA4BnhH,EAAO69G,SACnCO,GAAkBp+G,EAAO69G,SACzB0C,GAAoBvgH,EAAO69G,G,KAGzC,C,2SCzCO,MAAe,GAsEpBpyJ,YACYg2J,EACAC,EACAC,GAFA,KAAAF,eAAAA,EACA,KAAAC,iBAAAA,EACA,KAAAC,eAAAA,EAvEZ,KAAAC,4BAAwC,CAAC,MACzC,KAAAC,cAAgB,KAGhB,KAAAC,YAAc,IAAI/gJ,IAAoB,CACpC,CAAC,KAAM,aACP,CAAC,KAAM,kBACP,CAAC,KAAM,gBACP,CAAC,KAAM,cACP,CAAC,KAAM,aACP,CAAC,KAAM,SACP,CAAC,KAAM,kBACP,CAAC,KAAM,UACP,CAAC,KAAM,WACP,CAAC,KAAM,SACP,CAAC,KAAM,WACP,CAAC,KAAM,YACP,CAAC,KAAM,WACP,CAAC,QAAS,qBACV,CAAC,QAAS,mBACV,CAAC,KAAM,aACP,CAAC,KAAM,WACP,CAAC,KAAM,SACP,CAAC,KAAM,WACP,CAAC,KAAM,SACP,CAAC,KAAM,SACP,CAAC,MAAO,mBACR,CAAC,KAAM,YACP,CAAC,KAAM,SACP,CAAC,KAAM,UACP,CAAC,KAAM,YACP,CAAC,KAAM,UACP,CAAC,KAAM,oBACP,CAAC,KAAM,YACP,CAAC,KAAM,OACP,CAAC,KAAM,WACP,CAAC,KAAM,8BACP,CAAC,KAAM,SACP,CAAC,KAAM,OACP,CAAC,KAAM,kBACP,CAAC,KAAM,aACP,CAAC,KAAM,cACP,CAAC,KAAM,UACP,CAAC,KAAM,kBACP,CAAC,KAAM,cACP,CAAC,KAAM,iBACP,CAAC,KAAM,UACP,CAAC,QAAS,uBACV,CAAC,QAAS,aACV,CAAC,KAAM,UACP,CAAC,KAAM,WACP,CAAC,KAAM,SACP,CAAC,KAAM,cACP,CAAC,KAAM,gCACP,CAAC,KAAM,UACP,CAAC,KAAM,WACP,CAAC,KAAM,OACP,CAAC,KAAM,UACP,CAAC,KAAM,cACP,CAAC,KAAM,cACP,CAAC,QAAS,YACV,CAAC,QAAS,YAIF,KAAAghJ,gBAAuB,CAAC,EACxB,KAAAC,eAAsB,CAAC,EAO/BrzJ,KAAK8yJ,eAAiBA,EAAe3qJ,QAAQ,IAAK,IACpD,CAEMqN,KAAKwlB,G,0CACT,GAAIh7B,KAAKmO,OACP,MAAM,IAAI8C,MAAM,6BAElB,GAAwC,MAApCjR,KAAKizJ,6BAAmF,IAA5CjzJ,KAAKizJ,4BAA4Bp0J,OAC/E,MAAM,IAAIoS,MAAM,wCAGlBjR,KAAKmO,QAAS,EACdnO,KAAKi7B,kBAA8B,MAAVD,EAAiBA,EAASh7B,KAAK8yJ,eAExD,IACE9yJ,KAAK4S,SAAW,IAAI0gJ,KAAKC,SAASvzJ,KAAKi7B,kBAAmB,CACxDu4H,SAAS,EACTC,YAAa,Q,CAEf,SACAzzJ,KAAK4S,SAAW,I,EAGwD,IAAtE5S,KAAKizJ,4BAA4BnyJ,QAAQd,KAAKi7B,qBAChDj7B,KAAKi7B,kBAAoBj7B,KAAKi7B,kBAAkB37B,MAAM,EAAG,IAEiB,IAAtEU,KAAKizJ,4BAA4BnyJ,QAAQd,KAAKi7B,qBAChDj7B,KAAKi7B,kBAAoBj7B,KAAKkzJ,gBAIL,MAAzBlzJ,KAAK+yJ,yBACD/yJ,KAAK0zJ,aAAa1zJ,KAAKi7B,kBAAmBj7B,KAAKqzJ,gBACjDrzJ,KAAKi7B,oBAAsBj7B,KAAKkzJ,sBAC5BlzJ,KAAK0zJ,aAAa1zJ,KAAKkzJ,cAAelzJ,KAAKozJ,kBAGvD,G,CAEAnzJ,EAAEL,EAAYC,EAAaC,EAAaC,GACtC,OAAOC,KAAK2zJ,UAAU/zJ,EAAIC,EAAIC,EAAIC,EACpC,CAEA4zJ,UAAU/zJ,EAAYC,EAAsBC,EAAsBC,GAChE,IAAIkK,EAuBJ,OApBEA,EADEjK,KAAKqzJ,eAAe37I,eAAe9X,IAAOI,KAAKqzJ,eAAezzJ,GACvDI,KAAKqzJ,eAAezzJ,GAEpBI,KAAKozJ,gBAAgB17I,eAAe9X,IAAOI,KAAKozJ,gBAAgBxzJ,GAChEI,KAAKozJ,gBAAgBxzJ,GAErB,GAGI,KAAXqK,IACQ,MAANpK,IACFoK,EAASA,EAAOoI,MAAM,UAAU9S,KAAKM,EAAGgB,aAEhC,MAANf,IACFmK,EAASA,EAAOoI,MAAM,UAAU9S,KAAKO,EAAGe,aAEhC,MAANd,IACFkK,EAASA,EAAOoI,MAAM,UAAU9S,KAAKQ,EAAGc,cAIrCoJ,CACT,CAEgBypJ,aAAa14H,EAAgB44H,G,0CAC3C,MAAMC,EAAkB74H,EAAO7yB,QAAQ,IAAK,KACtC2rJ,QAAgB9zJ,KAAKgzJ,eAAea,GAC1C,IAAK,MAAMphJ,KAAQqhJ,EAEjB,GAAKA,EAAQp8I,eAAejF,KAG5BmhJ,EAAYnhJ,GAAQqhJ,EAAQrhJ,GAAM6e,QAE9BwiI,EAAQrhJ,GAAMshJ,cAChB,IAAK,MAAMC,KAAaF,EAAQrhJ,GAAMshJ,aAAc,CAClD,IACGD,EAAQrhJ,GAAMshJ,aAAar8I,eAAes8I,KAC1CF,EAAQrhJ,GAAMshJ,aAAaC,GAAWC,QAEvC,SAGF,MAAMC,EAAe,MAAQF,EAAUxgJ,cAAgB,MACvD,IAAI2gJ,EAAiBL,EAAQrhJ,GAAMshJ,aAAaC,GAAWC,QACpC,OAAnBE,GAA8C,OAAnBA,GAA8C,OAAnBA,IACxDA,EAAiB,MAAQA,EAAiB,MAE5CP,EAAYnhJ,GAAQmhJ,EAAYnhJ,GAAMtK,QACpC,IAAIqJ,OAAO0iJ,EAAc,KACzBC,E,CAKV,G,EC5KK,MAAM,WAAoB,GAK/Br3J,YACYg2J,EACAC,EACAC,GAEV/1J,MAAM61J,EAAgBC,EAAkBC,GAJ9B,KAAAF,eAAAA,EACA,KAAAC,iBAAAA,EACA,KAAAC,eAAAA,EAPF,KAAAoB,QAAU,IAAIxM,GAAA,EAAsB,GAE9C,KAAAtuB,QAA8Bt5H,KAAKo0J,QAAQnzF,cAQ3C,CAEIhmC,wBACF,OAAOj7B,KAAKq0J,kBACd,CAEIp5H,sBAAkBD,GACpBh7B,KAAKq0J,mBAAqBr5H,EAC1Bh7B,KAAKo0J,QAAQlsJ,KAAK8yB,EACpB,E,2SCxBa,MAAM,WAAoB,GACvCl+B,YAAYg2J,GACV71J,MAAM61J,EAAgB,MAAae,GAA4B,mCAE7D,MAAM15G,QAAaye,MAAM54D,KAAK+yJ,iBAAmBc,EAAkB,kBACnE,aAAa15G,EAAKtI,MACpB,MAGA7xC,KAAKizJ,4BAA8B,CACjC,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,QACA,QACA,KACA,KACA,KACA,KACA,KACA,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,QACA,QACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,QACA,QAEJ,CAEAhzJ,EAAEL,EAAYC,EAAaC,EAAaC,GACtC,OAAOC,KAAK2zJ,UAAU/zJ,EAAIC,EAAIC,EAAIC,EACpC,CAEA4zJ,UAAU/zJ,EAAYC,EAAaC,EAAaC,GAC9C,GAA6B,MAAzBC,KAAK+yJ,iBAA0B,CACjC,MAAMgB,EAAyB,GAW/B,OAVU,MAANl0J,GACFk0J,EAAa10J,KAAKQ,GAEV,MAANC,GACFi0J,EAAa10J,KAAKS,GAEV,MAANC,GACFg0J,EAAa10J,KAAKU,GAGhBg0J,EAAal1J,OACRgL,OAAOupB,KAAKkhI,WAAW10J,EAAIm0J,GAE3BlqJ,OAAOupB,KAAKkhI,WAAW10J,E,CAIlC,OAAO3C,MAAM02J,UAAU/zJ,EAAIC,EAAIC,EAAIC,EACrC,E,2SC/EK,SAAew0J,GACpBljH,EACA69G,G,0CAEA,MAAM2C,QAAgB7C,GACpB39G,EACA,cACA69G,GACA,IAAM,IAAI,GAAYA,EAAKsF,mBAAmB1B,kBAKhD,OAHMjB,EAAmC1jJ,eAChC0jJ,EAA4Br8I,QAE9Bq8I,CACT,G,4SCRO,SAAS4C,GACdpjH,EACA69G,GAEA,OAAOF,GACL39G,EACA,4BACA69G,GACA,IAAW,mCACT,WAAI/vI,SACI0zI,GAAqBxhH,EAAO69G,SAC5BgD,GAAqB7gH,EAAO69G,SAC5B0C,GAAoBvgH,EAAO69G,G,KAGzC,C,i4BC2CO,SAASwF,GACdrjH,EACA69G,GAEA,OAAOF,GACL39G,EACA,cACA69G,GACA,IAAW,mCACT,WAAI,SACI2D,GAAqBxhH,EAAO69G,SAC5BwD,GAAkBrhH,EAAO69G,SACzBiD,GAAoB9gH,EAAO69G,SAC3BkD,GAAoB/gH,EAAO69G,SAC3BsD,GAA4BnhH,EAAO69G,SACnCqD,GAAwBlhH,EAAO69G,SAC/BO,GAAkBp+G,EAAO69G,SC7ChC,SACL79G,EACA69G,GAEA,OAAOF,GACL39G,EACA,sBACA69G,GACA,IAAW,mCACT,WAAI,SACI0C,GAAoBvgH,EAAO69G,SAC3B2D,GAAqBxhH,EAAO69G,SAC5BwD,GAAkBrhH,EAAO69G,SACzBiD,GAAoB9gH,EAAO69G,SAC3BO,GAAkBp+G,EAAO69G,SACzB+C,GAA2B5gH,EAAO69G,SAClCiC,GAA6B9/G,EAAO69G,GAC1CA,EAAKyF,2BAA2BzxD,e,KAGxC,CD0Bc0xD,CAA2BvjH,EAAO69G,SAClCmD,GAA0BhhH,EAAO69G,SACjC0C,GAAoBvgH,EAAO69G,SE3ElC,SACL79G,EACA69G,G,0CAEA,MAAM2C,QAAgB7C,GACpB39G,EACA,mBACA69G,GACA,IAAW,mCACT,WAAI,SACIqF,GAAmBljH,EAAO69G,SAC1BsD,GAA4BnhH,EAAO69G,G,MAI/C,OADA2C,EAAQr8I,OACDq8I,CACT,G,CF4DcgD,CAAwBxjH,EAAO69G,SAC/BqF,GAAmBljH,EAAO69G,SAC1B,GAAsB79G,EAAO69G,SAC7BuF,GAAiCpjH,EAAO69G,SACxCgD,GAAqB7gH,EAAO69G,G,KAG1C,C,slBG1FO,SAAS4F,GACdzjH,EACA69G,GAEA,OAAOF,GACL39G,EACA,0BACA69G,GACA,IAAW,mCACT,WAAI,SACIwD,GAAkBrhH,EAAO69G,SChBhC,SACL79G,EACA69G,GAEA,OAAOF,GACL39G,EACA,oBACA69G,GACA,IAAY,8CAAI,SAAwBO,GAAkBp+G,EAAO69G,GAAM,KAE3E,CDOc6F,CAAyB1jH,EAAO69G,G,KAG9C,C,suBEvBO,MAAM8F,WAA+B,IAC1C,IAAC9L,GAAY,CAAE7B,YAAc/gJ,GAAoBA,I,iBAC5Bw6D,GAAA,I,4UCEhB,SAASm0F,GACd5jH,EACA69G,GAEA,OAAOF,GACL39G,EACA,kBACA69G,GACA,IAAY,8CAAI8F,SAA6BpD,GAAoBvgH,EAAO69G,GAAM,KAElF,C,2SCgCO,SAASgG,GACd7jH,EACA69G,GAEA,OAAOF,GACL39G,EACA,gBACA69G,GACA,IAAW,mCACT,WAAI,SACI2D,GAAqBxhH,EAAO69G,SAC5B+F,GAAuB5jH,EAAO69G,SAC9BwD,GAAkBrhH,EAAO69G,SACzBqF,GAAmBljH,EAAO69G,SCrDjC,SACL79G,EACA69G,GAEA,OAAOF,GACL39G,EACA,gBACA69G,GACA,IAAW,mCACT,WAAI,SAAoBO,GAAkBp+G,EAAO69G,SAAaqF,GAAmBljH,EAAO69G,GAAM,KAEpG,CD2CciG,CAAqB9jH,EAAO69G,SAC5B0C,GAAoBvgH,EAAO69G,SAC3B,GAAsB79G,EAAO69G,SAC7B4F,GAA+BzjH,EAAO69G,G,KAGpD,C,2SEjDO,MAAMkG,GAAU,OAEVC,GAAc,WACdC,GAAmB,gBACnBC,GAAmB,gBACnBC,GAA2B,YAC3BC,GAAqB,kBAGrBC,GAAuB,oBAEvBC,GAAsB,OAE5B,MAAMC,GAMX94J,YACUoG,EACAvD,EACAwJ,GAFA,KAAAjG,aAAAA,EACA,KAAAvD,YAAAA,EACA,KAAAwJ,WAAAA,EAPF,KAAA0sJ,aAAc,EAShBhsJ,OAAOghJ,aACT7qJ,KAAK8xB,OAAU9Y,GACN,IAAItP,SAAc,CAACC,EAASC,KACjCC,OAAOghJ,aAAa/4H,OAAO9Y,GAAS,KAC9BnP,OAAOK,QAAQC,UACjBP,EAAOC,OAAOK,QAAQC,WAGxBR,GAAS,GACT,IAIN3J,KAAK8xB,OAAUgkI,GAAapsJ,QAAQC,SAExC,CAEArM,iBAAuB2xJ,G,0CACrB,MAAM5xB,EAAe,IAAI/1B,GAAaM,GAAa2nD,IAC7CwG,EACJ,CACE3E,6BAA8B,CAC5B98I,IAAKxF,MAEPuiJ,sBAAuB,CACrB1lC,gBAAgB,GAElB6oC,mBAAoB,CAClB1B,eAAgBjpJ,OAAOupB,KAAKC,iBAE9Bq8H,kBAAmB,CACjB7hI,OAAO,GAETikI,6BAA8B,CAC5Bz0B,aAAcA,GAEhB20B,oBAAqB,CACnB30B,aAAcA,IAIpB,OAAO,IAAIu4B,SACHhE,GAAoB3C,EAAgB8G,SACpCxB,GAAmBtF,EAAgB8G,SACnCtG,GAAkBR,EAAgB8G,GAE5C,G,CAMMvgJ,O,0CAEJ,SAD2BxV,KAAKkD,aAAa6xE,4BAG3C,aADM6gF,GAAuBI,aACtB,EAGT,GAAIh2J,KAAK61J,YACP,OAAO,EAET71J,KAAK61J,aAAc,EAEnB,IACE,MAAM/jI,EAAgB9Y,GAAoE,yCAClFhZ,KAAK8xB,OAAO,OAAD,wBAAM9Y,GAAO,CAAEi9I,SAAU,CAAC,SAC7C,UAEMnkI,EAAO,CACXlyB,GAAIw1J,GACJ/7I,MAAO,oBAGHyY,EAAO,CACXlyB,GAAIy1J,GACJa,SAAUd,GACV/7I,MAAOrZ,KAAKL,YAAYM,EAAE,oBAGtB6xB,EAAO,CACXlyB,GAAI01J,GACJY,SAAUd,GACV/7I,MAAOrZ,KAAKL,YAAYM,EAAE,wBAGtB6xB,EAAO,CACXlyB,GAAI21J,GACJW,SAAUd,GACV/7I,MAAOrZ,KAAKL,YAAYM,EAAE,yBAGlBD,KAAKkD,aAAag6C,+BACpBprB,EAAO,CACXlyB,GAAI41J,GACJU,SAAUd,GACV/7I,MAAOrZ,KAAKL,YAAYM,EAAE,iCAIxB6xB,EAAO,CACXlyB,GArHa,YAsHb6L,KAAM,YACNyqJ,SAAUd,WAGNtjI,EAAO,CACXlyB,GAAI81J,GACJQ,SAAUd,GACV/7I,MAAOrZ,KAAKL,YAAYM,EAAE,kCAGtB6xB,EAAO,CACXlyB,GAAI61J,GACJS,SAAUd,GACV/7I,MAAOrZ,KAAKL,YAAYM,EAAE,0B,CAE5B,MAAOsJ,GACPvJ,KAAKmJ,WAAW65G,QAAQz5G,EAAM+nB,Q,SAE9BtxB,KAAK61J,aAAc,C,CAErB,OAAO,CACT,G,CAEAv4J,mB,0CACE,OAAO,IAAIoM,SAAc,CAACC,EAASC,KACjCC,OAAOghJ,aAAamL,WAAU,KACxBnsJ,OAAOK,QAAQC,UACjBP,EAAOC,OAAOK,QAAQC,WAIxBR,GAAS,GACT,GAEN,G,CAEArM,cAAc64J,GACZ,OAAO,IAAIzsJ,SAAc,CAACC,EAASC,KACjCC,OAAOghJ,aAAajuJ,OAAOu5J,GAAY,KACjCtsJ,OAAOK,QAAQC,UACjBP,EAAOC,OAAOK,QAAQC,WAIxBR,GAAS,GACT,GAEN,CAEMysJ,YAAY/8I,EAAezZ,EAAY8D,EAAau1C,G,gDACxD,GAAc,MAAVA,GAAkBA,EAAOxtC,OAASs7C,GAAW6G,MAIjD,IACE,MAAMyoG,EAAiBT,GAAuBU,yBAAyBj9I,GAEjEk9I,EAAyBh8H,GAAmB,mCAChD,MAAM47H,EAAa,GAAG57H,KAAU36B,IAChC,aAAaI,KAAK8xB,OAAO,CACvBrmB,KAAM,SACN7L,GAAIu2J,EACJD,SAAU37H,EACVlhB,MAAOg9I,EACPJ,SAAU,CAAC,QAEf,IAEc,MAAVh9G,GAAmB,iBAAoBA,EAAOC,MAAM76B,kBAChDk4I,EAAgBlB,KACE,QAApB,EAAAp8G,aAAM,EAANA,EAAQgU,oBAAY,kBAChBspG,EAAgBhB,MAIZ,MAAVt8G,GAAmB,iBAAoBA,EAAOC,MAAMzD,kBAChD8gH,EAAgBjB,aAGOt1J,KAAKkD,aAAag6C,wBACd,MAAVjE,GAAmB,iBAAoBA,EAAOC,MAAM8S,cACrEuqG,EAAgBf,I,CAExB,MAAOjsJ,GACPvJ,KAAKmJ,WAAW65G,QAAQz5G,EAAM+nB,Q,KAIlCh0B,gCAAgC+b,GAC9B,OAAOA,EAAMlR,QAAQ,KAAM,KAC7B,CAEMquJ,W,0CACJ,SAAUx2J,KAAKwV,OAAQ,CACrB,MAAMgqG,QAAex/G,KAAKkD,aAAa+iF,2BACjCjmF,KAAKo2J,YACTp2J,KAAKL,YAAYM,EAAEu/G,EAAS,kBAAoB,oBAChDm2C,GACA,a,CAGN,G,CAEMc,SAAS/yJ,G,gDACP1D,KAAKo2J,YAAYp2J,KAAKL,YAAYM,EAAE,oBAAqB01J,GAAqBjyJ,EACtF,G,6SCvOF,MAAMgzJ,GAAkB,IAAIC,IAAqBjtJ,QAAQC,UAEnDitJ,GAAuB,CAC3B,WACA,WACA,gBACA,sBACA,eACA,cACA,iBAGK,MAAMC,GACX/5J,YACUg6J,EACAh0J,EACAisD,GAFA,KAAA+nG,uBAAAA,EACA,KAAAh0J,YAAAA,EACA,KAAAisD,cAAAA,CACP,CAEHzxD,cAAoB2xJ,G,0CAClB,MAAM5xB,EAAe,IAAI/1B,GAAaM,GAAa2nD,IAC7CwG,EAAoE,CACxEpD,kBAAmB,CACjBzvD,eAAgBwzD,IAElBtF,6BAA8B,CAC5B98I,IAAKxF,MAEPuiJ,sBAAuB,CACrB1lC,gBAAgB,GAElB6oC,mBAAoB,CAClB1B,eAAgBjpJ,OAAOupB,KAAKC,iBAE9BshI,2BAA4B,CAC1BzxD,eAAgBwzD,IAElBhH,kBAAmB,CACjB7hI,OAAO,GAET4kI,4BAA6B,CAC3BznI,kBAAmB,IAAMthB,QAAQC,SAAQ,GACzCohB,uBAAwB2rI,GACxBpiJ,IAAKxF,MAEPgjJ,6BAA8B,CAC5Bz0B,aAAcA,GAEhB20B,oBAAqB,CACnB30B,aAAcA,IAGlB,OAAO,IAAIw5B,SACHjB,GAAuBmB,UAAU9H,SACjCyF,GAAmBzF,EAAgB8G,SACnCb,GAAqBjG,EAAgB8G,GAE/C,G,CAEAz4J,+BACEgxJ,EACA0I,G,0CAEA,MAAMC,QAAiCJ,GAAyB/kI,OAAOklI,GACjE7lI,QAAY,UAAkBm9H,EAAWx9H,aACzCmmI,EAAyBnkI,OAAO3B,EAAIztB,IAC5C,G,CAEApG,8BACEoxJ,EACAC,EACAqI,G,0CAEA,MAAMC,QAAiCJ,GAAyB/kI,OAAOklI,GACjE7lI,QAAY,UAAkBu9H,SAC9BuI,EAAyBnkI,OAAO3B,EAAIztB,IAC5C,G,CAEApG,6BACEwzB,EACAg+H,EACA39H,EACA6lI,G,0CAEA,GAA0B,aAAtBlI,EAAW12H,OACb,OAEF,MAAM6+H,QAAiCJ,GAAyB/kI,OAAOklI,SACjEC,EAAyBnkI,OAAO3B,EAAIztB,IAC5C,G,CAEApG,uBACEg0B,EACAqB,EACAs8H,G,0CAEA,IAAK4H,GAAyBK,aAAa5lI,GACzC,OAEF,MAAM2lI,QAAiCJ,GAAyB/kI,OAAOm9H,SACjEgI,EAAyBE,gBAAgB7lI,EACjD,G,CAEQh0B,oBAAoBg0B,GAC1B,OAAOslI,GAAqB7yJ,SAASutB,EAAQlH,QAC/C,CAEM+sI,gBAAgB7lI,EAA8BqB,G,0CAClD,IAAKkkI,GAAyBK,aAAa5lI,GACzC,OAGF,MAAM8lI,QAAmB,mBACpBA,GAAoC,IAAtBA,EAAWv4J,eAIxBmB,KAAK8yB,OAAOskI,EAAW,GAAG1zJ,KAClC,G,CAEMovB,OAAOpvB,G,0CACX,MAAMJ,QAAmBtD,KAAK8C,YAAYS,gBAE1C,SADMqyJ,GAAuBI,YACzB1yJ,IAAef,GAAqBioC,SAItC,kBADMxqC,KAAK82J,uBAAuBN,YAKpC,WAD0Bx2J,KAAK82J,uBAAuBthJ,QAEpD,OAGF,MAAMmwD,QAAgB3lE,KAAK+uD,cAAc6W,sBAAsBliE,GAG/D,GAFAiiE,EAAQh6B,MAAK,CAACj5B,EAAGC,IAAM3S,KAAK+uD,cAAcgX,8BAA8BrzD,EAAGC,KAEpD,IAAnBgzD,EAAQ9mE,OAKZ,IAAK,MAAMo6C,KAAU0sB,QACb3lE,KAAKq3J,gBAAgB3zJ,EAAKu1C,cAL1Bj5C,KAAK82J,uBAAuBL,SAAS/yJ,EAO/C,G,CAEc2zJ,gBAAgB3zJ,EAAau1C,G,0CACzC,GACY,MAAVA,GACAA,EAAOxtC,OAASs7C,GAAW6G,OAC3B3U,EAAOyU,WAAa5G,GAAmB5iD,KAEvC,OAGF,IAAImV,EAAQ4/B,EAAOh4C,KACd,iBAAoBoY,KACvBA,GAAS,KAAK4/B,EAAOC,MAAMzD,mBAGvBz1C,KAAK82J,uBAAuBV,YAAY/8I,EAAO4/B,EAAOr5C,GAAI8D,EAAKu1C,EACvE,G,6SCpKK,SAASq+G,GACdjmH,EACA69G,GAEA,OAAOF,GACL39G,EACA,cACA69G,GACA,IAAW,mCACT,WAAI,SACIiC,GAA6B9/G,EAAO69G,SACpCO,GAAkBp+G,EAAO69G,G,KAGvC,C,slBCVO,SAASqI,GACdlmH,EACA69G,GAEA,OAAOF,GACL39G,EACA,yBACA69G,GACA,IAAW,mCACT,WAAI,SACIgG,GAAqB7jH,EAAO69G,SAC5B0C,GAAoBvgH,EAAO69G,SAC3B+C,GAA2B5gH,EAAO69G,SCxBzC,SACL79G,EACA69G,GAEA,OAAOF,GACL39G,EACA,qBACA69G,GACA,IAAW,mCACT,WAAI,SACIwD,GAAkBrhH,EAAO69G,SACzB0C,GAAoBvgH,EAAO69G,SAC3BO,GAAkBp+G,EAAO69G,G,KAGvC,CDUcsI,CAA0BnmH,EAAO69G,G,KAG/C,CE3Ce,MAAMuI,GAUnB36J,YAAY46J,GATZ,KAAAC,OAAqB,GACrB,KAAAD,aAAoB,CAAC,EACrB,KAAAE,WAAkB,CAAC,EACnB,KAAA5+I,QAAe,CAAC,EAChB,KAAA0iH,SAAgB,CAAC,EACjB,KAAAm8B,WAAkB,KAKhB73J,KAAK03J,aAAeA,CACtB,ECZK,MAAMI,IACK,GAAAC,mBAA+B,CAE7C,WACA,YACA,QACA,gBACA,SACA,iBACA,SACA,UACA,cACA,WAEA,eACA,gBACA,gBACA,iBACA,aACA,eAGc,GAAAC,wBAAoC,CAClD,kBACA,UACA,eACA,UAGc,GAAAC,sBAAkC,CAChD,QACA,WACA,SACA,OACA,SACA,QACA,QACA,UAIG,MAAMC,IACK,GAAAC,eAA2B,CACzC,mBACA,cACA,WACA,SACA,YACA,cACA,aACA,YACA,gBAGc,GAAAC,uBAAmC,IAC9CF,GAA4BC,eAC/B,eAGc,GAAAE,qBAAiC,CAC/C,UACA,YACA,kBACA,aACA,OACA,OAGc,GAAAC,0BAAsC,CACpD,UACA,YACA,kBACA,aACA,UAGc,GAAAC,qBAAiC,CAC/C,YACA,SACA,cACA,WACA,SACA,KACA,QACA,UACA,cACA,eACA,QACA,eACA,YACA,UAGc,GAAAC,0BAAsC,CACpD,YACA,SACA,cACA,WACA,QACA,UACA,eACA,YACA,UAGc,GAAAC,qBAAiC,CAC/C,SACA,WACA,gBACA,kBACA,QACA,UACA,cACA,cACA,WACA,aACA,SACA,QACA,UACA,QACA,UACA,kBACA,0BACA,mBAGc,GAAAC,0BAAsC,CACpD,QACA,UACA,QACA,UACA,kBACA,2BAGc,GAAAC,sBAAkC,CAChD,YACA,eACA,WACA,aACA,QACA,UACA,SACA,cACA,YACA,wBACA,mBACA,QACA,OACA,UACA,SACA,cACA,YACA,SACA,QACA,eACA,YACA,eACA,YACA,oBACA,iBACA,oBACA,iBACA,gBACA,kBACA,aACA,eACA,0BACA,wBACA,qBACA,UACA,cACA,cACA,eACA,UAGc,GAAAC,qBAAiC,CAC/C,WACA,cACA,UACA,YACA,QACA,UACA,SACA,cACA,YACA,uBACA,kBACA,QACA,OACA,UACA,SACA,cACA,YACA,SACA,QACA,UACA,YACA,gBACA,cACA,cACA,YACA,cACA,YACA,mBACA,iBACA,mBACA,iBACA,cACA,gBACA,iBACA,mBACA,yBACA,uBACA,cACA,qBACA,uBACA,gBACA,gBACA,UAGc,GAAAC,cAA0B,CACxC,MACA,MACA,OACA,SACA,SACA,WACA,WACA,MACA,MACA,OACA,MACA,OACA,UACA,YACA,gBACA,gBACA,SACA,aACA,oBACA,MACA,OAGc,GAAAC,oBAAgC,CAC9C,UACA,YACA,aACA,WACA,WAKc,GAAAC,UAAY,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAC3C,GAAAC,cAAgB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAC/C,GAAAC,aAAe,CAAC,OAAQ,OAAQ,OAAQ,KAAM,OAAQ,QAGjE,MAAMC,IACK,GAAAC,mBAA+B,CAC7C,mBACA,cACA,WACA,SACA,YACA,cACA,aACA,YACA,gBAGc,GAAAC,mBAA+B,CAAC,OAAQ,YAAa,aAErD,GAAAC,wBAAoC,CAAC,YAAa,aAElD,GAAAC,gBAA4B,CAAC,mBAAoB,SAAU,SAE3D,GAAAC,oBAAgC,CAE9C,SACA,aACA,aACA,UAEA,WAGc,GAAAC,qBAAiC,CAC/C,SACA,cACA,kBACA,iBACA,WACA,YAGc,GAAAC,mBAA+B,CAE7C,SACA,YACA,SACA,UACA,cACA,WACA,SAEA,WACA,gBAGc,GAAAC,gBAA4B,CAAC,SAAU,iBAEvC,GAAAC,kBAA8B,CAC5C,UACA,iBACA,OACA,SACA,eACA,eACA,YACA,aAGc,GAAAC,uBAAmC,CACjD,eACA,eACA,YACA,aAGc,GAAAC,mBAA+B,CAC7C,YACA,iBACA,SACA,YAGc,GAAAC,mBAA+B,CAC7C,YACA,iBACA,SACA,YAGc,GAAAC,mBAA+B,CAC7C,YACA,iBACA,SACA,YAGc,GAAAC,qBAAiC,CAC/C,SACA,MACA,OACA,WACA,cACA,YACA,cACA,iBACA,eACA,sBACA,oBAGc,GAAAC,eAA2B,CACzC,OACA,OACA,kBACA,eACA,gBAGc,GAAAC,gBAA4B,CAC1C,QACA,WACA,WACA,kBACA,gBACA,oBAGc,GAAAC,kBAA8B,CAC5C,UACA,eACA,eACA,kBACA,uBACA,wBAGc,GAAAC,gBAA4B,CAC1C,QACA,SACA,eACA,MACA,YACA,gBAGc,GAAAC,mBAA+B,CAAC,YAAa,UAAW,eAExD,GAAAC,kBAA8B,CAC5C,UACA,eACA,eACA,qBAGc,GAAAC,aAAyC,CACvDC,YAAa,KACb,gBAAiB,KACjBC,QAAS,KACTC,QAAS,KACT,iBAAkB,KAClBC,QAAS,KACTC,OAAQ,KACRC,SAAU,KACVC,WAAY,KACZ,sBAAuB,KACvBC,UAAW,KACXC,QAAS,KACTC,MAAO,KACPC,UAAW,KACXC,QAAS,KACTC,WAAY,KACZC,QAAS,KACTC,QAAS,KACTC,WAAY,KACZC,SAAU,KACVC,QAAS,KACTC,QAAS,KACTC,OAAQ,KACRC,MAAO,KACPC,QAAS,KACTC,OAAQ,KACRC,QAAS,KACT,yBAA0B,KAC1BC,SAAU,KACV,gBAAiB,KACjBC,OAAQ,KACR,iCAAkC,KAClC,oBAAqB,KACrBC,SAAU,KACV,eAAgB,KAChBC,QAAS,KACTC,SAAU,KACVC,SAAU,KACVC,OAAQ,KACR,aAAc,KACd,iBAAkB,KAClB,2BAA4B,KAC5BC,KAAM,KACNC,MAAO,KACPC,MAAO,KACP,mBAAoB,KACpB,0BAA2B,KAC3BC,SAAU,KACVC,QAAS,KACTC,MAAO,KACP,6BAA8B,KAC9B,eAAgB,KAChB,aAAc,KACd,gBAAiB,KACjBC,QAAS,KACTC,KAAM,KACNC,OAAQ,KACR,iBAAkB,KAClBC,QAAS,KACTC,SAAU,KACVC,SAAU,KACV,qBAAsB,KACtBC,QAAS,KACTC,MAAO,KACP,cAAe,KACf,oBAAqB,KACrBC,QAAS,KACTC,QAAS,KACTC,SAAU,KACV,mBAAoB,KACpB,gBAAiB,KACjBC,KAAM,KACNC,QAAS,KACTC,OAAQ,KACR,gBAAiB,KACjB,mBAAoB,KACpB,8BAA+B,KAC/BC,MAAO,KACPC,OAAQ,KACRC,QAAS,KACTC,QAAS,KACTC,MAAO,KACPC,UAAW,KACXC,OAAQ,KACRC,UAAW,KACXC,QAAS,KACTC,WAAY,KACZC,KAAM,KACNC,UAAW,KACXC,SAAU,KACVC,OAAQ,KACR,gBAAiB,KACjBC,OAAQ,KACRC,MAAO,KACP,kCAAmC,KACnC,gCAAiC,KACjCC,SAAU,KACV,YAAa,KACbC,QAAS,KACTC,QAAS,KACTC,MAAO,KACPC,UAAW,KACX,4BAA6B,KAC7BC,KAAM,KACNC,QAAS,KACT,cAAe,KACfC,OAAQ,KACRC,MAAO,KACPC,QAAS,KACTC,MAAO,KACPC,OAAQ,KACRC,OAAQ,KACRC,WAAY,KACZC,MAAO,KACPC,SAAU,KACV,oBAAqB,KACrB,cAAe,KACf,wCAAyC,KACzC,cAAe,KACfC,OAAQ,KACRC,WAAY,KACZ,mCAAoC,KACpCC,OAAQ,KACRC,QAAS,KACTC,QAAS,KACTC,QAAS,KACT,yBAA0B,KAC1BC,cAAe,KACfC,UAAW,KACXC,WAAY,KACZC,MAAO,KACPC,UAAW,KACXC,WAAY,KACZC,OAAQ,KACRC,SAAU,KACVC,SAAU,KACVC,KAAM,KACNC,MAAO,KACP,mBAAoB,KACpBC,WAAY,KACZC,WAAY,KACZC,UAAW,KACXC,QAAS,KACTC,OAAQ,KACR,kCAAmC,KACnCC,QAAS,KACTC,OAAQ,KACRC,SAAU,KACVC,WAAY,KACZC,WAAY,KACZC,QAAS,KACTC,WAAY,KACZC,QAAS,KACTC,QAAS,KACTC,MAAO,KACPC,MAAO,KACPC,YAAa,KACb,uBAAwB,KACxB,gBAAiB,KACjB,cAAe,KACfC,UAAW,KACXC,MAAO,KACPC,QAAS,KACTC,KAAM,KACN,iBAAkB,KAClB,2BAA4B,KAC5BC,OAAQ,KACRC,KAAM,KACNC,SAAU,KACVC,MAAO,KACP,kCAAmC,KACnCC,OAAQ,KACR,mBAAoB,KACpBC,SAAU,KACVC,KAAM,KACNC,YAAa,KACbC,SAAU,KACVC,OAAQ,KACRC,SAAU,KACV,cAAe,KACfC,MAAO,KACPC,QAAS,KACTC,QAAS,KACT,qBAAsB,KACtBC,OAAQ,KACR,mBAAoB,KACpB,eAAgB,KAChB,wBAAyB,KACzB,cAAe,KACf,eAAgB,KAChB,4BAA6B,KAC7B,+BAAgC,KAChCC,MAAO,KACP,aAAc,KACd,wBAAyB,KACzB,eAAgB,KAChBC,QAAS,KACTC,OAAQ,KACRC,WAAY,KACZ,eAAgB,KAChBC,UAAW,KACXC,SAAU,KACVC,SAAU,KACV,kBAAmB,KACnBC,QAAS,KACT,eAAgB,KAChB,kCAAmC,KACnCC,MAAO,KACP,YAAa,KACbC,MAAO,KACPC,SAAU,KACV,yBAA0B,KAC1BC,UAAW,KACXC,OAAQ,KACRC,YAAa,KACb,uBAAwB,KACxBC,OAAQ,KACRC,WAAY,KACZC,SAAU,KACVC,SAAU,KACV,cAAe,KACfC,KAAM,KACNC,QAAS,KACTC,MAAO,KACP,sBAAuB,KACvBC,QAAS,KACTC,OAAQ,KACRC,aAAc,KACd,2BAA4B,KAC5BC,OAAQ,KACRC,OAAQ,KACRC,QAAS,KACT,uBAAwB,KACxB,iBAAkB,KAClB,gBAAiB,KACjB,iCAAkC,KAClCC,QAAS,KACTC,WAAY,KACZC,QAAS,KACTC,UAAW,KACXC,QAAS,KACT,0BAA2B,KAC3B,uBAAwB,KACxB,oBAAqB,KACrB,iBAAkB,KAClBC,MAAO,KACPC,OAAQ,KACRC,SAAU,MAGI,GAAAC,UAAsC,CACpDC,QAAS,KACTC,OAAQ,KACR,iBAAkB,KAClBC,QAAS,KACTC,SAAU,KACVC,WAAY,KACZC,SAAU,KACVC,YAAa,KACbC,SAAU,KACV,uBAAwB,KACxB,iCAAkC,KAClCC,QAAS,KACT/H,QAAS,KACTQ,KAAM,KACNwH,OAAQ,KACRC,MAAO,KACPC,SAAU,KACVC,QAAS,KACTC,KAAM,KACNC,OAAQ,KACRC,SAAU,KACVC,UAAW,KACXC,MAAO,KACP,mBAAoB,KACpBC,SAAU,KACVC,cAAe,KACfC,SAAU,KACVC,UAAW,KACXC,YAAa,KACbC,SAAU,KACVC,QAAS,KACTC,SAAU,KACVC,OAAQ,KACR,gBAAiB,KACjB,aAAc,KACd,aAAc,KACd,WAAY,KACZ,iBAAkB,KAClB,eAAgB,KAChB,2BAA4B,KAC5BC,KAAM,KACNC,SAAU,KACVC,OAAQ,KACR7E,MAAO,KACP8E,aAAc,KACd,cAAe,KACf,eAAgB,KAChB,iBAAkB,KAClB,eAAgB,KAChBC,UAAW,KACXC,MAAO,KACPC,KAAM,KACNC,QAAS,KACT,iBAAkB,KAClBC,SAAU,KACVC,WAAY,KACZ,gBAAiB,KACjBC,UAAW,KACXC,QAAS,MAGK,GAAAC,aAAyC,CACvDC,QAAS,KACT,mBAAoB,KACpBC,SAAU,KACV,gBAAiB,KACjB,4BAA6B,KAC7B,cAAe,KACfC,QAAS,KACT,uBAAwB,KACxBC,OAAQ,KACRC,aAAc,M,2SCzrBH,MAAM,GACnBlrK,YACUiyD,EACA7rD,EACAi8D,EACAjQ,EACA/lD,EACAiwI,GALA,KAAArqF,cAAAA,EACA,KAAA7rD,aAAAA,EACA,KAAAi8D,YAAAA,EACA,KAAAjQ,uBAAAA,EACA,KAAA/lD,WAAAA,EACA,KAAAiwI,gBAAAA,CACP,CAEH8S,2BAA2BnoF,GACzB,MAAMkkG,EAAuB,GAEvBC,EAAiB,GAAgBC,mBAAmBpkG,GAAa,GAAM,GAAM,GAAO,GAK1F,GAA8B,IAA1BmkG,EAAerpK,OACjB,OAAOopK,EAOT,MAAMG,EAA4BF,EAAexnK,QAAQ2nK,QAAmBt1J,IAAZs1J,EAAGjsF,OAC7DksF,EAAW/hK,OAAO0M,KAAK8wD,EAAYkoF,OACnCsc,EAAYD,EAASzpK,OAI3B,GAA8B,IAA1BqpK,EAAerpK,QAA6B,GAAb0pK,GAAkBH,EAA0BvpK,OAAS,EAAG,CAEzF,MAAM2pK,EAAcF,EAAS,GAG3BJ,EAAexnK,QAAQ2nK,GAAmB,OAAZA,EAAGjsF,MAAiBisF,EAAGjsF,OAASosF,IAAa3pK,OAAS,GAKpFupK,EAA0BjpK,SAASkpK,IACjCA,EAAGjsF,KAAOosF,CAAW,G,CAK3B,IAAK,MAAMC,KAAW1kG,EAAYkoF,MAAO,CAEvC,IAAKloF,EAAYkoF,MAAMv0I,eAAe+wJ,GACpC,SAGF,MAAMC,EAAqBR,EAAexnK,QAAQ2nK,GAAOI,IAAYJ,EAAGjsF,OACxE,GAAIssF,EAAmB7pK,OAAS,EAAG,CACjC,IAAI8pK,EAAK3oK,KAAK4oK,kBAAkB7kG,EAAa2kG,EAAmB,IAAI,GAAO,GAAO,GACxE,MAANC,IAEFA,EAAK3oK,KAAK4oK,kBAAkB7kG,EAAa2kG,EAAmB,IAAI,GAAM,GAAM,IAE9ET,EAAS5oK,KAAK,CACZ+8E,KAAMrY,EAAYkoF,MAAMwc,GACxBpqJ,SAAUqqJ,EAAmB,GAC7BjzH,SAAUkzH,EACVE,UAAWH,G,EAKjB,OAAOT,CACT,CAOMhjG,WAAWjsD,G,gDACf,MAAMmY,EAAMnY,EAAQmY,IACpB,KAAKA,GAAQnY,EAAQigC,QAAWjgC,EAAQ+qD,aAAgB/qD,EAAQ+qD,YAAYllE,QAC1E,MAAM,IAAIoS,MAAM,yBAGlB,IAAI63J,EAA+B,KAEnC,MAAM5sH,QAAyBl8C,KAAKkD,aAAag6C,sBAC3CkO,EAAgE,QAA7C,QAAMprD,KAAKkD,aAAa+qE,4BAAqB,QAAIjgE,GAAasJ,OAEvF,IAAIyxJ,GAAc,EAiElB,GAhEA/vJ,EAAQ+qD,YAAY5kE,SAAS6pK,IAE3B,GAAIA,EAAG73I,IAAIvxB,KAAOuxB,EAAIvxB,IAAMopK,EAAG73I,IAAIztB,MAAQytB,EAAIztB,IAC7C,OAGF,MAAMulK,EAAajpK,KAAKkpK,mBAAmBF,EAAGzkG,QAAS,CACrD4kG,qBAAsBnwJ,EAAQmwJ,uBAAwB,EACtDC,gBAAiBpwJ,EAAQowJ,kBAAmB,EAC5CC,kBAAmBrwJ,EAAQqwJ,oBAAqB,EAChDnkG,gBAAiBlsD,EAAQksD,kBAAmB,EAC5CjsB,OAAQjgC,EAAQigC,OAChBqwH,OAAQn4I,EAAIztB,IACZ0nD,gBAAiBA,IAGd69G,GAAeA,EAAWtR,QAAWsR,EAAWtR,OAAO94J,UAK1DoqK,EAAWM,iBACqBx2J,MAAhCiG,EAAQwwJ,sBACPxwJ,EAAQwwJ,sBAOXP,EAAWrR,WAAW6R,yBAA2B,GAEjDV,GAAc,EACT/vJ,EAAQ0wJ,cACX1pK,KAAK+uD,cAAcqtF,mBAAmBpjI,EAAQigC,OAAOr5C,IAGvD,kBACEuxB,EACA,CACE/G,QAAS,WACT6+I,WAAYA,EACZvlK,IAAKytB,EAAIztB,KAEX,CAAE2gE,QAAS2kG,EAAG3kG,UAIdrrD,EAAQigC,OAAOxtC,OAASs7C,GAAW6G,QACnCk7G,GACC9vJ,EAAQigC,OAAOC,MAAM8S,OACpB9P,GAAqBljC,EAAQigC,OAAO8T,uBAKxC+7G,EAAc9oK,KAAKkD,aAAa8xE,yBAAyB78D,MAAMsiC,GACxDA,EAGE,KAFEz6C,KAAKm/D,YAAYU,QAAQ7mD,EAAQigC,OAAOC,MAAM8S,UAjCvDhsD,KAAKmJ,WAAWmyB,KAAK,kEAoCrB,IAGAytI,EAEF,OADA/oK,KAAKkvD,uBAAuByC,QAAQtlD,GAAUs9J,wBAAyB3wJ,EAAQigC,OAAOr5C,IACnE,MAAfkpK,QACWA,EAEN,KAGT,MAAM,IAAI73J,MAAM,qB,IAWd24J,gBACJ7lG,EACA5yC,EACA04I,G,kDAEA,IAAI5wH,EACJ,GAAI4wH,EACF5wH,QAAej5C,KAAK+uD,cAAcmtF,oBAAoB/qH,EAAIztB,SACrD,CACL,MAAMomK,QAA2B9pK,KAAK+uD,cAAcktF,sBAAsB9qH,EAAIztB,KAAK,GAKjFu1C,EAHA6wH,GACA3nJ,KAAKC,MAAM4jF,WAAsD,QAA1C,EAA4B,QAA5B,EAAA8jE,EAAmBn8G,iBAAS,eAAEwqF,oBAAY,eAAEnyC,WAAY,IAEtE8jE,QAEM9pK,KAAK+uD,cAAcgtF,kBAAkB5qH,EAAIztB,KAAK,E,CAIjE,GAAc,MAAVu1C,GAAkBA,EAAOyU,WAAa5G,GAAmB5iD,KAC3D,OAAO,KAGT,MAAM6gE,QAAiB/kE,KAAKilE,WAAW,CACrC9zC,IAAKA,EACL8nB,OAAQA,EACR8qB,YAAaA,EACb2lG,cAAeG,EACfV,sBAAuBU,EACvBT,iBAAkBS,EAClBR,mBAAoBQ,EACpB3kG,gBAAiB2kG,EACjBL,qBAAsBK,IAQxB,OAJIA,GACF7pK,KAAK+uD,cAAcotF,0BAA0BhrH,EAAIztB,KAG5CqhE,C,IASHglG,oBAAoBhmG,EAA2B8lG,G,0CACnD,MAAM14I,QAAYnxB,KAAKgqK,eACvB,GAAK74I,GAAQA,EAAIztB,IAIjB,aAAa1D,KAAK4pK,gBAAgB7lG,EAAa5yC,EAAK04I,EACtD,G,CAIcG,e,0CACZ,MAAM74I,QAAY,6BAClB,IAAKA,EACH,MAAM,IAAIlgB,MAAM,iBAGlB,OAAOkgB,CACT,G,CAEQ+3I,mBACNnlG,EACA/qD,GAEA,IAAK+qD,IAAgB/qD,EAAQigC,OAC3B,OAAO,KAGT,IAAIgwH,EAAa,IAAIxR,GAAe1zF,EAAY2zF,cAChD,MAAMuS,EAAgD,CAAC,EACjD58G,EAASr0C,EAAQigC,OAAOoU,OAE9B,GAAIA,GAAUA,EAAOxuD,OAAQ,CAC3B,MAAMqrK,EAAuB,GAE7B78G,EAAOluD,SAAS8uC,IACV,GAAgBk8H,SAASl8H,EAAEhtC,OAC7BipK,EAAW7qK,KAAK4uC,EAAEhtC,KAAKR,c,IAI3BsjE,EAAY1W,OAAOluD,SAASmjC,IAE1B,GAAI2nI,EAAavyJ,eAAe4qB,EAAM8nI,MACpC,OAGF,IAAK9nI,EAAM+nI,UAA8B,SAAlB/nI,EAAM/2B,QAC3B,OAGF,MAAM++J,EAAgBtqK,KAAKuqK,uBAAuBjoI,EAAO4nI,GACzD,GAAII,GAAiB,EAAG,CACtB,MAAME,EAA2Bn9G,EAAOi9G,GACxC,IAAIjyJ,EACAmyJ,EAAc/+J,OAASa,GAAUkoD,OAEnCn8C,EAAMW,EAAQigC,OAAOqV,iBAAiBk8G,EAAc3hH,WAEpDxwC,EAAMmyJ,EAAc5oK,MACT,MAAPyW,GAAemyJ,EAAc/+J,OAASa,GAAUgoD,UAClDj8C,EAAM,UAIV4xJ,EAAa3nI,EAAM8nI,MAAQ9nI,EAC3B,GAAgBmoI,WAAWxB,EAAY3mI,EAAOjqB,E,KAKpD,OAAQW,EAAQigC,OAAOxtC,MACrB,KAAKs7C,GAAW6G,MACdq7G,EAAajpK,KAAK0qK,wBAAwBzB,EAAYllG,EAAakmG,EAAcjxJ,GACjF,MACF,KAAK+tC,GAAW+G,KACdm7G,EAAajpK,KAAK2qK,uBAAuB1B,EAAYllG,EAAakmG,EAAcjxJ,GAChF,MACF,KAAK+tC,GAAWgH,SACdk7G,EAAajpK,KAAK4qK,2BAChB3B,EACAllG,EACAkmG,EACAjxJ,GAEF,MACF,QACE,OAAO,KAGX,OAAOiwJ,CACT,CAEQyB,wBACNzB,EACAllG,EACAkmG,EACAjxJ,G,QAEA,IAAKA,EAAQigC,OAAOC,MAClB,OAAO,KAGT,MAAM2vH,EAA6B,GAC7BgC,EAA6B,GACnC,IAAIxC,EAAoB,KACpB5yH,EAA0B,KAC9B,MAAMyD,EAAQlgC,EAAQigC,OAAOC,MAM7B,GALA+vH,EAAW6B,UACkE,QAA3E,EAAW,QAAX,EAAA5xH,aAAK,EAALA,EAAOE,YAAI,eAAE14C,QAAQ4pD,GAAMA,EAAE11C,OAAS5G,GAAakxC,QAAOtuC,KAAK05C,GAAMA,EAAEv9B,aAAI,QAAI,GAEjFk8I,EAAWM,gBAAkBvpK,KAAK+qK,kBAAkBhnG,EAAYrgE,IAAKsV,IAEhEkgC,EAAM76B,UAA+B,KAAnB66B,EAAM76B,SAG3B,OADA4qJ,EAAa,GAAgB+B,sBAAsBf,EAAchB,GAInE,IAAIf,EAAiB,GAAgBC,mBACnCpkG,GACA,GACA,EACA/qD,EAAQowJ,gBACRpwJ,EAAQksD,iBAELgjG,EAAerpK,QAAWma,EAAQqwJ,oBAErCnB,EAAiB,GAAgBC,mBAC/BpkG,GACA,GACA,EACA/qD,EAAQowJ,gBACRpwJ,EAAQksD,kBAIZ,IAAK,MAAMujG,KAAW1kG,EAAYkoF,MAAO,CAEvC,IAAKloF,EAAYkoF,MAAMv0I,eAAe+wJ,GACpC,SAGF,MAAMwC,EAAyC,GAC/C/C,EAAe/oK,SAAS+rK,IAClBzC,IAAYyC,EAAU9uF,MACxB6uF,EAAsB5rK,KAAK6rK,E,IAI/BhD,EAAe/oK,SAAS+rK,IACtB7C,EAAK6C,EACLrC,EAAUxpK,KAAKgpK,GAEXnvH,EAAMzD,WACRA,EAAWz1C,KAAK4oK,kBAAkB7kG,EAAaskG,GAAI,GAAO,GAAO,GAE5D5yH,GAAaz8B,EAAQqwJ,oBAExB5zH,EAAWz1C,KAAK4oK,kBAAkB7kG,EAAaskG,GAAI,GAAM,GAAM,IAG7D5yH,GACFo1H,EAAUxrK,KAAKo2C,G,IA6DvB,OAvDIyyH,EAAerpK,SAAWgqK,EAAUhqK,SAItCwpK,EAAKH,EAAe,GACpBW,EAAUxpK,KAAKgpK,GAEXnvH,EAAMzD,UAAY4yH,EAAG8C,cAAgB,IACvC11H,EAAWz1C,KAAK4oK,kBAAkB7kG,EAAaskG,GAAI,GAAO,GAAO,GAE5D5yH,GAAaz8B,EAAQqwJ,oBAExB5zH,EAAWz1C,KAAK4oK,kBAAkB7kG,EAAaskG,GAAI,GAAM,GAAM,IAG7D5yH,GACFo1H,EAAUxrK,KAAKo2C,KAKhByyH,EAAerpK,QAAWma,EAAQmwJ,sBAErCplG,EAAY1W,OAAOluD,SAAS8uC,IAExBA,EAAEo8H,WACU,SAAXp8H,EAAExiC,MAA8B,UAAXwiC,EAAExiC,MAA+B,QAAXwiC,EAAExiC,OAC9C,GAAgB2/J,kBAAkBn9H,EAAG6pH,GAAkBC,qBAEvD8S,EAAUxrK,KAAK4uC,E,IAKrB48H,EAAU1rK,SAASmrD,IAEb2/G,EAAavyJ,eAAe4yC,EAAE8/G,QAIlCH,EAAa3/G,EAAE8/G,MAAQ9/G,EACvB,GAAgBmgH,WAAWxB,EAAY3+G,EAAGpR,EAAMzD,UAAS,IAG3DozH,EAAU1pK,SAAS+Y,IAEb+xJ,EAAavyJ,eAAeQ,EAAEkyJ,QAIlCH,EAAa/xJ,EAAEkyJ,MAAQlyJ,EACvB,GAAgBuyJ,WAAWxB,EAAY/wJ,EAAGghC,EAAM76B,UAAS,IAG3D4qJ,EAAa,GAAgB+B,sBAAsBf,EAAchB,EAEnE,CAEQ0B,uBACN1B,EACAllG,EACAkmG,EACAjxJ,GAEA,IAAKA,EAAQigC,OAAOiU,KAClB,OAAO,KAGT,MAAMm+G,EAA8C,CAAC,EAErDtnG,EAAY1W,OAAOluD,SAAS8uC,IAC1B,IAAI,GAAgBq9H,oBAAoBr9H,KAIpCjuC,KAAKurK,eAAet9H,EAAExiC,KAAMqsJ,GAAkBG,uBAIlD,IAAK,IAAIt3J,EAAI,EAAGA,EAAIu3J,GAA4BC,eAAet5J,OAAQ8B,IAAK,CAC1E,MAAM6qK,EAAOtT,GAA4BC,eAAex3J,GAExD,GAAKstC,EAAEv2B,eAAe8zJ,IAAUv9H,EAAEu9H,IAAUv9H,EAAEo8H,SAA9C,CAMA,IACGgB,EAAW5jH,gBACZ,GAAgBgkH,aACdx9H,EAAEu9H,GACFtT,GAA4BG,qBAC5BH,GAA4BI,2BAE9B,CACA+S,EAAW5jH,eAAiBxZ,EAC5B,K,CACK,IACJo9H,EAAW5sJ,QACZ,GAAgBgtJ,aACdx9H,EAAEu9H,GACFtT,GAA4BK,qBAC5BL,GAA4BM,2BAE9B,CACA6S,EAAW5sJ,OAASwvB,EACpB,K,CACK,IACJo9H,EAAWhjH,KACZ,GAAgBojH,aACdx9H,EAAEu9H,GACFtT,GAA4BO,qBAC5BP,GAA4BQ,2BAE9B,CACA2S,EAAWhjH,IAAMpa,EACjB,K,CACK,IACJo9H,EAAW3jH,UACZ,GAAgB+jH,aAAax9H,EAAEu9H,GAAOtT,GAA4BS,uBAClE,CACA0S,EAAW3jH,SAAWzZ,EACtB,K,CACK,IACJo9H,EAAW1jH,SACZ,GAAgB8jH,aAAax9H,EAAEu9H,GAAOtT,GAA4BU,sBAClE,CACAyS,EAAW1jH,QAAU1Z,EACrB,K,CACK,IACJo9H,EAAWx0I,MACZ,GAAgB40I,aAAax9H,EAAEu9H,GAAOtT,GAA4BW,eAClE,CACAwS,EAAWx0I,KAAOoX,EAClB,K,CACK,IACJo9H,EAAW1sK,OACZ,GAAgB8sK,aAAax9H,EAAEu9H,GAAOtT,GAA4BY,qBAClE,CACAuS,EAAW1sK,MAAQsvC,EACnB,K,OAKN,MAAMif,EAAOl0C,EAAQigC,OAAOiU,KAM5B,GALAltD,KAAK0rK,iBAAiBzC,EAAY/7G,EAAMm+G,EAAYpB,EAAc,kBAClEjqK,KAAK0rK,iBAAiBzC,EAAY/7G,EAAMm+G,EAAYpB,EAAc,UAClEjqK,KAAK0rK,iBAAiBzC,EAAY/7G,EAAMm+G,EAAYpB,EAAc,QAClEjqK,KAAK0rK,iBAAiBzC,EAAY/7G,EAAMm+G,EAAYpB,EAAc,SAE9DoB,EAAW3jH,UAAY,GAAgByiH,SAASj9G,EAAKxF,UAAW,CAClE,IAAIA,EAAmBwF,EAAKxF,SAE5B,GAAI2jH,EAAW3jH,SAASikH,YAAcN,EAAW3jH,SAASikH,WAAW3yJ,QAAS,CAC5E,IAAImK,EAAgB,KACpB,MAAMyoJ,EAAYP,EAAW3jH,SAASikH,WAAW3yJ,QAejD,GAdyB,KAArB4yJ,EAAU/sK,OACZskB,EAAQ3T,SAAS09C,EAAKxF,SAAU,MAAQ,EACV,KAArBkkH,EAAU/sK,SAQjBskB,EANmB,MAAnByoJ,EAAU,GAAG,IACO,KAApBA,EAAU,GAAG,IACQ,MAApBA,EAAU,IAAI,IAAmC,KAArBA,EAAU,IAAI,GAInCp8J,SAAS09C,EAAKxF,SAAU,MAFxBl4C,SAAS09C,EAAKxF,SAAU,MAAQ,GAM/B,MAATvkC,EAAe,CACjB,MAAMi8D,EAASwsF,EAAUzoJ,GACrBi8D,EAAOvgF,OAAS,IAClB6oD,EAAW03B,EAAO,G,OAIrBp/E,KAAK6rK,kBAAkBR,EAAW3jH,SAAU,OACT,IAAlC2jH,EAAW3jH,SAASokH,WACF,IAApBpkH,EAAS7oD,SAET6oD,EAAW,IAAMA,GAGnBuiH,EAAaoB,EAAW3jH,SAAS0iH,MAAQiB,EAAW3jH,SACpD,GAAgB+iH,WAAWxB,EAAYoC,EAAW3jH,SAAUA,E,CAG9D,GAAI2jH,EAAW1jH,SAAW,GAAgBwiH,SAASj9G,EAAKvF,SAAU,CAChE,IAAIA,EAAkBuF,EAAKvF,QAC3B,GAAI0jH,EAAW1jH,QAAQgkH,YAAcN,EAAW1jH,QAAQgkH,WAAW3yJ,QACjE,IAAK,IAAIrY,EAAI,EAAGA,EAAI0qK,EAAW1jH,QAAQgkH,WAAW3yJ,QAAQna,OAAQ8B,IAAK,CACrE,MAAM2e,EAAsB+rJ,EAAW1jH,QAAQgkH,WAAW3yJ,QAAQrY,GAClE,GAAI2e,EAAE,KAAO4tC,EAAKvF,SAAWroC,EAAE,KAAO4tC,EAAKvF,QAAS,CAClDA,EAAUroC,EAAE,GACZ,K,CAEF,GACkB,IAAhBA,EAAE,GAAGzgB,QACmB,IAAxBquD,EAAKvF,QAAQ9oD,QACbygB,EAAE,KAAO4tC,EAAKvF,QAAQ9zC,UAAU,GAChC,CACA8zC,EAAUroC,EAAE,GACZ,K,CAEF,MAAMysJ,EAAazsJ,EAAE,GAAGxe,QAAQ,KAChC,GAAIirK,GAAc,GAAKzsJ,EAAE,GAAGzgB,OAASktK,EAAa,EAAG,CACnD,MAAM1zJ,EAAMiH,EAAE,GAAGzL,UAAUk4J,EAAa,GACxC,GAAW,MAAP1zJ,GAA8B,KAAfA,EAAI7X,QAAiB6X,IAAQ60C,EAAKvF,QAAS,CAC5DA,EAAUroC,EAAE,GACZ,K,QAKNtf,KAAK6rK,kBAAkBR,EAAW1jH,QAAS,SACV,IAAjC0jH,EAAW1jH,QAAQmkH,UAEI,IAAnBnkH,EAAQ9oD,SACV8oD,EAAU,KAAOA,IAGnB3nD,KAAK6rK,kBAAkBR,EAAW1jH,QAAS,OACV,IAAjC0jH,EAAW1jH,QAAQmkH,YAEI,IAAnBnkH,EAAQ9oD,SACV8oD,EAAUA,EAAQl4C,OAAO,IAI7Bw6J,EAAaoB,EAAW1jH,QAAQyiH,MAAQiB,EAAW1jH,QACnD,GAAgB8iH,WAAWxB,EAAYoC,EAAW1jH,QAASA,E,CAG7D,GACE0jH,EAAWhjH,KACX,GAAgB8hH,SAASj9G,EAAKxF,WAC9B,GAAgByiH,SAASj9G,EAAKvF,SAC9B,CACA,MAAMqkH,GAAa,IAAM9+G,EAAKxF,UAAUpoD,OAAO,GAE/C,IAAI2sK,EAAmB/+G,EAAKvF,QACxBukH,EAAmB,KACC,IAApBD,EAASptK,QACXqtK,EAAWD,EACXA,EAAW,KAAOA,GACW,IAApBA,EAASptK,SAClBqtK,EAAWD,EAASx8J,OAAO,EAAG,IAGhC,IAAI44C,EAAc,KAClB,IAAK,IAAI1nD,EAAI,EAAGA,EAAIu3J,GAA4Ba,UAAUl6J,SAEtDmB,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Ba,UAAUp4J,GACpC,IACAu3J,GAA4Bc,cAAcr4J,KAElC,MAAZurK,EAEA7jH,EAAM2jH,EAAY,IAAME,EAExBlsK,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Ba,UAAUp4J,GACpC,IACAu3J,GAA4Be,aAAat4J,IAG7C0nD,EAAM2jH,EAAY,IAAMC,EAExBjsK,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Bc,cAAcr4J,GACxC,IACAu3J,GAA4Ba,UAAUp4J,KAE9B,MAAZurK,EAEA7jH,EAAM6jH,EAAW,IAAMF,EAEvBhsK,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Be,aAAat4J,GACvC,IACAu3J,GAA4Ba,UAAUp4J,IAG1C0nD,EAAM4jH,EAAW,IAAMD,EAEvBhsK,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Ba,UAAUp4J,GACpC,IACAu3J,GAA4Bc,cAAcr4J,KAElC,MAAZurK,EAEA7jH,EAAM2jH,EAAY,IAAME,EAExBlsK,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Ba,UAAUp4J,GACpC,IACAu3J,GAA4Be,aAAat4J,IAG7C0nD,EAAM2jH,EAAY,IAAMC,EAExBjsK,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Bc,cAAcr4J,GACxC,IACAu3J,GAA4Ba,UAAUp4J,KAE9B,MAAZurK,EAEA7jH,EAAM6jH,EAAW,IAAMF,EAEvBhsK,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Be,aAAat4J,GACvC,IACAu3J,GAA4Ba,UAAUp4J,IAG1C0nD,EAAM4jH,EAAW,IAAMD,EAEvBhsK,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Bc,cAAcr4J,GAAKu3J,GAA4Ba,UAAUp4J,KAE3E,MAAZurK,EAEA7jH,EAAM6jH,EAAWF,EAEjBhsK,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Be,aAAat4J,GAAKu3J,GAA4Ba,UAAUp4J,IAGtF0nD,EAAM4jH,EAAWD,EAEjBhsK,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Ba,UAAUp4J,GAAKu3J,GAA4Bc,cAAcr4J,KAE3E,MAAZurK,EAEA7jH,EAAM2jH,EAAYE,EAElBlsK,KAAK6rK,kBACHR,EAAWhjH,IACX6vG,GAA4Ba,UAAUp4J,GAAKu3J,GAA4Be,aAAat4J,MAGtF0nD,EAAM2jH,EAAYC,GAGT,MAAP5jH,GA7G4D1nD,KAkHvD,MAAP0nD,IACFA,EAAM4jH,EAAW,IAAMD,GAGzBhsK,KAAKmsK,0BAA0BlD,EAAY5gH,EAAKgjH,EAAWhjH,IAAK4hH,E,CAGlE,OAAOhB,CACT,CAQQ8B,kBAAkBqB,EAAiBpzJ,GAGzC,GAAIozJ,IAAYpzJ,EAAQswJ,OACtB,OAAO,EAMT,MAAMn+G,EAAoBnrD,KAAKo5I,gBAAgBnd,qBAAqBmwC,GAMpE,OALmBpzJ,EAAQigC,OAAOC,MAAM+R,WACtCmhH,EACAjhH,EACAnyC,EAAQoyC,gBAGZ,CAEQygH,kBAAkBvpI,EAAsB+pI,GAC9C,IAAK/pI,EACH,OAAO,EAGT,IAAIgqI,GAAc,EAYlB,OAXApU,GAA4BE,uBAAuBj5J,SAASqsK,IAE1D,GAAIc,IAAgBhqI,EAAM5qB,eAAe8zJ,KAAUlpI,EAAMkpI,GACvD,OAGF,IAAInzJ,EAAMiqB,EAAMkpI,GAChBnzJ,EAAMA,EAAIlQ,QAAQ,KAAM,IAAI1H,cAC5B6rK,EAAcj0J,EAAIvX,QAAQurK,IAAgB,CAAC,IAGtCC,CACT,CAEQ1B,2BACN3B,EACAllG,EACAkmG,EACAjxJ,GAEA,IAAKA,EAAQigC,OAAO1zC,SAClB,OAAO,KAGT,MAAM8lK,EAA8C,CAAC,EAErDtnG,EAAY1W,OAAOluD,SAAS8uC,IAC1B,IAAI,GAAgBq9H,oBAAoBr9H,KAIpCjuC,KAAKurK,eAAet9H,EAAExiC,KAAMqsJ,GAAkBG,uBAIlD,IAAK,IAAIt3J,EAAI,EAAGA,EAAIu4J,GAA0BC,mBAAmBt6J,OAAQ8B,IAAK,CAC5E,MAAM6qK,EAAOtS,GAA0BC,mBAAmBx4J,GAE1D,GAAKstC,EAAEv2B,eAAe8zJ,IAAUv9H,EAAEu9H,IAAUv9H,EAAEo8H,SAA9C,CAMA,IACGgB,EAAWpqK,MACZ,GAAgBwqK,aACdx9H,EAAEu9H,GACFtS,GAA0BE,mBAC1BF,GAA0BG,yBAE5B,CACAgS,EAAWpqK,KAAOgtC,EAClB,K,CACK,IACJo9H,EAAWvhH,WACZ,GAAgB2hH,aAAax9H,EAAEu9H,GAAOtS,GAA0BK,qBAChE,CACA8R,EAAWvhH,UAAY7b,EACvB,K,CACK,IACJo9H,EAAWriH,YACZ,GAAgByiH,aAAax9H,EAAEu9H,GAAOtS,GAA0BM,sBAChE,CACA6R,EAAWriH,WAAa/a,EACxB,K,CACK,IACJo9H,EAAWthH,UACZ,GAAgB0hH,aAAax9H,EAAEu9H,GAAOtS,GAA0BO,oBAChE,CACA4R,EAAWthH,SAAW9b,EACtB,K,CACK,IACJo9H,EAAWhyJ,OACZ,GAAgBoyJ,aAAax9H,EAAEu9H,GAAOtS,GAA0BI,iBAChE,CACA+R,EAAWhyJ,MAAQ40B,EACnB,K,CACK,IACJo9H,EAAWnqK,OACZ,GAAgBuqK,aAAax9H,EAAEu9H,GAAOtS,GAA0BQ,iBAChE,CACA2R,EAAWnqK,MAAQ+sC,EACnB,K,CACK,IACJo9H,EAAWt5H,SACZ,GAAgB05H,aACdx9H,EAAEu9H,GACFtS,GAA0BS,kBAC1BT,GAA0BU,wBAE5B,CACAyR,EAAWt5H,QAAU9D,EACrB,K,CACK,IACJo9H,EAAWpiH,UACZ,GAAgBwiH,aAAax9H,EAAEu9H,GAAOtS,GAA0BW,oBAChE,CACAwR,EAAWpiH,SAAWhb,EACtB,K,CACK,IACJo9H,EAAWniH,UACZ,GAAgBuiH,aAAax9H,EAAEu9H,GAAOtS,GAA0BY,oBAChE,CACAuR,EAAWniH,SAAWjb,EACtB,K,CACK,IACJo9H,EAAWliH,UACZ,GAAgBsiH,aAAax9H,EAAEu9H,GAAOtS,GAA0Ba,oBAChE,CACAsR,EAAWliH,SAAWlb,EACtB,K,CACK,IACJo9H,EAAWhiH,YACZ,GAAgBoiH,aAAax9H,EAAEu9H,GAAOtS,GAA0Bc,sBAChE,CACAqR,EAAWhiH,WAAapb,EACxB,K,CACK,IACJo9H,EAAWjiH,MACZ,GAAgBqiH,aAAax9H,EAAEu9H,GAAOtS,GAA0Be,gBAChE,CACAoR,EAAWjiH,KAAOnb,EAClB,K,CACK,IACJo9H,EAAWxrI,OACZ,GAAgB4rI,aAAax9H,EAAEu9H,GAAOtS,GAA0BgB,iBAChE,CACAmR,EAAWxrI,MAAQoO,EACnB,K,CACK,IACJo9H,EAAW/hH,SACZ,GAAgBmiH,aAAax9H,EAAEu9H,GAAOtS,GAA0BiB,mBAChE,CACAkR,EAAW/hH,QAAUrb,EACrB,K,CACK,IACJo9H,EAAW7hH,OACZ,GAAgBiiH,aAAax9H,EAAEu9H,GAAOtS,GAA0BkB,iBAChE,CACAiR,EAAW7hH,MAAQvb,EACnB,K,CACK,IACJo9H,EAAW51H,UACZ,GAAgBg2H,aAAax9H,EAAEu9H,GAAOtS,GAA0BmB,oBAChE,CACAgR,EAAW51H,SAAWxH,EACtB,K,CACK,IACJo9H,EAAW9hH,SACZ,GAAgBkiH,aAAax9H,EAAEu9H,GAAOtS,GAA0BoB,mBAChE,CACA+Q,EAAW9hH,QAAUtb,EACrB,K,OAKN,MAAM1oC,EAAWyT,EAAQigC,OAAO1zC,SAChCvF,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,SACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,aACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,cACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,YACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,YACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,YACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,YACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,QACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,cACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,WACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,SACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,SACtEjqK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,YAEtE,IAAIsC,GAAc,EAClB,GAAIlB,EAAWxrI,OAASt6B,EAASs6B,OAASt6B,EAASs6B,MAAMhhC,OAAS,EAAG,CACnE,MAAM2tK,EAAajnK,EAASs6B,MAAMp/B,cAC5BgsK,EACJvT,GAA0BiM,UAAUqH,IACpCtT,GAA0ByO,aAAa6E,GACrCC,IACFF,GAAc,EACdvsK,KAAKmsK,0BAA0BlD,EAAYwD,EAAUpB,EAAWxrI,MAAOoqI,G,CAItEsC,GACHvsK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,SAGxE,IAAIyC,GAAgB,EACpB,GAAIrB,EAAW/hH,SAAW/jD,EAAS+jD,SAAW/jD,EAAS+jD,QAAQzqD,OAAS,EAAG,CACzE,MAAM8tK,EAAepnK,EAAS+jD,QAAQ7oD,cAChCmsK,EAAa1T,GAA0BqB,aAAaoS,GACtDC,IACFF,GAAgB,EAChB1sK,KAAKmsK,0BAA0BlD,EAAY2D,EAAYvB,EAAW/hH,QAAS2gH,G,CAQ/E,GAJKyC,GACH1sK,KAAK0rK,iBAAiBzC,EAAY1jK,EAAU8lK,EAAYpB,EAAc,WAGpEoB,EAAWpqK,OAASsE,EAASukD,WAAavkD,EAASwkD,UAAW,CAChE,IAAIC,EAAW,GACX,GAAgBmgH,SAAS5kK,EAASukD,aACpCE,EAAWzkD,EAASukD,WAElB,GAAgBqgH,SAAS5kK,EAASyjD,cACnB,KAAbgB,IACFA,GAAY,KAEdA,GAAYzkD,EAASyjD,YAEnB,GAAgBmhH,SAAS5kK,EAASwkD,YACnB,KAAbC,IACFA,GAAY,KAEdA,GAAYzkD,EAASwkD,UAGvB/pD,KAAKmsK,0BAA0BlD,EAAYj/G,EAAUqhH,EAAWpqK,KAAMgpK,E,CAGxE,GAAIoB,EAAWt5H,SAAW,GAAgBo4H,SAAS5kK,EAAS0jD,UAAW,CACrE,IAAIlX,EAAU,GACV,GAAgBo4H,SAAS5kK,EAAS0jD,YACpClX,EAAUxsC,EAAS0jD,UAEjB,GAAgBkhH,SAAS5kK,EAAS2jD,YACpB,KAAZnX,IACFA,GAAW,MAEbA,GAAWxsC,EAAS2jD,UAElB,GAAgBihH,SAAS5kK,EAAS4jD,YACpB,KAAZpX,IACFA,GAAW,MAEbA,GAAWxsC,EAAS4jD,UAGtBnpD,KAAKmsK,0BAA0BlD,EAAYl3H,EAASs5H,EAAWt5H,QAASk4H,E,CAG1E,OAAOhB,CACT,CAEQsC,eAAe9/J,EAAcohK,GACnC,OAAOA,EAAc/rK,QAAQ2K,IAAS,CACxC,CAEQnO,oBACNsE,EACAoX,EACA8zJ,GAEAlrK,EAAQA,EACLpB,OACAC,cACA0H,QAAQ,iBAAkB,IAC7B,IAAK,IAAIxH,EAAI,EAAGA,EAAIqY,EAAQna,OAAQ8B,IAAK,CACvC,IAAIy+E,EAASpmE,EAAQrY,GACrB,MAAMosK,EAAwC,MAAnBD,GAA2BA,EAAgBhsK,QAAQs+E,IAAW,EAEzF,GADAA,EAASA,EAAO3+E,cAAc0H,QAAQ,KAAM,IACxCvG,IAAUw9E,GAAW2tF,GAAsBnrK,EAAMd,QAAQs+E,IAAW,EACtE,OAAO,C,CAIX,OAAO,CACT,CAEQssF,iBACNzC,EACA+D,EACA3B,EACApB,EACAgD,EACAC,GAEAA,EAAYA,GAAaD,EACzBjtK,KAAKmsK,0BACHlD,EACA+D,EAAWC,GACX5B,EAAW6B,GACXjD,EAEJ,CAEQkC,0BACNlD,EACAkE,EACA7qI,EACA2nI,GAEA,IAAImD,GAAS,EACb,GAAI,GAAgBjD,SAASgD,IAAc7qI,EACzC,GAAmB,eAAfA,EAAM72B,MAAyB62B,EAAMqpI,YAAcrpI,EAAMqpI,WAAW3yJ,QACtE,IAAK,IAAIrY,EAAI,EAAGA,EAAI2hC,EAAMqpI,WAAW3yJ,QAAQna,OAAQ8B,IAAK,CACxD,MAAMy+E,EAAS98C,EAAMqpI,WAAW3yJ,QAAQrY,GACxC,IAAK,IAAI8iB,EAAI,EAAGA,EAAI27D,EAAOvgF,OAAQ4kB,IACjC,GACE,GAAgB0mJ,SAAS/qF,EAAO37D,KAChC27D,EAAO37D,GAAGhjB,gBAAkB0sK,EAAU1sK,cACtC,CACA2sK,GAAS,EACLhuF,EAAOvgF,OAAS,IAClBsuK,EAAY/tF,EAAO,IAErB,K,CAIJ,GAAIguF,EACF,K,MAIJA,GAAS,EAITA,IACFnD,EAAa3nI,EAAM8nI,MAAQ9nI,EAC3B,GAAgBmoI,WAAWxB,EAAY3mI,EAAO6qI,GAElD,CAEA7vK,0BACEymE,EACAspG,EACAC,EACAC,EACAroG,GAEA,MAAMr1D,EAAuB,GAmD7B,OAlDAk0D,EAAY1W,OAAOluD,SAAS8uC,IAC1B,GAAI,GAAgBq9H,oBAAoBr9H,GACtC,OAGF,MAAMu/H,EAAwB,aAAXv/H,EAAExiC,KACfgiK,EAAuB7rK,IAC3B,GAAa,MAATA,EACF,OAAO,EAIT,MAAM8rK,EAAe9rK,EAAMnB,cAAc0H,QAAQ,WAAY,IAE7D,QAAIulK,EAAa5sK,QAAQ,YAAc,KAInCg3J,GAAkBE,wBAAwB7rG,MAAMxrD,GAAM+sK,EAAa5sK,QAAQH,IAAM,GAI1E,EAkBVstC,EAAEwM,WACF6yH,GAAkBr/H,EAAE0/H,YACpBH,GAjBc,SAAXv/H,EAAExiC,OAGFgiK,EAAoBx/H,EAAE2/H,SAGtBH,EAAoBx/H,EAAE4/H,WAGtBJ,EAAoBx/H,EAAE6/H,iBASzBT,IAAep/H,EAAEo8H,UAChBkD,GAA0B,MAAXt/H,EAAErsC,OAAoC,KAAnBqsC,EAAErsC,MAAMpB,SAC3C0kE,GAA0C,iBAAvBj3B,EAAE8/H,kBAEtBl+J,EAAIxQ,KAAK4uC,E,IAGNp+B,CACT,CAEQ+4J,kBACN7kG,EACAiqG,EACAX,EACAC,EACAW,GAEA,IAAIC,EAA+B,KACnC,IAAK,IAAIvtK,EAAI,EAAGA,EAAIojE,EAAY1W,OAAOxuD,OAAQ8B,IAAK,CAClD,MAAMstC,EAAI81B,EAAY1W,OAAO1sD,GAC7B,IAAI,GAAgB2qK,oBAAoBr9H,GAAxC,CAIA,GAAIA,EAAEk9H,eAAiB6C,EAAc7C,cACnC,MAGF,IACGl9H,EAAEwM,WACF6yH,IAAkBr/H,EAAE0/H,YACpBM,GAAehgI,EAAEmuC,OAAS4xF,EAAc5xF,QACxCixF,GAAep/H,EAAEo8H,YACN,SAAXp8H,EAAExiC,MAA8B,UAAXwiC,EAAExiC,MAA+B,QAAXwiC,EAAExiC,QAE9CyiK,EAAgBjgI,EAEZjuC,KAAKuqK,uBAAuBt8H,EAAG6pH,GAAkBC,qBAAuB,GAE1E,K,EAKN,OAAOmW,CACT,CAEQ3D,uBAAuBjoI,EAAsB6rI,GACnD,IAAK,IAAIxtK,EAAI,EAAGA,EAAIwtK,EAAMtvK,OAAQ8B,IAAK,CACrC,GAAIwtK,EAAMxtK,GAAGG,QAAQ,MAAQ,EAAG,CAC9B,GAAId,KAAKouK,2BAA2B9rI,EAAO,SAAU6rI,EAAMxtK,GAAI,MAC7D,OAAOA,EAET,GAAIX,KAAKouK,2BAA2B9rI,EAAO,WAAY6rI,EAAMxtK,GAAI,QAC/D,OAAOA,EAET,GAAIX,KAAKouK,2BAA2B9rI,EAAO,YAAa6rI,EAAMxtK,GAAI,SAChE,OAAOA,EAET,GAAIX,KAAKouK,2BAA2B9rI,EAAO,aAAc6rI,EAAMxtK,GAAI,SACjE,OAAOA,EAET,GAAIX,KAAKouK,2BAA2B9rI,EAAO,cAAe6rI,EAAMxtK,GAAI,eAClE,OAAOA,C,CAIX,GAAIX,KAAKquK,qBAAqB/rI,EAAO,SAAU6rI,EAAMxtK,IACnD,OAAOA,EAET,GAAIX,KAAKquK,qBAAqB/rI,EAAO,WAAY6rI,EAAMxtK,IACrD,OAAOA,EAET,GAAIX,KAAKquK,qBAAqB/rI,EAAO,YAAa6rI,EAAMxtK,IACtD,OAAOA,EAET,GAAIX,KAAKquK,qBAAqB/rI,EAAO,aAAc6rI,EAAMxtK,IACvD,OAAOA,EAET,GAAIX,KAAKquK,qBAAqB/rI,EAAO,cAAe6rI,EAAMxtK,IACxD,OAAOA,C,CAIX,OAAQ,CACV,CAEQytK,2BACN9rI,EACAgsI,EACArtK,EACA63B,EACAy1I,EAAY,KAEZ,GAAyC,IAArCttK,EAAKH,QAAQg4B,EAASy1I,GAAkB,CAC1C,MAAMC,EAAWvtK,EAAKH,QAAQytK,GACxBl2J,EAAMpX,EAAK4S,UAAU26J,EAAW,GACtC,OAAc,MAAPn2J,GAAerY,KAAKquK,qBAAqB/rI,EAAOgsI,EAAUj2J,E,CAEnE,OAAO,CACT,CAEQg2J,qBAAqB/rI,EAAYgsI,EAAkBrtK,GACzD,IAAIwtK,EAAWnsI,EAAMgsI,GACrB,IAAK,GAAgBnE,SAASsE,GAC5B,OAAO,EAIT,GADAA,EAAWA,EAASjuK,OAAO2H,QAAQ,kBAAmB,IAClDlH,EAAKmH,WAAW,UAClB,IACE,MAAMsmK,EAAaztK,EAAKoR,MAAM,IAAK,GACnC,GAA0B,IAAtBq8J,EAAW7vK,OAAc,CAE3B,OADc,IAAI2S,OAAOk9J,EAAW,GAAI,KAC3Bj9J,KAAKg9J,E,EAEpB,MAAOnlK,GACPtJ,KAAKmJ,WAAWI,MAAMD,E,MAEnB,GAAIrI,EAAKmH,WAAW,QAAS,CAClC,MAAMumK,EAAW1tK,EAAKoR,MAAM,IAAK,GACjC,GAAwB,IAApBs8J,EAAS9vK,OAAc,CACzB,MAAM+vK,EAAUD,EAAS,GAAGt8J,MAAM,KAClC,IAAK,IAAI1R,EAAI,EAAGA,EAAIiuK,EAAQ/vK,OAAQ8B,IAAK,CACvC,MAAM0X,EAAMu2J,EAAQjuK,GACpB,GAAW,MAAP0X,GAAeA,EAAI7X,OAAOC,gBAAkBguK,EAAShuK,cACvD,OAAO,C,CAGX,OAAO,C,EAIX,OAAOguK,EAAShuK,gBAAkBQ,CACpC,CAEA3D,yBAAyBglC,EAAsB6rI,GAC7C,SAAI,GAAgBhE,SAAS7nI,EAAMsrI,UAAW5tK,KAAK6uK,WAAWV,EAAO7rI,EAAMsrI,cAGvE,GAAgBzD,SAAS7nI,EAAMurI,YAAa7tK,KAAK6uK,WAAWV,EAAO7rI,EAAMurI,gBAI3E,GAAgB1D,SAAS7nI,EAAM,gBAC/BtiC,KAAK6uK,WAAWV,EAAO7rI,EAAM,oBAI3B,GAAgB6nI,SAAS7nI,EAAMwrI,eAAgB9tK,KAAK6uK,WAAWV,EAAO7rI,EAAMwrI,mBAI9E,GAAgB3D,SAAS7nI,EAAM,iBAC/BtiC,KAAK6uK,WAAWV,EAAO7rI,EAAM,qBAK7B,GAAgB6nI,SAAS7nI,EAAM,gBAC/BtiC,KAAK6uK,WAAWV,EAAO7rI,EAAM,mBAK7B,GAAgB6nI,SAAS7nI,EAAM,iBAC/BtiC,KAAK6uK,WAAWV,EAAO7rI,EAAM,oBAMjC,CAEQhlC,kBAAkB0b,EAAmBpX,GAC3C,GAAe,MAAXoX,GAAsC,IAAnBA,EAAQna,QAAyB,MAAT+C,GAA2B,KAAVA,EAC9D,OAAO,EAGTA,EAAQA,EACLuG,QAAQ,kBAAmB,IAC3B3H,OACAC,cAEH,IAAK,IAAIE,EAAI,EAAGA,EAAIqY,EAAQna,OAAQ8B,IAClC,GAAIiB,EAAMd,QAAQkY,EAAQrY,KAAO,EAC/B,OAAO,EAIX,OAAO,CACT,CAEArD,gBAAgByR,GACd,OAAOA,GAAe,KAARA,CAChB,CAEAzR,6BACE2sK,EACAhB,GAEA,IAAI6F,EAA2B,KAC3BC,EAAmC,KAEvC,IAAK,MAAM3E,KAAQH,EAEbA,EAAavyJ,eAAe0yJ,IAASH,EAAaG,GAAMC,WAC1DyE,EAAY7E,EAAaG,GAEO,aAA5BH,EAAaG,GAAM3+J,OACrBsjK,EAAoB9E,EAAaG,KAYvC,OANI2E,EACF9F,EAAWtR,OAAOt4J,KAAK,CAAC,gBAAiB0vK,EAAkB3E,OAClD0E,GACT7F,EAAWtR,OAAOt4J,KAAK,CAAC,gBAAiByvK,EAAU1E,OAG9CnB,CACT,CAEA3rK,kBAAkB2rK,EAA4B3mI,EAAsB1gC,GAC9D0gC,EAAMwpI,WAAalqK,GAASA,EAAM/C,OAASyjC,EAAMwpI,YACnDlqK,EAAQA,EAAM6N,OAAO,EAAG7N,EAAM/C,SAEV,SAAlByjC,EAAM/2B,UACR09J,EAAWtR,OAAOt4J,KAAK,CAAC,gBAAiBijC,EAAM8nI,OAC/CnB,EAAWtR,OAAOt4J,KAAK,CAAC,gBAAiBijC,EAAM8nI,QAEjDnB,EAAWtR,OAAOt4J,KAAK,CAAC,eAAgBijC,EAAM8nI,KAAMxoK,GACtD,CAEAtE,2BAA2BglC,GACzB,MAAyB,SAAlBA,EAAM/2B,OACf,E,2SC/6CK,MAAMyjK,GAA0B,iB,2SCKhC,MAAMjhJ,GAAkB,CAAOoD,EAAsB7D,IAAiB,qCAC3E,GAAc,MAAV6D,EAAIvxB,GACN,MAAM,IAAIqR,MAAM,sEAGlB,mBAA2BkgB,EAAIvxB,GAAI,CACjCwqB,QAAS,WACTkD,KAAMA,GAEV,I,2SCbO,MAKD2hJ,GAAyB,CAC7B75F,eAAgB,MAkDlB,SAAe85F,GAAqBC,EAAwBn+B,G,0CACxB,GAA9B,yBACInnI,OAAOC,QAAQmmJ,QAAQz9I,IAAI,CAAE,CAAC28J,GAAcn+B,IAElDi+B,GAAWE,GAAen+B,CAE9B,G,4SCzDO,MAAMo+B,GACXtyK,YACU0nB,EACAthB,GADA,KAAAshB,0BAAAA,EACA,KAAAthB,aAAAA,CACP,CAEGmsK,4BAA4Bl+I,G,0CAChC,MAAOnY,SAAiBhZ,KAAKwkB,0BAA0BjE,aACjDlC,QAAiBre,KAAKwkB,0BAA0BnF,iBAAiBrG,GAEvE+U,GAAgBoD,EAAK9S,GAErB,MAAM+2D,QAAuBp1E,KAAKkD,aAAamyE,oBAEzB,MAAlBD,UDmBD,SAA4B+5F,EAAwBG,G,0CACzD,IAAKA,GAAyB,IAAbA,EAEf,kBADMtvK,KAAKuvK,eAAeJ,IAI5B,MAAMn+B,EAAO7uH,KAAKC,MAAQktJ,QACpBJ,GAAqBC,EAAan+B,EAC1C,G,CC1BYw+B,CAAaR,GAA0C,IAAjB55F,GAEhD,G,6SCpBK,MAAMq6F,GACX3yK,YAAoBgnE,GAAA,KAAAA,gBAAAA,CAAmC,CAEjD4rG,qBAAqBv+I,G,0CACzB,IAAKA,EAAIvxB,GACP,MAAM,IAAIqR,MAAM,sDAGlB,MAAMszD,QAAgBvkE,KAAK2vK,mBAAmBx+I,EAAIvxB,UAC5CI,KAAK8jE,gBAAgB8lG,gBACzB,CACE,CACEvlG,QAAS,EACTlzC,IAAKA,EACLozC,QAASA,IAGbpzC,GACA,EAEJ,G,CAEMy+I,+BAA+Bz+I,EAAsB8nB,G,0CACzD,IAAK9nB,EAAIvxB,GACP,MAAM,IAAIqR,MAAM,sDAGlB,MAAMszD,QAAgBvkE,KAAK2vK,mBAAmBx+I,EAAIvxB,UAC5CI,KAAK8jE,gBAAgBmB,WAAW,CACpC9zC,IAAKA,EACL8nB,OAAQA,EACR8qB,YAAa,CACX,CACEM,QAAS,EACTlzC,IAAKA,EACLozC,QAASA,IAGbmlG,cAAc,EACdP,sBAAsB,EACtBC,iBAAiB,EACjBC,mBAAmB,EACnBnkG,iBAAiB,GAErB,G,CAEcyqG,mBAAmB7+I,G,0CAC/B,OAAO,IAAIpnB,SAAQ,CAACC,EAASC,KAC3BC,OAAOknB,KAAKM,YACVP,EACA,CACE1G,QAAS,kCAEV3O,IACK5R,OAAOK,QAAQC,UACjBP,EAAOC,OAAOK,QAAQC,WAIxBR,EAAQ8R,EAAS,GAEpB,GAEL,G,6SCrBF,MAAM,GAAkB,IAAIk7I,IAC1BjtJ,QAAQE,OAAc,sEAEjB,MAAMimK,GACX/yK,YACUixB,EACAshJ,EACAS,EACAhtK,EACAisD,EACAoQ,EACAjQ,GANA,KAAAnhC,gBAAAA,EACA,KAAAshJ,4BAAAA,EACA,KAAAS,eAAAA,EACA,KAAAhtK,YAAAA,EACA,KAAAisD,cAAAA,EACA,KAAAoQ,YAAAA,EACA,KAAAjQ,uBAAAA,CACP,CAEH5xD,iBAAuB2xJ,G,0CACrB,MAAM5xB,EAAe,IAAI/1B,GAAaM,GAAa2nD,IAC7CwG,EAAoE,CACxEpD,kBAAmB,CACjBzvD,eAAgB,IAElBkuD,6BAA8B,CAC5B98I,IAAKxF,MAEPuiJ,sBAAuB,CACrB1lC,gBAAgB,GAElB6oC,mBAAoB,CAClB1B,eAAgBjpJ,OAAOupB,KAAKC,iBAE9BshI,2BAA4B,CAC1BzxD,eAAgB,IAElBwsD,kBAAmB,CACjB7hI,OAAO,GAET4kI,4BAA6B,CAC3BznI,kBAAmB,GACnBD,uBAAwB,GACxBzW,IAAKxF,MAEPgjJ,6BAA8B,CAC5Bz0B,aAAcA,GAEhB20B,oBAAqB,CACnB30B,aAAcA,IAIZ0yC,EAAqC,IAAIX,SACvC3a,GAAiCxF,EAAgB8G,SACjDnE,GAAoB3C,EAAgB8G,IAGtC7lI,EAAkB,IAAIu/I,SC1DzB,SACLp+H,EACA69G,GAEA,OAAOF,GACL39G,EACA,kBACA69G,GACA,IAAW,mCACT,WAAI,SACIgG,GAAqB7jH,EAAO69G,SAC5B0C,GAAoBvgH,EAAO69G,SAC3BoI,GAAmBjmH,EAAO69G,SAC1BqI,GAA8BlmH,EAAO69G,SACrCO,GAAkBp+G,EAAO69G,SACzB+F,GAAuB5jH,EAAO69G,G,KAG5C,CDyCY8gB,CAAuB/gB,EAAgB8G,IAG/C,OAAO,IAAI8Z,IACR72J,GAAY+U,GAAgB/U,EAAQmY,IAAKnY,EAAQsU,QACjD6D,GAAQ4+I,EAAmCV,4BAA4Bl+I,KACxE,CAACA,EAAK8nB,IAAW/oB,EAAgB0/I,+BAA+Bz+I,EAAK8nB,UAC/Dy7G,GAAmBzF,EAAgB8G,SACnCb,GAAqBjG,EAAgB8G,SACrCuB,GAAmBrI,EAAgB8G,SACnCwB,GAA8BtI,EAAgB8G,GAExD,G,CAEAz4J,yBACEg+B,EACAnK,EACA89H,EAAiC,CAAC,G,0CAElC,MAAMrE,QAAkCilB,GAA0B9Y,UAAU9H,SACtErE,EAA0B9kG,IAAIxqB,EAAMnK,EAC5C,G,CAEA7zB,uBACEg0B,EACAqB,EACAs8H,G,0CAEA,GACsB,oBAApB39H,EAAQlH,SACgB,4BAAxBkH,EAAQ3b,KAAKtK,OAEb,OAGF,MAAMu/I,QAAkCilB,GAA0B9Y,UAAU9H,SACtErE,EAA0B9kG,IAC9Bx0B,EAAQ3b,KAAKq1I,eAAet4H,IAAI/c,KAChC2b,EAAQ3b,KAAKq1I,eAAer4H,OAAOxB,IAEvC,G,CAEM20B,IAAIxqB,EAAuCnK,G,0CAC/C,OAAQmK,EAAK66H,YACX,KAAKT,GACH,IAAKvkI,EACH,aAEInxB,KAAKqvK,4BAA4Bl+I,GACvC,MACF,KAAKskI,GACH,IAAKtkI,EACH,OAEFnxB,KAAK+tB,gBAAgB,CAAET,WAAYttB,KAAKiwK,cAAc9+I,EAAKmK,GAAOnK,IAAKA,IACvE,MACF,cACQnxB,KAAK+qJ,aAAazvH,EAAMnK,GAEpC,G,CAEM45H,aAAazvH,EAAuCnK,G,0CACxD,UAAWnxB,KAAK8C,YAAYS,iBAAmBhB,GAAqBioC,SAAU,CAC5E,MAAMshH,EAAoD,CACxDd,eAAgB,CACdt4H,IAAK,CAAEtI,QAASurI,GAAqBhgJ,KAAM2lB,GAC3C3I,OAAQ,CAAExB,IAAKA,IAEjB9lB,OAAQ,2BASV,aAPM,sBACJ8lB,EACA,uCACA26H,cAGI,sBAA8B36H,EAAK,kB,CAM3C,MAAMvxB,EAAM07B,EAAK66H,WAAsB9jJ,MAAM,KAAK,GAClD,IAAI4mC,EACJ,GAAIr5C,IAAO+1J,GAAqB,CAK9B18G,SADsBj5C,KAAK+uD,cAAc6W,sBAAsBz0C,EAAIztB,MAClD3E,MAAMK,GAAMA,EAAEsuD,WAAa5G,GAAmB5iD,M,KAC1D,CAEL+0C,SADsBj5C,KAAK+uD,cAAcwE,mBACxBx0D,MAAMK,GAAMA,EAAEQ,KAAOA,G,CAGxC,GAAc,MAAVq5C,EAIJ,OAAQ3d,EAAK40I,kBACX,KAAK7a,GACH,GAAW,MAAPlkI,EACF,aAEInxB,KAAK8vK,eAAe3+I,EAAK8nB,GAC/B,MACF,KAAKq8G,GACHt1J,KAAK+tB,gBAAgB,CAAET,KAAM2rB,EAAOC,MAAMzD,SAAUtkB,IAAKA,IACzD,MACF,KAAKokI,GACHv1J,KAAK+tB,gBAAgB,CAAET,KAAM2rB,EAAOC,MAAM76B,SAAU8S,IAAKA,IACzDnxB,KAAKkvD,uBAAuByC,QAAQtlD,GAAU8jK,4BAA6Bl3H,EAAOr5C,IAClF,MACF,KAAK41J,GACHx1J,KAAK+tB,gBAAgB,CAAET,WAAYttB,KAAKm/D,YAAYU,QAAQ5mB,EAAOC,MAAM8S,MAAO76B,IAAKA,IAG3F,G,CAEc8+I,cAAc9+I,EAAsBmK,G,0CAChD,OAAO,IAAI5xB,SAAgB,CAACC,EAASC,KACnC,mBACEunB,EAAIvxB,GACJ,CAAEwqB,QAAS,qBACX,CAAEi6C,QAAS/oC,EAAK+oC,UACf38B,IACK79B,OAAOK,QAAQC,UACjBP,EAAOC,OAAOK,QAAQC,WAIxBR,EAAQ+9B,EAAW,GAEtB,GAEL,G,6SEpNK,MAAM0oI,GAoBX9yK,+BACEgxJ,EACA0I,G,gDAEM,IAAIoZ,GAAYthK,MAAMg3C,IAAI,CAC9Bh1B,MAAOw9H,EAAWx9H,MAClBu/I,iBAAkBrZ,EAClBrmI,SAAU29H,EAAW39H,UAEzB,G,CAEArzB,8BACEoxJ,EACAC,EACAqI,G,gDAEM,IAAIoZ,GAAYthK,MAAMg3C,IAAI,CAAEh1B,MAAO49H,EAAY2hB,iBAAkBrZ,GACzE,G,CAEA15J,6BACEwzB,EACAg+H,EACA39H,EACA6lI,G,gDAEM,IAAIoZ,GAAYthK,MAAMg3C,IAAI,CAC9Bh1B,QACAu/I,iBAAkBrZ,EAClBrmI,SAAUQ,EAAIR,UAElB,G,CAEArzB,uBACEg0B,EACA0lI,G,0CAEKoZ,GAAYE,mBAAmBvsK,SAASutB,EAAQlH,iBAI/C,IAAIgmJ,GAAYthK,MAAMg3C,IAAI,CAAEuqH,iBAAkBrZ,IACtD,G,CAEAl6J,YAAYwX,GAzDJ,KAAAnG,QAAS,EA0DfnO,KAAKuwK,YAAc,sBACnBvwK,KAAKgwB,cAAgB,oBAA4BlhB,MACjD9O,KAAKsU,IAAMA,CACb,CAEMwxC,IAAIopG,G,gDAKFlvJ,KAAKwwK,aAAathB,aAAI,EAAJA,EAAMmhB,kBAE9B,MAAM/sK,QAAmBtD,KAAK8C,YAAYS,gBAI1C,aAFMvD,KAAKywK,0BAEHntK,GACN,KAAKf,GAAqBiB,gBAClBxD,KAAK0wK,eACX,MAEF,KAAKnuK,GAAqBoB,aAClB3D,KAAK2wK,YACX,MAEF,KAAKpuK,GAAqBioC,SAAU,CAClC,MAAMrZ,QAAYnxB,KAAK4wK,OAAO1hB,aAAI,EAAJA,EAAMp+H,MAAOo+H,aAAI,EAAJA,EAAMv+H,gBAC3C3wB,KAAK6wK,YAAY,CAAE1/I,MAAKR,SAAUQ,aAAG,EAAHA,EAAKR,WAC7C,K,EAGN,G,CAEM+/I,e,gDACE1wK,KAAK8wK,aAAa,eAClB9wK,KAAK+wK,gBACb,G,CAEMJ,Y,gDACE3wK,KAAK8wK,aAAa,iBAClB9wK,KAAK+wK,gBACb,G,CAEcA,iB,0CACZ,MAAMhgJ,QAAa,mBACP,MAARA,GACFA,EAAK5xB,SAAegyB,GAAQ,mCACZ,MAAVA,EAAIvxB,WACAI,KAAKgxK,aAAa,GAAI7/I,EAAIvxB,IAEpC,KAEJ,G,CAEMixK,YAAY3hB,G,wDACVlvJ,KAAKwwK,qBAELxwK,KAAK8wK,aAAa,IAGxB,SADkC9wK,KAAKkD,aAAa+xE,yBAElD,OAGF,MAAMtP,QAAgB3lE,KAAK+uD,cAAc6W,sBAA+B,QAAT,EAAAspF,aAAI,EAAJA,EAAM/9H,WAAG,eAAEztB,KAC1E,IAAIutK,EAA8B,GAAlBtrG,EAAQ9mE,OAAc,GAAK8mE,EAAQ9mE,OAAOgC,WACtD8kE,EAAQ9mE,OAAS,IACnBoyK,EAAY,YAERjxK,KAAKgxK,aAAaC,EAAoB,QAAT,EAAA/hB,aAAI,EAAJA,EAAM/9H,WAAG,eAAEvxB,G,IAGhD6wK,wBAAwB18J,EAAQ,W,OACV,QAAhB,EAAA/T,KAAKuwK,mBAAW,eAAEE,0BACpBzwK,KAAKuwK,YAAYE,wBAAwB,CAAE18J,UAEzC/T,KAAKkxK,eAAelxK,KAAKgwB,gBAC3BhwB,KAAKgwB,cAAcygJ,wBAAwB,CAAE18J,SAEjD,CAEAi9J,aAAa1jJ,EAAcwD,GACzB9wB,KAAKmxK,cAAc7jJ,EAAMwD,GACzB9wB,KAAKoxK,eAAe9jJ,EAAMwD,EAC5B,CAEMggJ,aAAaO,EAAoB1gJ,G,0CACrC,MAAM3X,EAAuB,CAC3BkgB,KAAM,CACJ,GAAI,iBAAmBm4I,EAAa,OACpC,GAAI,iBAAmBA,EAAa,SAGpC1gJ,GAAY7F,GAA4BO,cAC1CrS,EAAQ2X,SAAWA,SAGf3wB,KAAKsxK,cAAct4J,SACnBhZ,KAAKuxK,qBAAqBv4J,EAClC,G,CAEQm4J,cAAc7jJ,EAAcwD,G,OACd,QAAhB,EAAA9wB,KAAKuwK,mBAAW,eAAES,eACpBhxK,KAAKuwK,YAAYS,aAAa,CAAE1jJ,OAAMwD,SAE1C,CAEQsgJ,eAAe9jJ,EAAcwD,GACnC,GAAI9wB,KAAKkxK,eAAelxK,KAAKgwB,eAC3BhwB,KAAKgwB,cAAcghJ,aAAa,CAAE1jJ,OAAMwD,eACnC,GAAI9wB,KAAKgwB,cAAe,CAE7B,MAAM3W,EAAQ,aAAY,iBAAoBiU,GAAQ,GAAK,KAAKA,MAChEttB,KAAKgwB,cAAcwhJ,SAAS,CAAEn4J,QAAOyX,S,CAEzC,CAEcwgJ,cAAct4J,G,iDACL,QAAhB,EAAAhZ,KAAKuwK,mBAAW,eAAEkB,WAInBzxK,KAAK0xK,gBACP1xK,KAAKuwK,YAAYkB,QAAQz4J,SAEnB,IAAItP,SAAeC,GAAY3J,KAAKuwK,YAAYkB,QAAQz4J,GAAS,IAAMrP,Q,IAInE4nK,qBAAqBv4J,G,iDACV,QAAlB,EAAAhZ,KAAKgwB,qBAAa,eAAEyhJ,WAIrBzxK,KAAK0xK,gBACP1xK,KAAKgwB,cAAcyhJ,QAAQz4J,SAErB,IAAItP,SAAeC,GAAY3J,KAAKgwB,cAAcyhJ,QAAQz4J,GAAS,IAAMrP,Q,IAIrEinK,OAAO9/I,EAAgBH,G,oDACnC,OAK8E,QAJ3E,EAG0E,QAH3E,EAAgC,QAAhC,QAAO,UAAkBG,UAAO,QAC/BH,QACS,kBAA0B,CAAED,QAAQ,EAAMC,mBAC1C,kBAA0B,CAAED,QAAQ,EAAMM,eAAe,WAAQ,cACpE,kBAA0B,CAAEN,QAAQ,EAAMihJ,mBAAmB,WAAQ,cACrE,kBAA0B,CAAEjhJ,QAAQ,G,IAInCghJ,sBACV,OACE5mJ,GAA4BO,aAAeP,GAA4BiB,SAAS/rB,KAAKsU,IAEzF,CAEck8J,aAAaoB,G,0CACzB,GAAI5xK,KAAKmO,OACP,OAAOnO,KAGT,MAAMg3J,EAAwC4a,GAAwB,CAAC,EACjE1iB,EAAO,CACXkC,6BAA8B,CAAE98I,IAAKxF,MACrCuiJ,sBAAuB,CAAE1lC,gBAAgB,GACzC+jC,kBAAmB,CAAE7hI,OAAO,GAC5B4kI,4BAA6B,CAC3B1nI,uBAAwB,CAACs/H,EAAwBn8H,IAC/CxkB,QAAQE,OAAO,mBACjBohB,kBAAmB,IAAMthB,QAAQE,OAAO,mBACxC0K,IAAKxF,MAEPkjJ,oBAAqB,CACnB30B,aAAc,IAAI/1B,GAAaM,GAAa2nD,KAE9CuC,6BAA8B,CAC5Bz0B,aAAc,IAAI/1B,GAAaM,GAAa2nD,KAE9CoD,kBAAmB,CACjBzvD,eAAgB,IAAMx5F,QAAQE,OAAO,oBAEvC+qJ,2BAA4B,CAC1BzxD,eAAgB,IAAMx5F,QAAQE,OAAO,oBAEvC4qJ,mBAAoB,CAClB1B,eAAgB,iBAAyBhkJ,QAiB7C,OAdA9O,KAAKkD,mBAAqB0uJ,GAAoBoF,EAAc9H,GAC5DlvJ,KAAK8C,kBAAoB4xJ,GAAmBsC,EAAc9H,GAC1DlvJ,KAAK+uD,oBAAsBmmG,GAAqB8B,EAAc9H,GAGzDpgJ,KAAKkF,2BACR,IAAIizI,GACF+P,EAAa9/I,cACb8/I,EAAajgJ,gBACbmwI,eAAep4I,MAGnB9O,KAAKmO,QAAS,EAEPnO,IACT,G,CAEQkxK,eACNn9I,GAEA,OAAiB,MAAVA,GAAiE,MAA9CA,EAA8Bi9I,YAC1D,EA1QwB,GAAAV,mBAAqB,CAC3C,cACA,WACA,WACA,gBACA,sBACA,eACA,cACA,iB,2bChCG,IAAMuB,GAAN,cAAiC,GAItC/0K,YAAYg2J,EAAgC5vJ,GAC1CjG,MAAM61J,GADoC,KAAA5vJ,aAAAA,CAE5C,GALA,IAACgmJ,GAAY,CAAE7B,YAAc/zI,GAAcA,I,iBACxBs0I,GAAA,I,+BAFRiqB,GAAkB,IAD9BnpB,G,+BAK2D9lJ,MAJ/CivK,I,2bCAN,IAAMC,GAAN,cAAiC,KACtC,IAAC5oB,GAAY,CAAE7B,YAAapR,GAAKj7F,SAAUssG,aAAc,U,iBACvCxmF,GAAA,I,8BAClB,IAACooF,GAAY,CAAE7B,YAAartG,GAASgB,SAAUssG,aAAc,U,iBACvCxmF,GAAA,I,kCAJXgxG,GAAkB,IAD9BppB,IACYopB,ICPE,MAAMC,GACnBtuK,KAAKmvB,EAAoBC,EAAW,CAAC,GACnC,MAAMvB,EAAU/qB,OAAOC,OAAO,CAAC,EAAG,CAAE4jB,QAASwI,GAAcC,GAC1D3kB,OAAeg3E,kCAAkC5zD,EACpD,E,2SCFa,MAAM,WAA4B,GAC/Ck+G,aACExvI,KAAKyvI,oBACDzvI,KAAK0E,qBAAqBqnB,WAC5B/rB,KAAKgyK,cAELzmG,aAAY,IAAMvrE,KAAKyvI,qBAAqB,IAEhD,CAKMuiC,c,0CAEJ,OACE,UACQ7nJ,GAAUgE,iBAAiB,SACjCnuB,KAAKyvI,mB,CACL,MAAOnmI,GAEPylB,QAAQo0F,IAAI,gCAAiC75G,E,CAGnD,G,6bCnBK,IAAM2oK,GAAN,cAAmC,KACxC,IAAC/oB,GAAY,CAAE7B,YAAap2B,GAAOj2E,SAAUssG,aAAc,U,iBACvCxmF,GAAA,I,gCACpB,IAACooF,GAAY,CAAE7B,YAAaxrF,GAAW7gB,SAAUssG,aAAc,U,iBACvCxmF,GAAA,I,oCAJbmxG,GAAoB,IADhCvpB,IACYupB,I,2SCEE,MAAMC,GAInBp1K,YACUmxJ,EACAzpI,EACA9f,EACA2f,EACAvhB,GAJA,KAAAmrJ,KAAAA,EACA,KAAAzpI,0BAAAA,EACA,KAAA9f,qBAAAA,EACA,KAAA2f,oBAAAA,EACA,KAAAvhB,YAAAA,EAER9C,KAAK+rB,SAAW/rB,KAAK0E,qBAAqBqnB,WAC1C/rB,KAAK2rB,UAAY3rB,KAAK0E,qBAAqBinB,WAC7C,CAEMnW,O,0CACJ,mBACE,uBACA,CAAOkd,EAAUC,EAAsCwyD,IAAsB,mCACvD,oBAAhBzyD,EAAItI,SAAqD,wBAApBsI,EAAI/c,KAAKtK,eAC1CrL,KAAKmyK,eACTz/I,EAAI/c,KAAKq1I,eAAet4H,IAAItI,QAC5BsI,EAAI/c,KAAKq1I,eAAer4H,QAG9B,MAGE9oB,QAAUA,OAAOsmB,UACnBtmB,OAAOsmB,SAASiiJ,UAAUzgJ,aAAmBvH,GAAoB,yCACzDpqB,KAAKmyK,eAAe/nJ,EAC5B,KAEJ,G,CAEc+nJ,eAAe/nJ,EAAiBuI,G,0CAC5C,OAAQvI,GACN,IAAK,0BACGpqB,KAAKqvK,8BACX,MACF,IAAK,uBACGrvK,KAAKqyK,cAAc1/I,EAASA,EAAOxB,IAAM,MAC/C,MACF,IAAK,mBACGnxB,KAAKsyK,YACX,MACF,IAAK,mBACGtyK,KAAKqkB,oBAAoBs8D,OAKrC,G,CAEc0uF,8B,kDACZ,MAAMr2J,EAAkE,QAAvD,EAAkD,QAAnD,QAAOhZ,KAAKwkB,0BAA0BjE,oBAAa,eAAG,UAAE,QAAI,CAAC,EACvElC,QAAiBre,KAAKwkB,0BAA0BnF,iBAAiBrG,GACvEhZ,KAAK0E,qBAAqBqpB,gBAAgB1P,EAAU,CAAEnQ,SACtDlO,KAAKwkB,0BAA0BzC,WAAW1D,E,IAG9Bg0J,cAAclhJ,G,0CAK1B,GAJKA,IACHA,QAAY,gCAGH,MAAPA,EAAJ,CAIA,UAAWnxB,KAAK8C,YAAYS,iBAAmBhB,GAAqBioC,SAAU,CAC5E,MAAMshH,EAAoD,CACxDd,eAAgB,CACdt4H,IAAK,CAAEtI,QAAS,kBAChBuI,OAAQ,CAAExB,IAAKA,IAEjB9lB,OAAQ,uBASV,aAPM,sBACJ8lB,EACA,uCACA26H,QAGF,sBAA8B36H,EAAK,iB,OAI/BnxB,KAAKiuJ,KAAKskB,mCAAmCphJ,EAAK,e,CAC1D,G,CAEcmhJ,Y,0CAEPtyK,KAAK+rB,UAIV/rB,KAAKiuJ,KAAKqkB,WACZ,G,6SCrGa,MAAME,GAKnB11K,YACUunB,EACAnhB,EACAuvK,GAFA,KAAApuJ,oBAAAA,EACA,KAAAnhB,aAAAA,EACA,KAAAuvK,qBAAAA,EANF,KAAAC,UAAoB,KACpB,KAAAC,UAAY,SAOlB3yK,KAAK4yK,KAAO/oK,OAAO+oK,OAAoB,MAAXloJ,QAAkBA,QAAQkoJ,KAAO,KAC/D,CAEMp9J,O,0CACJ,IAAKxV,KAAK4yK,KACR,OAGF,MAAMC,EAAeC,IACF,WAAbA,EACF9yK,KAAKyyK,qBAAqBv7C,wBAE1Bl3H,KAAKyyK,qBAAqBt7C,0B,EAG1Bn3H,KAAK4yK,KAAKG,gBAAkB/yK,KAAK4yK,KAAKI,sBACxChzK,KAAK4yK,KAAKI,qBA5BK,KA6BfhzK,KAAK4yK,KAAKG,eAAephJ,YAAYkhJ,IAErC7yK,KAAKizK,SAASJ,GAGZ7yK,KAAK4yK,KAAKG,gBACZ/yK,KAAK4yK,KAAKG,eAAephJ,aAAmBmhJ,GAAqB,mCAC/D,GAAiB,WAAbA,EAAuB,CAGzB,IAAiB,WADK9yK,KAAKkD,aAAa85E,mBACpB,QAEGh9E,KAAKkD,aAAa67E,2BACxB7F,GAAmB2F,aAC1B7+E,KAAKqkB,oBAAoBmB,eAEzBxlB,KAAKqkB,oBAAoBs8D,M,EAIvC,KAEJ,G,CAEQsyF,SAASC,GACO,MAAlBlzK,KAAK0yK,YACPxkK,OAAO03B,aAAa5lC,KAAK0yK,WACzB1yK,KAAK0yK,UAAY,MAEnB1yK,KAAK4yK,KAAKO,WA1DO,KA0DmBtzI,IAC9BA,IAAU7/B,KAAK2yK,YACjB3yK,KAAK2yK,UAAY9yI,EACjBqzI,EAAQrzI,IAEV7/B,KAAK0yK,UAAYxkK,OAAO4G,YAAW,IAAM9U,KAAKizK,SAASC,IAAU,IAAK,GAE1E,E,2SChBK,MAAME,GAaXt2K,YACUoa,EACA0kB,EACAy3I,EACA1zK,EACAqD,EACA64B,EACAn3B,EACAxB,EACAiG,EACArG,G,MATA,KAAAoU,cAAAA,EACA,KAAA0kB,sBAAAA,EACA,KAAAy3I,kBAAAA,EACA,KAAA1zK,YAAAA,EACA,KAAAqD,iBAAAA,EACA,KAAA64B,aAAAA,EACA,KAAAn3B,qBAAAA,EACA,KAAAxB,aAAAA,EACA,KAAAiG,WAAAA,EACA,KAAArG,YAAAA,EAtBF,KAAAyzH,WAAY,EAIZ,KAAA+8C,SAAgB,KAChB,KAAAh/E,WAA0B,KAC1B,KAAAh9D,UAAyB,KACzB,KAAAi8I,mBAA0B,KAiBhCvzK,KAAKkD,aAAau9E,kCAAiC,IAE5B,QAAnB,EAAM,OAAN52E,aAAM,IAANA,YAAM,EAANA,OAAQiqB,mBAAW,eAAE0/I,UAEvB3pK,OAAOiqB,YAAY0/I,QAAQ7hJ,aAAamC,IACtC,mBAA2B,KAAK,GAGtC,CAEM2/I,U,0CAIJ,OAHAzzK,KAAKi+F,YAAcj+F,KAAK67B,aAAakC,WACrC/9B,KAAKkD,aAAau9E,kCAAiC,GAE5C,IAAI/2E,SAAc,CAACC,EAASC,KACjC5J,KAAK0zK,KAAO,iBAAyB,sBAErC1zK,KAAK2zK,YAAa,EAElB,MAAMC,EAAoB,KACxB5zK,KAAKu2H,WAAY,EACjBv2H,KAAK2zK,YAAa,EAClBhqK,GAAS,EAKP3J,KAAK0E,qBAAqBqnB,YAC5B6nJ,IAGF5zK,KAAK0zK,KAAKjhJ,UAAUd,aAAmBL,GAAiC,mCACtE,OAAQA,EAAQlH,SACd,IAAK,YACHwpJ,IACA,MACF,IAAK,eACC5zK,KAAK2zK,YACP/pK,EAAO,gBAET5J,KAAKu2H,WAAY,EACjBv2H,KAAK0zK,KAAKG,aACV,MACF,IAAK,kBAAmB,CAEtB,GAAIviJ,EAAQ2sE,QAAUj+F,KAAKi+F,MACzB,OAGF,MAAMx8E,EAAY,kBAAqB6P,EAAQwiJ,cACzCnyJ,QAAkB3hB,KAAK47B,sBAAsBuC,WACjD1c,EAAU3R,OACV9P,KAAKs0F,WAjHS,QAqHZt0F,KAAK+zK,wBACP/zK,KAAK+zK,uBAAwB,EAC7B/zK,KAAKkD,aAAau9E,kCAAiC,IAErDzgF,KAAK8zK,aAAe,IAAIv8I,GAAmB5V,GAC3C3hB,KAAKuzK,qBACL,K,CAEF,IAAK,uBAEH,GAAIjiJ,EAAQ2sE,QAAUj+F,KAAKi+F,MACzB,OAGFj+F,KAAK8zK,aAAe,KACpB9zK,KAAKs0F,WAAa,KAClBt0F,KAAKu2H,WAAY,EAEjBv2H,KAAKgD,iBAAiBS,KAAK,aAAc,CACvC6pB,KAAMttB,KAAKL,YAAYM,EAAE,wCACzBoZ,MAAOrZ,KAAKL,YAAYM,EAAE,yCAC1ButB,YAAaxtB,KAAKL,YAAYM,EAAE,MAChCwL,KAAM,UAER,MACF,IAAK,oBACsB,MAArBzL,KAAK8zK,eACP9zK,KAAK+zK,uBAAwB,EAC7B/zK,KAAKg0K,yBAEP,MAEF,IAAK,cACHh0K,KAAKi0K,sBACL,MACF,QAEE,IAAKj0K,KAAK0E,qBAAqBqnB,YAAcuF,EAAQ2sE,QAAUj+F,KAAKi+F,MAClE,OAGFj+F,KAAKyyB,UAAUnB,EAAQA,SAE7B,MAEAtxB,KAAK0zK,KAAKQ,aAAaviJ,aAAazZ,IAClC,IAAI3O,EAEFA,EADE,sBACM2O,EAAE3O,MAAM+nB,QAERznB,OAAOK,QAAQC,UAAUmnB,QAGnCtxB,KAAK8zK,aAAe,KACpB9zK,KAAKs0F,WAAa,KAClBt0F,KAAKu2H,WAAY,EAGjB3sH,EADwB,MAATL,EAAgB,6BAA+B,KAChD,GACd,GAEN,G,CAEA0qK,sBACEj0K,KAAKgD,iBAAiBS,KAAK,aAAc,CACvC6pB,KAAMttB,KAAKL,YAAYM,EAAE,gCACzBoZ,MAAOrZ,KAAKL,YAAYM,EAAE,iCAC1ButB,YAAaxtB,KAAKL,YAAYM,EAAE,MAChCwL,KAAM,SAEV,CAEMhI,KAAK6tB,G,0CACJtxB,KAAKu2H,kBACFv2H,KAAKyzK,WAGbniJ,EAAQ5O,aAAe1iB,KAAKkD,aAAaklC,YACzC9W,EAAQ6iJ,UAAYhyJ,KAAKC,MAErBpiB,KAAK0E,qBAAqBqnB,WAC5B/rB,KAAKg6B,YAAY1I,GAEjBtxB,KAAKg6B,YAAY,CAAEikE,MAAOj+F,KAAKi+F,MAAO3sE,cAAetxB,KAAKo0K,eAAe9iJ,IAE7E,G,CAEM8iJ,eAAe9iJ,G,0CAKnB,OAJyB,MAArBtxB,KAAK8zK,qBACD9zK,KAAKq0K,6BAGAr0K,KAAKkX,cAAcqM,QAAQ9a,KAAK6xB,UAAUhJ,GAAUtxB,KAAK8zK,aACxE,G,CAEAQ,cACE,OAAO,IAAI5qK,SAAQ,CAACC,EAASC,KAC3B5J,KAAKszK,SAAW3pK,CAAO,GAE3B,CAEQqwB,YAAY1I,GAElB,IACE,MAAMoB,EAAWpB,EACbA,EAAQA,mBAAmB7b,KAE7Bid,EAAIpB,QAAU,CACZlb,gBAAiBkb,EAAQA,QAAQlb,gBACjCE,eAAgBgb,EAAQA,QAAQhb,eAChCX,KAAM2b,EAAQA,QAAQ3b,KACtBC,GAAI0b,EAAQA,QAAQ1b,GACpBC,IAAKyb,EAAQA,QAAQzb,MAGzB7V,KAAK0zK,KAAK15I,YAAYtH,E,CACtB,MAAOppB,GACPtJ,KAAKmJ,WAAWI,MAAM,qDAEtBvJ,KAAK8zK,aAAe,KACpB9zK,KAAKs0F,WAAa,KAClBt0F,KAAKu2H,WAAY,EAEjBv2H,KAAKgD,iBAAiBS,KAAK,aAAc,CACvC6pB,KAAMttB,KAAKL,YAAYM,EAAE,wCACzBoZ,MAAOrZ,KAAKL,YAAYM,EAAE,yCAC1ButB,YAAaxtB,KAAKL,YAAYM,EAAE,MAChCwL,KAAM,S,CAGZ,CAEcgnB,UAAU8hJ,G,0CACtB,IAAIjjJ,EAAUijJ,EAOd,GANKv0K,KAAK0E,qBAAqBqnB,aAC7BuF,EAAU7oB,KAAKC,YACP1I,KAAKkX,cAAcD,cAAcs9J,EAAyBv0K,KAAK8zK,gBAIrExiK,KAAKkjK,IAAIljJ,EAAQ6iJ,UAAYhyJ,KAAKC,OAlQd,IAmQtBpiB,KAAKmJ,WAAWI,MAAM,0CADxB,CAKA,OAAQ+nB,EAAQlH,SACd,IAAK,kBAAmB,CAGtB,SAFMpqB,KAAKkD,aAAai9E,+BAA+B,MAE9B,gBAArB7uD,EAAQ7V,SAA4B,CACtCzb,KAAKgD,iBAAiBS,KAAK,aAAc,CACvC6pB,KAAMttB,KAAKL,YAAYM,EAAE,4BACzBoZ,MAAOrZ,KAAKL,YAAYM,EAAE,6BAC1ButB,YAAaxtB,KAAKL,YAAYM,EAAE,MAChCwL,KAAM,UAER,K,CACK,GAAyB,kBAArB6lB,EAAQ7V,SAA8B,CAC/Czb,KAAKgD,iBAAiBS,KAAK,aAAc,CACvC6pB,KAAMttB,KAAKL,YAAYM,EAAE,8BACzBoZ,MAAOrZ,KAAKL,YAAYM,EAAE,+BAC1ButB,YAAaxtB,KAAKL,YAAYM,EAAE,MAChCwL,KAAM,UAER,K,CAGF,MAAMwV,QAAgBjhB,KAAKkD,aAAaynH,qBACxC,GAAgB,OAAZ1pG,IAAgC,IAAZA,EAAmB,CAChB,aAArBqQ,EAAQ7V,iBACJzb,KAAKkD,aAAas9E,oBAAmB,IAE7C,K,CAIF,UAAWxgF,KAAK8C,YAAYS,mBAAqBhB,GAAqBioC,SACpE,MAGF,GAAyB,aAArBlZ,EAAQ7V,SAAyB,OAC7Bzb,KAAKkX,cAAcoR,OACvB,IAAIiP,GAAmB,kBAAqBjG,EAAQmG,QAAQ3nB,SAI9D,UACQ9P,KAAKkX,cAAc+mB,qBAAqBj+B,KAAKkD,aAAaklC,Y,CAChE,MAAO9+B,GASP,OARAtJ,KAAKmJ,WAAWI,MAAM,yBAA2BD,SAC3CtJ,KAAKkX,cAAcswG,WACzBxnH,KAAKi0K,2BAGDj0K,KAAKszK,UACPtzK,KAAKszK,SAAShiJ,G,CAKlBtxB,KAAKqzK,kBAAkB9nB,eAAe,CAAEnhI,QAAS,YAAc,KAAM,K,CAEvE,K,CAEF,QACEpqB,KAAKmJ,WAAWI,MAAM,uCAAyC+nB,EAAQlH,SAIvEpqB,KAAKszK,UACPtzK,KAAKszK,SAAShiJ,E,CAElB,G,CAEc+iJ,sB,0CACZ,MAAO/8I,EAAWg9D,SAAoBt0F,KAAK47B,sBAAsBkC,mBAAmB,MAUpF,OATA99B,KAAKs3B,UAAYA,EACjBt3B,KAAKs0F,WAAaA,EAElBt0F,KAAKy0K,gBAAgB,CACnBrqJ,QAAS,kBACTkN,UAAW,mBAAsBA,GACjC5U,aAAc1iB,KAAKkD,aAAaklC,cAG3B,IAAI1+B,SAAQ,CAACC,EAASC,IAAY5J,KAAKuzK,mBAAqB5pK,GACrE,G,CAEc8qK,gBAAgBnjJ,G,0CACvBtxB,KAAKu2H,kBACFv2H,KAAKyzK,WAGbniJ,EAAQ6iJ,UAAYhyJ,KAAKC,MAEzBpiB,KAAKg6B,YAAY,CAAEikE,MAAOj+F,KAAKi+F,MAAO3sE,QAASA,GACjD,G,CAEc0iJ,wB,0CACZ,MAAMhzF,SACEhhF,KAAKkX,cAAc+mB,qBAAqBj+B,KAAKkD,aAAaklC,YAAapoC,KAAKs3B,YAClF/3B,KAAK,KAEPS,KAAKgD,iBAAiBS,KAAK,aAAc,CACvCmqB,KAAM,GAAG5tB,KAAKL,YAAYM,EACxB,wDACkB+gF,aACpB3nE,MAAOrZ,KAAKL,YAAYM,EAAE,gCAC1ButB,YAAaxtB,KAAKL,YAAYM,EAAE,MAChCwL,KAAM,WAEV,G,6SCpXa,MAAMipK,GAMnB53K,YACUmxJ,EACAnqF,EACAp/D,EACA/E,EACA8yK,EACAkC,EACAhwK,EACA3B,EACAmG,GARA,KAAA8kJ,KAAAA,EACA,KAAAnqF,gBAAAA,EACA,KAAAp/D,qBAAAA,EACA,KAAA/E,YAAAA,EACA,KAAA8yK,qBAAAA,EACA,KAAAkC,cAAAA,EACA,KAAAhwK,mBAAAA,EACA,KAAA3B,iBAAAA,EACA,KAAAmG,WAAAA,EAbF,KAAAyrK,sBAA+B,GAC/B,KAAAC,kBAA4B,KAC5B,KAAAC,gCAAyE,GAc/EjrK,OAAOK,QAAQ6qK,YAAYpjJ,aAAa4yC,IACtCvkE,KAAK60K,kBAAoBtwG,EAAQ10B,MAAM,GAE3C,CAEMr6B,O,0CACJ,IAAK3L,OAAOK,QACV,aAGIlK,KAAKg1K,mBACX,MAAMC,EAA4B,CAChCviJ,EACAC,EACAwyD,IACG,yCACGnlF,KAAKurJ,eAAe74H,EAAKC,EAAQwyD,EACzC,IAEA,mBAA2B,qBAAsB8vF,GAC7Cj1K,KAAKiuJ,KAAKinB,mBACXhnK,OAAeinK,mCAAqCF,EAEzD,G,CAEM1pB,eAAe74H,EAAUC,EAAsCwyD,G,oDACnE,OAAQzyD,EAAItI,SACV,IAAK,WACL,IAAK,WAAY,CACf,IAAI9G,GAEoC,QAApC,EAAAtjB,KAAK80K,uCAA+B,eAAEj2K,QAAS,IACjDykB,EAAOtjB,KAAK80K,gCAAgCzyJ,MAC5C,uCAGIriB,KAAKiuJ,KAAKM,qBACVvuJ,KAAKiuJ,KAAKO,aAAY,GAC5BxuJ,KAAKyyK,qBAAqBx7C,iBAAiC,aAAhBvkG,EAAItI,SAC/CpqB,KAAK20K,cAAcxqB,sBAEf7mI,UACI,sBACJA,EAAK0nI,eAAer4H,OAAOxB,IAC3B,kBACA7N,IAGJ,K,CAEF,IAAK,uCACHtjB,KAAK80K,gCAAgCz1K,KAAKqzB,EAAI/c,MAC9C,MACF,IAAK,eACG3V,KAAKiuJ,KAAKmnB,OAAO1iJ,EAAImoB,QAASnoB,EAAIhQ,QACxC,MACF,IAAK,gBACCgQ,EAAI8zB,eACN1xC,YAAW,IAAY,yCACf9U,KAAKiuJ,KAAKM,qBACVvuJ,KAAKiuJ,KAAKO,aAClB,KAAG,KACHxuJ,KAAKiuJ,KAAKonB,oBAAoBntE,sBAEhC,MACF,IAAK,kBACGloG,KAAKiuJ,KAAKqkB,YAChB,MACF,IAAK,iBACH,6BAAqC,oBAAoB,EAAM3/I,EAAOxB,KACtE,MACF,IAAK,oBAAqB,CACxB,MAAMmkJ,EACkB,OAAd,QAAR,EAAA5iJ,EAAI/c,YAAI,eAAEu7C,UACN,gCACA,0CAA4Cx+B,EAAI/c,KAAKu7C,SAE3D,6BAAqCokH,GAAkB,EAAM3iJ,EAAOxB,KACpE,K,CAEF,IAAK,WACHrc,YAAW,KACT,+BAAuC,GAC7B,QAAT,EAAA4d,EAAIqkC,aAAK,QAAI,GAChB,MACF,IAAK,oBACH/2D,KAAK0E,qBAAqB0qB,qBAAqBsD,EAAI/E,SAAU+E,EAAIrD,WACjE,MACF,IAAK,6BACGrvB,KAAKiuJ,KAAKskB,mCAAmC5/I,EAAOxB,IAAKuB,EAAIC,OAAQA,EAAO0xC,SAClF,MACF,IAAK,sBACL,IAAK,eACL,IAAK,cACL,IAAK,sBACGrkE,KAAKiuJ,KAAKM,qBACVvuJ,KAAKiuJ,KAAKO,cAChB,MACF,IAAK,wBACGxuJ,KAAKiuJ,KAAKsnB,gBAChB,MACF,IAAK,6BACH,OAAQ7iJ,EAAIC,QACV,IAAK,aACL,IAAK,eAAgB,CACnB,MAAMoyC,QAAiB/kE,KAAK8jE,gBAAgBimG,oBAC1C,CACE,CACE1lG,QAAS1xC,EAAO0xC,QAChBlzC,IAAKuB,EAAIvB,IACTozC,QAAS7xC,EAAI6xC,UAGF,iBAAf7xC,EAAIC,QAEU,MAAZoyC,GACF/kE,KAAK0E,qBAAqBqpB,gBAAgBg3C,EAAU,CAAE72D,SAExD,K,CAEF,IAAK,cACH03B,aAAa5lC,KAAKw1K,iBAClBx1K,KAAK40K,sBAAsBv1K,KAAK,CAC9BglE,QAAS1xC,EAAO0xC,QAChBlzC,IAAKuB,EAAIvB,IACTozC,QAAS7xC,EAAI6xC,UAEfvkE,KAAKw1K,gBAAkB1gK,YAAW,IAAY,gDAAM9U,KAAKy1K,aAAa/iJ,EAAIvB,IAAI,KAAE,KAKpF,MACF,IAAK,aAAc,CACjB,MAAMzH,EAAW1pB,KAAK2E,mBAAmBwC,iBAEzC,GAAoB,MAAhBurB,EAAIgjJ,UAAoB,eAAkBhsJ,KAAcgJ,EAAIgjJ,SAC9D,OAGF,IACE,gBACE,gDACE9lK,mBAAmB8iB,EAAImE,MACvB,UACAjnB,mBAAmB8iB,EAAImN,O,CAE3B,SACA7/B,KAAKmJ,WAAWI,MAAM,gC,CAExB,K,CAEF,IAAK,iBAAkB,CACrB,MAAMmgB,EAAW1pB,KAAK2E,mBAAmBwC,iBAEzC,GAAoB,MAAhBurB,EAAIgjJ,UAAoB,eAAkBhsJ,KAAcgJ,EAAIgjJ,SAC9D,OAGF,MAAMh7I,EACJ,oBAAoB9qB,mBAAmB8iB,EAAI/c,kBAC/B/F,mBAAmB8iB,EAAI4Y,YACrC,6BAAqC,yBAAyB5Q,KAAU,GACxE,K,CAEF,IAAK,cACH16B,KAAKgD,iBAAiBS,KAAK,eAC3B,MACF,IAAK,4BACHzD,KAAKgD,iBAAiBS,KAAK,aAAc,CACvCkqB,SAAU,4BACVtU,MAAOrZ,KAAKL,YAAYM,EAAE,6BAC1BqtB,KAAMttB,KAAKL,YAAYM,EAAE,iCACzButB,YAAaxtB,KAAKL,YAAYM,EAAE,MAChCwL,KAAM,SAER,MACF,IAAK,4BACHzL,KAAK0E,qBAAqBqpB,gBAAgB2E,EAAIgV,WAAY,CAAEx5B,S,IAOpDunK,aAAaE,G,0CACzB,MAAM5wG,QAAiB/kE,KAAK8jE,gBAAgBmB,WAAW,CACrD9zC,IAAKwkJ,EACL18H,OAAQj5C,KAAKiuJ,KAAK2nB,gBAClB7xG,YAAa/jE,KAAK40K,sBAClB1vG,iBAAiB,IAGH,MAAZH,GACF/kE,KAAK0E,qBAAqBqpB,gBAAgBg3C,EAAU,CAAE72D,SAIxDlO,KAAKiuJ,KAAK2nB,gBAAkB,KAC5B51K,KAAK40K,sBAAwB,EAC/B,G,CAEcI,mB,0CACZlgK,YAAW,IAAY,mCACS,MAA1B9U,KAAK60K,oBACwB,YAA3B70K,KAAK60K,oBACP,gBAAwB,+CAEd70K,KAAK2E,mBAAmByE,iCAC1BpJ,KAAK2E,mBAAmB0F,gCAIlCrK,KAAK60K,kBAAoB,KAE7B,KAAG,IACL,G,6SCjPa,MAAMgB,GAKnB/4K,YACE4H,EACQqqD,EACAjsD,GADA,KAAAisD,cAAAA,EACA,KAAAjsD,YAAAA,EAPF,KAAAgzK,oBAA6B,GASA,IAA/B,qBACF91K,KAAK+1K,WAAc7nK,OAAerE,OAAOksK,YAE3C/1K,KAAKqrB,UAAY3mB,EAAqB2mB,WACxC,CAEM7V,O,0CACCxV,KAAK+1K,YAAe/1K,KAAK+1K,WAAWC,iBAIzCh2K,KAAK+1K,WAAWC,eAAerkJ,aAC7B,CAAO4yC,EAAc9yC,IAAkB,mCACrC,GAAK8yC,EAAQ7gE,MAAgE,IAAzD1D,KAAK81K,oBAAoBh1K,QAAQyjE,EAAQ3nC,WAA7D,CASA,GAFA58B,KAAK81K,oBAAoBz2K,KAAKklE,EAAQ3nC,WAElC58B,KAAKqrB,UAEP,OAAO,IAAI3hB,SAAQ,CAAOC,EAASC,IAAW,yCACtC5J,KAAKi2K,uBAAuB1xG,EAAQ7gE,IAAKiG,EAASC,EAC1D,YAEM5J,KAAKi2K,uBAAuB1xG,EAAQ7gE,IAAK+tB,EAAUA,E,MAdrDA,GACFA,GAeN,KACA,CAAE3sB,KAAM,CAAC,aAAc,gBACvB,CAAC9E,KAAKqrB,UAAY,WAAa,kBAGjCrrB,KAAK+1K,WAAWG,YAAYvkJ,aAAa4yC,GAAiBvkE,KAAKm2K,oBAAoB5xG,IAAU,CAC3Fz/D,KAAM,CAAC,gBAET9E,KAAK+1K,WAAWK,gBAAgBzkJ,aAC7B4yC,GAAiBvkE,KAAKm2K,oBAAoB5xG,IAC3C,CACEz/D,KAAM,CAAC,gBAGb,G,CAGcmxK,uBAAuB/jK,EAAgB0T,EAAmBrc,G,0CACtE,UAAWvJ,KAAK8C,YAAYS,iBAAmBhB,GAAqBioC,SAClEjhC,SAIF,IACE,MAAMo8D,QAAgB3lE,KAAK+uD,cAAc6W,sBACvC1zD,EACA,KACAlE,GAAa6/B,MAEf,GAAe,MAAX83B,GAAsC,IAAnBA,EAAQ9mE,OAE7B,YADA0K,IAIFqc,EAAQ,CACNywJ,gBAAiB,CACf5gI,SAAUkwB,EAAQ,GAAGzsB,MAAMzD,SAC3Bp3B,SAAUsnD,EAAQ,GAAGzsB,MAAM76B,W,CAG/B,SACA9U,G,CAEJ,G,CAEQ4sK,oBAAoB5xG,GAC1B,MAAM5jE,EAAIX,KAAK81K,oBAAoBh1K,QAAQyjE,EAAQ3nC,WAC/Cj8B,GAAK,GACPX,KAAK81K,oBAAoB5jH,OAAOvxD,EAAG,EAEvC,E,2SCgCa,MAAM21K,GA4EnBx5K,YAAmBy5K,GAAyB,GAAzB,KAAAA,cAAAA,EAnBnB,KAAAC,iBAAmBtoK,OAInB,KAAA0nK,gBAA8B,KAgB5B51K,KAAKk1K,iBAAmBqB,GAAgD,IAA/B,mBAGzC,MAYMrzE,EAAiB,CAAOroD,EAAkBn4B,IAAmB,mCACjE,aAAM1iB,KAAKo1K,OAAOv6H,EAASn4B,EAAO,IAEpC1iB,KAAKgD,iBAAmBhD,KAAKk1K,iBACzB,IAAInD,GACJ,IAAIzf,GACRtyJ,KAAKmJ,WAAa,IAAIu5G,IAAkB,GACxC1iH,KAAK47B,sBAAwB,IAAIm0G,GAAyB7hI,QAC1DlO,KAAKogH,eAAiB,IAAI0vC,GAC1B9vJ,KAAKk9H,qBAAuB,IAAI4yB,GAChC9vJ,KAAKm9H,qBAC4B,IAA/B,mBACI,IAAI+yB,GACF,IAAIxkC,GAA6B1rH,KAAK47B,sBAAuB57B,KAAKmJ,YAAY,GAC9E,IAAImoJ,GAAqBtxJ,KAAK47B,wBAEhC,IAAIguH,GACV5pJ,KAAKo9H,sBAAwB,IAAI,GAC/Bp9H,KAAKogH,eACLpgH,KAAKk9H,qBACL,IAAI51B,GAAaM,GAAa2nD,KAEhCvvJ,KAAKkD,aAAe,IAAI,GACtBlD,KAAKogH,eACLpgH,KAAKk9H,qBACLl9H,KAAKm9H,qBACLn9H,KAAKmJ,WACLnJ,KAAKo9H,sBACL,IAAI91B,GAAaM,GAAa2nD,KAEhCvvJ,KAAK0E,qBAAuB,IAAIomB,GAC9B9qB,KAAKgD,kBACL,CAACqnJ,EAAgBn8H,KACW,MAAtBluB,KAAK20K,eACP30K,KAAK20K,cAAcv/F,eAAei1E,EAAgBn8H,E,IAGtD,IAAY,mCACV,GAAsC,MAAlCluB,KAAKy2K,0BAAmC,CAC1C,MAAMroD,EAAUpuH,KAAKy2K,0BAA0BnC,cAE/C,UACQt0K,KAAKy2K,0BAA0BhzK,KAAK,CAAE2mB,QAAS,mB,CACrD,MAAO9gB,GACP,OAAOI,QAAQE,OAAON,E,CAGxB,OAAO8kH,EAAQj2G,MAAMlO,GAA+B,aAApBA,EAAOwR,U,CAE3C,KACAvN,QAEFlO,KAAKL,YAAc,IAAIkyK,GAAmB,iBAAyB3jK,QAASlO,KAAKkD,cACjFlD,KAAK+W,eAAiB,GAAY,yBAC9B,IAAI23G,GACF1uH,KAAK47B,sBACL57B,KAAKmJ,YACL,GAEF,IAAIuiH,GAA6B1rH,KAAK47B,sBAAuB57B,KAAKmJ,YAAY,GAClFnJ,KAAKkX,cAAgB,IAAI07I,GACvB5yJ,KAAK47B,sBACL57B,KAAK+W,eACL/W,KAAK0E,qBACL1E,KAAKmJ,WACLnJ,KAAKkD,cAEPlD,KAAK4qE,aAAe,IAAI,GAAa5qE,KAAKkD,cAC1ClD,KAAK67B,aAAe,IAAI,GAAa77B,KAAKogH,gBAC1CpgH,KAAK2E,mBAAqB,IAAIuE,GAA0BlJ,KAAKkD,aAAclD,KAAKmJ,YAChFnJ,KAAK2a,WAAa,IAAI,GACpB3a,KAAK4qE,aACL5qE,KAAK0E,qBACL1E,KAAK2E,mBACL3E,KAAK67B,cACJgf,GAAqB76C,KAAKo1K,OAAOv6H,KAEpC76C,KAAKo5I,gBAAkB,IAAI4b,GAAuBh1J,KAAKkD,cACvDlD,KAAK00I,kBAAoB,IAAI,GAAkB10I,KAAKmJ,YACpDnJ,KAAKq5I,wBAA0B,IAAI,GACjCr5I,KAAK2a,WACL3a,KAAK00I,mBAEP10I,KAAK6iD,cAAgB,IAAI,GAAc7iD,KAAKmJ,WAAYnJ,KAAKL,aAE7DK,KAAK+uD,cAAgB,IAAI,GACvB/uD,KAAKkX,cACLlX,KAAKo5I,gBACLp5I,KAAK2a,WACL3a,KAAKL,YACLK,KAAK6iD,cACL7iD,KAAKkD,aACLlD,KAAK+W,eACL/W,KAAKq5I,yBAEPr5I,KAAKgvD,cAAgB,IAAIijH,GACvBjyK,KAAKkX,cACLlX,KAAKL,YACLK,KAAK+uD,cACL/uD,KAAKkD,cAEPlD,KAAKkyE,iBAAmB,IAAI2sE,GAAiB7+I,KAAKgvD,cAAehvD,KAAK2a,YACtE3a,KAAKivD,kBAAoB,IAAI,GAC3BjvD,KAAKkX,cACLlX,KAAKL,YACLK,KAAKkD,cAEPlD,KAAK02K,oBAAsB,IAAI,GAC/B12K,KAAKovD,oBAAsB,IAAIg6F,GAA2BppJ,KAAKkD,cAC/DlD,KAAKof,cAAgB,IAAIiqI,GAAqBrpJ,KAAKkD,aAAclD,KAAKovD,qBACtEpvD,KAAKukB,iBAAmB,IAAI+zE,GAC1Bt4F,KAAKof,cACLpf,KAAK2a,WACL3a,KAAKkD,cAEPlD,KAAKiD,oBAAsB,IAAI,GAC7BjD,KAAKkD,aACLlD,KAAKkX,cACLlX,KAAK2a,WACL3a,KAAK4qE,aACL5qE,KAAKmJ,WACLnJ,KAAKovD,oBACLpvD,KAAK47B,sBACLsnE,GAEFljG,KAAKygE,mBAAqB,IAAI7C,GAC5B59D,KAAKkD,aACLlD,KAAKovD,oBACLpvD,KAAKgvD,cACLhvD,KAAK+uD,cACL/uD,KAAKivD,kBACLjvD,KAAKof,eAEPpf,KAAKwkB,0BAA4B,IAAIrF,GACnCnf,KAAKkX,cACLlX,KAAKof,cACLpf,KAAKkD,cAGPlD,KAAK2qC,iBAAmB,IAAI,GAAiB3qC,KAAKL,YAAaK,KAAK0E,sBAGpE,MAAMiyK,EAAO32K,KACP42K,EAA6B,IAAI,cAAel0K,GAAd,c,oBAEtC,KAAAe,KAAO,CAACmvB,EAAoBC,EAAW,CAAC,KACtC,MAAMvB,EAAU/qB,OAAOC,OAAO,CAAC,EAAG,CAAE4jB,QAASwI,GAAcC,GAC3D8jJ,EAAKtD,kBAAkB9nB,eAAej6H,EAASqlJ,EAAa,KAAK,CAErE,GACA32K,KAAK8C,YAAc,IAAI,GACrB9C,KAAKkX,cACLlX,KAAK2a,WACL3a,KAAK4qE,aACL5qE,KAAK67B,aACL77B,KAAK0E,qBACLkyK,EACA52K,KAAKmJ,WACLnJ,KAAKiD,oBACLjD,KAAK2E,mBACL3E,KAAKkD,aACLlD,KAAK2qC,iBACL3qC,KAAKL,YACLK,KAAK+W,eACL/W,KAAKwkB,0BACLxkB,KAAKof,eAGPpf,KAAKskB,4BAA8B,IAAI,GACrCtkB,KAAKkX,cACLlX,KAAK4qE,aACL5qE,KAAKof,cACLpf,KAAKkD,cAGPlD,KAAKqkB,oBAAsB,IAAI,GAC7BrkB,KAAK+uD,cACL/uD,KAAKgvD,cACLhvD,KAAKivD,kBACLjvD,KAAKkX,cACLlX,KAAK0E,qBACL1E,KAAKgD,iBACLhD,KAAK6iD,cACL7iD,KAAKiD,oBACLjD,KAAKkD,aACLlD,KAAK8C,YACL9C,KAAKskB,6BAtMuB5B,GAAoB,mCACf,MAA7B1iB,KAAKyyK,sBACPzyK,KAAKyyK,qBAAqBx7C,kBAAiB,SAEvCj3H,KAAKuuJ,qBACLvuJ,KAAKwuJ,aAAY,GACG,MAAtBxuJ,KAAK20K,sBACD30K,KAAK20K,cAAclqB,8BACnBzqJ,KAAK20K,cAAczqB,mBAAmBlqJ,KAAK8C,aAErD,KA8LEogG,GAEFljG,KAAK62K,iBAAmB,IAAI5vB,GAAiBjnJ,KAAKkX,cAAelX,KAAK+W,gBACtE/W,KAAKy7C,YAAc,IAAIq2H,GACrB9xK,KAAKkX,cACLlX,KAAKL,YACLK,KAAK47B,sBACL57B,KAAKkD,cAEPlD,KAAK07C,eAAiB,IAAI,GACxB17C,KAAK2a,WACL3a,KAAK00I,kBACL10I,KAAKy7C,aAEPz7C,KAAK2/I,gBAAkB,IAAI,GAAgB3/I,KAAKkD,cAChDlD,KAAKw+B,YAAc,IAAI,GACrBx+B,KAAK2a,WACL3a,KAAKo5I,gBACLp5I,KAAKgvD,cACLhvD,KAAK+uD,cACL/uD,KAAKkX,cACLlX,KAAKivD,kBACLjvD,KAAKgD,iBACLhD,KAAKof,cACLpf,KAAKy7C,YACLz7C,KAAKmJ,WACLnJ,KAAKiD,oBACLjD,KAAKkD,aACLlD,KAAK2/I,gBACL3/I,KAAKkyE,iBACLlyE,KAAKovD,oBACLpvD,KAAK07C,eACLwnD,GAEFljG,KAAKmvH,mBAAqB,IAAI,GAC5BnvH,KAAK2a,WACL3a,KAAKkD,aACLlD,KAAKmJ,YAEPnJ,KAAKkvD,uBAAyB,IAAI,GAChClvD,KAAK+uD,cACL/uD,KAAKkD,aACLlD,KAAKovD,oBACLpvD,KAAKmvH,oBAEPnvH,KAAKm/D,YAAc,IAAI,GAAYn/D,KAAK47B,sBAAuB57B,KAAKmJ,YACpEnJ,KAAK8jE,gBAAkB,IAAI,GACzB9jE,KAAK+uD,cACL/uD,KAAKkD,aACLlD,KAAKm/D,YACLn/D,KAAKkvD,uBACLlvD,KAAKmJ,WACLnJ,KAAKo5I,iBAEPp5I,KAAK4iC,aAAe,IAAI,GAAa5iC,KAAK47B,sBAAuB57B,KAAK2a,YACtE3a,KAAK0vE,cAAgB,IAAI,GACvB1vE,KAAKgvD,cACLhvD,KAAK+uD,cACL/uD,KAAK2a,WACL3a,KAAKkX,cACLlX,KAAK47B,sBACL57B,KAAKkD,cAEPlD,KAAKyyK,qBAAuB,IAAI,GAC9BzyK,KAAKw+B,YACLx+B,KAAK67B,aACL77B,KAAK2a,WACL3a,KAAK2E,mBACLu+F,EACAljG,KAAKmJ,WACLnJ,KAAKkD,aACLlD,KAAK8C,YACL9C,KAAKgD,kBAGPhD,KAAK4mG,2BAA6B,IAAIJ,GAA2BxmG,KAAK2a,YAEtE3a,KAAK8vC,wBAA0B,IAAI,GACjC9vC,KAAKkX,cACLlX,KAAKL,YACLK,KAAK4mG,4BA+DP,GAnDA5mG,KAAK20K,cAAgB,IAAI9qB,GACvB7pJ,KAAKgD,iBACLhD,KAAK0E,sBAXkC,KACvC,MAAM0gF,EACJplF,KAAK0E,qBAAqBqnB,YAC1B/rB,KAAK0E,qBAAqB2mB,aAC1BrrB,KAAK0E,qBAAqB6mB,UAE5B,OADA,mBAA2B65D,EAAoBl3E,OAAS,MACjDxE,QAAQC,SAAS,GAOxB3J,KAAKkD,cAIPlD,KAAK+rB,SAAW/rB,KAAK0E,qBAAqBqnB,WAG1C/rB,KAAKqzK,kBAAoB,IAAIqB,GAC3B10K,KACAA,KAAK8jE,gBACL9jE,KAAK0E,qBACL1E,KAAKL,YACLK,KAAKyyK,qBACLzyK,KAAK20K,cACL30K,KAAK2E,mBACL3E,KAAKgD,iBACLhD,KAAKmJ,YAEPnJ,KAAKy2K,0BAA4B,IAAIrD,GACnCpzK,KAAKkX,cACLlX,KAAK47B,sBACL57B,KAAKqzK,kBACLrzK,KAAKL,YACLK,KAAKgD,iBACLhD,KAAK67B,aACL77B,KAAK0E,qBACL1E,KAAKkD,aACLlD,KAAKmJ,WACLnJ,KAAK8C,aAEP9C,KAAK82K,mBAAqB,IAAI5E,GAC5BlyK,KACAA,KAAKwkB,0BACLxkB,KAAK0E,qBACL1E,KAAKqkB,oBACLrkB,KAAK8C,aAEP9C,KAAKkuJ,uBAAyB,IAAI7C,GAChCrrJ,KAAK8jE,gBACL9jE,KAAK+uD,cACL/uD,KAAK8C,YACL9C,KAAKof,cACLpf,KAAKgvD,cACLhvD,KAAKkD,cAGPlD,KAAK+2K,eAAiB,IAAI/oB,GAAehuJ,KAAMA,KAAKkuJ,yBAC/CluJ,KAAKk1K,iBAAkB,CAC1B,MAAMtqB,EAA4B,IAAIilB,IACnC72J,GAAYhZ,KAAK0E,qBAAqBqpB,gBAAgB/U,EAAQsU,KAAM,CAAEpf,OAAQY,SACxEkoK,GAAS,mC,QACd,MAAMh+J,EAAkE,QAAvD,EAAkD,QAAnD,QAAOhZ,KAAKwkB,0BAA0BjE,oBAAa,eAAG,UAAE,QAAI,CAAC,EACvElC,QAAiBre,KAAKwkB,0BAA0BnF,iBAAiBrG,GACvEhZ,KAAK0E,qBAAqBqpB,gBAAgB1P,EAAU,CAAEnQ,SACtDlO,KAAKwkB,0BAA0BzC,WAAW1D,EAC5C,MACA,CAAO8S,EAAK8nB,IAAW,mCACrBj5C,KAAK41K,gBAAkB38H,EACZ,MAAP9nB,GAIJ,kBAA0BA,EAAK,CAC7B/G,QAAS,qBACT+G,IAAKA,EACLwB,OAAQ,eAEZ,KACA3yB,KAAK8C,YACL9C,KAAK+uD,cACL/uD,KAAKm/D,YACLn/D,KAAKkvD,wBAGPlvD,KAAKi3K,uBAAyB,IAAItsB,GAAuBC,E,CAG3D5qJ,KAAKk3K,eAAiB,IAAI1E,GACxBxyK,KAAKqkB,oBACLrkB,KAAKkD,aACLlD,KAAKyyK,sBAEPzyK,KAAKm3K,qBAAuB,IAAItB,GAC9B71K,KAAK0E,qBACL1E,KAAK+uD,cACL/uD,KAAK8C,aAGP9C,KAAKq1C,0BAA4B,IAAI1B,GACnC3zC,KAAKkX,cACLlX,KAAKkD,aACLlD,KAAK2a,YAGP3a,KAAKq1K,oBAAsB,IAAI,GAAoBr1K,KAAK2a,WAAY3a,KAAKkD,cAEpElD,KAAKk1K,mBACRl1K,KAAK82J,uBAAyB,IAAIlB,GAChC51J,KAAKkD,aACLlD,KAAKL,YACLK,KAAKmJ,YAGPnJ,KAAKi3J,yBAA2B,IAAIJ,GAClC72J,KAAK82J,uBACL92J,KAAK8C,YACL9C,KAAK+uD,eAGX,CAEMqoH,Y,gDAqBJ,GApBAp3K,KAAK62K,iBAAiB3vB,eAAeh5I,cAE/BlO,KAAKkD,aAAasS,aAEjBxV,KAAKqkB,oBAA4C7O,MAAK,SACtDxV,KAAKL,YAAmC6V,aACxCxV,KAAKmvH,mBAA0C35G,MAAK,SACrDxV,KAAKqzK,kBAAkB79J,aACvBxV,KAAKkuJ,uBAAuB14I,aAC5BxV,KAAK82K,mBAAmBthK,OAE9BxV,KAAK2qC,iBAAiBn1B,aAEhBxV,KAAK+2K,eAAevhK,OACrBxV,KAAKk1K,kBACmB,QAA3B,EAAAl1K,KAAKi3K,8BAAsB,SAAEzhK,aAEzBxV,KAAKk3K,eAAe1hK,aACpBxV,KAAKm3K,qBAAqB3hK,OAE5BxV,KAAK0E,qBAAqB2mB,cAAgBrrB,KAAKu2K,cAAe,QAEnC,4BACdp3K,SAAemV,GAAQ,yCAC9B,IAAI87J,GAAYthK,MAAMgiK,aAAa,GAAIx8J,EAAI1U,GACnD,MAEA,oBAAkC0U,GAAQ,mCACpCA,EAAIkd,kBACA,IAAI4+I,GAAYthK,MAAMgiK,aAAa,GAAIx8J,EAAI1U,IAErD,K,CAGF,OAAO,IAAI8J,SAAeC,IACxBmL,YAAW,IAAY,yCACf9U,KAAK2E,mBAAmBoC,qBACzB/G,KAAKu2K,sBACFv2K,KAAKuuJ,gBAEbvuJ,KAAKy+B,UAAS,GACd3pB,YAAW,IAAM9U,KAAKyyK,qBAAqBj9J,QAAQ,MACnD7L,GACF,KAAG,IAAI,G,IAIL4kJ,e,gDACE,IAAI6hB,GAAYthK,MAAMg3C,IAAI,CAAEuqH,iBAAkBrwK,MACtD,G,CAEMwuJ,YAAY6oB,GAAY,G,oDAC5B,IAAKxtK,OAAO+mB,UAAY/mB,OAAOghJ,aAC7B,OAKF,SAFM+K,GAAuBI,YAEzBqhB,EAGF,aAFiC,QAA3B,EAAAr3K,KAAK82J,8BAAsB,eAAEN,gBACnCx2J,KAAK+uJ,aAAe/uJ,KAAK4uJ,eAAgB,SAIV,QAA3B,EAAA5uJ,KAAK82J,8BAAsB,eAAEthJ,OAEnC,MAAM2b,QAAY,6BACdA,UACiC,QAA7B,EAAAnxB,KAAKi3J,gCAAwB,eAAEnkI,OAAO3B,EAAIztB,KAChD1D,KAAK+uJ,aAAe/uJ,KAAK4uJ,eAAgB,E,IAIvCwmB,OAAOv6H,EAAkBn4B,G,gDACvB1iB,KAAKmvH,mBAAmBM,aAAa/sG,SAErChZ,QAAQ4O,IAAI,CAChBtY,KAAKw+B,YAAYgjD,YAAY,IAAIr/D,KAAK,GAAIO,GAC1C1iB,KAAKkX,cAAckxG,UAAU1lG,GAC7B1iB,KAAKo5I,gBAAgB32H,MAAMC,GAC3B1iB,KAAK+uD,cAActsC,MAAMC,GACzB1iB,KAAKgvD,cAAcvsC,MAAMC,GACzB1iB,KAAKivD,kBAAkBxsC,MAAMC,GAC7B1iB,KAAKof,cAAcqD,MAAMC,GACzB1iB,KAAKwkB,0BAA0B/B,MAAMC,GACrC1iB,KAAKskB,4BAA4B7B,MAAMC,GACvC1iB,KAAKiD,oBAAoBwf,QACzBziB,KAAKygE,mBAAmBh+C,UAI1B,MAAM60J,QAA0Bt3K,KAAKu3K,2BAE/Bv3K,KAAKkD,aAAa47H,MAAM,CAAEp8G,OAAQA,IAE1B,MAAVA,GAAkBA,WAAkB1iB,KAAKkD,aAAaklC,eACxDpoC,KAAK6iD,cAAc+2E,aACnB55H,KAAKgD,iBAAiBS,KAAK,iBAAkB,CAAEo3C,QAASA,EAASn4B,OAAQA,KAGvE40J,UACIt3K,KAAKu1K,iBAGsB,IAA/B,oBACF,eAAuB,qBAEnBv1K,KAAKuuJ,qBACLvuJ,KAAK82J,uBAAuBN,WAClCx2J,KAAKyyK,qBAAqBx7C,kBAAiB,SACrCj3H,KAAK20K,cAAclqB,8BACnBzqJ,KAAK20K,cAAczqB,mBAAmBlqJ,KAAK8C,YACnD,G,CAEcy0K,qB,0CAEZ,OAA8B,aADIv3K,KAAKkD,aAAa85E,kBAEtD,G,CAEMu1F,mCAAmCphJ,EAAUwB,EAAgB0xC,EAAkB,M,0CACnF,GAAW,MAAPlzC,IAAgBA,EAAIvxB,GACtB,OAGF,MAAMoZ,EAAe,CAAC,EACP,MAAXqrD,IACFrrD,EAAQqrD,QAAUA,GAGpB,kBACElzC,EACA,CACE/G,QAAS,qBACT+G,IAAKA,EACLwB,OAAQA,GAEV3Z,EAEJ,G,CAEMs5J,Y,0CAICtyK,KAAK+rB,iBAGJ5B,GAAUgE,iBAAiB,cAAe,MAAM,GACxD,G,CAEMonJ,gB,0CACJ,IACGv1K,KAAK0E,qBAAqBmnB,aAC1B7rB,KAAK0E,qBAAqBinB,cAC1B3rB,KAAK0E,qBAAqB6mB,UAE3B,OAGF,MAUMzhB,QATJ,IAAIJ,SAASC,IACXE,OAAOC,QAAQimJ,MAAM/lJ,IAAI,MAAOsV,GAAW3V,EAAQ2V,IAAG,UAIxD,IAAI5V,SAASC,IACXE,OAAOC,QAAQimJ,MAAMttI,OAAM,IAAM9Y,KAAU,IAM/C,IAAK,MAAMiN,KAAO9M,EAEXA,EAAQ4N,eAAed,WAGtB5W,KAAKogH,eAAexiE,KAAKhnC,EAAK9M,EAAQ8M,IAEhD,G,CAEc6nB,SAAS+4I,GAAW,G,0CAChC,MAAMC,EAAe,MACfl2F,QAAiBvhF,KAAKw+B,YAAYojD,cAExC,IAAI81F,EAAcD,SACF,MAAZl2F,IACFm2F,GAAc,IAAIv1J,MAAOoI,UAAYg3D,EAASh3D,WAG5CitJ,GAAYE,GAAeD,SACvBz3K,KAAKw+B,YAAYC,SAAS+4I,GAChCx3K,KAAK23K,oBAEL33K,KAAK23K,kBAET,G,CAEQA,mBACF33K,KAAK43K,aACPhyI,aAAa5lC,KAAK43K,aAGpB53K,KAAK43K,YAAc9iK,YAAW,IAAY,gDAAM9U,KAAKy+B,UAAU,KAAE,IACnE,E,2bC9yBK,IAAMo5I,GAAN,cAAmC31D,KACxC,IAACgnC,GAA0B,CAAE7B,YAAavlC,GAAa9mE,W,iBAC9B8lB,GAAA,I,qCAFd+2G,GAAoB,IADhCnvB,IACYmvB,ICNN,MAAMC,GACPzmG,kB,MACF,MAAMr4D,EAAmC,QAAzB,EAAAhZ,KAAK+3K,SAAS1mG,mBAAW,QAAI,CAAC,EAI9C,OAHoB,MAAhBr4D,EAAQvN,OACVuN,EAAQvN,KAAOzL,KAAKg4K,UAEfh/J,CACT,CAEI08G,WACF,OAAwB,MAApB11H,KAAKqxE,YACA,IAAIskD,KAAK,CAAC31H,KAAK+3K,SAAS/+G,UAAWh5D,KAAKqxE,aAExC,IAAIskD,KAAK,CAAC31H,KAAK+3K,SAAS/+G,UAEnC,CAEIi/G,qBACF,OAAoC,MAAhCj4K,KAAK+3K,SAASE,eACTj4K,KAAK+3K,SAASE,eAEC,mBAAjBj4K,KAAKg4K,SAAgC,OAAS,MACvD,CAEYA,eACV,MAAME,EAAgBl4K,KAAK+3K,SAASp+H,SAASl5C,cAC7C,OAAIy3K,EAAcC,SAAS,QAClB,kBACED,EAAcC,SAAS,SACzB,oEACED,EAAcC,SAAS,SACzB,0EACED,EAAcC,SAAS,SACzB,4EACED,EAAcC,SAAS,QACzB,WACED,EAAcC,SAAS,QACzB,YACED,EAAcC,SAAS,SAAWD,EAAcC,SAAS,SAC3D,aACED,EAAcC,SAAS,QACzB,YAEF,IACT,CAEAr7K,YAA6Bi7K,GAAA,KAAAA,SAAAA,CAAgC,ECrCxD,MAAMK,GACX5/G,SAASjxC,GACP,MAAMwyG,EAAU,IAAI+9C,GAAoBvwJ,GACxC,GAAI,eAAwB,CAC1B,IAAI5R,EAAiB,KAEnBA,EAD+B,eAA7BokH,EAAQ1oD,YAAY5lE,MAAqD,iBAArB8b,EAAQyxC,SACvDzxC,EAAQyxC,SAER,mBAAsBzxC,EAAQyxC,UAEvC7uC,GAAUgE,iBACR,eACA1lB,KAAK6xB,UAAU,CACb0+B,SAAUrjD,EACV07D,YAAa9pD,EAAQ8pD,YACrB13B,SAAUpyB,EAAQoyB,YAEpB,E,KAEG,CACL,MAAMjnC,EAAIxE,OAAOgY,SAASsI,cAAc,KACxC9b,EAAE+gB,KAAOte,IAAIkjK,gBAAgBt+C,EAAQrE,MACrChjH,EAAE8lD,SAAWjxC,EAAQoyB,SACrBzrC,OAAOgY,SAASqH,KAAKqB,YAAYlc,GACjCA,EAAEhH,QACFwC,OAAOgY,SAASqH,KAAK0B,YAAYvc,E,CAErC,E,kCA3BW0lK,GAA0B,E,sBAA1BA,GAA0B,QAA1BA,GAA0B,OCTxB,MAAME,GACnB70K,KAAKmvB,EAAoBC,EAAW,CAAC,GACnC,MAAMvB,EAAU/qB,OAAOC,OAAO,CAAC,EAAG,CAAE4jB,QAASwI,GAAcC,GAC1D3kB,OAAeinK,mCAAmC7jJ,EACrD,E,8DCCK,MAAMinJ,WAAkC,I,+DAAlCA,MAAyB,GAAzBA,GAAyB,E,uBAAzBA,GAAyB,k6BCPtC,iBACE,iCACE,sCAAkC,oCAAY,EAAA3yK,QAAQ,IACpD,qCACE,uCACE,0CAAuB,U,iBAAmC,QAC1D,2CACE,6CACE,+CACE,oDAA4B,U,iBAAyB,QACrD,oDAME,gEANF,QAUF,qCACA,gDACE,qDAKE,iCAAS,EAAAogB,gBAAgB,I,iBAGzB,kDAKF,uCACF,qCACF,mCACF,iCACA,4CACE,U,iBACF,QACF,+BACF,6BACA,wCACE,6CACE,0CAAM,U,iBAAiB,QACzB,+BACA,6CACE,U,iBACF,QACF,6BACF,2BACF,yBACF,uBACA,gB,MAlDiC,qDAIW,2CAG1B,wDAIA,kCAUA,+DAEA,qCAKE,sEAOR,wFAMI,mCAGN,kE,gGC1CH,MAAM,WAAgC,GAD7C,c,oBAEE,KAAAo8D,UAAYm2F,E,iEADD,MAAuB,GAAvB,GAAuB,E,yBAAvB,GAAuB,QAAvB,GAAuB,O,2SCK7B,MAAMC,GACX17K,YACU4H,EACA/E,EACAm2B,EACA5yB,EACAiG,EACAsqE,GALA,KAAA/uE,qBAAAA,EACA,KAAA/E,YAAAA,EACA,KAAAm2B,kBAAAA,EACA,KAAA5yB,aAAAA,EACA,KAAAiG,WAAAA,EACA,KAAAsqE,eAAAA,CACP,CAEHj+D,OACE,MAAO,IAAY,yCACXxV,KAAKkD,aAAasS,OAEnBxV,KAAK81B,kBAAkBvB,QAAQrmB,QAEzBA,OAAOuqK,OAAOC,YAAc,IACrCxqK,OAAOgY,SAASqH,KAAKtiB,UAAUC,IAAI,WAC1BgD,OAAOuqK,OAAOC,aAAe,KACtCxqK,OAAOgY,SAASqH,KAAKtiB,UAAUC,IAAI,WAJnCgD,OAAOgY,SAASqH,KAAKtiB,UAAUC,IAAI,aAOrC,MAAMytK,EAASzqK,OAAOgY,SAAS87C,sBACzBhiE,KAAKyzE,eAAequE,sBAC1B62B,EAAO1tK,UAAUC,IAAI,UAAYlL,KAAKL,YAAYs7B,mBAKhDj7B,KAAK0E,qBAAqBmnB,YAC1BrX,UAAUokK,SAAS93K,QAAQ,QAAU,GACrCd,KAAK81B,kBAAkBvB,QAAQrmB,UAC9BA,OAAO2qK,WAAa,GACnB3qK,OAAO4qK,UAAY,GACnB5qK,OAAO2qK,WAAa3qK,OAAOuqK,OAAOrjJ,OAClClnB,OAAO4qK,UAAY5qK,OAAOuqK,OAAOnjJ,UAEnCqjJ,EAAO1tK,UAAUC,IAAI,gBACrBlL,KAAKmJ,WAAWmyB,KAAK,sBAEzB,GACF,E,kCAzCWk9I,IAAW,8D,sBAAXA,GAAW,QAAXA,GAAW,OCRjB,MAAMO,WAA2B,GACtCj8K,YACUk8K,EACRC,EACAt5K,GAEA1C,MAAMg8K,EAAmBt5K,GAJjB,KAAAq5K,kBAAAA,CAKV,CAEAp/C,aACE,MAAM,IAAI3oH,MAAM,iBAClB,CAEA6oH,eACE,MAAM,IAAI7oH,MAAM,iBAClB,CAEAupH,oBACE,OAAOx6H,KAAKg5K,kBAAkBx+C,mBAChC,ECqFF,MAAM0+C,GAAwD,MAAlC,uBACtB3C,GAAgB2C,IAAsD,IAA/B,mBACvCC,GAAiCD,GAIvC,WACE,MAAME,EAAiB,IAAI9C,GAAeC,IAE1C,OADA6C,EAAehC,YACRgC,CACT,CAPIC,GACA,uBAA+BC,cAQnC,SAASC,GAAgB1nB,GACvB,MAAO,IACEsnB,GAAkBA,GAAetnB,GAAwB,IAEpE,CA6WO,MAAM2nB,I,kCAAAA,GAAc,E,oBAAdA,K,yBAxWA,CACThB,GACAprG,GACA,CACE1vE,QAAS,MACT0kJ,WAAY,IAAMm3B,GAAqC,cAArCA,GAAsDt+I,kBACxEonH,KAAM,IAER,CACE3kJ,QAAS,MACT0kJ,WAAaq3B,GAA6BA,EAAYjkK,OACtD6sI,KAAM,CAACm2B,IACPriH,OAAO,GAET,CAAEz4D,QAAS,GAAsBslF,SAAU0mE,IAC3C,CAAEhsJ,QAAS,GAAwBslF,SAAU2mE,IAC7C,CAAEjsJ,QAASw2B,GAAmBkuH,WAAY,IAAM,IAAIluH,GAAkBqiJ,KACtE,CACE74K,QAASgF,GACT0/I,WAAY,IACH82B,GACH,IAAIZ,GACJ,IAAIhmB,IAGZ,CACE50J,QAASgtC,GACT03G,WAAYm3B,GAA+B,oBAC3Cl3B,KAAM,IAER,CACE3kJ,QAAS+E,GACT2/I,WAAYm3B,GAA0B,eACtCl3B,KAAM,IAER,CACE3kJ,QAASglD,GACT0/F,WAAY,CAACj5I,EAA+BxJ,IACnC,IAAIo5K,GACTQ,GAA4B,gBAA5BA,GACApwK,EACAxJ,GAGJ0iJ,KAAM,CAAC5nI,GAAuBhb,KAEhC,CAAE/B,QAASilC,GAAcy/G,WAAYm3B,GAA2B,gBAAiBl3B,KAAM,IACvF,CACE3kJ,QAAS05I,GACTgL,WAAYm3B,GAAsC,2BAClDl3B,KAAM,IAER,CAAE3kJ,QAAS+wD,GAAe2zF,WAAYm3B,GAA4B,iBAAkBl3B,KAAM,IAC1F,CACE3kJ,QAAS+9B,GACT2mH,WAAYm3B,GAAoC,yBAChDl3B,KAAM,IAER,CACE3kJ,QAASqpF,GACTq7D,WAAYm3B,GAAgC,sBAE9C,CACE77K,QAASgxD,GACT0zF,WAAY,CACVlrI,EACAvX,EACAovD,EACA7rD,IAEO,IAAI+uK,GAAqB/6J,EAAevX,EAAaovD,EAAe7rD,GAE7Em/I,KAAM,CAACt+H,GAAetkB,GAAwBgvD,GAAe,KAE/D,CACE/wD,QAASixD,GACT3M,YAAa0M,IAEf,CACEhxD,QAASu0E,GACTmwE,WAAY,CAACpzF,EAAsCr0C,IAC1C,IAAIkkI,GAAiB7vF,EAAer0C,GAE7C0nI,KAAM,CAAC1zF,GAAuBn0C,KAEhC,CACE9c,QAASkxD,GACTwzF,WAAYm3B,GAAgC,qBAC5Cl3B,KAAM,IAER,CACE3kJ,QAAS+c,GACT2nI,WAAYm3B,GAAgC,cAC5Cl3B,KAAM,IAER,CACE3kJ,QAASwL,GACT84C,YAAav9C,IAEf,CACE/G,QAAS+G,GACT29I,WAAYm3B,GAAiC,sBAC7Cl3B,KAAM,IAER,CAAE3kJ,QAASshE,GAAaojF,WAAYm3B,GAA0B,eAAgBl3B,KAAM,IACpF,CAAE3kJ,QAASitE,GAAcy3E,WAAYm3B,GAA2B,gBAAiBl3B,KAAM,IACvF,CACE3kJ,QAAS+B,GACT2iJ,WAAal/I,GACJ,IAAI2uK,GAAmB,iBAAyB3jK,QAAShL,GAElEm/I,KAAM,CAACz/I,KAET,CACElF,QAASqmB,GACTq+H,WAAarrI,IACX,MAAMG,EAAgBqiK,GAA4B,gBAA5BA,GAEtB,OADA,IAAItyB,GAAiB/vI,EAAeH,GAAgBmwI,eAAep4I,MAC5DoI,CAAa,EAEtBmrI,KAAM,CAACx7D,KAET,CACEnpF,QAASopF,GACTs7D,WAAYm3B,GAAiC,sBAC7Cl3B,KAAM,IAER,CACE3kJ,QAASmxD,GACTuzF,WAAYm3B,GAAqC,0BACjDl3B,KAAM,IAER,CACE3kJ,QAASymB,GACTi+H,WAAY,CACVl/I,EACAksD,IAEO,IAAIi6F,GAAqBnmJ,EAAcksD,GAEhDizF,KAAM,CAAC,GAAyBx7F,KAElC,CACEnpD,QAASwmB,GACTk+H,WAAY,CACVhjI,EACAzE,EACAzX,IAEO,IAAIo1F,GAAiBl5E,EAAezE,EAAYzX,GAEzDm/I,KAAM,CAACj+H,GAAuB5J,GAAY5X,KAE5C,CACElF,QAAS8G,GACT49I,WAAYm3B,GAAmC,wBAC/Cl3B,KAAM,IAER,CACE3kJ,QAAS4f,GACT8kI,WAAYm3B,GAAmD,6BAC/Dl3B,KAAM,IAER,CAAE3kJ,QAAS8c,GAAY4nI,WAAYm3B,GAAyB,cAAel3B,KAAM,IACjF,CACE3kJ,QAASu9C,GACTmnG,WAAY,CACVlrI,EACAvX,EACAi8B,EACA89I,IAEO,IAAI5H,GACT56J,EACAvX,EACAi8B,EACA89I,GAGJr3B,KAAM,CAACt+H,GAAetkB,GAAwBg8B,GAAuB,KAEvE,CACE/9B,QAASw9C,GACT8G,YAAa/G,IAEf,CACEv9C,QAASy9C,GACTinG,WAAY,CACVznI,EACA+5H,EACAj5F,IAEO,IAAI,GAAe9gC,EAAY+5H,EAAmBj5F,GAE3D4mG,KAAM,CAAC7nI,GAAYusE,GAAmB7rC,KAExC,CAAEx9C,QAAS4gC,GAAa8jH,WAAYm3B,GAA0B,eAAgBl3B,KAAM,IACpF,CACE3kJ,QAASwpF,GACTk7D,WAAal/I,GACJ,IAAI8xJ,GAAuB9xJ,GAEpCm/I,KAAM,CAAC,KAET,CACE3kJ,QAAS0pF,GACTg7D,WAAYm3B,GAAqC,kBACjDl3B,KAAM,IAER,CAAE3kJ,QAASg+B,GAAc0mH,WAAYm3B,GAA2B,gBAAiBl3B,KAAM,IACvF,CACE3kJ,QAASygE,GACTikF,WAAYm3B,GAA8B,mBAC1Cl3B,KAAM,IAER,CAAE3kJ,QAAS+xE,GAAe2yE,WAAYm3B,GAA4B,iBAAkBl3B,KAAM,IAC1F,CACE3kJ,QAASiF,GACTy/I,WAAYm3B,GAAkC,uBAC9Cl3B,KAAM,IAER,CACE3kJ,QAASiyC,GACTyyG,WAAYm3B,GAAsC,2BAClDl3B,KAAM,IAER,CACE3kJ,QAASumB,GACTm+H,WAAYm3B,GAA0C,+BACtDl3B,KAAM,IAER,CACE3kJ,QAASsmB,GACTo+H,WAAYm3B,GAAkC,uBAC9Cl3B,KAAM,IAER,CACE3kJ,QAASspF,GACTo7D,WAAYm3B,GAAmC,wBAC/Cl3B,KAAM,IAER,CACE3kJ,QAAS+c,GACT2nI,WAAYm3B,GAAgC,cAC5Cl3B,KAAM,IAER,CAAE3kJ,QAASoxD,GAAoCk0B,SAAU,IACzD,CACEtlF,QAASmpD,GACTu7F,WAAal/I,GACJ,IAAIkmJ,GAA2BlmJ,GAExCm/I,KAAM,CAAC,KAET,CACE3kJ,QAASkgE,GACTwkF,WAAY,CACVl/I,EACAksD,EACAJ,EACA5vC,IAEO,IAAIw+C,GACT16D,EACAksD,EACAJ,EACAuqH,GAA4B,gBAA5BA,GACAA,GAAgC,oBAAhCA,GACAn6J,GAGJijI,KAAM,CAAC,GAAyBx7F,GAAqB6H,GAAevqC,KAEtE,CACEzmB,QAAS8pF,GACT46D,WAAYm3B,GAA8B,mBAC1Cl3B,KAAM,IAER,CACE3kJ,QAAS0oF,GACTg8D,WAAYm3B,GAAqC,wBACjDl3B,KAAM,IAER,CACE3kJ,QAASyoF,GACTi8D,WAAYm3B,GAAqC,yBAEnD,CACE77K,QAASypF,GACTi7D,WAAYm3B,GAAoC,yBAChDl3B,KAAM,IAER,CACE3kJ,QAAS,GACT0kJ,WAAY,CACVhiC,EACA8c,EACAC,EACAh0H,EACAi0H,IAEO,IAAI,GACThd,EACA8c,EACAC,EACAh0H,EACAi0H,EACA,IAAI91B,GAAaM,GAAa2nD,KAGlClN,KAAM,CACJj7D,GACAhB,GACAD,GACA1rE,GACA0sE,KAGJ,CACEzpF,QAASozC,GACTsxG,WAAYm3B,GAAmD,6BAC/Dl3B,KAAM,IAER,CACE3kJ,QAAS,GACTskD,YAAa,GACbqgG,KAAM,IAER,CACE3kJ,QAASg6D,GACTsrB,SAAUo1F,IAEZ,CACE16K,QAASgd,GACTsoE,SAAU,GACVq/D,KAAM,CAAC,KAET,CACE3kJ,QAASm1E,GACTuvE,WAAY,CACVl/I,EACAwB,IAEO,IAAIi9I,GACTz+I,EAGAwB,EAAqBqnB,WAAawtJ,GAAqB,mBAArBA,GAA6CrrK,OAC/EgY,UAGJm8H,KAAM,CAAC,GAAyB79I,KAElC,CACE9G,QAASq+E,GACTiH,SAAU60F,GACVx1B,KAAM,CAAC,GAAyBz7D,MAEnC,SAxWSu7D,MCgCL,MAAMw3B,I,kCAAAA,GAAS,E,oBAATA,GAAS,WAFRr1F,M,yBADD,CAAC,KAAc,MAAS,SA5EjC,KACAvB,GACA1lF,GAAqB8E,QAAQ,CAC3BC,UAAW,EACXC,aAAa,EACbC,aAAa,EACbs3K,cAAe,4BAEjB,MACA,KACA,KACA,MACA13K,GACA,KACA,KACA,MACA,KACAs3K,MC9FJ,EAAQ,QAKN,WAIA,OAAyBK,gBAAgBF,GAAW,CAAEG,qBAAqB,G,kECXzEC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBlnK,IAAjBmnK,EACH,OAAOA,EAAaC,QAGrB,IAAIlmC,EAAS8lC,EAAyBE,GAAY,CACjDr6K,GAAIq6K,EACJn3H,QAAQ,EACRq3H,QAAS,CAAC,GAUX,OANAC,EAAoBH,GAAUppK,KAAKojI,EAAOkmC,QAASlmC,EAAQA,EAAOkmC,QAASH,GAG3E/lC,EAAOnxF,QAAS,EAGTmxF,EAAOkmC,OACf,CAGAH,EAAoB34H,EAAI+4H,EzrB5BpB39K,EAAW,GACfu9K,EAAoBK,EAAI,CAACpwK,EAAQqwK,EAAUvkH,EAAIrqB,KAC9C,IAAG4uI,EAAH,CAMA,IAAIC,EAAeC,IACnB,IAAS75K,EAAI,EAAGA,EAAIlE,EAASoC,OAAQ8B,IAAK,CAGzC,IAFA,IAAK25K,EAAUvkH,EAAIrqB,GAAYjvC,EAASkE,GACpC85K,GAAY,EACPh3J,EAAI,EAAGA,EAAI62J,EAASz7K,OAAQ4kB,MACpB,EAAXioB,GAAsB6uI,GAAgB7uI,IAAanlC,OAAO0M,KAAK+mK,EAAoBK,GAAGl9F,OAAOvmE,GAASojK,EAAoBK,EAAEzjK,GAAK0jK,EAAS72J,MAC9I62J,EAASpoH,OAAOzuC,IAAK,IAErBg3J,GAAY,EACT/uI,EAAW6uI,IAAcA,EAAe7uI,IAG7C,GAAG+uI,EAAW,CACbh+K,EAASy1D,OAAOvxD,IAAK,GACrB,IAAI3B,EAAI+2D,SACEhjD,IAAN/T,IAAiBiL,EAASjL,EAC/B,CACD,CACA,OAAOiL,CAnBP,CAJCyhC,EAAWA,GAAY,EACvB,IAAI,IAAI/qC,EAAIlE,EAASoC,OAAQ8B,EAAI,GAAKlE,EAASkE,EAAI,GAAG,GAAK+qC,EAAU/qC,IAAKlE,EAASkE,GAAKlE,EAASkE,EAAI,GACrGlE,EAASkE,GAAK,CAAC25K,EAAUvkH,EAAIrqB,EAqBjB,E0rBzBdsuI,EAAoBvtH,EAAKwnF,IACxB,IAAIymC,EAASzmC,GAAUA,EAAO0mC,WAC7B,IAAO1mC,EAAiB,QACxB,IAAM,EAEP,OADA+lC,EAAoBr0E,EAAE+0E,EAAQ,CAAEhoK,EAAGgoK,IAC5BA,CAAM,EzrBNV/9K,EAAW4J,OAAOq0K,eAAkBt0K,GAASC,OAAOq0K,eAAet0K,GAASA,GAASA,EAAa,UAQtG0zK,EAAoB/5K,EAAI,SAAS2B,EAAOi5K,GAEvC,GADU,EAAPA,IAAUj5K,EAAQ5B,KAAK4B,IAChB,EAAPi5K,EAAU,OAAOj5K,EACpB,GAAoB,iBAAVA,GAAsBA,EAAO,CACtC,GAAW,EAAPi5K,GAAaj5K,EAAM+4K,WAAY,OAAO/4K,EAC1C,GAAW,GAAPi5K,GAAoC,mBAAfj5K,EAAMuW,KAAqB,OAAOvW,CAC5D,CACA,IAAIk5K,EAAKv0K,OAAOurB,OAAO,MACvBkoJ,EAAoBh7K,EAAE87K,GACtB,IAAIC,EAAM,CAAC,EACXr+K,EAAiBA,GAAkB,CAAC,KAAMC,EAAS,CAAC,GAAIA,EAAS,IAAKA,EAASA,IAC/E,IAAI,IAAIsgF,EAAiB,EAAP49F,GAAYj5K,EAAyB,iBAAXq7E,KAAyBvgF,EAAeoE,QAAQm8E,GAAUA,EAAUtgF,EAASsgF,GACxH12E,OAAOy0K,oBAAoB/9F,GAAS99E,SAASyX,GAASmkK,EAAInkK,GAAO,IAAOhV,EAAMgV,KAI/E,OAFAmkK,EAAa,QAAI,IAAM,EACvBf,EAAoBr0E,EAAEm1E,EAAIC,GACnBD,CACR,E0rBxBAd,EAAoBr0E,EAAI,CAACw0E,EAASc,KACjC,IAAI,IAAIrkK,KAAOqkK,EACXjB,EAAoB16J,EAAE27J,EAAYrkK,KAASojK,EAAoB16J,EAAE66J,EAASvjK,IAC5ErQ,OAAO20K,eAAef,EAASvjK,EAAK,CAAEukK,YAAY,EAAMnxK,IAAKixK,EAAWrkK,IAE1E,ECLDojK,EAAoB1vH,EAAK8wH,GAEjB,oBCHRpB,EAAoBnrK,EAAI,WACvB,GAA0B,iBAAfwsK,WAAyB,OAAOA,WAC3C,IACC,OAAOr7K,MAAQ,IAAIs7K,SAAS,cAAb,EAChB,CAAE,MAAOhyK,GACR,GAAsB,iBAAX4E,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB8rK,EAAoB16J,EAAI,CAAChZ,EAAKmM,IAAUlM,OAAOoK,UAAU+G,eAAe7G,KAAKvK,EAAKmM,GCClFunK,EAAoBh7K,EAAKm7K,IACH,oBAAXoB,QAA0BA,OAAOC,aAC1Cj1K,OAAO20K,eAAef,EAASoB,OAAOC,YAAa,CAAE55K,MAAO,WAE7D2E,OAAO20K,eAAef,EAAS,aAAc,CAAEv4K,OAAO,GAAO,ECL9Do4K,EAAoByB,IAAOxnC,IAC1BA,EAAOynC,MAAQ,GACVznC,EAAO/4E,WAAU+4E,EAAO/4E,SAAW,IACjC+4E,G,MCHR,IAAI0nC,EACA3B,EAAoBnrK,EAAE+sK,gBAAeD,EAAY3B,EAAoBnrK,EAAEykB,SAAW,IACtF,IAAIpN,EAAW8zJ,EAAoBnrK,EAAEqX,SACrC,IAAKy1J,GAAaz1J,IACbA,EAAS21J,gBACZF,EAAYz1J,EAAS21J,cAAc/hJ,MAC/B6hJ,GAAW,CACf,IAAIG,EAAU51J,EAASyO,qBAAqB,UACzCmnJ,EAAQj9K,SAAQ88K,EAAYG,EAAQA,EAAQj9K,OAAS,GAAGi7B,IAC5D,CAID,IAAK6hJ,EAAW,MAAM,IAAI1qK,MAAM,yDAChC0qK,EAAYA,EAAUxzK,QAAQ,OAAQ,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,YAAa,KACpF6xK,EAAoB9hK,EAAIyjK,EAAY,K,WCfpC3B,EAAoBrnK,EAAIuT,SAAS61J,SAAWjtK,KAAKwkB,SAASG,KAK1D,IAAIuoJ,EAAkB,CACrB,IAAK,GAaNhC,EAAoBK,EAAE52J,EAAK23J,GAA0C,IAA7BY,EAAgBZ,GAGxD,IAAIa,EAAuB,CAACC,EAA4BvmK,KACvD,IAGIskK,EAAUmB,GAHTd,EAAU6B,EAAajyK,GAAWyL,EAGhBhV,EAAI,EAC3B,GAAG25K,EAASnuH,MAAMvsD,GAAgC,IAAxBo8K,EAAgBp8K,KAAa,CACtD,IAAIq6K,KAAYkC,EACZnC,EAAoB16J,EAAE68J,EAAalC,KACrCD,EAAoB34H,EAAE44H,GAAYkC,EAAYlC,IAGhD,GAAG/vK,EAAS,IAAID,EAASC,EAAQ8vK,EAClC,CAEA,IADGkC,GAA4BA,EAA2BvmK,GACrDhV,EAAI25K,EAASz7K,OAAQ8B,IACzBy6K,EAAUd,EAAS35K,GAChBq5K,EAAoB16J,EAAE08J,EAAiBZ,IAAYY,EAAgBZ,IACrEY,EAAgBZ,GAAS,KAE1BY,EAAgBZ,GAAW,EAE5B,OAAOpB,EAAoBK,EAAEpwK,EAAO,EAGjCmyK,EAAqBttK,KAAqC,+BAAIA,KAAqC,gCAAK,GAC5GstK,EAAmBj9K,QAAQ88K,EAAqBxiJ,KAAK,KAAM,IAC3D2iJ,EAAmB/8K,KAAO48K,EAAqBxiJ,KAAK,KAAM2iJ,EAAmB/8K,KAAKo6B,KAAK2iJ,G,KC7CvF,IAAIC,EAAsBrC,EAAoBK,OAAEtnK,EAAW,CAAC,IAAI,MAAM,IAAOinK,EAAoB,SACjGqC,EAAsBrC,EAAoBK,EAAEgC,E","sources":["webpack:///webpack/runtime/chunk loaded","webpack:///webpack/runtime/create fake namespace object","webpack:///./src/popup/locales.ts","webpack:///../../libs/angular/src/components/toastr.component.ts","webpack:///../../libs/angular/src/pipes/credit-card-number.pipe.ts","webpack:///../../libs/common/src/abstractions/translation.service.ts","webpack:///../../libs/common/src/abstractions/i18n.service.ts","webpack:///../../libs/angular/src/pipes/i18n.pipe.ts","webpack:///../../libs/angular/src/pipes/search.pipe.ts","webpack:///../../libs/angular/src/pipes/user-name.pipe.ts","webpack:///../../libs/common/src/admin-console/enums/organization-api-key-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/organization-connection-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/organization-user-status-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/organization-user-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/policy-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/provider-user-status-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/provider-user-type.enum.ts","webpack:///../../libs/common/src/admin-console/enums/scim-provider-type.enum.ts","webpack:///../../libs/angular/src/pipes/user-type.pipe.ts","webpack:///../../libs/angular/src/jslib.module.ts","webpack:///../../libs/common/src/auth/enums/authentication-status.ts","webpack:///../../libs/common/src/auth/models/domain/force-reset-password-reason.ts","webpack:///../../libs/common/src/auth/abstractions/auth.service.ts","webpack:///../../libs/common/src/abstractions/messaging.service.ts","webpack:///../../libs/common/src/auth/abstractions/key-connector.service.ts","webpack:///../../libs/common/src/abstractions/state.service.ts","webpack:///../../libs/angular/src/auth/guards/auth.guard.ts","webpack:///../../libs/angular/src/auth/guards/lock.guard.ts","webpack:///../../libs/angular/src/auth/guards/unauth.guard.ts","webpack:///../../libs/common/src/abstractions/platformUtils.service.ts","webpack:///../../libs/common/src/abstractions/environment.service.ts","webpack:///../../libs/angular/src/components/environment.component.ts","webpack:///../../libs/common/src/auth/models/domain/environment-urls.ts","webpack:///../../libs/common/src/services/environment.service.ts","webpack:///../../libs/common/src/misc/flags.ts","webpack:///./src/flags.ts","webpack:///../../libs/common/src/enums/client-type.enum.ts","webpack:///../../libs/common/src/enums/device-type.enum.ts","webpack:///../../libs/common/src/enums/encrypted-export-type.enum.ts","webpack:///../../libs/common/src/enums/encryption-type.enum.ts","webpack:///./src/services/browser-environment.service.ts","webpack:///../../libs/angular/src/directives/box-row.directive.ts","webpack:///../../libs/common/src/enums/event-system-user.enum.ts","webpack:///../../libs/common/src/enums/event-type.enum.ts","webpack:///../../libs/common/src/enums/field-type.enum.ts","webpack:///../../libs/common/src/enums/file-upload-type.enum.ts","webpack:///../../libs/common/src/enums/hash-purpose.enum.ts","webpack:///../../libs/common/src/enums/html-storage-location.enum.ts","webpack:///../../libs/common/src/enums/http-status-code.enum.ts","webpack:///../../libs/common/src/enums/kdf-type.enum.ts","webpack:///../../libs/common/src/auth/models/domain/kdf-config.ts","webpack:///../../libs/common/src/enums/key-suffix-options.enum.ts","webpack:///../../libs/common/src/enums/linked-id-type.enum.ts","webpack:///../../libs/common/src/enums/log-level-type.enum.ts","webpack:///../../libs/common/src/enums/native-messaging-version.enum.ts","webpack:///../../libs/common/src/enums/notification-type.enum.ts","webpack:///../../libs/common/src/enums/product-type.enum.ts","webpack:///../../libs/common/src/enums/provider-type.enum.ts","webpack:///../../libs/common/src/enums/secure-note-type.enum.ts","webpack:///../../libs/common/src/enums/state-version.enum.ts","webpack:///../../libs/common/src/enums/storage-location.enum.ts","webpack:///../../libs/common/src/enums/theme-type.enum.ts","webpack:///../../libs/common/src/enums/uri-match-type.enum.ts","webpack:///../../libs/common/src/misc/utils.ts","webpack:///../../libs/common/src/models/domain/enc-string.ts","webpack:///../../libs/common/src/models/domain/domain-base.ts","webpack:///../../libs/common/src/admin-console/models/domain/master-password-policy-options.ts","webpack:///../../libs/angular/src/components/callout.component.html","webpack:///../../libs/angular/src/components/callout.component.ts","webpack:///../../libs/angular/src/directives/input-verbatim.directive.ts","webpack:///../../libs/angular/src/directives/stop-click.directive.ts","webpack:///./src/auth/popup/environment.component.html","webpack:///./src/auth/popup/environment.component.ts","webpack:///../../libs/common/src/auth/models/request/password-hint.request.ts","webpack:///../../libs/common/src/abstractions/api.service.ts","webpack:///../../libs/common/src/abstractions/log.service.ts","webpack:///../../libs/common/src/auth/abstractions/login.service.ts","webpack:///../../libs/angular/src/auth/components/hint.component.ts","webpack:///../../libs/common/src/abstractions/validation.service.ts","webpack:///../../libs/angular/src/directives/api-action.directive.ts","webpack:///../../libs/angular/src/directives/autofocus.directive.ts","webpack:///./src/auth/popup/hint.component.ts","webpack:///./src/auth/popup/hint.component.html","webpack:///./src/auth/popup/home.component.html","webpack:///./src/auth/popup/home.component.ts","webpack:///../../libs/common/src/auth/models/request/secret-verification.request.ts","webpack:///../../libs/common/src/tools/generator/password/password-generation.service.abstraction.ts","webpack:///../../libs/common/src/admin-console/models/domain/password-generator-policy-options.ts","webpack:///../../libs/common/src/misc/wordlist.ts","webpack:///../../libs/common/src/tools/generator/password/generated-password-history.ts","webpack:///../../libs/common/src/tools/generator/password/password-generation.service.ts","webpack:///../../libs/common/src/abstractions/crypto.service.ts","webpack:///../../libs/common/src/abstractions/vaultTimeout/vaultTimeout.service.ts","webpack:///../../libs/common/src/abstractions/vaultTimeout/vaultTimeoutSettings.service.ts","webpack:///../../libs/common/src/admin-console/abstractions/policy/policy-api.service.abstraction.ts","webpack:///../../libs/common/src/admin-console/abstractions/policy/policy.service.abstraction.ts","webpack:///../../libs/angular/src/auth/components/lock.component.ts","webpack:///./src/models/biometricErrors.ts","webpack:///../../libs/angular/src/directives/a11y-title.directive.ts","webpack:///./src/browser/safariApp.ts","webpack:///./src/services/browserPlatformUtils.service.ts","webpack:///./src/browser/browserApi.ts","webpack:///./src/popup/services/popup-utils.service.ts","webpack:///./src/popup/components/private-mode-warning.component.html","webpack:///./src/popup/components/private-mode-warning.component.ts","webpack:///./src/auth/popup/lock.component.html","webpack:///./src/auth/popup/lock.component.ts","webpack:///../../libs/common/src/auth/enums/auth-request-type.ts","webpack:///../../libs/common/src/auth/enums/authentication-type.ts","webpack:///../../libs/common/src/auth/models/domain/log-in-credentials.ts","webpack:///../../libs/common/src/auth/models/request/passwordless-create-auth.request.ts","webpack:///../../libs/common/src/models/domain/symmetric-crypto-key.ts","webpack:///../../libs/common/src/models/response/base.response.ts","webpack:///../../libs/common/src/models/response/error.response.ts","webpack:///../../libs/common/src/misc/iframe_component.ts","webpack:///../../libs/common/src/auth/captcha-iframe.ts","webpack:///../../libs/angular/src/auth/components/captcha-protected.component.ts","webpack:///../../libs/common/src/abstractions/cryptoFunction.service.ts","webpack:///../../libs/common/src/abstractions/appId.service.ts","webpack:///../../libs/common/src/abstractions/anonymousHub.service.ts","webpack:///../../libs/angular/src/auth/components/login-with-device.component.ts","webpack:///../../libs/common/src/vault/abstractions/sync/sync.service.abstraction.ts","webpack:///./src/auth/popup/login-with-device.component.html","webpack:///./src/auth/popup/login-with-device.component.ts","webpack:///../../libs/common/src/abstractions/formValidationErrors.service.ts","webpack:///../../libs/angular/src/auth/components/login.component.ts","webpack:///./src/auth/popup/login.component.html","webpack:///./src/auth/popup/login.component.ts","webpack:///../../libs/common/src/models/request/keys.request.ts","webpack:///../../libs/common/src/models/request/register.request.ts","webpack:///../../libs/angular/src/validators/inputsFieldMatch.validator.ts","webpack:///../../libs/common/src/abstractions/audit.service.ts","webpack:///../../libs/angular/src/components/register.component.ts","webpack:///../../libs/angular/src/shared/components/password-strength/password-strength.component.html","webpack:///../../libs/angular/src/shared/components/password-strength/password-strength.component.ts","webpack:///./src/auth/popup/register.component.html","webpack:///./src/auth/popup/register.component.ts","webpack:///../../libs/common/src/admin-console/abstractions/organization/organization-api.service.abstraction.ts","webpack:///../../libs/angular/src/auth/components/remove-password.component.ts","webpack:///./src/auth/popup/remove-password.component.html","webpack:///./src/auth/popup/remove-password.component.ts","webpack:///../../libs/common/src/abstractions/organization-user/requests/organization-user-reset-password-enrollment.request.ts","webpack:///../../libs/common/src/auth/models/request/set-password.request.ts","webpack:///../../libs/angular/src/auth/components/change-password.component.ts","webpack:///../../libs/common/src/abstractions/organization-user/organization-user.service.ts","webpack:///../../libs/angular/src/components/set-password.component.ts","webpack:///./src/auth/popup/set-password.component.html","webpack:///./src/auth/popup/set-password.component.ts","webpack:///../../libs/angular/src/auth/components/sso.component.ts","webpack:///./src/auth/popup/sso.component.ts","webpack:///../../libs/common/src/auth/abstractions/two-factor.service.ts","webpack:///../../libs/angular/src/auth/components/two-factor-options.component.ts","webpack:///./src/auth/popup/two-factor-options.component.html","webpack:///./src/auth/popup/two-factor-options.component.ts","webpack:///../../libs/common/src/auth/enums/two-factor-provider-type.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/token-two-factor.request.ts","webpack:///../../libs/common/src/auth/models/request/two-factor-email.request.ts","webpack:///../../libs/common/src/auth/services/two-factor.service.ts","webpack:///../../libs/common/src/auth/webauthn-iframe.ts","webpack:///../../libs/angular/src/auth/components/two-factor.component.ts","webpack:///../../libs/common/src/abstractions/broadcaster.service.ts","webpack:///./src/auth/popup/two-factor.component.html","webpack:///./src/auth/popup/two-factor.component.ts","webpack:///../../libs/common/src/auth/enums/verification-type.ts","webpack:///../../libs/common/src/auth/models/request/password.request.ts","webpack:///../../libs/common/src/abstractions/organization-user/requests/organization-user-reset-password.request.ts","webpack:///../../libs/common/src/auth/models/request/update-temp-password.request.ts","webpack:///../../libs/common/src/abstractions/userVerification/userVerification.service.abstraction.ts","webpack:///../../libs/angular/src/auth/components/update-temp-password.component.ts","webpack:///./src/auth/popup/update-temp-password.component.html","webpack:///./src/auth/popup/update-temp-password.component.ts","webpack:///../../libs/common/src/tools/generator/username/username-generation.service.abstraction.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/anon-addy-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/duck-duck-go-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/fastmail-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/firefox-relay-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/forwarder-options.ts","webpack:///../../libs/common/src/tools/generator/username/email-forwarders/simple-login-forwarder.ts","webpack:///../../libs/common/src/tools/generator/username/username-generation.service.ts","webpack:///../../libs/angular/src/tools/generator/components/generator.component.ts","webpack:///../../libs/angular/src/directives/select-copy.directive.ts","webpack:///./src/popup/components/pop-out.component.html","webpack:///./src/popup/components/pop-out.component.ts","webpack:///../../libs/angular/src/pipes/color-password.pipe.ts","webpack:///./src/tools/popup/generator/generator.component.html","webpack:///./src/tools/popup/generator/generator.component.ts","webpack:///../../libs/common/src/tools/send/enums/send-type.ts","webpack:///../../libs/angular/src/tools/generator/components/password-generator-history.component.ts","webpack:///./src/tools/popup/generator/password-generator-history.component.html","webpack:///./src/tools/popup/generator/password-generator-history.component.ts","webpack:///../../libs/common/src/tools/send/models/view/send-file.view.ts","webpack:///../../libs/common/src/tools/send/models/view/send-text.view.ts","webpack:///../../libs/common/src/tools/send/models/view/send.view.ts","webpack:///../../libs/common/src/tools/send/services/send.service.abstraction.ts","webpack:///../../libs/common/src/tools/send/services/send-api.service.abstraction.ts","webpack:///../../libs/angular/src/tools/send/efflux-dates.component.ts","webpack:///../../libs/angular/src/tools/send/add-edit.component.ts","webpack:///./src/services/abstractions/browser-state.service.ts","webpack:///./src/tools/popup/send/efflux-dates.component.html","webpack:///./src/tools/popup/send/efflux-dates.component.ts","webpack:///./src/tools/popup/send/send-add-edit.component.html","webpack:///./src/tools/popup/send/send-add-edit.component.ts","webpack:///../../libs/common/src/abstractions/search.service.ts","webpack:///../../libs/angular/src/tools/send/send.component.ts","webpack:///./src/models/browserComponentState.ts","webpack:///./src/models/browserSendComponentState.ts","webpack:///../../libs/angular/src/directives/stop-prop.directive.ts","webpack:///./src/tools/popup/send/components/send-list.component.html","webpack:///./src/tools/popup/send/components/send-list.component.ts","webpack:///./src/tools/popup/send/send-groupings.component.html","webpack:///./src/tools/popup/send/send-groupings.component.ts","webpack:///./src/tools/popup/send/send-type.component.html","webpack:///./src/tools/popup/send/send-type.component.ts","webpack:///../../libs/common/src/admin-console/abstractions/organization/organization.service.abstraction.ts","webpack:///../../libs/common/src/vault/enums/cipher-reprompt-type.ts","webpack:///../../libs/common/src/vault/enums/cipher-type.ts","webpack:///../../libs/common/src/misc/linkedFieldOption.decorator.ts","webpack:///../../libs/common/src/vault/models/view/item.view.ts","webpack:///../../libs/common/src/services/cryptography/initializer-key.ts","webpack:///../../libs/common/src/vault/models/view/card.view.ts","webpack:///../../libs/common/src/vault/models/view/attachment.view.ts","webpack:///../../libs/common/src/vault/models/view/field.view.ts","webpack:///../../libs/common/src/vault/models/view/identity.view.ts","webpack:///../../libs/common/src/vault/models/view/login-uri.view.ts","webpack:///../../libs/common/src/vault/models/view/login.view.ts","webpack:///../../libs/common/src/vault/models/view/password-history.view.ts","webpack:///../../libs/common/src/vault/models/view/secure-note.view.ts","webpack:///../../libs/common/src/vault/models/view/cipher.view.ts","webpack:///../../libs/common/src/vault/abstractions/cipher.service.ts","webpack:///../../libs/common/src/vault/abstractions/folder/folder.service.abstraction.ts","webpack:///../../libs/common/src/admin-console/abstractions/collection.service.ts","webpack:///../../libs/common/src/abstractions/event/event-collection.service.ts","webpack:///../../libs/common/src/vault/abstractions/password-reprompt.service.ts","webpack:///../../libs/angular/src/vault/components/add-edit.component.ts","webpack:///../../libs/angular/src/vault/components/add-edit-custom-fields.component.ts","webpack:///../../libs/angular/src/directives/true-false-value.directive.ts","webpack:///./src/vault/popup/components/vault/add-edit-custom-fields.component.html","webpack:///./src/vault/popup/components/vault/add-edit-custom-fields.component.ts","webpack:///./src/vault/popup/components/vault/add-edit.component.html","webpack:///./src/vault/popup/components/vault/add-edit.component.ts","webpack:///../../libs/common/src/models/domain/enc-array-buffer.ts","webpack:///../../libs/common/src/abstractions/fileDownload/fileDownload.service.ts","webpack:///../../libs/angular/src/vault/components/attachments.component.ts","webpack:///./src/vault/popup/components/vault/attachments.component.html","webpack:///./src/vault/popup/components/vault/attachments.component.ts","webpack:///../../libs/angular/src/admin-console/components/collections.component.ts","webpack:///./src/vault/popup/components/vault/collections.component.html","webpack:///./src/vault/popup/components/vault/collections.component.ts","webpack:///../../libs/angular/src/vault/vault-filter/models/vault-filter.model.ts","webpack:///../../libs/common/src/models/domain/tree-node.ts","webpack:///../../libs/common/src/misc/serviceUtils.ts","webpack:///../../libs/common/src/vault/models/view/folder.view.ts","webpack:///../../libs/angular/src/vault/vault-filter/models/dynamic-tree-node.model.ts","webpack:///../../libs/angular/src/vault/vault-filter/services/vault-filter.service.ts","webpack:///./src/vault/services/vault-filter.service.ts","webpack:///./src/autofill/services/abstractions/autofill.service.ts","webpack:///../../libs/angular/src/directives/fallback-src.directive.ts","webpack:///../../libs/angular/src/vault/components/icon.component.html","webpack:///../../libs/angular/src/vault/components/icon.component.ts","webpack:///../../libs/common/src/abstractions/totp.service.ts","webpack:///./src/vault/popup/components/action-buttons.component.html","webpack:///./src/vault/popup/components/action-buttons.component.ts","webpack:///./src/vault/popup/components/cipher-row.component.html","webpack:///./src/vault/popup/components/cipher-row.component.ts","webpack:///./src/vault/popup/components/vault/vault-select.component.html","webpack:///./src/vault/popup/components/vault/vault-select.component.ts","webpack:///./src/vault/popup/components/vault/current-tab.component.html","webpack:///./src/vault/popup/components/vault/current-tab.component.ts","webpack:///../../libs/angular/src/vault/components/password-history.component.ts","webpack:///./src/vault/popup/components/vault/password-history.component.html","webpack:///./src/vault/popup/components/vault/password-history.component.ts","webpack:///../../libs/common/src/types/checkable.ts","webpack:///../../libs/angular/src/components/share.component.ts","webpack:///./src/vault/popup/components/vault/share.component.html","webpack:///./src/vault/popup/components/vault/share.component.ts","webpack:///./src/models/browserGroupingsComponentState.ts","webpack:///./src/vault/popup/components/vault/vault-filter.component.html","webpack:///./src/vault/popup/components/vault/vault-filter.component.ts","webpack:///../../libs/angular/src/vault/components/vault-items.component.ts","webpack:///./src/vault/popup/components/vault/vault-items.component.html","webpack:///./src/vault/popup/components/vault/vault-items.component.ts","webpack:///../../libs/common/src/auth/abstractions/token.service.ts","webpack:///../../libs/angular/src/vault/components/view.component.ts","webpack:///../../libs/angular/src/vault/components/view-custom-fields.component.ts","webpack:///../../libs/angular/src/pipes/color-password-count.pipe.ts","webpack:///./src/vault/popup/components/vault/view-custom-fields.component.html","webpack:///./src/vault/popup/components/vault/view-custom-fields.component.ts","webpack:///./src/vault/popup/components/vault/view.component.html","webpack:///./src/vault/popup/components/vault/view.component.ts","webpack:///./src/popup/services/debounceNavigationService.ts","webpack:///./src/popup/settings/autofill.component.html","webpack:///./src/popup/settings/autofill.component.ts","webpack:///./src/popup/settings/excluded-domains.component.html","webpack:///./src/popup/settings/excluded-domains.component.ts","webpack:///../../libs/common/src/abstractions/export.service.ts","webpack:///../../libs/angular/src/components/export.component.ts","webpack:///../../libs/angular/src/components/export-scope-callout.component.html","webpack:///../../libs/angular/src/components/export-scope-callout.component.ts","webpack:///../../libs/angular/src/auth/components/user-verification.component.ts","webpack:///./src/popup/components/user-verification.component.html","webpack:///./src/popup/components/user-verification.component.ts","webpack:///./src/popup/settings/export.component.html","webpack:///./src/popup/settings/export.component.ts","webpack:///../../libs/common/src/vault/abstractions/folder/folder-api.service.abstraction.ts","webpack:///../../libs/angular/src/vault/components/folder-add-edit.component.ts","webpack:///./src/popup/settings/folder-add-edit.component.html","webpack:///./src/popup/settings/folder-add-edit.component.ts","webpack:///./src/popup/settings/folders.component.html","webpack:///./src/popup/settings/folders.component.ts","webpack:///./src/popup/settings/help-and-feedback.component.ts","webpack:///./src/popup/settings/help-and-feedback.component.html","webpack:///../../libs/angular/src/services/theming/theming.service.abstraction.ts","webpack:///./src/popup/settings/options.component.html","webpack:///./src/popup/settings/options.component.ts","webpack:///../../libs/angular/src/vault/components/premium.component.ts","webpack:///./src/popup/settings/premium.component.html","webpack:///./src/popup/settings/premium.component.ts","webpack:///../../libs/angular/src/components/modal/modal.ref.ts","webpack:///../../libs/angular/src/components/modal/dynamic-modal.component.ts","webpack:///../../libs/angular/src/components/modal/modal-injector.ts","webpack:///../../libs/common/src/enums/vault-timeout-action.enum.ts","webpack:///../../libs/angular/src/services/modal.service.ts","webpack:///../../libs/angular/src/components/set-pin.component.ts","webpack:///./src/popup/components/set-pin.component.html","webpack:///./src/popup/components/set-pin.component.ts","webpack:///../../libs/common/src/abstractions/config/config.service.abstraction.ts","webpack:///./src/popup/settings/about.component.html","webpack:///./src/popup/settings/about.component.ts","webpack:///../../libs/angular/src/components/settings/vault-timeout-input.component.ts","webpack:///./src/popup/settings/vault-timeout-input.component.html","webpack:///./src/popup/settings/vault-timeout-input.component.ts","webpack:///./src/popup/settings/settings.component.html","webpack:///./src/popup/settings/settings.component.ts","webpack:///./src/popup/settings/sync.component.ts","webpack:///./src/popup/tabs.component.html","webpack:///./src/popup/settings/sync.component.html","webpack:///./src/popup/tabs.component.ts","webpack:///./src/popup/app-routing.module.ts","webpack:///./src/popup/app-routing.animations.ts","webpack:///./src/popup/app.component.ts","webpack:///../../libs/angular/src/services/injection-tokens.ts","webpack:///../../libs/common/src/abstractions/config/config-api.service.abstraction.ts","webpack:///../../libs/common/src/abstractions/encrypt.service.ts","webpack:///../../libs/common/src/abstractions/event/event-upload.service.ts","webpack:///../../libs/common/src/abstractions/file-upload/file-upload.service.ts","webpack:///../../libs/common/src/abstractions/notifications.service.ts","webpack:///../../libs/common/src/abstractions/organization-domain/org-domain.service.abstraction.ts","webpack:///../../libs/common/src/abstractions/settings.service.ts","webpack:///../../libs/common/src/abstractions/stateMigration.service.ts","webpack:///../../libs/common/src/abstractions/storage.service.ts","webpack:///../../libs/common/src/abstractions/userVerification/userVerification-api.service.abstraction.ts","webpack:///../../libs/common/src/admin-console/abstractions/provider.service.ts","webpack:///../../libs/common/src/admin-console/models/data/collection.data.ts","webpack:///../../libs/common/src/admin-console/models/view/collection.view.ts","webpack:///../../libs/common/src/admin-console/models/domain/collection.ts","webpack:///../../libs/common/src/admin-console/services/collection.service.ts","webpack:///../../libs/common/src/auth/models/response/api-key.response.ts","webpack:///../../libs/common/src/auth/enums/sso.ts","webpack:///../../libs/common/src/auth/models/api/sso-config.api.ts","webpack:///../../libs/common/src/auth/models/response/organization-sso.response.ts","webpack:///../../libs/common/src/billing/models/response/billing.response.ts","webpack:///../../libs/common/src/billing/models/response/plan.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization.response.ts","webpack:///../../libs/common/src/billing/models/response/subscription.response.ts","webpack:///../../libs/common/src/billing/models/response/organization-subscription.response.ts","webpack:///../../libs/common/src/admin-console/models/api/permissions.api.ts","webpack:///../../libs/common/src/admin-console/models/response/profile-organization.response.ts","webpack:///../../libs/common/src/admin-console/models/response/profile-provider-organization.response.ts","webpack:///../../libs/common/src/admin-console/models/response/profile-provider.response.ts","webpack:///../../libs/common/src/models/response/profile.response.ts","webpack:///../../libs/common/src/billing/models/response/payment.response.ts","webpack:///../../libs/common/src/billing/models/response/tax-info.response.ts","webpack:///../../libs/common/src/models/response/list.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-api-key-information.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-auto-enroll-status.response.ts","webpack:///../../libs/common/src/models/response/keys.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-keys.response.ts","webpack:///../../libs/common/src/admin-console/models/domain/organization.ts","webpack:///../../libs/common/src/admin-console/services/organization/organization.service.ts","webpack:///../../libs/common/src/admin-console/models/data/policy.data.ts","webpack:///../../libs/common/src/admin-console/models/response/policy.response.ts","webpack:///../../libs/common/src/admin-console/services/policy/policy-api.service.ts","webpack:///../../libs/common/src/admin-console/models/domain/policy.ts","webpack:///../../libs/common/src/admin-console/models/domain/reset-password-policy-options.ts","webpack:///../../libs/common/src/admin-console/services/policy/policy.service.ts","webpack:///../../libs/common/src/models/domain/provider.ts","webpack:///../../libs/common/src/admin-console/services/provider.service.ts","webpack:///../../libs/common/src/auth/abstractions/account.service.ts","webpack:///../../libs/common/src/models/request/prelogin.request.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/token.request.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/password-token.request.ts","webpack:///../../libs/common/src/auth/models/response/identity-captcha.response.ts","webpack:///../../libs/common/src/models/data/server-config.data.ts","webpack:///../../libs/common/src/models/domain/account.ts","webpack:///../../libs/common/src/auth/models/domain/auth-result.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/device.request.ts","webpack:///../../libs/common/src/auth/models/response/master-password-policy.response.ts","webpack:///../../libs/common/src/auth/models/response/identity-token.response.ts","webpack:///../../libs/common/src/auth/models/response/identity-two-factor.response.ts","webpack:///../../libs/common/src/auth/login-strategies/login.strategy.ts","webpack:///../../libs/common/src/auth/login-strategies/password-login.strategy.ts","webpack:///../../libs/common/src/auth/login-strategies/passwordless-login.strategy.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/sso-token.request.ts","webpack:///../../libs/common/src/auth/login-strategies/sso-login.strategy.ts","webpack:///../../libs/common/src/auth/models/request/identity-token/user-api-token.request.ts","webpack:///../../libs/common/src/auth/login-strategies/user-api-login.strategy.ts","webpack:///../../libs/common/src/auth/models/request/passwordless-auth.request.ts","webpack:///../../libs/common/src/auth/services/auth.service.ts","webpack:///../../libs/common/src/auth/models/request/key-connector-user-key.request.ts","webpack:///../../libs/common/src/auth/models/request/set-key-connector-key.request.ts","webpack:///../../libs/common/src/auth/services/key-connector.service.ts","webpack:///../../libs/common/src/auth/services/login.service.ts","webpack:///../../libs/common/src/auth/services/token.service.ts","webpack:///../../libs/common/src/auth/services/user-verification/user-verification-api.service.ts","webpack:///../../libs/common/src/auth/models/request/verify-otp.request.ts","webpack:///../../libs/common/src/auth/services/user-verification/user-verification.service.ts","webpack:///../../libs/common/src/factories/accountFactory.ts","webpack:///../../libs/common/src/factories/globalStateFactory.ts","webpack:///../../libs/common/src/factories/stateFactory.ts","webpack:///../../libs/common/src/models/domain/window-state.ts","webpack:///../../libs/common/src/models/domain/global-state.ts","webpack:///../../libs/common/src/models/request/update-avatar.request.ts","webpack:///../../libs/common/src/services/account/avatar-update.service.ts","webpack:///../../libs/common/src/models/response/notification.response.ts","webpack:///../../libs/common/src/services/anonymousHub.service.ts","webpack:///../../libs/common/src/admin-console/models/response/selection-read-only.response.ts","webpack:///../../libs/common/src/admin-console/models/response/collection.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-connection.response.ts","webpack:///../../libs/common/src/models/api/card.api.ts","webpack:///../../libs/common/src/models/api/field.api.ts","webpack:///../../libs/common/src/models/api/identity.api.ts","webpack:///../../libs/common/src/models/api/login-uri.api.ts","webpack:///../../libs/common/src/models/api/login.api.ts","webpack:///../../libs/common/src/models/api/secure-note.api.ts","webpack:///../../libs/common/src/vault/models/response/attachment.response.ts","webpack:///../../libs/common/src/vault/models/response/password-history.response.ts","webpack:///../../libs/common/src/vault/models/response/cipher.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-export.response.ts","webpack:///../../libs/common/src/admin-console/models/response/organization-sponsorship-sync-status.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-organization.response.ts","webpack:///../../libs/common/src/abstractions/organization-user/responses/organization-user-bulk-public-key.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-user-bulk-public-key.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-user-bulk.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider-user.response.ts","webpack:///../../libs/common/src/admin-console/models/response/provider/provider.response.ts","webpack:///../../libs/common/src/auth/models/response/auth-request.response.ts","webpack:///../../libs/common/src/auth/models/response/device-verification.response.ts","webpack:///../../libs/common/src/auth/models/response/emergency-access.response.ts","webpack:///../../libs/common/src/auth/models/response/key-connector-user-key.response.ts","webpack:///../../libs/common/src/auth/models/response/prelogin.response.ts","webpack:///../../libs/common/src/auth/models/response/register.response.ts","webpack:///../../libs/common/src/auth/models/response/sso-pre-validate.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-authenticator.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-duo.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-email.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-provider.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-recover.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-web-authn.response.ts","webpack:///../../libs/common/src/auth/models/response/two-factor-yubi-key.response.ts","webpack:///../../libs/common/src/billing/models/response/billing-history.response.ts","webpack:///../../libs/common/src/billing/models/response/billing-payment.response.ts","webpack:///../../libs/common/src/billing/models/response/tax-rate.response.ts","webpack:///../../libs/common/src/models/response/breach-account.response.ts","webpack:///../../libs/common/src/models/response/global-domain.response.ts","webpack:///../../libs/common/src/models/response/domains.response.ts","webpack:///../../libs/common/src/models/response/event.response.ts","webpack:///../../libs/common/src/models/response/user-key.response.ts","webpack:///../../libs/common/src/vault/models/response/attachment-upload-data.response.ts","webpack:///../../libs/common/src/tools/send/models/api/send-file.api.ts","webpack:///../../libs/common/src/tools/send/models/api/send-text.api.ts","webpack:///../../libs/common/src/tools/send/models/response/send.response.ts","webpack:///../../libs/common/src/vault/models/response/folder.response.ts","webpack:///../../libs/common/src/vault/models/response/sync.response.ts","webpack:///../../libs/common/src/services/api.service.ts","webpack:///../../libs/common/src/services/appId.service.ts","webpack:///../../libs/common/src/services/audit.service.ts","webpack:///../../libs/common/src/misc/throttle.ts","webpack:///../../libs/common/src/models/response/server-config.response.ts","webpack:///../../libs/common/src/abstractions/config/server-config.ts","webpack:///../../libs/common/src/services/config/config.service.ts","webpack:///../../libs/common/src/services/consoleLog.service.ts","webpack:///../../libs/common/src/admin-console/models/domain/encrypted-organization-key.ts","webpack:///../../libs/common/src/misc/sequentialize.ts","webpack:///../../libs/common/src/services/crypto.service.ts","webpack:///../../libs/common/src/models/domain/encrypted-object.ts","webpack:///../../libs/common/src/services/cryptography/encrypt.service.implementation.ts","webpack:///../../libs/common/src/vault/models/data/attachment.data.ts","webpack:///../../libs/common/src/vault/models/data/card.data.ts","webpack:///../../libs/common/src/vault/models/data/field.data.ts","webpack:///../../libs/common/src/vault/models/data/identity.data.ts","webpack:///../../libs/common/src/vault/models/data/login-uri.data.ts","webpack:///../../libs/common/src/vault/models/data/login.data.ts","webpack:///../../libs/common/src/vault/models/data/password-history.data.ts","webpack:///../../libs/common/src/vault/models/data/secure-note.data.ts","webpack:///../../libs/common/src/vault/models/data/cipher.data.ts","webpack:///../../libs/common/src/vault/models/domain/attachment.ts","webpack:///../../libs/common/src/vault/models/domain/card.ts","webpack:///../../libs/common/src/vault/models/domain/field.ts","webpack:///../../libs/common/src/vault/models/domain/identity.ts","webpack:///../../libs/common/src/vault/models/domain/login-uri.ts","webpack:///../../libs/common/src/vault/models/domain/login.ts","webpack:///../../libs/common/src/vault/models/domain/password.ts","webpack:///../../libs/common/src/vault/models/domain/secure-note.ts","webpack:///../../libs/common/src/vault/models/domain/cipher.ts","webpack:///../../libs/common/src/services/cryptography/get-class-initializer.ts","webpack:///../../libs/common/src/services/cryptography/multithread-encrypt.service.implementation.ts","webpack:///../../libs/common/src/models/data/event.data.ts","webpack:///../../libs/common/src/services/event/event-collection.service.ts","webpack:///../../libs/common/src/models/request/event.request.ts","webpack:///../../libs/common/src/services/event/event-upload.service.ts","webpack:///../../libs/common/src/models/export/card.export.ts","webpack:///../../libs/common/src/models/export/field.export.ts","webpack:///../../libs/common/src/models/export/identity.export.ts","webpack:///../../libs/common/src/models/export/login-uri.export.ts","webpack:///../../libs/common/src/models/export/login.export.ts","webpack:///../../libs/common/src/models/export/secure-note.export.ts","webpack:///../../libs/common/src/models/export/cipher.export.ts","webpack:///../../libs/common/src/models/export/cipher-with-ids.export.ts","webpack:///../../libs/common/src/models/export/collection.export.ts","webpack:///../../libs/common/src/models/export/collection-with-id.export.ts","webpack:///../../libs/common/src/models/export/event.export.ts","webpack:///../../libs/common/src/vault/models/domain/folder.ts","webpack:///../../libs/common/src/models/export/folder.export.ts","webpack:///../../libs/common/src/models/export/folder-with-id.export.ts","webpack:///../../libs/common/src/services/export.service.ts","webpack:///../../libs/common/src/services/azureFileUpload.service.ts","webpack:///../../libs/common/src/services/bitwardenFileUpload.service.ts","webpack:///../../libs/common/src/services/file-upload/file-upload.service.ts","webpack:///../../libs/common/src/services/notifications.service.ts","webpack:///../../libs/common/src/abstractions/organization-domain/responses/organization-domain-sso-details.response.ts","webpack:///../../libs/common/src/abstractions/organization-domain/responses/organization-domain.response.ts","webpack:///../../libs/common/src/services/organization-domain/requests/organization-domain-sso-details.request.ts","webpack:///../../libs/common/src/abstractions/organization-user/responses/organization-user.response.ts","webpack:///../../libs/common/src/abstractions/organization-user/responses/organization-user-bulk.response.ts","webpack:///../../libs/common/src/services/organization-user/requests/organization-user-bulk.request.ts","webpack:///../../libs/common/src/services/search.service.ts","webpack:///../../libs/common/src/services/settings.service.ts","webpack:///../../libs/common/src/admin-console/models/data/provider.data.ts","webpack:///../../libs/common/src/models/domain/state.ts","webpack:///../../libs/common/src/tools/send/models/data/send-file.data.ts","webpack:///../../libs/common/src/tools/send/models/data/send-text.data.ts","webpack:///../../libs/common/src/tools/send/models/data/send.data.ts","webpack:///../../libs/common/src/vault/models/data/folder.data.ts","webpack:///../../libs/common/src/services/state.service.ts","webpack:///../../libs/common/src/services/stateMigration.service.ts","webpack:///../../libs/common/src/services/totp.service.ts","webpack:///../../libs/common/src/services/vaultTimeout/vaultTimeout.service.ts","webpack:///../../libs/common/src/services/vaultTimeout/vaultTimeoutSettings.service.ts","webpack:///../../libs/common/src/models/domain/decrypt-parameters.ts","webpack:///../../libs/common/src/services/webCryptoFunction.service.ts","webpack:///../../libs/common/src/tools/send/models/request/send.request.ts","webpack:///../../libs/common/src/tools/send/models/response/send-access.response.ts","webpack:///../../libs/common/src/tools/send/models/response/send-file-download-data.response.ts","webpack:///../../libs/common/src/tools/send/models/response/send-file-upload-data.response.ts","webpack:///../../libs/common/src/tools/send/services/send-api.service.ts","webpack:///../../libs/common/src/tools/send/models/domain/send-file.ts","webpack:///../../libs/common/src/tools/send/models/domain/send-text.ts","webpack:///../../libs/common/src/tools/send/models/domain/send.ts","webpack:///../../libs/common/src/tools/send/services/send.service.ts","webpack:///../../libs/common/src/vault/abstractions/file-upload/cipher-file-upload.service.ts","webpack:///../../libs/common/src/vault/abstractions/sync/sync-notifier.service.abstraction.ts","webpack:///../../libs/common/src/vault/models/domain/sorted-ciphers-cache.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-delete.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-move.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-restore.request.ts","webpack:///../../libs/common/src/vault/models/request/attachment.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-with-id.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-bulk-share.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-collections.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-create.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-partial.request.ts","webpack:///../../libs/common/src/vault/models/request/cipher-share.request.ts","webpack:///../../libs/common/src/vault/services/cipher.service.ts","webpack:///../../libs/common/src/vault/services/file-upload/cipher-file-upload.service.ts","webpack:///../../libs/common/src/vault/models/request/folder.request.ts","webpack:///../../libs/common/src/vault/services/folder/folder-api.service.ts","webpack:///../../libs/common/src/vault/services/folder/folder.service.ts","webpack:///../../libs/common/src/vault/services/sync/sync-notifier.service.ts","webpack:///../../libs/common/src/admin-console/models/data/organization.data.ts","webpack:///../../libs/common/src/vault/services/sync/sync.service.ts","webpack:///../../libs/angular/src/vault/components/password-reprompt.component.ts","webpack:///../../libs/angular/src/vault/services/password-reprompt.service.ts","webpack:///../../libs/common/src/services/broadcaster.service.ts","webpack:///../../libs/angular/src/services/broadcaster.service.ts","webpack:///../../libs/angular/src/services/theming/themeBuilder.ts","webpack:///../../libs/angular/src/services/theming/theming.service.ts","webpack:///../../libs/angular/src/services/jslib-services.module.ts","webpack:///../../libs/common/src/auth/abstractions/account-api.service.ts","webpack:///../../libs/common/src/auth/services/account-api.service.ts","webpack:///../../libs/common/src/auth/services/account.service.ts","webpack:///../../libs/common/src/abstractions/account/avatar-update.service.ts","webpack:///../../libs/common/src/services/organization-user/organization-user.service.implementation.ts","webpack:///../../libs/common/src/services/formValidationErrors.service.ts","webpack:///../../libs/common/src/admin-console/services/organization/organization-api.service.ts","webpack:///../../libs/common/src/services/config/config-api.service.ts","webpack:///../../libs/common/src/services/validation.service.ts","webpack:///../../libs/common/src/services/organization-domain/org-domain.service.ts","webpack:///../../libs/common/src/abstractions/organization-domain/org-domain-api.service.abstraction.ts","webpack:///../../libs/common/src/services/organization-domain/org-domain-api.service.ts","webpack:///../../libs/common/src/services/container.service.ts","webpack:///./src/decorators/session-sync-observable/sync-item-metadata.ts","webpack:///./src/decorators/session-sync-observable/session-syncer.ts","webpack:///./src/decorators/session-sync-observable/browser-session.decorator.ts","webpack:///./src/decorators/session-sync-observable/session-sync.decorator.ts","webpack:///./src/admin-console/services/browser-organization.service.ts","webpack:///./src/admin-console/services/browser-policy.service.ts","webpack:///./src/auth/popup/services/lock-guard.service.ts","webpack:///./src/auth/popup/services/unauth-guard.service.ts","webpack:///../../libs/common/src/services/memoryStorage.service.ts","webpack:///../../libs/common/src/services/system.service.ts","webpack:///./src/background/models/notificationQueueMessageType.ts","webpack:///./src/autofill/background/context-menus.background.ts","webpack:///./src/background/models/notificationQueueMessage.ts","webpack:///./src/background/models/addLoginQueueMessage.ts","webpack:///./src/autofill/background/notification.background.ts","webpack:///./src/autofill/background/tabs.background.ts","webpack:///./src/background/service_factories/factory-options.ts","webpack:///./src/models/account.ts","webpack:///./src/services/browser-state.service.ts","webpack:///./src/background/service_factories/log-service.factory.ts","webpack:///./src/services/abstractChromeStorageApi.service.ts","webpack:///./src/services/browserLocalStorage.service.ts","webpack:///./src/services/browserMemoryStorage.service.ts","webpack:///./src/services/localBackedSessionStorage.service.ts","webpack:///./src/background/service_factories/crypto-function-service.factory.ts","webpack:///./src/decorators/dev-flag.decorator.ts","webpack:///./src/background/service_factories/encrypt-service.factory.ts","webpack:///./src/services/keyGeneration.service.ts","webpack:///./src/background/service_factories/storage-service.factory.ts","webpack:///./src/background/service_factories/key-generation-service.factory.ts","webpack:///./src/background/service_factories/state-service.factory.ts","webpack:///./src/background/service_factories/state-migration-service.factory.ts","webpack:///./src/admin-console/background/service-factories/organization-service.factory.ts","webpack:///./src/admin-console/background/service-factories/policy-service.factory.ts","webpack:///./src/auth/background/service-factories/token-service.factory.ts","webpack:///./src/background/service_factories/app-id-service.factory.ts","webpack:///./src/background/service_factories/environment-service.factory.ts","webpack:///./src/services/browserMessaging.service.ts","webpack:///./src/background/service_factories/messaging-service.factory.ts","webpack:///./src/background/service_factories/platform-utils-service.factory.ts","webpack:///./src/background/service_factories/api-service.factory.ts","webpack:///./src/services/browserCrypto.service.ts","webpack:///./src/background/service_factories/crypto-service.factory.ts","webpack:///../../libs/common/src/services/translation.service.ts","webpack:///../../libs/common/src/services/i18n.service.ts","webpack:///./src/services/i18n.service.ts","webpack:///./src/background/service_factories/i18n-service.factory.ts","webpack:///./src/background/service_factories/password-generation-service.factory.ts","webpack:///./src/auth/background/service-factories/auth-service.factory.ts","webpack:///./src/auth/background/service-factories/key-connector-service.factory.ts","webpack:///./src/auth/background/service-factories/two-factor-service.factory.ts","webpack:///./src/background/service_factories/cipher-file-upload-service.factory.ts","webpack:///./src/background/service_factories/file-upload-service.factory.ts","webpack:///./src/services/browser-settings.service.ts","webpack:///./src/background/service_factories/settings-service.factory.ts","webpack:///./src/vault/background/service_factories/cipher-service.factory.ts","webpack:///./src/background/service_factories/search-service.factory.ts","webpack:///./src/autofill/browser/main-context-menu-handler.ts","webpack:///./src/autofill/browser/cipher-context-menu-handler.ts","webpack:///./src/auth/background/service-factories/totp-service.factory.ts","webpack:///./src/background/service_factories/event-collection-service.factory.ts","webpack:///./src/background/service_factories/event-upload-service.factory.ts","webpack:///./src/autofill/models/autofill-script.ts","webpack:///./src/autofill/services/autofill-constants.ts","webpack:///./src/autofill/services/autofill.service.ts","webpack:///./src/autofill/clipboard/clear-clipboard.ts","webpack:///./src/autofill/clipboard/copy-to-clipboard-command.ts","webpack:///./src/alarms/alarm-state.ts","webpack:///./src/autofill/clipboard/generate-password-to-clipboard-command.ts","webpack:///./src/autofill/commands/autofill-tab-command.ts","webpack:///./src/autofill/browser/context-menu-clicked-handler.ts","webpack:///./src/autofill/background/service_factories/autofill-service.factory.ts","webpack:///./src/listeners/update-badge.ts","webpack:///./src/services/browser-i18n.service.ts","webpack:///./src/services/browser-send.service.ts","webpack:///./src/services/browserMessagingPrivateModeBackground.service.ts","webpack:///./src/services/vaultTimeout/vaultTimeout.service.ts","webpack:///./src/vault/services/browser-folder.service.ts","webpack:///./src/background/commands.background.ts","webpack:///./src/background/idle.background.ts","webpack:///./src/background/nativeMessaging.background.ts","webpack:///./src/background/runtime.background.ts","webpack:///./src/background/webRequest.background.ts","webpack:///./src/background/main.background.ts","webpack:///./src/services/browser-config.service.ts","webpack:///../../libs/common/src/abstractions/fileDownload/fileDownloadBuilder.ts","webpack:///./src/services/browserFileDownloadService.ts","webpack:///./src/services/browserMessagingPrivateModePopup.service.ts","webpack:///./src/vault/popup/components/password-reprompt.component.ts","webpack:///./src/vault/popup/components/password-reprompt.component.html","webpack:///./src/vault/popup/services/password-reprompt.service.ts","webpack:///./src/popup/services/init.service.ts","webpack:///./src/popup/services/popup-search.service.ts","webpack:///./src/popup/services/services.module.ts","webpack:///./src/popup/app.module.ts","webpack:///./src/popup/main.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/get javascript chunk filename","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///webpack/runtime/publicPath","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","import { registerLocaleData } from \"@angular/common\";\nimport localeAr from \"@angular/common/locales/ar\";\nimport localeAz from \"@angular/common/locales/az\";\nimport localeBe from \"@angular/common/locales/be\";\nimport localeBg from \"@angular/common/locales/bg\";\nimport localeBn from \"@angular/common/locales/bn\";\nimport localeBs from \"@angular/common/locales/bs\";\nimport localeCa from \"@angular/common/locales/ca\";\nimport localeCs from \"@angular/common/locales/cs\";\nimport localeDa from \"@angular/common/locales/da\";\nimport localeDe from \"@angular/common/locales/de\";\nimport localeEl from \"@angular/common/locales/el\";\nimport localeEnGb from \"@angular/common/locales/en-GB\";\nimport localeEnIn from \"@angular/common/locales/en-IN\";\nimport localeEs from \"@angular/common/locales/es\";\nimport localeEt from \"@angular/common/locales/et\";\nimport localeEu from \"@angular/common/locales/eu\";\nimport localeFa from \"@angular/common/locales/fa\";\nimport localeFi from \"@angular/common/locales/fi\";\nimport localeFil from \"@angular/common/locales/fil\";\nimport localeFr from \"@angular/common/locales/fr\";\nimport localeHe from \"@angular/common/locales/he\";\nimport localeHi from \"@angular/common/locales/hi\";\nimport localeHr from \"@angular/common/locales/hr\";\nimport localeHu from \"@angular/common/locales/hu\";\nimport localeId from \"@angular/common/locales/id\";\nimport localeIt from \"@angular/common/locales/it\";\nimport localeJa from \"@angular/common/locales/ja\";\nimport localeKa from \"@angular/common/locales/ka\";\nimport localeKm from \"@angular/common/locales/km\";\nimport localeKn from \"@angular/common/locales/kn\";\nimport localeKo from \"@angular/common/locales/ko\";\nimport localeLt from \"@angular/common/locales/lt\";\nimport localeLv from \"@angular/common/locales/lv\";\nimport localeMl from \"@angular/common/locales/ml\";\nimport localeNb from \"@angular/common/locales/nb\";\nimport localeNl from \"@angular/common/locales/nl\";\nimport localeNn from \"@angular/common/locales/nn\";\nimport localePl from \"@angular/common/locales/pl\";\nimport localePtBr from \"@angular/common/locales/pt\";\nimport localePtPt from \"@angular/common/locales/pt-PT\";\nimport localeRo from \"@angular/common/locales/ro\";\nimport localeRu from \"@angular/common/locales/ru\";\nimport localeSi from \"@angular/common/locales/si\";\nimport localeSk from \"@angular/common/locales/sk\";\nimport localeSl from \"@angular/common/locales/sl\";\nimport localeSr from \"@angular/common/locales/sr\";\nimport localeSv from \"@angular/common/locales/sv\";\nimport localeTh from \"@angular/common/locales/th\";\nimport localeTr from \"@angular/common/locales/tr\";\nimport localeUk from \"@angular/common/locales/uk\";\nimport localeVi from \"@angular/common/locales/vi\";\nimport localeZhCn from \"@angular/common/locales/zh-Hans\";\nimport localeZhTw from \"@angular/common/locales/zh-Hant\";\n\nregisterLocaleData(localeAr, \"ar\");\nregisterLocaleData(localeAz, \"az\");\nregisterLocaleData(localeBe, \"be\");\nregisterLocaleData(localeBg, \"bg\");\nregisterLocaleData(localeBn, \"bn\");\nregisterLocaleData(localeBs, \"bs\");\nregisterLocaleData(localeCa, \"ca\");\nregisterLocaleData(localeCs, \"cs\");\nregisterLocaleData(localeDa, \"da\");\nregisterLocaleData(localeDe, \"de\");\nregisterLocaleData(localeEl, \"el\");\nregisterLocaleData(localeEnGb, \"en-GB\");\nregisterLocaleData(localeEnIn, \"en-IN\");\nregisterLocaleData(localeEs, \"es\");\nregisterLocaleData(localeEt, \"et\");\nregisterLocaleData(localeEu, \"eu\");\nregisterLocaleData(localeFa, \"fa\");\nregisterLocaleData(localeFi, \"fi\");\nregisterLocaleData(localeFil, \"fil\");\nregisterLocaleData(localeFr, \"fr\");\nregisterLocaleData(localeHe, \"he\");\nregisterLocaleData(localeHi, \"hi\");\nregisterLocaleData(localeHr, \"hr\");\nregisterLocaleData(localeHu, \"hu\");\nregisterLocaleData(localeId, \"id\");\nregisterLocaleData(localeIt, \"it\");\nregisterLocaleData(localeJa, \"ja\");\nregisterLocaleData(localeKa, \"ka\");\nregisterLocaleData(localeKm, \"km\");\nregisterLocaleData(localeKn, \"kn\");\nregisterLocaleData(localeKo, \"ko\");\nregisterLocaleData(localeLt, \"lt\");\nregisterLocaleData(localeLv, \"lv\");\nregisterLocaleData(localeMl, \"ml\");\nregisterLocaleData(localeNb, \"nb\");\nregisterLocaleData(localeNl, \"nl\");\nregisterLocaleData(localeNn, \"nn\");\nregisterLocaleData(localePl, \"pl\");\nregisterLocaleData(localePtBr, \"pt-BR\");\nregisterLocaleData(localePtPt, \"pt-PT\");\nregisterLocaleData(localeRo, \"ro\");\nregisterLocaleData(localeRu, \"ru\");\nregisterLocaleData(localeSi, \"si\");\nregisterLocaleData(localeSk, \"sk\");\nregisterLocaleData(localeSl, \"sl\");\nregisterLocaleData(localeSr, \"sr\");\nregisterLocaleData(localeSv, \"sv\");\nregisterLocaleData(localeTh, \"th\");\nregisterLocaleData(localeTr, \"tr\");\nregisterLocaleData(localeUk, \"uk\");\nregisterLocaleData(localeVi, \"vi\");\nregisterLocaleData(localeZhCn, \"zh-CN\");\nregisterLocaleData(localeZhTw, \"zh-TW\");\n","import { animate, state, style, transition, trigger } from \"@angular/animations\";\nimport { CommonModule } from \"@angular/common\";\nimport { Component, ModuleWithProviders, NgModule } from \"@angular/core\";\nimport {\n  DefaultNoComponentGlobalConfig,\n  GlobalConfig,\n  Toast as BaseToast,\n  ToastPackage,\n  ToastrService,\n  TOAST_CONFIG,\n} from \"ngx-toastr\";\n\n@Component({\n  selector: \"[toast-component2]\",\n  template: `\n    <button\n      *ngIf=\"options.closeButton\"\n      (click)=\"remove()\"\n      type=\"button\"\n      class=\"toast-close-button\"\n      aria-label=\"Close\"\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    <div class=\"icon\">\n      <i></i>\n    </div>\n    <div>\n      <div *ngIf=\"title\" [class]=\"options.titleClass\" [attr.aria-label]=\"title\">\n        {{ title }} <ng-container *ngIf=\"duplicatesCount\">[{{ duplicatesCount + 1 }}]</ng-container>\n      </div>\n      <div\n        *ngIf=\"message && options.enableHtml\"\n        role=\"alertdialog\"\n        aria-live=\"polite\"\n        [class]=\"options.messageClass\"\n        [innerHTML]=\"message\"\n      ></div>\n      <div\n        *ngIf=\"message && !options.enableHtml\"\n        role=\"alertdialog\"\n        aria-live=\"polite\"\n        [class]=\"options.messageClass\"\n        [attr.aria-label]=\"message\"\n      >\n        {{ message }}\n      </div>\n    </div>\n    <div *ngIf=\"options.progressBar\">\n      <div class=\"toast-progress\" [style.width]=\"width + '%'\"></div>\n    </div>\n  `,\n  animations: [\n    trigger(\"flyInOut\", [\n      state(\"inactive\", style({ opacity: 0 })),\n      state(\"active\", style({ opacity: 1 })),\n      state(\"removed\", style({ opacity: 0 })),\n      transition(\"inactive => active\", animate(\"{{ easeTime }}ms {{ easing }}\")),\n      transition(\"active => removed\", animate(\"{{ easeTime }}ms {{ easing }}\")),\n    ]),\n  ],\n  preserveWhitespaces: false,\n})\nexport class BitwardenToast extends BaseToast {\n  constructor(protected toastrService: ToastrService, public toastPackage: ToastPackage) {\n    super(toastrService, toastPackage);\n  }\n}\n\nexport const BitwardenToastGlobalConfig: GlobalConfig = {\n  ...DefaultNoComponentGlobalConfig,\n  toastComponent: BitwardenToast,\n};\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [BitwardenToast],\n  exports: [BitwardenToast],\n})\nexport class BitwardenToastModule {\n  static forRoot(config: Partial<GlobalConfig> = {}): ModuleWithProviders<BitwardenToastModule> {\n    return {\n      ngModule: BitwardenToastModule,\n      providers: [\n        {\n          provide: TOAST_CONFIG,\n          useValue: {\n            default: BitwardenToastGlobalConfig,\n            config: config,\n          },\n        },\n      ],\n    };\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\ninterface CardRuleEntry {\n  cardLength: number;\n  blocks: number[];\n}\n\n// See https://baymard.com/checkout-usability/credit-card-patterns for\n// all possible credit card spacing patterns. For now, we just handle\n// the below.\nconst numberFormats: Record<string, CardRuleEntry[]> = {\n  Visa: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  Mastercard: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  Maestro: [\n    { cardLength: 16, blocks: [4, 4, 4, 4] },\n    { cardLength: 13, blocks: [4, 4, 5] },\n    { cardLength: 15, blocks: [4, 6, 5] },\n    { cardLength: 19, blocks: [4, 4, 4, 4, 3] },\n  ],\n  Discover: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  \"Diners Club\": [{ cardLength: 14, blocks: [4, 6, 4] }],\n  JCB: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n  UnionPay: [\n    { cardLength: 16, blocks: [4, 4, 4, 4] },\n    { cardLength: 19, blocks: [6, 13] },\n  ],\n  Amex: [{ cardLength: 15, blocks: [4, 6, 5] }],\n  Other: [{ cardLength: 16, blocks: [4, 4, 4, 4] }],\n};\n\n@Pipe({ name: \"creditCardNumber\" })\nexport class CreditCardNumberPipe implements PipeTransform {\n  transform(creditCardNumber: string, brand: string): string {\n    let rules = numberFormats[brand];\n\n    if (rules == null) {\n      rules = numberFormats[\"Other\"];\n    }\n\n    const cardLength = creditCardNumber.length;\n\n    let matchingRule = rules.find((r) => r.cardLength == cardLength);\n    if (matchingRule == null) {\n      matchingRule = rules[0];\n    }\n\n    const blocks = matchingRule.blocks;\n\n    const chunks: string[] = [];\n    let total = 0;\n\n    blocks.forEach((c) => {\n      chunks.push(creditCardNumber.slice(total, total + c));\n      total += c;\n    });\n\n    // Append the remaining part\n    if (cardLength > total) {\n      chunks.push(creditCardNumber.slice(total));\n    }\n\n    return chunks.join(\" \");\n  }\n}\n","export abstract class TranslationService {\n  supportedTranslationLocales: string[];\n  translationLocale: string;\n  collator: Intl.Collator;\n  localeNames: Map<string, string>;\n  t: (id: string, p1?: string | number, p2?: string | number, p3?: string | number) => string;\n  translate: (id: string, p1?: string, p2?: string, p3?: string) => string;\n}\n","import { Observable } from \"rxjs\";\n\nimport { TranslationService } from \"./translation.service\";\n\nexport abstract class I18nService extends TranslationService {\n  locale$: Observable<string>;\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\n\n@Pipe({\n  name: \"i18n\",\n})\nexport class I18nPipe implements PipeTransform {\n  constructor(private i18nService: I18nService) {}\n\n  transform(id: string, p1?: string | number, p2?: string | number, p3?: string | number): string {\n    return this.i18nService.t(id, p1, p2, p3);\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\ntype PropertyValueFunction<T> = (item: T) => { toString: () => string };\n\n@Pipe({\n  name: \"search\",\n})\nexport class SearchPipe implements PipeTransform {\n  transform<T>(\n    items: T[],\n    searchText: string,\n    prop1?: keyof T,\n    prop2?: keyof T,\n    prop3?: keyof T\n  ): T[];\n  transform<T>(\n    items: T[],\n    searchText: string,\n    prop1?: PropertyValueFunction<T>,\n    prop2?: PropertyValueFunction<T>,\n    prop3?: PropertyValueFunction<T>\n  ): T[];\n  transform<T>(\n    items: T[],\n    searchText: string,\n    prop1?: keyof T | PropertyValueFunction<T>,\n    prop2?: keyof T | PropertyValueFunction<T>,\n    prop3?: keyof T | PropertyValueFunction<T>\n  ): T[] {\n    if (items == null || items.length === 0) {\n      return [];\n    }\n\n    if (searchText == null || searchText.length < 2) {\n      return items;\n    }\n\n    searchText = searchText.trim().toLowerCase();\n    return items.filter((i) => {\n      if (prop1 != null) {\n        const propValue = typeof prop1 === \"function\" ? prop1(i) : i[prop1];\n\n        if (propValue?.toString().toLowerCase().indexOf(searchText) > -1) {\n          return true;\n        }\n      }\n\n      if (prop2 != null) {\n        const propValue = typeof prop2 === \"function\" ? prop2(i) : i[prop2];\n\n        if (propValue?.toString().toLowerCase().indexOf(searchText) > -1) {\n          return true;\n        }\n      }\n\n      if (prop3 != null) {\n        const propValue = typeof prop3 === \"function\" ? prop3(i) : i[prop3];\n\n        if (propValue?.toString().toLowerCase().indexOf(searchText) > -1) {\n          return true;\n        }\n      }\n\n      return false;\n    });\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\ninterface User {\n  name?: string;\n  email?: string;\n}\n\n@Pipe({\n  name: \"userName\",\n})\nexport class UserNamePipe implements PipeTransform {\n  transform(user?: User): string {\n    if (user == null) {\n      return null;\n    }\n\n    if (user.name == null && user.email == null) {\n      return null;\n    }\n\n    return user.name == null || user.name.trim() === \"\" ? user.email : user.name;\n  }\n}\n","export enum OrganizationApiKeyType {\n  Default = 0,\n  BillingSync = 1,\n  Scim = 2,\n}\n","export enum OrganizationConnectionType {\n  CloudBillingSync = 1,\n  Scim = 2,\n}\n","export enum OrganizationUserStatusType {\n  Invited = 0,\n  Accepted = 1,\n  Confirmed = 2,\n  Revoked = -1,\n}\n","export enum OrganizationUserType {\n  Owner = 0,\n  Admin = 1,\n  User = 2,\n  Manager = 3,\n  Custom = 4,\n}\n","export enum PolicyType {\n  TwoFactorAuthentication = 0, // Requires users to have 2fa enabled\n  MasterPassword = 1, // Sets minimum requirements for master password complexity\n  PasswordGenerator = 2, // Sets minimum requirements/default type for generated passwords/passphrases\n  SingleOrg = 3, // Allows users to only be apart of one organization\n  RequireSso = 4, // Requires users to authenticate with SSO\n  PersonalOwnership = 5, // Disables personal vault ownership for adding/cloning items\n  DisableSend = 6, // Disables the ability to create and edit Bitwarden Sends\n  SendOptions = 7, // Sets restrictions or defaults for Bitwarden Sends\n  ResetPassword = 8, // Allows orgs to use reset password : also can enable auto-enrollment during invite flow\n  MaximumVaultTimeout = 9, // Sets the maximum allowed vault timeout\n  DisablePersonalVaultExport = 10, // Disable personal vault export\n  ActivateAutofill = 11, // Activates autofill with page load on the browser extension\n}\n","export enum ProviderUserStatusType {\n  Invited = 0,\n  Accepted = 1,\n  Confirmed = 2,\n  Revoked = -1, // Not used, compile-time support only\n}\n","export enum ProviderUserType {\n  ProviderAdmin = 0,\n  ServiceUser = 1,\n}\n","export enum ScimProviderType {\n  Default = 0,\n  AzureAd = 1,\n  Okta = 2,\n  OneLogin = 3,\n  JumpCloud = 4,\n  GoogleWorkspace = 5,\n  Rippling = 6,\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { OrganizationUserType } from \"@bitwarden/common/admin-console/enums\";\n\n@Pipe({\n  name: \"userType\",\n})\nexport class UserTypePipe implements PipeTransform {\n  constructor(private i18nService: I18nService) {}\n\n  transform(value?: OrganizationUserType): string {\n    if (value == null) {\n      return this.i18nService.t(\"unknown\");\n    }\n    switch (value) {\n      case OrganizationUserType.Owner:\n        return this.i18nService.t(\"owner\");\n      case OrganizationUserType.Admin:\n        return this.i18nService.t(\"admin\");\n      case OrganizationUserType.User:\n        return this.i18nService.t(\"user\");\n      case OrganizationUserType.Manager:\n        return this.i18nService.t(\"manager\");\n      case OrganizationUserType.Custom:\n        return this.i18nService.t(\"custom\");\n    }\n  }\n}\n","import { CommonModule, DatePipe } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\nimport { CalloutComponent } from \"./components/callout.component\";\nimport { ExportScopeCalloutComponent } from \"./components/export-scope-callout.component\";\nimport { BitwardenToastModule } from \"./components/toastr.component\";\nimport { A11yInvalidDirective } from \"./directives/a11y-invalid.directive\";\nimport { A11yTitleDirective } from \"./directives/a11y-title.directive\";\nimport { ApiActionDirective } from \"./directives/api-action.directive\";\nimport { AutofocusDirective } from \"./directives/autofocus.directive\";\nimport { BoxRowDirective } from \"./directives/box-row.directive\";\nimport { CopyClickDirective } from \"./directives/copy-click.directive\";\nimport { FallbackSrcDirective } from \"./directives/fallback-src.directive\";\nimport { InputStripSpacesDirective } from \"./directives/input-strip-spaces.directive\";\nimport { InputVerbatimDirective } from \"./directives/input-verbatim.directive\";\nimport { LaunchClickDirective } from \"./directives/launch-click.directive\";\nimport { NotPremiumDirective } from \"./directives/not-premium.directive\";\nimport { SelectCopyDirective } from \"./directives/select-copy.directive\";\nimport { StopClickDirective } from \"./directives/stop-click.directive\";\nimport { StopPropDirective } from \"./directives/stop-prop.directive\";\nimport { TrueFalseValueDirective } from \"./directives/true-false-value.directive\";\nimport { CreditCardNumberPipe } from \"./pipes/credit-card-number.pipe\";\nimport { EllipsisPipe } from \"./pipes/ellipsis.pipe\";\nimport { I18nPipe } from \"./pipes/i18n.pipe\";\nimport { SearchCiphersPipe } from \"./pipes/search-ciphers.pipe\";\nimport { SearchPipe } from \"./pipes/search.pipe\";\nimport { UserNamePipe } from \"./pipes/user-name.pipe\";\nimport { UserTypePipe } from \"./pipes/user-type.pipe\";\nimport { PasswordStrengthComponent } from \"./shared/components/password-strength/password-strength.component\";\nimport { IconComponent } from \"./vault/components/icon.component\";\n\n@NgModule({\n  imports: [\n    BitwardenToastModule.forRoot({\n      maxOpened: 5,\n      autoDismiss: true,\n      closeButton: true,\n    }),\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [\n    A11yInvalidDirective,\n    A11yTitleDirective,\n    ApiActionDirective,\n    AutofocusDirective,\n    BoxRowDirective,\n    CalloutComponent,\n    CreditCardNumberPipe,\n    EllipsisPipe,\n    ExportScopeCalloutComponent,\n    FallbackSrcDirective,\n    I18nPipe,\n    IconComponent,\n    InputStripSpacesDirective,\n    InputVerbatimDirective,\n    NotPremiumDirective,\n    SearchCiphersPipe,\n    SearchPipe,\n    SelectCopyDirective,\n    StopClickDirective,\n    StopPropDirective,\n    TrueFalseValueDirective,\n    CopyClickDirective,\n    LaunchClickDirective,\n    UserNamePipe,\n    PasswordStrengthComponent,\n    UserTypePipe,\n  ],\n  exports: [\n    A11yInvalidDirective,\n    A11yTitleDirective,\n    ApiActionDirective,\n    AutofocusDirective,\n    BitwardenToastModule,\n    BoxRowDirective,\n    CalloutComponent,\n    CreditCardNumberPipe,\n    EllipsisPipe,\n    ExportScopeCalloutComponent,\n    FallbackSrcDirective,\n    I18nPipe,\n    IconComponent,\n    InputStripSpacesDirective,\n    InputVerbatimDirective,\n    NotPremiumDirective,\n    SearchCiphersPipe,\n    SearchPipe,\n    SelectCopyDirective,\n    StopClickDirective,\n    StopPropDirective,\n    TrueFalseValueDirective,\n    CopyClickDirective,\n    LaunchClickDirective,\n    UserNamePipe,\n    PasswordStrengthComponent,\n    UserTypePipe,\n  ],\n  providers: [CreditCardNumberPipe, DatePipe, I18nPipe, SearchPipe, UserNamePipe, UserTypePipe],\n})\nexport class JslibModule {}\n","export enum AuthenticationStatus {\n  LoggedOut = 0,\n  Locked = 1,\n  Unlocked = 2,\n}\n","export enum ForceResetPasswordReason {\n  /**\n   * A password reset should not be forced.\n   */\n  None,\n\n  /**\n   * Occurs when an organization admin forces a user to reset their password.\n   */\n  AdminForcePasswordReset,\n\n  /**\n   * Occurs when a user logs in / unlocks their vault with a master password that does not meet an organization's\n   * master password policy that is enforced on login/unlock.\n   */\n  WeakMasterPassword,\n}\n","import { Observable } from \"rxjs\";\n\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\nimport { AuthRequestPushNotification } from \"../../models/response/notification.response\";\nimport { AuthenticationStatus } from \"../enums/authentication-status\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport {\n  UserApiLogInCredentials,\n  PasswordLogInCredentials,\n  SsoLogInCredentials,\n  PasswordlessLogInCredentials,\n} from \"../models/domain/log-in-credentials\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\n\nexport abstract class AuthService {\n  masterPasswordHash: string;\n  email: string;\n  accessCode: string;\n  authRequestId: string;\n\n  logIn: (\n    credentials:\n      | UserApiLogInCredentials\n      | PasswordLogInCredentials\n      | SsoLogInCredentials\n      | PasswordlessLogInCredentials\n  ) => Promise<AuthResult>;\n  logInTwoFactor: (\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ) => Promise<AuthResult>;\n  logOut: (callback: () => void) => void;\n  makePreloginKey: (masterPassword: string, email: string) => Promise<SymmetricCryptoKey>;\n  authingWithUserApiKey: () => boolean;\n  authingWithSso: () => boolean;\n  authingWithPassword: () => boolean;\n  authingWithPasswordless: () => boolean;\n  getAuthStatus: (userId?: string) => Promise<AuthenticationStatus>;\n  authResponsePushNotifiction: (notification: AuthRequestPushNotification) => Promise<any>;\n  passwordlessLogin: (\n    id: string,\n    key: string,\n    requestApproved: boolean\n  ) => Promise<AuthRequestResponse>;\n  getPushNotifcationObs$: () => Observable<any>;\n}\n","export abstract class MessagingService {\n  send: (subscriber: string, arg?: any) => void;\n}\n","import { Organization } from \"../../admin-console/models/domain/organization\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport abstract class KeyConnectorService {\n  getAndSetKey: (url?: string) => Promise<void>;\n  getManagingOrganization: () => Promise<Organization>;\n  getUsesKeyConnector: () => Promise<boolean>;\n  migrateUser: () => Promise<void>;\n  userNeedsMigration: () => Promise<boolean>;\n  convertNewSsoUserToKeyConnector: (\n    tokenResponse: IdentityTokenResponse,\n    orgId: string\n  ) => Promise<void>;\n  setUsesKeyConnector: (enabled: boolean) => Promise<void>;\n  setConvertAccountRequired: (status: boolean) => Promise<void>;\n  getConvertAccountRequired: () => Promise<boolean>;\n  removeConvertAccountRequired: () => Promise<void>;\n  clear: () => Promise<void>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { CollectionData } from \"../admin-console/models/data/collection.data\";\nimport { EncryptedOrganizationKeyData } from \"../admin-console/models/data/encrypted-organization-key.data\";\nimport { OrganizationData } from \"../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../admin-console/models/data/provider.data\";\nimport { Policy } from \"../admin-console/models/domain/policy\";\nimport { CollectionView } from \"../admin-console/models/view/collection.view\";\nimport { EnvironmentUrls } from \"../auth/models/domain/environment-urls\";\nimport { ForceResetPasswordReason } from \"../auth/models/domain/force-reset-password-reason\";\nimport { KdfConfig } from \"../auth/models/domain/kdf-config\";\nimport { BiometricKey } from \"../auth/types/biometric-key\";\nimport { KdfType, ThemeType, UriMatchType } from \"../enums\";\nimport { EventData } from \"../models/data/event.data\";\nimport { ServerConfigData } from \"../models/data/server-config.data\";\nimport { Account, AccountSettingsSettings } from \"../models/domain/account\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { StorageOptions } from \"../models/domain/storage-options\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { WindowState } from \"../models/domain/window-state\";\nimport { GeneratedPasswordHistory } from \"../tools/generator/password\";\nimport { SendData } from \"../tools/send/models/data/send.data\";\nimport { SendView } from \"../tools/send/models/view/send.view\";\nimport { CipherData } from \"../vault/models/data/cipher.data\";\nimport { FolderData } from \"../vault/models/data/folder.data\";\nimport { LocalData } from \"../vault/models/data/local.data\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\nimport { AddEditCipherInfo } from \"../vault/types/add-edit-cipher-info\";\n\nexport abstract class StateService<T extends Account = Account> {\n  accounts$: Observable<{ [userId: string]: T }>;\n  activeAccount$: Observable<string>;\n  activeAccountUnlocked$: Observable<boolean>;\n\n  addAccount: (account: T) => Promise<void>;\n  setActiveUser: (userId: string) => Promise<void>;\n  clean: (options?: StorageOptions) => Promise<void>;\n  init: () => Promise<void>;\n\n  getAccessToken: (options?: StorageOptions) => Promise<string>;\n  setAccessToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getAddEditCipherInfo: (options?: StorageOptions) => Promise<AddEditCipherInfo>;\n  setAddEditCipherInfo: (value: AddEditCipherInfo, options?: StorageOptions) => Promise<void>;\n  getAlwaysShowDock: (options?: StorageOptions) => Promise<boolean>;\n  setAlwaysShowDock: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getApiKeyClientId: (options?: StorageOptions) => Promise<string>;\n  setApiKeyClientId: (value: string, options?: StorageOptions) => Promise<void>;\n  getApiKeyClientSecret: (options?: StorageOptions) => Promise<string>;\n  setApiKeyClientSecret: (value: string, options?: StorageOptions) => Promise<void>;\n  getAutoConfirmFingerPrints: (options?: StorageOptions) => Promise<boolean>;\n  setAutoConfirmFingerprints: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getAutoFillOnPageLoadDefault: (options?: StorageOptions) => Promise<boolean>;\n  setAutoFillOnPageLoadDefault: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricAwaitingAcceptance: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricAwaitingAcceptance: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricFingerprintValidated: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricFingerprintValidated: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getBiometricText: (options?: StorageOptions) => Promise<string>;\n  setBiometricText: (value: string, options?: StorageOptions) => Promise<void>;\n  getBiometricUnlock: (options?: StorageOptions) => Promise<boolean>;\n  setBiometricUnlock: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getCanAccessPremium: (options?: StorageOptions) => Promise<boolean>;\n  getHasPremiumPersonally: (options?: StorageOptions) => Promise<boolean>;\n  setHasPremiumPersonally: (value: boolean, options?: StorageOptions) => Promise<void>;\n  setHasPremiumFromOrganization: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getHasPremiumFromOrganization: (options?: StorageOptions) => Promise<boolean>;\n  getClearClipboard: (options?: StorageOptions) => Promise<number>;\n  setClearClipboard: (value: number, options?: StorageOptions) => Promise<void>;\n  getCollapsedGroupings: (options?: StorageOptions) => Promise<string[]>;\n  setCollapsedGroupings: (value: string[], options?: StorageOptions) => Promise<void>;\n  getConvertAccountToKeyConnector: (options?: StorageOptions) => Promise<boolean>;\n  setConvertAccountToKeyConnector: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getCryptoMasterKey: (options?: StorageOptions) => Promise<SymmetricCryptoKey>;\n  setCryptoMasterKey: (value: SymmetricCryptoKey, options?: StorageOptions) => Promise<void>;\n  getCryptoMasterKeyAuto: (options?: StorageOptions) => Promise<string>;\n  setCryptoMasterKeyAuto: (value: string, options?: StorageOptions) => Promise<void>;\n  getCryptoMasterKeyB64: (options?: StorageOptions) => Promise<string>;\n  setCryptoMasterKeyB64: (value: string, options?: StorageOptions) => Promise<void>;\n  getCryptoMasterKeyBiometric: (options?: StorageOptions) => Promise<string>;\n  hasCryptoMasterKeyBiometric: (options?: StorageOptions) => Promise<boolean>;\n  setCryptoMasterKeyBiometric: (value: BiometricKey, options?: StorageOptions) => Promise<void>;\n  getDecryptedCiphers: (options?: StorageOptions) => Promise<CipherView[]>;\n  setDecryptedCiphers: (value: CipherView[], options?: StorageOptions) => Promise<void>;\n  getDecryptedCollections: (options?: StorageOptions) => Promise<CollectionView[]>;\n  setDecryptedCollections: (value: CollectionView[], options?: StorageOptions) => Promise<void>;\n  getDecryptedCryptoSymmetricKey: (options?: StorageOptions) => Promise<SymmetricCryptoKey>;\n  setDecryptedCryptoSymmetricKey: (\n    value: SymmetricCryptoKey,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDecryptedOrganizationKeys: (\n    options?: StorageOptions\n  ) => Promise<Map<string, SymmetricCryptoKey>>;\n  setDecryptedOrganizationKeys: (\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDecryptedPasswordGenerationHistory: (\n    options?: StorageOptions\n  ) => Promise<GeneratedPasswordHistory[]>;\n  setDecryptedPasswordGenerationHistory: (\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDecryptedPinProtected: (options?: StorageOptions) => Promise<EncString>;\n  setDecryptedPinProtected: (value: EncString, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this, use PolicyService\n   */\n  getDecryptedPolicies: (options?: StorageOptions) => Promise<Policy[]>;\n  /**\n   * @deprecated Do not call this, use PolicyService\n   */\n  setDecryptedPolicies: (value: Policy[], options?: StorageOptions) => Promise<void>;\n  getDecryptedPrivateKey: (options?: StorageOptions) => Promise<ArrayBuffer>;\n  setDecryptedPrivateKey: (value: ArrayBuffer, options?: StorageOptions) => Promise<void>;\n  getDecryptedProviderKeys: (options?: StorageOptions) => Promise<Map<string, SymmetricCryptoKey>>;\n  setDecryptedProviderKeys: (\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  getDecryptedSends: (options?: StorageOptions) => Promise<SendView[]>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  setDecryptedSends: (value: SendView[], options?: StorageOptions) => Promise<void>;\n  getDefaultUriMatch: (options?: StorageOptions) => Promise<UriMatchType>;\n  setDefaultUriMatch: (value: UriMatchType, options?: StorageOptions) => Promise<void>;\n  getDisableAddLoginNotification: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAddLoginNotification: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableAutoBiometricsPrompt: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAutoBiometricsPrompt: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableAutoTotpCopy: (options?: StorageOptions) => Promise<boolean>;\n  setDisableAutoTotpCopy: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableBadgeCounter: (options?: StorageOptions) => Promise<boolean>;\n  setDisableBadgeCounter: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableChangedPasswordNotification: (options?: StorageOptions) => Promise<boolean>;\n  setDisableChangedPasswordNotification: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getDisableContextMenuItem: (options?: StorageOptions) => Promise<boolean>;\n  setDisableContextMenuItem: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableFavicon: (options?: StorageOptions) => Promise<boolean>;\n  setDisableFavicon: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDisableGa: (options?: StorageOptions) => Promise<boolean>;\n  setDisableGa: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDismissedAutofillCallout: (options?: StorageOptions) => Promise<boolean>;\n  setDismissedAutofillCallout: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDontShowCardsCurrentTab: (options?: StorageOptions) => Promise<boolean>;\n  setDontShowCardsCurrentTab: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDontShowIdentitiesCurrentTab: (options?: StorageOptions) => Promise<boolean>;\n  setDontShowIdentitiesCurrentTab: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getDuckDuckGoSharedKey: (options?: StorageOptions) => Promise<string>;\n  setDuckDuckGoSharedKey: (value: string, options?: StorageOptions) => Promise<void>;\n  getEmail: (options?: StorageOptions) => Promise<string>;\n  setEmail: (value: string, options?: StorageOptions) => Promise<void>;\n  getEmailVerified: (options?: StorageOptions) => Promise<boolean>;\n  setEmailVerified: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableAlwaysOnTop: (options?: StorageOptions) => Promise<boolean>;\n  setEnableAlwaysOnTop: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableAutoFillOnPageLoad: (options?: StorageOptions) => Promise<boolean>;\n  setEnableAutoFillOnPageLoad: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableBrowserIntegration: (options?: StorageOptions) => Promise<boolean>;\n  setEnableBrowserIntegration: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableBrowserIntegrationFingerprint: (options?: StorageOptions) => Promise<boolean>;\n  setEnableBrowserIntegrationFingerprint: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEnableCloseToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableCloseToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableDuckDuckGoBrowserIntegration: (options?: StorageOptions) => Promise<boolean>;\n  setEnableDuckDuckGoBrowserIntegration: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEnableFullWidth: (options?: StorageOptions) => Promise<boolean>;\n  setEnableFullWidth: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableMinimizeToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableMinimizeToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableStartToTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableStartToTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEnableTray: (options?: StorageOptions) => Promise<boolean>;\n  setEnableTray: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getEncryptedCiphers: (options?: StorageOptions) => Promise<{ [id: string]: CipherData }>;\n  setEncryptedCiphers: (\n    value: { [id: string]: CipherData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedCollections: (options?: StorageOptions) => Promise<{ [id: string]: CollectionData }>;\n  setEncryptedCollections: (\n    value: { [id: string]: CollectionData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedCryptoSymmetricKey: (options?: StorageOptions) => Promise<string>;\n  setEncryptedCryptoSymmetricKey: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use FolderService\n   */\n  getEncryptedFolders: (options?: StorageOptions) => Promise<{ [id: string]: FolderData }>;\n  /**\n   * @deprecated Do not call this directly, use FolderService\n   */\n  setEncryptedFolders: (\n    value: { [id: string]: FolderData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedOrganizationKeys: (\n    options?: StorageOptions\n  ) => Promise<{ [orgId: string]: EncryptedOrganizationKeyData }>;\n  setEncryptedOrganizationKeys: (\n    value: { [orgId: string]: EncryptedOrganizationKeyData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedPasswordGenerationHistory: (\n    options?: StorageOptions\n  ) => Promise<GeneratedPasswordHistory[]>;\n  setEncryptedPasswordGenerationHistory: (\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedPinProtected: (options?: StorageOptions) => Promise<string>;\n  setEncryptedPinProtected: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use PolicyService\n   */\n  getEncryptedPolicies: (options?: StorageOptions) => Promise<{ [id: string]: PolicyData }>;\n  /**\n   * @deprecated Do not call this directly, use PolicyService\n   */\n  setEncryptedPolicies: (\n    value: { [id: string]: PolicyData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getEncryptedPrivateKey: (options?: StorageOptions) => Promise<string>;\n  setEncryptedPrivateKey: (value: string, options?: StorageOptions) => Promise<void>;\n  getEncryptedProviderKeys: (options?: StorageOptions) => Promise<any>;\n  setEncryptedProviderKeys: (value: any, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  getEncryptedSends: (options?: StorageOptions) => Promise<{ [id: string]: SendData }>;\n  /**\n   * @deprecated Do not call this directly, use SendService\n   */\n  setEncryptedSends: (value: { [id: string]: SendData }, options?: StorageOptions) => Promise<void>;\n  getEntityId: (options?: StorageOptions) => Promise<string>;\n  setEntityId: (value: string, options?: StorageOptions) => Promise<void>;\n  getEntityType: (options?: StorageOptions) => Promise<any>;\n  setEntityType: (value: string, options?: StorageOptions) => Promise<void>;\n  getEnvironmentUrls: (options?: StorageOptions) => Promise<EnvironmentUrls>;\n  setEnvironmentUrls: (value: EnvironmentUrls, options?: StorageOptions) => Promise<void>;\n  getEquivalentDomains: (options?: StorageOptions) => Promise<string[][]>;\n  setEquivalentDomains: (value: string, options?: StorageOptions) => Promise<void>;\n  getEventCollection: (options?: StorageOptions) => Promise<EventData[]>;\n  setEventCollection: (value: EventData[], options?: StorageOptions) => Promise<void>;\n  getEverBeenUnlocked: (options?: StorageOptions) => Promise<boolean>;\n  setEverBeenUnlocked: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getForcePasswordResetReason: (options?: StorageOptions) => Promise<ForceResetPasswordReason>;\n  setForcePasswordResetReason: (\n    value: ForceResetPasswordReason,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getInstalledVersion: (options?: StorageOptions) => Promise<string>;\n  setInstalledVersion: (value: string, options?: StorageOptions) => Promise<void>;\n  getIsAuthenticated: (options?: StorageOptions) => Promise<boolean>;\n  getKdfConfig: (options?: StorageOptions) => Promise<KdfConfig>;\n  setKdfConfig: (kdfConfig: KdfConfig, options?: StorageOptions) => Promise<void>;\n  getKdfType: (options?: StorageOptions) => Promise<KdfType>;\n  setKdfType: (value: KdfType, options?: StorageOptions) => Promise<void>;\n  getKeyHash: (options?: StorageOptions) => Promise<string>;\n  setKeyHash: (value: string, options?: StorageOptions) => Promise<void>;\n  getLastActive: (options?: StorageOptions) => Promise<number>;\n  setLastActive: (value: number, options?: StorageOptions) => Promise<void>;\n  getLastSync: (options?: StorageOptions) => Promise<string>;\n  setLastSync: (value: string, options?: StorageOptions) => Promise<void>;\n  getLocalData: (options?: StorageOptions) => Promise<{ [cipherId: string]: LocalData }>;\n  setLocalData: (\n    value: { [cipherId: string]: LocalData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getLocale: (options?: StorageOptions) => Promise<string>;\n  setLocale: (value: string, options?: StorageOptions) => Promise<void>;\n  getMainWindowSize: (options?: StorageOptions) => Promise<number>;\n  setMainWindowSize: (value: number, options?: StorageOptions) => Promise<void>;\n  getMinimizeOnCopyToClipboard: (options?: StorageOptions) => Promise<boolean>;\n  setMinimizeOnCopyToClipboard: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getNeverDomains: (options?: StorageOptions) => Promise<{ [id: string]: any }>;\n  setNeverDomains: (value: { [id: string]: any }, options?: StorageOptions) => Promise<void>;\n  getNoAutoPromptBiometricsText: (options?: StorageOptions) => Promise<string>;\n  setNoAutoPromptBiometricsText: (value: string, options?: StorageOptions) => Promise<void>;\n  getOpenAtLogin: (options?: StorageOptions) => Promise<boolean>;\n  setOpenAtLogin: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getOrganizationInvitation: (options?: StorageOptions) => Promise<any>;\n  setOrganizationInvitation: (value: any, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  getOrganizations: (options?: StorageOptions) => Promise<{ [id: string]: OrganizationData }>;\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  setOrganizations: (\n    value: { [id: string]: OrganizationData },\n    options?: StorageOptions\n  ) => Promise<void>;\n  getPasswordGenerationOptions: (options?: StorageOptions) => Promise<any>;\n  setPasswordGenerationOptions: (value: any, options?: StorageOptions) => Promise<void>;\n  getUsernameGenerationOptions: (options?: StorageOptions) => Promise<any>;\n  setUsernameGenerationOptions: (value: any, options?: StorageOptions) => Promise<void>;\n  getGeneratorOptions: (options?: StorageOptions) => Promise<any>;\n  setGeneratorOptions: (value: any, options?: StorageOptions) => Promise<void>;\n  getProtectedPin: (options?: StorageOptions) => Promise<string>;\n  setProtectedPin: (value: string, options?: StorageOptions) => Promise<void>;\n  getProviders: (options?: StorageOptions) => Promise<{ [id: string]: ProviderData }>;\n  setProviders: (value: { [id: string]: ProviderData }, options?: StorageOptions) => Promise<void>;\n  getPublicKey: (options?: StorageOptions) => Promise<ArrayBuffer>;\n  setPublicKey: (value: ArrayBuffer, options?: StorageOptions) => Promise<void>;\n  getRefreshToken: (options?: StorageOptions) => Promise<string>;\n  setRefreshToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getRememberedEmail: (options?: StorageOptions) => Promise<string>;\n  setRememberedEmail: (value: string, options?: StorageOptions) => Promise<void>;\n  getSecurityStamp: (options?: StorageOptions) => Promise<string>;\n  setSecurityStamp: (value: string, options?: StorageOptions) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use SettingsService\n   */\n  getSettings: (options?: StorageOptions) => Promise<AccountSettingsSettings>;\n  /**\n   * @deprecated Do not call this directly, use SettingsService\n   */\n  setSettings: (value: AccountSettingsSettings, options?: StorageOptions) => Promise<void>;\n  getSsoCodeVerifier: (options?: StorageOptions) => Promise<string>;\n  setSsoCodeVerifier: (value: string, options?: StorageOptions) => Promise<void>;\n  getSsoOrgIdentifier: (options?: StorageOptions) => Promise<string>;\n  setSsoOrganizationIdentifier: (value: string, options?: StorageOptions) => Promise<void>;\n  getSsoState: (options?: StorageOptions) => Promise<string>;\n  setSsoState: (value: string, options?: StorageOptions) => Promise<void>;\n  getTheme: (options?: StorageOptions) => Promise<ThemeType>;\n  setTheme: (value: ThemeType, options?: StorageOptions) => Promise<void>;\n  getTwoFactorToken: (options?: StorageOptions) => Promise<string>;\n  setTwoFactorToken: (value: string, options?: StorageOptions) => Promise<void>;\n  getUserId: (options?: StorageOptions) => Promise<string>;\n  getUsesKeyConnector: (options?: StorageOptions) => Promise<boolean>;\n  setUsesKeyConnector: (vaule: boolean, options?: StorageOptions) => Promise<void>;\n  getVaultTimeout: (options?: StorageOptions) => Promise<number>;\n  setVaultTimeout: (value: number, options?: StorageOptions) => Promise<void>;\n  getVaultTimeoutAction: (options?: StorageOptions) => Promise<string>;\n  setVaultTimeoutAction: (value: string, options?: StorageOptions) => Promise<void>;\n  getApproveLoginRequests: (options?: StorageOptions) => Promise<boolean>;\n  setApproveLoginRequests: (value: boolean, options?: StorageOptions) => Promise<void>;\n  getStateVersion: () => Promise<number>;\n  setStateVersion: (value: number) => Promise<void>;\n  getWindow: () => Promise<WindowState>;\n  setWindow: (value: WindowState) => Promise<void>;\n  /**\n   * @deprecated Do not call this directly, use ConfigService\n   */\n  getServerConfig: (options?: StorageOptions) => Promise<ServerConfigData>;\n  /**\n   * @deprecated Do not call this directly, use ConfigService\n   */\n  setServerConfig: (value: ServerConfigData, options?: StorageOptions) => Promise<void>;\n\n  getAvatarColor: (options?: StorageOptions) => Promise<string | null | undefined>;\n  setAvatarColor: (value: string, options?: StorageOptions) => Promise<void>;\n  getActivateAutoFillOnPageLoadFromPolicy: (\n    options?: StorageOptions\n  ) => Promise<boolean | undefined>;\n  setActivateAutoFillOnPageLoadFromPolicy: (\n    value: boolean,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getSMOnboardingTasks: (\n    options?: StorageOptions\n  ) => Promise<Record<string, Record<string, boolean>>>;\n  setSMOnboardingTasks: (\n    value: Record<string, Record<string, boolean>>,\n    options?: StorageOptions\n  ) => Promise<void>;\n}\n","import { Injectable } from \"@angular/core\";\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from \"@angular/router\";\n\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private messagingService: MessagingService,\n    private keyConnectorService: KeyConnectorService,\n    private stateService: StateService\n  ) {}\n\n  async canActivate(route: ActivatedRouteSnapshot, routerState: RouterStateSnapshot) {\n    const authStatus = await this.authService.getAuthStatus();\n\n    if (authStatus === AuthenticationStatus.LoggedOut) {\n      this.messagingService.send(\"authBlocked\", { url: routerState.url });\n      return false;\n    }\n\n    if (authStatus === AuthenticationStatus.Locked) {\n      if (routerState != null) {\n        this.messagingService.send(\"lockedUrl\", { url: routerState.url });\n      }\n      return this.router.createUrlTree([\"lock\"], { queryParams: { promptBiometric: true } });\n    }\n\n    if (\n      !routerState.url.includes(\"remove-password\") &&\n      (await this.keyConnectorService.getConvertAccountRequired())\n    ) {\n      return this.router.createUrlTree([\"/remove-password\"]);\n    }\n\n    if (\n      !routerState.url.includes(\"update-temp-password\") &&\n      (await this.stateService.getForcePasswordResetReason()) != ForceResetPasswordReason.None\n    ) {\n      return this.router.createUrlTree([\"/update-temp-password\"]);\n    }\n\n    return true;\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { CanActivate, Router } from \"@angular/router\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\n\n@Injectable()\nexport class LockGuard implements CanActivate {\n  protected homepage = \"vault\";\n  protected loginpage = \"login\";\n  constructor(private authService: AuthService, private router: Router) {}\n\n  async canActivate() {\n    const authStatus = await this.authService.getAuthStatus();\n\n    if (authStatus === AuthenticationStatus.Locked) {\n      return true;\n    }\n\n    const redirectUrl =\n      authStatus === AuthenticationStatus.LoggedOut ? this.loginpage : this.homepage;\n\n    return this.router.createUrlTree([redirectUrl]);\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { CanActivate, Router } from \"@angular/router\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\n\n@Injectable()\nexport class UnauthGuard implements CanActivate {\n  protected homepage = \"vault\";\n  constructor(private authService: AuthService, private router: Router) {}\n\n  async canActivate() {\n    const authStatus = await this.authService.getAuthStatus();\n\n    if (authStatus === AuthenticationStatus.LoggedOut) {\n      return true;\n    }\n\n    if (authStatus === AuthenticationStatus.Locked) {\n      return this.router.createUrlTree([\"lock\"]);\n    }\n\n    return this.router.createUrlTree([this.homepage]);\n  }\n}\n","import { ClientType, DeviceType } from \"../enums\";\n\ninterface ToastOptions {\n  timeout?: number;\n}\n\nexport abstract class PlatformUtilsService {\n  getDevice: () => DeviceType;\n  getDeviceString: () => string;\n  getClientType: () => ClientType;\n  isFirefox: () => boolean;\n  isChrome: () => boolean;\n  isEdge: () => boolean;\n  isOpera: () => boolean;\n  isVivaldi: () => boolean;\n  isSafari: () => boolean;\n  isMacAppStore: () => boolean;\n  isViewOpen: () => Promise<boolean>;\n  launchUri: (uri: string, options?: any) => void;\n  getApplicationVersion: () => Promise<string>;\n  getApplicationVersionNumber: () => Promise<string>;\n  supportsWebAuthn: (win: Window) => boolean;\n  supportsDuo: () => boolean;\n  showToast: (\n    type: \"error\" | \"success\" | \"warning\" | \"info\",\n    title: string,\n    text: string | string[],\n    options?: ToastOptions\n  ) => void;\n  showDialog: (\n    body: string,\n    title?: string,\n    confirmText?: string,\n    cancelText?: string,\n    type?: string,\n    bodyIsHtml?: boolean,\n    target?: string\n  ) => Promise<boolean>;\n  isDev: () => boolean;\n  isSelfHost: () => boolean;\n  copyToClipboard: (text: string, options?: any) => void | boolean;\n  readFromClipboard: (options?: any) => Promise<string>;\n  supportsBiometric: () => Promise<boolean>;\n  authenticateBiometric: () => Promise<boolean>;\n  supportsSecureStorage: () => boolean;\n  getAutofillKeyboardShortcut: () => Promise<string>;\n}\n","import { Observable } from \"rxjs\";\n\nexport type Urls = {\n  base?: string;\n  webVault?: string;\n  api?: string;\n  identity?: string;\n  icons?: string;\n  notifications?: string;\n  events?: string;\n  keyConnector?: string;\n  scim?: string;\n};\n\nexport type PayPalConfig = {\n  businessId?: string;\n  buttonAction?: string;\n};\n\nexport abstract class EnvironmentService {\n  urls: Observable<Urls>;\n\n  hasBaseUrl: () => boolean;\n  getNotificationsUrl: () => string;\n  getWebVaultUrl: () => string;\n  getSendUrl: () => string;\n  getIconsUrl: () => string;\n  getApiUrl: () => string;\n  getIdentityUrl: () => string;\n  getEventsUrl: () => string;\n  getKeyConnectorUrl: () => string;\n  getScimUrl: () => string;\n  setUrlsFromStorage: () => Promise<void>;\n  setUrls: (urls: Urls) => Promise<Urls>;\n  getUrls: () => Urls;\n  isCloud: () => boolean;\n  /**\n   * @remarks For desktop and browser use only.\n   * For web, use PlatformUtilsService.isSelfHost()\n   */\n  isSelfHosted: () => boolean;\n}\n","import { Directive, EventEmitter, Output } from \"@angular/core\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\n@Directive()\nexport class EnvironmentComponent {\n  @Output() onSaved = new EventEmitter();\n\n  iconsUrl: string;\n  identityUrl: string;\n  apiUrl: string;\n  webVaultUrl: string;\n  notificationsUrl: string;\n  baseUrl: string;\n  showCustom = false;\n\n  constructor(\n    protected platformUtilsService: PlatformUtilsService,\n    protected environmentService: EnvironmentService,\n    protected i18nService: I18nService\n  ) {\n    const urls = this.environmentService.getUrls();\n\n    this.baseUrl = urls.base || \"\";\n    this.webVaultUrl = urls.webVault || \"\";\n    this.apiUrl = urls.api || \"\";\n    this.identityUrl = urls.identity || \"\";\n    this.iconsUrl = urls.icons || \"\";\n    this.notificationsUrl = urls.notifications || \"\";\n  }\n\n  async submit() {\n    const resUrls = await this.environmentService.setUrls({\n      base: this.baseUrl,\n      api: this.apiUrl,\n      identity: this.identityUrl,\n      webVault: this.webVaultUrl,\n      icons: this.iconsUrl,\n      notifications: this.notificationsUrl,\n    });\n\n    // re-set urls since service can change them, ex: prefixing https://\n    this.baseUrl = resUrls.base;\n    this.apiUrl = resUrls.api;\n    this.identityUrl = resUrls.identity;\n    this.webVaultUrl = resUrls.webVault;\n    this.iconsUrl = resUrls.icons;\n    this.notificationsUrl = resUrls.notifications;\n\n    this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"environmentSaved\"));\n    this.saved();\n  }\n\n  toggleCustom() {\n    this.showCustom = !this.showCustom;\n  }\n\n  protected saved() {\n    this.onSaved.emit();\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nexport class EnvironmentUrls {\n  base: string = null;\n  api: string = null;\n  identity: string = null;\n  icons: string = null;\n  notifications: string = null;\n  events: string = null;\n  webVault: string = null;\n  keyConnector: string = null;\n\n  static fromJSON(obj: Jsonify<EnvironmentUrls>): EnvironmentUrls {\n    return Object.assign(new EnvironmentUrls(), obj);\n  }\n}\n","import { concatMap, Observable, Subject } from \"rxjs\";\n\nimport {\n  EnvironmentService as EnvironmentServiceAbstraction,\n  Urls,\n} from \"../abstractions/environment.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { EnvironmentUrls } from \"../auth/models/domain/environment-urls\";\n\nexport class EnvironmentService implements EnvironmentServiceAbstraction {\n  private readonly urlsSubject = new Subject<Urls>();\n  urls: Observable<Urls> = this.urlsSubject;\n\n  protected baseUrl: string;\n  protected webVaultUrl: string;\n  protected apiUrl: string;\n  protected identityUrl: string;\n  protected iconsUrl: string;\n  protected notificationsUrl: string;\n  protected eventsUrl: string;\n  private keyConnectorUrl: string;\n  private scimUrl: string = null;\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccount$\n      .pipe(\n        concatMap(async () => {\n          await this.setUrlsFromStorage();\n        })\n      )\n      .subscribe();\n  }\n\n  hasBaseUrl() {\n    return this.baseUrl != null;\n  }\n\n  getNotificationsUrl() {\n    if (this.notificationsUrl != null) {\n      return this.notificationsUrl;\n    }\n\n    if (this.baseUrl != null) {\n      return this.baseUrl + \"/notifications\";\n    }\n\n    return \"https://notifications.bitwarden.com\";\n  }\n\n  getWebVaultUrl() {\n    if (this.webVaultUrl != null) {\n      return this.webVaultUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl;\n    }\n    return \"https://vault.bitwarden.com\";\n  }\n\n  getSendUrl() {\n    return this.getWebVaultUrl() === \"https://vault.bitwarden.com\"\n      ? \"https://send.bitwarden.com/#\"\n      : this.getWebVaultUrl() + \"/#/send/\";\n  }\n\n  getIconsUrl() {\n    if (this.iconsUrl != null) {\n      return this.iconsUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/icons\";\n    }\n\n    return \"https://icons.bitwarden.net\";\n  }\n\n  getApiUrl() {\n    if (this.apiUrl != null) {\n      return this.apiUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/api\";\n    }\n\n    return \"https://api.bitwarden.com\";\n  }\n\n  getIdentityUrl() {\n    if (this.identityUrl != null) {\n      return this.identityUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/identity\";\n    }\n\n    return \"https://identity.bitwarden.com\";\n  }\n\n  getEventsUrl() {\n    if (this.eventsUrl != null) {\n      return this.eventsUrl;\n    }\n\n    if (this.baseUrl) {\n      return this.baseUrl + \"/events\";\n    }\n\n    return \"https://events.bitwarden.com\";\n  }\n\n  getKeyConnectorUrl() {\n    return this.keyConnectorUrl;\n  }\n\n  getScimUrl() {\n    if (this.scimUrl != null) {\n      return this.scimUrl + \"/v2\";\n    }\n\n    return this.getWebVaultUrl() === \"https://vault.bitwarden.com\"\n      ? \"https://scim.bitwarden.com/v2\"\n      : this.getWebVaultUrl() + \"/scim/v2\";\n  }\n\n  async setUrlsFromStorage(): Promise<void> {\n    const urls: any = await this.stateService.getEnvironmentUrls();\n    const envUrls = new EnvironmentUrls();\n\n    this.baseUrl = envUrls.base = urls.base;\n    this.webVaultUrl = urls.webVault;\n    this.apiUrl = envUrls.api = urls.api;\n    this.identityUrl = envUrls.identity = urls.identity;\n    this.iconsUrl = urls.icons;\n    this.notificationsUrl = urls.notifications;\n    this.eventsUrl = envUrls.events = urls.events;\n    this.keyConnectorUrl = urls.keyConnector;\n    // scimUrl is not saved to storage\n  }\n\n  async setUrls(urls: Urls): Promise<Urls> {\n    urls.base = this.formatUrl(urls.base);\n    urls.webVault = this.formatUrl(urls.webVault);\n    urls.api = this.formatUrl(urls.api);\n    urls.identity = this.formatUrl(urls.identity);\n    urls.icons = this.formatUrl(urls.icons);\n    urls.notifications = this.formatUrl(urls.notifications);\n    urls.events = this.formatUrl(urls.events);\n    urls.keyConnector = this.formatUrl(urls.keyConnector);\n\n    // scimUrl cannot be cleared\n    urls.scim = this.formatUrl(urls.scim) ?? this.scimUrl;\n\n    await this.stateService.setEnvironmentUrls({\n      base: urls.base,\n      api: urls.api,\n      identity: urls.identity,\n      webVault: urls.webVault,\n      icons: urls.icons,\n      notifications: urls.notifications,\n      events: urls.events,\n      keyConnector: urls.keyConnector,\n      // scimUrl is not saved to storage\n    });\n\n    this.baseUrl = urls.base;\n    this.webVaultUrl = urls.webVault;\n    this.apiUrl = urls.api;\n    this.identityUrl = urls.identity;\n    this.iconsUrl = urls.icons;\n    this.notificationsUrl = urls.notifications;\n    this.eventsUrl = urls.events;\n    this.keyConnectorUrl = urls.keyConnector;\n    this.scimUrl = urls.scim;\n\n    this.urlsSubject.next(urls);\n\n    return urls;\n  }\n\n  getUrls() {\n    return {\n      base: this.baseUrl,\n      webVault: this.webVaultUrl,\n      api: this.apiUrl,\n      identity: this.identityUrl,\n      icons: this.iconsUrl,\n      notifications: this.notificationsUrl,\n      events: this.eventsUrl,\n      keyConnector: this.keyConnectorUrl,\n      scim: this.scimUrl,\n    };\n  }\n\n  private formatUrl(url: string): string {\n    if (url == null || url === \"\") {\n      return null;\n    }\n\n    url = url.replace(/\\/+$/g, \"\");\n    if (!url.startsWith(\"http://\") && !url.startsWith(\"https://\")) {\n      url = \"https://\" + url;\n    }\n\n    return url.trim();\n  }\n\n  isCloud(): boolean {\n    return [\"https://api.bitwarden.com\", \"https://vault.bitwarden.com/api\"].includes(\n      this.getApiUrl()\n    );\n  }\n\n  isSelfHosted(): boolean {\n    return ![\n      \"http://vault.bitwarden.com\",\n      \"https://vault.bitwarden.com\",\n      \"http://vault.qa.bitwarden.pw\",\n      \"https://vault.qa.bitwarden.pw\",\n    ].includes(this.getWebVaultUrl());\n  }\n}\n","// required to avoid linting errors when there are no flags\n/* eslint-disable @typescript-eslint/ban-types */\nexport type SharedFlags = {\n  multithreadDecryption: boolean;\n  showPasswordless?: boolean;\n};\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable @typescript-eslint/ban-types */\nexport type SharedDevFlags = {};\n\nfunction getFlags<T>(envFlags: string | T): T {\n  if (typeof envFlags === \"string\") {\n    return JSON.parse(envFlags) as T;\n  } else {\n    return envFlags as T;\n  }\n}\n\n/**\n * Gets the value of a feature flag from environment.\n * All flags default to \"on\" (true).\n * Only use for shared code in `libs`, otherwise use the client-specific function.\n * @param flag The name of the feature flag to check\n * @returns The value of the flag\n */\nexport function flagEnabled<Flags extends SharedFlags>(flag: keyof Flags): boolean {\n  const flags = getFlags<Flags>(process.env.FLAGS);\n  return flags[flag] == null || !!flags[flag];\n}\n\n/**\n * Gets the value of a dev flag from environment.\n * Will always return false unless in development.\n * Only use for shared code in `libs`, otherwise use the client-specific function.\n * @param flag The name of the dev flag to check\n * @returns The value of the flag\n */\nexport function devFlagEnabled<DevFlags extends SharedDevFlags>(flag: keyof DevFlags): boolean {\n  if (process.env.ENV !== \"development\") {\n    return false;\n  }\n\n  const devFlags = getFlags<DevFlags>(process.env.DEV_FLAGS);\n  return devFlags[flag] == null || !!devFlags[flag];\n}\n\n/**\n * Gets the value of a dev flag from environment.\n * Will always return false unless in development.\n * @param flag The name of the dev flag to check\n * @returns The value of the flag\n * @throws Error if the flag is not enabled\n */\nexport function devFlagValue<DevFlags extends SharedDevFlags>(\n  flag: keyof DevFlags\n): DevFlags[keyof DevFlags] {\n  if (!devFlagEnabled(flag)) {\n    throw new Error(`This method should not be called, it is protected by a disabled dev flag.`);\n  }\n\n  const devFlags = getFlags<DevFlags>(process.env.DEV_FLAGS);\n  return devFlags[flag];\n}\n","import {\n  flagEnabled as baseFlagEnabled,\n  devFlagEnabled as baseDevFlagEnabled,\n  devFlagValue as baseDevFlagValue,\n  SharedFlags,\n  SharedDevFlags,\n} from \"@bitwarden/common/misc/flags\";\n\nimport { GroupPolicyEnvironment } from \"./admin-console/types/group-policy-environment\";\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable-next-line @typescript-eslint/ban-types */\nexport type Flags = {} & SharedFlags;\n\n// required to avoid linting errors when there are no flags\n/* eslint-disable-next-line @typescript-eslint/ban-types */\nexport type DevFlags = {\n  storeSessionDecrypted?: boolean;\n  managedEnvironment?: GroupPolicyEnvironment;\n} & SharedDevFlags;\n\nexport function flagEnabled(flag: keyof Flags): boolean {\n  return baseFlagEnabled<Flags>(flag);\n}\n\nexport function devFlagEnabled(flag: keyof DevFlags) {\n  return baseDevFlagEnabled<DevFlags>(flag);\n}\n\nexport function devFlagValue(flag: keyof DevFlags) {\n  return baseDevFlagValue(flag);\n}\n","export enum ClientType {\n  Web = \"web\",\n  Browser = \"browser\",\n  Desktop = \"desktop\",\n  Mobile = \"mobile\",\n  Cli = \"cli\",\n  DirectoryConnector = \"connector\",\n}\n","export enum DeviceType {\n  Android = 0,\n  iOS = 1,\n  ChromeExtension = 2,\n  FirefoxExtension = 3,\n  OperaExtension = 4,\n  EdgeExtension = 5,\n  WindowsDesktop = 6,\n  MacOsDesktop = 7,\n  LinuxDesktop = 8,\n  ChromeBrowser = 9,\n  FirefoxBrowser = 10,\n  OperaBrowser = 11,\n  EdgeBrowser = 12,\n  IEBrowser = 13,\n  UnknownBrowser = 14,\n  AndroidAmazon = 15,\n  UWP = 16,\n  SafariBrowser = 17,\n  VivaldiBrowser = 18,\n  VivaldiExtension = 19,\n  SafariExtension = 20,\n  SDK = 21,\n  Server = 22,\n}\n","export enum EncryptedExportType {\n  AccountEncrypted = 0,\n  FileEncrypted = 1,\n}\n","export enum EncryptionType {\n  AesCbc256_B64 = 0,\n  AesCbc128_HmacSha256_B64 = 1,\n  AesCbc256_HmacSha256_B64 = 2,\n  Rsa2048_OaepSha256_B64 = 3,\n  Rsa2048_OaepSha1_B64 = 4,\n  Rsa2048_OaepSha256_HmacSha256_B64 = 5,\n  Rsa2048_OaepSha1_HmacSha256_B64 = 6,\n}\n\n/** The expected number of parts to a serialized EncString of the given encryption type.\n * For example, an EncString of type AesCbc256_B64 will have 2 parts, and an EncString of type\n * AesCbc128_HmacSha256_B64 will have 3 parts.\n *\n * Example of annotated serialized EncStrings:\n * 0.iv|data\n * 1.iv|data|mac\n * 2.iv|data|mac\n * 3.data\n * 4.data\n *\n * @see EncString\n * @see EncryptionType\n * @see EncString.parseEncryptedString\n */\nexport const EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE = {\n  [EncryptionType.AesCbc256_B64]: 2,\n  [EncryptionType.AesCbc128_HmacSha256_B64]: 3,\n  [EncryptionType.AesCbc256_HmacSha256_B64]: 3,\n  [EncryptionType.Rsa2048_OaepSha256_B64]: 1,\n  [EncryptionType.Rsa2048_OaepSha1_B64]: 1,\n  [EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64]: 2,\n  [EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64]: 2,\n};\n","import { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { EnvironmentService } from \"@bitwarden/common/services/environment.service\";\n\nimport { GroupPolicyEnvironment } from \"../admin-console/types/group-policy-environment\";\nimport { devFlagEnabled, devFlagValue } from \"../flags\";\n\nexport class BrowserEnvironmentService extends EnvironmentService {\n  constructor(stateService: StateService, private logService: LogService) {\n    super(stateService);\n  }\n\n  async hasManagedEnvironment(): Promise<boolean> {\n    try {\n      return (await this.getManagedEnvironment()) != null;\n    } catch (e) {\n      this.logService.error(e);\n      return false;\n    }\n  }\n\n  async settingsHaveChanged() {\n    if (!(await this.hasManagedEnvironment())) {\n      return false;\n    }\n\n    const env = await this.getManagedEnvironment();\n\n    return (\n      env.base != this.baseUrl ||\n      env.webVault != this.webVaultUrl ||\n      env.api != this.webVaultUrl ||\n      env.identity != this.identityUrl ||\n      env.icons != this.iconsUrl ||\n      env.notifications != this.notificationsUrl ||\n      env.events != this.eventsUrl\n    );\n  }\n\n  getManagedEnvironment(): Promise<GroupPolicyEnvironment> {\n    return devFlagEnabled(\"managedEnvironment\")\n      ? new Promise((resolve) => resolve(devFlagValue(\"managedEnvironment\")))\n      : new Promise((resolve, reject) => {\n          if (chrome.storage.managed == null) {\n            return resolve(null);\n          }\n\n          chrome.storage.managed.get(\"environment\", (result) => {\n            if (chrome.runtime.lastError) {\n              return reject(chrome.runtime.lastError);\n            }\n\n            resolve(result.environment);\n          });\n        });\n  }\n\n  async setUrlsToManagedEnvironment() {\n    const env = await this.getManagedEnvironment();\n    await this.setUrls({\n      base: env.base,\n      webVault: env.webVault,\n      api: env.api,\n      identity: env.identity,\n      icons: env.icons,\n      notifications: env.notifications,\n      events: env.events,\n    });\n  }\n}\n","import { Directive, ElementRef, HostListener, OnInit } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appBoxRow]\",\n})\nexport class BoxRowDirective implements OnInit {\n  el: HTMLElement = null;\n  formEls: Element[];\n\n  constructor(elRef: ElementRef) {\n    this.el = elRef.nativeElement;\n  }\n\n  ngOnInit(): void {\n    this.formEls = Array.from(\n      this.el.querySelectorAll('input:not([type=\"hidden\"]), select, textarea')\n    );\n    this.formEls.forEach((formEl) => {\n      formEl.addEventListener(\n        \"focus\",\n        () => {\n          this.el.classList.add(\"active\");\n        },\n        false\n      );\n\n      formEl.addEventListener(\n        \"blur\",\n        () => {\n          this.el.classList.remove(\"active\");\n        },\n        false\n      );\n    });\n  }\n\n  @HostListener(\"click\", [\"$event\"]) onClick(event: Event) {\n    const target = event.target as HTMLElement;\n    if (\n      target !== this.el &&\n      !target.classList.contains(\"progress\") &&\n      !target.classList.contains(\"progress-bar\")\n    ) {\n      return;\n    }\n\n    if (this.formEls.length > 0) {\n      const formEl = this.formEls[0] as HTMLElement;\n      if (formEl.tagName.toLowerCase() === \"input\") {\n        const inputEl = formEl as HTMLInputElement;\n        if (inputEl.type != null && inputEl.type.toLowerCase() === \"checkbox\") {\n          inputEl.click();\n          return;\n        }\n      }\n      formEl.focus();\n    }\n  }\n}\n","// Note: the enum key is used to describe the EventSystemUser in the UI. Be careful about changing it.\nexport enum EventSystemUser {\n  SCIM = 1,\n  DomainVerification = 2,\n}\n","// Increment by 100 for each new set of events\nexport enum EventType {\n  User_LoggedIn = 1000,\n  User_ChangedPassword = 1001,\n  User_Updated2fa = 1002,\n  User_Disabled2fa = 1003,\n  User_Recovered2fa = 1004,\n  User_FailedLogIn = 1005,\n  User_FailedLogIn2fa = 1006,\n  User_ClientExportedVault = 1007,\n  User_UpdatedTempPassword = 1008,\n  User_MigratedKeyToKeyConnector = 1009,\n\n  Cipher_Created = 1100,\n  Cipher_Updated = 1101,\n  Cipher_Deleted = 1102,\n  Cipher_AttachmentCreated = 1103,\n  Cipher_AttachmentDeleted = 1104,\n  Cipher_Shared = 1105,\n  Cipher_UpdatedCollections = 1106,\n  Cipher_ClientViewed = 1107,\n  Cipher_ClientToggledPasswordVisible = 1108,\n  Cipher_ClientToggledHiddenFieldVisible = 1109,\n  Cipher_ClientToggledCardCodeVisible = 1110,\n  Cipher_ClientCopiedPassword = 1111,\n  Cipher_ClientCopiedHiddenField = 1112,\n  Cipher_ClientCopiedCardCode = 1113,\n  Cipher_ClientAutofilled = 1114,\n  Cipher_SoftDeleted = 1115,\n  Cipher_Restored = 1116,\n  Cipher_ClientToggledCardNumberVisible = 1117,\n\n  Collection_Created = 1300,\n  Collection_Updated = 1301,\n  Collection_Deleted = 1302,\n\n  Group_Created = 1400,\n  Group_Updated = 1401,\n  Group_Deleted = 1402,\n\n  OrganizationUser_Invited = 1500,\n  OrganizationUser_Confirmed = 1501,\n  OrganizationUser_Updated = 1502,\n  OrganizationUser_Removed = 1503,\n  OrganizationUser_UpdatedGroups = 1504,\n  OrganizationUser_UnlinkedSso = 1505,\n  OrganizationUser_ResetPassword_Enroll = 1506,\n  OrganizationUser_ResetPassword_Withdraw = 1507,\n  OrganizationUser_AdminResetPassword = 1508,\n  OrganizationUser_ResetSsoLink = 1509,\n  OrganizationUser_FirstSsoLogin = 1510,\n  OrganizationUser_Revoked = 1511,\n  OrganizationUser_Restored = 1512,\n\n  Organization_Updated = 1600,\n  Organization_PurgedVault = 1601,\n  Organization_ClientExportedVault = 1602,\n  Organization_VaultAccessed = 1603,\n  Organization_EnabledSso = 1604,\n  Organization_DisabledSso = 1605,\n  Organization_EnabledKeyConnector = 1606,\n  Organization_DisabledKeyConnector = 1607,\n  Organization_SponsorshipsSynced = 1608,\n\n  Policy_Updated = 1700,\n\n  ProviderUser_Invited = 1800,\n  ProviderUser_Confirmed = 1801,\n  ProviderUser_Updated = 1802,\n  ProviderUser_Removed = 1803,\n\n  ProviderOrganization_Created = 1900,\n  ProviderOrganization_Added = 1901,\n  ProviderOrganization_Removed = 1902,\n  ProviderOrganization_VaultAccessed = 1903,\n\n  OrganizationDomain_Added = 2000,\n  OrganizationDomain_Removed = 2001,\n  OrganizationDomain_Verified = 2002,\n  OrganizationDomain_NotVerified = 2003,\n\n  Secret_Retrieved = 2100,\n}\n","export enum FieldType {\n  Text = 0,\n  Hidden = 1,\n  Boolean = 2,\n  Linked = 3,\n}\n","export enum FileUploadType {\n  Direct = 0,\n  Azure = 1,\n}\n","export enum HashPurpose {\n  ServerAuthorization = 1,\n  LocalAuthorization = 2,\n}\n","export enum HtmlStorageLocation {\n  Local = \"local\",\n  Memory = \"memory\",\n  Session = \"session\",\n}\n","/**\n * Hypertext Transfer Protocol (HTTP) response status codes.\n *\n * @see {@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes}\n * src: https://gist.github.com/RWOverdijk/6cef816cfdf5722228e01cc05fd4b094\n */\nexport enum HttpStatusCode {\n  /**\n   * The server has received the request headers and the client should proceed to send the request body\n   * (in the case of a request for which a body needs to be sent; for example, a POST request).\n   * Sending a large request body to a server after a request has been rejected for inappropriate headers would be inefficient.\n   * To have a server check the request's headers, a client must send Expect: 100-continue as a header in its initial request\n   * and receive a 100 Continue status code in response before sending the body. The response 417 Expectation Failed indicates the request should not be continued.\n   */\n  Continue = 100,\n\n  /**\n   * The requester has asked the server to switch protocols and the server has agreed to do so.\n   */\n  SwitchingProtocols = 101,\n\n  /**\n   * A WebDAV request may contain many sub-requests involving file operations, requiring a long time to complete the request.\n   * This code indicates that the server has received and is processing the request, but no response is available yet.\n   * This prevents the client from timing out and assuming the request was lost.\n   */\n  Processing = 102,\n\n  // **********************************************************************************************************\n  //#region 200s - SUCCESS\n  // **********************************************************************************************************\n\n  /**\n   * Standard response for successful HTTP requests.\n   * The actual response will depend on the request method used.\n   * In a GET request, the response will contain an entity corresponding to the requested resource.\n   * In a POST request, the response will contain an entity describing or containing the result of the action.\n   */\n  Ok = 200,\n\n  /**\n   * The request has been fulfilled, resulting in the creation of a new resource.\n   */\n  Created = 201,\n\n  /**\n   * The request has been accepted for processing, but the processing has not been completed.\n   * The request might or might not be eventually acted upon, and may be disallowed when processing occurs.\n   */\n  Accepted = 202,\n\n  /**\n   * SINCE HTTP/1.1\n   * The server is a transforming proxy that received a 200 OK from its origin,\n   * but is returning a modified version of the origin's response.\n   */\n  NonAuthoritativeInformation = 203,\n\n  /**\n   * The server successfully processed the request and is not returning any content.\n   */\n  NoContent = 204,\n\n  /**\n   * The server successfully processed the request, but is not returning any content.\n   * Unlike a 204 response, this response requires that the requester reset the document view.\n   */\n  ResetContent = 205,\n\n  /**\n   * The server is delivering only part of the resource (byte serving) due to a range header sent by the client.\n   * The range header is used by HTTP clients to enable resuming of interrupted downloads,\n   * or split a download into multiple simultaneous streams.\n   */\n  PartialContent = 206,\n\n  /**\n   * The message body that follows is an XML message and can contain a number of separate response codes,\n   * depending on how many sub-requests were made.\n   */\n  MultiStatus = 207,\n\n  /**\n   * The members of a DAV binding have already been enumerated in a preceding part of the (multistatus) response,\n   * and are not being included again.\n   */\n  AlreadyReported = 208,\n\n  /**\n   * The server has fulfilled a request for the resource,\n   * and the response is a representation of the result of one or more instance-manipulations applied to the current instance.\n   */\n  ImUsed = 226,\n\n  // #endregion\n\n  // **********************************************************************************************************\n  //#region 300s - Redirections\n  // **********************************************************************************************************\n\n  /**\n   * Indicates multiple options for the resource from which the client may choose (via agent-driven content negotiation).\n   * For example, this code could be used to present multiple video format options,\n   * to list files with different filename extensions, or to suggest word-sense disambiguation.\n   */\n  MultipleChoices = 300,\n\n  /**\n   * This and all future requests should be directed to the given URI.\n   */\n  MovedPermanently = 301,\n\n  /**\n   * This is an example of industry practice contradicting the standard.\n   * The HTTP/1.0 specification (RFC 1945) required the client to perform a temporary redirect\n   * (the original describing phrase was \"Moved Temporarily\"), but popular browsers implemented 302\n   * with the functionality of a 303 See Other. Therefore, HTTP/1.1 added status codes 303 and 307\n   * to distinguish between the two behaviours. However, some Web applications and frameworks\n   * use the 302 status code as if it were the 303.\n   */\n  Found = 302,\n\n  /**\n   * SINCE HTTP/1.1\n   * The response to the request can be found under another URI using a GET method.\n   * When received in response to a POST (or PUT/DELETE), the client should presume that\n   * the server has received the data and should issue a redirect with a separate GET message.\n   */\n  SeeOther = 303,\n\n  /**\n   * Indicates that the resource has not been modified since the version specified by the request headers If-Modified-Since or If-None-Match.\n   * In such case, there is no need to retransmit the resource since the client still has a previously-downloaded copy.\n   */\n  NotModified = 304,\n\n  /**\n   * SINCE HTTP/1.1\n   * The requested resource is available only through a proxy, the address for which is provided in the response.\n   * Many HTTP clients (such as Mozilla and Internet Explorer) do not correctly handle responses with this status code, primarily for security reasons.\n   */\n  UseProxy = 305,\n\n  /**\n   * No longer used. Originally meant \"Subsequent requests should use the specified proxy.\"\n   */\n  SwitchProxy = 306,\n\n  /**\n   * SINCE HTTP/1.1\n   * In this case, the request should be repeated with another URI; however, future requests should still use the original URI.\n   * In contrast to how 302 was historically implemented, the request method is not allowed to be changed when reissuing the original request.\n   * For example, a POST request should be repeated using another POST request.\n   */\n  TemporaryRedirect = 307,\n\n  /**\n   * The request and all future requests should be repeated using another URI.\n   * 307 and 308 parallel the behaviors of 302 and 301, but do not allow the HTTP method to change.\n   * So, for example, submitting a form to a permanently redirected resource may continue smoothly.\n   */\n  PermanentRedirect = 308,\n\n  // #endregion\n\n  // **********************************************************************************************************\n  // #region - 400s - Client / User messed up\n  // **********************************************************************************************************\n\n  /**\n   * The server cannot or will not process the request due to an apparent client error\n   * (e.g., malformed request syntax, too large size, invalid request message framing, or deceptive request routing).\n   */\n  BadRequest = 400,\n\n  /**\n   * Similar to 403 Forbidden, but specifically for use when authentication is required and has failed or has not yet\n   * been provided. The response must include a WWW-Authenticate header field containing a challenge applicable to the\n   * requested resource. See Basic access authentication and Digest access authentication. 401 semantically means\n   * \"unauthenticated\",i.e. the user does not have the necessary credentials.\n   */\n  Unauthorized = 401,\n\n  /**\n   * Reserved for future use. The original intention was that this code might be used as part of some form of digital\n   * cash or micro payment scheme, but that has not happened, and this code is not usually used.\n   * Google Developers API uses this status if a particular developer has exceeded the daily limit on requests.\n   */\n  PaymentRequired = 402,\n\n  /**\n   * The request was valid, but the server is refusing action.\n   * The user might not have the necessary permissions for a resource.\n   */\n  Forbidden = 403,\n\n  /**\n   * The requested resource could not be found but may be available in the future.\n   * Subsequent requests by the client are permissible.\n   */\n  NotFound = 404,\n\n  /**\n   * A request method is not supported for the requested resource;\n   * for example, a GET request on a form that requires data to be presented via POST, or a PUT request on a read-only resource.\n   */\n  MethodNotAllowed = 405,\n\n  /**\n   * The requested resource is capable of generating only content not acceptable according to the Accept headers sent in the request.\n   */\n  NotAcceptable = 406,\n\n  /**\n   * The client must first authenticate itself with the proxy.\n   */\n  ProxyAuthenticationRequired = 407,\n\n  /**\n   * The server timed out waiting for the request.\n   * According to HTTP specifications:\n   * \"The client did not produce a request within the time that the server was prepared to wait. The client MAY repeat the request without modifications at any later time.\"\n   */\n  RequestTimeout = 408,\n\n  /**\n   * Indicates that the request could not be processed because of conflict in the request,\n   * such as an edit conflict between multiple simultaneous updates.\n   */\n  Conflict = 409,\n\n  /**\n   * Indicates that the resource requested is no longer available and will not be available again.\n   * This should be used when a resource has been intentionally removed and the resource should be purged.\n   * Upon receiving a 410 status code, the client should not request the resource in the future.\n   * Clients such as search engines should remove the resource from their indices.\n   * Most use cases do not require clients and search engines to purge the resource, and a \"404 Not Found\" may be used instead.\n   */\n  Gone = 410,\n\n  /**\n   * The request did not specify the length of its content, which is required by the requested resource.\n   */\n  LengthRequired = 411,\n\n  /**\n   * The server does not meet one of the preconditions that the requester put on the request.\n   */\n  PreconditionFailed = 412,\n\n  /**\n   * The request is larger than the server is willing or able to process. Previously called \"Request Entity Too Large\".\n   */\n  PayloadTooLarge = 413,\n\n  /**\n   * The URI provided was too long for the server to process. Often the result of too much data being encoded as a query-string of a GET request,\n   * in which case it should be converted to a POST request.\n   * Called \"Request-URI Too Long\" previously.\n   */\n  UriTooLong = 414,\n\n  /**\n   * The request entity has a media type which the server or resource does not support.\n   * For example, the client uploads an image as image/svg+xml, but the server requires that images use a different format.\n   */\n  UnsupportedMediaType = 415,\n\n  /**\n   * The client has asked for a portion of the file (byte serving), but the server cannot supply that portion.\n   * For example, if the client asked for a part of the file that lies beyond the end of the file.\n   * Called \"Requested Range Not Satisfiable\" previously.\n   */\n  RangeNotSatisfiable = 416,\n\n  /**\n   * The server cannot meet the requirements of the Expect request-header field.\n   */\n  ExpectationFailed = 417,\n\n  /**\n   * This code was defined in 1998 as one of the traditional IETF April Fools' jokes, in RFC 2324, Hyper Text Coffee Pot Control Protocol,\n   * and is not expected to be implemented by actual HTTP servers. The RFC specifies this code should be returned by\n   * teapots requested to brew coffee. This HTTP status is used as an Easter egg in some websites, including Google.com.\n   */\n  IAmATeapot = 418,\n\n  /**\n   * The request was directed at a server that is not able to produce a response (for example because a connection reuse).\n   */\n  MisdirectedRequest = 421,\n\n  /**\n   * The request was well-formed but was unable to be followed due to semantic errors.\n   */\n  UnprocessableEntity = 422,\n\n  /**\n   * The resource that is being accessed is locked.\n   */\n  Locked = 423,\n\n  /**\n   * The request failed due to failure of a previous request (e.g., a PROPPATCH).\n   */\n  FailedDependency = 424,\n\n  /**\n   * The client should switch to a different protocol such as TLS/1.0, given in the Upgrade header field.\n   */\n  UpgradeRequired = 426,\n\n  /**\n   * The origin server requires the request to be conditional.\n   * Intended to prevent \"the 'lost update' problem, where a client\n   * GETs a resource's state, modifies it, and PUTs it back to the server,\n   * when meanwhile a third party has modified the state on the server, leading to a conflict.\"\n   */\n  PreconditionRequired = 428,\n\n  /**\n   * The user has sent too many requests in a given amount of time. Intended for use with rate-limiting schemes.\n   */\n  TooManyRequests = 429,\n\n  /**\n   * The server is unwilling to process the request because either an individual header field,\n   * or all the header fields collectively, are too large.\n   */\n  RequestHeaderFieldsTooLarge = 431,\n\n  /**\n   * A server operator has received a legal demand to deny access to a resource or to a set of resources\n   * that includes the requested resource. The code 451 was chosen as a reference to the novel Fahrenheit 451.\n   */\n  UnavailableForLegalReasons = 451,\n\n  // #endregion\n\n  // **********************************************************************************************************\n  // #region - 500s - Serve messed up\n  // **********************************************************************************************************\n\n  /**\n   * A generic error message, given when an unexpected condition was encountered and no more specific message is suitable.\n   */\n  InternalServerError = 500,\n\n  /**\n   * The server either does not recognize the request method, or it lacks the ability to fulfill the request.\n   * Usually this implies future availability (e.g., a new feature of a web-service API).\n   */\n  NotImplemented = 501,\n\n  /**\n   * The server was acting as a gateway or proxy and received an invalid response from the upstream server.\n   */\n  BadGateway = 502,\n\n  /**\n   * The server is currently unavailable (because it is overloaded or down for maintenance).\n   * Generally, this is a temporary state.\n   */\n  ServiceUnavailable = 503,\n\n  /**\n   * The server was acting as a gateway or proxy and did not receive a timely response from the upstream server.\n   */\n  GatewayTimeout = 504,\n\n  /**\n   * The server does not support the HTTP protocol version used in the request\n   */\n  HttpVersionNotSupported = 505,\n\n  /**\n   * Transparent content negotiation for the request results in a circular reference.\n   */\n  VariantAlsoNegotiates = 506,\n\n  /**\n   * The server is unable to store the representation needed to complete the request.\n   */\n  InsufficientStorage = 507,\n\n  /**\n   * The server detected an infinite loop while processing the request.\n   */\n  LoopDetected = 508,\n\n  /**\n   * Further extensions to the request are required for the server to fulfill it.\n   */\n  NotExtended = 510,\n\n  /**\n   * The client needs to authenticate to gain network access.\n   * Intended for use by intercepting proxies used to control access to the network (e.g., \"captive portals\" used\n   * to require agreement to Terms of Service before granting full Internet access via a Wi-Fi hotspot).\n   */\n  NetworkAuthenticationRequired = 511,\n  // #endregion\n}\n","import { KdfConfig } from \"../auth/models/domain/kdf-config\";\n\nexport enum KdfType {\n  PBKDF2_SHA256 = 0,\n  Argon2id = 1,\n}\n\nexport const DEFAULT_ARGON2_MEMORY = 64;\nexport const DEFAULT_ARGON2_PARALLELISM = 4;\nexport const DEFAULT_ARGON2_ITERATIONS = 3;\n\nexport const DEFAULT_KDF_TYPE = KdfType.PBKDF2_SHA256;\nexport const DEFAULT_PBKDF2_ITERATIONS = 600000;\nexport const DEFAULT_KDF_CONFIG = new KdfConfig(DEFAULT_PBKDF2_ITERATIONS);\nexport const SEND_KDF_ITERATIONS = 100000;\n","export class KdfConfig {\n  iterations: number;\n  memory?: number;\n  parallelism?: number;\n\n  constructor(iterations: number, memory?: number, parallelism?: number) {\n    this.iterations = iterations;\n    this.memory = memory;\n    this.parallelism = parallelism;\n  }\n}\n","export enum KeySuffixOptions {\n  Auto = \"auto\",\n  Biometric = \"biometric\",\n}\n","export type LinkedIdType = LoginLinkedId | CardLinkedId | IdentityLinkedId;\n\n// LoginView\nexport enum LoginLinkedId {\n  Username = 100,\n  Password = 101,\n}\n\n// CardView\nexport enum CardLinkedId {\n  CardholderName = 300,\n  ExpMonth = 301,\n  ExpYear = 302,\n  Code = 303,\n  Brand = 304,\n  Number = 305,\n}\n\n// IdentityView\nexport enum IdentityLinkedId {\n  Title = 400,\n  MiddleName = 401,\n  Address1 = 402,\n  Address2 = 403,\n  Address3 = 404,\n  City = 405,\n  State = 406,\n  PostalCode = 407,\n  Country = 408,\n  Company = 409,\n  Email = 410,\n  Phone = 411,\n  Ssn = 412,\n  Username = 413,\n  PassportNumber = 414,\n  LicenseNumber = 415,\n  FirstName = 416,\n  LastName = 417,\n  FullName = 418,\n}\n","export enum LogLevelType {\n  Debug,\n  Info,\n  Warning,\n  Error,\n}\n","export enum NativeMessagingVersion {\n  One = 1, // Original implementation\n  Latest = One,\n}\n","export enum NotificationType {\n  SyncCipherUpdate = 0,\n  SyncCipherCreate = 1,\n  SyncLoginDelete = 2,\n  SyncFolderDelete = 3,\n  SyncCiphers = 4,\n\n  SyncVault = 5,\n  SyncOrgKeys = 6,\n  SyncFolderCreate = 7,\n  SyncFolderUpdate = 8,\n  SyncCipherDelete = 9,\n  SyncSettings = 10,\n\n  LogOut = 11,\n\n  SyncSendCreate = 12,\n  SyncSendUpdate = 13,\n  SyncSendDelete = 14,\n\n  AuthRequest = 15,\n  AuthRequestResponse = 16,\n}\n","export enum ProductType {\n  Free = 0,\n  Families = 1,\n  Teams = 2,\n  Enterprise = 3,\n}\n","export enum ProviderType {\n  Msp = 0,\n  Reseller = 1,\n}\n","export enum SecureNoteType {\n  Generic = 0,\n}\n","export enum StateVersion {\n  One = 1, // Original flat key/value pair store\n  Two = 2, // Move to a typed State object\n  Three = 3, // Fix migration of users' premium status\n  Four = 4, // Fix 'Never Lock' option by removing stale data\n  Five = 5, // Migrate to new storage of encrypted organization keys\n  Six = 6, // Delete account.keys.legacyEtmKey property\n  Seven = 7, // Remove global desktop auto prompt setting, move to account\n  Latest = Seven,\n}\n","export enum StorageLocation {\n  Both = \"both\",\n  Disk = \"disk\",\n  Memory = \"memory\",\n}\n","export enum ThemeType {\n  System = \"system\",\n  Light = \"light\",\n  Dark = \"dark\",\n  Nord = \"nord\",\n  SolarizedDark = \"solarizedDark\",\n}\n","export enum UriMatchType {\n  Domain = 0,\n  Host = 1,\n  StartsWith = 2,\n  Exact = 3,\n  RegularExpression = 4,\n  Never = 5,\n}\n","/* eslint-disable no-useless-escape */\nimport * as path from \"path\";\n\nimport { Observable, of, switchMap } from \"rxjs\";\nimport { getHostname, parse } from \"tldts\";\nimport { Merge } from \"type-fest\";\n\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\nimport { I18nService } from \"../abstractions/i18n.service\";\n\nconst nodeURL = typeof window === \"undefined\" ? require(\"url\") : null;\n\ndeclare global {\n  /* eslint-disable-next-line no-var */\n  var bitwardenContainerService: BitwardenContainerService;\n}\n\ninterface BitwardenContainerService {\n  getCryptoService: () => CryptoService;\n  getEncryptService: () => EncryptService;\n}\n\nexport class Utils {\n  static inited = false;\n  static isNode = false;\n  static isBrowser = true;\n  static isMobileBrowser = false;\n  static isAppleMobileBrowser = false;\n  static global: typeof global = null;\n  // Transpiled version of /\\p{Emoji_Presentation}/gu using https://mothereff.in/regexpu. Used for compatability in older browsers.\n  static regexpEmojiPresentation =\n    /(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDED5-\\uDED7\\uDEEB\\uDEEC\\uDEF4-\\uDEFC\\uDFE0-\\uDFEB]|\\uD83E[\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDD78\\uDD7A-\\uDDCB\\uDDCD-\\uDDFF\\uDE70-\\uDE74\\uDE78-\\uDE7A\\uDE80-\\uDE86\\uDE90-\\uDEA8\\uDEB0-\\uDEB6\\uDEC0-\\uDEC2\\uDED0-\\uDED6])/g;\n  static readonly validHosts: string[] = [\"localhost\"];\n  static readonly minimumPasswordLength = 12;\n  static readonly DomainMatchBlacklist = new Map<string, Set<string>>([\n    [\"google.com\", new Set([\"script.google.com\"])],\n  ]);\n\n  static init() {\n    if (Utils.inited) {\n      return;\n    }\n\n    Utils.inited = true;\n    Utils.isNode =\n      typeof process !== \"undefined\" &&\n      (process as any).release != null &&\n      (process as any).release.name === \"node\";\n    Utils.isBrowser = typeof window !== \"undefined\";\n\n    Utils.isMobileBrowser = Utils.isBrowser && this.isMobile(window);\n    Utils.isAppleMobileBrowser = Utils.isBrowser && this.isAppleMobile(window);\n\n    if (Utils.isNode) {\n      Utils.global = global;\n    } else if (Utils.isBrowser) {\n      Utils.global = window;\n    } else {\n      // If it's not browser or node then it must be a service worker\n      Utils.global = self;\n    }\n  }\n\n  static fromB64ToArray(str: string): Uint8Array {\n    if (str == null) {\n      return null;\n    }\n\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"base64\"));\n    } else {\n      const binaryString = Utils.global.atob(str);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      return bytes;\n    }\n  }\n\n  static fromUrlB64ToArray(str: string): Uint8Array {\n    return Utils.fromB64ToArray(Utils.fromUrlB64ToB64(str));\n  }\n\n  static fromHexToArray(str: string): Uint8Array {\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"hex\"));\n    } else {\n      const bytes = new Uint8Array(str.length / 2);\n      for (let i = 0; i < str.length; i += 2) {\n        bytes[i / 2] = parseInt(str.substr(i, 2), 16);\n      }\n      return bytes;\n    }\n  }\n\n  static fromUtf8ToArray(str: string): Uint8Array {\n    if (Utils.isNode) {\n      return new Uint8Array(Buffer.from(str, \"utf8\"));\n    } else {\n      const strUtf8 = unescape(encodeURIComponent(str));\n      const arr = new Uint8Array(strUtf8.length);\n      for (let i = 0; i < strUtf8.length; i++) {\n        arr[i] = strUtf8.charCodeAt(i);\n      }\n      return arr;\n    }\n  }\n\n  static fromByteStringToArray(str: string): Uint8Array {\n    if (str == null) {\n      return null;\n    }\n    const arr = new Uint8Array(str.length);\n    for (let i = 0; i < str.length; i++) {\n      arr[i] = str.charCodeAt(i);\n    }\n    return arr;\n  }\n\n  static fromBufferToB64(buffer: ArrayBuffer): string {\n    if (buffer == null) {\n      return null;\n    }\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"base64\");\n    } else {\n      let binary = \"\";\n      const bytes = new Uint8Array(buffer);\n      for (let i = 0; i < bytes.byteLength; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      }\n      return Utils.global.btoa(binary);\n    }\n  }\n\n  static fromBufferToUrlB64(buffer: ArrayBuffer): string {\n    return Utils.fromB64toUrlB64(Utils.fromBufferToB64(buffer));\n  }\n\n  static fromB64toUrlB64(b64Str: string) {\n    return b64Str.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n  }\n\n  static fromBufferToUtf8(buffer: ArrayBuffer): string {\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"utf8\");\n    } else {\n      const bytes = new Uint8Array(buffer);\n      const encodedString = String.fromCharCode.apply(null, bytes);\n      return decodeURIComponent(escape(encodedString));\n    }\n  }\n\n  static fromBufferToByteString(buffer: ArrayBuffer): string {\n    return String.fromCharCode.apply(null, new Uint8Array(buffer));\n  }\n\n  // ref: https://stackoverflow.com/a/40031979/1090359\n  static fromBufferToHex(buffer: ArrayBuffer): string {\n    if (Utils.isNode) {\n      return Buffer.from(buffer).toString(\"hex\");\n    } else {\n      const bytes = new Uint8Array(buffer);\n      return Array.prototype.map\n        .call(bytes, (x: number) => (\"00\" + x.toString(16)).slice(-2))\n        .join(\"\");\n    }\n  }\n\n  static fromUrlB64ToB64(urlB64Str: string): string {\n    let output = urlB64Str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n      case 0:\n        break;\n      case 2:\n        output += \"==\";\n        break;\n      case 3:\n        output += \"=\";\n        break;\n      default:\n        throw new Error(\"Illegal base64url string!\");\n    }\n\n    return output;\n  }\n\n  static fromUrlB64ToUtf8(urlB64Str: string): string {\n    return Utils.fromB64ToUtf8(Utils.fromUrlB64ToB64(urlB64Str));\n  }\n\n  static fromUtf8ToB64(utfStr: string): string {\n    if (Utils.isNode) {\n      return Buffer.from(utfStr, \"utf8\").toString(\"base64\");\n    } else {\n      return decodeURIComponent(escape(Utils.global.btoa(utfStr)));\n    }\n  }\n\n  static fromUtf8ToUrlB64(utfStr: string): string {\n    return Utils.fromBufferToUrlB64(Utils.fromUtf8ToArray(utfStr));\n  }\n\n  static fromB64ToUtf8(b64Str: string): string {\n    if (Utils.isNode) {\n      return Buffer.from(b64Str, \"base64\").toString(\"utf8\");\n    } else {\n      return decodeURIComponent(escape(Utils.global.atob(b64Str)));\n    }\n  }\n\n  // ref: http://stackoverflow.com/a/2117523/1090359\n  static newGuid(): string {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n      const r = (Math.random() * 16) | 0;\n      const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  static isGuid(id: string) {\n    return RegExp(\n      /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/,\n      \"i\"\n    ).test(id);\n  }\n\n  static getHostname(uriString: string): string {\n    if (Utils.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    if (uriString.startsWith(\"data:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"about:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"file:\")) {\n      return null;\n    }\n\n    // Does uriString contain invalid characters\n    // TODO Needs to possibly be extended, although '!' is a reserved character\n    if (uriString.indexOf(\"!\") > 0) {\n      return null;\n    }\n\n    try {\n      const hostname = getHostname(uriString, { validHosts: this.validHosts });\n      if (hostname != null) {\n        return hostname;\n      }\n    } catch {\n      return null;\n    }\n    return null;\n  }\n\n  static getHost(uriString: string): string {\n    const url = Utils.getUrl(uriString);\n    try {\n      return url != null && url.host !== \"\" ? url.host : null;\n    } catch {\n      return null;\n    }\n  }\n\n  static getDomain(uriString: string): string {\n    if (Utils.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    if (uriString.startsWith(\"data:\")) {\n      return null;\n    }\n\n    if (uriString.startsWith(\"about:\")) {\n      return null;\n    }\n\n    try {\n      const parseResult = parse(uriString, { validHosts: this.validHosts });\n      if (parseResult != null && parseResult.hostname != null) {\n        if (parseResult.hostname === \"localhost\" || parseResult.isIp) {\n          return parseResult.hostname;\n        }\n\n        if (parseResult.domain != null) {\n          return parseResult.domain;\n        }\n        return null;\n      }\n    } catch {\n      return null;\n    }\n    return null;\n  }\n\n  static getQueryParams(uriString: string): Map<string, string> {\n    const url = Utils.getUrl(uriString);\n    if (url == null || url.search == null || url.search === \"\") {\n      return null;\n    }\n    const map = new Map<string, string>();\n    const pairs = (url.search[0] === \"?\" ? url.search.substr(1) : url.search).split(\"&\");\n    pairs.forEach((pair) => {\n      const parts = pair.split(\"=\");\n      if (parts.length < 1) {\n        return;\n      }\n      map.set(\n        decodeURIComponent(parts[0]).toLowerCase(),\n        parts[1] == null ? \"\" : decodeURIComponent(parts[1])\n      );\n    });\n    return map;\n  }\n\n  static getSortFunction<T>(\n    i18nService: I18nService,\n    prop: { [K in keyof T]: T[K] extends string ? K : never }[keyof T]\n  ): (a: T, b: T) => number {\n    return (a, b) => {\n      if (a[prop] == null && b[prop] != null) {\n        return -1;\n      }\n      if (a[prop] != null && b[prop] == null) {\n        return 1;\n      }\n      if (a[prop] == null && b[prop] == null) {\n        return 0;\n      }\n\n      // The `as unknown as string` here is unfortunate because typescript doesn't property understand that the return of T[prop] will be a string\n      return i18nService.collator\n        ? i18nService.collator.compare(a[prop] as unknown as string, b[prop] as unknown as string)\n        : (a[prop] as unknown as string).localeCompare(b[prop] as unknown as string);\n    };\n  }\n\n  static isNullOrWhitespace(str: string): boolean {\n    return str == null || typeof str !== \"string\" || str.trim() === \"\";\n  }\n\n  static isNullOrEmpty(str: string): boolean {\n    return str == null || typeof str !== \"string\" || str == \"\";\n  }\n\n  static isPromise(obj: any): obj is Promise<unknown> {\n    return (\n      obj != undefined && typeof obj[\"then\"] === \"function\" && typeof obj[\"catch\"] === \"function\"\n    );\n  }\n\n  static nameOf<T>(name: string & keyof T) {\n    return name;\n  }\n\n  static assign<T>(target: T, source: Partial<T>): T {\n    return Object.assign(target, source);\n  }\n\n  static iterateEnum<O extends object, K extends keyof O = keyof O>(obj: O) {\n    return (Object.keys(obj).filter((k) => Number.isNaN(+k)) as K[]).map((k) => obj[k]);\n  }\n\n  static getUrl(uriString: string): URL {\n    if (this.isNullOrWhitespace(uriString)) {\n      return null;\n    }\n\n    uriString = uriString.trim();\n\n    return Utils.getUrlObject(uriString);\n  }\n\n  static camelToPascalCase(s: string) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }\n\n  /**\n   * There are a few ways to calculate text color for contrast, this one seems to fit accessibility guidelines best.\n   * https://stackoverflow.com/a/3943023/6869691\n   *\n   * @param {string} bgColor\n   * @param {number} [threshold] see stackoverflow link above\n   * @param {boolean} [svgTextFill]\n   * Indicates if this method is performed on an SVG <text> 'fill' attribute (e.g. <text fill=\"black\"></text>).\n   * This check is necessary because the '!important' tag cannot be used in a 'fill' attribute.\n   */\n  static pickTextColorBasedOnBgColor(bgColor: string, threshold = 186, svgTextFill = false) {\n    const bgColorHexNums = bgColor.charAt(0) === \"#\" ? bgColor.substring(1, 7) : bgColor;\n    const r = parseInt(bgColorHexNums.substring(0, 2), 16); // hexToR\n    const g = parseInt(bgColorHexNums.substring(2, 4), 16); // hexToG\n    const b = parseInt(bgColorHexNums.substring(4, 6), 16); // hexToB\n    const blackColor = svgTextFill ? \"black\" : \"black !important\";\n    const whiteColor = svgTextFill ? \"white\" : \"white !important\";\n    return r * 0.299 + g * 0.587 + b * 0.114 > threshold ? blackColor : whiteColor;\n  }\n\n  static stringToColor(str: string): string {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    let color = \"#\";\n    for (let i = 0; i < 3; i++) {\n      const value = (hash >> (i * 8)) & 0xff;\n      color += (\"00\" + value.toString(16)).substr(-2);\n    }\n    return color;\n  }\n\n  /**\n   * @throws Will throw an error if the ContainerService has not been attached to the window object\n   */\n  static getContainerService(): BitwardenContainerService {\n    if (this.global.bitwardenContainerService == null) {\n      throw new Error(\"global bitwardenContainerService not initialized.\");\n    }\n    return this.global.bitwardenContainerService;\n  }\n\n  static validateHexColor(color: string) {\n    return /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color);\n  }\n\n  /**\n   * Converts map to a Record<string, V> with the same data. Inverse of recordToMap\n   * Useful in toJSON methods, since Maps are not serializable\n   * @param map\n   * @returns\n   */\n  static mapToRecord<K extends string | number, V>(map: Map<K, V>): Record<string, V> {\n    if (map == null) {\n      return null;\n    }\n    if (!(map instanceof Map)) {\n      return map;\n    }\n    return Object.fromEntries(map);\n  }\n\n  /**\n   * Converts record to a Map<string, V> with the same data. Inverse of mapToRecord\n   * Useful in fromJSON methods, since Maps are not serializable\n   *\n   * Warning: If the record has string keys that are numbers, they will be converted to numbers in the map\n   * @param record\n   * @returns\n   */\n  static recordToMap<K extends string | number, V>(record: Record<K, V>): Map<K, V> {\n    if (record == null) {\n      return null;\n    } else if (record instanceof Map) {\n      return record;\n    }\n\n    const entries = Object.entries(record);\n    if (entries.length === 0) {\n      return new Map();\n    }\n\n    if (isNaN(Number(entries[0][0]))) {\n      return new Map(entries) as Map<K, V>;\n    } else {\n      return new Map(entries.map((e) => [Number(e[0]), e[1]])) as Map<K, V>;\n    }\n  }\n\n  /** Applies Object.assign, but converts the type nicely using Type-Fest Merge<Destination, Source> */\n  static merge<Destination, Source>(\n    destination: Destination,\n    source: Source\n  ): Merge<Destination, Source> {\n    return Object.assign(destination, source) as unknown as Merge<Destination, Source>;\n  }\n\n  /**\n   * encodeURIComponent escapes all characters except the following:\n   * alphabetic, decimal digits, - _ . ! ~ * ' ( )\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent#encoding_for_rfc3986\n   */\n  static encodeRFC3986URIComponent(str: string): string {\n    return encodeURIComponent(str).replace(\n      /[!'()*]/g,\n      (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`\n    );\n  }\n\n  /**\n   * Normalizes a path for defense against attacks like traversals\n   * @param denormalizedPath\n   * @returns\n   */\n  static normalizePath(denormalizedPath: string): string {\n    return path.normalize(decodeURIComponent(denormalizedPath)).replace(/^(\\.\\.(\\/|\\\\|$))+/, \"\");\n  }\n\n  private static isMobile(win: Window) {\n    let mobile = false;\n    ((a) => {\n      if (\n        /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n          a\n        ) ||\n        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n          a.substr(0, 4)\n        )\n      ) {\n        mobile = true;\n      }\n    })(win.navigator.userAgent || win.navigator.vendor || (win as any).opera);\n    return mobile || win.navigator.userAgent.match(/iPad/i) != null;\n  }\n\n  static delay(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Generate an observable from a function that returns a promise.\n   * Similar to the rxjs function {@link from} with one big exception:\n   * {@link from} will not re-execute the function when observers resubscribe.\n   * {@link Util.asyncToObservable} will execute `generator` for every\n   * subscribe, making it ideal if the value ever needs to be refreshed.\n   * */\n  static asyncToObservable<T>(generator: () => Promise<T>): Observable<T> {\n    return of(undefined).pipe(switchMap(() => generator()));\n  }\n\n  private static isAppleMobile(win: Window) {\n    return (\n      win.navigator.userAgent.match(/iPhone/i) != null ||\n      win.navigator.userAgent.match(/iPad/i) != null\n    );\n  }\n\n  private static getUrlObject(uriString: string): URL {\n    // All the methods below require a protocol to properly parse a URL string\n    // Assume http if no other protocol is present\n    const hasProtocol = uriString.indexOf(\"://\") > -1;\n    if (!hasProtocol && uriString.indexOf(\".\") > -1) {\n      uriString = \"http://\" + uriString;\n    } else if (!hasProtocol) {\n      return null;\n    }\n\n    try {\n      if (nodeURL != null) {\n        return new nodeURL.URL(uriString);\n      }\n\n      return new URL(uriString);\n    } catch (e) {\n      // Ignore error\n    }\n\n    return null;\n  }\n}\n\nUtils.init();\n","import { Jsonify } from \"type-fest\";\n\nimport { EncryptionType, EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE } from \"../../enums\";\nimport { IEncrypted } from \"../../interfaces/IEncrypted\";\nimport { Utils } from \"../../misc/utils\";\n\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport class EncString implements IEncrypted {\n  encryptedString?: string;\n  encryptionType?: EncryptionType;\n  decryptedValue?: string;\n  data?: string;\n  iv?: string;\n  mac?: string;\n\n  constructor(\n    encryptedStringOrType: string | EncryptionType,\n    data?: string,\n    iv?: string,\n    mac?: string\n  ) {\n    if (data != null) {\n      this.initFromData(encryptedStringOrType as EncryptionType, data, iv, mac);\n    } else {\n      this.initFromEncryptedString(encryptedStringOrType as string);\n    }\n  }\n\n  get ivBytes(): ArrayBuffer {\n    return this.iv == null ? null : Utils.fromB64ToArray(this.iv).buffer;\n  }\n\n  get macBytes(): ArrayBuffer {\n    return this.mac == null ? null : Utils.fromB64ToArray(this.mac).buffer;\n  }\n\n  get dataBytes(): ArrayBuffer {\n    return this.data == null ? null : Utils.fromB64ToArray(this.data).buffer;\n  }\n\n  toJSON() {\n    return this.encryptedString;\n  }\n\n  static fromJSON(obj: Jsonify<EncString>): EncString {\n    if (obj == null) {\n      return null;\n    }\n\n    return new EncString(obj);\n  }\n\n  private initFromData(encType: EncryptionType, data: string, iv: string, mac: string) {\n    if (iv != null) {\n      this.encryptedString = encType + \".\" + iv + \"|\" + data;\n    } else {\n      this.encryptedString = encType + \".\" + data;\n    }\n\n    // mac\n    if (mac != null) {\n      this.encryptedString += \"|\" + mac;\n    }\n\n    this.encryptionType = encType;\n    this.data = data;\n    this.iv = iv;\n    this.mac = mac;\n  }\n\n  private initFromEncryptedString(encryptedString: string) {\n    this.encryptedString = encryptedString as string;\n    if (!this.encryptedString) {\n      return;\n    }\n\n    const { encType, encPieces } = EncString.parseEncryptedString(this.encryptedString);\n    this.encryptionType = encType;\n\n    if (encPieces.length !== EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE[encType]) {\n      return;\n    }\n\n    switch (encType) {\n      case EncryptionType.AesCbc128_HmacSha256_B64:\n      case EncryptionType.AesCbc256_HmacSha256_B64:\n        this.iv = encPieces[0];\n        this.data = encPieces[1];\n        this.mac = encPieces[2];\n        break;\n      case EncryptionType.AesCbc256_B64:\n        this.iv = encPieces[0];\n        this.data = encPieces[1];\n        break;\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n        this.data = encPieces[0];\n        break;\n      default:\n        return;\n    }\n  }\n\n  private static parseEncryptedString(encryptedString: string): {\n    encType: EncryptionType;\n    encPieces: string[];\n  } {\n    const headerPieces = encryptedString.split(\".\");\n    let encType: EncryptionType;\n    let encPieces: string[] = null;\n\n    if (headerPieces.length === 2) {\n      try {\n        encType = parseInt(headerPieces[0], null);\n        encPieces = headerPieces[1].split(\"|\");\n      } catch (e) {\n        return;\n      }\n    } else {\n      encPieces = encryptedString.split(\"|\");\n      encType =\n        encPieces.length === 3\n          ? EncryptionType.AesCbc128_HmacSha256_B64\n          : EncryptionType.AesCbc256_B64;\n    }\n\n    return {\n      encType,\n      encPieces,\n    };\n  }\n\n  static isSerializedEncString(s: string): boolean {\n    const { encType, encPieces } = this.parseEncryptedString(s);\n\n    return EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE[encType] === encPieces.length;\n  }\n\n  async decrypt(orgId: string, key: SymmetricCryptoKey = null): Promise<string> {\n    if (this.decryptedValue != null) {\n      return this.decryptedValue;\n    }\n\n    try {\n      if (key == null) {\n        key = await this.getKeyForDecryption(orgId);\n      }\n      if (key == null) {\n        throw new Error(\"No key to decrypt EncString with orgId \" + orgId);\n      }\n\n      const encryptService = Utils.getContainerService().getEncryptService();\n      this.decryptedValue = await encryptService.decryptToUtf8(this, key);\n    } catch (e) {\n      this.decryptedValue = \"[error: cannot decrypt]\";\n    }\n    return this.decryptedValue;\n  }\n\n  private async getKeyForDecryption(orgId: string) {\n    const cryptoService = Utils.getContainerService().getCryptoService();\n    return orgId != null\n      ? await cryptoService.getOrgKey(orgId)\n      : await cryptoService.getKeyForUserEncryption();\n  }\n}\n","import { View } from \"../view/view\";\n\nimport { EncString } from \"./enc-string\";\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\n// https://contributing.bitwarden.com/architecture/clients/data-model#domain\nexport default class Domain {\n  protected buildDomainModel<D extends Domain>(\n    domain: D,\n    dataObj: any,\n    map: any,\n    notEncList: any[] = []\n  ) {\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      const objProp = dataObj[map[prop] || prop];\n      if (notEncList.indexOf(prop) > -1) {\n        (domain as any)[prop] = objProp ? objProp : null;\n      } else {\n        (domain as any)[prop] = objProp ? new EncString(objProp) : null;\n      }\n    }\n  }\n  protected buildDataModel<D extends Domain>(\n    domain: D,\n    dataObj: any,\n    map: any,\n    notEncStringList: any[] = []\n  ) {\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      const objProp = (domain as any)[map[prop] || prop];\n      if (notEncStringList.indexOf(prop) > -1) {\n        (dataObj as any)[prop] = objProp != null ? objProp : null;\n      } else {\n        (dataObj as any)[prop] = objProp != null ? (objProp as EncString).encryptedString : null;\n      }\n    }\n  }\n\n  protected async decryptObj<T extends View>(\n    viewModel: T,\n    map: any,\n    orgId: string,\n    key: SymmetricCryptoKey = null\n  ): Promise<T> {\n    const promises = [];\n    const self: any = this;\n\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      (function (theProp) {\n        const p = Promise.resolve()\n          .then(() => {\n            const mapProp = map[theProp] || theProp;\n            if (self[mapProp]) {\n              return self[mapProp].decrypt(orgId, key);\n            }\n            return null;\n          })\n          .then((val: any) => {\n            (viewModel as any)[theProp] = val;\n          });\n        promises.push(p);\n      })(prop);\n    }\n\n    await Promise.all(promises);\n    return viewModel;\n  }\n}\n","import { MasterPasswordPolicyResponse } from \"../../../auth/models/response/master-password-policy.response\";\nimport Domain from \"../../../models/domain/domain-base\";\n\nexport class MasterPasswordPolicyOptions extends Domain {\n  minComplexity = 0;\n  minLength = 0;\n  requireUpper = false;\n  requireLower = false;\n  requireNumbers = false;\n  requireSpecial = false;\n\n  /**\n   * Flag to indicate if the policy should be enforced on login.\n   * If true, and the user's password does not meet the policy requirements,\n   * the user will be forced to update their password.\n   */\n  enforceOnLogin = false;\n\n  static fromResponse(policy: MasterPasswordPolicyResponse): MasterPasswordPolicyOptions {\n    if (policy == null) {\n      return null;\n    }\n    const options = new MasterPasswordPolicyOptions();\n    options.minComplexity = policy.minComplexity;\n    options.minLength = policy.minLength;\n    options.requireUpper = policy.requireUpper;\n    options.requireLower = policy.requireLower;\n    options.requireNumbers = policy.requireNumbers;\n    options.requireSpecial = policy.requireSpecial;\n    options.enforceOnLogin = policy.enforceOnLogin;\n    return options;\n  }\n}\n","<div\n  #callout\n  class=\"callout callout-{{ calloutStyle }}\"\n  [ngClass]=\"{ clickable: clickable }\"\n  [attr.role]=\"useAlertRole ? 'alert' : null\"\n>\n  <h3 class=\"callout-heading\" *ngIf=\"title\">\n    <i class=\"bwi {{ icon }}\" *ngIf=\"icon\" aria-hidden=\"true\"></i>\n    {{ title }}\n  </h3>\n  <div class=\"enforced-policy-options\" *ngIf=\"enforcedPolicyOptions\">\n    {{ enforcedPolicyMessage }}\n    <ul>\n      <li *ngIf=\"enforcedPolicyOptions?.minComplexity > 0\">\n        {{ \"policyInEffectMinComplexity\" | i18n : getPasswordScoreAlertDisplay() }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.minLength > 0\">\n        {{ \"policyInEffectMinLength\" | i18n : enforcedPolicyOptions?.minLength.toString() }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireUpper\">\n        {{ \"policyInEffectUppercase\" | i18n }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireLower\">\n        {{ \"policyInEffectLowercase\" | i18n }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireNumbers\">\n        {{ \"policyInEffectNumbers\" | i18n }}\n      </li>\n      <li *ngIf=\"enforcedPolicyOptions?.requireSpecial\">\n        {{ \"policyInEffectSpecial\" | i18n : \"!@#$%^&*\" }}\n      </li>\n    </ul>\n  </div>\n  <ng-content></ng-content>\n</div>\n","import { Component, Input, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/admin-console/models/domain/master-password-policy-options\";\n\n@Component({\n  selector: \"app-callout\",\n  templateUrl: \"callout.component.html\",\n})\nexport class CalloutComponent implements OnInit {\n  @Input() type = \"info\";\n  @Input() icon: string;\n  @Input() title: string;\n  @Input() clickable: boolean;\n  @Input() enforcedPolicyOptions: MasterPasswordPolicyOptions;\n  @Input() enforcedPolicyMessage: string;\n  @Input() useAlertRole = false;\n\n  calloutStyle: string;\n\n  constructor(private i18nService: I18nService) {}\n\n  ngOnInit() {\n    this.calloutStyle = this.type;\n\n    if (this.enforcedPolicyMessage === undefined) {\n      this.enforcedPolicyMessage = this.i18nService.t(\"masterPasswordPolicyInEffect\");\n    }\n\n    if (this.type === \"warning\" || this.type === \"danger\") {\n      if (this.type === \"danger\") {\n        this.calloutStyle = \"danger\";\n      }\n      if (this.title === undefined) {\n        this.title = this.i18nService.t(\"warning\");\n      }\n      if (this.icon === undefined) {\n        this.icon = \"bwi-exclamation-triangle\";\n      }\n    } else if (this.type === \"error\") {\n      this.calloutStyle = \"danger\";\n      if (this.title === undefined) {\n        this.title = this.i18nService.t(\"error\");\n      }\n      if (this.icon === undefined) {\n        this.icon = \"bwi-error\";\n      }\n    } else if (this.type === \"tip\") {\n      this.calloutStyle = \"success\";\n      if (this.title === undefined) {\n        this.title = this.i18nService.t(\"tip\");\n      }\n      if (this.icon === undefined) {\n        this.icon = \"bwi-lightbulb\";\n      }\n    }\n  }\n\n  getPasswordScoreAlertDisplay() {\n    if (this.enforcedPolicyOptions == null) {\n      return \"\";\n    }\n\n    let str: string;\n    switch (this.enforcedPolicyOptions.minComplexity) {\n      case 4:\n        str = this.i18nService.t(\"strong\");\n        break;\n      case 3:\n        str = this.i18nService.t(\"good\");\n        break;\n      default:\n        str = this.i18nService.t(\"weak\");\n        break;\n    }\n    return str + \" (\" + this.enforcedPolicyOptions.minComplexity + \")\";\n  }\n}\n","import { Directive, ElementRef, Input, Renderer2 } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appInputVerbatim]\",\n})\nexport class InputVerbatimDirective {\n  @Input() set appInputVerbatim(condition: boolean | string) {\n    this.disableComplete = condition === \"\" || condition === true;\n  }\n\n  private disableComplete: boolean;\n\n  constructor(private el: ElementRef, private renderer: Renderer2) {}\n\n  ngOnInit() {\n    if (this.disableComplete && !this.el.nativeElement.hasAttribute(\"autocomplete\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"autocomplete\", \"off\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"autocapitalize\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"autocapitalize\", \"none\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"autocorrect\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"autocorrect\", \"none\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"spellcheck\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"spellcheck\", \"false\");\n    }\n    if (!this.el.nativeElement.hasAttribute(\"inputmode\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"inputmode\", \"verbatim\");\n    }\n  }\n}\n","import { Directive, HostListener } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appStopClick]\",\n})\nexport class StopClickDirective {\n  @HostListener(\"click\", [\"$event\"]) onClick($event: MouseEvent) {\n    $event.preventDefault();\n  }\n}\n","<form #form (ngSubmit)=\"submit()\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/home\">{{ \"close\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"appName\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <app-callout\n      type=\"info\"\n      title=\"{{ 'settingsEdited' | i18n }}\"\n      *ngIf=\"showEditedManagedSettings\"\n    >\n      <a href=\"#\" appStopClick (click)=\"resetEnvironment()\">\n        {{ \"environmentEditedClick\" | i18n }}\n      </a>\n      {{ \"environmentEditedReset\" | i18n }}\n    </app-callout>\n\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"selfHostedEnvironment\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"baseUrl\">{{ \"baseUrl\" | i18n }}</label>\n          <input\n            id=\"baseUrl\"\n            type=\"text\"\n            name=\"BaseUrl\"\n            aria-describedby=\"baseUrlHelp\"\n            [(ngModel)]=\"baseUrl\"\n            placeholder=\"ex. https://bitwarden.company.com\"\n            appInputVerbatim\n          />\n        </div>\n      </div>\n      <div id=\"baseUrlHelp\" class=\"box-footer\">\n        {{ \"selfHostedEnvironmentFooter\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"customEnvironment\" | i18n }}\n      </h2>\n      <div\n        role=\"group\"\n        attr.aria-label=\"{{ 'customEnvironment' | i18n }}\"\n        aria-describedby=\"customEnvironmentHelp\"\n        class=\"box-content\"\n        [hidden]=\"!showCustom\"\n      >\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"webVaultUrl\">{{ \"webVaultUrl\" | i18n }}</label>\n          <input\n            id=\"webVaultUrl\"\n            type=\"text\"\n            name=\"WebVaultUrl\"\n            [(ngModel)]=\"webVaultUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"apiUrl\">{{ \"apiUrl\" | i18n }}</label>\n          <input\n            id=\"apiUrl\"\n            type=\"text\"\n            name=\"ApiUrl\"\n            [(ngModel)]=\"apiUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"identityUrl\">{{ \"identityUrl\" | i18n }}</label>\n          <input\n            id=\"identityUrl\"\n            type=\"text\"\n            name=\"IdentityUrl\"\n            [(ngModel)]=\"identityUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"notificationsUrl\">{{ \"notificationsUrl\" | i18n }}</label>\n          <input\n            id=\"notificationsUrl\"\n            type=\"text\"\n            name=\"NotificationsUrl\"\n            inputmode=\"url\"\n            [(ngModel)]=\"notificationsUrl\"\n            appInputVerbatim\n          />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"iconsUrl\">{{ \"iconsUrl\" | i18n }}</label>\n          <input\n            id=\"iconsUrl\"\n            type=\"text\"\n            name=\"IconsUrl\"\n            [(ngModel)]=\"iconsUrl\"\n            inputmode=\"url\"\n            appInputVerbatim\n          />\n        </div>\n      </div>\n      <div id=\"customEnvironmentHelp\" class=\"box-footer\" [hidden]=\"!showCustom\">\n        {{ \"customEnvironmentFooter\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { EnvironmentComponent as BaseEnvironmentComponent } from \"@bitwarden/angular/components/environment.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\nimport { BrowserEnvironmentService } from \"../../services/browser-environment.service\";\n\n@Component({\n  selector: \"app-environment\",\n  templateUrl: \"environment.component.html\",\n})\nexport class EnvironmentComponent extends BaseEnvironmentComponent implements OnInit {\n  showEditedManagedSettings = false;\n\n  constructor(\n    platformUtilsService: PlatformUtilsService,\n    public environmentService: BrowserEnvironmentService,\n    i18nService: I18nService,\n    private router: Router\n  ) {\n    super(platformUtilsService, environmentService, i18nService);\n    this.showCustom = true;\n  }\n\n  async ngOnInit() {\n    this.showEditedManagedSettings = await this.environmentService.settingsHaveChanged();\n  }\n\n  async resetEnvironment() {\n    const urls = await this.environmentService.getManagedEnvironment();\n\n    this.baseUrl = urls.base;\n    this.webVaultUrl = urls.webVault;\n    this.apiUrl = urls.api;\n    this.iconsUrl = urls.icons;\n    this.identityUrl = urls.identity;\n    this.notificationsUrl = urls.notifications;\n    this.iconsUrl = urls.icons;\n  }\n\n  saved() {\n    super.saved();\n    this.router.navigate([\"\"]);\n  }\n}\n","export class PasswordHintRequest {\n  email: string;\n\n  constructor(email: string) {\n    this.email = email;\n  }\n}\n","import { OrganizationConnectionType } from \"../admin-console/enums\";\nimport { CollectionRequest } from \"../admin-console/models/request/collection.request\";\nimport { OrganizationConnectionRequest } from \"../admin-console/models/request/organization-connection.request\";\nimport { OrganizationSponsorshipCreateRequest } from \"../admin-console/models/request/organization/organization-sponsorship-create.request\";\nimport { OrganizationSponsorshipRedeemRequest } from \"../admin-console/models/request/organization/organization-sponsorship-redeem.request\";\nimport { ProviderAddOrganizationRequest } from \"../admin-console/models/request/provider/provider-add-organization.request\";\nimport { ProviderOrganizationCreateRequest } from \"../admin-console/models/request/provider/provider-organization-create.request\";\nimport { ProviderSetupRequest } from \"../admin-console/models/request/provider/provider-setup.request\";\nimport { ProviderUpdateRequest } from \"../admin-console/models/request/provider/provider-update.request\";\nimport { ProviderUserAcceptRequest } from \"../admin-console/models/request/provider/provider-user-accept.request\";\nimport { ProviderUserBulkConfirmRequest } from \"../admin-console/models/request/provider/provider-user-bulk-confirm.request\";\nimport { ProviderUserBulkRequest } from \"../admin-console/models/request/provider/provider-user-bulk.request\";\nimport { ProviderUserConfirmRequest } from \"../admin-console/models/request/provider/provider-user-confirm.request\";\nimport { ProviderUserInviteRequest } from \"../admin-console/models/request/provider/provider-user-invite.request\";\nimport { ProviderUserUpdateRequest } from \"../admin-console/models/request/provider/provider-user-update.request\";\nimport { SelectionReadOnlyRequest } from \"../admin-console/models/request/selection-read-only.request\";\nimport {\n  CollectionAccessDetailsResponse,\n  CollectionResponse,\n} from \"../admin-console/models/response/collection.response\";\nimport {\n  OrganizationConnectionConfigApis,\n  OrganizationConnectionResponse,\n} from \"../admin-console/models/response/organization-connection.response\";\nimport { OrganizationExportResponse } from \"../admin-console/models/response/organization-export.response\";\nimport { OrganizationSponsorshipSyncStatusResponse } from \"../admin-console/models/response/organization-sponsorship-sync-status.response\";\nimport { PolicyResponse } from \"../admin-console/models/response/policy.response\";\nimport {\n  ProviderOrganizationOrganizationDetailsResponse,\n  ProviderOrganizationResponse,\n} from \"../admin-console/models/response/provider/provider-organization.response\";\nimport { ProviderUserBulkPublicKeyResponse } from \"../admin-console/models/response/provider/provider-user-bulk-public-key.response\";\nimport { ProviderUserBulkResponse } from \"../admin-console/models/response/provider/provider-user-bulk.response\";\nimport {\n  ProviderUserResponse,\n  ProviderUserUserDetailsResponse,\n} from \"../admin-console/models/response/provider/provider-user.response\";\nimport { ProviderResponse } from \"../admin-console/models/response/provider/provider.response\";\nimport { SelectionReadOnlyResponse } from \"../admin-console/models/response/selection-read-only.response\";\nimport { DeviceVerificationRequest } from \"../auth/models/request/device-verification.request\";\nimport { EmailTokenRequest } from \"../auth/models/request/email-token.request\";\nimport { EmailRequest } from \"../auth/models/request/email.request\";\nimport { EmergencyAccessAcceptRequest } from \"../auth/models/request/emergency-access-accept.request\";\nimport { EmergencyAccessConfirmRequest } from \"../auth/models/request/emergency-access-confirm.request\";\nimport { EmergencyAccessInviteRequest } from \"../auth/models/request/emergency-access-invite.request\";\nimport { EmergencyAccessPasswordRequest } from \"../auth/models/request/emergency-access-password.request\";\nimport { EmergencyAccessUpdateRequest } from \"../auth/models/request/emergency-access-update.request\";\nimport { PasswordTokenRequest } from \"../auth/models/request/identity-token/password-token.request\";\nimport { SsoTokenRequest } from \"../auth/models/request/identity-token/sso-token.request\";\nimport { UserApiTokenRequest } from \"../auth/models/request/identity-token/user-api-token.request\";\nimport { KeyConnectorUserKeyRequest } from \"../auth/models/request/key-connector-user-key.request\";\nimport { PasswordHintRequest } from \"../auth/models/request/password-hint.request\";\nimport { PasswordRequest } from \"../auth/models/request/password.request\";\nimport { PasswordlessAuthRequest } from \"../auth/models/request/passwordless-auth.request\";\nimport { PasswordlessCreateAuthRequest } from \"../auth/models/request/passwordless-create-auth.request\";\nimport { SecretVerificationRequest } from \"../auth/models/request/secret-verification.request\";\nimport { SetKeyConnectorKeyRequest } from \"../auth/models/request/set-key-connector-key.request\";\nimport { SetPasswordRequest } from \"../auth/models/request/set-password.request\";\nimport { TwoFactorEmailRequest } from \"../auth/models/request/two-factor-email.request\";\nimport { TwoFactorProviderRequest } from \"../auth/models/request/two-factor-provider.request\";\nimport { TwoFactorRecoveryRequest } from \"../auth/models/request/two-factor-recovery.request\";\nimport { UpdateProfileRequest } from \"../auth/models/request/update-profile.request\";\nimport { UpdateTempPasswordRequest } from \"../auth/models/request/update-temp-password.request\";\nimport { UpdateTwoFactorAuthenticatorRequest } from \"../auth/models/request/update-two-factor-authenticator.request\";\nimport { UpdateTwoFactorDuoRequest } from \"../auth/models/request/update-two-factor-duo.request\";\nimport { UpdateTwoFactorEmailRequest } from \"../auth/models/request/update-two-factor-email.request\";\nimport { UpdateTwoFactorWebAuthnDeleteRequest } from \"../auth/models/request/update-two-factor-web-authn-delete.request\";\nimport { UpdateTwoFactorWebAuthnRequest } from \"../auth/models/request/update-two-factor-web-authn.request\";\nimport { UpdateTwoFactorYubioOtpRequest } from \"../auth/models/request/update-two-factor-yubio-otp.request\";\nimport { ApiKeyResponse } from \"../auth/models/response/api-key.response\";\nimport { AuthRequestResponse } from \"../auth/models/response/auth-request.response\";\nimport { DeviceVerificationResponse } from \"../auth/models/response/device-verification.response\";\nimport {\n  EmergencyAccessGranteeDetailsResponse,\n  EmergencyAccessGrantorDetailsResponse,\n  EmergencyAccessTakeoverResponse,\n  EmergencyAccessViewResponse,\n} from \"../auth/models/response/emergency-access.response\";\nimport { IdentityCaptchaResponse } from \"../auth/models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../auth/models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../auth/models/response/identity-two-factor.response\";\nimport { KeyConnectorUserKeyResponse } from \"../auth/models/response/key-connector-user-key.response\";\nimport { MasterPasswordPolicyResponse } from \"../auth/models/response/master-password-policy.response\";\nimport { PreloginResponse } from \"../auth/models/response/prelogin.response\";\nimport { RegisterResponse } from \"../auth/models/response/register.response\";\nimport { SsoPreValidateResponse } from \"../auth/models/response/sso-pre-validate.response\";\nimport { TwoFactorAuthenticatorResponse } from \"../auth/models/response/two-factor-authenticator.response\";\nimport { TwoFactorDuoResponse } from \"../auth/models/response/two-factor-duo.response\";\nimport { TwoFactorEmailResponse } from \"../auth/models/response/two-factor-email.response\";\nimport { TwoFactorProviderResponse } from \"../auth/models/response/two-factor-provider.response\";\nimport { TwoFactorRecoverResponse } from \"../auth/models/response/two-factor-recover.response\";\nimport {\n  ChallengeResponse,\n  TwoFactorWebAuthnResponse,\n} from \"../auth/models/response/two-factor-web-authn.response\";\nimport { TwoFactorYubiKeyResponse } from \"../auth/models/response/two-factor-yubi-key.response\";\nimport { BitPayInvoiceRequest } from \"../billing/models/request/bit-pay-invoice.request\";\nimport { PaymentRequest } from \"../billing/models/request/payment.request\";\nimport { TaxInfoUpdateRequest } from \"../billing/models/request/tax-info-update.request\";\nimport { BillingHistoryResponse } from \"../billing/models/response/billing-history.response\";\nimport { BillingPaymentResponse } from \"../billing/models/response/billing-payment.response\";\nimport { PaymentResponse } from \"../billing/models/response/payment.response\";\nimport { PlanResponse } from \"../billing/models/response/plan.response\";\nimport { SubscriptionResponse } from \"../billing/models/response/subscription.response\";\nimport { TaxInfoResponse } from \"../billing/models/response/tax-info.response\";\nimport { TaxRateResponse } from \"../billing/models/response/tax-rate.response\";\nimport { CollectionBulkDeleteRequest } from \"../models/request/collection-bulk-delete.request\";\nimport { DeleteRecoverRequest } from \"../models/request/delete-recover.request\";\nimport { EventRequest } from \"../models/request/event.request\";\nimport { IapCheckRequest } from \"../models/request/iap-check.request\";\nimport { KdfRequest } from \"../models/request/kdf.request\";\nimport { KeysRequest } from \"../models/request/keys.request\";\nimport { OrganizationImportRequest } from \"../models/request/organization-import.request\";\nimport { PreloginRequest } from \"../models/request/prelogin.request\";\nimport { RegisterRequest } from \"../models/request/register.request\";\nimport { StorageRequest } from \"../models/request/storage.request\";\nimport { UpdateAvatarRequest } from \"../models/request/update-avatar.request\";\nimport { UpdateDomainsRequest } from \"../models/request/update-domains.request\";\nimport { UpdateKeyRequest } from \"../models/request/update-key.request\";\nimport { VerifyDeleteRecoverRequest } from \"../models/request/verify-delete-recover.request\";\nimport { VerifyEmailRequest } from \"../models/request/verify-email.request\";\nimport { BreachAccountResponse } from \"../models/response/breach-account.response\";\nimport { DomainsResponse } from \"../models/response/domains.response\";\nimport { EventResponse } from \"../models/response/event.response\";\nimport { ListResponse } from \"../models/response/list.response\";\nimport { ProfileResponse } from \"../models/response/profile.response\";\nimport { UserKeyResponse } from \"../models/response/user-key.response\";\nimport { AttachmentRequest } from \"../vault/models/request/attachment.request\";\nimport { CipherBulkDeleteRequest } from \"../vault/models/request/cipher-bulk-delete.request\";\nimport { CipherBulkMoveRequest } from \"../vault/models/request/cipher-bulk-move.request\";\nimport { CipherBulkRestoreRequest } from \"../vault/models/request/cipher-bulk-restore.request\";\nimport { CipherBulkShareRequest } from \"../vault/models/request/cipher-bulk-share.request\";\nimport { CipherCollectionsRequest } from \"../vault/models/request/cipher-collections.request\";\nimport { CipherCreateRequest } from \"../vault/models/request/cipher-create.request\";\nimport { CipherPartialRequest } from \"../vault/models/request/cipher-partial.request\";\nimport { CipherShareRequest } from \"../vault/models/request/cipher-share.request\";\nimport { CipherRequest } from \"../vault/models/request/cipher.request\";\nimport { AttachmentUploadDataResponse } from \"../vault/models/response/attachment-upload-data.response\";\nimport { AttachmentResponse } from \"../vault/models/response/attachment.response\";\nimport { CipherResponse } from \"../vault/models/response/cipher.response\";\nimport { SyncResponse } from \"../vault/models/response/sync.response\";\n\n/**\n * @deprecated The `ApiService` class is deprecated and calls should be extracted into individual\n * api services. The `send` method is still allowed to be used within api services. For background\n * of this decision please read https://contributing.bitwarden.com/architecture/adr/refactor-api-service.\n */\nexport abstract class ApiService {\n  send: (\n    method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\",\n    path: string,\n    body: any,\n    authed: boolean,\n    hasResponse: boolean,\n    apiUrl?: string,\n    alterHeaders?: (headers: Headers) => void\n  ) => Promise<any>;\n\n  postIdentityToken: (\n    request: PasswordTokenRequest | SsoTokenRequest | UserApiTokenRequest\n  ) => Promise<IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse>;\n  refreshIdentityToken: () => Promise<any>;\n\n  getProfile: () => Promise<ProfileResponse>;\n  getUserSubscription: () => Promise<SubscriptionResponse>;\n  getTaxInfo: () => Promise<TaxInfoResponse>;\n  putProfile: (request: UpdateProfileRequest) => Promise<ProfileResponse>;\n  putAvatar: (request: UpdateAvatarRequest) => Promise<ProfileResponse>;\n  putTaxInfo: (request: TaxInfoUpdateRequest) => Promise<any>;\n  postPrelogin: (request: PreloginRequest) => Promise<PreloginResponse>;\n  postEmailToken: (request: EmailTokenRequest) => Promise<any>;\n  postEmail: (request: EmailRequest) => Promise<any>;\n  postPassword: (request: PasswordRequest) => Promise<any>;\n  setPassword: (request: SetPasswordRequest) => Promise<any>;\n  postSetKeyConnectorKey: (request: SetKeyConnectorKeyRequest) => Promise<any>;\n  postSecurityStamp: (request: SecretVerificationRequest) => Promise<any>;\n  getAccountRevisionDate: () => Promise<number>;\n  postPasswordHint: (request: PasswordHintRequest) => Promise<any>;\n  postRegister: (request: RegisterRequest) => Promise<RegisterResponse>;\n  postPremium: (data: FormData) => Promise<PaymentResponse>;\n  postIapCheck: (request: IapCheckRequest) => Promise<any>;\n  postReinstatePremium: () => Promise<any>;\n  postCancelPremium: () => Promise<any>;\n  postAccountStorage: (request: StorageRequest) => Promise<PaymentResponse>;\n  postAccountPayment: (request: PaymentRequest) => Promise<void>;\n  postAccountLicense: (data: FormData) => Promise<any>;\n  postAccountKey: (request: UpdateKeyRequest) => Promise<any>;\n  postAccountKeys: (request: KeysRequest) => Promise<any>;\n  postAccountVerifyEmail: () => Promise<any>;\n  postAccountVerifyEmailToken: (request: VerifyEmailRequest) => Promise<any>;\n  postAccountVerifyPassword: (\n    request: SecretVerificationRequest\n  ) => Promise<MasterPasswordPolicyResponse>;\n  postAccountRecoverDelete: (request: DeleteRecoverRequest) => Promise<any>;\n  postAccountRecoverDeleteToken: (request: VerifyDeleteRecoverRequest) => Promise<any>;\n  postAccountKdf: (request: KdfRequest) => Promise<any>;\n  postUserApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;\n  postUserRotateApiKey: (id: string, request: SecretVerificationRequest) => Promise<ApiKeyResponse>;\n  putUpdateTempPassword: (request: UpdateTempPasswordRequest) => Promise<any>;\n  postConvertToKeyConnector: () => Promise<void>;\n  //passwordless\n  postAuthRequest: (request: PasswordlessCreateAuthRequest) => Promise<AuthRequestResponse>;\n  getAuthResponse: (id: string, accessCode: string) => Promise<AuthRequestResponse>;\n  getAuthRequest: (id: string) => Promise<AuthRequestResponse>;\n  putAuthRequest: (id: string, request: PasswordlessAuthRequest) => Promise<AuthRequestResponse>;\n  getAuthRequests: () => Promise<ListResponse<AuthRequestResponse>>;\n  getLastAuthRequest: () => Promise<AuthRequestResponse>;\n\n  getUserBillingHistory: () => Promise<BillingHistoryResponse>;\n  getUserBillingPayment: () => Promise<BillingPaymentResponse>;\n\n  getCipher: (id: string) => Promise<CipherResponse>;\n  getFullCipherDetails: (id: string) => Promise<CipherResponse>;\n  getCipherAdmin: (id: string) => Promise<CipherResponse>;\n  getAttachmentData: (\n    cipherId: string,\n    attachmentId: string,\n    emergencyAccessId?: string\n  ) => Promise<AttachmentResponse>;\n  getCiphersOrganization: (organizationId: string) => Promise<ListResponse<CipherResponse>>;\n  postCipher: (request: CipherRequest) => Promise<CipherResponse>;\n  postCipherCreate: (request: CipherCreateRequest) => Promise<CipherResponse>;\n  postCipherAdmin: (request: CipherCreateRequest) => Promise<CipherResponse>;\n  putCipher: (id: string, request: CipherRequest) => Promise<CipherResponse>;\n  putPartialCipher: (id: string, request: CipherPartialRequest) => Promise<CipherResponse>;\n  putCipherAdmin: (id: string, request: CipherRequest) => Promise<CipherResponse>;\n  deleteCipher: (id: string) => Promise<any>;\n  deleteCipherAdmin: (id: string) => Promise<any>;\n  deleteManyCiphers: (request: CipherBulkDeleteRequest) => Promise<any>;\n  deleteManyCiphersAdmin: (request: CipherBulkDeleteRequest) => Promise<any>;\n  putMoveCiphers: (request: CipherBulkMoveRequest) => Promise<any>;\n  putShareCipher: (id: string, request: CipherShareRequest) => Promise<CipherResponse>;\n  putShareCiphers: (request: CipherBulkShareRequest) => Promise<any>;\n  putCipherCollections: (id: string, request: CipherCollectionsRequest) => Promise<any>;\n  putCipherCollectionsAdmin: (id: string, request: CipherCollectionsRequest) => Promise<any>;\n  postPurgeCiphers: (request: SecretVerificationRequest, organizationId?: string) => Promise<any>;\n  putDeleteCipher: (id: string) => Promise<any>;\n  putDeleteCipherAdmin: (id: string) => Promise<any>;\n  putDeleteManyCiphers: (request: CipherBulkDeleteRequest) => Promise<any>;\n  putDeleteManyCiphersAdmin: (request: CipherBulkDeleteRequest) => Promise<any>;\n  putRestoreCipher: (id: string) => Promise<CipherResponse>;\n  putRestoreCipherAdmin: (id: string) => Promise<CipherResponse>;\n  putRestoreManyCiphers: (\n    request: CipherBulkRestoreRequest\n  ) => Promise<ListResponse<CipherResponse>>;\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  postCipherAttachmentLegacy: (id: string, data: FormData) => Promise<CipherResponse>;\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  postCipherAttachmentAdminLegacy: (id: string, data: FormData) => Promise<CipherResponse>;\n  postCipherAttachment: (\n    id: string,\n    request: AttachmentRequest\n  ) => Promise<AttachmentUploadDataResponse>;\n  deleteCipherAttachment: (id: string, attachmentId: string) => Promise<any>;\n  deleteCipherAttachmentAdmin: (id: string, attachmentId: string) => Promise<any>;\n  postShareCipherAttachment: (\n    id: string,\n    attachmentId: string,\n    data: FormData,\n    organizationId: string\n  ) => Promise<any>;\n  renewAttachmentUploadUrl: (\n    id: string,\n    attachmentId: string\n  ) => Promise<AttachmentUploadDataResponse>;\n  postAttachmentFile: (id: string, attachmentId: string, data: FormData) => Promise<any>;\n\n  getUserCollections: () => Promise<ListResponse<CollectionResponse>>;\n  getCollections: (organizationId: string) => Promise<ListResponse<CollectionResponse>>;\n  getCollectionUsers: (organizationId: string, id: string) => Promise<SelectionReadOnlyResponse[]>;\n  getCollectionAccessDetails: (\n    organizationId: string,\n    id: string\n  ) => Promise<CollectionAccessDetailsResponse>;\n  getManyCollectionsWithAccessDetails: (\n    orgId: string\n  ) => Promise<ListResponse<CollectionAccessDetailsResponse>>;\n  postCollection: (\n    organizationId: string,\n    request: CollectionRequest\n  ) => Promise<CollectionResponse>;\n  putCollectionUsers: (\n    organizationId: string,\n    id: string,\n    request: SelectionReadOnlyRequest[]\n  ) => Promise<any>;\n  putCollection: (\n    organizationId: string,\n    id: string,\n    request: CollectionRequest\n  ) => Promise<CollectionResponse>;\n  deleteCollection: (organizationId: string, id: string) => Promise<any>;\n  deleteManyCollections: (request: CollectionBulkDeleteRequest) => Promise<any>;\n  deleteCollectionUser: (\n    organizationId: string,\n    id: string,\n    organizationUserId: string\n  ) => Promise<any>;\n\n  getGroupUsers: (organizationId: string, id: string) => Promise<string[]>;\n  putGroupUsers: (organizationId: string, id: string, request: string[]) => Promise<any>;\n  deleteGroupUser: (organizationId: string, id: string, organizationUserId: string) => Promise<any>;\n\n  getSync: () => Promise<SyncResponse>;\n  postPublicImportDirectory: (request: OrganizationImportRequest) => Promise<any>;\n\n  getSettingsDomains: () => Promise<DomainsResponse>;\n  putSettingsDomains: (request: UpdateDomainsRequest) => Promise<DomainsResponse>;\n\n  getTwoFactorProviders: () => Promise<ListResponse<TwoFactorProviderResponse>>;\n  getTwoFactorOrganizationProviders: (\n    organizationId: string\n  ) => Promise<ListResponse<TwoFactorProviderResponse>>;\n  getTwoFactorAuthenticator: (\n    request: SecretVerificationRequest\n  ) => Promise<TwoFactorAuthenticatorResponse>;\n  getTwoFactorEmail: (request: SecretVerificationRequest) => Promise<TwoFactorEmailResponse>;\n  getTwoFactorDuo: (request: SecretVerificationRequest) => Promise<TwoFactorDuoResponse>;\n  getTwoFactorOrganizationDuo: (\n    organizationId: string,\n    request: SecretVerificationRequest\n  ) => Promise<TwoFactorDuoResponse>;\n  getTwoFactorYubiKey: (request: SecretVerificationRequest) => Promise<TwoFactorYubiKeyResponse>;\n  getTwoFactorWebAuthn: (request: SecretVerificationRequest) => Promise<TwoFactorWebAuthnResponse>;\n  getTwoFactorWebAuthnChallenge: (request: SecretVerificationRequest) => Promise<ChallengeResponse>;\n  getTwoFactorRecover: (request: SecretVerificationRequest) => Promise<TwoFactorRecoverResponse>;\n  putTwoFactorAuthenticator: (\n    request: UpdateTwoFactorAuthenticatorRequest\n  ) => Promise<TwoFactorAuthenticatorResponse>;\n  putTwoFactorEmail: (request: UpdateTwoFactorEmailRequest) => Promise<TwoFactorEmailResponse>;\n  putTwoFactorDuo: (request: UpdateTwoFactorDuoRequest) => Promise<TwoFactorDuoResponse>;\n  putTwoFactorOrganizationDuo: (\n    organizationId: string,\n    request: UpdateTwoFactorDuoRequest\n  ) => Promise<TwoFactorDuoResponse>;\n  putTwoFactorYubiKey: (\n    request: UpdateTwoFactorYubioOtpRequest\n  ) => Promise<TwoFactorYubiKeyResponse>;\n  putTwoFactorWebAuthn: (\n    request: UpdateTwoFactorWebAuthnRequest\n  ) => Promise<TwoFactorWebAuthnResponse>;\n  deleteTwoFactorWebAuthn: (\n    request: UpdateTwoFactorWebAuthnDeleteRequest\n  ) => Promise<TwoFactorWebAuthnResponse>;\n  putTwoFactorDisable: (request: TwoFactorProviderRequest) => Promise<TwoFactorProviderResponse>;\n  putTwoFactorOrganizationDisable: (\n    organizationId: string,\n    request: TwoFactorProviderRequest\n  ) => Promise<TwoFactorProviderResponse>;\n  postTwoFactorRecover: (request: TwoFactorRecoveryRequest) => Promise<any>;\n  postTwoFactorEmailSetup: (request: TwoFactorEmailRequest) => Promise<any>;\n  postTwoFactorEmail: (request: TwoFactorEmailRequest) => Promise<any>;\n  getDeviceVerificationSettings: () => Promise<DeviceVerificationResponse>;\n  putDeviceVerificationSettings: (\n    request: DeviceVerificationRequest\n  ) => Promise<DeviceVerificationResponse>;\n  getKnownDevice: (email: string, deviceIdentifier: string) => Promise<boolean>;\n\n  getEmergencyAccessTrusted: () => Promise<ListResponse<EmergencyAccessGranteeDetailsResponse>>;\n  getEmergencyAccessGranted: () => Promise<ListResponse<EmergencyAccessGrantorDetailsResponse>>;\n  getEmergencyAccess: (id: string) => Promise<EmergencyAccessGranteeDetailsResponse>;\n  getEmergencyGrantorPolicies: (id: string) => Promise<ListResponse<PolicyResponse>>;\n  putEmergencyAccess: (id: string, request: EmergencyAccessUpdateRequest) => Promise<any>;\n  deleteEmergencyAccess: (id: string) => Promise<any>;\n  postEmergencyAccessInvite: (request: EmergencyAccessInviteRequest) => Promise<any>;\n  postEmergencyAccessReinvite: (id: string) => Promise<any>;\n  postEmergencyAccessAccept: (id: string, request: EmergencyAccessAcceptRequest) => Promise<any>;\n  postEmergencyAccessConfirm: (id: string, request: EmergencyAccessConfirmRequest) => Promise<any>;\n  postEmergencyAccessInitiate: (id: string) => Promise<any>;\n  postEmergencyAccessApprove: (id: string) => Promise<any>;\n  postEmergencyAccessReject: (id: string) => Promise<any>;\n  postEmergencyAccessTakeover: (id: string) => Promise<EmergencyAccessTakeoverResponse>;\n  postEmergencyAccessPassword: (\n    id: string,\n    request: EmergencyAccessPasswordRequest\n  ) => Promise<any>;\n  postEmergencyAccessView: (id: string) => Promise<EmergencyAccessViewResponse>;\n  getCloudCommunicationsEnabled: () => Promise<boolean>;\n  abstract getOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    id: string,\n    type: OrganizationConnectionType,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>>;\n  abstract createOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>>;\n  abstract updateOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig },\n    organizationConnectionId: string\n  ): Promise<OrganizationConnectionResponse<TConfig>>;\n  deleteOrganizationConnection: (id: string) => Promise<void>;\n  getPlans: () => Promise<ListResponse<PlanResponse>>;\n  getTaxRates: () => Promise<ListResponse<TaxRateResponse>>;\n\n  postProviderSetup: (id: string, request: ProviderSetupRequest) => Promise<ProviderResponse>;\n  getProvider: (id: string) => Promise<ProviderResponse>;\n  putProvider: (id: string, request: ProviderUpdateRequest) => Promise<ProviderResponse>;\n\n  getProviderUsers: (providerId: string) => Promise<ListResponse<ProviderUserUserDetailsResponse>>;\n  getProviderUser: (providerId: string, id: string) => Promise<ProviderUserResponse>;\n  postProviderUserInvite: (providerId: string, request: ProviderUserInviteRequest) => Promise<any>;\n  postProviderUserReinvite: (providerId: string, id: string) => Promise<any>;\n  postManyProviderUserReinvite: (\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ) => Promise<ListResponse<ProviderUserBulkResponse>>;\n  postProviderUserAccept: (\n    providerId: string,\n    id: string,\n    request: ProviderUserAcceptRequest\n  ) => Promise<any>;\n  postProviderUserConfirm: (\n    providerId: string,\n    id: string,\n    request: ProviderUserConfirmRequest\n  ) => Promise<any>;\n  postProviderUsersPublicKey: (\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ) => Promise<ListResponse<ProviderUserBulkPublicKeyResponse>>;\n  postProviderUserBulkConfirm: (\n    providerId: string,\n    request: ProviderUserBulkConfirmRequest\n  ) => Promise<ListResponse<ProviderUserBulkResponse>>;\n  putProviderUser: (\n    providerId: string,\n    id: string,\n    request: ProviderUserUpdateRequest\n  ) => Promise<any>;\n  deleteProviderUser: (organizationId: string, id: string) => Promise<any>;\n  deleteManyProviderUsers: (\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ) => Promise<ListResponse<ProviderUserBulkResponse>>;\n  getProviderClients: (\n    providerId: string\n  ) => Promise<ListResponse<ProviderOrganizationOrganizationDetailsResponse>>;\n  postProviderAddOrganization: (\n    providerId: string,\n    request: ProviderAddOrganizationRequest\n  ) => Promise<any>;\n  postProviderCreateOrganization: (\n    providerId: string,\n    request: ProviderOrganizationCreateRequest\n  ) => Promise<ProviderOrganizationResponse>;\n  deleteProviderOrganization: (providerId: string, organizationId: string) => Promise<any>;\n\n  getEvents: (start: string, end: string, token: string) => Promise<ListResponse<EventResponse>>;\n  getEventsCipher: (\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsOrganization: (\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsOrganizationUser: (\n    organizationId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsProvider: (\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  getEventsProviderUser: (\n    providerId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ) => Promise<ListResponse<EventResponse>>;\n  postEventsCollect: (request: EventRequest[]) => Promise<any>;\n\n  deleteSsoUser: (organizationId: string) => Promise<void>;\n  getSsoUserIdentifier: () => Promise<string>;\n\n  getUserPublicKey: (id: string) => Promise<UserKeyResponse>;\n\n  getHibpBreach: (username: string) => Promise<BreachAccountResponse[]>;\n\n  postBitPayInvoice: (request: BitPayInvoiceRequest) => Promise<string>;\n  postSetupPayment: () => Promise<string>;\n\n  getActiveBearerToken: () => Promise<string>;\n  fetch: (request: Request) => Promise<Response>;\n  nativeFetch: (request: Request) => Promise<Response>;\n\n  preValidateSso: (identifier: string) => Promise<SsoPreValidateResponse>;\n\n  postCreateSponsorship: (\n    sponsorshipOrgId: string,\n    request: OrganizationSponsorshipCreateRequest\n  ) => Promise<void>;\n  getSponsorshipSyncStatus: (\n    sponsoredOrgId: string\n  ) => Promise<OrganizationSponsorshipSyncStatusResponse>;\n  deleteRevokeSponsorship: (sponsoringOrganizationId: string) => Promise<void>;\n  deleteRemoveSponsorship: (sponsoringOrgId: string) => Promise<void>;\n  postPreValidateSponsorshipToken: (sponsorshipToken: string) => Promise<boolean>;\n  postRedeemSponsorship: (\n    sponsorshipToken: string,\n    request: OrganizationSponsorshipRedeemRequest\n  ) => Promise<void>;\n  postResendSponsorshipOffer: (sponsoringOrgId: string) => Promise<void>;\n\n  getUserKeyFromKeyConnector: (keyConnectorUrl: string) => Promise<KeyConnectorUserKeyResponse>;\n  postUserKeyToKeyConnector: (\n    keyConnectorUrl: string,\n    request: KeyConnectorUserKeyRequest\n  ) => Promise<void>;\n  getKeyConnectorAlive: (keyConnectorUrl: string) => Promise<void>;\n  getOrganizationExport: (organizationId: string) => Promise<OrganizationExportResponse>;\n}\n","import { LogLevelType } from \"../enums\";\n\nexport abstract class LogService {\n  debug: (message: string) => void;\n  info: (message: string) => void;\n  warning: (message: string) => void;\n  error: (message: string) => void;\n  write: (level: LogLevelType, message: string) => void;\n}\n","export abstract class LoginService {\n  getEmail: () => string;\n  getRememberEmail: () => boolean;\n  setEmail: (value: string) => void;\n  setRememberEmail: (value: boolean) => void;\n  clearValues: () => void;\n  saveEmailSettings: () => Promise<void>;\n}\n","import { Directive, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { PasswordHintRequest } from \"@bitwarden/common/auth/models/request/password-hint.request\";\n\n@Directive()\nexport class HintComponent implements OnInit {\n  email = \"\";\n  formPromise: Promise<any>;\n\n  protected successRoute = \"login\";\n  protected onSuccessfulSubmit: () => void;\n\n  constructor(\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected apiService: ApiService,\n    protected platformUtilsService: PlatformUtilsService,\n    private logService: LogService,\n    private loginService: LoginService\n  ) {}\n\n  ngOnInit(): void {\n    this.email = this.loginService.getEmail() ?? \"\";\n  }\n\n  async submit() {\n    if (this.email == null || this.email === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"emailRequired\")\n      );\n      return;\n    }\n    if (this.email.indexOf(\"@\") === -1) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidEmail\")\n      );\n      return;\n    }\n\n    try {\n      this.formPromise = this.apiService.postPasswordHint(new PasswordHintRequest(this.email));\n      await this.formPromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"masterPassSent\"));\n      if (this.onSuccessfulSubmit != null) {\n        this.onSuccessfulSubmit();\n      } else if (this.router != null) {\n        this.router.navigate([this.successRoute]);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n}\n","export abstract class ValidationService {\n  showError: (data: any) => string[];\n}\n","import { Directive, ElementRef, Input, OnChanges } from \"@angular/core\";\n\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { ValidationService } from \"@bitwarden/common/abstractions/validation.service\";\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\n\n/**\n * Provides error handling, in particular for any error returned by the server in an api call.\n * Attach it to a <form> element and provide the name of the class property that will hold the api call promise.\n * e.g. <form [appApiAction]=\"this.formPromise\">\n * Any errors/rejections that occur will be intercepted and displayed as error toasts.\n */\n@Directive({\n  selector: \"[appApiAction]\",\n})\nexport class ApiActionDirective implements OnChanges {\n  @Input() appApiAction: Promise<any>;\n\n  constructor(\n    private el: ElementRef,\n    private validationService: ValidationService,\n    private logService: LogService\n  ) {}\n\n  ngOnChanges(changes: any) {\n    if (this.appApiAction == null || this.appApiAction.then == null) {\n      return;\n    }\n\n    this.el.nativeElement.loading = true;\n\n    this.appApiAction.then(\n      (response: any) => {\n        this.el.nativeElement.loading = false;\n      },\n      (e: any) => {\n        this.el.nativeElement.loading = false;\n\n        if ((e as ErrorResponse).captchaRequired) {\n          this.logService.error(\"Captcha required error response: \" + e.getSingleMessage());\n          return;\n        }\n        this.logService?.error(`Received API exception: ${e}`);\n        this.validationService.showError(e);\n      }\n    );\n  }\n}\n","import { Directive, ElementRef, Input, NgZone } from \"@angular/core\";\nimport { take } from \"rxjs/operators\";\n\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\n@Directive({\n  selector: \"[appAutofocus]\",\n})\nexport class AutofocusDirective {\n  @Input() set appAutofocus(condition: boolean | string) {\n    this.autofocus = condition === \"\" || condition === true;\n  }\n\n  private autofocus: boolean;\n\n  constructor(private el: ElementRef, private ngZone: NgZone) {}\n\n  ngOnInit() {\n    if (!Utils.isMobileBrowser && this.autofocus) {\n      if (this.ngZone.isStable) {\n        this.el.nativeElement.focus();\n      } else {\n        this.ngZone.onStable.pipe(take(1)).subscribe(() => this.el.nativeElement.focus());\n      }\n    }\n  }\n}\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { HintComponent as BaseHintComponent } from \"@bitwarden/angular/auth/components/hint.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\n\n@Component({\n  selector: \"app-hint\",\n  templateUrl: \"hint.component.html\",\n})\nexport class HintComponent extends BaseHintComponent {\n  constructor(\n    router: Router,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    apiService: ApiService,\n    logService: LogService,\n    private route: ActivatedRoute,\n    loginService: LoginService\n  ) {\n    super(router, i18nService, apiService, platformUtilsService, logService, loginService);\n\n    super.onSuccessfulSubmit = async () => {\n      this.router.navigate([this.successRoute]);\n    };\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/login\">\n        {{ \"cancel\" | i18n }}\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"passwordHint\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"email\">{{ \"emailAddress\" | i18n }}</label>\n          <input\n            id=\"email\"\n            type=\"text\"\n            name=\"Email\"\n            aria-describedby=\"emailHelp\"\n            [(ngModel)]=\"email\"\n            required\n            appAutofocus\n            inputmode=\"email\"\n            appInputVerbatim=\"false\"\n          />\n        </div>\n      </div>\n      <div id=\"emailHelp\" class=\"box-footer\">\n        {{ \"enterEmailToGetHint\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","<div class=\"center-content\">\n  <div class=\"content login-page\">\n    <div class=\"logo-image\"></div>\n    <p class=\"lead text-center\">{{ \"loginOrCreateNewAccount\" | i18n }}</p>\n    <form #form [formGroup]=\"formGroup\" (ngSubmit)=\"submit()\">\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"email\">{{ \"emailAddress\" | i18n }}</label>\n            <input id=\"email\" type=\"email\" formControlName=\"email\" appInputVerbatim=\"false\" />\n          </div>\n          <div class=\"box-footer no-margin\" *ngIf=\"selfHostedDomain\">\n            {{ \"loggingInTo\" | i18n : selfHostedDomain }}\n          </div>\n          <div class=\"remember-email-check\">\n            <input\n              id=\"rememberEmail\"\n              type=\"checkbox\"\n              name=\"rememberEmail\"\n              formControlName=\"rememberEmail\"\n            />\n            <label for=\"rememberEmail\">{{ \"rememberEmail\" | i18n }}</label>\n          </div>\n        </div>\n      </div>\n      <div class=\"box\">\n        <button type=\"submit\" class=\"btn primary block\">\n          <b>{{ \"continue\" | i18n }}</b>\n        </button>\n      </div>\n    </form>\n    <p class=\"createAccountLink\">\n      {{ \"newAroundHere\" | i18n }}\n      <a routerLink=\"/register\" (click)=\"setFormValues()\">{{ \"createAccount\" | i18n }}</a>\n    </p>\n  </div>\n</div>\n<button type=\"button\" routerLink=\"/environment\" class=\"settings-icon\" (click)=\"setFormValues()\">\n  <i class=\"bwi bwi-cog-f bwi-lg\" aria-hidden=\"true\"></i><span>&nbsp;{{ \"settings\" | i18n }}</span>\n</button>\n","import { Component, OnInit } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\n\n@Component({\n  selector: \"app-home\",\n  templateUrl: \"home.component.html\",\n})\nexport class HomeComponent implements OnInit {\n  loginInitiated = false;\n\n  formGroup = this.formBuilder.group({\n    email: [\"\", [Validators.required, Validators.email]],\n    rememberEmail: [false],\n  });\n\n  constructor(\n    protected platformUtilsService: PlatformUtilsService,\n    private stateService: StateService,\n    private formBuilder: FormBuilder,\n    private router: Router,\n    private i18nService: I18nService,\n    private environmentService: EnvironmentService,\n    private route: ActivatedRoute,\n    private loginService: LoginService\n  ) {}\n  async ngOnInit(): Promise<void> {\n    let savedEmail = this.loginService.getEmail();\n    const rememberEmail = this.loginService.getRememberEmail();\n\n    if (savedEmail != null) {\n      this.formGroup.patchValue({\n        email: savedEmail,\n        rememberEmail: rememberEmail,\n      });\n    } else {\n      savedEmail = await this.stateService.getRememberedEmail();\n      if (savedEmail != null) {\n        this.formGroup.patchValue({\n          email: savedEmail,\n          rememberEmail: true,\n        });\n      }\n    }\n  }\n\n  submit() {\n    this.formGroup.markAllAsTouched();\n    if (this.formGroup.invalid) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccured\"),\n        this.i18nService.t(\"invalidEmail\")\n      );\n      return;\n    }\n\n    this.loginService.setEmail(this.formGroup.value.email);\n    this.loginService.setRememberEmail(this.formGroup.value.rememberEmail);\n    this.router.navigate([\"login\"], { queryParams: { email: this.formGroup.value.email } });\n  }\n\n  get selfHostedDomain() {\n    return this.environmentService.hasBaseUrl() ? this.environmentService.getWebVaultUrl() : null;\n  }\n\n  setFormValues() {\n    this.loginService.setEmail(this.formGroup.value.email);\n    this.loginService.setRememberEmail(this.formGroup.value.rememberEmail);\n  }\n}\n","export class SecretVerificationRequest {\n  masterPasswordHash: string;\n  otp: string;\n  authRequestAccessCode: string;\n}\n","import * as zxcvbn from \"zxcvbn\";\n\nimport { PasswordGeneratorPolicyOptions } from \"../../../admin-console/models/domain/password-generator-policy-options\";\n\nimport { GeneratedPasswordHistory } from \"./generated-password-history\";\nimport { PasswordGeneratorOptions } from \"./password-generator-options\";\n\nexport abstract class PasswordGenerationServiceAbstraction {\n  generatePassword: (options: PasswordGeneratorOptions) => Promise<string>;\n  generatePassphrase: (options: PasswordGeneratorOptions) => Promise<string>;\n  getOptions: () => Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]>;\n  enforcePasswordGeneratorPoliciesOnOptions: (\n    options: PasswordGeneratorOptions\n  ) => Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]>;\n  getPasswordGeneratorPolicyOptions: () => Promise<PasswordGeneratorPolicyOptions>;\n  saveOptions: (options: PasswordGeneratorOptions) => Promise<void>;\n  getHistory: () => Promise<GeneratedPasswordHistory[]>;\n  addHistory: (password: string) => Promise<void>;\n  clear: (userId?: string) => Promise<void>;\n  passwordStrength: (\n    password: string,\n    email?: string,\n    userInputs?: string[]\n  ) => zxcvbn.ZXCVBNResult;\n  normalizeOptions: (\n    options: PasswordGeneratorOptions,\n    enforcedPolicyOptions: PasswordGeneratorPolicyOptions\n  ) => void;\n}\n","import Domain from \"../../../models/domain/domain-base\";\n\nexport class PasswordGeneratorPolicyOptions extends Domain {\n  defaultType = \"\";\n  minLength = 0;\n  useUppercase = false;\n  useLowercase = false;\n  useNumbers = false;\n  numberCount = 0;\n  useSpecial = false;\n  specialCount = 0;\n  minNumberWords = 0;\n  capitalize = false;\n  includeNumber = false;\n\n  inEffect() {\n    return (\n      this.defaultType !== \"\" ||\n      this.minLength > 0 ||\n      this.numberCount > 0 ||\n      this.specialCount > 0 ||\n      this.useUppercase ||\n      this.useLowercase ||\n      this.useNumbers ||\n      this.useSpecial ||\n      this.minNumberWords > 0 ||\n      this.capitalize ||\n      this.includeNumber\n    );\n  }\n}\n","// EFF's Long Wordlist from https://www.eff.org/dice\nexport const EFFLongWordList = [\n  \"abacus\",\n  \"abdomen\",\n  \"abdominal\",\n  \"abide\",\n  \"abiding\",\n  \"ability\",\n  \"ablaze\",\n  \"able\",\n  \"abnormal\",\n  \"abrasion\",\n  \"abrasive\",\n  \"abreast\",\n  \"abridge\",\n  \"abroad\",\n  \"abruptly\",\n  \"absence\",\n  \"absentee\",\n  \"absently\",\n  \"absinthe\",\n  \"absolute\",\n  \"absolve\",\n  \"abstain\",\n  \"abstract\",\n  \"absurd\",\n  \"accent\",\n  \"acclaim\",\n  \"acclimate\",\n  \"accompany\",\n  \"account\",\n  \"accuracy\",\n  \"accurate\",\n  \"accustom\",\n  \"acetone\",\n  \"achiness\",\n  \"aching\",\n  \"acid\",\n  \"acorn\",\n  \"acquaint\",\n  \"acquire\",\n  \"acre\",\n  \"acrobat\",\n  \"acronym\",\n  \"acting\",\n  \"action\",\n  \"activate\",\n  \"activator\",\n  \"active\",\n  \"activism\",\n  \"activist\",\n  \"activity\",\n  \"actress\",\n  \"acts\",\n  \"acutely\",\n  \"acuteness\",\n  \"aeration\",\n  \"aerobics\",\n  \"aerosol\",\n  \"aerospace\",\n  \"afar\",\n  \"affair\",\n  \"affected\",\n  \"affecting\",\n  \"affection\",\n  \"affidavit\",\n  \"affiliate\",\n  \"affirm\",\n  \"affix\",\n  \"afflicted\",\n  \"affluent\",\n  \"afford\",\n  \"affront\",\n  \"aflame\",\n  \"afloat\",\n  \"aflutter\",\n  \"afoot\",\n  \"afraid\",\n  \"afterglow\",\n  \"afterlife\",\n  \"aftermath\",\n  \"aftermost\",\n  \"afternoon\",\n  \"aged\",\n  \"ageless\",\n  \"agency\",\n  \"agenda\",\n  \"agent\",\n  \"aggregate\",\n  \"aghast\",\n  \"agile\",\n  \"agility\",\n  \"aging\",\n  \"agnostic\",\n  \"agonize\",\n  \"agonizing\",\n  \"agony\",\n  \"agreeable\",\n  \"agreeably\",\n  \"agreed\",\n  \"agreeing\",\n  \"agreement\",\n  \"aground\",\n  \"ahead\",\n  \"ahoy\",\n  \"aide\",\n  \"aids\",\n  \"aim\",\n  \"ajar\",\n  \"alabaster\",\n  \"alarm\",\n  \"albatross\",\n  \"album\",\n  \"alfalfa\",\n  \"algebra\",\n  \"algorithm\",\n  \"alias\",\n  \"alibi\",\n  \"alienable\",\n  \"alienate\",\n  \"aliens\",\n  \"alike\",\n  \"alive\",\n  \"alkaline\",\n  \"alkalize\",\n  \"almanac\",\n  \"almighty\",\n  \"almost\",\n  \"aloe\",\n  \"aloft\",\n  \"aloha\",\n  \"alone\",\n  \"alongside\",\n  \"aloof\",\n  \"alphabet\",\n  \"alright\",\n  \"although\",\n  \"altitude\",\n  \"alto\",\n  \"aluminum\",\n  \"alumni\",\n  \"always\",\n  \"amaretto\",\n  \"amaze\",\n  \"amazingly\",\n  \"amber\",\n  \"ambiance\",\n  \"ambiguity\",\n  \"ambiguous\",\n  \"ambition\",\n  \"ambitious\",\n  \"ambulance\",\n  \"ambush\",\n  \"amendable\",\n  \"amendment\",\n  \"amends\",\n  \"amenity\",\n  \"amiable\",\n  \"amicably\",\n  \"amid\",\n  \"amigo\",\n  \"amino\",\n  \"amiss\",\n  \"ammonia\",\n  \"ammonium\",\n  \"amnesty\",\n  \"amniotic\",\n  \"among\",\n  \"amount\",\n  \"amperage\",\n  \"ample\",\n  \"amplifier\",\n  \"amplify\",\n  \"amply\",\n  \"amuck\",\n  \"amulet\",\n  \"amusable\",\n  \"amused\",\n  \"amusement\",\n  \"amuser\",\n  \"amusing\",\n  \"anaconda\",\n  \"anaerobic\",\n  \"anagram\",\n  \"anatomist\",\n  \"anatomy\",\n  \"anchor\",\n  \"anchovy\",\n  \"ancient\",\n  \"android\",\n  \"anemia\",\n  \"anemic\",\n  \"aneurism\",\n  \"anew\",\n  \"angelfish\",\n  \"angelic\",\n  \"anger\",\n  \"angled\",\n  \"angler\",\n  \"angles\",\n  \"angling\",\n  \"angrily\",\n  \"angriness\",\n  \"anguished\",\n  \"angular\",\n  \"animal\",\n  \"animate\",\n  \"animating\",\n  \"animation\",\n  \"animator\",\n  \"anime\",\n  \"animosity\",\n  \"ankle\",\n  \"annex\",\n  \"annotate\",\n  \"announcer\",\n  \"annoying\",\n  \"annually\",\n  \"annuity\",\n  \"anointer\",\n  \"another\",\n  \"answering\",\n  \"antacid\",\n  \"antarctic\",\n  \"anteater\",\n  \"antelope\",\n  \"antennae\",\n  \"anthem\",\n  \"anthill\",\n  \"anthology\",\n  \"antibody\",\n  \"antics\",\n  \"antidote\",\n  \"antihero\",\n  \"antiquely\",\n  \"antiques\",\n  \"antiquity\",\n  \"antirust\",\n  \"antitoxic\",\n  \"antitrust\",\n  \"antiviral\",\n  \"antivirus\",\n  \"antler\",\n  \"antonym\",\n  \"antsy\",\n  \"anvil\",\n  \"anybody\",\n  \"anyhow\",\n  \"anymore\",\n  \"anyone\",\n  \"anyplace\",\n  \"anything\",\n  \"anytime\",\n  \"anyway\",\n  \"anywhere\",\n  \"aorta\",\n  \"apache\",\n  \"apostle\",\n  \"appealing\",\n  \"appear\",\n  \"appease\",\n  \"appeasing\",\n  \"appendage\",\n  \"appendix\",\n  \"appetite\",\n  \"appetizer\",\n  \"applaud\",\n  \"applause\",\n  \"apple\",\n  \"appliance\",\n  \"applicant\",\n  \"applied\",\n  \"apply\",\n  \"appointee\",\n  \"appraisal\",\n  \"appraiser\",\n  \"apprehend\",\n  \"approach\",\n  \"approval\",\n  \"approve\",\n  \"apricot\",\n  \"april\",\n  \"apron\",\n  \"aptitude\",\n  \"aptly\",\n  \"aqua\",\n  \"aqueduct\",\n  \"arbitrary\",\n  \"arbitrate\",\n  \"ardently\",\n  \"area\",\n  \"arena\",\n  \"arguable\",\n  \"arguably\",\n  \"argue\",\n  \"arise\",\n  \"armadillo\",\n  \"armband\",\n  \"armchair\",\n  \"armed\",\n  \"armful\",\n  \"armhole\",\n  \"arming\",\n  \"armless\",\n  \"armoire\",\n  \"armored\",\n  \"armory\",\n  \"armrest\",\n  \"army\",\n  \"aroma\",\n  \"arose\",\n  \"around\",\n  \"arousal\",\n  \"arrange\",\n  \"array\",\n  \"arrest\",\n  \"arrival\",\n  \"arrive\",\n  \"arrogance\",\n  \"arrogant\",\n  \"arson\",\n  \"art\",\n  \"ascend\",\n  \"ascension\",\n  \"ascent\",\n  \"ascertain\",\n  \"ashamed\",\n  \"ashen\",\n  \"ashes\",\n  \"ashy\",\n  \"aside\",\n  \"askew\",\n  \"asleep\",\n  \"asparagus\",\n  \"aspect\",\n  \"aspirate\",\n  \"aspire\",\n  \"aspirin\",\n  \"astonish\",\n  \"astound\",\n  \"astride\",\n  \"astrology\",\n  \"astronaut\",\n  \"astronomy\",\n  \"astute\",\n  \"atlantic\",\n  \"atlas\",\n  \"atom\",\n  \"atonable\",\n  \"atop\",\n  \"atrium\",\n  \"atrocious\",\n  \"atrophy\",\n  \"attach\",\n  \"attain\",\n  \"attempt\",\n  \"attendant\",\n  \"attendee\",\n  \"attention\",\n  \"attentive\",\n  \"attest\",\n  \"attic\",\n  \"attire\",\n  \"attitude\",\n  \"attractor\",\n  \"attribute\",\n  \"atypical\",\n  \"auction\",\n  \"audacious\",\n  \"audacity\",\n  \"audible\",\n  \"audibly\",\n  \"audience\",\n  \"audio\",\n  \"audition\",\n  \"augmented\",\n  \"august\",\n  \"authentic\",\n  \"author\",\n  \"autism\",\n  \"autistic\",\n  \"autograph\",\n  \"automaker\",\n  \"automated\",\n  \"automatic\",\n  \"autopilot\",\n  \"available\",\n  \"avalanche\",\n  \"avatar\",\n  \"avenge\",\n  \"avenging\",\n  \"avenue\",\n  \"average\",\n  \"aversion\",\n  \"avert\",\n  \"aviation\",\n  \"aviator\",\n  \"avid\",\n  \"avoid\",\n  \"await\",\n  \"awaken\",\n  \"award\",\n  \"aware\",\n  \"awhile\",\n  \"awkward\",\n  \"awning\",\n  \"awoke\",\n  \"awry\",\n  \"axis\",\n  \"babble\",\n  \"babbling\",\n  \"babied\",\n  \"baboon\",\n  \"backache\",\n  \"backboard\",\n  \"backboned\",\n  \"backdrop\",\n  \"backed\",\n  \"backer\",\n  \"backfield\",\n  \"backfire\",\n  \"backhand\",\n  \"backing\",\n  \"backlands\",\n  \"backlash\",\n  \"backless\",\n  \"backlight\",\n  \"backlit\",\n  \"backlog\",\n  \"backpack\",\n  \"backpedal\",\n  \"backrest\",\n  \"backroom\",\n  \"backshift\",\n  \"backside\",\n  \"backslid\",\n  \"backspace\",\n  \"backspin\",\n  \"backstab\",\n  \"backstage\",\n  \"backtalk\",\n  \"backtrack\",\n  \"backup\",\n  \"backward\",\n  \"backwash\",\n  \"backwater\",\n  \"backyard\",\n  \"bacon\",\n  \"bacteria\",\n  \"bacterium\",\n  \"badass\",\n  \"badge\",\n  \"badland\",\n  \"badly\",\n  \"badness\",\n  \"baffle\",\n  \"baffling\",\n  \"bagel\",\n  \"bagful\",\n  \"baggage\",\n  \"bagged\",\n  \"baggie\",\n  \"bagginess\",\n  \"bagging\",\n  \"baggy\",\n  \"bagpipe\",\n  \"baguette\",\n  \"baked\",\n  \"bakery\",\n  \"bakeshop\",\n  \"baking\",\n  \"balance\",\n  \"balancing\",\n  \"balcony\",\n  \"balmy\",\n  \"balsamic\",\n  \"bamboo\",\n  \"banana\",\n  \"banish\",\n  \"banister\",\n  \"banjo\",\n  \"bankable\",\n  \"bankbook\",\n  \"banked\",\n  \"banker\",\n  \"banking\",\n  \"banknote\",\n  \"bankroll\",\n  \"banner\",\n  \"bannister\",\n  \"banshee\",\n  \"banter\",\n  \"barbecue\",\n  \"barbed\",\n  \"barbell\",\n  \"barber\",\n  \"barcode\",\n  \"barge\",\n  \"bargraph\",\n  \"barista\",\n  \"baritone\",\n  \"barley\",\n  \"barmaid\",\n  \"barman\",\n  \"barn\",\n  \"barometer\",\n  \"barrack\",\n  \"barracuda\",\n  \"barrel\",\n  \"barrette\",\n  \"barricade\",\n  \"barrier\",\n  \"barstool\",\n  \"bartender\",\n  \"barterer\",\n  \"bash\",\n  \"basically\",\n  \"basics\",\n  \"basil\",\n  \"basin\",\n  \"basis\",\n  \"basket\",\n  \"batboy\",\n  \"batch\",\n  \"bath\",\n  \"baton\",\n  \"bats\",\n  \"battalion\",\n  \"battered\",\n  \"battering\",\n  \"battery\",\n  \"batting\",\n  \"battle\",\n  \"bauble\",\n  \"bazooka\",\n  \"blabber\",\n  \"bladder\",\n  \"blade\",\n  \"blah\",\n  \"blame\",\n  \"blaming\",\n  \"blanching\",\n  \"blandness\",\n  \"blank\",\n  \"blaspheme\",\n  \"blasphemy\",\n  \"blast\",\n  \"blatancy\",\n  \"blatantly\",\n  \"blazer\",\n  \"blazing\",\n  \"bleach\",\n  \"bleak\",\n  \"bleep\",\n  \"blemish\",\n  \"blend\",\n  \"bless\",\n  \"blighted\",\n  \"blimp\",\n  \"bling\",\n  \"blinked\",\n  \"blinker\",\n  \"blinking\",\n  \"blinks\",\n  \"blip\",\n  \"blissful\",\n  \"blitz\",\n  \"blizzard\",\n  \"bloated\",\n  \"bloating\",\n  \"blob\",\n  \"blog\",\n  \"bloomers\",\n  \"blooming\",\n  \"blooper\",\n  \"blot\",\n  \"blouse\",\n  \"blubber\",\n  \"bluff\",\n  \"bluish\",\n  \"blunderer\",\n  \"blunt\",\n  \"blurb\",\n  \"blurred\",\n  \"blurry\",\n  \"blurt\",\n  \"blush\",\n  \"blustery\",\n  \"boaster\",\n  \"boastful\",\n  \"boasting\",\n  \"boat\",\n  \"bobbed\",\n  \"bobbing\",\n  \"bobble\",\n  \"bobcat\",\n  \"bobsled\",\n  \"bobtail\",\n  \"bodacious\",\n  \"body\",\n  \"bogged\",\n  \"boggle\",\n  \"bogus\",\n  \"boil\",\n  \"bok\",\n  \"bolster\",\n  \"bolt\",\n  \"bonanza\",\n  \"bonded\",\n  \"bonding\",\n  \"bondless\",\n  \"boned\",\n  \"bonehead\",\n  \"boneless\",\n  \"bonelike\",\n  \"boney\",\n  \"bonfire\",\n  \"bonnet\",\n  \"bonsai\",\n  \"bonus\",\n  \"bony\",\n  \"boogeyman\",\n  \"boogieman\",\n  \"book\",\n  \"boondocks\",\n  \"booted\",\n  \"booth\",\n  \"bootie\",\n  \"booting\",\n  \"bootlace\",\n  \"bootleg\",\n  \"boots\",\n  \"boozy\",\n  \"borax\",\n  \"boring\",\n  \"borough\",\n  \"borrower\",\n  \"borrowing\",\n  \"boss\",\n  \"botanical\",\n  \"botanist\",\n  \"botany\",\n  \"botch\",\n  \"both\",\n  \"bottle\",\n  \"bottling\",\n  \"bottom\",\n  \"bounce\",\n  \"bouncing\",\n  \"bouncy\",\n  \"bounding\",\n  \"boundless\",\n  \"bountiful\",\n  \"bovine\",\n  \"boxcar\",\n  \"boxer\",\n  \"boxing\",\n  \"boxlike\",\n  \"boxy\",\n  \"breach\",\n  \"breath\",\n  \"breeches\",\n  \"breeching\",\n  \"breeder\",\n  \"breeding\",\n  \"breeze\",\n  \"breezy\",\n  \"brethren\",\n  \"brewery\",\n  \"brewing\",\n  \"briar\",\n  \"bribe\",\n  \"brick\",\n  \"bride\",\n  \"bridged\",\n  \"brigade\",\n  \"bright\",\n  \"brilliant\",\n  \"brim\",\n  \"bring\",\n  \"brink\",\n  \"brisket\",\n  \"briskly\",\n  \"briskness\",\n  \"bristle\",\n  \"brittle\",\n  \"broadband\",\n  \"broadcast\",\n  \"broaden\",\n  \"broadly\",\n  \"broadness\",\n  \"broadside\",\n  \"broadways\",\n  \"broiler\",\n  \"broiling\",\n  \"broken\",\n  \"broker\",\n  \"bronchial\",\n  \"bronco\",\n  \"bronze\",\n  \"bronzing\",\n  \"brook\",\n  \"broom\",\n  \"brought\",\n  \"browbeat\",\n  \"brownnose\",\n  \"browse\",\n  \"browsing\",\n  \"bruising\",\n  \"brunch\",\n  \"brunette\",\n  \"brunt\",\n  \"brush\",\n  \"brussels\",\n  \"brute\",\n  \"brutishly\",\n  \"bubble\",\n  \"bubbling\",\n  \"bubbly\",\n  \"buccaneer\",\n  \"bucked\",\n  \"bucket\",\n  \"buckle\",\n  \"buckshot\",\n  \"buckskin\",\n  \"bucktooth\",\n  \"buckwheat\",\n  \"buddhism\",\n  \"buddhist\",\n  \"budding\",\n  \"buddy\",\n  \"budget\",\n  \"buffalo\",\n  \"buffed\",\n  \"buffer\",\n  \"buffing\",\n  \"buffoon\",\n  \"buggy\",\n  \"bulb\",\n  \"bulge\",\n  \"bulginess\",\n  \"bulgur\",\n  \"bulk\",\n  \"bulldog\",\n  \"bulldozer\",\n  \"bullfight\",\n  \"bullfrog\",\n  \"bullhorn\",\n  \"bullion\",\n  \"bullish\",\n  \"bullpen\",\n  \"bullring\",\n  \"bullseye\",\n  \"bullwhip\",\n  \"bully\",\n  \"bunch\",\n  \"bundle\",\n  \"bungee\",\n  \"bunion\",\n  \"bunkbed\",\n  \"bunkhouse\",\n  \"bunkmate\",\n  \"bunny\",\n  \"bunt\",\n  \"busboy\",\n  \"bush\",\n  \"busily\",\n  \"busload\",\n  \"bust\",\n  \"busybody\",\n  \"buzz\",\n  \"cabana\",\n  \"cabbage\",\n  \"cabbie\",\n  \"cabdriver\",\n  \"cable\",\n  \"caboose\",\n  \"cache\",\n  \"cackle\",\n  \"cacti\",\n  \"cactus\",\n  \"caddie\",\n  \"caddy\",\n  \"cadet\",\n  \"cadillac\",\n  \"cadmium\",\n  \"cage\",\n  \"cahoots\",\n  \"cake\",\n  \"calamari\",\n  \"calamity\",\n  \"calcium\",\n  \"calculate\",\n  \"calculus\",\n  \"caliber\",\n  \"calibrate\",\n  \"calm\",\n  \"caloric\",\n  \"calorie\",\n  \"calzone\",\n  \"camcorder\",\n  \"cameo\",\n  \"camera\",\n  \"camisole\",\n  \"camper\",\n  \"campfire\",\n  \"camping\",\n  \"campsite\",\n  \"campus\",\n  \"canal\",\n  \"canary\",\n  \"cancel\",\n  \"candied\",\n  \"candle\",\n  \"candy\",\n  \"cane\",\n  \"canine\",\n  \"canister\",\n  \"cannabis\",\n  \"canned\",\n  \"canning\",\n  \"cannon\",\n  \"cannot\",\n  \"canola\",\n  \"canon\",\n  \"canopener\",\n  \"canopy\",\n  \"canteen\",\n  \"canyon\",\n  \"capable\",\n  \"capably\",\n  \"capacity\",\n  \"cape\",\n  \"capillary\",\n  \"capital\",\n  \"capitol\",\n  \"capped\",\n  \"capricorn\",\n  \"capsize\",\n  \"capsule\",\n  \"caption\",\n  \"captivate\",\n  \"captive\",\n  \"captivity\",\n  \"capture\",\n  \"caramel\",\n  \"carat\",\n  \"caravan\",\n  \"carbon\",\n  \"cardboard\",\n  \"carded\",\n  \"cardiac\",\n  \"cardigan\",\n  \"cardinal\",\n  \"cardstock\",\n  \"carefully\",\n  \"caregiver\",\n  \"careless\",\n  \"caress\",\n  \"caretaker\",\n  \"cargo\",\n  \"caring\",\n  \"carless\",\n  \"carload\",\n  \"carmaker\",\n  \"carnage\",\n  \"carnation\",\n  \"carnival\",\n  \"carnivore\",\n  \"carol\",\n  \"carpenter\",\n  \"carpentry\",\n  \"carpool\",\n  \"carport\",\n  \"carried\",\n  \"carrot\",\n  \"carrousel\",\n  \"carry\",\n  \"cartel\",\n  \"cartload\",\n  \"carton\",\n  \"cartoon\",\n  \"cartridge\",\n  \"cartwheel\",\n  \"carve\",\n  \"carving\",\n  \"carwash\",\n  \"cascade\",\n  \"case\",\n  \"cash\",\n  \"casing\",\n  \"casino\",\n  \"casket\",\n  \"cassette\",\n  \"casually\",\n  \"casualty\",\n  \"catacomb\",\n  \"catalog\",\n  \"catalyst\",\n  \"catalyze\",\n  \"catapult\",\n  \"cataract\",\n  \"catatonic\",\n  \"catcall\",\n  \"catchable\",\n  \"catcher\",\n  \"catching\",\n  \"catchy\",\n  \"caterer\",\n  \"catering\",\n  \"catfight\",\n  \"catfish\",\n  \"cathedral\",\n  \"cathouse\",\n  \"catlike\",\n  \"catnap\",\n  \"catnip\",\n  \"catsup\",\n  \"cattail\",\n  \"cattishly\",\n  \"cattle\",\n  \"catty\",\n  \"catwalk\",\n  \"caucasian\",\n  \"caucus\",\n  \"causal\",\n  \"causation\",\n  \"cause\",\n  \"causing\",\n  \"cauterize\",\n  \"caution\",\n  \"cautious\",\n  \"cavalier\",\n  \"cavalry\",\n  \"caviar\",\n  \"cavity\",\n  \"cedar\",\n  \"celery\",\n  \"celestial\",\n  \"celibacy\",\n  \"celibate\",\n  \"celtic\",\n  \"cement\",\n  \"census\",\n  \"ceramics\",\n  \"ceremony\",\n  \"certainly\",\n  \"certainty\",\n  \"certified\",\n  \"certify\",\n  \"cesarean\",\n  \"cesspool\",\n  \"chafe\",\n  \"chaffing\",\n  \"chain\",\n  \"chair\",\n  \"chalice\",\n  \"challenge\",\n  \"chamber\",\n  \"chamomile\",\n  \"champion\",\n  \"chance\",\n  \"change\",\n  \"channel\",\n  \"chant\",\n  \"chaos\",\n  \"chaperone\",\n  \"chaplain\",\n  \"chapped\",\n  \"chaps\",\n  \"chapter\",\n  \"character\",\n  \"charbroil\",\n  \"charcoal\",\n  \"charger\",\n  \"charging\",\n  \"chariot\",\n  \"charity\",\n  \"charm\",\n  \"charred\",\n  \"charter\",\n  \"charting\",\n  \"chase\",\n  \"chasing\",\n  \"chaste\",\n  \"chastise\",\n  \"chastity\",\n  \"chatroom\",\n  \"chatter\",\n  \"chatting\",\n  \"chatty\",\n  \"cheating\",\n  \"cheddar\",\n  \"cheek\",\n  \"cheer\",\n  \"cheese\",\n  \"cheesy\",\n  \"chef\",\n  \"chemicals\",\n  \"chemist\",\n  \"chemo\",\n  \"cherisher\",\n  \"cherub\",\n  \"chess\",\n  \"chest\",\n  \"chevron\",\n  \"chevy\",\n  \"chewable\",\n  \"chewer\",\n  \"chewing\",\n  \"chewy\",\n  \"chief\",\n  \"chihuahua\",\n  \"childcare\",\n  \"childhood\",\n  \"childish\",\n  \"childless\",\n  \"childlike\",\n  \"chili\",\n  \"chill\",\n  \"chimp\",\n  \"chip\",\n  \"chirping\",\n  \"chirpy\",\n  \"chitchat\",\n  \"chivalry\",\n  \"chive\",\n  \"chloride\",\n  \"chlorine\",\n  \"choice\",\n  \"chokehold\",\n  \"choking\",\n  \"chomp\",\n  \"chooser\",\n  \"choosing\",\n  \"choosy\",\n  \"chop\",\n  \"chosen\",\n  \"chowder\",\n  \"chowtime\",\n  \"chrome\",\n  \"chubby\",\n  \"chuck\",\n  \"chug\",\n  \"chummy\",\n  \"chump\",\n  \"chunk\",\n  \"churn\",\n  \"chute\",\n  \"cider\",\n  \"cilantro\",\n  \"cinch\",\n  \"cinema\",\n  \"cinnamon\",\n  \"circle\",\n  \"circling\",\n  \"circular\",\n  \"circulate\",\n  \"circus\",\n  \"citable\",\n  \"citadel\",\n  \"citation\",\n  \"citizen\",\n  \"citric\",\n  \"citrus\",\n  \"city\",\n  \"civic\",\n  \"civil\",\n  \"clad\",\n  \"claim\",\n  \"clambake\",\n  \"clammy\",\n  \"clamor\",\n  \"clamp\",\n  \"clamshell\",\n  \"clang\",\n  \"clanking\",\n  \"clapped\",\n  \"clapper\",\n  \"clapping\",\n  \"clarify\",\n  \"clarinet\",\n  \"clarity\",\n  \"clash\",\n  \"clasp\",\n  \"class\",\n  \"clatter\",\n  \"clause\",\n  \"clavicle\",\n  \"claw\",\n  \"clay\",\n  \"clean\",\n  \"clear\",\n  \"cleat\",\n  \"cleaver\",\n  \"cleft\",\n  \"clench\",\n  \"clergyman\",\n  \"clerical\",\n  \"clerk\",\n  \"clever\",\n  \"clicker\",\n  \"client\",\n  \"climate\",\n  \"climatic\",\n  \"cling\",\n  \"clinic\",\n  \"clinking\",\n  \"clip\",\n  \"clique\",\n  \"cloak\",\n  \"clobber\",\n  \"clock\",\n  \"clone\",\n  \"cloning\",\n  \"closable\",\n  \"closure\",\n  \"clothes\",\n  \"clothing\",\n  \"cloud\",\n  \"clover\",\n  \"clubbed\",\n  \"clubbing\",\n  \"clubhouse\",\n  \"clump\",\n  \"clumsily\",\n  \"clumsy\",\n  \"clunky\",\n  \"clustered\",\n  \"clutch\",\n  \"clutter\",\n  \"coach\",\n  \"coagulant\",\n  \"coastal\",\n  \"coaster\",\n  \"coasting\",\n  \"coastland\",\n  \"coastline\",\n  \"coat\",\n  \"coauthor\",\n  \"cobalt\",\n  \"cobbler\",\n  \"cobweb\",\n  \"cocoa\",\n  \"coconut\",\n  \"cod\",\n  \"coeditor\",\n  \"coerce\",\n  \"coexist\",\n  \"coffee\",\n  \"cofounder\",\n  \"cognition\",\n  \"cognitive\",\n  \"cogwheel\",\n  \"coherence\",\n  \"coherent\",\n  \"cohesive\",\n  \"coil\",\n  \"coke\",\n  \"cola\",\n  \"cold\",\n  \"coleslaw\",\n  \"coliseum\",\n  \"collage\",\n  \"collapse\",\n  \"collar\",\n  \"collected\",\n  \"collector\",\n  \"collide\",\n  \"collie\",\n  \"collision\",\n  \"colonial\",\n  \"colonist\",\n  \"colonize\",\n  \"colony\",\n  \"colossal\",\n  \"colt\",\n  \"coma\",\n  \"come\",\n  \"comfort\",\n  \"comfy\",\n  \"comic\",\n  \"coming\",\n  \"comma\",\n  \"commence\",\n  \"commend\",\n  \"comment\",\n  \"commerce\",\n  \"commode\",\n  \"commodity\",\n  \"commodore\",\n  \"common\",\n  \"commotion\",\n  \"commute\",\n  \"commuting\",\n  \"compacted\",\n  \"compacter\",\n  \"compactly\",\n  \"compactor\",\n  \"companion\",\n  \"company\",\n  \"compare\",\n  \"compel\",\n  \"compile\",\n  \"comply\",\n  \"component\",\n  \"composed\",\n  \"composer\",\n  \"composite\",\n  \"compost\",\n  \"composure\",\n  \"compound\",\n  \"compress\",\n  \"comprised\",\n  \"computer\",\n  \"computing\",\n  \"comrade\",\n  \"concave\",\n  \"conceal\",\n  \"conceded\",\n  \"concept\",\n  \"concerned\",\n  \"concert\",\n  \"conch\",\n  \"concierge\",\n  \"concise\",\n  \"conclude\",\n  \"concrete\",\n  \"concur\",\n  \"condense\",\n  \"condiment\",\n  \"condition\",\n  \"condone\",\n  \"conducive\",\n  \"conductor\",\n  \"conduit\",\n  \"cone\",\n  \"confess\",\n  \"confetti\",\n  \"confidant\",\n  \"confident\",\n  \"confider\",\n  \"confiding\",\n  \"configure\",\n  \"confined\",\n  \"confining\",\n  \"confirm\",\n  \"conflict\",\n  \"conform\",\n  \"confound\",\n  \"confront\",\n  \"confused\",\n  \"confusing\",\n  \"confusion\",\n  \"congenial\",\n  \"congested\",\n  \"congrats\",\n  \"congress\",\n  \"conical\",\n  \"conjoined\",\n  \"conjure\",\n  \"conjuror\",\n  \"connected\",\n  \"connector\",\n  \"consensus\",\n  \"consent\",\n  \"console\",\n  \"consoling\",\n  \"consonant\",\n  \"constable\",\n  \"constant\",\n  \"constrain\",\n  \"constrict\",\n  \"construct\",\n  \"consult\",\n  \"consumer\",\n  \"consuming\",\n  \"contact\",\n  \"container\",\n  \"contempt\",\n  \"contend\",\n  \"contented\",\n  \"contently\",\n  \"contents\",\n  \"contest\",\n  \"context\",\n  \"contort\",\n  \"contour\",\n  \"contrite\",\n  \"control\",\n  \"contusion\",\n  \"convene\",\n  \"convent\",\n  \"copartner\",\n  \"cope\",\n  \"copied\",\n  \"copier\",\n  \"copilot\",\n  \"coping\",\n  \"copious\",\n  \"copper\",\n  \"copy\",\n  \"coral\",\n  \"cork\",\n  \"cornball\",\n  \"cornbread\",\n  \"corncob\",\n  \"cornea\",\n  \"corned\",\n  \"corner\",\n  \"cornfield\",\n  \"cornflake\",\n  \"cornhusk\",\n  \"cornmeal\",\n  \"cornstalk\",\n  \"corny\",\n  \"coronary\",\n  \"coroner\",\n  \"corporal\",\n  \"corporate\",\n  \"corral\",\n  \"correct\",\n  \"corridor\",\n  \"corrode\",\n  \"corroding\",\n  \"corrosive\",\n  \"corsage\",\n  \"corset\",\n  \"cortex\",\n  \"cosigner\",\n  \"cosmetics\",\n  \"cosmic\",\n  \"cosmos\",\n  \"cosponsor\",\n  \"cost\",\n  \"cottage\",\n  \"cotton\",\n  \"couch\",\n  \"cough\",\n  \"could\",\n  \"countable\",\n  \"countdown\",\n  \"counting\",\n  \"countless\",\n  \"country\",\n  \"county\",\n  \"courier\",\n  \"covenant\",\n  \"cover\",\n  \"coveted\",\n  \"coveting\",\n  \"coyness\",\n  \"cozily\",\n  \"coziness\",\n  \"cozy\",\n  \"crabbing\",\n  \"crabgrass\",\n  \"crablike\",\n  \"crabmeat\",\n  \"cradle\",\n  \"cradling\",\n  \"crafter\",\n  \"craftily\",\n  \"craftsman\",\n  \"craftwork\",\n  \"crafty\",\n  \"cramp\",\n  \"cranberry\",\n  \"crane\",\n  \"cranial\",\n  \"cranium\",\n  \"crank\",\n  \"crate\",\n  \"crave\",\n  \"craving\",\n  \"crawfish\",\n  \"crawlers\",\n  \"crawling\",\n  \"crayfish\",\n  \"crayon\",\n  \"crazed\",\n  \"crazily\",\n  \"craziness\",\n  \"crazy\",\n  \"creamed\",\n  \"creamer\",\n  \"creamlike\",\n  \"crease\",\n  \"creasing\",\n  \"creatable\",\n  \"create\",\n  \"creation\",\n  \"creative\",\n  \"creature\",\n  \"credible\",\n  \"credibly\",\n  \"credit\",\n  \"creed\",\n  \"creme\",\n  \"creole\",\n  \"crepe\",\n  \"crept\",\n  \"crescent\",\n  \"crested\",\n  \"cresting\",\n  \"crestless\",\n  \"crevice\",\n  \"crewless\",\n  \"crewman\",\n  \"crewmate\",\n  \"crib\",\n  \"cricket\",\n  \"cried\",\n  \"crier\",\n  \"crimp\",\n  \"crimson\",\n  \"cringe\",\n  \"cringing\",\n  \"crinkle\",\n  \"crinkly\",\n  \"crisped\",\n  \"crisping\",\n  \"crisply\",\n  \"crispness\",\n  \"crispy\",\n  \"criteria\",\n  \"critter\",\n  \"croak\",\n  \"crock\",\n  \"crook\",\n  \"croon\",\n  \"crop\",\n  \"cross\",\n  \"crouch\",\n  \"crouton\",\n  \"crowbar\",\n  \"crowd\",\n  \"crown\",\n  \"crucial\",\n  \"crudely\",\n  \"crudeness\",\n  \"cruelly\",\n  \"cruelness\",\n  \"cruelty\",\n  \"crumb\",\n  \"crummiest\",\n  \"crummy\",\n  \"crumpet\",\n  \"crumpled\",\n  \"cruncher\",\n  \"crunching\",\n  \"crunchy\",\n  \"crusader\",\n  \"crushable\",\n  \"crushed\",\n  \"crusher\",\n  \"crushing\",\n  \"crust\",\n  \"crux\",\n  \"crying\",\n  \"cryptic\",\n  \"crystal\",\n  \"cubbyhole\",\n  \"cube\",\n  \"cubical\",\n  \"cubicle\",\n  \"cucumber\",\n  \"cuddle\",\n  \"cuddly\",\n  \"cufflink\",\n  \"culinary\",\n  \"culminate\",\n  \"culpable\",\n  \"culprit\",\n  \"cultivate\",\n  \"cultural\",\n  \"culture\",\n  \"cupbearer\",\n  \"cupcake\",\n  \"cupid\",\n  \"cupped\",\n  \"cupping\",\n  \"curable\",\n  \"curator\",\n  \"curdle\",\n  \"cure\",\n  \"curfew\",\n  \"curing\",\n  \"curled\",\n  \"curler\",\n  \"curliness\",\n  \"curling\",\n  \"curly\",\n  \"curry\",\n  \"curse\",\n  \"cursive\",\n  \"cursor\",\n  \"curtain\",\n  \"curtly\",\n  \"curtsy\",\n  \"curvature\",\n  \"curve\",\n  \"curvy\",\n  \"cushy\",\n  \"cusp\",\n  \"cussed\",\n  \"custard\",\n  \"custodian\",\n  \"custody\",\n  \"customary\",\n  \"customer\",\n  \"customize\",\n  \"customs\",\n  \"cut\",\n  \"cycle\",\n  \"cyclic\",\n  \"cycling\",\n  \"cyclist\",\n  \"cylinder\",\n  \"cymbal\",\n  \"cytoplasm\",\n  \"cytoplast\",\n  \"dab\",\n  \"dad\",\n  \"daffodil\",\n  \"dagger\",\n  \"daily\",\n  \"daintily\",\n  \"dainty\",\n  \"dairy\",\n  \"daisy\",\n  \"dallying\",\n  \"dance\",\n  \"dancing\",\n  \"dandelion\",\n  \"dander\",\n  \"dandruff\",\n  \"dandy\",\n  \"danger\",\n  \"dangle\",\n  \"dangling\",\n  \"daredevil\",\n  \"dares\",\n  \"daringly\",\n  \"darkened\",\n  \"darkening\",\n  \"darkish\",\n  \"darkness\",\n  \"darkroom\",\n  \"darling\",\n  \"darn\",\n  \"dart\",\n  \"darwinism\",\n  \"dash\",\n  \"dastardly\",\n  \"data\",\n  \"datebook\",\n  \"dating\",\n  \"daughter\",\n  \"daunting\",\n  \"dawdler\",\n  \"dawn\",\n  \"daybed\",\n  \"daybreak\",\n  \"daycare\",\n  \"daydream\",\n  \"daylight\",\n  \"daylong\",\n  \"dayroom\",\n  \"daytime\",\n  \"dazzler\",\n  \"dazzling\",\n  \"deacon\",\n  \"deafening\",\n  \"deafness\",\n  \"dealer\",\n  \"dealing\",\n  \"dealmaker\",\n  \"dealt\",\n  \"dean\",\n  \"debatable\",\n  \"debate\",\n  \"debating\",\n  \"debit\",\n  \"debrief\",\n  \"debtless\",\n  \"debtor\",\n  \"debug\",\n  \"debunk\",\n  \"decade\",\n  \"decaf\",\n  \"decal\",\n  \"decathlon\",\n  \"decay\",\n  \"deceased\",\n  \"deceit\",\n  \"deceiver\",\n  \"deceiving\",\n  \"december\",\n  \"decency\",\n  \"decent\",\n  \"deception\",\n  \"deceptive\",\n  \"decibel\",\n  \"decidable\",\n  \"decimal\",\n  \"decimeter\",\n  \"decipher\",\n  \"deck\",\n  \"declared\",\n  \"decline\",\n  \"decode\",\n  \"decompose\",\n  \"decorated\",\n  \"decorator\",\n  \"decoy\",\n  \"decrease\",\n  \"decree\",\n  \"dedicate\",\n  \"dedicator\",\n  \"deduce\",\n  \"deduct\",\n  \"deed\",\n  \"deem\",\n  \"deepen\",\n  \"deeply\",\n  \"deepness\",\n  \"deface\",\n  \"defacing\",\n  \"defame\",\n  \"default\",\n  \"defeat\",\n  \"defection\",\n  \"defective\",\n  \"defendant\",\n  \"defender\",\n  \"defense\",\n  \"defensive\",\n  \"deferral\",\n  \"deferred\",\n  \"defiance\",\n  \"defiant\",\n  \"defile\",\n  \"defiling\",\n  \"define\",\n  \"definite\",\n  \"deflate\",\n  \"deflation\",\n  \"deflator\",\n  \"deflected\",\n  \"deflector\",\n  \"defog\",\n  \"deforest\",\n  \"defraud\",\n  \"defrost\",\n  \"deftly\",\n  \"defuse\",\n  \"defy\",\n  \"degraded\",\n  \"degrading\",\n  \"degrease\",\n  \"degree\",\n  \"dehydrate\",\n  \"deity\",\n  \"dejected\",\n  \"delay\",\n  \"delegate\",\n  \"delegator\",\n  \"delete\",\n  \"deletion\",\n  \"delicacy\",\n  \"delicate\",\n  \"delicious\",\n  \"delighted\",\n  \"delirious\",\n  \"delirium\",\n  \"deliverer\",\n  \"delivery\",\n  \"delouse\",\n  \"delta\",\n  \"deluge\",\n  \"delusion\",\n  \"deluxe\",\n  \"demanding\",\n  \"demeaning\",\n  \"demeanor\",\n  \"demise\",\n  \"democracy\",\n  \"democrat\",\n  \"demote\",\n  \"demotion\",\n  \"demystify\",\n  \"denatured\",\n  \"deniable\",\n  \"denial\",\n  \"denim\",\n  \"denote\",\n  \"dense\",\n  \"density\",\n  \"dental\",\n  \"dentist\",\n  \"denture\",\n  \"deny\",\n  \"deodorant\",\n  \"deodorize\",\n  \"departed\",\n  \"departure\",\n  \"depict\",\n  \"deplete\",\n  \"depletion\",\n  \"deplored\",\n  \"deploy\",\n  \"deport\",\n  \"depose\",\n  \"depraved\",\n  \"depravity\",\n  \"deprecate\",\n  \"depress\",\n  \"deprive\",\n  \"depth\",\n  \"deputize\",\n  \"deputy\",\n  \"derail\",\n  \"deranged\",\n  \"derby\",\n  \"derived\",\n  \"desecrate\",\n  \"deserve\",\n  \"deserving\",\n  \"designate\",\n  \"designed\",\n  \"designer\",\n  \"designing\",\n  \"deskbound\",\n  \"desktop\",\n  \"deskwork\",\n  \"desolate\",\n  \"despair\",\n  \"despise\",\n  \"despite\",\n  \"destiny\",\n  \"destitute\",\n  \"destruct\",\n  \"detached\",\n  \"detail\",\n  \"detection\",\n  \"detective\",\n  \"detector\",\n  \"detention\",\n  \"detergent\",\n  \"detest\",\n  \"detonate\",\n  \"detonator\",\n  \"detoxify\",\n  \"detract\",\n  \"deuce\",\n  \"devalue\",\n  \"deviancy\",\n  \"deviant\",\n  \"deviate\",\n  \"deviation\",\n  \"deviator\",\n  \"device\",\n  \"devious\",\n  \"devotedly\",\n  \"devotee\",\n  \"devotion\",\n  \"devourer\",\n  \"devouring\",\n  \"devoutly\",\n  \"dexterity\",\n  \"dexterous\",\n  \"diabetes\",\n  \"diabetic\",\n  \"diabolic\",\n  \"diagnoses\",\n  \"diagnosis\",\n  \"diagram\",\n  \"dial\",\n  \"diameter\",\n  \"diaper\",\n  \"diaphragm\",\n  \"diary\",\n  \"dice\",\n  \"dicing\",\n  \"dictate\",\n  \"dictation\",\n  \"dictator\",\n  \"difficult\",\n  \"diffused\",\n  \"diffuser\",\n  \"diffusion\",\n  \"diffusive\",\n  \"dig\",\n  \"dilation\",\n  \"diligence\",\n  \"diligent\",\n  \"dill\",\n  \"dilute\",\n  \"dime\",\n  \"diminish\",\n  \"dimly\",\n  \"dimmed\",\n  \"dimmer\",\n  \"dimness\",\n  \"dimple\",\n  \"diner\",\n  \"dingbat\",\n  \"dinghy\",\n  \"dinginess\",\n  \"dingo\",\n  \"dingy\",\n  \"dining\",\n  \"dinner\",\n  \"diocese\",\n  \"dioxide\",\n  \"diploma\",\n  \"dipped\",\n  \"dipper\",\n  \"dipping\",\n  \"directed\",\n  \"direction\",\n  \"directive\",\n  \"directly\",\n  \"directory\",\n  \"direness\",\n  \"dirtiness\",\n  \"disabled\",\n  \"disagree\",\n  \"disallow\",\n  \"disarm\",\n  \"disarray\",\n  \"disaster\",\n  \"disband\",\n  \"disbelief\",\n  \"disburse\",\n  \"discard\",\n  \"discern\",\n  \"discharge\",\n  \"disclose\",\n  \"discolor\",\n  \"discount\",\n  \"discourse\",\n  \"discover\",\n  \"discuss\",\n  \"disdain\",\n  \"disengage\",\n  \"disfigure\",\n  \"disgrace\",\n  \"dish\",\n  \"disinfect\",\n  \"disjoin\",\n  \"disk\",\n  \"dislike\",\n  \"disliking\",\n  \"dislocate\",\n  \"dislodge\",\n  \"disloyal\",\n  \"dismantle\",\n  \"dismay\",\n  \"dismiss\",\n  \"dismount\",\n  \"disobey\",\n  \"disorder\",\n  \"disown\",\n  \"disparate\",\n  \"disparity\",\n  \"dispatch\",\n  \"dispense\",\n  \"dispersal\",\n  \"dispersed\",\n  \"disperser\",\n  \"displace\",\n  \"display\",\n  \"displease\",\n  \"disposal\",\n  \"dispose\",\n  \"disprove\",\n  \"dispute\",\n  \"disregard\",\n  \"disrupt\",\n  \"dissuade\",\n  \"distance\",\n  \"distant\",\n  \"distaste\",\n  \"distill\",\n  \"distinct\",\n  \"distort\",\n  \"distract\",\n  \"distress\",\n  \"district\",\n  \"distrust\",\n  \"ditch\",\n  \"ditto\",\n  \"ditzy\",\n  \"dividable\",\n  \"divided\",\n  \"dividend\",\n  \"dividers\",\n  \"dividing\",\n  \"divinely\",\n  \"diving\",\n  \"divinity\",\n  \"divisible\",\n  \"divisibly\",\n  \"division\",\n  \"divisive\",\n  \"divorcee\",\n  \"dizziness\",\n  \"dizzy\",\n  \"doable\",\n  \"docile\",\n  \"dock\",\n  \"doctrine\",\n  \"document\",\n  \"dodge\",\n  \"dodgy\",\n  \"doily\",\n  \"doing\",\n  \"dole\",\n  \"dollar\",\n  \"dollhouse\",\n  \"dollop\",\n  \"dolly\",\n  \"dolphin\",\n  \"domain\",\n  \"domelike\",\n  \"domestic\",\n  \"dominion\",\n  \"dominoes\",\n  \"donated\",\n  \"donation\",\n  \"donator\",\n  \"donor\",\n  \"donut\",\n  \"doodle\",\n  \"doorbell\",\n  \"doorframe\",\n  \"doorknob\",\n  \"doorman\",\n  \"doormat\",\n  \"doornail\",\n  \"doorpost\",\n  \"doorstep\",\n  \"doorstop\",\n  \"doorway\",\n  \"doozy\",\n  \"dork\",\n  \"dormitory\",\n  \"dorsal\",\n  \"dosage\",\n  \"dose\",\n  \"dotted\",\n  \"doubling\",\n  \"douche\",\n  \"dove\",\n  \"down\",\n  \"dowry\",\n  \"doze\",\n  \"drab\",\n  \"dragging\",\n  \"dragonfly\",\n  \"dragonish\",\n  \"dragster\",\n  \"drainable\",\n  \"drainage\",\n  \"drained\",\n  \"drainer\",\n  \"drainpipe\",\n  \"dramatic\",\n  \"dramatize\",\n  \"drank\",\n  \"drapery\",\n  \"drastic\",\n  \"draw\",\n  \"dreaded\",\n  \"dreadful\",\n  \"dreadlock\",\n  \"dreamboat\",\n  \"dreamily\",\n  \"dreamland\",\n  \"dreamless\",\n  \"dreamlike\",\n  \"dreamt\",\n  \"dreamy\",\n  \"drearily\",\n  \"dreary\",\n  \"drench\",\n  \"dress\",\n  \"drew\",\n  \"dribble\",\n  \"dried\",\n  \"drier\",\n  \"drift\",\n  \"driller\",\n  \"drilling\",\n  \"drinkable\",\n  \"drinking\",\n  \"dripping\",\n  \"drippy\",\n  \"drivable\",\n  \"driven\",\n  \"driver\",\n  \"driveway\",\n  \"driving\",\n  \"drizzle\",\n  \"drizzly\",\n  \"drone\",\n  \"drool\",\n  \"droop\",\n  \"drop-down\",\n  \"dropbox\",\n  \"dropkick\",\n  \"droplet\",\n  \"dropout\",\n  \"dropper\",\n  \"drove\",\n  \"drown\",\n  \"drowsily\",\n  \"drudge\",\n  \"drum\",\n  \"dry\",\n  \"dubbed\",\n  \"dubiously\",\n  \"duchess\",\n  \"duckbill\",\n  \"ducking\",\n  \"duckling\",\n  \"ducktail\",\n  \"ducky\",\n  \"duct\",\n  \"dude\",\n  \"duffel\",\n  \"dugout\",\n  \"duh\",\n  \"duke\",\n  \"duller\",\n  \"dullness\",\n  \"duly\",\n  \"dumping\",\n  \"dumpling\",\n  \"dumpster\",\n  \"duo\",\n  \"dupe\",\n  \"duplex\",\n  \"duplicate\",\n  \"duplicity\",\n  \"durable\",\n  \"durably\",\n  \"duration\",\n  \"duress\",\n  \"during\",\n  \"dusk\",\n  \"dust\",\n  \"dutiful\",\n  \"duty\",\n  \"duvet\",\n  \"dwarf\",\n  \"dweeb\",\n  \"dwelled\",\n  \"dweller\",\n  \"dwelling\",\n  \"dwindle\",\n  \"dwindling\",\n  \"dynamic\",\n  \"dynamite\",\n  \"dynasty\",\n  \"dyslexia\",\n  \"dyslexic\",\n  \"each\",\n  \"eagle\",\n  \"earache\",\n  \"eardrum\",\n  \"earflap\",\n  \"earful\",\n  \"earlobe\",\n  \"early\",\n  \"earmark\",\n  \"earmuff\",\n  \"earphone\",\n  \"earpiece\",\n  \"earplugs\",\n  \"earring\",\n  \"earshot\",\n  \"earthen\",\n  \"earthlike\",\n  \"earthling\",\n  \"earthly\",\n  \"earthworm\",\n  \"earthy\",\n  \"earwig\",\n  \"easeful\",\n  \"easel\",\n  \"easiest\",\n  \"easily\",\n  \"easiness\",\n  \"easing\",\n  \"eastbound\",\n  \"eastcoast\",\n  \"easter\",\n  \"eastward\",\n  \"eatable\",\n  \"eaten\",\n  \"eatery\",\n  \"eating\",\n  \"eats\",\n  \"ebay\",\n  \"ebony\",\n  \"ebook\",\n  \"ecard\",\n  \"eccentric\",\n  \"echo\",\n  \"eclair\",\n  \"eclipse\",\n  \"ecologist\",\n  \"ecology\",\n  \"economic\",\n  \"economist\",\n  \"economy\",\n  \"ecosphere\",\n  \"ecosystem\",\n  \"edge\",\n  \"edginess\",\n  \"edging\",\n  \"edgy\",\n  \"edition\",\n  \"editor\",\n  \"educated\",\n  \"education\",\n  \"educator\",\n  \"eel\",\n  \"effective\",\n  \"effects\",\n  \"efficient\",\n  \"effort\",\n  \"eggbeater\",\n  \"egging\",\n  \"eggnog\",\n  \"eggplant\",\n  \"eggshell\",\n  \"egomaniac\",\n  \"egotism\",\n  \"egotistic\",\n  \"either\",\n  \"eject\",\n  \"elaborate\",\n  \"elastic\",\n  \"elated\",\n  \"elbow\",\n  \"eldercare\",\n  \"elderly\",\n  \"eldest\",\n  \"electable\",\n  \"election\",\n  \"elective\",\n  \"elephant\",\n  \"elevate\",\n  \"elevating\",\n  \"elevation\",\n  \"elevator\",\n  \"eleven\",\n  \"elf\",\n  \"eligible\",\n  \"eligibly\",\n  \"eliminate\",\n  \"elite\",\n  \"elitism\",\n  \"elixir\",\n  \"elk\",\n  \"ellipse\",\n  \"elliptic\",\n  \"elm\",\n  \"elongated\",\n  \"elope\",\n  \"eloquence\",\n  \"eloquent\",\n  \"elsewhere\",\n  \"elude\",\n  \"elusive\",\n  \"elves\",\n  \"email\",\n  \"embargo\",\n  \"embark\",\n  \"embassy\",\n  \"embattled\",\n  \"embellish\",\n  \"ember\",\n  \"embezzle\",\n  \"emblaze\",\n  \"emblem\",\n  \"embody\",\n  \"embolism\",\n  \"emboss\",\n  \"embroider\",\n  \"emcee\",\n  \"emerald\",\n  \"emergency\",\n  \"emission\",\n  \"emit\",\n  \"emote\",\n  \"emoticon\",\n  \"emotion\",\n  \"empathic\",\n  \"empathy\",\n  \"emperor\",\n  \"emphases\",\n  \"emphasis\",\n  \"emphasize\",\n  \"emphatic\",\n  \"empirical\",\n  \"employed\",\n  \"employee\",\n  \"employer\",\n  \"emporium\",\n  \"empower\",\n  \"emptier\",\n  \"emptiness\",\n  \"empty\",\n  \"emu\",\n  \"enable\",\n  \"enactment\",\n  \"enamel\",\n  \"enchanted\",\n  \"enchilada\",\n  \"encircle\",\n  \"enclose\",\n  \"enclosure\",\n  \"encode\",\n  \"encore\",\n  \"encounter\",\n  \"encourage\",\n  \"encroach\",\n  \"encrust\",\n  \"encrypt\",\n  \"endanger\",\n  \"endeared\",\n  \"endearing\",\n  \"ended\",\n  \"ending\",\n  \"endless\",\n  \"endnote\",\n  \"endocrine\",\n  \"endorphin\",\n  \"endorse\",\n  \"endowment\",\n  \"endpoint\",\n  \"endurable\",\n  \"endurance\",\n  \"enduring\",\n  \"energetic\",\n  \"energize\",\n  \"energy\",\n  \"enforced\",\n  \"enforcer\",\n  \"engaged\",\n  \"engaging\",\n  \"engine\",\n  \"engorge\",\n  \"engraved\",\n  \"engraver\",\n  \"engraving\",\n  \"engross\",\n  \"engulf\",\n  \"enhance\",\n  \"enigmatic\",\n  \"enjoyable\",\n  \"enjoyably\",\n  \"enjoyer\",\n  \"enjoying\",\n  \"enjoyment\",\n  \"enlarged\",\n  \"enlarging\",\n  \"enlighten\",\n  \"enlisted\",\n  \"enquirer\",\n  \"enrage\",\n  \"enrich\",\n  \"enroll\",\n  \"enslave\",\n  \"ensnare\",\n  \"ensure\",\n  \"entail\",\n  \"entangled\",\n  \"entering\",\n  \"entertain\",\n  \"enticing\",\n  \"entire\",\n  \"entitle\",\n  \"entity\",\n  \"entomb\",\n  \"entourage\",\n  \"entrap\",\n  \"entree\",\n  \"entrench\",\n  \"entrust\",\n  \"entryway\",\n  \"entwine\",\n  \"enunciate\",\n  \"envelope\",\n  \"enviable\",\n  \"enviably\",\n  \"envious\",\n  \"envision\",\n  \"envoy\",\n  \"envy\",\n  \"enzyme\",\n  \"epic\",\n  \"epidemic\",\n  \"epidermal\",\n  \"epidermis\",\n  \"epidural\",\n  \"epilepsy\",\n  \"epileptic\",\n  \"epilogue\",\n  \"epiphany\",\n  \"episode\",\n  \"equal\",\n  \"equate\",\n  \"equation\",\n  \"equator\",\n  \"equinox\",\n  \"equipment\",\n  \"equity\",\n  \"equivocal\",\n  \"eradicate\",\n  \"erasable\",\n  \"erased\",\n  \"eraser\",\n  \"erasure\",\n  \"ergonomic\",\n  \"errand\",\n  \"errant\",\n  \"erratic\",\n  \"error\",\n  \"erupt\",\n  \"escalate\",\n  \"escalator\",\n  \"escapable\",\n  \"escapade\",\n  \"escapist\",\n  \"escargot\",\n  \"eskimo\",\n  \"esophagus\",\n  \"espionage\",\n  \"espresso\",\n  \"esquire\",\n  \"essay\",\n  \"essence\",\n  \"essential\",\n  \"establish\",\n  \"estate\",\n  \"esteemed\",\n  \"estimate\",\n  \"estimator\",\n  \"estranged\",\n  \"estrogen\",\n  \"etching\",\n  \"eternal\",\n  \"eternity\",\n  \"ethanol\",\n  \"ether\",\n  \"ethically\",\n  \"ethics\",\n  \"euphemism\",\n  \"evacuate\",\n  \"evacuee\",\n  \"evade\",\n  \"evaluate\",\n  \"evaluator\",\n  \"evaporate\",\n  \"evasion\",\n  \"evasive\",\n  \"even\",\n  \"everglade\",\n  \"evergreen\",\n  \"everybody\",\n  \"everyday\",\n  \"everyone\",\n  \"evict\",\n  \"evidence\",\n  \"evident\",\n  \"evil\",\n  \"evoke\",\n  \"evolution\",\n  \"evolve\",\n  \"exact\",\n  \"exalted\",\n  \"example\",\n  \"excavate\",\n  \"excavator\",\n  \"exceeding\",\n  \"exception\",\n  \"excess\",\n  \"exchange\",\n  \"excitable\",\n  \"exciting\",\n  \"exclaim\",\n  \"exclude\",\n  \"excluding\",\n  \"exclusion\",\n  \"exclusive\",\n  \"excretion\",\n  \"excretory\",\n  \"excursion\",\n  \"excusable\",\n  \"excusably\",\n  \"excuse\",\n  \"exemplary\",\n  \"exemplify\",\n  \"exemption\",\n  \"exerciser\",\n  \"exert\",\n  \"exes\",\n  \"exfoliate\",\n  \"exhale\",\n  \"exhaust\",\n  \"exhume\",\n  \"exile\",\n  \"existing\",\n  \"exit\",\n  \"exodus\",\n  \"exonerate\",\n  \"exorcism\",\n  \"exorcist\",\n  \"expand\",\n  \"expanse\",\n  \"expansion\",\n  \"expansive\",\n  \"expectant\",\n  \"expedited\",\n  \"expediter\",\n  \"expel\",\n  \"expend\",\n  \"expenses\",\n  \"expensive\",\n  \"expert\",\n  \"expire\",\n  \"expiring\",\n  \"explain\",\n  \"expletive\",\n  \"explicit\",\n  \"explode\",\n  \"exploit\",\n  \"explore\",\n  \"exploring\",\n  \"exponent\",\n  \"exporter\",\n  \"exposable\",\n  \"expose\",\n  \"exposure\",\n  \"express\",\n  \"expulsion\",\n  \"exquisite\",\n  \"extended\",\n  \"extending\",\n  \"extent\",\n  \"extenuate\",\n  \"exterior\",\n  \"external\",\n  \"extinct\",\n  \"extortion\",\n  \"extradite\",\n  \"extras\",\n  \"extrovert\",\n  \"extrude\",\n  \"extruding\",\n  \"exuberant\",\n  \"fable\",\n  \"fabric\",\n  \"fabulous\",\n  \"facebook\",\n  \"facecloth\",\n  \"facedown\",\n  \"faceless\",\n  \"facelift\",\n  \"faceplate\",\n  \"faceted\",\n  \"facial\",\n  \"facility\",\n  \"facing\",\n  \"facsimile\",\n  \"faction\",\n  \"factoid\",\n  \"factor\",\n  \"factsheet\",\n  \"factual\",\n  \"faculty\",\n  \"fade\",\n  \"fading\",\n  \"failing\",\n  \"falcon\",\n  \"fall\",\n  \"false\",\n  \"falsify\",\n  \"fame\",\n  \"familiar\",\n  \"family\",\n  \"famine\",\n  \"famished\",\n  \"fanatic\",\n  \"fancied\",\n  \"fanciness\",\n  \"fancy\",\n  \"fanfare\",\n  \"fang\",\n  \"fanning\",\n  \"fantasize\",\n  \"fantastic\",\n  \"fantasy\",\n  \"fascism\",\n  \"fastball\",\n  \"faster\",\n  \"fasting\",\n  \"fastness\",\n  \"faucet\",\n  \"favorable\",\n  \"favorably\",\n  \"favored\",\n  \"favoring\",\n  \"favorite\",\n  \"fax\",\n  \"feast\",\n  \"federal\",\n  \"fedora\",\n  \"feeble\",\n  \"feed\",\n  \"feel\",\n  \"feisty\",\n  \"feline\",\n  \"felt-tip\",\n  \"feminine\",\n  \"feminism\",\n  \"feminist\",\n  \"feminize\",\n  \"femur\",\n  \"fence\",\n  \"fencing\",\n  \"fender\",\n  \"ferment\",\n  \"fernlike\",\n  \"ferocious\",\n  \"ferocity\",\n  \"ferret\",\n  \"ferris\",\n  \"ferry\",\n  \"fervor\",\n  \"fester\",\n  \"festival\",\n  \"festive\",\n  \"festivity\",\n  \"fetal\",\n  \"fetch\",\n  \"fever\",\n  \"fiber\",\n  \"fiction\",\n  \"fiddle\",\n  \"fiddling\",\n  \"fidelity\",\n  \"fidgeting\",\n  \"fidgety\",\n  \"fifteen\",\n  \"fifth\",\n  \"fiftieth\",\n  \"fifty\",\n  \"figment\",\n  \"figure\",\n  \"figurine\",\n  \"filing\",\n  \"filled\",\n  \"filler\",\n  \"filling\",\n  \"film\",\n  \"filter\",\n  \"filth\",\n  \"filtrate\",\n  \"finale\",\n  \"finalist\",\n  \"finalize\",\n  \"finally\",\n  \"finance\",\n  \"financial\",\n  \"finch\",\n  \"fineness\",\n  \"finer\",\n  \"finicky\",\n  \"finished\",\n  \"finisher\",\n  \"finishing\",\n  \"finite\",\n  \"finless\",\n  \"finlike\",\n  \"fiscally\",\n  \"fit\",\n  \"five\",\n  \"flaccid\",\n  \"flagman\",\n  \"flagpole\",\n  \"flagship\",\n  \"flagstick\",\n  \"flagstone\",\n  \"flail\",\n  \"flakily\",\n  \"flaky\",\n  \"flame\",\n  \"flammable\",\n  \"flanked\",\n  \"flanking\",\n  \"flannels\",\n  \"flap\",\n  \"flaring\",\n  \"flashback\",\n  \"flashbulb\",\n  \"flashcard\",\n  \"flashily\",\n  \"flashing\",\n  \"flashy\",\n  \"flask\",\n  \"flatbed\",\n  \"flatfoot\",\n  \"flatly\",\n  \"flatness\",\n  \"flatten\",\n  \"flattered\",\n  \"flatterer\",\n  \"flattery\",\n  \"flattop\",\n  \"flatware\",\n  \"flatworm\",\n  \"flavored\",\n  \"flavorful\",\n  \"flavoring\",\n  \"flaxseed\",\n  \"fled\",\n  \"fleshed\",\n  \"fleshy\",\n  \"flick\",\n  \"flier\",\n  \"flight\",\n  \"flinch\",\n  \"fling\",\n  \"flint\",\n  \"flip\",\n  \"flirt\",\n  \"float\",\n  \"flock\",\n  \"flogging\",\n  \"flop\",\n  \"floral\",\n  \"florist\",\n  \"floss\",\n  \"flounder\",\n  \"flyable\",\n  \"flyaway\",\n  \"flyer\",\n  \"flying\",\n  \"flyover\",\n  \"flypaper\",\n  \"foam\",\n  \"foe\",\n  \"fog\",\n  \"foil\",\n  \"folic\",\n  \"folk\",\n  \"follicle\",\n  \"follow\",\n  \"fondling\",\n  \"fondly\",\n  \"fondness\",\n  \"fondue\",\n  \"font\",\n  \"food\",\n  \"fool\",\n  \"footage\",\n  \"football\",\n  \"footbath\",\n  \"footboard\",\n  \"footer\",\n  \"footgear\",\n  \"foothill\",\n  \"foothold\",\n  \"footing\",\n  \"footless\",\n  \"footman\",\n  \"footnote\",\n  \"footpad\",\n  \"footpath\",\n  \"footprint\",\n  \"footrest\",\n  \"footsie\",\n  \"footsore\",\n  \"footwear\",\n  \"footwork\",\n  \"fossil\",\n  \"foster\",\n  \"founder\",\n  \"founding\",\n  \"fountain\",\n  \"fox\",\n  \"foyer\",\n  \"fraction\",\n  \"fracture\",\n  \"fragile\",\n  \"fragility\",\n  \"fragment\",\n  \"fragrance\",\n  \"fragrant\",\n  \"frail\",\n  \"frame\",\n  \"framing\",\n  \"frantic\",\n  \"fraternal\",\n  \"frayed\",\n  \"fraying\",\n  \"frays\",\n  \"freckled\",\n  \"freckles\",\n  \"freebase\",\n  \"freebee\",\n  \"freebie\",\n  \"freedom\",\n  \"freefall\",\n  \"freehand\",\n  \"freeing\",\n  \"freeload\",\n  \"freely\",\n  \"freemason\",\n  \"freeness\",\n  \"freestyle\",\n  \"freeware\",\n  \"freeway\",\n  \"freewill\",\n  \"freezable\",\n  \"freezing\",\n  \"freight\",\n  \"french\",\n  \"frenzied\",\n  \"frenzy\",\n  \"frequency\",\n  \"frequent\",\n  \"fresh\",\n  \"fretful\",\n  \"fretted\",\n  \"friction\",\n  \"friday\",\n  \"fridge\",\n  \"fried\",\n  \"friend\",\n  \"frighten\",\n  \"frightful\",\n  \"frigidity\",\n  \"frigidly\",\n  \"frill\",\n  \"fringe\",\n  \"frisbee\",\n  \"frisk\",\n  \"fritter\",\n  \"frivolous\",\n  \"frolic\",\n  \"from\",\n  \"front\",\n  \"frostbite\",\n  \"frosted\",\n  \"frostily\",\n  \"frosting\",\n  \"frostlike\",\n  \"frosty\",\n  \"froth\",\n  \"frown\",\n  \"frozen\",\n  \"fructose\",\n  \"frugality\",\n  \"frugally\",\n  \"fruit\",\n  \"frustrate\",\n  \"frying\",\n  \"gab\",\n  \"gaffe\",\n  \"gag\",\n  \"gainfully\",\n  \"gaining\",\n  \"gains\",\n  \"gala\",\n  \"gallantly\",\n  \"galleria\",\n  \"gallery\",\n  \"galley\",\n  \"gallon\",\n  \"gallows\",\n  \"gallstone\",\n  \"galore\",\n  \"galvanize\",\n  \"gambling\",\n  \"game\",\n  \"gaming\",\n  \"gamma\",\n  \"gander\",\n  \"gangly\",\n  \"gangrene\",\n  \"gangway\",\n  \"gap\",\n  \"garage\",\n  \"garbage\",\n  \"garden\",\n  \"gargle\",\n  \"garland\",\n  \"garlic\",\n  \"garment\",\n  \"garnet\",\n  \"garnish\",\n  \"garter\",\n  \"gas\",\n  \"gatherer\",\n  \"gathering\",\n  \"gating\",\n  \"gauging\",\n  \"gauntlet\",\n  \"gauze\",\n  \"gave\",\n  \"gawk\",\n  \"gazing\",\n  \"gear\",\n  \"gecko\",\n  \"geek\",\n  \"geiger\",\n  \"gem\",\n  \"gender\",\n  \"generic\",\n  \"generous\",\n  \"genetics\",\n  \"genre\",\n  \"gentile\",\n  \"gentleman\",\n  \"gently\",\n  \"gents\",\n  \"geography\",\n  \"geologic\",\n  \"geologist\",\n  \"geology\",\n  \"geometric\",\n  \"geometry\",\n  \"geranium\",\n  \"gerbil\",\n  \"geriatric\",\n  \"germicide\",\n  \"germinate\",\n  \"germless\",\n  \"germproof\",\n  \"gestate\",\n  \"gestation\",\n  \"gesture\",\n  \"getaway\",\n  \"getting\",\n  \"getup\",\n  \"giant\",\n  \"gibberish\",\n  \"giblet\",\n  \"giddily\",\n  \"giddiness\",\n  \"giddy\",\n  \"gift\",\n  \"gigabyte\",\n  \"gigahertz\",\n  \"gigantic\",\n  \"giggle\",\n  \"giggling\",\n  \"giggly\",\n  \"gigolo\",\n  \"gilled\",\n  \"gills\",\n  \"gimmick\",\n  \"girdle\",\n  \"giveaway\",\n  \"given\",\n  \"giver\",\n  \"giving\",\n  \"gizmo\",\n  \"gizzard\",\n  \"glacial\",\n  \"glacier\",\n  \"glade\",\n  \"gladiator\",\n  \"gladly\",\n  \"glamorous\",\n  \"glamour\",\n  \"glance\",\n  \"glancing\",\n  \"glandular\",\n  \"glare\",\n  \"glaring\",\n  \"glass\",\n  \"glaucoma\",\n  \"glazing\",\n  \"gleaming\",\n  \"gleeful\",\n  \"glider\",\n  \"gliding\",\n  \"glimmer\",\n  \"glimpse\",\n  \"glisten\",\n  \"glitch\",\n  \"glitter\",\n  \"glitzy\",\n  \"gloater\",\n  \"gloating\",\n  \"gloomily\",\n  \"gloomy\",\n  \"glorified\",\n  \"glorifier\",\n  \"glorify\",\n  \"glorious\",\n  \"glory\",\n  \"gloss\",\n  \"glove\",\n  \"glowing\",\n  \"glowworm\",\n  \"glucose\",\n  \"glue\",\n  \"gluten\",\n  \"glutinous\",\n  \"glutton\",\n  \"gnarly\",\n  \"gnat\",\n  \"goal\",\n  \"goatskin\",\n  \"goes\",\n  \"goggles\",\n  \"going\",\n  \"goldfish\",\n  \"goldmine\",\n  \"goldsmith\",\n  \"golf\",\n  \"goliath\",\n  \"gonad\",\n  \"gondola\",\n  \"gone\",\n  \"gong\",\n  \"good\",\n  \"gooey\",\n  \"goofball\",\n  \"goofiness\",\n  \"goofy\",\n  \"google\",\n  \"goon\",\n  \"gopher\",\n  \"gore\",\n  \"gorged\",\n  \"gorgeous\",\n  \"gory\",\n  \"gosling\",\n  \"gossip\",\n  \"gothic\",\n  \"gotten\",\n  \"gout\",\n  \"gown\",\n  \"grab\",\n  \"graceful\",\n  \"graceless\",\n  \"gracious\",\n  \"gradation\",\n  \"graded\",\n  \"grader\",\n  \"gradient\",\n  \"grading\",\n  \"gradually\",\n  \"graduate\",\n  \"graffiti\",\n  \"grafted\",\n  \"grafting\",\n  \"grain\",\n  \"granddad\",\n  \"grandkid\",\n  \"grandly\",\n  \"grandma\",\n  \"grandpa\",\n  \"grandson\",\n  \"granite\",\n  \"granny\",\n  \"granola\",\n  \"grant\",\n  \"granular\",\n  \"grape\",\n  \"graph\",\n  \"grapple\",\n  \"grappling\",\n  \"grasp\",\n  \"grass\",\n  \"gratified\",\n  \"gratify\",\n  \"grating\",\n  \"gratitude\",\n  \"gratuity\",\n  \"gravel\",\n  \"graveness\",\n  \"graves\",\n  \"graveyard\",\n  \"gravitate\",\n  \"gravity\",\n  \"gravy\",\n  \"gray\",\n  \"grazing\",\n  \"greasily\",\n  \"greedily\",\n  \"greedless\",\n  \"greedy\",\n  \"green\",\n  \"greeter\",\n  \"greeting\",\n  \"grew\",\n  \"greyhound\",\n  \"grid\",\n  \"grief\",\n  \"grievance\",\n  \"grieving\",\n  \"grievous\",\n  \"grill\",\n  \"grimace\",\n  \"grimacing\",\n  \"grime\",\n  \"griminess\",\n  \"grimy\",\n  \"grinch\",\n  \"grinning\",\n  \"grip\",\n  \"gristle\",\n  \"grit\",\n  \"groggily\",\n  \"groggy\",\n  \"groin\",\n  \"groom\",\n  \"groove\",\n  \"grooving\",\n  \"groovy\",\n  \"grope\",\n  \"ground\",\n  \"grouped\",\n  \"grout\",\n  \"grove\",\n  \"grower\",\n  \"growing\",\n  \"growl\",\n  \"grub\",\n  \"grudge\",\n  \"grudging\",\n  \"grueling\",\n  \"gruffly\",\n  \"grumble\",\n  \"grumbling\",\n  \"grumbly\",\n  \"grumpily\",\n  \"grunge\",\n  \"grunt\",\n  \"guacamole\",\n  \"guidable\",\n  \"guidance\",\n  \"guide\",\n  \"guiding\",\n  \"guileless\",\n  \"guise\",\n  \"gulf\",\n  \"gullible\",\n  \"gully\",\n  \"gulp\",\n  \"gumball\",\n  \"gumdrop\",\n  \"gumminess\",\n  \"gumming\",\n  \"gummy\",\n  \"gurgle\",\n  \"gurgling\",\n  \"guru\",\n  \"gush\",\n  \"gusto\",\n  \"gusty\",\n  \"gutless\",\n  \"guts\",\n  \"gutter\",\n  \"guy\",\n  \"guzzler\",\n  \"gyration\",\n  \"habitable\",\n  \"habitant\",\n  \"habitat\",\n  \"habitual\",\n  \"hacked\",\n  \"hacker\",\n  \"hacking\",\n  \"hacksaw\",\n  \"had\",\n  \"haggler\",\n  \"haiku\",\n  \"half\",\n  \"halogen\",\n  \"halt\",\n  \"halved\",\n  \"halves\",\n  \"hamburger\",\n  \"hamlet\",\n  \"hammock\",\n  \"hamper\",\n  \"hamster\",\n  \"hamstring\",\n  \"handbag\",\n  \"handball\",\n  \"handbook\",\n  \"handbrake\",\n  \"handcart\",\n  \"handclap\",\n  \"handclasp\",\n  \"handcraft\",\n  \"handcuff\",\n  \"handed\",\n  \"handful\",\n  \"handgrip\",\n  \"handgun\",\n  \"handheld\",\n  \"handiness\",\n  \"handiwork\",\n  \"handlebar\",\n  \"handled\",\n  \"handler\",\n  \"handling\",\n  \"handmade\",\n  \"handoff\",\n  \"handpick\",\n  \"handprint\",\n  \"handrail\",\n  \"handsaw\",\n  \"handset\",\n  \"handsfree\",\n  \"handshake\",\n  \"handstand\",\n  \"handwash\",\n  \"handwork\",\n  \"handwoven\",\n  \"handwrite\",\n  \"handyman\",\n  \"hangnail\",\n  \"hangout\",\n  \"hangover\",\n  \"hangup\",\n  \"hankering\",\n  \"hankie\",\n  \"hanky\",\n  \"haphazard\",\n  \"happening\",\n  \"happier\",\n  \"happiest\",\n  \"happily\",\n  \"happiness\",\n  \"happy\",\n  \"harbor\",\n  \"hardcopy\",\n  \"hardcore\",\n  \"hardcover\",\n  \"harddisk\",\n  \"hardened\",\n  \"hardener\",\n  \"hardening\",\n  \"hardhat\",\n  \"hardhead\",\n  \"hardiness\",\n  \"hardly\",\n  \"hardness\",\n  \"hardship\",\n  \"hardware\",\n  \"hardwired\",\n  \"hardwood\",\n  \"hardy\",\n  \"harmful\",\n  \"harmless\",\n  \"harmonica\",\n  \"harmonics\",\n  \"harmonize\",\n  \"harmony\",\n  \"harness\",\n  \"harpist\",\n  \"harsh\",\n  \"harvest\",\n  \"hash\",\n  \"hassle\",\n  \"haste\",\n  \"hastily\",\n  \"hastiness\",\n  \"hasty\",\n  \"hatbox\",\n  \"hatchback\",\n  \"hatchery\",\n  \"hatchet\",\n  \"hatching\",\n  \"hatchling\",\n  \"hate\",\n  \"hatless\",\n  \"hatred\",\n  \"haunt\",\n  \"haven\",\n  \"hazard\",\n  \"hazelnut\",\n  \"hazily\",\n  \"haziness\",\n  \"hazing\",\n  \"hazy\",\n  \"headache\",\n  \"headband\",\n  \"headboard\",\n  \"headcount\",\n  \"headdress\",\n  \"headed\",\n  \"header\",\n  \"headfirst\",\n  \"headgear\",\n  \"heading\",\n  \"headlamp\",\n  \"headless\",\n  \"headlock\",\n  \"headphone\",\n  \"headpiece\",\n  \"headrest\",\n  \"headroom\",\n  \"headscarf\",\n  \"headset\",\n  \"headsman\",\n  \"headstand\",\n  \"headstone\",\n  \"headway\",\n  \"headwear\",\n  \"heap\",\n  \"heat\",\n  \"heave\",\n  \"heavily\",\n  \"heaviness\",\n  \"heaving\",\n  \"hedge\",\n  \"hedging\",\n  \"heftiness\",\n  \"hefty\",\n  \"helium\",\n  \"helmet\",\n  \"helper\",\n  \"helpful\",\n  \"helping\",\n  \"helpless\",\n  \"helpline\",\n  \"hemlock\",\n  \"hemstitch\",\n  \"hence\",\n  \"henchman\",\n  \"henna\",\n  \"herald\",\n  \"herbal\",\n  \"herbicide\",\n  \"herbs\",\n  \"heritage\",\n  \"hermit\",\n  \"heroics\",\n  \"heroism\",\n  \"herring\",\n  \"herself\",\n  \"hertz\",\n  \"hesitancy\",\n  \"hesitant\",\n  \"hesitate\",\n  \"hexagon\",\n  \"hexagram\",\n  \"hubcap\",\n  \"huddle\",\n  \"huddling\",\n  \"huff\",\n  \"hug\",\n  \"hula\",\n  \"hulk\",\n  \"hull\",\n  \"human\",\n  \"humble\",\n  \"humbling\",\n  \"humbly\",\n  \"humid\",\n  \"humiliate\",\n  \"humility\",\n  \"humming\",\n  \"hummus\",\n  \"humongous\",\n  \"humorist\",\n  \"humorless\",\n  \"humorous\",\n  \"humpback\",\n  \"humped\",\n  \"humvee\",\n  \"hunchback\",\n  \"hundredth\",\n  \"hunger\",\n  \"hungrily\",\n  \"hungry\",\n  \"hunk\",\n  \"hunter\",\n  \"hunting\",\n  \"huntress\",\n  \"huntsman\",\n  \"hurdle\",\n  \"hurled\",\n  \"hurler\",\n  \"hurling\",\n  \"hurray\",\n  \"hurricane\",\n  \"hurried\",\n  \"hurry\",\n  \"hurt\",\n  \"husband\",\n  \"hush\",\n  \"husked\",\n  \"huskiness\",\n  \"hut\",\n  \"hybrid\",\n  \"hydrant\",\n  \"hydrated\",\n  \"hydration\",\n  \"hydrogen\",\n  \"hydroxide\",\n  \"hyperlink\",\n  \"hypertext\",\n  \"hyphen\",\n  \"hypnoses\",\n  \"hypnosis\",\n  \"hypnotic\",\n  \"hypnotism\",\n  \"hypnotist\",\n  \"hypnotize\",\n  \"hypocrisy\",\n  \"hypocrite\",\n  \"ibuprofen\",\n  \"ice\",\n  \"iciness\",\n  \"icing\",\n  \"icky\",\n  \"icon\",\n  \"icy\",\n  \"idealism\",\n  \"idealist\",\n  \"idealize\",\n  \"ideally\",\n  \"idealness\",\n  \"identical\",\n  \"identify\",\n  \"identity\",\n  \"ideology\",\n  \"idiocy\",\n  \"idiom\",\n  \"idly\",\n  \"igloo\",\n  \"ignition\",\n  \"ignore\",\n  \"iguana\",\n  \"illicitly\",\n  \"illusion\",\n  \"illusive\",\n  \"image\",\n  \"imaginary\",\n  \"imagines\",\n  \"imaging\",\n  \"imbecile\",\n  \"imitate\",\n  \"imitation\",\n  \"immature\",\n  \"immerse\",\n  \"immersion\",\n  \"imminent\",\n  \"immobile\",\n  \"immodest\",\n  \"immorally\",\n  \"immortal\",\n  \"immovable\",\n  \"immovably\",\n  \"immunity\",\n  \"immunize\",\n  \"impaired\",\n  \"impale\",\n  \"impart\",\n  \"impatient\",\n  \"impeach\",\n  \"impeding\",\n  \"impending\",\n  \"imperfect\",\n  \"imperial\",\n  \"impish\",\n  \"implant\",\n  \"implement\",\n  \"implicate\",\n  \"implicit\",\n  \"implode\",\n  \"implosion\",\n  \"implosive\",\n  \"imply\",\n  \"impolite\",\n  \"important\",\n  \"importer\",\n  \"impose\",\n  \"imposing\",\n  \"impotence\",\n  \"impotency\",\n  \"impotent\",\n  \"impound\",\n  \"imprecise\",\n  \"imprint\",\n  \"imprison\",\n  \"impromptu\",\n  \"improper\",\n  \"improve\",\n  \"improving\",\n  \"improvise\",\n  \"imprudent\",\n  \"impulse\",\n  \"impulsive\",\n  \"impure\",\n  \"impurity\",\n  \"iodine\",\n  \"iodize\",\n  \"ion\",\n  \"ipad\",\n  \"iphone\",\n  \"ipod\",\n  \"irate\",\n  \"irk\",\n  \"iron\",\n  \"irregular\",\n  \"irrigate\",\n  \"irritable\",\n  \"irritably\",\n  \"irritant\",\n  \"irritate\",\n  \"islamic\",\n  \"islamist\",\n  \"isolated\",\n  \"isolating\",\n  \"isolation\",\n  \"isotope\",\n  \"issue\",\n  \"issuing\",\n  \"italicize\",\n  \"italics\",\n  \"item\",\n  \"itinerary\",\n  \"itunes\",\n  \"ivory\",\n  \"ivy\",\n  \"jab\",\n  \"jackal\",\n  \"jacket\",\n  \"jackknife\",\n  \"jackpot\",\n  \"jailbird\",\n  \"jailbreak\",\n  \"jailer\",\n  \"jailhouse\",\n  \"jalapeno\",\n  \"jam\",\n  \"janitor\",\n  \"january\",\n  \"jargon\",\n  \"jarring\",\n  \"jasmine\",\n  \"jaundice\",\n  \"jaunt\",\n  \"java\",\n  \"jawed\",\n  \"jawless\",\n  \"jawline\",\n  \"jaws\",\n  \"jaybird\",\n  \"jaywalker\",\n  \"jazz\",\n  \"jeep\",\n  \"jeeringly\",\n  \"jellied\",\n  \"jelly\",\n  \"jersey\",\n  \"jester\",\n  \"jet\",\n  \"jiffy\",\n  \"jigsaw\",\n  \"jimmy\",\n  \"jingle\",\n  \"jingling\",\n  \"jinx\",\n  \"jitters\",\n  \"jittery\",\n  \"job\",\n  \"jockey\",\n  \"jockstrap\",\n  \"jogger\",\n  \"jogging\",\n  \"john\",\n  \"joining\",\n  \"jokester\",\n  \"jokingly\",\n  \"jolliness\",\n  \"jolly\",\n  \"jolt\",\n  \"jot\",\n  \"jovial\",\n  \"joyfully\",\n  \"joylessly\",\n  \"joyous\",\n  \"joyride\",\n  \"joystick\",\n  \"jubilance\",\n  \"jubilant\",\n  \"judge\",\n  \"judgingly\",\n  \"judicial\",\n  \"judiciary\",\n  \"judo\",\n  \"juggle\",\n  \"juggling\",\n  \"jugular\",\n  \"juice\",\n  \"juiciness\",\n  \"juicy\",\n  \"jujitsu\",\n  \"jukebox\",\n  \"july\",\n  \"jumble\",\n  \"jumbo\",\n  \"jump\",\n  \"junction\",\n  \"juncture\",\n  \"june\",\n  \"junior\",\n  \"juniper\",\n  \"junkie\",\n  \"junkman\",\n  \"junkyard\",\n  \"jurist\",\n  \"juror\",\n  \"jury\",\n  \"justice\",\n  \"justifier\",\n  \"justify\",\n  \"justly\",\n  \"justness\",\n  \"juvenile\",\n  \"kabob\",\n  \"kangaroo\",\n  \"karaoke\",\n  \"karate\",\n  \"karma\",\n  \"kebab\",\n  \"keenly\",\n  \"keenness\",\n  \"keep\",\n  \"keg\",\n  \"kelp\",\n  \"kennel\",\n  \"kept\",\n  \"kerchief\",\n  \"kerosene\",\n  \"kettle\",\n  \"kick\",\n  \"kiln\",\n  \"kilobyte\",\n  \"kilogram\",\n  \"kilometer\",\n  \"kilowatt\",\n  \"kilt\",\n  \"kimono\",\n  \"kindle\",\n  \"kindling\",\n  \"kindly\",\n  \"kindness\",\n  \"kindred\",\n  \"kinetic\",\n  \"kinfolk\",\n  \"king\",\n  \"kinship\",\n  \"kinsman\",\n  \"kinswoman\",\n  \"kissable\",\n  \"kisser\",\n  \"kissing\",\n  \"kitchen\",\n  \"kite\",\n  \"kitten\",\n  \"kitty\",\n  \"kiwi\",\n  \"kleenex\",\n  \"knapsack\",\n  \"knee\",\n  \"knelt\",\n  \"knickers\",\n  \"knoll\",\n  \"koala\",\n  \"kooky\",\n  \"kosher\",\n  \"krypton\",\n  \"kudos\",\n  \"kung\",\n  \"labored\",\n  \"laborer\",\n  \"laboring\",\n  \"laborious\",\n  \"labrador\",\n  \"ladder\",\n  \"ladies\",\n  \"ladle\",\n  \"ladybug\",\n  \"ladylike\",\n  \"lagged\",\n  \"lagging\",\n  \"lagoon\",\n  \"lair\",\n  \"lake\",\n  \"lance\",\n  \"landed\",\n  \"landfall\",\n  \"landfill\",\n  \"landing\",\n  \"landlady\",\n  \"landless\",\n  \"landline\",\n  \"landlord\",\n  \"landmark\",\n  \"landmass\",\n  \"landmine\",\n  \"landowner\",\n  \"landscape\",\n  \"landside\",\n  \"landslide\",\n  \"language\",\n  \"lankiness\",\n  \"lanky\",\n  \"lantern\",\n  \"lapdog\",\n  \"lapel\",\n  \"lapped\",\n  \"lapping\",\n  \"laptop\",\n  \"lard\",\n  \"large\",\n  \"lark\",\n  \"lash\",\n  \"lasso\",\n  \"last\",\n  \"latch\",\n  \"late\",\n  \"lather\",\n  \"latitude\",\n  \"latrine\",\n  \"latter\",\n  \"latticed\",\n  \"launch\",\n  \"launder\",\n  \"laundry\",\n  \"laurel\",\n  \"lavender\",\n  \"lavish\",\n  \"laxative\",\n  \"lazily\",\n  \"laziness\",\n  \"lazy\",\n  \"lecturer\",\n  \"left\",\n  \"legacy\",\n  \"legal\",\n  \"legend\",\n  \"legged\",\n  \"leggings\",\n  \"legible\",\n  \"legibly\",\n  \"legislate\",\n  \"lego\",\n  \"legroom\",\n  \"legume\",\n  \"legwarmer\",\n  \"legwork\",\n  \"lemon\",\n  \"lend\",\n  \"length\",\n  \"lens\",\n  \"lent\",\n  \"leotard\",\n  \"lesser\",\n  \"letdown\",\n  \"lethargic\",\n  \"lethargy\",\n  \"letter\",\n  \"lettuce\",\n  \"level\",\n  \"leverage\",\n  \"levers\",\n  \"levitate\",\n  \"levitator\",\n  \"liability\",\n  \"liable\",\n  \"liberty\",\n  \"librarian\",\n  \"library\",\n  \"licking\",\n  \"licorice\",\n  \"lid\",\n  \"life\",\n  \"lifter\",\n  \"lifting\",\n  \"liftoff\",\n  \"ligament\",\n  \"likely\",\n  \"likeness\",\n  \"likewise\",\n  \"liking\",\n  \"lilac\",\n  \"lilly\",\n  \"lily\",\n  \"limb\",\n  \"limeade\",\n  \"limelight\",\n  \"limes\",\n  \"limit\",\n  \"limping\",\n  \"limpness\",\n  \"line\",\n  \"lingo\",\n  \"linguini\",\n  \"linguist\",\n  \"lining\",\n  \"linked\",\n  \"linoleum\",\n  \"linseed\",\n  \"lint\",\n  \"lion\",\n  \"lip\",\n  \"liquefy\",\n  \"liqueur\",\n  \"liquid\",\n  \"lisp\",\n  \"list\",\n  \"litigate\",\n  \"litigator\",\n  \"litmus\",\n  \"litter\",\n  \"little\",\n  \"livable\",\n  \"lived\",\n  \"lively\",\n  \"liver\",\n  \"livestock\",\n  \"lividly\",\n  \"living\",\n  \"lizard\",\n  \"lubricant\",\n  \"lubricate\",\n  \"lucid\",\n  \"luckily\",\n  \"luckiness\",\n  \"luckless\",\n  \"lucrative\",\n  \"ludicrous\",\n  \"lugged\",\n  \"lukewarm\",\n  \"lullaby\",\n  \"lumber\",\n  \"luminance\",\n  \"luminous\",\n  \"lumpiness\",\n  \"lumping\",\n  \"lumpish\",\n  \"lunacy\",\n  \"lunar\",\n  \"lunchbox\",\n  \"luncheon\",\n  \"lunchroom\",\n  \"lunchtime\",\n  \"lung\",\n  \"lurch\",\n  \"lure\",\n  \"luridness\",\n  \"lurk\",\n  \"lushly\",\n  \"lushness\",\n  \"luster\",\n  \"lustfully\",\n  \"lustily\",\n  \"lustiness\",\n  \"lustrous\",\n  \"lusty\",\n  \"luxurious\",\n  \"luxury\",\n  \"lying\",\n  \"lyrically\",\n  \"lyricism\",\n  \"lyricist\",\n  \"lyrics\",\n  \"macarena\",\n  \"macaroni\",\n  \"macaw\",\n  \"mace\",\n  \"machine\",\n  \"machinist\",\n  \"magazine\",\n  \"magenta\",\n  \"maggot\",\n  \"magical\",\n  \"magician\",\n  \"magma\",\n  \"magnesium\",\n  \"magnetic\",\n  \"magnetism\",\n  \"magnetize\",\n  \"magnifier\",\n  \"magnify\",\n  \"magnitude\",\n  \"magnolia\",\n  \"mahogany\",\n  \"maimed\",\n  \"majestic\",\n  \"majesty\",\n  \"majorette\",\n  \"majority\",\n  \"makeover\",\n  \"maker\",\n  \"makeshift\",\n  \"making\",\n  \"malformed\",\n  \"malt\",\n  \"mama\",\n  \"mammal\",\n  \"mammary\",\n  \"mammogram\",\n  \"manager\",\n  \"managing\",\n  \"manatee\",\n  \"mandarin\",\n  \"mandate\",\n  \"mandatory\",\n  \"mandolin\",\n  \"manger\",\n  \"mangle\",\n  \"mango\",\n  \"mangy\",\n  \"manhandle\",\n  \"manhole\",\n  \"manhood\",\n  \"manhunt\",\n  \"manicotti\",\n  \"manicure\",\n  \"manifesto\",\n  \"manila\",\n  \"mankind\",\n  \"manlike\",\n  \"manliness\",\n  \"manly\",\n  \"manmade\",\n  \"manned\",\n  \"mannish\",\n  \"manor\",\n  \"manpower\",\n  \"mantis\",\n  \"mantra\",\n  \"manual\",\n  \"many\",\n  \"map\",\n  \"marathon\",\n  \"marauding\",\n  \"marbled\",\n  \"marbles\",\n  \"marbling\",\n  \"march\",\n  \"mardi\",\n  \"margarine\",\n  \"margarita\",\n  \"margin\",\n  \"marigold\",\n  \"marina\",\n  \"marine\",\n  \"marital\",\n  \"maritime\",\n  \"marlin\",\n  \"marmalade\",\n  \"maroon\",\n  \"married\",\n  \"marrow\",\n  \"marry\",\n  \"marshland\",\n  \"marshy\",\n  \"marsupial\",\n  \"marvelous\",\n  \"marxism\",\n  \"mascot\",\n  \"masculine\",\n  \"mashed\",\n  \"mashing\",\n  \"massager\",\n  \"masses\",\n  \"massive\",\n  \"mastiff\",\n  \"matador\",\n  \"matchbook\",\n  \"matchbox\",\n  \"matcher\",\n  \"matching\",\n  \"matchless\",\n  \"material\",\n  \"maternal\",\n  \"maternity\",\n  \"math\",\n  \"mating\",\n  \"matriarch\",\n  \"matrimony\",\n  \"matrix\",\n  \"matron\",\n  \"matted\",\n  \"matter\",\n  \"maturely\",\n  \"maturing\",\n  \"maturity\",\n  \"mauve\",\n  \"maverick\",\n  \"maximize\",\n  \"maximum\",\n  \"maybe\",\n  \"mayday\",\n  \"mayflower\",\n  \"moaner\",\n  \"moaning\",\n  \"mobile\",\n  \"mobility\",\n  \"mobilize\",\n  \"mobster\",\n  \"mocha\",\n  \"mocker\",\n  \"mockup\",\n  \"modified\",\n  \"modify\",\n  \"modular\",\n  \"modulator\",\n  \"module\",\n  \"moisten\",\n  \"moistness\",\n  \"moisture\",\n  \"molar\",\n  \"molasses\",\n  \"mold\",\n  \"molecular\",\n  \"molecule\",\n  \"molehill\",\n  \"mollusk\",\n  \"mom\",\n  \"monastery\",\n  \"monday\",\n  \"monetary\",\n  \"monetize\",\n  \"moneybags\",\n  \"moneyless\",\n  \"moneywise\",\n  \"mongoose\",\n  \"mongrel\",\n  \"monitor\",\n  \"monkhood\",\n  \"monogamy\",\n  \"monogram\",\n  \"monologue\",\n  \"monopoly\",\n  \"monorail\",\n  \"monotone\",\n  \"monotype\",\n  \"monoxide\",\n  \"monsieur\",\n  \"monsoon\",\n  \"monstrous\",\n  \"monthly\",\n  \"monument\",\n  \"moocher\",\n  \"moodiness\",\n  \"moody\",\n  \"mooing\",\n  \"moonbeam\",\n  \"mooned\",\n  \"moonlight\",\n  \"moonlike\",\n  \"moonlit\",\n  \"moonrise\",\n  \"moonscape\",\n  \"moonshine\",\n  \"moonstone\",\n  \"moonwalk\",\n  \"mop\",\n  \"morale\",\n  \"morality\",\n  \"morally\",\n  \"morbidity\",\n  \"morbidly\",\n  \"morphine\",\n  \"morphing\",\n  \"morse\",\n  \"mortality\",\n  \"mortally\",\n  \"mortician\",\n  \"mortified\",\n  \"mortify\",\n  \"mortuary\",\n  \"mosaic\",\n  \"mossy\",\n  \"most\",\n  \"mothball\",\n  \"mothproof\",\n  \"motion\",\n  \"motivate\",\n  \"motivator\",\n  \"motive\",\n  \"motocross\",\n  \"motor\",\n  \"motto\",\n  \"mountable\",\n  \"mountain\",\n  \"mounted\",\n  \"mounting\",\n  \"mourner\",\n  \"mournful\",\n  \"mouse\",\n  \"mousiness\",\n  \"moustache\",\n  \"mousy\",\n  \"mouth\",\n  \"movable\",\n  \"move\",\n  \"movie\",\n  \"moving\",\n  \"mower\",\n  \"mowing\",\n  \"much\",\n  \"muck\",\n  \"mud\",\n  \"mug\",\n  \"mulberry\",\n  \"mulch\",\n  \"mule\",\n  \"mulled\",\n  \"mullets\",\n  \"multiple\",\n  \"multiply\",\n  \"multitask\",\n  \"multitude\",\n  \"mumble\",\n  \"mumbling\",\n  \"mumbo\",\n  \"mummified\",\n  \"mummify\",\n  \"mummy\",\n  \"mumps\",\n  \"munchkin\",\n  \"mundane\",\n  \"municipal\",\n  \"muppet\",\n  \"mural\",\n  \"murkiness\",\n  \"murky\",\n  \"murmuring\",\n  \"muscular\",\n  \"museum\",\n  \"mushily\",\n  \"mushiness\",\n  \"mushroom\",\n  \"mushy\",\n  \"music\",\n  \"musket\",\n  \"muskiness\",\n  \"musky\",\n  \"mustang\",\n  \"mustard\",\n  \"muster\",\n  \"mustiness\",\n  \"musty\",\n  \"mutable\",\n  \"mutate\",\n  \"mutation\",\n  \"mute\",\n  \"mutilated\",\n  \"mutilator\",\n  \"mutiny\",\n  \"mutt\",\n  \"mutual\",\n  \"muzzle\",\n  \"myself\",\n  \"myspace\",\n  \"mystified\",\n  \"mystify\",\n  \"myth\",\n  \"nacho\",\n  \"nag\",\n  \"nail\",\n  \"name\",\n  \"naming\",\n  \"nanny\",\n  \"nanometer\",\n  \"nape\",\n  \"napkin\",\n  \"napped\",\n  \"napping\",\n  \"nappy\",\n  \"narrow\",\n  \"nastily\",\n  \"nastiness\",\n  \"national\",\n  \"native\",\n  \"nativity\",\n  \"natural\",\n  \"nature\",\n  \"naturist\",\n  \"nautical\",\n  \"navigate\",\n  \"navigator\",\n  \"navy\",\n  \"nearby\",\n  \"nearest\",\n  \"nearly\",\n  \"nearness\",\n  \"neatly\",\n  \"neatness\",\n  \"nebula\",\n  \"nebulizer\",\n  \"nectar\",\n  \"negate\",\n  \"negation\",\n  \"negative\",\n  \"neglector\",\n  \"negligee\",\n  \"negligent\",\n  \"negotiate\",\n  \"nemeses\",\n  \"nemesis\",\n  \"neon\",\n  \"nephew\",\n  \"nerd\",\n  \"nervous\",\n  \"nervy\",\n  \"nest\",\n  \"net\",\n  \"neurology\",\n  \"neuron\",\n  \"neurosis\",\n  \"neurotic\",\n  \"neuter\",\n  \"neutron\",\n  \"never\",\n  \"next\",\n  \"nibble\",\n  \"nickname\",\n  \"nicotine\",\n  \"niece\",\n  \"nifty\",\n  \"nimble\",\n  \"nimbly\",\n  \"nineteen\",\n  \"ninetieth\",\n  \"ninja\",\n  \"nintendo\",\n  \"ninth\",\n  \"nuclear\",\n  \"nuclei\",\n  \"nucleus\",\n  \"nugget\",\n  \"nullify\",\n  \"number\",\n  \"numbing\",\n  \"numbly\",\n  \"numbness\",\n  \"numeral\",\n  \"numerate\",\n  \"numerator\",\n  \"numeric\",\n  \"numerous\",\n  \"nuptials\",\n  \"nursery\",\n  \"nursing\",\n  \"nurture\",\n  \"nutcase\",\n  \"nutlike\",\n  \"nutmeg\",\n  \"nutrient\",\n  \"nutshell\",\n  \"nuttiness\",\n  \"nutty\",\n  \"nuzzle\",\n  \"nylon\",\n  \"oaf\",\n  \"oak\",\n  \"oasis\",\n  \"oat\",\n  \"obedience\",\n  \"obedient\",\n  \"obituary\",\n  \"object\",\n  \"obligate\",\n  \"obliged\",\n  \"oblivion\",\n  \"oblivious\",\n  \"oblong\",\n  \"obnoxious\",\n  \"oboe\",\n  \"obscure\",\n  \"obscurity\",\n  \"observant\",\n  \"observer\",\n  \"observing\",\n  \"obsessed\",\n  \"obsession\",\n  \"obsessive\",\n  \"obsolete\",\n  \"obstacle\",\n  \"obstinate\",\n  \"obstruct\",\n  \"obtain\",\n  \"obtrusive\",\n  \"obtuse\",\n  \"obvious\",\n  \"occultist\",\n  \"occupancy\",\n  \"occupant\",\n  \"occupier\",\n  \"occupy\",\n  \"ocean\",\n  \"ocelot\",\n  \"octagon\",\n  \"octane\",\n  \"october\",\n  \"octopus\",\n  \"ogle\",\n  \"oil\",\n  \"oink\",\n  \"ointment\",\n  \"okay\",\n  \"old\",\n  \"olive\",\n  \"olympics\",\n  \"omega\",\n  \"omen\",\n  \"ominous\",\n  \"omission\",\n  \"omit\",\n  \"omnivore\",\n  \"onboard\",\n  \"oncoming\",\n  \"ongoing\",\n  \"onion\",\n  \"online\",\n  \"onlooker\",\n  \"only\",\n  \"onscreen\",\n  \"onset\",\n  \"onshore\",\n  \"onslaught\",\n  \"onstage\",\n  \"onto\",\n  \"onward\",\n  \"onyx\",\n  \"oops\",\n  \"ooze\",\n  \"oozy\",\n  \"opacity\",\n  \"opal\",\n  \"open\",\n  \"operable\",\n  \"operate\",\n  \"operating\",\n  \"operation\",\n  \"operative\",\n  \"operator\",\n  \"opium\",\n  \"opossum\",\n  \"opponent\",\n  \"oppose\",\n  \"opposing\",\n  \"opposite\",\n  \"oppressed\",\n  \"oppressor\",\n  \"opt\",\n  \"opulently\",\n  \"osmosis\",\n  \"other\",\n  \"otter\",\n  \"ouch\",\n  \"ought\",\n  \"ounce\",\n  \"outage\",\n  \"outback\",\n  \"outbid\",\n  \"outboard\",\n  \"outbound\",\n  \"outbreak\",\n  \"outburst\",\n  \"outcast\",\n  \"outclass\",\n  \"outcome\",\n  \"outdated\",\n  \"outdoors\",\n  \"outer\",\n  \"outfield\",\n  \"outfit\",\n  \"outflank\",\n  \"outgoing\",\n  \"outgrow\",\n  \"outhouse\",\n  \"outing\",\n  \"outlast\",\n  \"outlet\",\n  \"outline\",\n  \"outlook\",\n  \"outlying\",\n  \"outmatch\",\n  \"outmost\",\n  \"outnumber\",\n  \"outplayed\",\n  \"outpost\",\n  \"outpour\",\n  \"output\",\n  \"outrage\",\n  \"outrank\",\n  \"outreach\",\n  \"outright\",\n  \"outscore\",\n  \"outsell\",\n  \"outshine\",\n  \"outshoot\",\n  \"outsider\",\n  \"outskirts\",\n  \"outsmart\",\n  \"outsource\",\n  \"outspoken\",\n  \"outtakes\",\n  \"outthink\",\n  \"outward\",\n  \"outweigh\",\n  \"outwit\",\n  \"oval\",\n  \"ovary\",\n  \"oven\",\n  \"overact\",\n  \"overall\",\n  \"overarch\",\n  \"overbid\",\n  \"overbill\",\n  \"overbite\",\n  \"overblown\",\n  \"overboard\",\n  \"overbook\",\n  \"overbuilt\",\n  \"overcast\",\n  \"overcoat\",\n  \"overcome\",\n  \"overcook\",\n  \"overcrowd\",\n  \"overdraft\",\n  \"overdrawn\",\n  \"overdress\",\n  \"overdrive\",\n  \"overdue\",\n  \"overeager\",\n  \"overeater\",\n  \"overexert\",\n  \"overfed\",\n  \"overfeed\",\n  \"overfill\",\n  \"overflow\",\n  \"overfull\",\n  \"overgrown\",\n  \"overhand\",\n  \"overhang\",\n  \"overhaul\",\n  \"overhead\",\n  \"overhear\",\n  \"overheat\",\n  \"overhung\",\n  \"overjoyed\",\n  \"overkill\",\n  \"overlabor\",\n  \"overlaid\",\n  \"overlap\",\n  \"overlay\",\n  \"overload\",\n  \"overlook\",\n  \"overlord\",\n  \"overlying\",\n  \"overnight\",\n  \"overpass\",\n  \"overpay\",\n  \"overplant\",\n  \"overplay\",\n  \"overpower\",\n  \"overprice\",\n  \"overrate\",\n  \"overreach\",\n  \"overreact\",\n  \"override\",\n  \"overripe\",\n  \"overrule\",\n  \"overrun\",\n  \"overshoot\",\n  \"overshot\",\n  \"oversight\",\n  \"oversized\",\n  \"oversleep\",\n  \"oversold\",\n  \"overspend\",\n  \"overstate\",\n  \"overstay\",\n  \"overstep\",\n  \"overstock\",\n  \"overstuff\",\n  \"oversweet\",\n  \"overtake\",\n  \"overthrow\",\n  \"overtime\",\n  \"overtly\",\n  \"overtone\",\n  \"overture\",\n  \"overturn\",\n  \"overuse\",\n  \"overvalue\",\n  \"overview\",\n  \"overwrite\",\n  \"owl\",\n  \"oxford\",\n  \"oxidant\",\n  \"oxidation\",\n  \"oxidize\",\n  \"oxidizing\",\n  \"oxygen\",\n  \"oxymoron\",\n  \"oyster\",\n  \"ozone\",\n  \"paced\",\n  \"pacemaker\",\n  \"pacific\",\n  \"pacifier\",\n  \"pacifism\",\n  \"pacifist\",\n  \"pacify\",\n  \"padded\",\n  \"padding\",\n  \"paddle\",\n  \"paddling\",\n  \"padlock\",\n  \"pagan\",\n  \"pager\",\n  \"paging\",\n  \"pajamas\",\n  \"palace\",\n  \"palatable\",\n  \"palm\",\n  \"palpable\",\n  \"palpitate\",\n  \"paltry\",\n  \"pampered\",\n  \"pamperer\",\n  \"pampers\",\n  \"pamphlet\",\n  \"panama\",\n  \"pancake\",\n  \"pancreas\",\n  \"panda\",\n  \"pandemic\",\n  \"pang\",\n  \"panhandle\",\n  \"panic\",\n  \"panning\",\n  \"panorama\",\n  \"panoramic\",\n  \"panther\",\n  \"pantomime\",\n  \"pantry\",\n  \"pants\",\n  \"pantyhose\",\n  \"paparazzi\",\n  \"papaya\",\n  \"paper\",\n  \"paprika\",\n  \"papyrus\",\n  \"parabola\",\n  \"parachute\",\n  \"parade\",\n  \"paradox\",\n  \"paragraph\",\n  \"parakeet\",\n  \"paralegal\",\n  \"paralyses\",\n  \"paralysis\",\n  \"paralyze\",\n  \"paramedic\",\n  \"parameter\",\n  \"paramount\",\n  \"parasail\",\n  \"parasite\",\n  \"parasitic\",\n  \"parcel\",\n  \"parched\",\n  \"parchment\",\n  \"pardon\",\n  \"parish\",\n  \"parka\",\n  \"parking\",\n  \"parkway\",\n  \"parlor\",\n  \"parmesan\",\n  \"parole\",\n  \"parrot\",\n  \"parsley\",\n  \"parsnip\",\n  \"partake\",\n  \"parted\",\n  \"parting\",\n  \"partition\",\n  \"partly\",\n  \"partner\",\n  \"partridge\",\n  \"party\",\n  \"passable\",\n  \"passably\",\n  \"passage\",\n  \"passcode\",\n  \"passenger\",\n  \"passerby\",\n  \"passing\",\n  \"passion\",\n  \"passive\",\n  \"passivism\",\n  \"passover\",\n  \"passport\",\n  \"password\",\n  \"pasta\",\n  \"pasted\",\n  \"pastel\",\n  \"pastime\",\n  \"pastor\",\n  \"pastrami\",\n  \"pasture\",\n  \"pasty\",\n  \"patchwork\",\n  \"patchy\",\n  \"paternal\",\n  \"paternity\",\n  \"path\",\n  \"patience\",\n  \"patient\",\n  \"patio\",\n  \"patriarch\",\n  \"patriot\",\n  \"patrol\",\n  \"patronage\",\n  \"patronize\",\n  \"pauper\",\n  \"pavement\",\n  \"paver\",\n  \"pavestone\",\n  \"pavilion\",\n  \"paving\",\n  \"pawing\",\n  \"payable\",\n  \"payback\",\n  \"paycheck\",\n  \"payday\",\n  \"payee\",\n  \"payer\",\n  \"paying\",\n  \"payment\",\n  \"payphone\",\n  \"payroll\",\n  \"pebble\",\n  \"pebbly\",\n  \"pecan\",\n  \"pectin\",\n  \"peculiar\",\n  \"peddling\",\n  \"pediatric\",\n  \"pedicure\",\n  \"pedigree\",\n  \"pedometer\",\n  \"pegboard\",\n  \"pelican\",\n  \"pellet\",\n  \"pelt\",\n  \"pelvis\",\n  \"penalize\",\n  \"penalty\",\n  \"pencil\",\n  \"pendant\",\n  \"pending\",\n  \"penholder\",\n  \"penknife\",\n  \"pennant\",\n  \"penniless\",\n  \"penny\",\n  \"penpal\",\n  \"pension\",\n  \"pentagon\",\n  \"pentagram\",\n  \"pep\",\n  \"perceive\",\n  \"percent\",\n  \"perch\",\n  \"percolate\",\n  \"perennial\",\n  \"perfected\",\n  \"perfectly\",\n  \"perfume\",\n  \"periscope\",\n  \"perish\",\n  \"perjurer\",\n  \"perjury\",\n  \"perkiness\",\n  \"perky\",\n  \"perm\",\n  \"peroxide\",\n  \"perpetual\",\n  \"perplexed\",\n  \"persecute\",\n  \"persevere\",\n  \"persuaded\",\n  \"persuader\",\n  \"pesky\",\n  \"peso\",\n  \"pessimism\",\n  \"pessimist\",\n  \"pester\",\n  \"pesticide\",\n  \"petal\",\n  \"petite\",\n  \"petition\",\n  \"petri\",\n  \"petroleum\",\n  \"petted\",\n  \"petticoat\",\n  \"pettiness\",\n  \"petty\",\n  \"petunia\",\n  \"phantom\",\n  \"phobia\",\n  \"phoenix\",\n  \"phonebook\",\n  \"phoney\",\n  \"phonics\",\n  \"phoniness\",\n  \"phony\",\n  \"phosphate\",\n  \"photo\",\n  \"phrase\",\n  \"phrasing\",\n  \"placard\",\n  \"placate\",\n  \"placidly\",\n  \"plank\",\n  \"planner\",\n  \"plant\",\n  \"plasma\",\n  \"plaster\",\n  \"plastic\",\n  \"plated\",\n  \"platform\",\n  \"plating\",\n  \"platinum\",\n  \"platonic\",\n  \"platter\",\n  \"platypus\",\n  \"plausible\",\n  \"plausibly\",\n  \"playable\",\n  \"playback\",\n  \"player\",\n  \"playful\",\n  \"playgroup\",\n  \"playhouse\",\n  \"playing\",\n  \"playlist\",\n  \"playmaker\",\n  \"playmate\",\n  \"playoff\",\n  \"playpen\",\n  \"playroom\",\n  \"playset\",\n  \"plaything\",\n  \"playtime\",\n  \"plaza\",\n  \"pleading\",\n  \"pleat\",\n  \"pledge\",\n  \"plentiful\",\n  \"plenty\",\n  \"plethora\",\n  \"plexiglas\",\n  \"pliable\",\n  \"plod\",\n  \"plop\",\n  \"plot\",\n  \"plow\",\n  \"ploy\",\n  \"pluck\",\n  \"plug\",\n  \"plunder\",\n  \"plunging\",\n  \"plural\",\n  \"plus\",\n  \"plutonium\",\n  \"plywood\",\n  \"poach\",\n  \"pod\",\n  \"poem\",\n  \"poet\",\n  \"pogo\",\n  \"pointed\",\n  \"pointer\",\n  \"pointing\",\n  \"pointless\",\n  \"pointy\",\n  \"poise\",\n  \"poison\",\n  \"poker\",\n  \"poking\",\n  \"polar\",\n  \"police\",\n  \"policy\",\n  \"polio\",\n  \"polish\",\n  \"politely\",\n  \"polka\",\n  \"polo\",\n  \"polyester\",\n  \"polygon\",\n  \"polygraph\",\n  \"polymer\",\n  \"poncho\",\n  \"pond\",\n  \"pony\",\n  \"popcorn\",\n  \"pope\",\n  \"poplar\",\n  \"popper\",\n  \"poppy\",\n  \"popsicle\",\n  \"populace\",\n  \"popular\",\n  \"populate\",\n  \"porcupine\",\n  \"pork\",\n  \"porous\",\n  \"porridge\",\n  \"portable\",\n  \"portal\",\n  \"portfolio\",\n  \"porthole\",\n  \"portion\",\n  \"portly\",\n  \"portside\",\n  \"poser\",\n  \"posh\",\n  \"posing\",\n  \"possible\",\n  \"possibly\",\n  \"possum\",\n  \"postage\",\n  \"postal\",\n  \"postbox\",\n  \"postcard\",\n  \"posted\",\n  \"poster\",\n  \"posting\",\n  \"postnasal\",\n  \"posture\",\n  \"postwar\",\n  \"pouch\",\n  \"pounce\",\n  \"pouncing\",\n  \"pound\",\n  \"pouring\",\n  \"pout\",\n  \"powdered\",\n  \"powdering\",\n  \"powdery\",\n  \"power\",\n  \"powwow\",\n  \"pox\",\n  \"praising\",\n  \"prance\",\n  \"prancing\",\n  \"pranker\",\n  \"prankish\",\n  \"prankster\",\n  \"prayer\",\n  \"praying\",\n  \"preacher\",\n  \"preaching\",\n  \"preachy\",\n  \"preamble\",\n  \"precinct\",\n  \"precise\",\n  \"precision\",\n  \"precook\",\n  \"precut\",\n  \"predator\",\n  \"predefine\",\n  \"predict\",\n  \"preface\",\n  \"prefix\",\n  \"preflight\",\n  \"preformed\",\n  \"pregame\",\n  \"pregnancy\",\n  \"pregnant\",\n  \"preheated\",\n  \"prelaunch\",\n  \"prelaw\",\n  \"prelude\",\n  \"premiere\",\n  \"premises\",\n  \"premium\",\n  \"prenatal\",\n  \"preoccupy\",\n  \"preorder\",\n  \"prepaid\",\n  \"prepay\",\n  \"preplan\",\n  \"preppy\",\n  \"preschool\",\n  \"prescribe\",\n  \"preseason\",\n  \"preset\",\n  \"preshow\",\n  \"president\",\n  \"presoak\",\n  \"press\",\n  \"presume\",\n  \"presuming\",\n  \"preteen\",\n  \"pretended\",\n  \"pretender\",\n  \"pretense\",\n  \"pretext\",\n  \"pretty\",\n  \"pretzel\",\n  \"prevail\",\n  \"prevalent\",\n  \"prevent\",\n  \"preview\",\n  \"previous\",\n  \"prewar\",\n  \"prewashed\",\n  \"prideful\",\n  \"pried\",\n  \"primal\",\n  \"primarily\",\n  \"primary\",\n  \"primate\",\n  \"primer\",\n  \"primp\",\n  \"princess\",\n  \"print\",\n  \"prior\",\n  \"prism\",\n  \"prison\",\n  \"prissy\",\n  \"pristine\",\n  \"privacy\",\n  \"private\",\n  \"privatize\",\n  \"prize\",\n  \"proactive\",\n  \"probable\",\n  \"probably\",\n  \"probation\",\n  \"probe\",\n  \"probing\",\n  \"probiotic\",\n  \"problem\",\n  \"procedure\",\n  \"process\",\n  \"proclaim\",\n  \"procreate\",\n  \"procurer\",\n  \"prodigal\",\n  \"prodigy\",\n  \"produce\",\n  \"product\",\n  \"profane\",\n  \"profanity\",\n  \"professed\",\n  \"professor\",\n  \"profile\",\n  \"profound\",\n  \"profusely\",\n  \"progeny\",\n  \"prognosis\",\n  \"program\",\n  \"progress\",\n  \"projector\",\n  \"prologue\",\n  \"prolonged\",\n  \"promenade\",\n  \"prominent\",\n  \"promoter\",\n  \"promotion\",\n  \"prompter\",\n  \"promptly\",\n  \"prone\",\n  \"prong\",\n  \"pronounce\",\n  \"pronto\",\n  \"proofing\",\n  \"proofread\",\n  \"proofs\",\n  \"propeller\",\n  \"properly\",\n  \"property\",\n  \"proponent\",\n  \"proposal\",\n  \"propose\",\n  \"props\",\n  \"prorate\",\n  \"protector\",\n  \"protegee\",\n  \"proton\",\n  \"prototype\",\n  \"protozoan\",\n  \"protract\",\n  \"protrude\",\n  \"proud\",\n  \"provable\",\n  \"proved\",\n  \"proven\",\n  \"provided\",\n  \"provider\",\n  \"providing\",\n  \"province\",\n  \"proving\",\n  \"provoke\",\n  \"provoking\",\n  \"provolone\",\n  \"prowess\",\n  \"prowler\",\n  \"prowling\",\n  \"proximity\",\n  \"proxy\",\n  \"prozac\",\n  \"prude\",\n  \"prudishly\",\n  \"prune\",\n  \"pruning\",\n  \"pry\",\n  \"psychic\",\n  \"public\",\n  \"publisher\",\n  \"pucker\",\n  \"pueblo\",\n  \"pug\",\n  \"pull\",\n  \"pulmonary\",\n  \"pulp\",\n  \"pulsate\",\n  \"pulse\",\n  \"pulverize\",\n  \"puma\",\n  \"pumice\",\n  \"pummel\",\n  \"punch\",\n  \"punctual\",\n  \"punctuate\",\n  \"punctured\",\n  \"pungent\",\n  \"punisher\",\n  \"punk\",\n  \"pupil\",\n  \"puppet\",\n  \"puppy\",\n  \"purchase\",\n  \"pureblood\",\n  \"purebred\",\n  \"purely\",\n  \"pureness\",\n  \"purgatory\",\n  \"purge\",\n  \"purging\",\n  \"purifier\",\n  \"purify\",\n  \"purist\",\n  \"puritan\",\n  \"purity\",\n  \"purple\",\n  \"purplish\",\n  \"purposely\",\n  \"purr\",\n  \"purse\",\n  \"pursuable\",\n  \"pursuant\",\n  \"pursuit\",\n  \"purveyor\",\n  \"pushcart\",\n  \"pushchair\",\n  \"pusher\",\n  \"pushiness\",\n  \"pushing\",\n  \"pushover\",\n  \"pushpin\",\n  \"pushup\",\n  \"pushy\",\n  \"putdown\",\n  \"putt\",\n  \"puzzle\",\n  \"puzzling\",\n  \"pyramid\",\n  \"pyromania\",\n  \"python\",\n  \"quack\",\n  \"quadrant\",\n  \"quail\",\n  \"quaintly\",\n  \"quake\",\n  \"quaking\",\n  \"qualified\",\n  \"qualifier\",\n  \"qualify\",\n  \"quality\",\n  \"qualm\",\n  \"quantum\",\n  \"quarrel\",\n  \"quarry\",\n  \"quartered\",\n  \"quarterly\",\n  \"quarters\",\n  \"quartet\",\n  \"quench\",\n  \"query\",\n  \"quicken\",\n  \"quickly\",\n  \"quickness\",\n  \"quicksand\",\n  \"quickstep\",\n  \"quiet\",\n  \"quill\",\n  \"quilt\",\n  \"quintet\",\n  \"quintuple\",\n  \"quirk\",\n  \"quit\",\n  \"quiver\",\n  \"quizzical\",\n  \"quotable\",\n  \"quotation\",\n  \"quote\",\n  \"rabid\",\n  \"race\",\n  \"racing\",\n  \"racism\",\n  \"rack\",\n  \"racoon\",\n  \"radar\",\n  \"radial\",\n  \"radiance\",\n  \"radiantly\",\n  \"radiated\",\n  \"radiation\",\n  \"radiator\",\n  \"radio\",\n  \"radish\",\n  \"raffle\",\n  \"raft\",\n  \"rage\",\n  \"ragged\",\n  \"raging\",\n  \"ragweed\",\n  \"raider\",\n  \"railcar\",\n  \"railing\",\n  \"railroad\",\n  \"railway\",\n  \"raisin\",\n  \"rake\",\n  \"raking\",\n  \"rally\",\n  \"ramble\",\n  \"rambling\",\n  \"ramp\",\n  \"ramrod\",\n  \"ranch\",\n  \"rancidity\",\n  \"random\",\n  \"ranged\",\n  \"ranger\",\n  \"ranging\",\n  \"ranked\",\n  \"ranking\",\n  \"ransack\",\n  \"ranting\",\n  \"rants\",\n  \"rare\",\n  \"rarity\",\n  \"rascal\",\n  \"rash\",\n  \"rasping\",\n  \"ravage\",\n  \"raven\",\n  \"ravine\",\n  \"raving\",\n  \"ravioli\",\n  \"ravishing\",\n  \"reabsorb\",\n  \"reach\",\n  \"reacquire\",\n  \"reaction\",\n  \"reactive\",\n  \"reactor\",\n  \"reaffirm\",\n  \"ream\",\n  \"reanalyze\",\n  \"reappear\",\n  \"reapply\",\n  \"reappoint\",\n  \"reapprove\",\n  \"rearrange\",\n  \"rearview\",\n  \"reason\",\n  \"reassign\",\n  \"reassure\",\n  \"reattach\",\n  \"reawake\",\n  \"rebalance\",\n  \"rebate\",\n  \"rebel\",\n  \"rebirth\",\n  \"reboot\",\n  \"reborn\",\n  \"rebound\",\n  \"rebuff\",\n  \"rebuild\",\n  \"rebuilt\",\n  \"reburial\",\n  \"rebuttal\",\n  \"recall\",\n  \"recant\",\n  \"recapture\",\n  \"recast\",\n  \"recede\",\n  \"recent\",\n  \"recess\",\n  \"recharger\",\n  \"recipient\",\n  \"recital\",\n  \"recite\",\n  \"reckless\",\n  \"reclaim\",\n  \"recliner\",\n  \"reclining\",\n  \"recluse\",\n  \"reclusive\",\n  \"recognize\",\n  \"recoil\",\n  \"recollect\",\n  \"recolor\",\n  \"reconcile\",\n  \"reconfirm\",\n  \"reconvene\",\n  \"recopy\",\n  \"record\",\n  \"recount\",\n  \"recoup\",\n  \"recovery\",\n  \"recreate\",\n  \"rectal\",\n  \"rectangle\",\n  \"rectified\",\n  \"rectify\",\n  \"recycled\",\n  \"recycler\",\n  \"recycling\",\n  \"reemerge\",\n  \"reenact\",\n  \"reenter\",\n  \"reentry\",\n  \"reexamine\",\n  \"referable\",\n  \"referee\",\n  \"reference\",\n  \"refill\",\n  \"refinance\",\n  \"refined\",\n  \"refinery\",\n  \"refining\",\n  \"refinish\",\n  \"reflected\",\n  \"reflector\",\n  \"reflex\",\n  \"reflux\",\n  \"refocus\",\n  \"refold\",\n  \"reforest\",\n  \"reformat\",\n  \"reformed\",\n  \"reformer\",\n  \"reformist\",\n  \"refract\",\n  \"refrain\",\n  \"refreeze\",\n  \"refresh\",\n  \"refried\",\n  \"refueling\",\n  \"refund\",\n  \"refurbish\",\n  \"refurnish\",\n  \"refusal\",\n  \"refuse\",\n  \"refusing\",\n  \"refutable\",\n  \"refute\",\n  \"regain\",\n  \"regalia\",\n  \"regally\",\n  \"reggae\",\n  \"regime\",\n  \"region\",\n  \"register\",\n  \"registrar\",\n  \"registry\",\n  \"regress\",\n  \"regretful\",\n  \"regroup\",\n  \"regular\",\n  \"regulate\",\n  \"regulator\",\n  \"rehab\",\n  \"reheat\",\n  \"rehire\",\n  \"rehydrate\",\n  \"reimburse\",\n  \"reissue\",\n  \"reiterate\",\n  \"rejoice\",\n  \"rejoicing\",\n  \"rejoin\",\n  \"rekindle\",\n  \"relapse\",\n  \"relapsing\",\n  \"relatable\",\n  \"related\",\n  \"relation\",\n  \"relative\",\n  \"relax\",\n  \"relay\",\n  \"relearn\",\n  \"release\",\n  \"relenting\",\n  \"reliable\",\n  \"reliably\",\n  \"reliance\",\n  \"reliant\",\n  \"relic\",\n  \"relieve\",\n  \"relieving\",\n  \"relight\",\n  \"relish\",\n  \"relive\",\n  \"reload\",\n  \"relocate\",\n  \"relock\",\n  \"reluctant\",\n  \"rely\",\n  \"remake\",\n  \"remark\",\n  \"remarry\",\n  \"rematch\",\n  \"remedial\",\n  \"remedy\",\n  \"remember\",\n  \"reminder\",\n  \"remindful\",\n  \"remission\",\n  \"remix\",\n  \"remnant\",\n  \"remodeler\",\n  \"remold\",\n  \"remorse\",\n  \"remote\",\n  \"removable\",\n  \"removal\",\n  \"removed\",\n  \"remover\",\n  \"removing\",\n  \"rename\",\n  \"renderer\",\n  \"rendering\",\n  \"rendition\",\n  \"renegade\",\n  \"renewable\",\n  \"renewably\",\n  \"renewal\",\n  \"renewed\",\n  \"renounce\",\n  \"renovate\",\n  \"renovator\",\n  \"rentable\",\n  \"rental\",\n  \"rented\",\n  \"renter\",\n  \"reoccupy\",\n  \"reoccur\",\n  \"reopen\",\n  \"reorder\",\n  \"repackage\",\n  \"repacking\",\n  \"repaint\",\n  \"repair\",\n  \"repave\",\n  \"repaying\",\n  \"repayment\",\n  \"repeal\",\n  \"repeated\",\n  \"repeater\",\n  \"repent\",\n  \"rephrase\",\n  \"replace\",\n  \"replay\",\n  \"replica\",\n  \"reply\",\n  \"reporter\",\n  \"repose\",\n  \"repossess\",\n  \"repost\",\n  \"repressed\",\n  \"reprimand\",\n  \"reprint\",\n  \"reprise\",\n  \"reproach\",\n  \"reprocess\",\n  \"reproduce\",\n  \"reprogram\",\n  \"reps\",\n  \"reptile\",\n  \"reptilian\",\n  \"repugnant\",\n  \"repulsion\",\n  \"repulsive\",\n  \"repurpose\",\n  \"reputable\",\n  \"reputably\",\n  \"request\",\n  \"require\",\n  \"requisite\",\n  \"reroute\",\n  \"rerun\",\n  \"resale\",\n  \"resample\",\n  \"rescuer\",\n  \"reseal\",\n  \"research\",\n  \"reselect\",\n  \"reseller\",\n  \"resemble\",\n  \"resend\",\n  \"resent\",\n  \"reset\",\n  \"reshape\",\n  \"reshoot\",\n  \"reshuffle\",\n  \"residence\",\n  \"residency\",\n  \"resident\",\n  \"residual\",\n  \"residue\",\n  \"resigned\",\n  \"resilient\",\n  \"resistant\",\n  \"resisting\",\n  \"resize\",\n  \"resolute\",\n  \"resolved\",\n  \"resonant\",\n  \"resonate\",\n  \"resort\",\n  \"resource\",\n  \"respect\",\n  \"resubmit\",\n  \"result\",\n  \"resume\",\n  \"resupply\",\n  \"resurface\",\n  \"resurrect\",\n  \"retail\",\n  \"retainer\",\n  \"retaining\",\n  \"retake\",\n  \"retaliate\",\n  \"retention\",\n  \"rethink\",\n  \"retinal\",\n  \"retired\",\n  \"retiree\",\n  \"retiring\",\n  \"retold\",\n  \"retool\",\n  \"retorted\",\n  \"retouch\",\n  \"retrace\",\n  \"retract\",\n  \"retrain\",\n  \"retread\",\n  \"retreat\",\n  \"retrial\",\n  \"retrieval\",\n  \"retriever\",\n  \"retry\",\n  \"return\",\n  \"retying\",\n  \"retype\",\n  \"reunion\",\n  \"reunite\",\n  \"reusable\",\n  \"reuse\",\n  \"reveal\",\n  \"reveler\",\n  \"revenge\",\n  \"revenue\",\n  \"reverb\",\n  \"revered\",\n  \"reverence\",\n  \"reverend\",\n  \"reversal\",\n  \"reverse\",\n  \"reversing\",\n  \"reversion\",\n  \"revert\",\n  \"revisable\",\n  \"revise\",\n  \"revision\",\n  \"revisit\",\n  \"revivable\",\n  \"revival\",\n  \"reviver\",\n  \"reviving\",\n  \"revocable\",\n  \"revoke\",\n  \"revolt\",\n  \"revolver\",\n  \"revolving\",\n  \"reward\",\n  \"rewash\",\n  \"rewind\",\n  \"rewire\",\n  \"reword\",\n  \"rework\",\n  \"rewrap\",\n  \"rewrite\",\n  \"rhyme\",\n  \"ribbon\",\n  \"ribcage\",\n  \"rice\",\n  \"riches\",\n  \"richly\",\n  \"richness\",\n  \"rickety\",\n  \"ricotta\",\n  \"riddance\",\n  \"ridden\",\n  \"ride\",\n  \"riding\",\n  \"rifling\",\n  \"rift\",\n  \"rigging\",\n  \"rigid\",\n  \"rigor\",\n  \"rimless\",\n  \"rimmed\",\n  \"rind\",\n  \"rink\",\n  \"rinse\",\n  \"rinsing\",\n  \"riot\",\n  \"ripcord\",\n  \"ripeness\",\n  \"ripening\",\n  \"ripping\",\n  \"ripple\",\n  \"rippling\",\n  \"riptide\",\n  \"rise\",\n  \"rising\",\n  \"risk\",\n  \"risotto\",\n  \"ritalin\",\n  \"ritzy\",\n  \"rival\",\n  \"riverbank\",\n  \"riverbed\",\n  \"riverboat\",\n  \"riverside\",\n  \"riveter\",\n  \"riveting\",\n  \"roamer\",\n  \"roaming\",\n  \"roast\",\n  \"robbing\",\n  \"robe\",\n  \"robin\",\n  \"robotics\",\n  \"robust\",\n  \"rockband\",\n  \"rocker\",\n  \"rocket\",\n  \"rockfish\",\n  \"rockiness\",\n  \"rocking\",\n  \"rocklike\",\n  \"rockslide\",\n  \"rockstar\",\n  \"rocky\",\n  \"rogue\",\n  \"roman\",\n  \"romp\",\n  \"rope\",\n  \"roping\",\n  \"roster\",\n  \"rosy\",\n  \"rotten\",\n  \"rotting\",\n  \"rotunda\",\n  \"roulette\",\n  \"rounding\",\n  \"roundish\",\n  \"roundness\",\n  \"roundup\",\n  \"roundworm\",\n  \"routine\",\n  \"routing\",\n  \"rover\",\n  \"roving\",\n  \"royal\",\n  \"rubbed\",\n  \"rubber\",\n  \"rubbing\",\n  \"rubble\",\n  \"rubdown\",\n  \"ruby\",\n  \"ruckus\",\n  \"rudder\",\n  \"rug\",\n  \"ruined\",\n  \"rule\",\n  \"rumble\",\n  \"rumbling\",\n  \"rummage\",\n  \"rumor\",\n  \"runaround\",\n  \"rundown\",\n  \"runner\",\n  \"running\",\n  \"runny\",\n  \"runt\",\n  \"runway\",\n  \"rupture\",\n  \"rural\",\n  \"ruse\",\n  \"rush\",\n  \"rust\",\n  \"rut\",\n  \"sabbath\",\n  \"sabotage\",\n  \"sacrament\",\n  \"sacred\",\n  \"sacrifice\",\n  \"sadden\",\n  \"saddlebag\",\n  \"saddled\",\n  \"saddling\",\n  \"sadly\",\n  \"sadness\",\n  \"safari\",\n  \"safeguard\",\n  \"safehouse\",\n  \"safely\",\n  \"safeness\",\n  \"saffron\",\n  \"saga\",\n  \"sage\",\n  \"sagging\",\n  \"saggy\",\n  \"said\",\n  \"saint\",\n  \"sake\",\n  \"salad\",\n  \"salami\",\n  \"salaried\",\n  \"salary\",\n  \"saline\",\n  \"salon\",\n  \"saloon\",\n  \"salsa\",\n  \"salt\",\n  \"salutary\",\n  \"salute\",\n  \"salvage\",\n  \"salvaging\",\n  \"salvation\",\n  \"same\",\n  \"sample\",\n  \"sampling\",\n  \"sanction\",\n  \"sanctity\",\n  \"sanctuary\",\n  \"sandal\",\n  \"sandbag\",\n  \"sandbank\",\n  \"sandbar\",\n  \"sandblast\",\n  \"sandbox\",\n  \"sanded\",\n  \"sandfish\",\n  \"sanding\",\n  \"sandlot\",\n  \"sandpaper\",\n  \"sandpit\",\n  \"sandstone\",\n  \"sandstorm\",\n  \"sandworm\",\n  \"sandy\",\n  \"sanitary\",\n  \"sanitizer\",\n  \"sank\",\n  \"santa\",\n  \"sapling\",\n  \"sappiness\",\n  \"sappy\",\n  \"sarcasm\",\n  \"sarcastic\",\n  \"sardine\",\n  \"sash\",\n  \"sasquatch\",\n  \"sassy\",\n  \"satchel\",\n  \"satiable\",\n  \"satin\",\n  \"satirical\",\n  \"satisfied\",\n  \"satisfy\",\n  \"saturate\",\n  \"saturday\",\n  \"sauciness\",\n  \"saucy\",\n  \"sauna\",\n  \"savage\",\n  \"savanna\",\n  \"saved\",\n  \"savings\",\n  \"savior\",\n  \"savor\",\n  \"saxophone\",\n  \"say\",\n  \"scabbed\",\n  \"scabby\",\n  \"scalded\",\n  \"scalding\",\n  \"scale\",\n  \"scaling\",\n  \"scallion\",\n  \"scallop\",\n  \"scalping\",\n  \"scam\",\n  \"scandal\",\n  \"scanner\",\n  \"scanning\",\n  \"scant\",\n  \"scapegoat\",\n  \"scarce\",\n  \"scarcity\",\n  \"scarecrow\",\n  \"scared\",\n  \"scarf\",\n  \"scarily\",\n  \"scariness\",\n  \"scarring\",\n  \"scary\",\n  \"scavenger\",\n  \"scenic\",\n  \"schedule\",\n  \"schematic\",\n  \"scheme\",\n  \"scheming\",\n  \"schilling\",\n  \"schnapps\",\n  \"scholar\",\n  \"science\",\n  \"scientist\",\n  \"scion\",\n  \"scoff\",\n  \"scolding\",\n  \"scone\",\n  \"scoop\",\n  \"scooter\",\n  \"scope\",\n  \"scorch\",\n  \"scorebook\",\n  \"scorecard\",\n  \"scored\",\n  \"scoreless\",\n  \"scorer\",\n  \"scoring\",\n  \"scorn\",\n  \"scorpion\",\n  \"scotch\",\n  \"scoundrel\",\n  \"scoured\",\n  \"scouring\",\n  \"scouting\",\n  \"scouts\",\n  \"scowling\",\n  \"scrabble\",\n  \"scraggly\",\n  \"scrambled\",\n  \"scrambler\",\n  \"scrap\",\n  \"scratch\",\n  \"scrawny\",\n  \"screen\",\n  \"scribble\",\n  \"scribe\",\n  \"scribing\",\n  \"scrimmage\",\n  \"script\",\n  \"scroll\",\n  \"scrooge\",\n  \"scrounger\",\n  \"scrubbed\",\n  \"scrubber\",\n  \"scruffy\",\n  \"scrunch\",\n  \"scrutiny\",\n  \"scuba\",\n  \"scuff\",\n  \"sculptor\",\n  \"sculpture\",\n  \"scurvy\",\n  \"scuttle\",\n  \"secluded\",\n  \"secluding\",\n  \"seclusion\",\n  \"second\",\n  \"secrecy\",\n  \"secret\",\n  \"sectional\",\n  \"sector\",\n  \"secular\",\n  \"securely\",\n  \"security\",\n  \"sedan\",\n  \"sedate\",\n  \"sedation\",\n  \"sedative\",\n  \"sediment\",\n  \"seduce\",\n  \"seducing\",\n  \"segment\",\n  \"seismic\",\n  \"seizing\",\n  \"seldom\",\n  \"selected\",\n  \"selection\",\n  \"selective\",\n  \"selector\",\n  \"self\",\n  \"seltzer\",\n  \"semantic\",\n  \"semester\",\n  \"semicolon\",\n  \"semifinal\",\n  \"seminar\",\n  \"semisoft\",\n  \"semisweet\",\n  \"senate\",\n  \"senator\",\n  \"send\",\n  \"senior\",\n  \"senorita\",\n  \"sensation\",\n  \"sensitive\",\n  \"sensitize\",\n  \"sensually\",\n  \"sensuous\",\n  \"sepia\",\n  \"september\",\n  \"septic\",\n  \"septum\",\n  \"sequel\",\n  \"sequence\",\n  \"sequester\",\n  \"series\",\n  \"sermon\",\n  \"serotonin\",\n  \"serpent\",\n  \"serrated\",\n  \"serve\",\n  \"service\",\n  \"serving\",\n  \"sesame\",\n  \"sessions\",\n  \"setback\",\n  \"setting\",\n  \"settle\",\n  \"settling\",\n  \"setup\",\n  \"sevenfold\",\n  \"seventeen\",\n  \"seventh\",\n  \"seventy\",\n  \"severity\",\n  \"shabby\",\n  \"shack\",\n  \"shaded\",\n  \"shadily\",\n  \"shadiness\",\n  \"shading\",\n  \"shadow\",\n  \"shady\",\n  \"shaft\",\n  \"shakable\",\n  \"shakily\",\n  \"shakiness\",\n  \"shaking\",\n  \"shaky\",\n  \"shale\",\n  \"shallot\",\n  \"shallow\",\n  \"shame\",\n  \"shampoo\",\n  \"shamrock\",\n  \"shank\",\n  \"shanty\",\n  \"shape\",\n  \"shaping\",\n  \"share\",\n  \"sharpener\",\n  \"sharper\",\n  \"sharpie\",\n  \"sharply\",\n  \"sharpness\",\n  \"shawl\",\n  \"sheath\",\n  \"shed\",\n  \"sheep\",\n  \"sheet\",\n  \"shelf\",\n  \"shell\",\n  \"shelter\",\n  \"shelve\",\n  \"shelving\",\n  \"sherry\",\n  \"shield\",\n  \"shifter\",\n  \"shifting\",\n  \"shiftless\",\n  \"shifty\",\n  \"shimmer\",\n  \"shimmy\",\n  \"shindig\",\n  \"shine\",\n  \"shingle\",\n  \"shininess\",\n  \"shining\",\n  \"shiny\",\n  \"ship\",\n  \"shirt\",\n  \"shivering\",\n  \"shock\",\n  \"shone\",\n  \"shoplift\",\n  \"shopper\",\n  \"shopping\",\n  \"shoptalk\",\n  \"shore\",\n  \"shortage\",\n  \"shortcake\",\n  \"shortcut\",\n  \"shorten\",\n  \"shorter\",\n  \"shorthand\",\n  \"shortlist\",\n  \"shortly\",\n  \"shortness\",\n  \"shorts\",\n  \"shortwave\",\n  \"shorty\",\n  \"shout\",\n  \"shove\",\n  \"showbiz\",\n  \"showcase\",\n  \"showdown\",\n  \"shower\",\n  \"showgirl\",\n  \"showing\",\n  \"showman\",\n  \"shown\",\n  \"showoff\",\n  \"showpiece\",\n  \"showplace\",\n  \"showroom\",\n  \"showy\",\n  \"shrank\",\n  \"shrapnel\",\n  \"shredder\",\n  \"shredding\",\n  \"shrewdly\",\n  \"shriek\",\n  \"shrill\",\n  \"shrimp\",\n  \"shrine\",\n  \"shrink\",\n  \"shrivel\",\n  \"shrouded\",\n  \"shrubbery\",\n  \"shrubs\",\n  \"shrug\",\n  \"shrunk\",\n  \"shucking\",\n  \"shudder\",\n  \"shuffle\",\n  \"shuffling\",\n  \"shun\",\n  \"shush\",\n  \"shut\",\n  \"shy\",\n  \"siamese\",\n  \"siberian\",\n  \"sibling\",\n  \"siding\",\n  \"sierra\",\n  \"siesta\",\n  \"sift\",\n  \"sighing\",\n  \"silenced\",\n  \"silencer\",\n  \"silent\",\n  \"silica\",\n  \"silicon\",\n  \"silk\",\n  \"silliness\",\n  \"silly\",\n  \"silo\",\n  \"silt\",\n  \"silver\",\n  \"similarly\",\n  \"simile\",\n  \"simmering\",\n  \"simple\",\n  \"simplify\",\n  \"simply\",\n  \"sincere\",\n  \"sincerity\",\n  \"singer\",\n  \"singing\",\n  \"single\",\n  \"singular\",\n  \"sinister\",\n  \"sinless\",\n  \"sinner\",\n  \"sinuous\",\n  \"sip\",\n  \"siren\",\n  \"sister\",\n  \"sitcom\",\n  \"sitter\",\n  \"sitting\",\n  \"situated\",\n  \"situation\",\n  \"sixfold\",\n  \"sixteen\",\n  \"sixth\",\n  \"sixties\",\n  \"sixtieth\",\n  \"sixtyfold\",\n  \"sizable\",\n  \"sizably\",\n  \"size\",\n  \"sizing\",\n  \"sizzle\",\n  \"sizzling\",\n  \"skater\",\n  \"skating\",\n  \"skedaddle\",\n  \"skeletal\",\n  \"skeleton\",\n  \"skeptic\",\n  \"sketch\",\n  \"skewed\",\n  \"skewer\",\n  \"skid\",\n  \"skied\",\n  \"skier\",\n  \"skies\",\n  \"skiing\",\n  \"skilled\",\n  \"skillet\",\n  \"skillful\",\n  \"skimmed\",\n  \"skimmer\",\n  \"skimming\",\n  \"skimpily\",\n  \"skincare\",\n  \"skinhead\",\n  \"skinless\",\n  \"skinning\",\n  \"skinny\",\n  \"skintight\",\n  \"skipper\",\n  \"skipping\",\n  \"skirmish\",\n  \"skirt\",\n  \"skittle\",\n  \"skydiver\",\n  \"skylight\",\n  \"skyline\",\n  \"skype\",\n  \"skyrocket\",\n  \"skyward\",\n  \"slab\",\n  \"slacked\",\n  \"slacker\",\n  \"slacking\",\n  \"slackness\",\n  \"slacks\",\n  \"slain\",\n  \"slam\",\n  \"slander\",\n  \"slang\",\n  \"slapping\",\n  \"slapstick\",\n  \"slashed\",\n  \"slashing\",\n  \"slate\",\n  \"slather\",\n  \"slaw\",\n  \"sled\",\n  \"sleek\",\n  \"sleep\",\n  \"sleet\",\n  \"sleeve\",\n  \"slept\",\n  \"sliceable\",\n  \"sliced\",\n  \"slicer\",\n  \"slicing\",\n  \"slick\",\n  \"slider\",\n  \"slideshow\",\n  \"sliding\",\n  \"slighted\",\n  \"slighting\",\n  \"slightly\",\n  \"slimness\",\n  \"slimy\",\n  \"slinging\",\n  \"slingshot\",\n  \"slinky\",\n  \"slip\",\n  \"slit\",\n  \"sliver\",\n  \"slobbery\",\n  \"slogan\",\n  \"sloped\",\n  \"sloping\",\n  \"sloppily\",\n  \"sloppy\",\n  \"slot\",\n  \"slouching\",\n  \"slouchy\",\n  \"sludge\",\n  \"slug\",\n  \"slum\",\n  \"slurp\",\n  \"slush\",\n  \"sly\",\n  \"small\",\n  \"smartly\",\n  \"smartness\",\n  \"smasher\",\n  \"smashing\",\n  \"smashup\",\n  \"smell\",\n  \"smelting\",\n  \"smile\",\n  \"smilingly\",\n  \"smirk\",\n  \"smite\",\n  \"smith\",\n  \"smitten\",\n  \"smock\",\n  \"smog\",\n  \"smoked\",\n  \"smokeless\",\n  \"smokiness\",\n  \"smoking\",\n  \"smoky\",\n  \"smolder\",\n  \"smooth\",\n  \"smother\",\n  \"smudge\",\n  \"smudgy\",\n  \"smuggler\",\n  \"smuggling\",\n  \"smugly\",\n  \"smugness\",\n  \"snack\",\n  \"snagged\",\n  \"snaking\",\n  \"snap\",\n  \"snare\",\n  \"snarl\",\n  \"snazzy\",\n  \"sneak\",\n  \"sneer\",\n  \"sneeze\",\n  \"sneezing\",\n  \"snide\",\n  \"sniff\",\n  \"snippet\",\n  \"snipping\",\n  \"snitch\",\n  \"snooper\",\n  \"snooze\",\n  \"snore\",\n  \"snoring\",\n  \"snorkel\",\n  \"snort\",\n  \"snout\",\n  \"snowbird\",\n  \"snowboard\",\n  \"snowbound\",\n  \"snowcap\",\n  \"snowdrift\",\n  \"snowdrop\",\n  \"snowfall\",\n  \"snowfield\",\n  \"snowflake\",\n  \"snowiness\",\n  \"snowless\",\n  \"snowman\",\n  \"snowplow\",\n  \"snowshoe\",\n  \"snowstorm\",\n  \"snowsuit\",\n  \"snowy\",\n  \"snub\",\n  \"snuff\",\n  \"snuggle\",\n  \"snugly\",\n  \"snugness\",\n  \"speak\",\n  \"spearfish\",\n  \"spearhead\",\n  \"spearman\",\n  \"spearmint\",\n  \"species\",\n  \"specimen\",\n  \"specked\",\n  \"speckled\",\n  \"specks\",\n  \"spectacle\",\n  \"spectator\",\n  \"spectrum\",\n  \"speculate\",\n  \"speech\",\n  \"speed\",\n  \"spellbind\",\n  \"speller\",\n  \"spelling\",\n  \"spendable\",\n  \"spender\",\n  \"spending\",\n  \"spent\",\n  \"spew\",\n  \"sphere\",\n  \"spherical\",\n  \"sphinx\",\n  \"spider\",\n  \"spied\",\n  \"spiffy\",\n  \"spill\",\n  \"spilt\",\n  \"spinach\",\n  \"spinal\",\n  \"spindle\",\n  \"spinner\",\n  \"spinning\",\n  \"spinout\",\n  \"spinster\",\n  \"spiny\",\n  \"spiral\",\n  \"spirited\",\n  \"spiritism\",\n  \"spirits\",\n  \"spiritual\",\n  \"splashed\",\n  \"splashing\",\n  \"splashy\",\n  \"splatter\",\n  \"spleen\",\n  \"splendid\",\n  \"splendor\",\n  \"splice\",\n  \"splicing\",\n  \"splinter\",\n  \"splotchy\",\n  \"splurge\",\n  \"spoilage\",\n  \"spoiled\",\n  \"spoiler\",\n  \"spoiling\",\n  \"spoils\",\n  \"spoken\",\n  \"spokesman\",\n  \"sponge\",\n  \"spongy\",\n  \"sponsor\",\n  \"spoof\",\n  \"spookily\",\n  \"spooky\",\n  \"spool\",\n  \"spoon\",\n  \"spore\",\n  \"sporting\",\n  \"sports\",\n  \"sporty\",\n  \"spotless\",\n  \"spotlight\",\n  \"spotted\",\n  \"spotter\",\n  \"spotting\",\n  \"spotty\",\n  \"spousal\",\n  \"spouse\",\n  \"spout\",\n  \"sprain\",\n  \"sprang\",\n  \"sprawl\",\n  \"spray\",\n  \"spree\",\n  \"sprig\",\n  \"spring\",\n  \"sprinkled\",\n  \"sprinkler\",\n  \"sprint\",\n  \"sprite\",\n  \"sprout\",\n  \"spruce\",\n  \"sprung\",\n  \"spry\",\n  \"spud\",\n  \"spur\",\n  \"sputter\",\n  \"spyglass\",\n  \"squabble\",\n  \"squad\",\n  \"squall\",\n  \"squander\",\n  \"squash\",\n  \"squatted\",\n  \"squatter\",\n  \"squatting\",\n  \"squeak\",\n  \"squealer\",\n  \"squealing\",\n  \"squeamish\",\n  \"squeegee\",\n  \"squeeze\",\n  \"squeezing\",\n  \"squid\",\n  \"squiggle\",\n  \"squiggly\",\n  \"squint\",\n  \"squire\",\n  \"squirt\",\n  \"squishier\",\n  \"squishy\",\n  \"stability\",\n  \"stabilize\",\n  \"stable\",\n  \"stack\",\n  \"stadium\",\n  \"staff\",\n  \"stage\",\n  \"staging\",\n  \"stagnant\",\n  \"stagnate\",\n  \"stainable\",\n  \"stained\",\n  \"staining\",\n  \"stainless\",\n  \"stalemate\",\n  \"staleness\",\n  \"stalling\",\n  \"stallion\",\n  \"stamina\",\n  \"stammer\",\n  \"stamp\",\n  \"stand\",\n  \"stank\",\n  \"staple\",\n  \"stapling\",\n  \"starboard\",\n  \"starch\",\n  \"stardom\",\n  \"stardust\",\n  \"starfish\",\n  \"stargazer\",\n  \"staring\",\n  \"stark\",\n  \"starless\",\n  \"starlet\",\n  \"starlight\",\n  \"starlit\",\n  \"starring\",\n  \"starry\",\n  \"starship\",\n  \"starter\",\n  \"starting\",\n  \"startle\",\n  \"startling\",\n  \"startup\",\n  \"starved\",\n  \"starving\",\n  \"stash\",\n  \"state\",\n  \"static\",\n  \"statistic\",\n  \"statue\",\n  \"stature\",\n  \"status\",\n  \"statute\",\n  \"statutory\",\n  \"staunch\",\n  \"stays\",\n  \"steadfast\",\n  \"steadier\",\n  \"steadily\",\n  \"steadying\",\n  \"steam\",\n  \"steed\",\n  \"steep\",\n  \"steerable\",\n  \"steering\",\n  \"steersman\",\n  \"stegosaur\",\n  \"stellar\",\n  \"stem\",\n  \"stench\",\n  \"stencil\",\n  \"step\",\n  \"stereo\",\n  \"sterile\",\n  \"sterility\",\n  \"sterilize\",\n  \"sterling\",\n  \"sternness\",\n  \"sternum\",\n  \"stew\",\n  \"stick\",\n  \"stiffen\",\n  \"stiffly\",\n  \"stiffness\",\n  \"stifle\",\n  \"stifling\",\n  \"stillness\",\n  \"stilt\",\n  \"stimulant\",\n  \"stimulate\",\n  \"stimuli\",\n  \"stimulus\",\n  \"stinger\",\n  \"stingily\",\n  \"stinging\",\n  \"stingray\",\n  \"stingy\",\n  \"stinking\",\n  \"stinky\",\n  \"stipend\",\n  \"stipulate\",\n  \"stir\",\n  \"stitch\",\n  \"stock\",\n  \"stoic\",\n  \"stoke\",\n  \"stole\",\n  \"stomp\",\n  \"stonewall\",\n  \"stoneware\",\n  \"stonework\",\n  \"stoning\",\n  \"stony\",\n  \"stood\",\n  \"stooge\",\n  \"stool\",\n  \"stoop\",\n  \"stoplight\",\n  \"stoppable\",\n  \"stoppage\",\n  \"stopped\",\n  \"stopper\",\n  \"stopping\",\n  \"stopwatch\",\n  \"storable\",\n  \"storage\",\n  \"storeroom\",\n  \"storewide\",\n  \"storm\",\n  \"stout\",\n  \"stove\",\n  \"stowaway\",\n  \"stowing\",\n  \"straddle\",\n  \"straggler\",\n  \"strained\",\n  \"strainer\",\n  \"straining\",\n  \"strangely\",\n  \"stranger\",\n  \"strangle\",\n  \"strategic\",\n  \"strategy\",\n  \"stratus\",\n  \"straw\",\n  \"stray\",\n  \"streak\",\n  \"stream\",\n  \"street\",\n  \"strength\",\n  \"strenuous\",\n  \"strep\",\n  \"stress\",\n  \"stretch\",\n  \"strewn\",\n  \"stricken\",\n  \"strict\",\n  \"stride\",\n  \"strife\",\n  \"strike\",\n  \"striking\",\n  \"strive\",\n  \"striving\",\n  \"strobe\",\n  \"strode\",\n  \"stroller\",\n  \"strongbox\",\n  \"strongly\",\n  \"strongman\",\n  \"struck\",\n  \"structure\",\n  \"strudel\",\n  \"struggle\",\n  \"strum\",\n  \"strung\",\n  \"strut\",\n  \"stubbed\",\n  \"stubble\",\n  \"stubbly\",\n  \"stubborn\",\n  \"stucco\",\n  \"stuck\",\n  \"student\",\n  \"studied\",\n  \"studio\",\n  \"study\",\n  \"stuffed\",\n  \"stuffing\",\n  \"stuffy\",\n  \"stumble\",\n  \"stumbling\",\n  \"stump\",\n  \"stung\",\n  \"stunned\",\n  \"stunner\",\n  \"stunning\",\n  \"stunt\",\n  \"stupor\",\n  \"sturdily\",\n  \"sturdy\",\n  \"styling\",\n  \"stylishly\",\n  \"stylist\",\n  \"stylized\",\n  \"stylus\",\n  \"suave\",\n  \"subarctic\",\n  \"subatomic\",\n  \"subdivide\",\n  \"subdued\",\n  \"subduing\",\n  \"subfloor\",\n  \"subgroup\",\n  \"subheader\",\n  \"subject\",\n  \"sublease\",\n  \"sublet\",\n  \"sublevel\",\n  \"sublime\",\n  \"submarine\",\n  \"submerge\",\n  \"submersed\",\n  \"submitter\",\n  \"subpanel\",\n  \"subpar\",\n  \"subplot\",\n  \"subprime\",\n  \"subscribe\",\n  \"subscript\",\n  \"subsector\",\n  \"subside\",\n  \"subsiding\",\n  \"subsidize\",\n  \"subsidy\",\n  \"subsoil\",\n  \"subsonic\",\n  \"substance\",\n  \"subsystem\",\n  \"subtext\",\n  \"subtitle\",\n  \"subtly\",\n  \"subtotal\",\n  \"subtract\",\n  \"subtype\",\n  \"suburb\",\n  \"subway\",\n  \"subwoofer\",\n  \"subzero\",\n  \"succulent\",\n  \"such\",\n  \"suction\",\n  \"sudden\",\n  \"sudoku\",\n  \"suds\",\n  \"sufferer\",\n  \"suffering\",\n  \"suffice\",\n  \"suffix\",\n  \"suffocate\",\n  \"suffrage\",\n  \"sugar\",\n  \"suggest\",\n  \"suing\",\n  \"suitable\",\n  \"suitably\",\n  \"suitcase\",\n  \"suitor\",\n  \"sulfate\",\n  \"sulfide\",\n  \"sulfite\",\n  \"sulfur\",\n  \"sulk\",\n  \"sullen\",\n  \"sulphate\",\n  \"sulphuric\",\n  \"sultry\",\n  \"superbowl\",\n  \"superglue\",\n  \"superhero\",\n  \"superior\",\n  \"superjet\",\n  \"superman\",\n  \"supermom\",\n  \"supernova\",\n  \"supervise\",\n  \"supper\",\n  \"supplier\",\n  \"supply\",\n  \"support\",\n  \"supremacy\",\n  \"supreme\",\n  \"surcharge\",\n  \"surely\",\n  \"sureness\",\n  \"surface\",\n  \"surfacing\",\n  \"surfboard\",\n  \"surfer\",\n  \"surgery\",\n  \"surgical\",\n  \"surging\",\n  \"surname\",\n  \"surpass\",\n  \"surplus\",\n  \"surprise\",\n  \"surreal\",\n  \"surrender\",\n  \"surrogate\",\n  \"surround\",\n  \"survey\",\n  \"survival\",\n  \"survive\",\n  \"surviving\",\n  \"survivor\",\n  \"sushi\",\n  \"suspect\",\n  \"suspend\",\n  \"suspense\",\n  \"sustained\",\n  \"sustainer\",\n  \"swab\",\n  \"swaddling\",\n  \"swagger\",\n  \"swampland\",\n  \"swan\",\n  \"swapping\",\n  \"swarm\",\n  \"sway\",\n  \"swear\",\n  \"sweat\",\n  \"sweep\",\n  \"swell\",\n  \"swept\",\n  \"swerve\",\n  \"swifter\",\n  \"swiftly\",\n  \"swiftness\",\n  \"swimmable\",\n  \"swimmer\",\n  \"swimming\",\n  \"swimsuit\",\n  \"swimwear\",\n  \"swinger\",\n  \"swinging\",\n  \"swipe\",\n  \"swirl\",\n  \"switch\",\n  \"swivel\",\n  \"swizzle\",\n  \"swooned\",\n  \"swoop\",\n  \"swoosh\",\n  \"swore\",\n  \"sworn\",\n  \"swung\",\n  \"sycamore\",\n  \"sympathy\",\n  \"symphonic\",\n  \"symphony\",\n  \"symptom\",\n  \"synapse\",\n  \"syndrome\",\n  \"synergy\",\n  \"synopses\",\n  \"synopsis\",\n  \"synthesis\",\n  \"synthetic\",\n  \"syrup\",\n  \"system\",\n  \"t-shirt\",\n  \"tabasco\",\n  \"tabby\",\n  \"tableful\",\n  \"tables\",\n  \"tablet\",\n  \"tableware\",\n  \"tabloid\",\n  \"tackiness\",\n  \"tacking\",\n  \"tackle\",\n  \"tackling\",\n  \"tacky\",\n  \"taco\",\n  \"tactful\",\n  \"tactical\",\n  \"tactics\",\n  \"tactile\",\n  \"tactless\",\n  \"tadpole\",\n  \"taekwondo\",\n  \"tag\",\n  \"tainted\",\n  \"take\",\n  \"taking\",\n  \"talcum\",\n  \"talisman\",\n  \"tall\",\n  \"talon\",\n  \"tamale\",\n  \"tameness\",\n  \"tamer\",\n  \"tamper\",\n  \"tank\",\n  \"tanned\",\n  \"tannery\",\n  \"tanning\",\n  \"tantrum\",\n  \"tapeless\",\n  \"tapered\",\n  \"tapering\",\n  \"tapestry\",\n  \"tapioca\",\n  \"tapping\",\n  \"taps\",\n  \"tarantula\",\n  \"target\",\n  \"tarmac\",\n  \"tarnish\",\n  \"tarot\",\n  \"tartar\",\n  \"tartly\",\n  \"tartness\",\n  \"task\",\n  \"tassel\",\n  \"taste\",\n  \"tastiness\",\n  \"tasting\",\n  \"tasty\",\n  \"tattered\",\n  \"tattle\",\n  \"tattling\",\n  \"tattoo\",\n  \"taunt\",\n  \"tavern\",\n  \"thank\",\n  \"that\",\n  \"thaw\",\n  \"theater\",\n  \"theatrics\",\n  \"thee\",\n  \"theft\",\n  \"theme\",\n  \"theology\",\n  \"theorize\",\n  \"thermal\",\n  \"thermos\",\n  \"thesaurus\",\n  \"these\",\n  \"thesis\",\n  \"thespian\",\n  \"thicken\",\n  \"thicket\",\n  \"thickness\",\n  \"thieving\",\n  \"thievish\",\n  \"thigh\",\n  \"thimble\",\n  \"thing\",\n  \"think\",\n  \"thinly\",\n  \"thinner\",\n  \"thinness\",\n  \"thinning\",\n  \"thirstily\",\n  \"thirsting\",\n  \"thirsty\",\n  \"thirteen\",\n  \"thirty\",\n  \"thong\",\n  \"thorn\",\n  \"those\",\n  \"thousand\",\n  \"thrash\",\n  \"thread\",\n  \"threaten\",\n  \"threefold\",\n  \"thrift\",\n  \"thrill\",\n  \"thrive\",\n  \"thriving\",\n  \"throat\",\n  \"throbbing\",\n  \"throng\",\n  \"throttle\",\n  \"throwaway\",\n  \"throwback\",\n  \"thrower\",\n  \"throwing\",\n  \"thud\",\n  \"thumb\",\n  \"thumping\",\n  \"thursday\",\n  \"thus\",\n  \"thwarting\",\n  \"thyself\",\n  \"tiara\",\n  \"tibia\",\n  \"tidal\",\n  \"tidbit\",\n  \"tidiness\",\n  \"tidings\",\n  \"tidy\",\n  \"tiger\",\n  \"tighten\",\n  \"tightly\",\n  \"tightness\",\n  \"tightrope\",\n  \"tightwad\",\n  \"tigress\",\n  \"tile\",\n  \"tiling\",\n  \"till\",\n  \"tilt\",\n  \"timid\",\n  \"timing\",\n  \"timothy\",\n  \"tinderbox\",\n  \"tinfoil\",\n  \"tingle\",\n  \"tingling\",\n  \"tingly\",\n  \"tinker\",\n  \"tinkling\",\n  \"tinsel\",\n  \"tinsmith\",\n  \"tint\",\n  \"tinwork\",\n  \"tiny\",\n  \"tipoff\",\n  \"tipped\",\n  \"tipper\",\n  \"tipping\",\n  \"tiptoeing\",\n  \"tiptop\",\n  \"tiring\",\n  \"tissue\",\n  \"trace\",\n  \"tracing\",\n  \"track\",\n  \"traction\",\n  \"tractor\",\n  \"trade\",\n  \"trading\",\n  \"tradition\",\n  \"traffic\",\n  \"tragedy\",\n  \"trailing\",\n  \"trailside\",\n  \"train\",\n  \"traitor\",\n  \"trance\",\n  \"tranquil\",\n  \"transfer\",\n  \"transform\",\n  \"translate\",\n  \"transpire\",\n  \"transport\",\n  \"transpose\",\n  \"trapdoor\",\n  \"trapeze\",\n  \"trapezoid\",\n  \"trapped\",\n  \"trapper\",\n  \"trapping\",\n  \"traps\",\n  \"trash\",\n  \"travel\",\n  \"traverse\",\n  \"travesty\",\n  \"tray\",\n  \"treachery\",\n  \"treading\",\n  \"treadmill\",\n  \"treason\",\n  \"treat\",\n  \"treble\",\n  \"tree\",\n  \"trekker\",\n  \"tremble\",\n  \"trembling\",\n  \"tremor\",\n  \"trench\",\n  \"trend\",\n  \"trespass\",\n  \"triage\",\n  \"trial\",\n  \"triangle\",\n  \"tribesman\",\n  \"tribunal\",\n  \"tribune\",\n  \"tributary\",\n  \"tribute\",\n  \"triceps\",\n  \"trickery\",\n  \"trickily\",\n  \"tricking\",\n  \"trickle\",\n  \"trickster\",\n  \"tricky\",\n  \"tricolor\",\n  \"tricycle\",\n  \"trident\",\n  \"tried\",\n  \"trifle\",\n  \"trifocals\",\n  \"trillion\",\n  \"trilogy\",\n  \"trimester\",\n  \"trimmer\",\n  \"trimming\",\n  \"trimness\",\n  \"trinity\",\n  \"trio\",\n  \"tripod\",\n  \"tripping\",\n  \"triumph\",\n  \"trivial\",\n  \"trodden\",\n  \"trolling\",\n  \"trombone\",\n  \"trophy\",\n  \"tropical\",\n  \"tropics\",\n  \"trouble\",\n  \"troubling\",\n  \"trough\",\n  \"trousers\",\n  \"trout\",\n  \"trowel\",\n  \"truce\",\n  \"truck\",\n  \"truffle\",\n  \"trump\",\n  \"trunks\",\n  \"trustable\",\n  \"trustee\",\n  \"trustful\",\n  \"trusting\",\n  \"trustless\",\n  \"truth\",\n  \"try\",\n  \"tubby\",\n  \"tubeless\",\n  \"tubular\",\n  \"tucking\",\n  \"tuesday\",\n  \"tug\",\n  \"tuition\",\n  \"tulip\",\n  \"tumble\",\n  \"tumbling\",\n  \"tummy\",\n  \"turban\",\n  \"turbine\",\n  \"turbofan\",\n  \"turbojet\",\n  \"turbulent\",\n  \"turf\",\n  \"turkey\",\n  \"turmoil\",\n  \"turret\",\n  \"turtle\",\n  \"tusk\",\n  \"tutor\",\n  \"tutu\",\n  \"tux\",\n  \"tweak\",\n  \"tweed\",\n  \"tweet\",\n  \"tweezers\",\n  \"twelve\",\n  \"twentieth\",\n  \"twenty\",\n  \"twerp\",\n  \"twice\",\n  \"twiddle\",\n  \"twiddling\",\n  \"twig\",\n  \"twilight\",\n  \"twine\",\n  \"twins\",\n  \"twirl\",\n  \"twistable\",\n  \"twisted\",\n  \"twister\",\n  \"twisting\",\n  \"twisty\",\n  \"twitch\",\n  \"twitter\",\n  \"tycoon\",\n  \"tying\",\n  \"tyke\",\n  \"udder\",\n  \"ultimate\",\n  \"ultimatum\",\n  \"ultra\",\n  \"umbilical\",\n  \"umbrella\",\n  \"umpire\",\n  \"unabashed\",\n  \"unable\",\n  \"unadorned\",\n  \"unadvised\",\n  \"unafraid\",\n  \"unaired\",\n  \"unaligned\",\n  \"unaltered\",\n  \"unarmored\",\n  \"unashamed\",\n  \"unaudited\",\n  \"unawake\",\n  \"unaware\",\n  \"unbaked\",\n  \"unbalance\",\n  \"unbeaten\",\n  \"unbend\",\n  \"unbent\",\n  \"unbiased\",\n  \"unbitten\",\n  \"unblended\",\n  \"unblessed\",\n  \"unblock\",\n  \"unbolted\",\n  \"unbounded\",\n  \"unboxed\",\n  \"unbraided\",\n  \"unbridle\",\n  \"unbroken\",\n  \"unbuckled\",\n  \"unbundle\",\n  \"unburned\",\n  \"unbutton\",\n  \"uncanny\",\n  \"uncapped\",\n  \"uncaring\",\n  \"uncertain\",\n  \"unchain\",\n  \"unchanged\",\n  \"uncharted\",\n  \"uncheck\",\n  \"uncivil\",\n  \"unclad\",\n  \"unclaimed\",\n  \"unclamped\",\n  \"unclasp\",\n  \"uncle\",\n  \"unclip\",\n  \"uncloak\",\n  \"unclog\",\n  \"unclothed\",\n  \"uncoated\",\n  \"uncoiled\",\n  \"uncolored\",\n  \"uncombed\",\n  \"uncommon\",\n  \"uncooked\",\n  \"uncork\",\n  \"uncorrupt\",\n  \"uncounted\",\n  \"uncouple\",\n  \"uncouth\",\n  \"uncover\",\n  \"uncross\",\n  \"uncrown\",\n  \"uncrushed\",\n  \"uncured\",\n  \"uncurious\",\n  \"uncurled\",\n  \"uncut\",\n  \"undamaged\",\n  \"undated\",\n  \"undaunted\",\n  \"undead\",\n  \"undecided\",\n  \"undefined\",\n  \"underage\",\n  \"underarm\",\n  \"undercoat\",\n  \"undercook\",\n  \"undercut\",\n  \"underdog\",\n  \"underdone\",\n  \"underfed\",\n  \"underfeed\",\n  \"underfoot\",\n  \"undergo\",\n  \"undergrad\",\n  \"underhand\",\n  \"underline\",\n  \"underling\",\n  \"undermine\",\n  \"undermost\",\n  \"underpaid\",\n  \"underpass\",\n  \"underpay\",\n  \"underrate\",\n  \"undertake\",\n  \"undertone\",\n  \"undertook\",\n  \"undertow\",\n  \"underuse\",\n  \"underwear\",\n  \"underwent\",\n  \"underwire\",\n  \"undesired\",\n  \"undiluted\",\n  \"undivided\",\n  \"undocked\",\n  \"undoing\",\n  \"undone\",\n  \"undrafted\",\n  \"undress\",\n  \"undrilled\",\n  \"undusted\",\n  \"undying\",\n  \"unearned\",\n  \"unearth\",\n  \"unease\",\n  \"uneasily\",\n  \"uneasy\",\n  \"uneatable\",\n  \"uneaten\",\n  \"unedited\",\n  \"unelected\",\n  \"unending\",\n  \"unengaged\",\n  \"unenvied\",\n  \"unequal\",\n  \"unethical\",\n  \"uneven\",\n  \"unexpired\",\n  \"unexposed\",\n  \"unfailing\",\n  \"unfair\",\n  \"unfasten\",\n  \"unfazed\",\n  \"unfeeling\",\n  \"unfiled\",\n  \"unfilled\",\n  \"unfitted\",\n  \"unfitting\",\n  \"unfixable\",\n  \"unfixed\",\n  \"unflawed\",\n  \"unfocused\",\n  \"unfold\",\n  \"unfounded\",\n  \"unframed\",\n  \"unfreeze\",\n  \"unfrosted\",\n  \"unfrozen\",\n  \"unfunded\",\n  \"unglazed\",\n  \"ungloved\",\n  \"unglue\",\n  \"ungodly\",\n  \"ungraded\",\n  \"ungreased\",\n  \"unguarded\",\n  \"unguided\",\n  \"unhappily\",\n  \"unhappy\",\n  \"unharmed\",\n  \"unhealthy\",\n  \"unheard\",\n  \"unhearing\",\n  \"unheated\",\n  \"unhelpful\",\n  \"unhidden\",\n  \"unhinge\",\n  \"unhitched\",\n  \"unholy\",\n  \"unhook\",\n  \"unicorn\",\n  \"unicycle\",\n  \"unified\",\n  \"unifier\",\n  \"uniformed\",\n  \"uniformly\",\n  \"unify\",\n  \"unimpeded\",\n  \"uninjured\",\n  \"uninstall\",\n  \"uninsured\",\n  \"uninvited\",\n  \"union\",\n  \"uniquely\",\n  \"unisexual\",\n  \"unison\",\n  \"unissued\",\n  \"unit\",\n  \"universal\",\n  \"universe\",\n  \"unjustly\",\n  \"unkempt\",\n  \"unkind\",\n  \"unknotted\",\n  \"unknowing\",\n  \"unknown\",\n  \"unlaced\",\n  \"unlatch\",\n  \"unlawful\",\n  \"unleaded\",\n  \"unlearned\",\n  \"unleash\",\n  \"unless\",\n  \"unleveled\",\n  \"unlighted\",\n  \"unlikable\",\n  \"unlimited\",\n  \"unlined\",\n  \"unlinked\",\n  \"unlisted\",\n  \"unlit\",\n  \"unlivable\",\n  \"unloaded\",\n  \"unloader\",\n  \"unlocked\",\n  \"unlocking\",\n  \"unlovable\",\n  \"unloved\",\n  \"unlovely\",\n  \"unloving\",\n  \"unluckily\",\n  \"unlucky\",\n  \"unmade\",\n  \"unmanaged\",\n  \"unmanned\",\n  \"unmapped\",\n  \"unmarked\",\n  \"unmasked\",\n  \"unmasking\",\n  \"unmatched\",\n  \"unmindful\",\n  \"unmixable\",\n  \"unmixed\",\n  \"unmolded\",\n  \"unmoral\",\n  \"unmovable\",\n  \"unmoved\",\n  \"unmoving\",\n  \"unnamable\",\n  \"unnamed\",\n  \"unnatural\",\n  \"unneeded\",\n  \"unnerve\",\n  \"unnerving\",\n  \"unnoticed\",\n  \"unopened\",\n  \"unopposed\",\n  \"unpack\",\n  \"unpadded\",\n  \"unpaid\",\n  \"unpainted\",\n  \"unpaired\",\n  \"unpaved\",\n  \"unpeeled\",\n  \"unpicked\",\n  \"unpiloted\",\n  \"unpinned\",\n  \"unplanned\",\n  \"unplanted\",\n  \"unpleased\",\n  \"unpledged\",\n  \"unplowed\",\n  \"unplug\",\n  \"unpopular\",\n  \"unproven\",\n  \"unquote\",\n  \"unranked\",\n  \"unrated\",\n  \"unraveled\",\n  \"unreached\",\n  \"unread\",\n  \"unreal\",\n  \"unreeling\",\n  \"unrefined\",\n  \"unrelated\",\n  \"unrented\",\n  \"unrest\",\n  \"unretired\",\n  \"unrevised\",\n  \"unrigged\",\n  \"unripe\",\n  \"unrivaled\",\n  \"unroasted\",\n  \"unrobed\",\n  \"unroll\",\n  \"unruffled\",\n  \"unruly\",\n  \"unrushed\",\n  \"unsaddle\",\n  \"unsafe\",\n  \"unsaid\",\n  \"unsalted\",\n  \"unsaved\",\n  \"unsavory\",\n  \"unscathed\",\n  \"unscented\",\n  \"unscrew\",\n  \"unsealed\",\n  \"unseated\",\n  \"unsecured\",\n  \"unseeing\",\n  \"unseemly\",\n  \"unseen\",\n  \"unselect\",\n  \"unselfish\",\n  \"unsent\",\n  \"unsettled\",\n  \"unshackle\",\n  \"unshaken\",\n  \"unshaved\",\n  \"unshaven\",\n  \"unsheathe\",\n  \"unshipped\",\n  \"unsightly\",\n  \"unsigned\",\n  \"unskilled\",\n  \"unsliced\",\n  \"unsmooth\",\n  \"unsnap\",\n  \"unsocial\",\n  \"unsoiled\",\n  \"unsold\",\n  \"unsolved\",\n  \"unsorted\",\n  \"unspoiled\",\n  \"unspoken\",\n  \"unstable\",\n  \"unstaffed\",\n  \"unstamped\",\n  \"unsteady\",\n  \"unsterile\",\n  \"unstirred\",\n  \"unstitch\",\n  \"unstopped\",\n  \"unstuck\",\n  \"unstuffed\",\n  \"unstylish\",\n  \"unsubtle\",\n  \"unsubtly\",\n  \"unsuited\",\n  \"unsure\",\n  \"unsworn\",\n  \"untagged\",\n  \"untainted\",\n  \"untaken\",\n  \"untamed\",\n  \"untangled\",\n  \"untapped\",\n  \"untaxed\",\n  \"unthawed\",\n  \"unthread\",\n  \"untidy\",\n  \"untie\",\n  \"until\",\n  \"untimed\",\n  \"untimely\",\n  \"untitled\",\n  \"untoasted\",\n  \"untold\",\n  \"untouched\",\n  \"untracked\",\n  \"untrained\",\n  \"untreated\",\n  \"untried\",\n  \"untrimmed\",\n  \"untrue\",\n  \"untruth\",\n  \"unturned\",\n  \"untwist\",\n  \"untying\",\n  \"unusable\",\n  \"unused\",\n  \"unusual\",\n  \"unvalued\",\n  \"unvaried\",\n  \"unvarying\",\n  \"unveiled\",\n  \"unveiling\",\n  \"unvented\",\n  \"unviable\",\n  \"unvisited\",\n  \"unvocal\",\n  \"unwanted\",\n  \"unwarlike\",\n  \"unwary\",\n  \"unwashed\",\n  \"unwatched\",\n  \"unweave\",\n  \"unwed\",\n  \"unwelcome\",\n  \"unwell\",\n  \"unwieldy\",\n  \"unwilling\",\n  \"unwind\",\n  \"unwired\",\n  \"unwitting\",\n  \"unwomanly\",\n  \"unworldly\",\n  \"unworn\",\n  \"unworried\",\n  \"unworthy\",\n  \"unwound\",\n  \"unwoven\",\n  \"unwrapped\",\n  \"unwritten\",\n  \"unzip\",\n  \"upbeat\",\n  \"upchuck\",\n  \"upcoming\",\n  \"upcountry\",\n  \"update\",\n  \"upfront\",\n  \"upgrade\",\n  \"upheaval\",\n  \"upheld\",\n  \"uphill\",\n  \"uphold\",\n  \"uplifted\",\n  \"uplifting\",\n  \"upload\",\n  \"upon\",\n  \"upper\",\n  \"upright\",\n  \"uprising\",\n  \"upriver\",\n  \"uproar\",\n  \"uproot\",\n  \"upscale\",\n  \"upside\",\n  \"upstage\",\n  \"upstairs\",\n  \"upstart\",\n  \"upstate\",\n  \"upstream\",\n  \"upstroke\",\n  \"upswing\",\n  \"uptake\",\n  \"uptight\",\n  \"uptown\",\n  \"upturned\",\n  \"upward\",\n  \"upwind\",\n  \"uranium\",\n  \"urban\",\n  \"urchin\",\n  \"urethane\",\n  \"urgency\",\n  \"urgent\",\n  \"urging\",\n  \"urologist\",\n  \"urology\",\n  \"usable\",\n  \"usage\",\n  \"useable\",\n  \"used\",\n  \"uselessly\",\n  \"user\",\n  \"usher\",\n  \"usual\",\n  \"utensil\",\n  \"utility\",\n  \"utilize\",\n  \"utmost\",\n  \"utopia\",\n  \"utter\",\n  \"vacancy\",\n  \"vacant\",\n  \"vacate\",\n  \"vacation\",\n  \"vagabond\",\n  \"vagrancy\",\n  \"vagrantly\",\n  \"vaguely\",\n  \"vagueness\",\n  \"valiant\",\n  \"valid\",\n  \"valium\",\n  \"valley\",\n  \"valuables\",\n  \"value\",\n  \"vanilla\",\n  \"vanish\",\n  \"vanity\",\n  \"vanquish\",\n  \"vantage\",\n  \"vaporizer\",\n  \"variable\",\n  \"variably\",\n  \"varied\",\n  \"variety\",\n  \"various\",\n  \"varmint\",\n  \"varnish\",\n  \"varsity\",\n  \"varying\",\n  \"vascular\",\n  \"vaseline\",\n  \"vastly\",\n  \"vastness\",\n  \"veal\",\n  \"vegan\",\n  \"veggie\",\n  \"vehicular\",\n  \"velcro\",\n  \"velocity\",\n  \"velvet\",\n  \"vendetta\",\n  \"vending\",\n  \"vendor\",\n  \"veneering\",\n  \"vengeful\",\n  \"venomous\",\n  \"ventricle\",\n  \"venture\",\n  \"venue\",\n  \"venus\",\n  \"verbalize\",\n  \"verbally\",\n  \"verbose\",\n  \"verdict\",\n  \"verify\",\n  \"verse\",\n  \"version\",\n  \"versus\",\n  \"vertebrae\",\n  \"vertical\",\n  \"vertigo\",\n  \"very\",\n  \"vessel\",\n  \"vest\",\n  \"veteran\",\n  \"veto\",\n  \"vexingly\",\n  \"viability\",\n  \"viable\",\n  \"vibes\",\n  \"vice\",\n  \"vicinity\",\n  \"victory\",\n  \"video\",\n  \"viewable\",\n  \"viewer\",\n  \"viewing\",\n  \"viewless\",\n  \"viewpoint\",\n  \"vigorous\",\n  \"village\",\n  \"villain\",\n  \"vindicate\",\n  \"vineyard\",\n  \"vintage\",\n  \"violate\",\n  \"violation\",\n  \"violator\",\n  \"violet\",\n  \"violin\",\n  \"viper\",\n  \"viral\",\n  \"virtual\",\n  \"virtuous\",\n  \"virus\",\n  \"visa\",\n  \"viscosity\",\n  \"viscous\",\n  \"viselike\",\n  \"visible\",\n  \"visibly\",\n  \"vision\",\n  \"visiting\",\n  \"visitor\",\n  \"visor\",\n  \"vista\",\n  \"vitality\",\n  \"vitalize\",\n  \"vitally\",\n  \"vitamins\",\n  \"vivacious\",\n  \"vividly\",\n  \"vividness\",\n  \"vixen\",\n  \"vocalist\",\n  \"vocalize\",\n  \"vocally\",\n  \"vocation\",\n  \"voice\",\n  \"voicing\",\n  \"void\",\n  \"volatile\",\n  \"volley\",\n  \"voltage\",\n  \"volumes\",\n  \"voter\",\n  \"voting\",\n  \"voucher\",\n  \"vowed\",\n  \"vowel\",\n  \"voyage\",\n  \"wackiness\",\n  \"wad\",\n  \"wafer\",\n  \"waffle\",\n  \"waged\",\n  \"wager\",\n  \"wages\",\n  \"waggle\",\n  \"wagon\",\n  \"wake\",\n  \"waking\",\n  \"walk\",\n  \"walmart\",\n  \"walnut\",\n  \"walrus\",\n  \"waltz\",\n  \"wand\",\n  \"wannabe\",\n  \"wanted\",\n  \"wanting\",\n  \"wasabi\",\n  \"washable\",\n  \"washbasin\",\n  \"washboard\",\n  \"washbowl\",\n  \"washcloth\",\n  \"washday\",\n  \"washed\",\n  \"washer\",\n  \"washhouse\",\n  \"washing\",\n  \"washout\",\n  \"washroom\",\n  \"washstand\",\n  \"washtub\",\n  \"wasp\",\n  \"wasting\",\n  \"watch\",\n  \"water\",\n  \"waviness\",\n  \"waving\",\n  \"wavy\",\n  \"whacking\",\n  \"whacky\",\n  \"wham\",\n  \"wharf\",\n  \"wheat\",\n  \"whenever\",\n  \"whiff\",\n  \"whimsical\",\n  \"whinny\",\n  \"whiny\",\n  \"whisking\",\n  \"whoever\",\n  \"whole\",\n  \"whomever\",\n  \"whoopee\",\n  \"whooping\",\n  \"whoops\",\n  \"why\",\n  \"wick\",\n  \"widely\",\n  \"widen\",\n  \"widget\",\n  \"widow\",\n  \"width\",\n  \"wieldable\",\n  \"wielder\",\n  \"wife\",\n  \"wifi\",\n  \"wikipedia\",\n  \"wildcard\",\n  \"wildcat\",\n  \"wilder\",\n  \"wildfire\",\n  \"wildfowl\",\n  \"wildland\",\n  \"wildlife\",\n  \"wildly\",\n  \"wildness\",\n  \"willed\",\n  \"willfully\",\n  \"willing\",\n  \"willow\",\n  \"willpower\",\n  \"wilt\",\n  \"wimp\",\n  \"wince\",\n  \"wincing\",\n  \"wind\",\n  \"wing\",\n  \"winking\",\n  \"winner\",\n  \"winnings\",\n  \"winter\",\n  \"wipe\",\n  \"wired\",\n  \"wireless\",\n  \"wiring\",\n  \"wiry\",\n  \"wisdom\",\n  \"wise\",\n  \"wish\",\n  \"wisplike\",\n  \"wispy\",\n  \"wistful\",\n  \"wizard\",\n  \"wobble\",\n  \"wobbling\",\n  \"wobbly\",\n  \"wok\",\n  \"wolf\",\n  \"wolverine\",\n  \"womanhood\",\n  \"womankind\",\n  \"womanless\",\n  \"womanlike\",\n  \"womanly\",\n  \"womb\",\n  \"woof\",\n  \"wooing\",\n  \"wool\",\n  \"woozy\",\n  \"word\",\n  \"work\",\n  \"worried\",\n  \"worrier\",\n  \"worrisome\",\n  \"worry\",\n  \"worsening\",\n  \"worshiper\",\n  \"worst\",\n  \"wound\",\n  \"woven\",\n  \"wow\",\n  \"wrangle\",\n  \"wrath\",\n  \"wreath\",\n  \"wreckage\",\n  \"wrecker\",\n  \"wrecking\",\n  \"wrench\",\n  \"wriggle\",\n  \"wriggly\",\n  \"wrinkle\",\n  \"wrinkly\",\n  \"wrist\",\n  \"writing\",\n  \"written\",\n  \"wrongdoer\",\n  \"wronged\",\n  \"wrongful\",\n  \"wrongly\",\n  \"wrongness\",\n  \"wrought\",\n  \"xbox\",\n  \"xerox\",\n  \"yahoo\",\n  \"yam\",\n  \"yanking\",\n  \"yapping\",\n  \"yard\",\n  \"yarn\",\n  \"yeah\",\n  \"yearbook\",\n  \"yearling\",\n  \"yearly\",\n  \"yearning\",\n  \"yeast\",\n  \"yelling\",\n  \"yelp\",\n  \"yen\",\n  \"yesterday\",\n  \"yiddish\",\n  \"yield\",\n  \"yin\",\n  \"yippee\",\n  \"yo-yo\",\n  \"yodel\",\n  \"yoga\",\n  \"yogurt\",\n  \"yonder\",\n  \"yoyo\",\n  \"yummy\",\n  \"zap\",\n  \"zealous\",\n  \"zebra\",\n  \"zen\",\n  \"zeppelin\",\n  \"zero\",\n  \"zestfully\",\n  \"zesty\",\n  \"zigzagged\",\n  \"zipfile\",\n  \"zipping\",\n  \"zippy\",\n  \"zips\",\n  \"zit\",\n  \"zodiac\",\n  \"zombie\",\n  \"zone\",\n  \"zoning\",\n  \"zookeeper\",\n  \"zoologist\",\n  \"zoology\",\n  \"zoom\",\n];\n","export class GeneratedPasswordHistory {\n  password: string;\n  date: number;\n\n  constructor(password: string, date: number) {\n    this.password = password;\n    this.date = date;\n  }\n}\n","import * as zxcvbn from \"zxcvbn\";\n\nimport { CryptoService } from \"../../../abstractions/crypto.service\";\nimport { StateService } from \"../../../abstractions/state.service\";\nimport { PolicyService } from \"../../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"../../../admin-console/enums\";\nimport { PasswordGeneratorPolicyOptions } from \"../../../admin-console/models/domain/password-generator-policy-options\";\nimport { EFFLongWordList } from \"../../../misc/wordlist\";\nimport { EncString } from \"../../../models/domain/enc-string\";\n\nimport { GeneratedPasswordHistory } from \"./generated-password-history\";\nimport { PasswordGenerationServiceAbstraction } from \"./password-generation.service.abstraction\";\nimport { PasswordGeneratorOptions } from \"./password-generator-options\";\n\nconst DefaultOptions: PasswordGeneratorOptions = {\n  length: 14,\n  ambiguous: false,\n  number: true,\n  minNumber: 1,\n  uppercase: true,\n  minUppercase: 0,\n  lowercase: true,\n  minLowercase: 0,\n  special: false,\n  minSpecial: 1,\n  type: \"password\",\n  numWords: 3,\n  wordSeparator: \"-\",\n  capitalize: false,\n  includeNumber: false,\n};\n\nconst MaxPasswordsInHistory = 100;\n\nexport class PasswordGenerationService implements PasswordGenerationServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private policyService: PolicyService,\n    private stateService: StateService\n  ) {}\n\n  async generatePassword(options: PasswordGeneratorOptions): Promise<string> {\n    // overload defaults with given options\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.type === \"passphrase\") {\n      return this.generatePassphrase(options);\n    }\n\n    // sanitize\n    this.sanitizePasswordLength(o, true);\n\n    const minLength: number = o.minUppercase + o.minLowercase + o.minNumber + o.minSpecial;\n    if (o.length < minLength) {\n      o.length = minLength;\n    }\n\n    const positions: string[] = [];\n    if (o.lowercase && o.minLowercase > 0) {\n      for (let i = 0; i < o.minLowercase; i++) {\n        positions.push(\"l\");\n      }\n    }\n    if (o.uppercase && o.minUppercase > 0) {\n      for (let i = 0; i < o.minUppercase; i++) {\n        positions.push(\"u\");\n      }\n    }\n    if (o.number && o.minNumber > 0) {\n      for (let i = 0; i < o.minNumber; i++) {\n        positions.push(\"n\");\n      }\n    }\n    if (o.special && o.minSpecial > 0) {\n      for (let i = 0; i < o.minSpecial; i++) {\n        positions.push(\"s\");\n      }\n    }\n    while (positions.length < o.length) {\n      positions.push(\"a\");\n    }\n\n    // shuffle\n    await this.shuffleArray(positions);\n\n    // build out the char sets\n    let allCharSet = \"\";\n\n    let lowercaseCharSet = \"abcdefghijkmnopqrstuvwxyz\";\n    if (o.ambiguous) {\n      lowercaseCharSet += \"l\";\n    }\n    if (o.lowercase) {\n      allCharSet += lowercaseCharSet;\n    }\n\n    let uppercaseCharSet = \"ABCDEFGHJKLMNPQRSTUVWXYZ\";\n    if (o.ambiguous) {\n      uppercaseCharSet += \"IO\";\n    }\n    if (o.uppercase) {\n      allCharSet += uppercaseCharSet;\n    }\n\n    let numberCharSet = \"23456789\";\n    if (o.ambiguous) {\n      numberCharSet += \"01\";\n    }\n    if (o.number) {\n      allCharSet += numberCharSet;\n    }\n\n    const specialCharSet = \"!@#$%^&*\";\n    if (o.special) {\n      allCharSet += specialCharSet;\n    }\n\n    let password = \"\";\n    for (let i = 0; i < o.length; i++) {\n      let positionChars: string;\n      switch (positions[i]) {\n        case \"l\":\n          positionChars = lowercaseCharSet;\n          break;\n        case \"u\":\n          positionChars = uppercaseCharSet;\n          break;\n        case \"n\":\n          positionChars = numberCharSet;\n          break;\n        case \"s\":\n          positionChars = specialCharSet;\n          break;\n        case \"a\":\n          positionChars = allCharSet;\n          break;\n        default:\n          break;\n      }\n\n      const randomCharIndex = await this.cryptoService.randomNumber(0, positionChars.length - 1);\n      password += positionChars.charAt(randomCharIndex);\n    }\n\n    return password;\n  }\n\n  async generatePassphrase(options: PasswordGeneratorOptions): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.numWords == null || o.numWords <= 2) {\n      o.numWords = DefaultOptions.numWords;\n    }\n    if (o.wordSeparator == null || o.wordSeparator.length === 0 || o.wordSeparator.length > 1) {\n      o.wordSeparator = \" \";\n    }\n    if (o.capitalize == null) {\n      o.capitalize = false;\n    }\n    if (o.includeNumber == null) {\n      o.includeNumber = false;\n    }\n\n    const listLength = EFFLongWordList.length - 1;\n    const wordList = new Array(o.numWords);\n    for (let i = 0; i < o.numWords; i++) {\n      const wordIndex = await this.cryptoService.randomNumber(0, listLength);\n      if (o.capitalize) {\n        wordList[i] = this.capitalize(EFFLongWordList[wordIndex]);\n      } else {\n        wordList[i] = EFFLongWordList[wordIndex];\n      }\n    }\n\n    if (o.includeNumber) {\n      await this.appendRandomNumberToRandomWord(wordList);\n    }\n    return wordList.join(o.wordSeparator);\n  }\n\n  async getOptions(): Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]> {\n    let options = await this.stateService.getPasswordGenerationOptions();\n    if (options == null) {\n      options = Object.assign({}, DefaultOptions);\n    } else {\n      options = Object.assign({}, DefaultOptions, options);\n    }\n    await this.stateService.setPasswordGenerationOptions(options);\n    const enforcedOptions = await this.enforcePasswordGeneratorPoliciesOnOptions(options);\n    options = enforcedOptions[0];\n    return [options, enforcedOptions[1]];\n  }\n\n  async enforcePasswordGeneratorPoliciesOnOptions(\n    options: PasswordGeneratorOptions\n  ): Promise<[PasswordGeneratorOptions, PasswordGeneratorPolicyOptions]> {\n    let enforcedPolicyOptions = await this.getPasswordGeneratorPolicyOptions();\n    if (enforcedPolicyOptions != null) {\n      if (options.length < enforcedPolicyOptions.minLength) {\n        options.length = enforcedPolicyOptions.minLength;\n      }\n\n      if (enforcedPolicyOptions.useUppercase) {\n        options.uppercase = true;\n      }\n\n      if (enforcedPolicyOptions.useLowercase) {\n        options.lowercase = true;\n      }\n\n      if (enforcedPolicyOptions.useNumbers) {\n        options.number = true;\n      }\n\n      if (options.minNumber < enforcedPolicyOptions.numberCount) {\n        options.minNumber = enforcedPolicyOptions.numberCount;\n      }\n\n      if (enforcedPolicyOptions.useSpecial) {\n        options.special = true;\n      }\n\n      if (options.minSpecial < enforcedPolicyOptions.specialCount) {\n        options.minSpecial = enforcedPolicyOptions.specialCount;\n      }\n\n      // Must normalize these fields because the receiving call expects all options to pass the current rules\n      if (options.minSpecial + options.minNumber > options.length) {\n        options.minSpecial = options.length - options.minNumber;\n      }\n\n      if (options.numWords < enforcedPolicyOptions.minNumberWords) {\n        options.numWords = enforcedPolicyOptions.minNumberWords;\n      }\n\n      if (enforcedPolicyOptions.capitalize) {\n        options.capitalize = true;\n      }\n\n      if (enforcedPolicyOptions.includeNumber) {\n        options.includeNumber = true;\n      }\n\n      // Force default type if password/passphrase selected via policy\n      if (\n        enforcedPolicyOptions.defaultType === \"password\" ||\n        enforcedPolicyOptions.defaultType === \"passphrase\"\n      ) {\n        options.type = enforcedPolicyOptions.defaultType;\n      }\n    } else {\n      // UI layer expects an instantiated object to prevent more explicit null checks\n      enforcedPolicyOptions = new PasswordGeneratorPolicyOptions();\n    }\n    return [options, enforcedPolicyOptions];\n  }\n\n  async getPasswordGeneratorPolicyOptions(): Promise<PasswordGeneratorPolicyOptions> {\n    const policies = await this.policyService?.getAll(PolicyType.PasswordGenerator);\n    let enforcedOptions: PasswordGeneratorPolicyOptions = null;\n\n    if (policies == null || policies.length === 0) {\n      return enforcedOptions;\n    }\n\n    policies.forEach((currentPolicy) => {\n      if (!currentPolicy.enabled || currentPolicy.data == null) {\n        return;\n      }\n\n      if (enforcedOptions == null) {\n        enforcedOptions = new PasswordGeneratorPolicyOptions();\n      }\n\n      // Password wins in multi-org collisions\n      if (currentPolicy.data.defaultType != null && enforcedOptions.defaultType !== \"password\") {\n        enforcedOptions.defaultType = currentPolicy.data.defaultType;\n      }\n\n      if (\n        currentPolicy.data.minLength != null &&\n        currentPolicy.data.minLength > enforcedOptions.minLength\n      ) {\n        enforcedOptions.minLength = currentPolicy.data.minLength;\n      }\n\n      if (currentPolicy.data.useUpper) {\n        enforcedOptions.useUppercase = true;\n      }\n\n      if (currentPolicy.data.useLower) {\n        enforcedOptions.useLowercase = true;\n      }\n\n      if (currentPolicy.data.useNumbers) {\n        enforcedOptions.useNumbers = true;\n      }\n\n      if (\n        currentPolicy.data.minNumbers != null &&\n        currentPolicy.data.minNumbers > enforcedOptions.numberCount\n      ) {\n        enforcedOptions.numberCount = currentPolicy.data.minNumbers;\n      }\n\n      if (currentPolicy.data.useSpecial) {\n        enforcedOptions.useSpecial = true;\n      }\n\n      if (\n        currentPolicy.data.minSpecial != null &&\n        currentPolicy.data.minSpecial > enforcedOptions.specialCount\n      ) {\n        enforcedOptions.specialCount = currentPolicy.data.minSpecial;\n      }\n\n      if (\n        currentPolicy.data.minNumberWords != null &&\n        currentPolicy.data.minNumberWords > enforcedOptions.minNumberWords\n      ) {\n        enforcedOptions.minNumberWords = currentPolicy.data.minNumberWords;\n      }\n\n      if (currentPolicy.data.capitalize) {\n        enforcedOptions.capitalize = true;\n      }\n\n      if (currentPolicy.data.includeNumber) {\n        enforcedOptions.includeNumber = true;\n      }\n    });\n\n    return enforcedOptions;\n  }\n\n  async saveOptions(options: PasswordGeneratorOptions) {\n    await this.stateService.setPasswordGenerationOptions(options);\n  }\n\n  async getHistory(): Promise<GeneratedPasswordHistory[]> {\n    const hasKey = await this.cryptoService.hasKey();\n    if (!hasKey) {\n      return new Array<GeneratedPasswordHistory>();\n    }\n\n    if ((await this.stateService.getDecryptedPasswordGenerationHistory()) == null) {\n      const encrypted = await this.stateService.getEncryptedPasswordGenerationHistory();\n      const decrypted = await this.decryptHistory(encrypted);\n      await this.stateService.setDecryptedPasswordGenerationHistory(decrypted);\n    }\n\n    const passwordGenerationHistory =\n      await this.stateService.getDecryptedPasswordGenerationHistory();\n    return passwordGenerationHistory != null\n      ? passwordGenerationHistory\n      : new Array<GeneratedPasswordHistory>();\n  }\n\n  async addHistory(password: string): Promise<void> {\n    // Cannot add new history if no key is available\n    const hasKey = await this.cryptoService.hasKey();\n    if (!hasKey) {\n      return;\n    }\n\n    const currentHistory = await this.getHistory();\n\n    // Prevent duplicates\n    if (this.matchesPrevious(password, currentHistory)) {\n      return;\n    }\n\n    currentHistory.unshift(new GeneratedPasswordHistory(password, Date.now()));\n\n    // Remove old items.\n    if (currentHistory.length > MaxPasswordsInHistory) {\n      currentHistory.pop();\n    }\n\n    const newHistory = await this.encryptHistory(currentHistory);\n    await this.stateService.setDecryptedPasswordGenerationHistory(currentHistory);\n    return await this.stateService.setEncryptedPasswordGenerationHistory(newHistory);\n  }\n\n  async clear(userId?: string): Promise<void> {\n    await this.stateService.setEncryptedPasswordGenerationHistory(null, { userId: userId });\n    await this.stateService.setDecryptedPasswordGenerationHistory(null, { userId: userId });\n  }\n\n  /**\n   * Calculates a password strength score using zxcvbn.\n   * @param password The password to calculate the strength of.\n   * @param emailInput An unparsed email address to use as user input.\n   * @param userInputs An array of additional user inputs to use when calculating the strength.\n   */\n  passwordStrength(\n    password: string,\n    emailInput: string = null,\n    userInputs: string[] = null\n  ): zxcvbn.ZXCVBNResult {\n    if (password == null || password.length === 0) {\n      return null;\n    }\n    const globalUserInputs = [\n      \"bitwarden\",\n      \"bit\",\n      \"warden\",\n      ...(userInputs ?? []),\n      ...this.emailToUserInputs(emailInput),\n    ];\n    // Use a hash set to get rid of any duplicate user inputs\n    const finalUserInputs = Array.from(new Set(globalUserInputs));\n    const result = zxcvbn(password, finalUserInputs);\n    return result;\n  }\n\n  normalizeOptions(\n    options: PasswordGeneratorOptions,\n    enforcedPolicyOptions: PasswordGeneratorPolicyOptions\n  ) {\n    options.minLowercase = 0;\n    options.minUppercase = 0;\n\n    if (!options.length || options.length < 5) {\n      options.length = 5;\n    } else if (options.length > 128) {\n      options.length = 128;\n    }\n\n    if (options.length < enforcedPolicyOptions.minLength) {\n      options.length = enforcedPolicyOptions.minLength;\n    }\n\n    if (!options.minNumber) {\n      options.minNumber = 0;\n    } else if (options.minNumber > options.length) {\n      options.minNumber = options.length;\n    } else if (options.minNumber > 9) {\n      options.minNumber = 9;\n    }\n\n    if (options.minNumber < enforcedPolicyOptions.numberCount) {\n      options.minNumber = enforcedPolicyOptions.numberCount;\n    }\n\n    if (!options.minSpecial) {\n      options.minSpecial = 0;\n    } else if (options.minSpecial > options.length) {\n      options.minSpecial = options.length;\n    } else if (options.minSpecial > 9) {\n      options.minSpecial = 9;\n    }\n\n    if (options.minSpecial < enforcedPolicyOptions.specialCount) {\n      options.minSpecial = enforcedPolicyOptions.specialCount;\n    }\n\n    if (options.minSpecial + options.minNumber > options.length) {\n      options.minSpecial = options.length - options.minNumber;\n    }\n\n    if (options.numWords == null || options.length < 3) {\n      options.numWords = 3;\n    } else if (options.numWords > 20) {\n      options.numWords = 20;\n    }\n\n    if (options.numWords < enforcedPolicyOptions.minNumberWords) {\n      options.numWords = enforcedPolicyOptions.minNumberWords;\n    }\n\n    if (options.wordSeparator != null && options.wordSeparator.length > 1) {\n      options.wordSeparator = options.wordSeparator[0];\n    }\n\n    this.sanitizePasswordLength(options, false);\n  }\n\n  /**\n   * Convert an email address into a list of user inputs for zxcvbn by\n   * taking the local part of the email address and splitting it into words.\n   * @param email\n   * @private\n   */\n  private emailToUserInputs(email: string): string[] {\n    if (email == null || email.length === 0) {\n      return [];\n    }\n    const atPosition = email.indexOf(\"@\");\n    if (atPosition < 0) {\n      return [];\n    }\n    return email\n      .substring(0, atPosition)\n      .trim()\n      .toLowerCase()\n      .split(/[^A-Za-z0-9]/);\n  }\n\n  private capitalize(str: string) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  private async appendRandomNumberToRandomWord(wordList: string[]) {\n    if (wordList == null || wordList.length <= 0) {\n      return;\n    }\n    const index = await this.cryptoService.randomNumber(0, wordList.length - 1);\n    const num = await this.cryptoService.randomNumber(0, 9);\n    wordList[index] = wordList[index] + num;\n  }\n\n  private async encryptHistory(\n    history: GeneratedPasswordHistory[]\n  ): Promise<GeneratedPasswordHistory[]> {\n    if (history == null || history.length === 0) {\n      return Promise.resolve([]);\n    }\n\n    const promises = history.map(async (item) => {\n      const encrypted = await this.cryptoService.encrypt(item.password);\n      return new GeneratedPasswordHistory(encrypted.encryptedString, item.date);\n    });\n\n    return await Promise.all(promises);\n  }\n\n  private async decryptHistory(\n    history: GeneratedPasswordHistory[]\n  ): Promise<GeneratedPasswordHistory[]> {\n    if (history == null || history.length === 0) {\n      return Promise.resolve([]);\n    }\n\n    const promises = history.map(async (item) => {\n      const decrypted = await this.cryptoService.decryptToUtf8(new EncString(item.password));\n      return new GeneratedPasswordHistory(decrypted, item.date);\n    });\n\n    return await Promise.all(promises);\n  }\n\n  private matchesPrevious(password: string, history: GeneratedPasswordHistory[]): boolean {\n    if (history == null || history.length === 0) {\n      return false;\n    }\n\n    return history[history.length - 1].password === password;\n  }\n\n  // ref: https://stackoverflow.com/a/12646864/1090359\n  private async shuffleArray(array: string[]) {\n    for (let i = array.length - 1; i > 0; i--) {\n      const j = await this.cryptoService.randomNumber(0, i);\n      [array[i], array[j]] = [array[j], array[i]];\n    }\n  }\n\n  private sanitizePasswordLength(options: any, forGeneration: boolean) {\n    let minUppercaseCalc = 0;\n    let minLowercaseCalc = 0;\n    let minNumberCalc: number = options.minNumber;\n    let minSpecialCalc: number = options.minSpecial;\n\n    if (options.uppercase && options.minUppercase <= 0) {\n      minUppercaseCalc = 1;\n    } else if (!options.uppercase) {\n      minUppercaseCalc = 0;\n    }\n\n    if (options.lowercase && options.minLowercase <= 0) {\n      minLowercaseCalc = 1;\n    } else if (!options.lowercase) {\n      minLowercaseCalc = 0;\n    }\n\n    if (options.number && options.minNumber <= 0) {\n      minNumberCalc = 1;\n    } else if (!options.number) {\n      minNumberCalc = 0;\n    }\n\n    if (options.special && options.minSpecial <= 0) {\n      minSpecialCalc = 1;\n    } else if (!options.special) {\n      minSpecialCalc = 0;\n    }\n\n    // This should never happen but is a final safety net\n    if (!options.length || options.length < 1) {\n      options.length = 10;\n    }\n\n    const minLength: number = minUppercaseCalc + minLowercaseCalc + minNumberCalc + minSpecialCalc;\n    // Normalize and Generation both require this modification\n    if (options.length < minLength) {\n      options.length = minLength;\n    }\n\n    // Apply other changes if the options object passed in is for generation\n    if (forGeneration) {\n      options.minUppercase = minUppercaseCalc;\n      options.minLowercase = minLowercaseCalc;\n      options.minNumber = minNumberCalc;\n      options.minSpecial = minSpecialCalc;\n    }\n  }\n}\n","import { ProfileOrganizationResponse } from \"../admin-console/models/response/profile-organization.response\";\nimport { ProfileProviderOrganizationResponse } from \"../admin-console/models/response/profile-provider-organization.response\";\nimport { ProfileProviderResponse } from \"../admin-console/models/response/profile-provider.response\";\nimport { KdfConfig } from \"../auth/models/domain/kdf-config\";\nimport { HashPurpose, KdfType, KeySuffixOptions } from \"../enums\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\n\nexport abstract class CryptoService {\n  setKey: (key: SymmetricCryptoKey) => Promise<any>;\n  setKeyHash: (keyHash: string) => Promise<void>;\n  setEncKey: (encKey: string) => Promise<void>;\n  setEncPrivateKey: (encPrivateKey: string) => Promise<void>;\n  setOrgKeys: (\n    orgs: ProfileOrganizationResponse[],\n    providerOrgs: ProfileProviderOrganizationResponse[]\n  ) => Promise<void>;\n  setProviderKeys: (orgs: ProfileProviderResponse[]) => Promise<void>;\n  getKey: (keySuffix?: KeySuffixOptions, userId?: string) => Promise<SymmetricCryptoKey>;\n  getKeyFromStorage: (keySuffix: KeySuffixOptions, userId?: string) => Promise<SymmetricCryptoKey>;\n  getKeyHash: () => Promise<string>;\n  compareAndUpdateKeyHash: (masterPassword: string, key: SymmetricCryptoKey) => Promise<boolean>;\n  getEncKey: (key?: SymmetricCryptoKey) => Promise<SymmetricCryptoKey>;\n  getPublicKey: () => Promise<ArrayBuffer>;\n  getPrivateKey: () => Promise<ArrayBuffer>;\n  getFingerprint: (userId: string, publicKey?: ArrayBuffer) => Promise<string[]>;\n  getOrgKeys: () => Promise<Map<string, SymmetricCryptoKey>>;\n  getOrgKey: (orgId: string) => Promise<SymmetricCryptoKey>;\n  getProviderKey: (providerId: string) => Promise<SymmetricCryptoKey>;\n  getKeyForUserEncryption: (key?: SymmetricCryptoKey) => Promise<SymmetricCryptoKey>;\n  hasKey: () => Promise<boolean>;\n  hasKeyInMemory: (userId?: string) => Promise<boolean>;\n  hasKeyStored: (keySuffix?: KeySuffixOptions, userId?: string) => Promise<boolean>;\n  hasEncKey: () => Promise<boolean>;\n  clearKey: (clearSecretStorage?: boolean, userId?: string) => Promise<any>;\n  clearKeyHash: () => Promise<any>;\n  clearEncKey: (memoryOnly?: boolean, userId?: string) => Promise<any>;\n  clearKeyPair: (memoryOnly?: boolean, userId?: string) => Promise<any>;\n  clearOrgKeys: (memoryOnly?: boolean, userId?: string) => Promise<any>;\n  clearProviderKeys: (memoryOnly?: boolean) => Promise<any>;\n  clearPinProtectedKey: () => Promise<any>;\n  clearKeys: (userId?: string) => Promise<any>;\n  toggleKey: () => Promise<any>;\n  makeKey: (\n    password: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig\n  ) => Promise<SymmetricCryptoKey>;\n  makeKeyFromPin: (\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    protectedKeyCs?: EncString\n  ) => Promise<SymmetricCryptoKey>;\n  makeShareKey: () => Promise<[EncString, SymmetricCryptoKey]>;\n  makeKeyPair: (key?: SymmetricCryptoKey) => Promise<[string, EncString]>;\n  makePinKey: (\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig\n  ) => Promise<SymmetricCryptoKey>;\n  makeSendKey: (keyMaterial: ArrayBuffer) => Promise<SymmetricCryptoKey>;\n  hashPassword: (\n    password: string,\n    key: SymmetricCryptoKey,\n    hashPurpose?: HashPurpose\n  ) => Promise<string>;\n  makeEncKey: (key: SymmetricCryptoKey) => Promise<[SymmetricCryptoKey, EncString]>;\n  remakeEncKey: (\n    key: SymmetricCryptoKey,\n    encKey?: SymmetricCryptoKey\n  ) => Promise<[SymmetricCryptoKey, EncString]>;\n  encrypt: (plainValue: string | ArrayBuffer, key?: SymmetricCryptoKey) => Promise<EncString>;\n  encryptToBytes: (plainValue: ArrayBuffer, key?: SymmetricCryptoKey) => Promise<EncArrayBuffer>;\n  rsaEncrypt: (data: ArrayBuffer, publicKey?: ArrayBuffer) => Promise<EncString>;\n  rsaDecrypt: (encValue: string, privateKeyValue?: ArrayBuffer) => Promise<ArrayBuffer>;\n  decryptToBytes: (encString: EncString, key?: SymmetricCryptoKey) => Promise<ArrayBuffer>;\n  decryptToUtf8: (encString: EncString, key?: SymmetricCryptoKey) => Promise<string>;\n  decryptFromBytes: (encBuffer: EncArrayBuffer, key: SymmetricCryptoKey) => Promise<ArrayBuffer>;\n  randomNumber: (min: number, max: number) => Promise<number>;\n  validateKey: (key: SymmetricCryptoKey) => Promise<boolean>;\n}\n","export abstract class VaultTimeoutService {\n  checkVaultTimeout: () => Promise<void>;\n  lock: (userId?: string) => Promise<void>;\n  logOut: (userId?: string) => Promise<void>;\n}\n","import { VaultTimeoutAction } from \"../../enums/vault-timeout-action.enum\";\n\nexport abstract class VaultTimeoutSettingsService {\n  setVaultTimeoutOptions: (\n    vaultTimeout: number,\n    vaultTimeoutAction: VaultTimeoutAction\n  ) => Promise<void>;\n  getVaultTimeout: (userId?: string) => Promise<number>;\n  getVaultTimeoutAction: (userId?: string) => Promise<VaultTimeoutAction>;\n  isPinLockSet: () => Promise<[boolean, boolean]>;\n  isBiometricLockSet: () => Promise<boolean>;\n  clear: (userId?: string) => Promise<void>;\n}\n","import { ListResponse } from \"../../../models/response/list.response\";\nimport { PolicyType } from \"../../enums\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { PolicyRequest } from \"../../models/request/policy.request\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport class PolicyApiServiceAbstraction {\n  getPolicy: (organizationId: string, type: PolicyType) => Promise<PolicyResponse>;\n  getPolicies: (organizationId: string) => Promise<ListResponse<PolicyResponse>>;\n\n  getPoliciesByToken: (\n    organizationId: string,\n    token: string,\n    email: string,\n    organizationUserId: string\n  ) => Promise<ListResponse<PolicyResponse>>;\n  getPoliciesByInvitedUser: (\n    organizationId: string,\n    userId: string\n  ) => Promise<ListResponse<PolicyResponse>>;\n  getMasterPasswordPoliciesForInvitedUsers: (orgId: string) => Promise<MasterPasswordPolicyOptions>;\n  putPolicy: (organizationId: string, type: PolicyType, request: PolicyRequest) => Promise<any>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { Policy } from \"../../models/domain/policy\";\nimport { ResetPasswordPolicyOptions } from \"../../models/domain/reset-password-policy-options\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport abstract class PolicyService {\n  policies$: Observable<Policy[]>;\n  get$: (policyType: PolicyType, policyFilter?: (policy: Policy) => boolean) => Observable<Policy>;\n  masterPasswordPolicyOptions$: (policies?: Policy[]) => Observable<MasterPasswordPolicyOptions>;\n  policyAppliesToActiveUser$: (\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean\n  ) => Observable<boolean>;\n\n  /**\n   * @deprecated Do not call this, use the policies$ observable collection\n   */\n  getAll: (type?: PolicyType, userId?: string) => Promise<Policy[]>;\n  evaluateMasterPassword: (\n    passwordStrength: number,\n    newPassword: string,\n    enforcedPolicyOptions?: MasterPasswordPolicyOptions\n  ) => boolean;\n  getResetPasswordPolicyOptions: (\n    policies: Policy[],\n    orgId: string\n  ) => [ResetPasswordPolicyOptions, boolean];\n  mapPoliciesFromToken: (policiesResponse: ListResponse<PolicyResponse>) => Policy[];\n  policyAppliesToUser: (\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) => Promise<boolean>;\n}\n\nexport abstract class InternalPolicyService extends PolicyService {\n  upsert: (policy: PolicyData) => Promise<any>;\n  replace: (policies: { [id: string]: PolicyData }) => Promise<void>;\n  clear: (userId?: string) => Promise<any>;\n}\n","import { Directive, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { firstValueFrom, Subject } from \"rxjs\";\nimport { concatMap, take, takeUntil } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/admin-console/models/domain/master-password-policy-options\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { SecretVerificationRequest } from \"@bitwarden/common/auth/models/request/secret-verification.request\";\nimport { MasterPasswordPolicyResponse } from \"@bitwarden/common/auth/models/response/master-password-policy.response\";\nimport { HashPurpose, KeySuffixOptions } from \"@bitwarden/common/enums\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\n@Directive()\nexport class LockComponent implements OnInit, OnDestroy {\n  masterPassword = \"\";\n  pin = \"\";\n  showPassword = false;\n  email: string;\n  pinLock = false;\n  webVaultHostname = \"\";\n  formPromise: Promise<MasterPasswordPolicyResponse>;\n  supportsBiometric: boolean;\n  biometricLock: boolean;\n  biometricText: string;\n  hideInput: boolean;\n\n  protected successRoute = \"vault\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n  protected onSuccessfulSubmit: () => Promise<void>;\n\n  private invalidPinAttempts = 0;\n  private pinSet: [boolean, boolean];\n\n  private enforcedMasterPasswordOptions: MasterPasswordPolicyOptions = undefined;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected messagingService: MessagingService,\n    protected cryptoService: CryptoService,\n    protected vaultTimeoutService: VaultTimeoutService,\n    protected vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    protected environmentService: EnvironmentService,\n    protected stateService: StateService,\n    protected apiService: ApiService,\n    protected logService: LogService,\n    private keyConnectorService: KeyConnectorService,\n    protected ngZone: NgZone,\n    protected policyApiService: PolicyApiServiceAbstraction,\n    protected policyService: InternalPolicyService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction\n  ) {}\n\n  async ngOnInit() {\n    this.stateService.activeAccount$\n      .pipe(\n        concatMap(async () => {\n          await this.load();\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async submit() {\n    if (this.pinLock) {\n      return await this.handlePinRequiredUnlock();\n    }\n\n    await this.handleMasterPasswordRequiredUnlock();\n  }\n\n  async logOut() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"logOutConfirmation\"),\n      this.i18nService.t(\"logOut\"),\n      this.i18nService.t(\"logOut\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      this.messagingService.send(\"logout\");\n    }\n  }\n\n  async unlockBiometric(): Promise<boolean> {\n    if (!this.biometricLock) {\n      return;\n    }\n\n    const success = (await this.cryptoService.getKey(KeySuffixOptions.Biometric)) != null;\n\n    if (success) {\n      await this.doContinue(false);\n    }\n\n    return success;\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n    const input = document.getElementById(this.pinLock ? \"pin\" : \"masterPassword\");\n    if (this.ngZone.isStable) {\n      input.focus();\n    } else {\n      this.ngZone.onStable.pipe(take(1)).subscribe(() => input.focus());\n    }\n  }\n\n  private async handlePinRequiredUnlock() {\n    if (this.pin == null || this.pin === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"pinRequired\")\n      );\n      return;\n    }\n\n    return await this.doUnlockWithPin();\n  }\n\n  private async doUnlockWithPin() {\n    let failed = true;\n    try {\n      const kdf = await this.stateService.getKdfType();\n      const kdfConfig = await this.stateService.getKdfConfig();\n      if (this.pinSet[0]) {\n        const key = await this.cryptoService.makeKeyFromPin(\n          this.pin,\n          this.email,\n          kdf,\n          kdfConfig,\n          await this.stateService.getDecryptedPinProtected()\n        );\n        const encKey = await this.cryptoService.getEncKey(key);\n        const protectedPin = await this.stateService.getProtectedPin();\n        const decPin = await this.cryptoService.decryptToUtf8(new EncString(protectedPin), encKey);\n        failed = decPin !== this.pin;\n        if (!failed) {\n          await this.setKeyAndContinue(key);\n        }\n      } else {\n        const key = await this.cryptoService.makeKeyFromPin(this.pin, this.email, kdf, kdfConfig);\n        failed = false;\n        await this.setKeyAndContinue(key);\n      }\n    } catch {\n      failed = true;\n    }\n\n    if (failed) {\n      this.invalidPinAttempts++;\n      if (this.invalidPinAttempts >= 5) {\n        this.messagingService.send(\"logout\");\n        return;\n      }\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidPin\")\n      );\n    }\n  }\n\n  private async handleMasterPasswordRequiredUnlock() {\n    if (this.masterPassword == null || this.masterPassword === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordRequired\")\n      );\n      return;\n    }\n    await this.doUnlockWithMasterPassword();\n  }\n\n  private async doUnlockWithMasterPassword() {\n    const kdf = await this.stateService.getKdfType();\n    const kdfConfig = await this.stateService.getKdfConfig();\n\n    const key = await this.cryptoService.makeKey(this.masterPassword, this.email, kdf, kdfConfig);\n    const storedKeyHash = await this.cryptoService.getKeyHash();\n\n    let passwordValid = false;\n\n    if (storedKeyHash != null) {\n      passwordValid = await this.cryptoService.compareAndUpdateKeyHash(this.masterPassword, key);\n    } else {\n      const request = new SecretVerificationRequest();\n      const serverKeyHash = await this.cryptoService.hashPassword(\n        this.masterPassword,\n        key,\n        HashPurpose.ServerAuthorization\n      );\n      request.masterPasswordHash = serverKeyHash;\n      try {\n        this.formPromise = this.apiService.postAccountVerifyPassword(request);\n        const response = await this.formPromise;\n        this.enforcedMasterPasswordOptions = MasterPasswordPolicyOptions.fromResponse(response);\n        passwordValid = true;\n        const localKeyHash = await this.cryptoService.hashPassword(\n          this.masterPassword,\n          key,\n          HashPurpose.LocalAuthorization\n        );\n        await this.cryptoService.setKeyHash(localKeyHash);\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n\n    if (!passwordValid) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidMasterPassword\")\n      );\n      return;\n    }\n\n    if (this.pinSet[0]) {\n      const protectedPin = await this.stateService.getProtectedPin();\n      const encKey = await this.cryptoService.getEncKey(key);\n      const decPin = await this.cryptoService.decryptToUtf8(new EncString(protectedPin), encKey);\n      const pinKey = await this.cryptoService.makePinKey(decPin, this.email, kdf, kdfConfig);\n      await this.stateService.setDecryptedPinProtected(\n        await this.cryptoService.encrypt(key.key, pinKey)\n      );\n    }\n    await this.setKeyAndContinue(key, true);\n  }\n  private async setKeyAndContinue(key: SymmetricCryptoKey, evaluatePasswordAfterUnlock = false) {\n    await this.cryptoService.setKey(key);\n    await this.doContinue(evaluatePasswordAfterUnlock);\n  }\n\n  private async doContinue(evaluatePasswordAfterUnlock: boolean) {\n    await this.stateService.setEverBeenUnlocked(true);\n    const disableFavicon = await this.stateService.getDisableFavicon();\n    await this.stateService.setDisableFavicon(!!disableFavicon);\n    this.messagingService.send(\"unlocked\");\n\n    if (evaluatePasswordAfterUnlock) {\n      try {\n        // If we do not have any saved policies, attempt to load them from the service\n        if (this.enforcedMasterPasswordOptions == undefined) {\n          this.enforcedMasterPasswordOptions = await firstValueFrom(\n            this.policyService.masterPasswordPolicyOptions$()\n          );\n        }\n\n        if (this.requirePasswordChange()) {\n          await this.stateService.setForcePasswordResetReason(\n            ForceResetPasswordReason.WeakMasterPassword\n          );\n          this.router.navigate([this.forcePasswordResetRoute]);\n          return;\n        }\n      } catch (e) {\n        // Do not prevent unlock if there is an error evaluating policies\n        this.logService.error(e);\n      }\n    }\n\n    if (this.onSuccessfulSubmit != null) {\n      await this.onSuccessfulSubmit();\n    } else if (this.router != null) {\n      this.router.navigate([this.successRoute]);\n    }\n  }\n\n  private async load() {\n    this.pinSet = await this.vaultTimeoutSettingsService.isPinLockSet();\n    this.pinLock =\n      (this.pinSet[0] && (await this.stateService.getDecryptedPinProtected()) != null) ||\n      this.pinSet[1];\n    this.supportsBiometric = await this.platformUtilsService.supportsBiometric();\n    this.biometricLock =\n      (await this.vaultTimeoutSettingsService.isBiometricLockSet()) &&\n      ((await this.cryptoService.hasKeyStored(KeySuffixOptions.Biometric)) ||\n        !this.platformUtilsService.supportsSecureStorage());\n    this.biometricText = await this.stateService.getBiometricText();\n    this.email = await this.stateService.getEmail();\n    const usesKeyConnector = await this.keyConnectorService.getUsesKeyConnector();\n    this.hideInput = usesKeyConnector && !this.pinLock;\n\n    // Users with key connector and without biometric or pin has no MP to unlock using\n    if (usesKeyConnector && !(this.biometricLock || this.pinLock)) {\n      await this.vaultTimeoutService.logOut();\n    }\n\n    const webVaultUrl = this.environmentService.getWebVaultUrl();\n    const vaultUrl =\n      webVaultUrl === \"https://vault.bitwarden.com\" ? \"https://bitwarden.com\" : webVaultUrl;\n    this.webVaultHostname = Utils.getHostname(vaultUrl);\n  }\n\n  /**\n   * Checks if the master password meets the enforced policy requirements\n   * If not, returns false\n   */\n  private requirePasswordChange(): boolean {\n    if (\n      this.enforcedMasterPasswordOptions == undefined ||\n      !this.enforcedMasterPasswordOptions.enforceOnLogin\n    ) {\n      return false;\n    }\n\n    const passwordStrength = this.passwordGenerationService.passwordStrength(\n      this.masterPassword,\n      this.email\n    )?.score;\n\n    return !this.policyService.evaluateMasterPassword(\n      passwordStrength,\n      this.masterPassword,\n      this.enforcedMasterPasswordOptions\n    );\n  }\n}\n","type BiometricError = {\n  title: string;\n  description: string;\n};\n\nexport type BiometricErrorTypes = \"startDesktop\" | \"desktopIntegrationDisabled\";\n\nexport const BiometricErrors: Record<BiometricErrorTypes, BiometricError> = {\n  startDesktop: {\n    title: \"startDesktopTitle\",\n    description: \"startDesktopDesc\",\n  },\n  desktopIntegrationDisabled: {\n    title: \"desktopIntegrationDisabledTitle\",\n    description: \"desktopIntegrationDisabledDesc\",\n  },\n};\n","import { Directive, ElementRef, Input, Renderer2 } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appA11yTitle]\",\n})\nexport class A11yTitleDirective {\n  @Input() set appA11yTitle(title: string) {\n    this.title = title;\n  }\n\n  private title: string;\n\n  constructor(private el: ElementRef, private renderer: Renderer2) {}\n\n  ngOnInit() {\n    if (!this.el.nativeElement.hasAttribute(\"title\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"title\", this.title);\n    }\n    if (!this.el.nativeElement.hasAttribute(\"aria-label\")) {\n      this.renderer.setAttribute(this.el.nativeElement, \"aria-label\", this.title);\n    }\n  }\n}\n","import { BrowserApi } from \"./browserApi\";\n\nexport class SafariApp {\n  static sendMessageToApp(command: string, data: any = null, resolveNow = false): Promise<any> {\n    if (!BrowserApi.isSafariApi) {\n      return Promise.resolve(null);\n    }\n    return new Promise((resolve) => {\n      const now = new Date();\n      const messageId =\n        now.getTime().toString() + \"_\" + Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);\n      (browser as any).runtime.sendNativeMessage(\n        \"com.bitwarden.desktop\",\n        {\n          id: messageId,\n          command: command,\n          data: data,\n          responseData: null,\n        },\n        (response: any) => {\n          resolve(response);\n        }\n      );\n    });\n  }\n}\n","import { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { ClientType, DeviceType } from \"@bitwarden/common/enums\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { SafariApp } from \"../browser/safariApp\";\n\nconst DialogPromiseExpiration = 600000; // 10 minutes\n\nexport default class BrowserPlatformUtilsService implements PlatformUtilsService {\n  private showDialogResolves = new Map<number, { resolve: (value: boolean) => void; date: Date }>();\n  private passwordDialogResolves = new Map<\n    number,\n    { tryResolve: (canceled: boolean, password: string) => Promise<boolean>; date: Date }\n  >();\n  private deviceCache: DeviceType = null;\n\n  constructor(\n    private messagingService: MessagingService,\n    private clipboardWriteCallback: (clipboardValue: string, clearMs: number) => void,\n    private biometricCallback: () => Promise<boolean>,\n    private win: Window & typeof globalThis\n  ) {}\n\n  getDevice(): DeviceType {\n    if (this.deviceCache) {\n      return this.deviceCache;\n    }\n\n    if (BrowserPlatformUtilsService.isFirefox()) {\n      this.deviceCache = DeviceType.FirefoxExtension;\n    } else if (BrowserPlatformUtilsService.isOpera(this.win)) {\n      this.deviceCache = DeviceType.OperaExtension;\n    } else if (BrowserPlatformUtilsService.isEdge()) {\n      this.deviceCache = DeviceType.EdgeExtension;\n    } else if (BrowserPlatformUtilsService.isVivaldi()) {\n      this.deviceCache = DeviceType.VivaldiExtension;\n    } else if (BrowserPlatformUtilsService.isChrome(this.win)) {\n      this.deviceCache = DeviceType.ChromeExtension;\n    } else if (BrowserPlatformUtilsService.isSafari(this.win)) {\n      this.deviceCache = DeviceType.SafariExtension;\n    }\n\n    return this.deviceCache;\n  }\n\n  getDeviceString(): string {\n    const device = DeviceType[this.getDevice()].toLowerCase();\n    return device.replace(\"extension\", \"\");\n  }\n\n  getClientType(): ClientType {\n    return ClientType.Browser;\n  }\n\n  static isFirefox(): boolean {\n    return (\n      navigator.userAgent.indexOf(\" Firefox/\") !== -1 ||\n      navigator.userAgent.indexOf(\" Gecko/\") !== -1\n    );\n  }\n\n  isFirefox(): boolean {\n    return this.getDevice() === DeviceType.FirefoxExtension;\n  }\n\n  static isChrome(win: Window & typeof globalThis): boolean {\n    return win.chrome && navigator.userAgent.indexOf(\" Chrome/\") !== -1;\n  }\n\n  isChrome(): boolean {\n    return this.getDevice() === DeviceType.ChromeExtension;\n  }\n\n  static isEdge(): boolean {\n    return navigator.userAgent.indexOf(\" Edg/\") !== -1;\n  }\n\n  isEdge(): boolean {\n    return this.getDevice() === DeviceType.EdgeExtension;\n  }\n\n  static isOpera(win: Window & typeof globalThis): boolean {\n    return (\n      (!!win.opr && !!win.opr.addons) || !!win.opera || navigator.userAgent.indexOf(\" OPR/\") >= 0\n    );\n  }\n\n  isOpera(): boolean {\n    return this.getDevice() === DeviceType.OperaExtension;\n  }\n\n  static isVivaldi(): boolean {\n    return navigator.userAgent.indexOf(\" Vivaldi/\") !== -1;\n  }\n\n  isVivaldi(): boolean {\n    return this.getDevice() === DeviceType.VivaldiExtension;\n  }\n\n  static isSafari(win: Window & typeof globalThis): boolean {\n    // Opera masquerades as Safari, so make sure we're not there first\n    return (\n      !BrowserPlatformUtilsService.isOpera(win) && navigator.userAgent.indexOf(\" Safari/\") !== -1\n    );\n  }\n\n  isSafari(): boolean {\n    return this.getDevice() === DeviceType.SafariExtension;\n  }\n\n  isIE(): boolean {\n    return false;\n  }\n\n  isMacAppStore(): boolean {\n    return false;\n  }\n\n  async isViewOpen(): Promise<boolean> {\n    if (await BrowserApi.isPopupOpen()) {\n      return true;\n    }\n\n    if (this.isSafari()) {\n      return false;\n    }\n\n    const sidebarView = this.sidebarViewName();\n    const sidebarOpen =\n      sidebarView != null && chrome.extension.getViews({ type: sidebarView }).length > 0;\n    if (sidebarOpen) {\n      return true;\n    }\n\n    const tabOpen = chrome.extension.getViews({ type: \"tab\" }).length > 0;\n    return tabOpen;\n  }\n\n  lockTimeout(): number {\n    return null;\n  }\n\n  launchUri(uri: string, options?: any): void {\n    BrowserApi.createNewTab(uri, options && options.extensionPage === true);\n  }\n\n  getApplicationVersion(): Promise<string> {\n    return Promise.resolve(BrowserApi.getApplicationVersion());\n  }\n\n  async getApplicationVersionNumber(): Promise<string> {\n    return (await this.getApplicationVersion()).split(RegExp(\"[+|-]\"))[0].trim();\n  }\n\n  supportsWebAuthn(win: Window): boolean {\n    return typeof PublicKeyCredential !== \"undefined\";\n  }\n\n  supportsDuo(): boolean {\n    return true;\n  }\n\n  showToast(\n    type: \"error\" | \"success\" | \"warning\" | \"info\",\n    title: string,\n    text: string | string[],\n    options?: any\n  ): void {\n    this.messagingService.send(\"showToast\", {\n      text: text,\n      title: title,\n      type: type,\n      options: options,\n    });\n  }\n\n  showDialog(\n    body: string,\n    title?: string,\n    confirmText?: string,\n    cancelText?: string,\n    type?: string,\n    bodyIsHtml = false\n  ) {\n    const dialogId = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);\n    this.messagingService.send(\"showDialog\", {\n      text: bodyIsHtml ? null : body,\n      html: bodyIsHtml ? body : null,\n      title: title,\n      confirmText: confirmText,\n      cancelText: cancelText,\n      type: type,\n      dialogId: dialogId,\n    });\n    return new Promise<boolean>((resolve) => {\n      this.showDialogResolves.set(dialogId, { resolve: resolve, date: new Date() });\n    });\n  }\n\n  isDev(): boolean {\n    return process.env.ENV === \"development\";\n  }\n\n  isSelfHost(): boolean {\n    return false;\n  }\n\n  copyToClipboard(text: string, options?: any): void {\n    let win = this.win;\n    let doc = this.win.document;\n    if (options && (options.window || options.win)) {\n      win = options.window || options.win;\n      doc = win.document;\n    } else if (options && options.doc) {\n      doc = options.doc;\n    }\n    const clearing = options ? !!options.clearing : false;\n    const clearMs: number = options && options.clearMs ? options.clearMs : null;\n\n    if (this.isSafari()) {\n      SafariApp.sendMessageToApp(\"copyToClipboard\", text).then(() => {\n        if (!clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      });\n    } else if (\n      this.isFirefox() &&\n      (win as any).navigator.clipboard &&\n      (win as any).navigator.clipboard.writeText\n    ) {\n      (win as any).navigator.clipboard.writeText(text).then(() => {\n        if (!clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      });\n    } else if (doc.queryCommandSupported && doc.queryCommandSupported(\"copy\")) {\n      if (this.isChrome() && text === \"\") {\n        text = \"\\u0000\";\n      }\n\n      const textarea = doc.createElement(\"textarea\");\n      textarea.textContent = text == null || text === \"\" ? \" \" : text;\n      // Prevent scrolling to bottom of page in MS Edge.\n      textarea.style.position = \"fixed\";\n      doc.body.appendChild(textarea);\n      textarea.select();\n\n      try {\n        // Security exception may be thrown by some browsers.\n        if (doc.execCommand(\"copy\") && !clearing && this.clipboardWriteCallback != null) {\n          this.clipboardWriteCallback(text, clearMs);\n        }\n      } catch (e) {\n        // eslint-disable-next-line\n        console.warn(\"Copy to clipboard failed.\", e);\n      } finally {\n        doc.body.removeChild(textarea);\n      }\n    }\n  }\n\n  async readFromClipboard(options?: any): Promise<string> {\n    let win = this.win;\n    let doc = this.win.document;\n    if (options && (options.window || options.win)) {\n      win = options.window || options.win;\n      doc = win.document;\n    } else if (options && options.doc) {\n      doc = options.doc;\n    }\n\n    if (this.isSafari()) {\n      return await SafariApp.sendMessageToApp(\"readFromClipboard\");\n    } else if (\n      this.isFirefox() &&\n      (win as any).navigator.clipboard &&\n      (win as any).navigator.clipboard.readText\n    ) {\n      return await (win as any).navigator.clipboard.readText();\n    } else if (doc.queryCommandSupported && doc.queryCommandSupported(\"paste\")) {\n      const textarea = doc.createElement(\"textarea\");\n      // Prevent scrolling to bottom of page in MS Edge.\n      textarea.style.position = \"fixed\";\n      doc.body.appendChild(textarea);\n      textarea.focus();\n      try {\n        // Security exception may be thrown by some browsers.\n        if (doc.execCommand(\"paste\")) {\n          return textarea.value;\n        }\n      } catch (e) {\n        // eslint-disable-next-line\n        console.warn(\"Read from clipboard failed.\", e);\n      } finally {\n        doc.body.removeChild(textarea);\n      }\n    }\n    return null;\n  }\n\n  resolveDialogPromise(dialogId: number, confirmed: boolean) {\n    if (this.showDialogResolves.has(dialogId)) {\n      const resolveObj = this.showDialogResolves.get(dialogId);\n      resolveObj.resolve(confirmed);\n      this.showDialogResolves.delete(dialogId);\n    }\n\n    // Clean up old promises\n    this.showDialogResolves.forEach((val, key) => {\n      const age = new Date().getTime() - val.date.getTime();\n      if (age > DialogPromiseExpiration) {\n        this.showDialogResolves.delete(key);\n      }\n    });\n  }\n\n  async resolvePasswordDialogPromise(\n    dialogId: number,\n    canceled: boolean,\n    password: string\n  ): Promise<boolean> {\n    let result = false;\n    if (this.passwordDialogResolves.has(dialogId)) {\n      const resolveObj = this.passwordDialogResolves.get(dialogId);\n      if (await resolveObj.tryResolve(canceled, password)) {\n        this.passwordDialogResolves.delete(dialogId);\n        result = true;\n      }\n    }\n\n    // Clean up old promises\n    this.passwordDialogResolves.forEach((val, key) => {\n      const age = new Date().getTime() - val.date.getTime();\n      if (age > DialogPromiseExpiration) {\n        this.passwordDialogResolves.delete(key);\n      }\n    });\n\n    return result;\n  }\n\n  async supportsBiometric() {\n    const platformInfo = await BrowserApi.getPlatformInfo();\n    if (platformInfo.os === \"android\") {\n      return false;\n    }\n\n    if (this.isFirefox()) {\n      return parseInt((await browser.runtime.getBrowserInfo()).version.split(\".\")[0], 10) >= 87;\n    }\n\n    return true;\n  }\n\n  authenticateBiometric() {\n    return this.biometricCallback();\n  }\n\n  sidebarViewName(): string {\n    if (this.win.chrome.sidebarAction && this.isFirefox()) {\n      return \"sidebar\";\n    } else if (this.isOpera() && typeof opr !== \"undefined\" && opr.sidebarAction) {\n      return \"sidebar_panel\";\n    }\n\n    return null;\n  }\n\n  supportsSecureStorage(): boolean {\n    return false;\n  }\n\n  async getAutofillKeyboardShortcut(): Promise<string> {\n    let autofillCommand: string;\n    // You can not change the command in Safari or obtain it programmatically\n    if (this.isSafari()) {\n      autofillCommand = \"Cmd+Shift+L\";\n    } else if (this.isFirefox()) {\n      autofillCommand = (await browser.commands.getAll()).find(\n        (c) => c.name === \"autofill_login\"\n      ).shortcut;\n      // Firefox is returing Ctrl instead of Cmd for the modifier key on macOS if\n      // the command is the default one set on installation.\n      if (\n        (await browser.runtime.getPlatformInfo()).os === \"mac\" &&\n        autofillCommand === \"Ctrl+Shift+L\"\n      ) {\n        autofillCommand = \"Cmd+Shift+L\";\n      }\n    } else {\n      await new Promise((resolve) =>\n        chrome.commands.getAll((c) =>\n          resolve((autofillCommand = c.find((c) => c.name === \"autofill_login\").shortcut))\n        )\n      );\n    }\n    return autofillCommand;\n  }\n}\n","import BrowserPlatformUtilsService from \"../services/browserPlatformUtils.service\";\nimport { TabMessage } from \"../types/tab-messages\";\n\nexport class BrowserApi {\n  static isWebExtensionsApi: boolean = typeof browser !== \"undefined\";\n  static isSafariApi: boolean =\n    navigator.userAgent.indexOf(\" Safari/\") !== -1 &&\n    navigator.userAgent.indexOf(\" Chrome/\") === -1 &&\n    navigator.userAgent.indexOf(\" Chromium/\") === -1;\n  static isChromeApi: boolean = !BrowserApi.isSafariApi && typeof chrome !== \"undefined\";\n  static isFirefoxOnAndroid: boolean =\n    navigator.userAgent.indexOf(\"Firefox/\") !== -1 && navigator.userAgent.indexOf(\"Android\") !== -1;\n\n  static get manifestVersion() {\n    return chrome.runtime.getManifest().manifest_version;\n  }\n\n  static async getTabFromCurrentWindowId(): Promise<chrome.tabs.Tab> | null {\n    return await BrowserApi.tabsQueryFirst({\n      active: true,\n      windowId: chrome.windows.WINDOW_ID_CURRENT,\n    });\n  }\n\n  static async getTab(tabId: number) {\n    if (tabId == null) {\n      return null;\n    }\n    return await chrome.tabs.get(tabId);\n  }\n\n  static async getTabFromCurrentWindow(): Promise<chrome.tabs.Tab> | null {\n    return await BrowserApi.tabsQueryFirst({\n      active: true,\n      currentWindow: true,\n    });\n  }\n\n  static async getActiveTabs(): Promise<chrome.tabs.Tab[]> {\n    return await BrowserApi.tabsQuery({\n      active: true,\n    });\n  }\n\n  static async tabsQuery(options: chrome.tabs.QueryInfo): Promise<chrome.tabs.Tab[]> {\n    return new Promise((resolve) => {\n      chrome.tabs.query(options, (tabs) => {\n        resolve(tabs);\n      });\n    });\n  }\n\n  static async tabsQueryFirst(options: chrome.tabs.QueryInfo): Promise<chrome.tabs.Tab> | null {\n    const tabs = await BrowserApi.tabsQuery(options);\n    if (tabs.length > 0) {\n      return tabs[0];\n    }\n\n    return null;\n  }\n\n  static tabSendMessageData(\n    tab: chrome.tabs.Tab,\n    command: string,\n    data: any = null\n  ): Promise<void> {\n    const obj: any = {\n      command: command,\n    };\n\n    if (data != null) {\n      obj.data = data;\n    }\n\n    return BrowserApi.tabSendMessage(tab, obj);\n  }\n\n  static async tabSendMessage<T>(\n    tab: chrome.tabs.Tab,\n    obj: T,\n    options: chrome.tabs.MessageSendOptions = null\n  ): Promise<void> {\n    if (!tab || !tab.id) {\n      return;\n    }\n\n    return new Promise<void>((resolve) => {\n      chrome.tabs.sendMessage(tab.id, obj, options, () => {\n        if (chrome.runtime.lastError) {\n          // Some error happened\n        }\n        resolve();\n      });\n    });\n  }\n\n  static sendTabsMessage<T>(\n    tabId: number,\n    message: TabMessage,\n    options?: chrome.tabs.MessageSendOptions,\n    responseCallback?: (response: T) => void\n  ) {\n    chrome.tabs.sendMessage<TabMessage, T>(tabId, message, options, responseCallback);\n  }\n\n  static async getPrivateModeWindows(): Promise<browser.windows.Window[]> {\n    return (await browser.windows.getAll()).filter((win) => win.incognito);\n  }\n\n  static async onWindowCreated(callback: (win: chrome.windows.Window) => any) {\n    return chrome.windows.onCreated.addListener(callback);\n  }\n\n  static getBackgroundPage(): any {\n    return chrome.extension.getBackgroundPage();\n  }\n\n  static isBackgroundPage(window: Window & typeof globalThis): boolean {\n    return window === chrome.extension.getBackgroundPage();\n  }\n\n  static getApplicationVersion(): string {\n    return chrome.runtime.getManifest().version;\n  }\n\n  static async isPopupOpen(): Promise<boolean> {\n    return Promise.resolve(chrome.extension.getViews({ type: \"popup\" }).length > 0);\n  }\n\n  static createNewTab(url: string, active = true, openerTab?: chrome.tabs.Tab) {\n    chrome.tabs.create({ url: url, active: active, openerTabId: openerTab?.id });\n  }\n\n  static openBitwardenExtensionTab(\n    relativeUrl: string,\n    active = true,\n    openerTab?: chrome.tabs.Tab\n  ) {\n    if (relativeUrl.includes(\"uilocation=tab\")) {\n      this.createNewTab(relativeUrl, active, openerTab);\n      return;\n    }\n\n    const fullUrl = chrome.extension.getURL(relativeUrl);\n    const parsedUrl = new URL(fullUrl);\n    parsedUrl.searchParams.set(\"uilocation\", \"tab\");\n    this.createNewTab(parsedUrl.toString(), active, openerTab);\n  }\n\n  static async closeBitwardenExtensionTab() {\n    const tabs = await BrowserApi.tabsQuery({\n      active: true,\n      title: \"Bitwarden\",\n      windowType: \"normal\",\n      currentWindow: true,\n    });\n\n    if (tabs.length === 0) {\n      return;\n    }\n\n    const tabToClose = tabs[tabs.length - 1];\n    chrome.tabs.remove(tabToClose.id);\n\n    if (tabToClose.openerTabId) {\n      this.focusTab(tabToClose.openerTabId);\n    }\n  }\n\n  static messageListener(\n    name: string,\n    callback: (message: any, sender: chrome.runtime.MessageSender, response: any) => void\n  ) {\n    chrome.runtime.onMessage.addListener(\n      (msg: any, sender: chrome.runtime.MessageSender, response: any) => {\n        callback(msg, sender, response);\n      }\n    );\n  }\n\n  static sendMessage(subscriber: string, arg: any = {}) {\n    const message = Object.assign({}, { command: subscriber }, arg);\n    return chrome.runtime.sendMessage(message);\n  }\n\n  static async focusTab(tabId: number) {\n    chrome.tabs.update(tabId, { active: true, highlighted: true });\n  }\n\n  static closePopup(win: Window) {\n    if (BrowserApi.isWebExtensionsApi && BrowserApi.isFirefoxOnAndroid) {\n      // Reactivating the active tab dismisses the popup tab. The promise final\n      // condition is only called if the popup wasn't already dismissed (future proofing).\n      // ref: https://bugzilla.mozilla.org/show_bug.cgi?id=1433604\n      browser.tabs.update({ active: true }).finally(win.close);\n    } else {\n      win.close();\n    }\n  }\n\n  static gaFilter() {\n    return process.env.ENV !== \"production\";\n  }\n\n  static getUILanguage(win: Window) {\n    return chrome.i18n.getUILanguage();\n  }\n\n  static reloadExtension(win: Window) {\n    if (win != null) {\n      return (win.location as any).reload(true);\n    } else {\n      return chrome.runtime.reload();\n    }\n  }\n\n  static reloadOpenWindows() {\n    const views = chrome.extension.getViews() as Window[];\n    views\n      .filter((w) => w.location.href != null)\n      .forEach((w) => {\n        w.location.reload();\n      });\n  }\n\n  static connectNative(application: string): browser.runtime.Port | chrome.runtime.Port {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.runtime.connectNative(application);\n    } else if (BrowserApi.isChromeApi) {\n      return chrome.runtime.connectNative(application);\n    }\n  }\n\n  static requestPermission(permission: any) {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.permissions.request(permission);\n    }\n    return new Promise((resolve, reject) => {\n      chrome.permissions.request(permission, resolve);\n    });\n  }\n\n  static getPlatformInfo(): Promise<browser.runtime.PlatformInfo | chrome.runtime.PlatformInfo> {\n    if (BrowserApi.isWebExtensionsApi) {\n      return browser.runtime.getPlatformInfo();\n    }\n    return new Promise((resolve) => {\n      chrome.runtime.getPlatformInfo(resolve);\n    });\n  }\n\n  static getBrowserAction() {\n    return BrowserApi.manifestVersion === 3 ? chrome.action : chrome.browserAction;\n  }\n\n  static getSidebarAction(win: Window & typeof globalThis) {\n    return BrowserPlatformUtilsService.isSafari(win)\n      ? null\n      : typeof win.opr !== \"undefined\" && win.opr.sidebarAction\n      ? win.opr.sidebarAction\n      : win.chrome.sidebarAction;\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { fromEvent, Subscription } from \"rxjs\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\n@Injectable()\nexport class PopupUtilsService {\n  private unloadSubscription: Subscription;\n\n  constructor(private privateMode: boolean = false) {}\n\n  inSidebar(win: Window): boolean {\n    return win.location.search !== \"\" && win.location.search.indexOf(\"uilocation=sidebar\") > -1;\n  }\n\n  inTab(win: Window): boolean {\n    return win.location.search !== \"\" && win.location.search.indexOf(\"uilocation=tab\") > -1;\n  }\n\n  inPopout(win: Window): boolean {\n    return win.location.search !== \"\" && win.location.search.indexOf(\"uilocation=popout\") > -1;\n  }\n\n  inPopup(win: Window): boolean {\n    return (\n      win.location.search === \"\" ||\n      win.location.search.indexOf(\"uilocation=\") === -1 ||\n      win.location.search.indexOf(\"uilocation=popup\") > -1\n    );\n  }\n\n  inPrivateMode(): boolean {\n    return this.privateMode;\n  }\n\n  getContentScrollY(win: Window, scrollingContainer = \"main\"): number {\n    const content = win.document.getElementsByTagName(scrollingContainer)[0];\n    return content.scrollTop;\n  }\n\n  setContentScrollY(win: Window, scrollY: number, scrollingContainer = \"main\"): void {\n    if (scrollY != null) {\n      const content = win.document.getElementsByTagName(scrollingContainer)[0];\n      content.scrollTop = scrollY;\n    }\n  }\n\n  popOut(win: Window, href: string = null): void {\n    if (href === null) {\n      href = win.location.href;\n    }\n\n    if (typeof chrome !== \"undefined\" && chrome.windows && chrome.windows.create) {\n      if (href.indexOf(\"?uilocation=\") > -1) {\n        href = href\n          .replace(\"uilocation=popup\", \"uilocation=popout\")\n          .replace(\"uilocation=tab\", \"uilocation=popout\")\n          .replace(\"uilocation=sidebar\", \"uilocation=popout\");\n      } else {\n        const hrefParts = href.split(\"#\");\n        href =\n          hrefParts[0] + \"?uilocation=popout\" + (hrefParts.length > 0 ? \"#\" + hrefParts[1] : \"\");\n      }\n\n      const bodyRect = document.querySelector(\"body\").getBoundingClientRect();\n      chrome.windows.create({\n        url: href,\n        type: \"popup\",\n        width: Math.round(bodyRect.width ? bodyRect.width + 60 : 375),\n        height: Math.round(bodyRect.height || 600),\n      });\n\n      if (this.inPopup(win)) {\n        BrowserApi.closePopup(win);\n      }\n    } else if (typeof chrome !== \"undefined\" && chrome.tabs && chrome.tabs.create) {\n      href = href\n        .replace(\"uilocation=popup\", \"uilocation=tab\")\n        .replace(\"uilocation=popout\", \"uilocation=tab\")\n        .replace(\"uilocation=sidebar\", \"uilocation=tab\");\n      chrome.tabs.create({\n        url: href,\n      });\n    }\n  }\n\n  /**\n   * Enables a pop-up warning before the user exits the window/tab, or navigates away.\n   * This warns the user that they may lose unsaved data if they leave the page.\n   * (Note: navigating within the Angular app will not trigger it because it's an SPA.)\n   * Make sure you call `disableTabCloseWarning` when it is no longer relevant.\n   */\n  enableCloseTabWarning() {\n    this.disableCloseTabWarning();\n\n    this.unloadSubscription = fromEvent(window, \"beforeunload\").subscribe(\n      (e: BeforeUnloadEvent) => {\n        // Recommended method but not widely supported\n        e.preventDefault();\n\n        // Modern browsers do not display this message, it just needs to be a non-nullish value\n        // Exact wording is determined by the browser\n        const confirmationMessage = \"\";\n\n        // Older methods with better support\n        e.returnValue = confirmationMessage;\n        return confirmationMessage;\n      }\n    );\n  }\n\n  /**\n   * Disables the warning enabled by enableCloseTabWarning.\n   */\n  disableCloseTabWarning() {\n    this.unloadSubscription?.unsubscribe();\n  }\n}\n","<app-callout class=\"app-private-mode-warning\" type=\"warning\" *ngIf=\"showWarning\">\n  {{ \"privateModeWarning\" | i18n }}\n  <a href=\"https://bitwarden.com/help/article/private-mode/\" target=\"_blank\" rel=\"noopener\">{{\n    \"learnMore\" | i18n\n  }}</a>\n</app-callout>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\n@Component({\n  selector: \"app-private-mode-warning\",\n  templateUrl: \"private-mode-warning.component.html\",\n})\nexport class PrivateModeWarningComponent implements OnInit {\n  showWarning = false;\n\n  constructor(private popupUtilsService: PopupUtilsService) {}\n\n  ngOnInit() {\n    this.showWarning = this.popupUtilsService.inPrivateMode();\n  }\n}\n","<form (ngSubmit)=\"submit()\">\n  <header>\n    <div class=\"left\"></div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"verifyIdentity\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" *ngIf=\"!hideInput\">{{ \"unlock\" | i18n }}</button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-flex\" appBoxRow *ngIf=\"!hideInput\">\n          <div class=\"row-main\" *ngIf=\"pinLock\">\n            <label for=\"pin\">{{ \"pin\" | i18n }}</label>\n            <input\n              id=\"pin\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              name=\"PIN\"\n              class=\"monospaced\"\n              [(ngModel)]=\"pin\"\n              required\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"row-main\" *ngIf=\"!pinLock\">\n            <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n            <input\n              id=\"masterPassword\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              name=\"MasterPassword\"\n              aria-describedby=\"masterPasswordHelp\"\n              class=\"monospaced\"\n              [(ngModel)]=\"masterPassword\"\n              required\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      <div id=\"masterPasswordHelp\" class=\"box-footer\">\n        <p>{{ \"yourVaultIsLocked\" | i18n }}</p>\n        {{ \"loggedInAsOn\" | i18n : email : webVaultHostname }}\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"biometricLock\">\n      <div class=\"box-footer no-pad\">\n        <button\n          type=\"button\"\n          class=\"btn primary block\"\n          (click)=\"unlockBiometric()\"\n          appStopClick\n          [disabled]=\"pendingBiometric\"\n        >\n          {{ \"unlockWithBiometrics\" | i18n }}\n        </button>\n      </div>\n    </div>\n    <p class=\"text-center\">\n      <button type=\"button\" appStopClick (click)=\"logOut()\">{{ \"logOut\" | i18n }}</button>\n    </p>\n    <app-private-mode-warning></app-private-mode-warning>\n    <app-callout *ngIf=\"biometricError\" type=\"error\">{{ biometricError }}</app-callout>\n    <p class=\"text-center text-muted\" *ngIf=\"pendingBiometric\">\n      <i class=\"bwi bwi-spinner bwi-spin\" aria-hidden=\"true\"></i> {{ \"awaitDesktop\" | i18n }}\n    </p>\n  </main>\n</form>\n","import { Component, NgZone } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { LockComponent as BaseLockComponent } from \"@bitwarden/angular/auth/components/lock.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { BiometricErrors, BiometricErrorTypes } from \"../../models/biometricErrors\";\n\n@Component({\n  selector: \"app-lock\",\n  templateUrl: \"lock.component.html\",\n})\nexport class LockComponent extends BaseLockComponent {\n  private isInitialLockScreen: boolean;\n\n  biometricError: string;\n  pendingBiometric = false;\n\n  constructor(\n    router: Router,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    cryptoService: CryptoService,\n    vaultTimeoutService: VaultTimeoutService,\n    vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    environmentService: EnvironmentService,\n    stateService: StateService,\n    apiService: ApiService,\n    logService: LogService,\n    keyConnectorService: KeyConnectorService,\n    ngZone: NgZone,\n    policyApiService: PolicyApiServiceAbstraction,\n    policyService: InternalPolicyService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    private authService: AuthService\n  ) {\n    super(\n      router,\n      i18nService,\n      platformUtilsService,\n      messagingService,\n      cryptoService,\n      vaultTimeoutService,\n      vaultTimeoutSettingsService,\n      environmentService,\n      stateService,\n      apiService,\n      logService,\n      keyConnectorService,\n      ngZone,\n      policyApiService,\n      policyService,\n      passwordGenerationService\n    );\n    this.successRoute = \"/tabs/current\";\n    this.isInitialLockScreen = (window as any).previousPopupUrl == null;\n  }\n\n  async ngOnInit() {\n    await super.ngOnInit();\n    const disableAutoBiometricsPrompt =\n      (await this.stateService.getDisableAutoBiometricsPrompt()) ?? true;\n\n    window.setTimeout(async () => {\n      document.getElementById(this.pinLock ? \"pin\" : \"masterPassword\").focus();\n      if (\n        this.biometricLock &&\n        !disableAutoBiometricsPrompt &&\n        this.isInitialLockScreen &&\n        (await this.authService.getAuthStatus()) === AuthenticationStatus.Locked\n      ) {\n        await this.unlockBiometric();\n      }\n    }, 100);\n  }\n\n  async unlockBiometric(): Promise<boolean> {\n    if (!this.biometricLock) {\n      return;\n    }\n\n    this.pendingBiometric = true;\n    this.biometricError = null;\n\n    let success;\n    try {\n      success = await super.unlockBiometric();\n    } catch (e) {\n      const error = BiometricErrors[e as BiometricErrorTypes];\n\n      if (error == null) {\n        this.logService.error(\"Unknown error: \" + e);\n      }\n\n      this.biometricError = this.i18nService.t(error.description);\n    }\n    this.pendingBiometric = false;\n\n    return success;\n  }\n}\n","export enum AuthRequestType {\n  AuthenticateAndUnlock = 0,\n  Unlock = 1,\n}\n","export enum AuthenticationType {\n  Password = 0,\n  Sso = 1,\n  UserApi = 2,\n  Passwordless = 3,\n}\n","import { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { AuthenticationType } from \"../../enums/authentication-type\";\nimport { TokenTwoFactorRequest } from \"../request/identity-token/token-two-factor.request\";\n\nexport class PasswordLogInCredentials {\n  readonly type = AuthenticationType.Password;\n\n  constructor(\n    public email: string,\n    public masterPassword: string,\n    public captchaToken?: string,\n    public twoFactor?: TokenTwoFactorRequest\n  ) {}\n}\n\nexport class SsoLogInCredentials {\n  readonly type = AuthenticationType.Sso;\n\n  constructor(\n    public code: string,\n    public codeVerifier: string,\n    public redirectUrl: string,\n    public orgId: string,\n    public twoFactor?: TokenTwoFactorRequest\n  ) {}\n}\n\nexport class UserApiLogInCredentials {\n  readonly type = AuthenticationType.UserApi;\n\n  constructor(public clientId: string, public clientSecret: string) {}\n}\n\nexport class PasswordlessLogInCredentials {\n  readonly type = AuthenticationType.Passwordless;\n\n  constructor(\n    public email: string,\n    public accessCode: string,\n    public authRequestId: string,\n    public decKey: SymmetricCryptoKey,\n    public localPasswordHash: string,\n    public twoFactor?: TokenTwoFactorRequest\n  ) {}\n}\n","import { AuthRequestType } from \"../../enums/auth-request-type\";\n\nexport class PasswordlessCreateAuthRequest {\n  constructor(\n    readonly email: string,\n    readonly deviceIdentifier: string,\n    readonly publicKey: string,\n    readonly type: AuthRequestType,\n    readonly accessCode: string\n  ) {}\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { EncryptionType } from \"../../enums\";\nimport { Utils } from \"../../misc/utils\";\n\nexport class SymmetricCryptoKey {\n  key: ArrayBuffer;\n  encKey?: ArrayBuffer;\n  macKey?: ArrayBuffer;\n  encType: EncryptionType;\n\n  keyB64: string;\n  encKeyB64: string;\n  macKeyB64: string;\n\n  meta: any;\n\n  constructor(key: ArrayBuffer, encType?: EncryptionType) {\n    if (key == null) {\n      throw new Error(\"Must provide key\");\n    }\n\n    if (encType == null) {\n      if (key.byteLength === 32) {\n        encType = EncryptionType.AesCbc256_B64;\n      } else if (key.byteLength === 64) {\n        encType = EncryptionType.AesCbc256_HmacSha256_B64;\n      } else {\n        throw new Error(\"Unable to determine encType.\");\n      }\n    }\n\n    this.key = key;\n    this.encType = encType;\n\n    if (encType === EncryptionType.AesCbc256_B64 && key.byteLength === 32) {\n      this.encKey = key;\n      this.macKey = null;\n    } else if (encType === EncryptionType.AesCbc128_HmacSha256_B64 && key.byteLength === 32) {\n      this.encKey = key.slice(0, 16);\n      this.macKey = key.slice(16, 32);\n    } else if (encType === EncryptionType.AesCbc256_HmacSha256_B64 && key.byteLength === 64) {\n      this.encKey = key.slice(0, 32);\n      this.macKey = key.slice(32, 64);\n    } else {\n      throw new Error(\"Unsupported encType/key length.\");\n    }\n\n    if (this.key != null) {\n      this.keyB64 = Utils.fromBufferToB64(this.key);\n    }\n    if (this.encKey != null) {\n      this.encKeyB64 = Utils.fromBufferToB64(this.encKey);\n    }\n    if (this.macKey != null) {\n      this.macKeyB64 = Utils.fromBufferToB64(this.macKey);\n    }\n  }\n\n  toJSON() {\n    // The whole object is constructed from the initial key, so just store the B64 key\n    return { keyB64: this.keyB64 };\n  }\n\n  static fromString(s: string): SymmetricCryptoKey {\n    if (s == null) {\n      return null;\n    }\n\n    const arrayBuffer = Utils.fromB64ToArray(s).buffer;\n    return new SymmetricCryptoKey(arrayBuffer);\n  }\n\n  static fromJSON(obj: Jsonify<SymmetricCryptoKey>): SymmetricCryptoKey {\n    return SymmetricCryptoKey.fromString(obj?.keyB64);\n  }\n}\n","export abstract class BaseResponse {\n  private response: any;\n\n  constructor(response: any) {\n    this.response = response;\n  }\n\n  protected getResponseProperty(\n    propertyName: string,\n    response: any = null,\n    exactName = false\n  ): any {\n    if (propertyName == null || propertyName === \"\") {\n      throw new Error(\"propertyName must not be null/empty.\");\n    }\n    if (response == null && this.response != null) {\n      response = this.response;\n    }\n    if (response == null) {\n      return null;\n    }\n    if (!exactName && response[propertyName] === undefined) {\n      let otherCasePropertyName: string = null;\n      if (propertyName.charAt(0) === propertyName.charAt(0).toUpperCase()) {\n        otherCasePropertyName = propertyName.charAt(0).toLowerCase();\n      } else {\n        otherCasePropertyName = propertyName.charAt(0).toUpperCase();\n      }\n      if (propertyName.length > 1) {\n        otherCasePropertyName += propertyName.slice(1);\n      }\n\n      propertyName = otherCasePropertyName;\n      if (response[propertyName] === undefined) {\n        propertyName = propertyName.toLowerCase();\n      }\n      if (response[propertyName] === undefined) {\n        propertyName = propertyName.toUpperCase();\n      }\n    }\n    return response[propertyName];\n  }\n}\n","import { Utils } from \"../../misc/utils\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class ErrorResponse extends BaseResponse {\n  message: string;\n  validationErrors: { [key: string]: string[] };\n  statusCode: number;\n  captchaRequired: boolean;\n  captchaSiteKey: string;\n\n  constructor(response: any, status: number, identityResponse?: boolean) {\n    super(response);\n    let errorModel = null;\n    if (response != null) {\n      const responseErrorModel = this.getResponseProperty(\"ErrorModel\");\n      if (responseErrorModel && identityResponse) {\n        errorModel = responseErrorModel;\n      } else {\n        errorModel = response;\n      }\n    }\n\n    if (status === 429) {\n      this.message = \"Rate limit exceeded. Try again later.\";\n    } else if (errorModel) {\n      this.message = this.getResponseProperty(\"Message\", errorModel);\n      this.validationErrors = this.getResponseProperty(\"ValidationErrors\", errorModel);\n      this.captchaSiteKey = this.validationErrors?.HCaptcha_SiteKey?.[0];\n      this.captchaRequired = !Utils.isNullOrWhitespace(this.captchaSiteKey);\n    }\n    this.statusCode = status;\n  }\n\n  getSingleMessage(): string {\n    if (this.validationErrors == null) {\n      return this.message;\n    }\n    for (const key in this.validationErrors) {\n      // eslint-disable-next-line\n      if (!this.validationErrors.hasOwnProperty(key)) {\n        continue;\n      }\n      if (this.validationErrors[key].length) {\n        return this.validationErrors[key][0];\n      }\n    }\n    return this.message;\n  }\n\n  getAllMessages(): string[] {\n    const messages: string[] = [];\n    if (this.validationErrors == null) {\n      return messages;\n    }\n    for (const key in this.validationErrors) {\n      // eslint-disable-next-line\n      if (!this.validationErrors.hasOwnProperty(key)) {\n        continue;\n      }\n      this.validationErrors[key].forEach((item: string) => {\n        let prefix = \"\";\n        if (key.indexOf(\"[\") > -1 && key.indexOf(\"]\") > -1) {\n          const lastSep = key.lastIndexOf(\".\");\n          prefix = key.substr(0, lastSep > -1 ? lastSep : key.length) + \": \";\n        }\n        messages.push(prefix + item);\n      });\n    }\n    return messages;\n  }\n}\n","export abstract class IFrameComponent {\n  iframe: HTMLIFrameElement;\n  private connectorLink: HTMLAnchorElement;\n  private parseFunction = this.parseMessage.bind(this);\n\n  constructor(\n    private win: Window,\n    protected webVaultUrl: string,\n    private path: string,\n    private iframeId: string,\n    public successCallback?: (message: string) => any,\n    public errorCallback?: (message: string) => any,\n    public infoCallback?: (message: string) => any\n  ) {\n    this.connectorLink = win.document.createElement(\"a\");\n  }\n\n  stop() {\n    this.sendMessage(\"stop\");\n  }\n\n  start() {\n    this.sendMessage(\"start\");\n  }\n\n  sendMessage(message: any) {\n    if (!this.iframe || !this.iframe.src || !this.iframe.contentWindow) {\n      return;\n    }\n\n    this.iframe.contentWindow.postMessage(message, this.iframe.src);\n  }\n\n  base64Encode(str: string): string {\n    return btoa(\n      encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {\n        return String.fromCharCode((\"0x\" + p1) as any);\n      })\n    );\n  }\n\n  cleanup() {\n    this.win.removeEventListener(\"message\", this.parseFunction, false);\n  }\n\n  protected createParams(data: any, version: number) {\n    return new URLSearchParams({\n      data: this.base64Encode(JSON.stringify(data)),\n      parent: encodeURIComponent(this.win.document.location.href),\n      v: version.toString(),\n    });\n  }\n\n  protected initComponent(params: URLSearchParams): void {\n    this.connectorLink.href = `${this.webVaultUrl}/${this.path}?${params}`;\n    this.iframe = this.win.document.getElementById(this.iframeId) as HTMLIFrameElement;\n    this.iframe.src = this.connectorLink.href;\n\n    this.win.addEventListener(\"message\", this.parseFunction, false);\n  }\n\n  private parseMessage(event: MessageEvent) {\n    if (!this.validMessage(event)) {\n      return;\n    }\n\n    const parts: string[] = event.data.split(\"|\");\n    if (parts[0] === \"success\" && this.successCallback) {\n      this.successCallback(parts[1]);\n    } else if (parts[0] === \"error\" && this.errorCallback) {\n      this.errorCallback(parts[1]);\n    } else if (parts[0] === \"info\" && this.infoCallback) {\n      this.infoCallback(parts[1]);\n    }\n  }\n\n  private validMessage(event: MessageEvent) {\n    if (\n      event.origin == null ||\n      event.origin === \"\" ||\n      event.origin !== (this.connectorLink as any).origin ||\n      event.data == null ||\n      typeof event.data !== \"string\"\n    ) {\n      return false;\n    }\n\n    return (\n      event.data.indexOf(\"success|\") === 0 ||\n      event.data.indexOf(\"error|\") === 0 ||\n      event.data.indexOf(\"info|\") === 0\n    );\n  }\n}\n","import { I18nService } from \"../abstractions/i18n.service\";\nimport { IFrameComponent } from \"../misc/iframe_component\";\n\nexport class CaptchaIFrame extends IFrameComponent {\n  constructor(\n    win: Window,\n    webVaultUrl: string,\n    private i18nService: I18nService,\n    successCallback: (message: string) => any,\n    errorCallback: (message: string) => any,\n    infoCallback: (message: string) => any\n  ) {\n    super(\n      win,\n      webVaultUrl,\n      \"captcha-connector.html\",\n      \"hcaptcha_iframe\",\n      successCallback,\n      errorCallback,\n      (message: string) => {\n        const parsedMessage = JSON.parse(message);\n        if (typeof parsedMessage !== \"string\") {\n          this.iframe.height = parsedMessage.height.toString();\n          this.iframe.width = parsedMessage.width.toString();\n        } else {\n          infoCallback(parsedMessage);\n        }\n      }\n    );\n  }\n\n  init(siteKey: string): void {\n    super.initComponent(\n      this.createParams({ siteKey: siteKey, locale: this.i18nService.translationLocale }, 1)\n    );\n  }\n}\n","import { Directive, Input } from \"@angular/core\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CaptchaIFrame } from \"@bitwarden/common/auth/captcha-iframe\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\n@Directive()\nexport abstract class CaptchaProtectedComponent {\n  @Input() captchaSiteKey: string = null;\n  captchaToken: string = null;\n  captcha: CaptchaIFrame;\n\n  constructor(\n    protected environmentService: EnvironmentService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService\n  ) {}\n\n  async setupCaptcha() {\n    const webVaultUrl = this.environmentService.getWebVaultUrl();\n\n    this.captcha = new CaptchaIFrame(\n      window,\n      webVaultUrl,\n      this.i18nService,\n      (token: string) => {\n        this.captchaToken = token;\n      },\n      (error: string) => {\n        this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), error);\n      },\n      (info: string) => {\n        this.platformUtilsService.showToast(\"info\", this.i18nService.t(\"info\"), info);\n      }\n    );\n  }\n\n  showCaptcha() {\n    return !Utils.isNullOrWhitespace(this.captchaSiteKey);\n  }\n\n  protected handleCaptchaRequired(response: { captchaSiteKey: string }): boolean {\n    if (Utils.isNullOrWhitespace(response.captchaSiteKey)) {\n      return false;\n    }\n\n    this.captchaSiteKey = response.captchaSiteKey;\n    this.captcha.init(response.captchaSiteKey);\n    return true;\n  }\n}\n","import { DecryptParameters } from \"../models/domain/decrypt-parameters\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { CsprngArray } from \"../types/csprng\";\n\nexport abstract class CryptoFunctionService {\n  pbkdf2: (\n    password: string | ArrayBuffer,\n    salt: string | ArrayBuffer,\n    algorithm: \"sha256\" | \"sha512\",\n    iterations: number\n  ) => Promise<ArrayBuffer>;\n  argon2: (\n    password: string | ArrayBuffer,\n    salt: string | ArrayBuffer,\n    iterations: number,\n    memory: number,\n    parallelism: number\n  ) => Promise<ArrayBuffer>;\n  hkdf: (\n    ikm: ArrayBuffer,\n    salt: string | ArrayBuffer,\n    info: string | ArrayBuffer,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ) => Promise<ArrayBuffer>;\n  hkdfExpand: (\n    prk: ArrayBuffer,\n    info: string | ArrayBuffer,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ) => Promise<ArrayBuffer>;\n  hash: (\n    value: string | ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\" | \"md5\"\n  ) => Promise<ArrayBuffer>;\n  hmac: (\n    value: ArrayBuffer,\n    key: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\"\n  ) => Promise<ArrayBuffer>;\n  compare: (a: ArrayBuffer, b: ArrayBuffer) => Promise<boolean>;\n  hmacFast: (\n    value: ArrayBuffer | string,\n    key: ArrayBuffer | string,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\"\n  ) => Promise<ArrayBuffer | string>;\n  compareFast: (a: ArrayBuffer | string, b: ArrayBuffer | string) => Promise<boolean>;\n  aesEncrypt: (data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer) => Promise<ArrayBuffer>;\n  aesDecryptFastParameters: (\n    data: string,\n    iv: string,\n    mac: string,\n    key: SymmetricCryptoKey\n  ) => DecryptParameters<ArrayBuffer | string>;\n  aesDecryptFast: (parameters: DecryptParameters<ArrayBuffer | string>) => Promise<string>;\n  aesDecrypt: (data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer) => Promise<ArrayBuffer>;\n  rsaEncrypt: (\n    data: ArrayBuffer,\n    publicKey: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\"\n  ) => Promise<ArrayBuffer>;\n  rsaDecrypt: (\n    data: ArrayBuffer,\n    privateKey: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\"\n  ) => Promise<ArrayBuffer>;\n  rsaExtractPublicKey: (privateKey: ArrayBuffer) => Promise<ArrayBuffer>;\n  rsaGenerateKeyPair: (length: 1024 | 2048 | 4096) => Promise<[ArrayBuffer, ArrayBuffer]>;\n  randomBytes: (length: number) => Promise<CsprngArray>;\n}\n","export abstract class AppIdService {\n  getAppId: () => Promise<string>;\n  getAnonymousAppId: () => Promise<string>;\n}\n","export abstract class AnonymousHubService {\n  createHubConnection: (token: string) => void;\n  stopHubConnection: () => void;\n}\n","import { Directive, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { AnonymousHubService } from \"@bitwarden/common/abstractions/anonymousHub.service\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { ValidationService } from \"@bitwarden/common/abstractions/validation.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { AuthRequestType } from \"@bitwarden/common/auth/enums/auth-request-type\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { PasswordlessLogInCredentials } from \"@bitwarden/common/auth/models/domain/log-in-credentials\";\nimport { PasswordlessCreateAuthRequest } from \"@bitwarden/common/auth/models/request/passwordless-create-auth.request\";\nimport { AuthRequestResponse } from \"@bitwarden/common/auth/models/response/auth-request.response\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { CaptchaProtectedComponent } from \"./captcha-protected.component\";\n\n@Directive()\nexport class LoginWithDeviceComponent\n  extends CaptchaProtectedComponent\n  implements OnInit, OnDestroy\n{\n  private destroy$ = new Subject<void>();\n  email: string;\n  showResendNotification = false;\n  passwordlessRequest: PasswordlessCreateAuthRequest;\n  fingerprintPhrase: string;\n  onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;\n  onSuccessfulLogin: () => Promise<any>;\n  onSuccessfulLoginNavigate: () => Promise<any>;\n  onSuccessfulLoginForceResetNavigate: () => Promise<any>;\n\n  protected twoFactorRoute = \"2fa\";\n  protected successRoute = \"vault\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n  private resendTimeout = 12000;\n  private authRequestKeyPair: [publicKey: ArrayBuffer, privateKey: ArrayBuffer];\n\n  constructor(\n    protected router: Router,\n    private cryptoService: CryptoService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private appIdService: AppIdService,\n    private passwordGenerationService: PasswordGenerationServiceAbstraction,\n    private apiService: ApiService,\n    private authService: AuthService,\n    private logService: LogService,\n    environmentService: EnvironmentService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    private anonymousHubService: AnonymousHubService,\n    private validationService: ValidationService,\n    private stateService: StateService,\n    private loginService: LoginService\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n\n    const navigation = this.router.getCurrentNavigation();\n    if (navigation) {\n      this.email = this.loginService.getEmail();\n    }\n\n    //gets signalR push notification\n    this.authService\n      .getPushNotifcationObs$()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((id) => {\n        this.confirmResponse(id);\n      });\n  }\n\n  async ngOnInit() {\n    if (!this.email) {\n      this.router.navigate([\"/login\"]);\n      return;\n    }\n\n    this.startPasswordlessLogin();\n  }\n\n  async startPasswordlessLogin() {\n    this.showResendNotification = false;\n\n    try {\n      await this.buildAuthRequest();\n      const reqResponse = await this.apiService.postAuthRequest(this.passwordlessRequest);\n\n      if (reqResponse.id) {\n        this.anonymousHubService.createHubConnection(reqResponse.id);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    setTimeout(() => {\n      this.showResendNotification = true;\n    }, this.resendTimeout);\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n    this.anonymousHubService.stopHubConnection();\n  }\n\n  private async confirmResponse(requestId: string) {\n    try {\n      const response = await this.apiService.getAuthResponse(\n        requestId,\n        this.passwordlessRequest.accessCode\n      );\n\n      if (!response.requestApproved) {\n        return;\n      }\n\n      const credentials = await this.buildLoginCredntials(requestId, response);\n      const loginResponse = await this.authService.logIn(credentials);\n\n      if (loginResponse.requiresTwoFactor) {\n        if (this.onSuccessfulLoginTwoFactorNavigate != null) {\n          this.onSuccessfulLoginTwoFactorNavigate();\n        } else {\n          this.router.navigate([this.twoFactorRoute]);\n        }\n      } else if (loginResponse.forcePasswordReset != ForceResetPasswordReason.None) {\n        if (this.onSuccessfulLoginForceResetNavigate != null) {\n          this.onSuccessfulLoginForceResetNavigate();\n        } else {\n          this.router.navigate([this.forcePasswordResetRoute]);\n        }\n      } else {\n        await this.setRememberEmailValues();\n        if (this.onSuccessfulLogin != null) {\n          this.onSuccessfulLogin();\n        }\n        if (this.onSuccessfulLoginNavigate != null) {\n          this.onSuccessfulLoginNavigate();\n        } else {\n          this.router.navigate([this.successRoute]);\n        }\n      }\n    } catch (error) {\n      if (error instanceof ErrorResponse) {\n        this.router.navigate([\"/login\"]);\n        this.validationService.showError(error);\n        return;\n      }\n\n      this.logService.error(error);\n    }\n  }\n\n  async setRememberEmailValues() {\n    const rememberEmail = this.loginService.getRememberEmail();\n    const rememberedEmail = this.loginService.getEmail();\n    await this.stateService.setRememberedEmail(rememberEmail ? rememberedEmail : null);\n    this.loginService.clearValues();\n  }\n\n  private async buildAuthRequest() {\n    this.authRequestKeyPair = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);\n    const deviceIdentifier = await this.appIdService.getAppId();\n    const publicKey = Utils.fromBufferToB64(this.authRequestKeyPair[0]);\n    const accessCode = await this.passwordGenerationService.generatePassword({ length: 25 });\n\n    this.fingerprintPhrase = (\n      await this.cryptoService.getFingerprint(this.email, this.authRequestKeyPair[0])\n    ).join(\"-\");\n\n    this.passwordlessRequest = new PasswordlessCreateAuthRequest(\n      this.email,\n      deviceIdentifier,\n      publicKey,\n      AuthRequestType.AuthenticateAndUnlock,\n      accessCode\n    );\n  }\n\n  private async buildLoginCredntials(\n    requestId: string,\n    response: AuthRequestResponse\n  ): Promise<PasswordlessLogInCredentials> {\n    const decKey = await this.cryptoService.rsaDecrypt(response.key, this.authRequestKeyPair[1]);\n    const decMasterPasswordHash = await this.cryptoService.rsaDecrypt(\n      response.masterPasswordHash,\n      this.authRequestKeyPair[1]\n    );\n    const key = new SymmetricCryptoKey(decKey);\n    const localHashedPassword = Utils.fromBufferToUtf8(decMasterPasswordHash);\n\n    return new PasswordlessLogInCredentials(\n      this.email,\n      this.passwordlessRequest.accessCode,\n      requestId,\n      key,\n      localHashedPassword\n    );\n  }\n}\n","import {\n  SyncCipherNotification,\n  SyncFolderNotification,\n  SyncSendNotification,\n} from \"../../../models/response/notification.response\";\n\nexport abstract class SyncService {\n  syncInProgress: boolean;\n\n  getLastSync: () => Promise<Date>;\n  setLastSync: (date: Date, userId?: string) => Promise<any>;\n  fullSync: (forceSync: boolean, allowThrowOnError?: boolean) => Promise<boolean>;\n  syncUpsertFolder: (notification: SyncFolderNotification, isEdit: boolean) => Promise<boolean>;\n  syncDeleteFolder: (notification: SyncFolderNotification) => Promise<boolean>;\n  syncUpsertCipher: (notification: SyncCipherNotification, isEdit: boolean) => Promise<boolean>;\n  syncDeleteCipher: (notification: SyncFolderNotification) => Promise<boolean>;\n  syncUpsertSend: (notification: SyncSendNotification, isEdit: boolean) => Promise<boolean>;\n  syncDeleteSend: (notification: SyncSendNotification) => Promise<boolean>;\n}\n","<div class=\"login-with-device\">\n  <header>\n    <h1 class=\"login-center\">\n      <span class=\"title\">{{ \"logIn\" | i18n }}</span>\n    </h1>\n  </header>\n  <div class=\"content login-page\">\n    <div>\n      <p class=\"lead\">{{ \"logInInitiated\" | i18n }}</p>\n\n      <div>\n        <p>{{ \"notificationSentDevice\" | i18n }}</p>\n\n        <p>\n          {{ \"fingerprintMatchInfo\" | i18n }}\n        </p>\n      </div>\n\n      <div>\n        <b class=\"fingerprint-phrase-header\">{{ \"fingerprintPhraseHeader\" | i18n }}</b>\n        <p class=\"fingerprint-text\">\n          <code>{{ fingerprintPhrase }}</code>\n        </p>\n      </div>\n\n      <div class=\"resend-notification\" *ngIf=\"showResendNotification\">\n        <a (click)=\"startPasswordlessLogin()\">{{ \"resendNotification\" | i18n }}</a>\n      </div>\n\n      <div class=\"footer\">\n        {{ \"loginWithDeviceEnabledInfo\" | i18n }}\n        <a routerLink=\"/login\">{{ \"viewAllLoginOptions\" | i18n }}</a>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { LoginWithDeviceComponent as BaseLoginWithDeviceComponent } from \"@bitwarden/angular/auth/components/login-with-device.component\";\nimport { AnonymousHubService } from \"@bitwarden/common/abstractions/anonymousHub.service\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { ValidationService } from \"@bitwarden/common/abstractions/validation.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\n@Component({\n  selector: \"app-login-with-device\",\n  templateUrl: \"login-with-device.component.html\",\n})\nexport class LoginWithDeviceComponent\n  extends BaseLoginWithDeviceComponent\n  implements OnInit, OnDestroy\n{\n  constructor(\n    router: Router,\n    cryptoService: CryptoService,\n    cryptoFunctionService: CryptoFunctionService,\n    appIdService: AppIdService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    apiService: ApiService,\n    authService: AuthService,\n    logService: LogService,\n    environmentService: EnvironmentService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    anonymousHubService: AnonymousHubService,\n    validationService: ValidationService,\n    stateService: StateService,\n    loginService: LoginService,\n    syncService: SyncService\n  ) {\n    super(\n      router,\n      cryptoService,\n      cryptoFunctionService,\n      appIdService,\n      passwordGenerationService,\n      apiService,\n      authService,\n      logService,\n      environmentService,\n      i18nService,\n      platformUtilsService,\n      anonymousHubService,\n      validationService,\n      stateService,\n      loginService\n    );\n    super.onSuccessfulLogin = async () => {\n      await syncService.fullSync(true);\n    };\n  }\n}\n","import { AbstractControl } from \"@angular/forms\";\nexport interface AllValidationErrors {\n  controlName: string;\n  errorName: string;\n}\n\nexport interface FormGroupControls {\n  [key: string]: AbstractControl;\n}\n\nexport abstract class FormValidationErrorsService {\n  getFormValidationErrors: (controls: FormGroupControls) => AllValidationErrors[];\n}\n","import { Directive, ElementRef, NgZone, OnInit, ViewChild } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { take } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport {\n  AllValidationErrors,\n  FormValidationErrorsService,\n} from \"@bitwarden/common/abstractions/formValidationErrors.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { AuthResult } from \"@bitwarden/common/auth/models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { PasswordLogInCredentials } from \"@bitwarden/common/auth/models/domain/log-in-credentials\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { CaptchaProtectedComponent } from \"./captcha-protected.component\";\n\n@Directive()\nexport class LoginComponent extends CaptchaProtectedComponent implements OnInit {\n  @ViewChild(\"masterPasswordInput\", { static: true }) masterPasswordInput: ElementRef;\n\n  showPassword = false;\n  formPromise: Promise<AuthResult>;\n  onSuccessfulLogin: () => Promise<any>;\n  onSuccessfulLoginNavigate: () => Promise<any>;\n  onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;\n  onSuccessfulLoginForceResetNavigate: () => Promise<any>;\n  selfHosted = false;\n  showLoginWithDevice: boolean;\n  validatedEmail = false;\n  paramEmailSet = false;\n\n  formGroup = this.formBuilder.group({\n    email: [\"\", [Validators.required, Validators.email]],\n    masterPassword: [\"\", [Validators.required, Validators.minLength(8)]],\n    rememberEmail: [false],\n  });\n\n  protected twoFactorRoute = \"2fa\";\n  protected successRoute = \"vault\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n\n  get loggedEmail() {\n    return this.formGroup.value.email;\n  }\n\n  constructor(\n    protected apiService: ApiService,\n    protected appIdService: AppIdService,\n    protected authService: AuthService,\n    protected router: Router,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    protected stateService: StateService,\n    environmentService: EnvironmentService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected logService: LogService,\n    protected ngZone: NgZone,\n    protected formBuilder: FormBuilder,\n    protected formValidationErrorService: FormValidationErrorsService,\n    protected route: ActivatedRoute,\n    protected loginService: LoginService\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n    this.selfHosted = platformUtilsService.isSelfHost();\n  }\n\n  get selfHostedDomain() {\n    return this.environmentService.hasBaseUrl() ? this.environmentService.getWebVaultUrl() : null;\n  }\n\n  async ngOnInit() {\n    this.route?.queryParams.subscribe((params) => {\n      if (params != null) {\n        const queryParamsEmail = params[\"email\"];\n        if (queryParamsEmail != null && queryParamsEmail.indexOf(\"@\") > -1) {\n          this.formGroup.get(\"email\").setValue(queryParamsEmail);\n          this.loginService.setEmail(queryParamsEmail);\n          this.paramEmailSet = true;\n        }\n      }\n    });\n    let email = this.loginService.getEmail();\n\n    if (email == null || email === \"\") {\n      email = await this.stateService.getRememberedEmail();\n    }\n\n    if (!this.paramEmailSet) {\n      this.formGroup.get(\"email\")?.setValue(email ?? \"\");\n    }\n    let rememberEmail = this.loginService.getRememberEmail();\n    if (rememberEmail == null) {\n      rememberEmail = (await this.stateService.getRememberedEmail()) != null;\n    }\n    this.formGroup.get(\"rememberEmail\")?.setValue(rememberEmail);\n  }\n\n  async submit(showToast = true) {\n    const data = this.formGroup.value;\n\n    await this.setupCaptcha();\n\n    this.formGroup.markAllAsTouched();\n\n    //web\n    if (this.formGroup.invalid && !showToast) {\n      return;\n    }\n\n    //desktop, browser; This should be removed once all clients use reactive forms\n    if (this.formGroup.invalid && showToast) {\n      const errorText = this.getErrorToastMessage();\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errorText);\n      return;\n    }\n\n    try {\n      const credentials = new PasswordLogInCredentials(\n        data.email,\n        data.masterPassword,\n        this.captchaToken,\n        null\n      );\n      this.formPromise = this.authService.logIn(credentials);\n      const response = await this.formPromise;\n      this.setFormValues();\n      await this.loginService.saveEmailSettings();\n      if (this.handleCaptchaRequired(response)) {\n        return;\n      } else if (response.requiresTwoFactor) {\n        if (this.onSuccessfulLoginTwoFactorNavigate != null) {\n          this.onSuccessfulLoginTwoFactorNavigate();\n        } else {\n          this.router.navigate([this.twoFactorRoute]);\n        }\n      } else if (response.forcePasswordReset != ForceResetPasswordReason.None) {\n        if (this.onSuccessfulLoginForceResetNavigate != null) {\n          this.onSuccessfulLoginForceResetNavigate();\n        } else {\n          this.router.navigate([this.forcePasswordResetRoute]);\n        }\n      } else {\n        const disableFavicon = await this.stateService.getDisableFavicon();\n        await this.stateService.setDisableFavicon(!!disableFavicon);\n        if (this.onSuccessfulLogin != null) {\n          this.onSuccessfulLogin();\n        }\n        if (this.onSuccessfulLoginNavigate != null) {\n          this.onSuccessfulLoginNavigate();\n        } else {\n          this.router.navigate([this.successRoute]);\n        }\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n    if (this.ngZone.isStable) {\n      document.getElementById(\"masterPassword\").focus();\n    } else {\n      this.ngZone.onStable\n        .pipe(take(1))\n        .subscribe(() => document.getElementById(\"masterPassword\").focus());\n    }\n  }\n\n  async startPasswordlessLogin() {\n    this.formGroup.get(\"masterPassword\")?.clearValidators();\n    this.formGroup.get(\"masterPassword\")?.updateValueAndValidity();\n\n    if (!this.formGroup.valid) {\n      return;\n    }\n\n    this.setFormValues();\n    this.router.navigate([\"/login-with-device\"]);\n  }\n\n  async launchSsoBrowser(clientId: string, ssoRedirectUri: string) {\n    await this.saveEmailSettings();\n    // Generate necessary sso params\n    const passwordOptions: any = {\n      type: \"password\",\n      length: 64,\n      uppercase: true,\n      lowercase: true,\n      numbers: true,\n      special: false,\n    };\n    const state = await this.passwordGenerationService.generatePassword(passwordOptions);\n    const ssoCodeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);\n    const codeVerifierHash = await this.cryptoFunctionService.hash(ssoCodeVerifier, \"sha256\");\n    const codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);\n\n    // Save sso params\n    await this.stateService.setSsoState(state);\n    await this.stateService.setSsoCodeVerifier(ssoCodeVerifier);\n\n    // Build URI\n    const webUrl = this.environmentService.getWebVaultUrl();\n\n    // Launch browser\n    this.platformUtilsService.launchUri(\n      webUrl +\n        \"/#/sso?clientId=\" +\n        clientId +\n        \"&redirectUri=\" +\n        encodeURIComponent(ssoRedirectUri) +\n        \"&state=\" +\n        state +\n        \"&codeChallenge=\" +\n        codeChallenge +\n        \"&email=\" +\n        encodeURIComponent(this.formGroup.controls.email.value)\n    );\n  }\n\n  async validateEmail() {\n    this.formGroup.controls.email.markAsTouched();\n    const emailInvalid = this.formGroup.get(\"email\").invalid;\n    if (!emailInvalid) {\n      this.toggleValidateEmail(true);\n      await this.getLoginWithDevice(this.loggedEmail);\n    }\n  }\n\n  toggleValidateEmail(value: boolean) {\n    this.validatedEmail = value;\n    if (!this.validatedEmail) {\n      // Reset master password only when going from validated to not validated\n      // so that autofill can work properly\n      this.formGroup.controls.masterPassword.reset();\n    } else {\n      // When email is validated, focus on master password after\n      // waiting for input to be rendered\n      this.ngZone.onStable\n        .pipe(take(1))\n        .subscribe(() => this.masterPasswordInput?.nativeElement?.focus());\n    }\n  }\n\n  setFormValues() {\n    this.loginService.setEmail(this.formGroup.value.email);\n    this.loginService.setRememberEmail(this.formGroup.value.rememberEmail);\n  }\n\n  async saveEmailSettings() {\n    this.setFormValues();\n    await this.loginService.saveEmailSettings();\n  }\n\n  private getErrorToastMessage() {\n    const error: AllValidationErrors = this.formValidationErrorService\n      .getFormValidationErrors(this.formGroup.controls)\n      .shift();\n\n    if (error) {\n      switch (error.errorName) {\n        case \"email\":\n          return this.i18nService.t(\"invalidEmail\");\n        default:\n          return this.i18nService.t(this.errorTag(error));\n      }\n    }\n\n    return;\n  }\n\n  private errorTag(error: AllValidationErrors): string {\n    const name = error.errorName.charAt(0).toUpperCase() + error.errorName.slice(1);\n    return `${error.controlName}${name}`;\n  }\n\n  async getLoginWithDevice(email: string) {\n    try {\n      const deviceIdentifier = await this.appIdService.getAppId();\n      const res = await this.apiService.getKnownDevice(email, deviceIdentifier);\n      //ensure the application is not self-hosted\n      this.showLoginWithDevice = res && !this.selfHosted;\n    } catch (e) {\n      this.showLoginWithDevice = false;\n    }\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" [formGroup]=\"formGroup\">\n  <header>\n    <h1 class=\"login-center\">\n      <span class=\"title\">{{ \"logIn\" | i18n }}</span>\n    </h1>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n          <div class=\"row-main\">\n            <input id=\"email\" type=\"text\" formControlName=\"email\" [hidden]=\"true\" />\n            <input\n              id=\"rememberEmail\"\n              type=\"checkbox\"\n              formControlName=\"rememberEmail\"\n              [hidden]=\"true\"\n            />\n            <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n            <input\n              id=\"masterPassword\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              class=\"monospaced\"\n              formControlName=\"masterPassword\"\n              appInputVerbatim\n              appAutofocus\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row\" [hidden]=\"!showCaptcha()\">\n          <iframe id=\"hcaptcha_iframe\" height=\"80\"></iframe>\n        </div>\n      </div>\n      <div class=\"box-footer\">\n        <button type=\"button\" class=\"btn link\" routerLink=\"/hint\" (click)=\"setFormValues()\">\n          <b>{{ \"getMasterPasswordHint\" | i18n }}</b>\n        </button>\n      </div>\n    </div>\n    <app-private-mode-warning></app-private-mode-warning>\n    <div class=\"content login-buttons\">\n      <button type=\"submit\" class=\"btn primary block\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\"\n          ><b>{{ \"logInWithMasterPassword\" | i18n }}</b></span\n        >\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n      <div class=\"tw-mb-3\" *ngIf=\"showLoginWithDevice && showPasswordless\">\n        <button type=\"button\" class=\"btn block\" (click)=\"startPasswordlessLogin()\">\n          <span> <i class=\"bwi bwi-mobile\"></i> {{ \"loginWithDevice\" | i18n }} </span>\n        </button>\n      </div>\n      <button type=\"button\" (click)=\"launchSsoBrowser()\" class=\"btn block\">\n        <i class=\"bwi bwi-provider\" aria-hidden=\"true\"></i> {{ \"enterpriseSingleSignOn\" | i18n }}\n      </button>\n      <div class=\"small\">\n        <p class=\"no-margin\">{{ \"loggingInAs\" | i18n }} {{ loggedEmail }}</p>\n        <a routerLink=\"/home\">{{ \"notYou\" | i18n }}</a>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component, NgZone } from \"@angular/core\";\nimport { FormBuilder } from \"@angular/forms\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { LoginComponent as BaseLoginComponent } from \"@bitwarden/angular/auth/components/login.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { FormValidationErrorsService } from \"@bitwarden/common/abstractions/formValidationErrors.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { flagEnabled } from \"../../flags\";\n\n@Component({\n  selector: \"app-login\",\n  templateUrl: \"login.component.html\",\n})\nexport class LoginComponent extends BaseLoginComponent {\n  showPasswordless = false;\n  constructor(\n    apiService: ApiService,\n    appIdService: AppIdService,\n    authService: AuthService,\n    router: Router,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    protected stateService: StateService,\n    protected environmentService: EnvironmentService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected cryptoFunctionService: CryptoFunctionService,\n    syncService: SyncService,\n    logService: LogService,\n    ngZone: NgZone,\n    formBuilder: FormBuilder,\n    formValidationErrorService: FormValidationErrorsService,\n    route: ActivatedRoute,\n    loginService: LoginService\n  ) {\n    super(\n      apiService,\n      appIdService,\n      authService,\n      router,\n      platformUtilsService,\n      i18nService,\n      stateService,\n      environmentService,\n      passwordGenerationService,\n      cryptoFunctionService,\n      logService,\n      ngZone,\n      formBuilder,\n      formValidationErrorService,\n      route,\n      loginService\n    );\n    super.onSuccessfulLogin = async () => {\n      await syncService.fullSync(true);\n    };\n    super.successRoute = \"/tabs/vault\";\n    this.showPasswordless = flagEnabled(\"showPasswordless\");\n\n    if (this.showPasswordless) {\n      this.formGroup.controls.email.setValue(this.loginService.getEmail());\n      this.formGroup.controls.rememberEmail.setValue(this.loginService.getRememberEmail());\n      this.validateEmail();\n    }\n  }\n\n  settings() {\n    this.router.navigate([\"environment\"]);\n  }\n\n  async launchSsoBrowser() {\n    await this.loginService.saveEmailSettings();\n    // Generate necessary sso params\n    const passwordOptions: any = {\n      type: \"password\",\n      length: 64,\n      uppercase: true,\n      lowercase: true,\n      numbers: true,\n      special: false,\n    };\n\n    const state =\n      (await this.passwordGenerationService.generatePassword(passwordOptions)) +\n      \":clientId=browser\";\n    const codeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);\n    const codeVerifierHash = await this.cryptoFunctionService.hash(codeVerifier, \"sha256\");\n    const codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);\n\n    await this.stateService.setSsoCodeVerifier(codeVerifier);\n    await this.stateService.setSsoState(state);\n\n    let url = this.environmentService.getWebVaultUrl();\n    if (url == null) {\n      url = \"https://vault.bitwarden.com\";\n    }\n\n    const redirectUri = url + \"/sso-connector.html\";\n\n    // Launch browser\n    this.platformUtilsService.launchUri(\n      url +\n        \"/#/sso?clientId=browser\" +\n        \"&redirectUri=\" +\n        encodeURIComponent(redirectUri) +\n        \"&state=\" +\n        state +\n        \"&codeChallenge=\" +\n        codeChallenge +\n        \"&email=\" +\n        encodeURIComponent(this.formGroup.controls.email.value)\n    );\n  }\n}\n","export class KeysRequest {\n  publicKey: string;\n  encryptedPrivateKey: string;\n\n  constructor(publicKey: string, encryptedPrivateKey: string) {\n    this.publicKey = publicKey;\n    this.encryptedPrivateKey = encryptedPrivateKey;\n  }\n}\n","import { CaptchaProtectedRequest } from \"../../auth/models/request/captcha-protected.request\";\nimport { KdfType } from \"../../enums\";\n\nimport { KeysRequest } from \"./keys.request\";\nimport { ReferenceEventRequest } from \"./reference-event.request\";\n\nexport class RegisterRequest implements CaptchaProtectedRequest {\n  masterPasswordHint: string;\n  keys: KeysRequest;\n  token: string;\n  organizationUserId: string;\n\n  constructor(\n    public email: string,\n    public name: string,\n    public masterPasswordHash: string,\n    masterPasswordHint: string,\n    public key: string,\n    public referenceData: ReferenceEventRequest,\n    public captchaResponse: string,\n    public kdf: KdfType,\n    public kdfIterations: number,\n    public kdfMemory?: number,\n    public kdfParallelism?: number\n  ) {\n    this.masterPasswordHint = masterPasswordHint ? masterPasswordHint : null;\n  }\n}\n","import { AbstractControl, UntypedFormGroup, ValidatorFn } from \"@angular/forms\";\n\nimport { FormGroupControls } from \"@bitwarden/common/abstractions/formValidationErrors.service\";\n\nexport class InputsFieldMatch {\n  //check to ensure two fields do not have the same value\n  static validateInputsDoesntMatch(matchTo: string, errorMessage: string): ValidatorFn {\n    return (control: AbstractControl) => {\n      if (control.parent && control.parent.controls) {\n        return control?.value === (control?.parent?.controls as FormGroupControls)[matchTo].value\n          ? {\n              inputsMatchError: {\n                message: errorMessage,\n              },\n            }\n          : null;\n      }\n\n      return null;\n    };\n  }\n\n  //check to ensure two fields have the same value\n  static validateInputsMatch(matchTo: string, errorMessage: string): ValidatorFn {\n    return (control: AbstractControl) => {\n      if (control.parent && control.parent.controls) {\n        return control?.value === (control?.parent?.controls as FormGroupControls)[matchTo].value\n          ? null\n          : {\n              inputsDoesntMatchError: {\n                message: errorMessage,\n              },\n            };\n      }\n\n      return null;\n    };\n  }\n\n  //checks the formGroup if two fields have the same value and validation is controlled from either field\n  static validateFormInputsMatch(field: string, fieldMatchTo: string, errorMessage: string) {\n    return (formGroup: UntypedFormGroup) => {\n      const fieldCtrl = formGroup.controls[field];\n      const fieldMatchToCtrl = formGroup.controls[fieldMatchTo];\n\n      if (fieldCtrl.value !== fieldMatchToCtrl.value) {\n        fieldMatchToCtrl.setErrors({\n          inputsDoesntMatchError: {\n            message: errorMessage,\n          },\n        });\n      } else {\n        fieldMatchToCtrl.setErrors(null);\n      }\n    };\n  }\n}\n","import { BreachAccountResponse } from \"../models/response/breach-account.response\";\n\nexport abstract class AuditService {\n  passwordLeaked: (password: string) => Promise<number>;\n  breachedAccounts: (username: string) => Promise<BreachAccountResponse[]>;\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { AbstractControl, UntypedFormBuilder, ValidatorFn, Validators } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport {\n  AllValidationErrors,\n  FormValidationErrorsService,\n} from \"@bitwarden/common/abstractions/formValidationErrors.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { PasswordLogInCredentials } from \"@bitwarden/common/auth/models/domain/log-in-credentials\";\nimport { RegisterResponse } from \"@bitwarden/common/auth/models/response/register.response\";\nimport { DEFAULT_KDF_CONFIG, DEFAULT_KDF_TYPE } from \"@bitwarden/common/enums\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { KeysRequest } from \"@bitwarden/common/models/request/keys.request\";\nimport { ReferenceEventRequest } from \"@bitwarden/common/models/request/reference-event.request\";\nimport { RegisterRequest } from \"@bitwarden/common/models/request/register.request\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { CaptchaProtectedComponent } from \"../auth/components/captcha-protected.component\";\nimport { PasswordColorText } from \"../shared/components/password-strength/password-strength.component\";\nimport { InputsFieldMatch } from \"../validators/inputsFieldMatch.validator\";\n\n@Directive()\nexport class RegisterComponent extends CaptchaProtectedComponent implements OnInit {\n  @Input() isInTrialFlow = false;\n  @Output() createdAccount = new EventEmitter<string>();\n\n  showPassword = false;\n  formPromise: Promise<RegisterResponse>;\n  referenceData: ReferenceEventRequest;\n  showTerms = true;\n  showErrorSummary = false;\n  passwordStrengthResult: any;\n  characterMinimumMessage: string;\n  minimumLength = Utils.minimumPasswordLength;\n  color: string;\n  text: string;\n\n  formGroup = this.formBuilder.group(\n    {\n      email: [\"\", [Validators.required, Validators.email]],\n      name: [\"\"],\n      masterPassword: [\"\", [Validators.required, Validators.minLength(this.minimumLength)]],\n      confirmMasterPassword: [\"\", [Validators.required, Validators.minLength(this.minimumLength)]],\n      hint: [\n        null,\n        [\n          InputsFieldMatch.validateInputsDoesntMatch(\n            \"masterPassword\",\n            this.i18nService.t(\"hintEqualsPassword\")\n          ),\n        ],\n      ],\n      checkForBreaches: [true],\n      acceptPolicies: [false, [this.acceptPoliciesValidation()]],\n    },\n    {\n      validator: InputsFieldMatch.validateFormInputsMatch(\n        \"masterPassword\",\n        \"confirmMasterPassword\",\n        this.i18nService.t(\"masterPassDoesntMatch\")\n      ),\n    }\n  );\n\n  protected successRoute = \"login\";\n\n  protected accountCreated = false;\n\n  protected captchaBypassToken: string = null;\n\n  constructor(\n    protected formValidationErrorService: FormValidationErrorsService,\n    protected formBuilder: UntypedFormBuilder,\n    protected authService: AuthService,\n    protected router: Router,\n    i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected apiService: ApiService,\n    protected stateService: StateService,\n    platformUtilsService: PlatformUtilsService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    environmentService: EnvironmentService,\n    protected logService: LogService,\n    protected auditService: AuditService\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n    this.showTerms = !platformUtilsService.isSelfHost();\n    this.characterMinimumMessage = this.i18nService.t(\"characterMinimum\", this.minimumLength);\n  }\n\n  async ngOnInit() {\n    this.setupCaptcha();\n  }\n\n  async submit(showToast = true) {\n    let email = this.formGroup.value.email;\n    email = email.trim().toLowerCase();\n    let name = this.formGroup.value.name;\n    name = name === \"\" ? null : name; // Why do we do this?\n    const masterPassword = this.formGroup.value.masterPassword;\n    try {\n      if (!this.accountCreated) {\n        const registerResponse = await this.registerAccount(\n          await this.buildRegisterRequest(email, masterPassword, name),\n          showToast\n        );\n        if (!registerResponse.successful) {\n          return;\n        }\n        this.captchaBypassToken = registerResponse.captchaBypassToken;\n        this.accountCreated = true;\n      }\n      if (this.isInTrialFlow) {\n        if (!this.accountCreated) {\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"trialAccountCreated\")\n          );\n        }\n        const loginResponse = await this.logIn(email, masterPassword, this.captchaBypassToken);\n        if (loginResponse.captchaRequired) {\n          return;\n        }\n        this.createdAccount.emit(this.formGroup.value.email);\n      } else {\n        this.platformUtilsService.showToast(\n          \"success\",\n          null,\n          this.i18nService.t(\"newAccountCreated\")\n        );\n        this.router.navigate([this.successRoute], { queryParams: { email: email } });\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n  }\n\n  getStrengthResult(result: any) {\n    this.passwordStrengthResult = result;\n  }\n\n  getPasswordScoreText(event: PasswordColorText) {\n    this.color = event.color;\n    this.text = event.text;\n  }\n\n  private getErrorToastMessage() {\n    const error: AllValidationErrors = this.formValidationErrorService\n      .getFormValidationErrors(this.formGroup.controls)\n      .shift();\n\n    if (error) {\n      switch (error.errorName) {\n        case \"email\":\n          return this.i18nService.t(\"invalidEmail\");\n        case \"inputsDoesntMatchError\":\n          return this.i18nService.t(\"masterPassDoesntMatch\");\n        case \"inputsMatchError\":\n          return this.i18nService.t(\"hintEqualsPassword\");\n        case \"minlength\":\n          return this.i18nService.t(\"masterPasswordMinlength\", Utils.minimumPasswordLength);\n        default:\n          return this.i18nService.t(this.errorTag(error));\n      }\n    }\n\n    return;\n  }\n\n  private errorTag(error: AllValidationErrors): string {\n    const name = error.errorName.charAt(0).toUpperCase() + error.errorName.slice(1);\n    return `${error.controlName}${name}`;\n  }\n\n  //validation would be ignored on selfhosted\n  private acceptPoliciesValidation(): ValidatorFn {\n    return (control: AbstractControl) => {\n      const ctrlValue = control.value;\n\n      return !ctrlValue && this.showTerms ? { required: true } : null;\n    };\n  }\n\n  private async validateRegistration(showToast: boolean): Promise<{ isValid: boolean }> {\n    this.formGroup.markAllAsTouched();\n    this.showErrorSummary = true;\n\n    if (this.formGroup.get(\"acceptPolicies\").hasError(\"required\")) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"acceptPoliciesRequired\")\n      );\n      return { isValid: false };\n    }\n\n    //web\n    if (this.formGroup.invalid && !showToast) {\n      return { isValid: false };\n    }\n\n    //desktop, browser\n    if (this.formGroup.invalid && showToast) {\n      const errorText = this.getErrorToastMessage();\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errorText);\n      return { isValid: false };\n    }\n\n    const passwordWeak =\n      this.passwordStrengthResult != null && this.passwordStrengthResult.score < 3;\n    const passwordLeak =\n      this.formGroup.controls.checkForBreaches.value &&\n      (await this.auditService.passwordLeaked(this.formGroup.controls.masterPassword.value)) > 0;\n\n    if (passwordWeak && passwordLeak) {\n      const result = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"weakAndBreachedMasterPasswordDesc\"),\n        this.i18nService.t(\"weakAndExposedMasterPassword\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\"),\n        \"warning\"\n      );\n      if (!result) {\n        return { isValid: false };\n      }\n    } else if (passwordWeak) {\n      const result = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"weakMasterPasswordDesc\"),\n        this.i18nService.t(\"weakMasterPassword\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\"),\n        \"warning\"\n      );\n      if (!result) {\n        return { isValid: false };\n      }\n    } else if (passwordLeak) {\n      const result = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"exposedMasterPasswordDesc\"),\n        this.i18nService.t(\"exposedMasterPassword\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\"),\n        \"warning\"\n      );\n      if (!result) {\n        return { isValid: false };\n      }\n    }\n\n    return { isValid: true };\n  }\n\n  private async buildRegisterRequest(\n    email: string,\n    masterPassword: string,\n    name: string\n  ): Promise<RegisterRequest> {\n    const hint = this.formGroup.value.hint;\n    const kdf = DEFAULT_KDF_TYPE;\n    const kdfConfig = DEFAULT_KDF_CONFIG;\n    const key = await this.cryptoService.makeKey(masterPassword, email, kdf, kdfConfig);\n    const encKey = await this.cryptoService.makeEncKey(key);\n    const hashedPassword = await this.cryptoService.hashPassword(masterPassword, key);\n    const keys = await this.cryptoService.makeKeyPair(encKey[0]);\n    const request = new RegisterRequest(\n      email,\n      name,\n      hashedPassword,\n      hint,\n      encKey[1].encryptedString,\n      this.referenceData,\n      this.captchaToken,\n      kdf,\n      kdfConfig.iterations,\n      kdfConfig.memory,\n      kdfConfig.parallelism\n    );\n    request.keys = new KeysRequest(keys[0], keys[1].encryptedString);\n    const orgInvite = await this.stateService.getOrganizationInvitation();\n    if (orgInvite != null && orgInvite.token != null && orgInvite.organizationUserId != null) {\n      request.token = orgInvite.token;\n      request.organizationUserId = orgInvite.organizationUserId;\n    }\n    return request;\n  }\n\n  private async registerAccount(\n    request: RegisterRequest,\n    showToast: boolean\n  ): Promise<{ successful: boolean; captchaBypassToken?: string }> {\n    if (!(await this.validateRegistration(showToast)).isValid) {\n      return { successful: false };\n    }\n    this.formPromise = this.apiService.postRegister(request);\n    try {\n      const response = await this.formPromise;\n      return { successful: true, captchaBypassToken: response.captchaBypassToken };\n    } catch (e) {\n      if (this.handleCaptchaRequired(e)) {\n        return { successful: false };\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  private async logIn(\n    email: string,\n    masterPassword: string,\n    captchaBypassToken: string\n  ): Promise<{ captchaRequired: boolean }> {\n    const credentials = new PasswordLogInCredentials(\n      email,\n      masterPassword,\n      captchaBypassToken,\n      null\n    );\n    const loginResponse = await this.authService.logIn(credentials);\n    if (this.handleCaptchaRequired(loginResponse)) {\n      return { captchaRequired: true };\n    }\n    return { captchaRequired: false };\n  }\n}\n","<div class=\"progress\">\n  <div\n    class=\"progress-bar {{ color }}\"\n    role=\"progressbar\"\n    [ngStyle]=\"{ width: scoreWidth + '%' }\"\n    attr.aria-valuenow=\"{{ scoreWidth }}\"\n    aria-valuemin=\"0\"\n    aria-valuemax=\"100\"\n  >\n    <ng-container *ngIf=\"showText && text\">\n      {{ text }}\n    </ng-container>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, OnChanges, Output } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nexport interface PasswordColorText {\n  color: string;\n  text: string;\n}\n\n@Component({\n  selector: \"app-password-strength\",\n  templateUrl: \"password-strength.component.html\",\n})\nexport class PasswordStrengthComponent implements OnChanges {\n  @Input() showText = false;\n  @Input() email: string;\n  @Input() name: string;\n  @Input() set password(value: string) {\n    this.updatePasswordStrength(value);\n  }\n  @Output() passwordStrengthResult = new EventEmitter<any>();\n  @Output() passwordScoreColor = new EventEmitter<PasswordColorText>();\n\n  masterPasswordScore: number;\n  scoreWidth = 0;\n  color = \"bg-danger\";\n  text: string;\n\n  private masterPasswordStrengthTimeout: any;\n\n  //used by desktop and browser to display strength text color\n  get masterPasswordScoreColor() {\n    switch (this.masterPasswordScore) {\n      case 4:\n        return \"success\";\n      case 3:\n        return \"primary\";\n      case 2:\n        return \"warning\";\n      default:\n        return \"danger\";\n    }\n  }\n\n  //used by desktop and browser to display strength text\n  get masterPasswordScoreText() {\n    switch (this.masterPasswordScore) {\n      case 4:\n        return this.i18nService.t(\"strong\");\n      case 3:\n        return this.i18nService.t(\"good\");\n      case 2:\n        return this.i18nService.t(\"weak\");\n      default:\n        return this.masterPasswordScore != null ? this.i18nService.t(\"weak\") : null;\n    }\n  }\n\n  constructor(\n    private i18nService: I18nService,\n    private passwordGenerationService: PasswordGenerationServiceAbstraction\n  ) {}\n\n  ngOnChanges(): void {\n    this.masterPasswordStrengthTimeout = setTimeout(() => {\n      this.scoreWidth = this.masterPasswordScore == null ? 0 : (this.masterPasswordScore + 1) * 20;\n\n      switch (this.masterPasswordScore) {\n        case 4:\n          this.color = \"bg-success\";\n          this.text = this.i18nService.t(\"strong\");\n          break;\n        case 3:\n          this.color = \"bg-primary\";\n          this.text = this.i18nService.t(\"good\");\n          break;\n        case 2:\n          this.color = \"bg-warning\";\n          this.text = this.i18nService.t(\"weak\");\n          break;\n        default:\n          this.color = \"bg-danger\";\n          this.text = this.masterPasswordScore != null ? this.i18nService.t(\"weak\") : null;\n          break;\n      }\n\n      this.setPasswordScoreText(this.color, this.text);\n    }, 300);\n  }\n\n  updatePasswordStrength(password: string) {\n    const masterPassword = password;\n\n    if (this.masterPasswordStrengthTimeout != null) {\n      clearTimeout(this.masterPasswordStrengthTimeout);\n    }\n\n    const strengthResult = this.passwordGenerationService.passwordStrength(\n      masterPassword,\n      this.email,\n      this.name?.trim().toLowerCase().split(\" \")\n    );\n    this.passwordStrengthResult.emit(strengthResult);\n    this.masterPasswordScore = strengthResult == null ? null : strengthResult.score;\n  }\n\n  setPasswordScoreText(color: string, text: string) {\n    color = color.slice(3);\n    this.passwordScoreColor.emit({ color: color, text: text });\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\" [formGroup]=\"formGroup\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/home\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"createAccount\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"email\">{{ \"emailAddress\" | i18n }}</label>\n          <input id=\"email\" type=\"email\" formControlName=\"email\" appInputVerbatim=\"false\" />\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <div class=\"box-content-row-flex\">\n            <div class=\"row-main\">\n              <label for=\"masterPassword\">\n                {{ \"masterPass\" | i18n }}\n                <strong class=\"sub-label text-{{ color }}\" *ngIf=\"text\">\n                  {{ text }}\n                </strong>\n              </label>\n              <input\n                id=\"masterPassword\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                aria-describedby=\"masterPasswordHelp\"\n                class=\"monospaced\"\n                formControlName=\"masterPassword\"\n                appInputVerbatim\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePassword()\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n          <app-password-strength\n            [password]=\"formGroup.get('masterPassword')?.value\"\n            [email]=\"formGroup.get('email')?.value\"\n            [name]=\"formGroup.get('name')?.value\"\n            (passwordStrengthResult)=\"getStrengthResult($event)\"\n            (passwordScoreColor)=\"getPasswordScoreText($event)\"\n          >\n          </app-password-strength>\n        </div>\n      </div>\n      <div id=\"masterPasswordHelp\" class=\"box-footer\">\n        <b>{{ \"important\" | i18n }}</b> {{ \"masterPasswordHint\" | i18n }}\n        {{ characterMinimumMessage }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n          <div class=\"row-main\">\n            <label for=\"masterPasswordRetype\">{{ \"reTypeMasterPass\" | i18n }}</label>\n            <input\n              id=\"masterPasswordRetype\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              class=\"monospaced\"\n              formControlName=\"confirmMasterPassword\"\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n              ></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"hint\">{{ \"masterPassHint\" | i18n }}</label>\n          <input id=\"hint\" type=\"text\" aria-describedby=\"hintHelp\" formControlName=\"hint\" />\n        </div>\n      </div>\n      <div id=\"hintHelp\" class=\"box-footer\">\n        {{ \"masterPassHintDesc\" | i18n }}\n      </div>\n      <div class=\"box-content row-top-padding\">\n        <div\n          class=\"box-content-row box-content-row-checkbox box-content-row-checkbox-left box-content-row-word-break\"\n          appBoxRow\n        >\n          <input type=\"checkbox\" id=\"checkForBreaches\" formControlName=\"checkForBreaches\" />\n          <label for=\"checkForBreaches\">\n            {{ \"checkForBreaches\" | i18n }}\n          </label>\n        </div>\n      </div>\n    </div>\n    <div [hidden]=\"!showCaptcha()\"><iframe id=\"hcaptcha_iframe\" height=\"80\"></iframe></div>\n    <div class=\"box last\" *ngIf=\"showTerms\">\n      <div class=\"box-content\">\n        <div\n          class=\"box-content-row box-content-row-checkbox box-content-row-checkbox-left box-content-row-word-break\"\n          appBoxRow\n        >\n          <input type=\"checkbox\" id=\"acceptPolicies\" formControlName=\"acceptPolicies\" />\n          <label for=\"acceptPolicies\">\n            {{ \"acceptPolicies\" | i18n }}<br />\n            <a href=\"https://bitwarden.com/terms/\" target=\"_blank\" rel=\"noopener\">{{\n              \"termsOfService\" | i18n\n            }}</a\n            >,\n            <a href=\"https://bitwarden.com/privacy/\" target=\"_blank\" rel=\"noopener\">{{\n              \"privacyPolicy\" | i18n\n            }}</a>\n          </label>\n        </div>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { UntypedFormBuilder } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\n\nimport { RegisterComponent as BaseRegisterComponent } from \"@bitwarden/angular/components/register.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { FormValidationErrorsService } from \"@bitwarden/common/abstractions/formValidationErrors.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\n@Component({\n  selector: \"app-register\",\n  templateUrl: \"register.component.html\",\n})\nexport class RegisterComponent extends BaseRegisterComponent {\n  color: string;\n  text: string;\n\n  constructor(\n    formValidationErrorService: FormValidationErrorsService,\n    formBuilder: UntypedFormBuilder,\n    authService: AuthService,\n    router: Router,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    stateService: StateService,\n    platformUtilsService: PlatformUtilsService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    environmentService: EnvironmentService,\n    logService: LogService,\n    auditService: AuditService\n  ) {\n    super(\n      formValidationErrorService,\n      formBuilder,\n      authService,\n      router,\n      i18nService,\n      cryptoService,\n      apiService,\n      stateService,\n      platformUtilsService,\n      passwordGenerationService,\n      environmentService,\n      logService,\n      auditService\n    );\n  }\n}\n","import { OrganizationApiKeyRequest } from \"../../../admin-console/models/request/organization-api-key.request\";\nimport { OrganizationSsoRequest } from \"../../../auth/models/request/organization-sso.request\";\nimport { SecretVerificationRequest } from \"../../../auth/models/request/secret-verification.request\";\nimport { ApiKeyResponse } from \"../../../auth/models/response/api-key.response\";\nimport { OrganizationSsoResponse } from \"../../../auth/models/response/organization-sso.response\";\nimport { OrganizationSubscriptionUpdateRequest } from \"../../../billing/models/request/organization-subscription-update.request\";\nimport { OrganizationTaxInfoUpdateRequest } from \"../../../billing/models/request/organization-tax-info-update.request\";\nimport { PaymentRequest } from \"../../../billing/models/request/payment.request\";\nimport { BillingResponse } from \"../../../billing/models/response/billing.response\";\nimport { OrganizationSubscriptionResponse } from \"../../../billing/models/response/organization-subscription.response\";\nimport { PaymentResponse } from \"../../../billing/models/response/payment.response\";\nimport { TaxInfoResponse } from \"../../../billing/models/response/tax-info.response\";\nimport { ImportDirectoryRequest } from \"../../../models/request/import-directory.request\";\nimport { SeatRequest } from \"../../../models/request/seat.request\";\nimport { StorageRequest } from \"../../../models/request/storage.request\";\nimport { VerifyBankRequest } from \"../../../models/request/verify-bank.request\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { OrganizationApiKeyType } from \"../../enums\";\nimport { OrganizationCreateRequest } from \"../../models/request/organization-create.request\";\nimport { OrganizationKeysRequest } from \"../../models/request/organization-keys.request\";\nimport { OrganizationUpdateRequest } from \"../../models/request/organization-update.request\";\nimport { OrganizationUpgradeRequest } from \"../../models/request/organization-upgrade.request\";\nimport { OrganizationEnrollSecretsManagerRequest } from \"../../models/request/organization/organization-enroll-secrets-manager.request\";\nimport { OrganizationApiKeyInformationResponse } from \"../../models/response/organization-api-key-information.response\";\nimport { OrganizationAutoEnrollStatusResponse } from \"../../models/response/organization-auto-enroll-status.response\";\nimport { OrganizationKeysResponse } from \"../../models/response/organization-keys.response\";\nimport { OrganizationResponse } from \"../../models/response/organization.response\";\n\nexport class OrganizationApiServiceAbstraction {\n  get: (id: string) => Promise<OrganizationResponse>;\n  getBilling: (id: string) => Promise<BillingResponse>;\n  getSubscription: (id: string) => Promise<OrganizationSubscriptionResponse>;\n  getLicense: (id: string, installationId: string) => Promise<unknown>;\n  getAutoEnrollStatus: (identifier: string) => Promise<OrganizationAutoEnrollStatusResponse>;\n  create: (request: OrganizationCreateRequest) => Promise<OrganizationResponse>;\n  createLicense: (data: FormData) => Promise<OrganizationResponse>;\n  save: (id: string, request: OrganizationUpdateRequest) => Promise<OrganizationResponse>;\n  updatePayment: (id: string, request: PaymentRequest) => Promise<void>;\n  upgrade: (id: string, request: OrganizationUpgradeRequest) => Promise<PaymentResponse>;\n  updateSubscription: (id: string, request: OrganizationSubscriptionUpdateRequest) => Promise<void>;\n  updateSeats: (id: string, request: SeatRequest) => Promise<PaymentResponse>;\n  updateStorage: (id: string, request: StorageRequest) => Promise<PaymentResponse>;\n  verifyBank: (id: string, request: VerifyBankRequest) => Promise<void>;\n  cancel: (id: string) => Promise<void>;\n  reinstate: (id: string) => Promise<void>;\n  leave: (id: string) => Promise<void>;\n  delete: (id: string, request: SecretVerificationRequest) => Promise<void>;\n  updateLicense: (id: string, data: FormData) => Promise<void>;\n  importDirectory: (organizationId: string, request: ImportDirectoryRequest) => Promise<void>;\n  getOrCreateApiKey: (id: string, request: OrganizationApiKeyRequest) => Promise<ApiKeyResponse>;\n  getApiKeyInformation: (\n    id: string,\n    organizationApiKeyType?: OrganizationApiKeyType\n  ) => Promise<ListResponse<OrganizationApiKeyInformationResponse>>;\n  rotateApiKey: (id: string, request: OrganizationApiKeyRequest) => Promise<ApiKeyResponse>;\n  getTaxInfo: (id: string) => Promise<TaxInfoResponse>;\n  updateTaxInfo: (id: string, request: OrganizationTaxInfoUpdateRequest) => Promise<void>;\n  getKeys: (id: string) => Promise<OrganizationKeysResponse>;\n  updateKeys: (id: string, request: OrganizationKeysRequest) => Promise<OrganizationKeysResponse>;\n  getSso: (id: string) => Promise<OrganizationSsoResponse>;\n  updateSso: (id: string, request: OrganizationSsoRequest) => Promise<OrganizationSsoResponse>;\n  selfHostedSyncLicense: (id: string) => Promise<void>;\n  updateEnrollSecretsManager: (\n    id: string,\n    request: OrganizationEnrollSecretsManagerRequest\n  ) => Promise<void>;\n}\n","import { Directive, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\n@Directive()\nexport class RemovePasswordComponent implements OnInit {\n  actionPromise: Promise<void | boolean>;\n  continuing = false;\n  leaving = false;\n\n  loading = true;\n  organization: Organization;\n  email: string;\n\n  constructor(\n    private router: Router,\n    private stateService: StateService,\n    private syncService: SyncService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private keyConnectorService: KeyConnectorService,\n    private organizationApiService: OrganizationApiServiceAbstraction\n  ) {}\n\n  async ngOnInit() {\n    this.organization = await this.keyConnectorService.getManagingOrganization();\n    this.email = await this.stateService.getEmail();\n    await this.syncService.fullSync(false);\n    this.loading = false;\n  }\n\n  async convert() {\n    this.continuing = true;\n    this.actionPromise = this.keyConnectorService.migrateUser();\n\n    try {\n      await this.actionPromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(\"removedMasterPassword\")\n      );\n      await this.keyConnectorService.removeConvertAccountRequired();\n      this.router.navigate([\"\"]);\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), e.message);\n    }\n  }\n\n  async leave() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"leaveOrganizationConfirmation\"),\n      this.organization.name,\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.leaving = true;\n      this.actionPromise = this.organizationApiService.leave(this.organization.id);\n      await this.actionPromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"leftOrganization\"));\n      await this.keyConnectorService.removeConvertAccountRequired();\n      this.router.navigate([\"\"]);\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), e);\n    }\n  }\n}\n","<header>\n  <div class=\"left\"></div>\n  <div class=\"center\">\n    <span class=\"title\">{{ \"removeMasterPassword\" | i18n }}</span>\n  </div>\n  <div class=\"right\"></div>\n</header>\n\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" appBoxRow>\n        <p>{{ \"convertOrganizationEncryptionDesc\" | i18n : organization.name }}</p>\n      </div>\n      <div class=\"box-content-row\">\n        <button\n          type=\"button\"\n          class=\"btn block primary\"\n          (click)=\"convert()\"\n          [disabled]=\"actionPromise\"\n        >\n          <i\n            class=\"bwi bwi-spinner bwi-spin\"\n            title=\"{{ 'loading' | i18n }}\"\n            aria-hidden=\"true\"\n            *ngIf=\"continuing\"\n          ></i>\n          {{ \"removeMasterPassword\" | i18n }}\n        </button>\n      </div>\n      <div class=\"box-content-row\">\n        <button\n          type=\"button\"\n          class=\"btn btn-outline-secondary block\"\n          (click)=\"leave()\"\n          [disabled]=\"actionPromise\"\n        >\n          <i\n            class=\"bwi bwi-spinner bwi-spin\"\n            title=\"{{ 'loading' | i18n }}\"\n            aria-hidden=\"true\"\n            *ngIf=\"leaving\"\n          ></i>\n          {{ \"leaveOrganization\" | i18n }}\n        </button>\n      </div>\n    </div>\n  </div>\n</main>\n","import { Component } from \"@angular/core\";\n\nimport { RemovePasswordComponent as BaseRemovePasswordComponent } from \"@bitwarden/angular/auth/components/remove-password.component\";\n\n@Component({\n  selector: \"app-remove-password\",\n  templateUrl: \"remove-password.component.html\",\n})\nexport class RemovePasswordComponent extends BaseRemovePasswordComponent {}\n","import { SecretVerificationRequest } from \"../../../auth/models/request/secret-verification.request\";\n\nexport class OrganizationUserResetPasswordEnrollmentRequest extends SecretVerificationRequest {\n  resetPasswordKey: string;\n}\n","import { KdfType } from \"../../../enums\";\nimport { KeysRequest } from \"../../../models/request/keys.request\";\n\nexport class SetPasswordRequest {\n  masterPasswordHash: string;\n  key: string;\n  masterPasswordHint: string;\n  keys: KeysRequest;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  orgIdentifier: string;\n\n  constructor(\n    masterPasswordHash: string,\n    key: string,\n    masterPasswordHint: string,\n    orgIdentifier: string,\n    keys: KeysRequest,\n    kdf: KdfType,\n    kdfIterations: number,\n    kdfMemory?: number,\n    kdfParallelism?: number\n  ) {\n    this.masterPasswordHash = masterPasswordHash;\n    this.key = key;\n    this.masterPasswordHint = masterPasswordHint;\n    this.kdf = kdf;\n    this.kdfIterations = kdfIterations;\n    this.kdfMemory = kdfMemory;\n    this.kdfParallelism = kdfParallelism;\n    this.orgIdentifier = orgIdentifier;\n    this.keys = keys;\n  }\n}\n","import { Directive, OnDestroy, OnInit } from \"@angular/core\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/admin-console/models/domain/master-password-policy-options\";\nimport { KdfConfig } from \"@bitwarden/common/auth/models/domain/kdf-config\";\nimport { KdfType } from \"@bitwarden/common/enums\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { PasswordColorText } from \"../../shared/components/password-strength/password-strength.component\";\n\n@Directive()\nexport class ChangePasswordComponent implements OnInit, OnDestroy {\n  masterPassword: string;\n  masterPasswordRetype: string;\n  formPromise: Promise<any>;\n  enforcedPolicyOptions: MasterPasswordPolicyOptions;\n  passwordStrengthResult: any;\n  color: string;\n  text: string;\n  leakedPassword: boolean;\n  minimumLength = Utils.minimumPasswordLength;\n\n  protected email: string;\n  protected kdf: KdfType;\n  protected kdfConfig: KdfConfig;\n\n  protected destroy$ = new Subject<void>();\n\n  constructor(\n    protected i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected messagingService: MessagingService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected platformUtilsService: PlatformUtilsService,\n    protected policyService: PolicyService,\n    protected stateService: StateService\n  ) {}\n\n  async ngOnInit() {\n    this.email = await this.stateService.getEmail();\n    this.policyService\n      .masterPasswordPolicyOptions$()\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(\n        (enforcedPasswordPolicyOptions) =>\n          (this.enforcedPolicyOptions ??= enforcedPasswordPolicyOptions)\n      );\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async submit() {\n    if (!(await this.strongPassword())) {\n      return;\n    }\n\n    if (!(await this.setupSubmitActions())) {\n      return;\n    }\n\n    const email = await this.stateService.getEmail();\n    if (this.kdf == null) {\n      this.kdf = await this.stateService.getKdfType();\n    }\n    if (this.kdfConfig == null) {\n      this.kdfConfig = await this.stateService.getKdfConfig();\n    }\n    const key = await this.cryptoService.makeKey(\n      this.masterPassword,\n      email.trim().toLowerCase(),\n      this.kdf,\n      this.kdfConfig\n    );\n    const masterPasswordHash = await this.cryptoService.hashPassword(this.masterPassword, key);\n\n    let encKey: [SymmetricCryptoKey, EncString] = null;\n    const existingEncKey = await this.cryptoService.getEncKey();\n    if (existingEncKey == null) {\n      encKey = await this.cryptoService.makeEncKey(key);\n    } else {\n      encKey = await this.cryptoService.remakeEncKey(key);\n    }\n\n    await this.performSubmitActions(masterPasswordHash, key, encKey);\n  }\n\n  async setupSubmitActions(): Promise<boolean> {\n    // Override in sub-class\n    // Can be used for additional validation and/or other processes the should occur before changing passwords\n    return true;\n  }\n\n  async performSubmitActions(\n    masterPasswordHash: string,\n    key: SymmetricCryptoKey,\n    encKey: [SymmetricCryptoKey, EncString]\n  ) {\n    // Override in sub-class\n  }\n\n  async strongPassword(): Promise<boolean> {\n    if (this.masterPassword == null || this.masterPassword === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordRequired\")\n      );\n      return false;\n    }\n    if (this.masterPassword.length < this.minimumLength) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordMinimumlength\", this.minimumLength)\n      );\n      return false;\n    }\n    if (this.masterPassword !== this.masterPasswordRetype) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPassDoesntMatch\")\n      );\n      return false;\n    }\n\n    const strengthResult = this.passwordStrengthResult;\n\n    if (\n      this.enforcedPolicyOptions != null &&\n      !this.policyService.evaluateMasterPassword(\n        strengthResult.score,\n        this.masterPassword,\n        this.enforcedPolicyOptions\n      )\n    ) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"masterPasswordPolicyRequirementsNotMet\")\n      );\n      return false;\n    }\n\n    const weakPassword = strengthResult != null && strengthResult.score < 3;\n\n    if (weakPassword && this.leakedPassword) {\n      const result = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"weakAndBreachedMasterPasswordDesc\"),\n        this.i18nService.t(\"weakAndExposedMasterPassword\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\"),\n        \"warning\"\n      );\n      if (!result) {\n        return false;\n      }\n    } else {\n      if (weakPassword) {\n        const result = await this.platformUtilsService.showDialog(\n          this.i18nService.t(\"weakMasterPasswordDesc\"),\n          this.i18nService.t(\"weakMasterPassword\"),\n          this.i18nService.t(\"yes\"),\n          this.i18nService.t(\"no\"),\n          \"warning\"\n        );\n        if (!result) {\n          return false;\n        }\n      }\n      if (this.leakedPassword) {\n        const result = await this.platformUtilsService.showDialog(\n          this.i18nService.t(\"exposedMasterPasswordDesc\"),\n          this.i18nService.t(\"exposedMasterPassword\"),\n          this.i18nService.t(\"yes\"),\n          this.i18nService.t(\"no\"),\n          \"warning\"\n        );\n        if (!result) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  async logOut() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"logOutConfirmation\"),\n      this.i18nService.t(\"logOut\"),\n      this.i18nService.t(\"logOut\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      this.messagingService.send(\"logout\");\n    }\n  }\n\n  getStrengthResult(result: any) {\n    this.passwordStrengthResult = result;\n  }\n\n  getPasswordScoreText(event: PasswordColorText) {\n    this.color = event.color;\n    this.text = event.text;\n  }\n}\n","import { ListResponse } from \"../../models/response/list.response\";\n\nimport {\n  OrganizationUserAcceptInitRequest,\n  OrganizationUserAcceptRequest,\n  OrganizationUserBulkConfirmRequest,\n  OrganizationUserConfirmRequest,\n  OrganizationUserInviteRequest,\n  OrganizationUserResetPasswordEnrollmentRequest,\n  OrganizationUserResetPasswordRequest,\n  OrganizationUserUpdateGroupsRequest,\n  OrganizationUserUpdateRequest,\n} from \"./requests\";\nimport {\n  OrganizationUserBulkPublicKeyResponse,\n  OrganizationUserBulkResponse,\n  OrganizationUserDetailsResponse,\n  OrganizationUserResetPasswordDetailsReponse,\n  OrganizationUserUserDetailsResponse,\n} from \"./responses\";\n\n/**\n * Service for interacting with Organization Users via the API\n */\nexport abstract class OrganizationUserService {\n  /**\n   * Retrieve a single organization user by Id\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   * @param options - Options for the request\n   */\n  abstract getOrganizationUser(\n    organizationId: string,\n    id: string,\n    options?: {\n      includeGroups?: boolean;\n    }\n  ): Promise<OrganizationUserDetailsResponse>;\n\n  /**\n   * Retrieve a list of groups Ids the specified organization user belongs to\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   */\n  abstract getOrganizationUserGroups(organizationId: string, id: string): Promise<string[]>;\n\n  /**\n   * Retrieve a list of all users that belong to the specified organization\n   * @param organizationId - Identifier for the organization\n   * @param options - Options for the request\n   */\n  abstract getAllUsers(\n    organizationId: string,\n    options?: {\n      includeCollections?: boolean;\n      includeGroups?: boolean;\n    }\n  ): Promise<ListResponse<OrganizationUserUserDetailsResponse>>;\n\n  /**\n   * Retrieve reset password details for the specified organization user\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   */\n  abstract getOrganizationUserResetPasswordDetails(\n    organizationId: string,\n    id: string\n  ): Promise<OrganizationUserResetPasswordDetailsReponse>;\n\n  /**\n   * Create new organization user invite(s) for the specified organization\n   * @param organizationId - Identifier for the organization\n   * @param request - New user invitation request details\n   */\n  abstract postOrganizationUserInvite(\n    organizationId: string,\n    request: OrganizationUserInviteRequest\n  ): Promise<void>;\n\n  /**\n   * Re-invite the specified organization user\n   * @param organizationId - Identifier for the user's organization\n   * @param id - Organization user identifier\n   */\n  abstract postOrganizationUserReinvite(organizationId: string, id: string): Promise<any>;\n\n  /**\n   * Re-invite many organization users for the specified organization\n   * @param organizationId - Identifier for the organization\n   * @param ids - A list of organization user identifiers\n   * @return List of user ids, including both those that were successfully re-invited and those that had an error\n   */\n  abstract postManyOrganizationUserReinvite(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Accept an invitation to initialize and join an organization created via the Admin Portal **only**.\n   * This is only used once for the initial Owner, because it also creates the organization's encryption keys.\n   * This should not be used for organizations created via the Web client.\n   * @param organizationId - Identifier for the organization to accept\n   * @param id - Organization user identifier\n   * @param request - Request details for accepting the invitation\n   */\n  abstract postOrganizationUserAcceptInit(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserAcceptInitRequest\n  ): Promise<void>;\n\n  /**\n   * Accept an organization user invitation\n   * @param organizationId - Identifier for the organization to accept\n   * @param id - Organization user identifier\n   * @param request - Request details for accepting the invitation\n   */\n  abstract postOrganizationUserAccept(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserAcceptRequest\n  ): Promise<void>;\n\n  /**\n   * Confirm an organization user that has accepted their invitation\n   * @param organizationId - Identifier for the organization to confirm\n   * @param id - Organization user identifier\n   * @param request - Request details for confirming the user\n   */\n  abstract postOrganizationUserConfirm(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserConfirmRequest\n  ): Promise<void>;\n\n  /**\n   * Retrieve a list of the specified users' public keys\n   * @param organizationId - Identifier for the organization to accept\n   * @param ids - A list of organization user identifiers to retrieve public keys for\n   */\n  abstract postOrganizationUsersPublicKey(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkPublicKeyResponse>>;\n\n  /**\n   * Confirm many organization users that have accepted their invitations\n   * @param organizationId - Identifier for the organization to confirm users\n   * @param request - Bulk request details for confirming the user\n   */\n  abstract postOrganizationUserBulkConfirm(\n    organizationId: string,\n    request: OrganizationUserBulkConfirmRequest\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Update an organization users\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   * @param request - Request details for updating the user\n   */\n  abstract putOrganizationUser(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserUpdateRequest\n  ): Promise<void>;\n\n  /**\n   * Update an organization user's groups\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   * @param groupIds - List of group ids to associate the user with\n   */\n  abstract putOrganizationUserGroups(\n    organizationId: string,\n    id: string,\n    groupIds: OrganizationUserUpdateGroupsRequest\n  ): Promise<void>;\n\n  /**\n   * Update an organization user's reset password enrollment\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param userId - Organization user identifier\n   * @param request - Reset password enrollment details\n   */\n  abstract putOrganizationUserResetPasswordEnrollment(\n    organizationId: string,\n    userId: string,\n    request: OrganizationUserResetPasswordEnrollmentRequest\n  ): Promise<void>;\n\n  /**\n   * Reset an organization user's password\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   * @param request - Reset password details\n   */\n  abstract putOrganizationUserResetPassword(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserResetPasswordRequest\n  ): Promise<void>;\n\n  /**\n   * Delete an organization user\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   */\n  abstract deleteOrganizationUser(organizationId: string, id: string): Promise<void>;\n\n  /**\n   * Delete many organization users\n   * @param organizationId - Identifier for the organization the users belongs to\n   * @param ids - List of organization user identifiers to delete\n   * @return List of user ids, including both those that were successfully deleted and those that had an error\n   */\n  abstract deleteManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Revoke an organization user's access to the organization\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   */\n  abstract revokeOrganizationUser(organizationId: string, id: string): Promise<void>;\n\n  /**\n   * Revoke many organization users' access to the organization\n   * @param organizationId - Identifier for the organization the users belongs to\n   * @param ids - List of organization user identifiers to revoke\n   * @return List of user ids, including both those that were successfully revoked and those that had an error\n   */\n  abstract revokeManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n\n  /**\n   * Restore an organization user's access to the organization\n   * @param organizationId - Identifier for the organization the user belongs to\n   * @param id - Organization user identifier\n   */\n  abstract restoreOrganizationUser(organizationId: string, id: string): Promise<void>;\n\n  /**\n   * Restore many organization users' access to the organization\n   * @param organizationId - Identifier for the organization the users belongs to\n   * @param ids - List of organization user identifiers to restore\n   * @return List of user ids, including both those that were successfully restored and those that had an error\n   */\n  abstract restoreManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>>;\n}\n","import { Directive } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { OrganizationUserService } from \"@bitwarden/common/abstractions/organization-user/organization-user.service\";\nimport { OrganizationUserResetPasswordEnrollmentRequest } from \"@bitwarden/common/abstractions/organization-user/requests\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { SetPasswordRequest } from \"@bitwarden/common/auth/models/request/set-password.request\";\nimport { HashPurpose, DEFAULT_KDF_TYPE, DEFAULT_KDF_CONFIG } from \"@bitwarden/common/enums\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\nimport { KeysRequest } from \"@bitwarden/common/models/request/keys.request\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { ChangePasswordComponent as BaseChangePasswordComponent } from \"../auth/components/change-password.component\";\n\n@Directive()\nexport class SetPasswordComponent extends BaseChangePasswordComponent {\n  syncLoading = true;\n  showPassword = false;\n  hint = \"\";\n  identifier: string = null;\n  orgId: string;\n  resetPasswordAutoEnroll = false;\n\n  onSuccessfulChangePassword: () => Promise<void>;\n  successRoute = \"vault\";\n\n  constructor(\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    messagingService: MessagingService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    platformUtilsService: PlatformUtilsService,\n    private policyApiService: PolicyApiServiceAbstraction,\n    policyService: PolicyService,\n    protected router: Router,\n    private apiService: ApiService,\n    private syncService: SyncService,\n    private route: ActivatedRoute,\n    stateService: StateService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private organizationUserService: OrganizationUserService\n  ) {\n    super(\n      i18nService,\n      cryptoService,\n      messagingService,\n      passwordGenerationService,\n      platformUtilsService,\n      policyService,\n      stateService\n    );\n  }\n\n  async ngOnInit() {\n    await this.syncService.fullSync(true);\n    this.syncLoading = false;\n\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      if (qParams.identifier != null) {\n        this.identifier = qParams.identifier;\n      }\n    });\n\n    // Automatic Enrollment Detection\n    if (this.identifier != null) {\n      try {\n        const response = await this.organizationApiService.getAutoEnrollStatus(this.identifier);\n        this.orgId = response.id;\n        this.resetPasswordAutoEnroll = response.resetPasswordEnabled;\n        this.enforcedPolicyOptions =\n          await this.policyApiService.getMasterPasswordPoliciesForInvitedUsers(this.orgId);\n      } catch {\n        this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n      }\n    }\n\n    super.ngOnInit();\n  }\n\n  async setupSubmitActions() {\n    this.kdf = DEFAULT_KDF_TYPE;\n    this.kdfConfig = DEFAULT_KDF_CONFIG;\n    return true;\n  }\n\n  async performSubmitActions(\n    masterPasswordHash: string,\n    key: SymmetricCryptoKey,\n    encKey: [SymmetricCryptoKey, EncString]\n  ) {\n    const keys = await this.cryptoService.makeKeyPair(encKey[0]);\n    const request = new SetPasswordRequest(\n      masterPasswordHash,\n      encKey[1].encryptedString,\n      this.hint,\n      this.identifier,\n      new KeysRequest(keys[0], keys[1].encryptedString),\n      this.kdf,\n      this.kdfConfig.iterations,\n      this.kdfConfig.memory,\n      this.kdfConfig.parallelism\n    );\n    try {\n      if (this.resetPasswordAutoEnroll) {\n        this.formPromise = this.apiService\n          .setPassword(request)\n          .then(async () => {\n            await this.onSetPasswordSuccess(key, encKey, keys);\n            return this.organizationApiService.getKeys(this.orgId);\n          })\n          .then(async (response) => {\n            if (response == null) {\n              throw new Error(this.i18nService.t(\"resetPasswordOrgKeysError\"));\n            }\n            const userId = await this.stateService.getUserId();\n            const publicKey = Utils.fromB64ToArray(response.publicKey);\n\n            // RSA Encrypt user's encKey.key with organization public key\n            const userEncKey = await this.cryptoService.getEncKey();\n            const encryptedKey = await this.cryptoService.rsaEncrypt(\n              userEncKey.key,\n              publicKey.buffer\n            );\n\n            const resetRequest = new OrganizationUserResetPasswordEnrollmentRequest();\n            resetRequest.masterPasswordHash = masterPasswordHash;\n            resetRequest.resetPasswordKey = encryptedKey.encryptedString;\n\n            return this.organizationUserService.putOrganizationUserResetPasswordEnrollment(\n              this.orgId,\n              userId,\n              resetRequest\n            );\n          });\n      } else {\n        this.formPromise = this.apiService.setPassword(request).then(async () => {\n          await this.onSetPasswordSuccess(key, encKey, keys);\n        });\n      }\n\n      await this.formPromise;\n\n      if (this.onSuccessfulChangePassword != null) {\n        this.onSuccessfulChangePassword();\n      } else {\n        this.router.navigate([this.successRoute]);\n      }\n    } catch {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n    }\n  }\n\n  togglePassword(confirmField: boolean) {\n    this.showPassword = !this.showPassword;\n    document.getElementById(confirmField ? \"masterPasswordRetype\" : \"masterPassword\").focus();\n  }\n\n  private async onSetPasswordSuccess(\n    key: SymmetricCryptoKey,\n    encKey: [SymmetricCryptoKey, EncString],\n    keys: [string, EncString]\n  ) {\n    await this.stateService.setKdfType(this.kdf);\n    await this.stateService.setKdfConfig(this.kdfConfig);\n    await this.cryptoService.setKey(key);\n    await this.cryptoService.setEncKey(encKey[1].encryptedString);\n    await this.cryptoService.setEncPrivateKey(keys[1].encryptedString);\n\n    const localKeyHash = await this.cryptoService.hashPassword(\n      this.masterPassword,\n      key,\n      HashPurpose.LocalAuthorization\n    );\n    await this.cryptoService.setKeyHash(localKeyHash);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/home\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"setMasterPassword\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"full-loading-spinner\" *ngIf=\"syncLoading\">\n      <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" aria-hidden=\"true\"></i>\n    </div>\n    <div *ngIf=\"!syncLoading\">\n      <div class=\"box\">\n        <app-callout type=\"tip\">{{ \"ssoCompleteRegistration\" | i18n }}</app-callout>\n        <app-callout\n          type=\"warning\"\n          title=\"{{ 'resetPasswordPolicyAutoEnroll' | i18n }}\"\n          *ngIf=\"resetPasswordAutoEnroll\"\n        >\n          {{ \"resetPasswordAutoEnrollInviteWarning\" | i18n }}\n        </app-callout>\n        <app-callout\n          type=\"info\"\n          [enforcedPolicyOptions]=\"enforcedPolicyOptions\"\n          *ngIf=\"enforcedPolicyOptions\"\n        >\n        </app-callout>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <div class=\"box-content-row-flex\">\n              <div class=\"row-main\">\n                <label for=\"masterPassword\">\n                  {{ \"masterPass\" | i18n }}\n                  <strong class=\"sub-label text-{{ color }}\" *ngIf=\"text\">\n                    {{ text }}\n                  </strong>\n                </label>\n                <input\n                  id=\"masterPassword\"\n                  type=\"{{ showPassword ? 'text' : 'password' }}\"\n                  name=\"MasterPassword\"\n                  aria-describedby=\"masterPasswordHelp\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"masterPassword\"\n                  required\n                  appInputVerbatim\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"togglePassword(false)\"\n                  [attr.aria-pressed]=\"showPassword\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n\n            <app-password-strength\n              [password]=\"masterPassword\"\n              [email]=\"email\"\n              (passwordStrengthResult)=\"getStrengthResult($event)\"\n              (passwordScoreColor)=\"getPasswordScoreText($event)\"\n            >\n            </app-password-strength>\n          </div>\n        </div>\n        <div id=\"masterPasswordHelp\" class=\"box-footer\">\n          {{ \"masterPassDesc\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <div class=\"box-content-row-flex\">\n              <div class=\"row-main\">\n                <label for=\"masterPasswordRetype\">{{ \"reTypeMasterPass\" | i18n }}</label>\n                <input\n                  id=\"masterPasswordRetype\"\n                  type=\"password\"\n                  name=\"MasterPasswordRetype\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"masterPasswordRetype\"\n                  required\n                  appInputVerbatim\n                  autocomplete=\"new-password\"\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"togglePassword(true)\"\n                  [attr.aria-pressed]=\"showPassword\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"box last\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"hint\">{{ \"masterPassHint\" | i18n }}</label>\n            <input\n              id=\"hint\"\n              type=\"text\"\n              name=\"Hint\"\n              aria-describedby=\"hintHelp\"\n              [(ngModel)]=\"hint\"\n            />\n          </div>\n        </div>\n        <div id=\"hintHelp\" class=\"box-footer\">\n          {{ \"masterPassHintDesc\" | i18n }}\n        </div>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { SetPasswordComponent as BaseSetPasswordComponent } from \"@bitwarden/angular/components/set-password.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { OrganizationUserService } from \"@bitwarden/common/abstractions/organization-user/organization-user.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\n@Component({\n  selector: \"app-set-password\",\n  templateUrl: \"set-password.component.html\",\n})\nexport class SetPasswordComponent extends BaseSetPasswordComponent {\n  constructor(\n    apiService: ApiService,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    messagingService: MessagingService,\n    stateService: StateService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    platformUtilsService: PlatformUtilsService,\n    policyApiService: PolicyApiServiceAbstraction,\n    policyService: PolicyService,\n    router: Router,\n    syncService: SyncService,\n    route: ActivatedRoute,\n    organizationApiService: OrganizationApiServiceAbstraction,\n    organizationUserService: OrganizationUserService\n  ) {\n    super(\n      i18nService,\n      cryptoService,\n      messagingService,\n      passwordGenerationService,\n      platformUtilsService,\n      policyApiService,\n      policyService,\n      router,\n      apiService,\n      syncService,\n      route,\n      stateService,\n      organizationApiService,\n      organizationUserService\n    );\n  }\n}\n","import { Directive } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthResult } from \"@bitwarden/common/auth/models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { SsoLogInCredentials } from \"@bitwarden/common/auth/models/domain/log-in-credentials\";\nimport { SsoPreValidateResponse } from \"@bitwarden/common/auth/models/response/sso-pre-validate.response\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\n@Directive()\nexport class SsoComponent {\n  identifier: string;\n  loggingIn = false;\n\n  formPromise: Promise<AuthResult>;\n  initiateSsoFormPromise: Promise<SsoPreValidateResponse>;\n  onSuccessfulLogin: () => Promise<any>;\n  onSuccessfulLoginNavigate: () => Promise<any>;\n  onSuccessfulLoginTwoFactorNavigate: () => Promise<any>;\n  onSuccessfulLoginChangePasswordNavigate: () => Promise<any>;\n  onSuccessfulLoginForceResetNavigate: () => Promise<any>;\n\n  protected twoFactorRoute = \"2fa\";\n  protected successRoute = \"lock\";\n  protected changePasswordRoute = \"set-password\";\n  protected forcePasswordResetRoute = \"update-temp-password\";\n  protected clientId: string;\n  protected redirectUri: string;\n  protected state: string;\n  protected codeChallenge: string;\n\n  constructor(\n    protected authService: AuthService,\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected route: ActivatedRoute,\n    protected stateService: StateService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected apiService: ApiService,\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected environmentService: EnvironmentService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected logService: LogService\n  ) {}\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      if (qParams.code != null && qParams.state != null) {\n        const codeVerifier = await this.stateService.getSsoCodeVerifier();\n        const state = await this.stateService.getSsoState();\n        await this.stateService.setSsoCodeVerifier(null);\n        await this.stateService.setSsoState(null);\n        if (\n          qParams.code != null &&\n          codeVerifier != null &&\n          state != null &&\n          this.checkState(state, qParams.state)\n        ) {\n          await this.logIn(\n            qParams.code,\n            codeVerifier,\n            this.getOrgIdentifierFromState(qParams.state)\n          );\n        }\n      } else if (\n        qParams.clientId != null &&\n        qParams.redirectUri != null &&\n        qParams.state != null &&\n        qParams.codeChallenge != null\n      ) {\n        this.redirectUri = qParams.redirectUri;\n        this.state = qParams.state;\n        this.codeChallenge = qParams.codeChallenge;\n        this.clientId = qParams.clientId;\n      }\n    });\n  }\n\n  async submit(returnUri?: string, includeUserIdentifier?: boolean) {\n    if (this.identifier == null || this.identifier === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"ssoValidationFailed\"),\n        this.i18nService.t(\"ssoIdentifierRequired\")\n      );\n      return;\n    }\n\n    this.initiateSsoFormPromise = this.apiService.preValidateSso(this.identifier);\n    const response = await this.initiateSsoFormPromise;\n\n    const authorizeUrl = await this.buildAuthorizeUrl(\n      returnUri,\n      includeUserIdentifier,\n      response.token\n    );\n    this.platformUtilsService.launchUri(authorizeUrl, { sameWindow: true });\n  }\n\n  protected async buildAuthorizeUrl(\n    returnUri?: string,\n    includeUserIdentifier?: boolean,\n    token?: string\n  ): Promise<string> {\n    let codeChallenge = this.codeChallenge;\n    let state = this.state;\n\n    const passwordOptions: any = {\n      type: \"password\",\n      length: 64,\n      uppercase: true,\n      lowercase: true,\n      numbers: true,\n      special: false,\n    };\n\n    if (codeChallenge == null) {\n      const codeVerifier = await this.passwordGenerationService.generatePassword(passwordOptions);\n      const codeVerifierHash = await this.cryptoFunctionService.hash(codeVerifier, \"sha256\");\n      codeChallenge = Utils.fromBufferToUrlB64(codeVerifierHash);\n      await this.stateService.setSsoCodeVerifier(codeVerifier);\n    }\n\n    if (state == null) {\n      state = await this.passwordGenerationService.generatePassword(passwordOptions);\n      if (returnUri) {\n        state += `_returnUri='${returnUri}'`;\n      }\n    }\n\n    // Add Organization Identifier to state\n    state += `_identifier=${this.identifier}`;\n\n    // Save state (regardless of new or existing)\n    await this.stateService.setSsoState(state);\n\n    let authorizeUrl =\n      this.environmentService.getIdentityUrl() +\n      \"/connect/authorize?\" +\n      \"client_id=\" +\n      this.clientId +\n      \"&redirect_uri=\" +\n      encodeURIComponent(this.redirectUri) +\n      \"&\" +\n      \"response_type=code&scope=api offline_access&\" +\n      \"state=\" +\n      state +\n      \"&code_challenge=\" +\n      codeChallenge +\n      \"&\" +\n      \"code_challenge_method=S256&response_mode=query&\" +\n      \"domain_hint=\" +\n      encodeURIComponent(this.identifier) +\n      \"&ssoToken=\" +\n      encodeURIComponent(token);\n\n    if (includeUserIdentifier) {\n      const userIdentifier = await this.apiService.getSsoUserIdentifier();\n      authorizeUrl += `&user_identifier=${encodeURIComponent(userIdentifier)}`;\n    }\n\n    return authorizeUrl;\n  }\n\n  private async logIn(code: string, codeVerifier: string, orgIdFromState: string) {\n    this.loggingIn = true;\n    try {\n      const credentials = new SsoLogInCredentials(\n        code,\n        codeVerifier,\n        this.redirectUri,\n        orgIdFromState\n      );\n      this.formPromise = this.authService.logIn(credentials);\n      const response = await this.formPromise;\n      if (response.requiresTwoFactor) {\n        if (this.onSuccessfulLoginTwoFactorNavigate != null) {\n          this.onSuccessfulLoginTwoFactorNavigate();\n        } else {\n          this.router.navigate([this.twoFactorRoute], {\n            queryParams: {\n              identifier: orgIdFromState,\n              sso: \"true\",\n            },\n          });\n        }\n      } else if (response.resetMasterPassword) {\n        if (this.onSuccessfulLoginChangePasswordNavigate != null) {\n          this.onSuccessfulLoginChangePasswordNavigate();\n        } else {\n          this.router.navigate([this.changePasswordRoute], {\n            queryParams: {\n              identifier: orgIdFromState,\n            },\n          });\n        }\n      } else if (response.forcePasswordReset !== ForceResetPasswordReason.None) {\n        if (this.onSuccessfulLoginForceResetNavigate != null) {\n          this.onSuccessfulLoginForceResetNavigate();\n        } else {\n          this.router.navigate([this.forcePasswordResetRoute]);\n        }\n      } else {\n        const disableFavicon = await this.stateService.getDisableFavicon();\n        await this.stateService.setDisableFavicon(!!disableFavicon);\n        if (this.onSuccessfulLogin != null) {\n          this.onSuccessfulLogin();\n        }\n        if (this.onSuccessfulLoginNavigate != null) {\n          this.onSuccessfulLoginNavigate();\n        } else {\n          this.router.navigate([this.successRoute]);\n        }\n      }\n    } catch (e) {\n      this.logService.error(e);\n\n      // TODO: Key Connector Service should pass this error message to the logout callback instead of displaying here\n      if (e.message === \"Key Connector error\") {\n        this.platformUtilsService.showToast(\n          \"error\",\n          null,\n          this.i18nService.t(\"ssoKeyConnectorError\")\n        );\n      }\n    }\n    this.loggingIn = false;\n  }\n\n  private getOrgIdentifierFromState(state: string): string {\n    if (state === null || state === undefined) {\n      return null;\n    }\n\n    const stateSplit = state.split(\"_identifier=\");\n    return stateSplit.length > 1 ? stateSplit[1] : null;\n  }\n\n  private checkState(state: string, checkState: string): boolean {\n    if (state === null || state === undefined) {\n      return false;\n    }\n    if (checkState === null || checkState === undefined) {\n      return false;\n    }\n\n    const stateSplit = state.split(\"_identifier=\");\n    const checkStateSplit = checkState.split(\"_identifier=\");\n    return stateSplit[0] === checkStateSplit[0];\n  }\n}\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\n\nimport { SsoComponent as BaseSsoComponent } from \"@bitwarden/angular/auth/components/sso.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\n@Component({\n  selector: \"app-sso\",\n  templateUrl: \"sso.component.html\",\n})\nexport class SsoComponent extends BaseSsoComponent {\n  constructor(\n    authService: AuthService,\n    router: Router,\n    i18nService: I18nService,\n    route: ActivatedRoute,\n    stateService: StateService,\n    platformUtilsService: PlatformUtilsService,\n    apiService: ApiService,\n    cryptoFunctionService: CryptoFunctionService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    syncService: SyncService,\n    environmentService: EnvironmentService,\n    logService: LogService,\n    private vaultTimeoutService: VaultTimeoutService\n  ) {\n    super(\n      authService,\n      router,\n      i18nService,\n      route,\n      stateService,\n      platformUtilsService,\n      apiService,\n      cryptoFunctionService,\n      environmentService,\n      passwordGenerationService,\n      logService\n    );\n\n    const url = this.environmentService.getWebVaultUrl();\n\n    this.redirectUri = url + \"/sso-connector.html\";\n    this.clientId = \"browser\";\n\n    super.onSuccessfulLogin = async () => {\n      await syncService.fullSync(true);\n\n      // If the vault is unlocked then this will clear keys from memory, which we don't want to do\n      if ((await this.authService.getAuthStatus()) !== AuthenticationStatus.Unlocked) {\n        BrowserApi.reloadOpenWindows();\n      }\n\n      const thisWindow = window.open(\"\", \"_self\");\n      thisWindow.close();\n    };\n  }\n}\n","import { TwoFactorProviderType } from \"../enums/two-factor-provider-type\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\nexport interface TwoFactorProviderDetails {\n  type: TwoFactorProviderType;\n  name: string;\n  description: string;\n  priority: number;\n  sort: number;\n  premium: boolean;\n}\n\nexport abstract class TwoFactorService {\n  init: () => void;\n  getSupportedProviders: (win: Window) => TwoFactorProviderDetails[];\n  getDefaultProvider: (webAuthnSupported: boolean) => TwoFactorProviderType;\n  setSelectedProvider: (type: TwoFactorProviderType) => void;\n  clearSelectedProvider: () => void;\n\n  setProviders: (response: IdentityTwoFactorResponse) => void;\n  clearProviders: () => void;\n  getProviders: () => Map<TwoFactorProviderType, { [key: string]: string }>;\n}\n","import { Directive, EventEmitter, OnInit, Output } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"@bitwarden/common/auth/enums/two-factor-provider-type\";\n\n@Directive()\nexport class TwoFactorOptionsComponent implements OnInit {\n  @Output() onProviderSelected = new EventEmitter<TwoFactorProviderType>();\n  @Output() onRecoverSelected = new EventEmitter();\n\n  providers: any[] = [];\n\n  constructor(\n    protected twoFactorService: TwoFactorService,\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected win: Window\n  ) {}\n\n  ngOnInit() {\n    this.providers = this.twoFactorService.getSupportedProviders(this.win);\n  }\n\n  choose(p: any) {\n    this.onProviderSelected.emit(p.type);\n  }\n\n  recover() {\n    this.platformUtilsService.launchUri(\"https://bitwarden.com/help/lost-two-step-device/\");\n    this.onRecoverSelected.emit();\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/2fa\">{{ \"close\" | i18n }}</button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"twoStepOptions\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <button\n        type=\"button\"\n        appStopClick\n        *ngFor=\"let p of providers\"\n        class=\"box-content-row\"\n        (click)=\"choose(p)\"\n      >\n        <span class=\"text\">{{ p.name }}</span>\n        <span class=\"detail\">{{ p.description }}</span>\n      </button>\n      <button type=\"button\" appStopClick class=\"box-content-row\" (click)=\"recover()\">\n        <span class=\"text\">{{ \"recoveryCodeTitle\" | i18n }}</span>\n        <span class=\"detail\">{{ \"recoveryCodeDesc\" | i18n }}</span>\n      </button>\n    </div>\n  </div>\n</main>\n","import { Component } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { TwoFactorOptionsComponent as BaseTwoFactorOptionsComponent } from \"@bitwarden/angular/auth/components/two-factor-options.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\n\n@Component({\n  selector: \"app-two-factor-options\",\n  templateUrl: \"two-factor-options.component.html\",\n})\nexport class TwoFactorOptionsComponent extends BaseTwoFactorOptionsComponent {\n  constructor(\n    twoFactorService: TwoFactorService,\n    router: Router,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService\n  ) {\n    super(twoFactorService, router, i18nService, platformUtilsService, window);\n  }\n\n  choose(p: any) {\n    super.choose(p);\n    this.twoFactorService.setSelectedProvider(p.type);\n    this.router.navigate([\"2fa\"]);\n  }\n}\n","export enum TwoFactorProviderType {\n  Authenticator = 0,\n  Email = 1,\n  Duo = 2,\n  Yubikey = 3,\n  U2f = 4,\n  Remember = 5,\n  OrganizationDuo = 6,\n  WebAuthn = 7,\n}\n","import { TwoFactorProviderType } from \"../../../enums/two-factor-provider-type\";\n\nexport class TokenTwoFactorRequest {\n  constructor(\n    public provider: TwoFactorProviderType = null,\n    public token: string = null,\n    public remember: boolean = false\n  ) {}\n}\n","import { SecretVerificationRequest } from \"./secret-verification.request\";\n\nexport class TwoFactorEmailRequest extends SecretVerificationRequest {\n  email: string;\n  deviceIdentifier: string;\n  authRequestId: string;\n}\n","import { I18nService } from \"../../abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport {\n  TwoFactorProviderDetails,\n  TwoFactorService as TwoFactorServiceAbstraction,\n} from \"../abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"../enums/two-factor-provider-type\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\nexport const TwoFactorProviders: Partial<Record<TwoFactorProviderType, TwoFactorProviderDetails>> =\n  {\n    [TwoFactorProviderType.Authenticator]: {\n      type: TwoFactorProviderType.Authenticator,\n      name: null as string,\n      description: null as string,\n      priority: 1,\n      sort: 1,\n      premium: false,\n    },\n    [TwoFactorProviderType.Yubikey]: {\n      type: TwoFactorProviderType.Yubikey,\n      name: null as string,\n      description: null as string,\n      priority: 3,\n      sort: 2,\n      premium: true,\n    },\n    [TwoFactorProviderType.Duo]: {\n      type: TwoFactorProviderType.Duo,\n      name: \"Duo\",\n      description: null as string,\n      priority: 2,\n      sort: 3,\n      premium: true,\n    },\n    [TwoFactorProviderType.OrganizationDuo]: {\n      type: TwoFactorProviderType.OrganizationDuo,\n      name: \"Duo (Organization)\",\n      description: null as string,\n      priority: 10,\n      sort: 4,\n      premium: false,\n    },\n    [TwoFactorProviderType.Email]: {\n      type: TwoFactorProviderType.Email,\n      name: null as string,\n      description: null as string,\n      priority: 0,\n      sort: 6,\n      premium: false,\n    },\n    [TwoFactorProviderType.WebAuthn]: {\n      type: TwoFactorProviderType.WebAuthn,\n      name: null as string,\n      description: null as string,\n      priority: 4,\n      sort: 5,\n      premium: true,\n    },\n  };\n\nexport class TwoFactorService implements TwoFactorServiceAbstraction {\n  private twoFactorProvidersData: Map<TwoFactorProviderType, { [key: string]: string }>;\n  private selectedTwoFactorProviderType: TwoFactorProviderType = null;\n\n  constructor(\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  init() {\n    TwoFactorProviders[TwoFactorProviderType.Email].name = this.i18nService.t(\"emailTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Email].description = this.i18nService.t(\"emailDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Authenticator].name =\n      this.i18nService.t(\"authenticatorAppTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Authenticator].description =\n      this.i18nService.t(\"authenticatorAppDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Duo].description = this.i18nService.t(\"duoDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].name =\n      \"Duo (\" + this.i18nService.t(\"organization\") + \")\";\n    TwoFactorProviders[TwoFactorProviderType.OrganizationDuo].description =\n      this.i18nService.t(\"duoOrganizationDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.WebAuthn].name = this.i18nService.t(\"webAuthnTitle\");\n    TwoFactorProviders[TwoFactorProviderType.WebAuthn].description =\n      this.i18nService.t(\"webAuthnDesc\");\n\n    TwoFactorProviders[TwoFactorProviderType.Yubikey].name = this.i18nService.t(\"yubiKeyTitle\");\n    TwoFactorProviders[TwoFactorProviderType.Yubikey].description =\n      this.i18nService.t(\"yubiKeyDesc\");\n  }\n\n  getSupportedProviders(win: Window): TwoFactorProviderDetails[] {\n    const providers: any[] = [];\n    if (this.twoFactorProvidersData == null) {\n      return providers;\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.OrganizationDuo) &&\n      this.platformUtilsService.supportsDuo()\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.OrganizationDuo]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Authenticator)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Authenticator]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Yubikey)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Yubikey]);\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.Duo) &&\n      this.platformUtilsService.supportsDuo()\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Duo]);\n    }\n\n    if (\n      this.twoFactorProvidersData.has(TwoFactorProviderType.WebAuthn) &&\n      this.platformUtilsService.supportsWebAuthn(win)\n    ) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.WebAuthn]);\n    }\n\n    if (this.twoFactorProvidersData.has(TwoFactorProviderType.Email)) {\n      providers.push(TwoFactorProviders[TwoFactorProviderType.Email]);\n    }\n\n    return providers;\n  }\n\n  getDefaultProvider(webAuthnSupported: boolean): TwoFactorProviderType {\n    if (this.twoFactorProvidersData == null) {\n      return null;\n    }\n\n    if (\n      this.selectedTwoFactorProviderType != null &&\n      this.twoFactorProvidersData.has(this.selectedTwoFactorProviderType)\n    ) {\n      return this.selectedTwoFactorProviderType;\n    }\n\n    let providerType: TwoFactorProviderType = null;\n    let providerPriority = -1;\n    this.twoFactorProvidersData.forEach((_value, type) => {\n      const provider = (TwoFactorProviders as any)[type];\n      if (provider != null && provider.priority > providerPriority) {\n        if (type === TwoFactorProviderType.WebAuthn && !webAuthnSupported) {\n          return;\n        }\n\n        providerType = type;\n        providerPriority = provider.priority;\n      }\n    });\n\n    return providerType;\n  }\n\n  setSelectedProvider(type: TwoFactorProviderType) {\n    this.selectedTwoFactorProviderType = type;\n  }\n\n  clearSelectedProvider() {\n    this.selectedTwoFactorProviderType = null;\n  }\n\n  setProviders(response: IdentityTwoFactorResponse) {\n    this.twoFactorProvidersData = response.twoFactorProviders2;\n  }\n\n  clearProviders() {\n    this.twoFactorProvidersData = null;\n  }\n\n  getProviders() {\n    return this.twoFactorProvidersData;\n  }\n}\n","import { I18nService } from \"../abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\n\nexport class WebAuthnIFrame {\n  private iframe: HTMLIFrameElement = null;\n  private connectorLink: HTMLAnchorElement;\n  private parseFunction = this.parseMessage.bind(this);\n\n  constructor(\n    private win: Window,\n    private webVaultUrl: string,\n    private webAuthnNewTab: boolean,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private successCallback: Function, // eslint-disable-line\n    private errorCallback: Function, // eslint-disable-line\n    private infoCallback: Function // eslint-disable-line\n  ) {\n    this.connectorLink = win.document.createElement(\"a\");\n  }\n\n  init(data: any): void {\n    const params = new URLSearchParams({\n      data: this.base64Encode(JSON.stringify(data)),\n      parent: encodeURIComponent(this.win.document.location.href),\n      btnText: encodeURIComponent(this.i18nService.t(\"webAuthnAuthenticate\")),\n      v: \"1\",\n    });\n\n    if (this.webAuthnNewTab) {\n      // Firefox fallback which opens the webauthn page in a new tab\n      params.append(\"locale\", this.i18nService.translationLocale);\n      this.platformUtilsService.launchUri(\n        `${this.webVaultUrl}/webauthn-fallback-connector.html?${params}`\n      );\n    } else {\n      this.connectorLink.href = `${this.webVaultUrl}/webauthn-connector.html?${params}`;\n      this.iframe = this.win.document.getElementById(\"webauthn_iframe\") as HTMLIFrameElement;\n      this.iframe.allow = \"publickey-credentials-get \" + new URL(this.webVaultUrl).origin;\n      this.iframe.src = this.connectorLink.href;\n\n      this.win.addEventListener(\"message\", this.parseFunction, false);\n    }\n  }\n\n  stop() {\n    this.sendMessage(\"stop\");\n  }\n\n  start() {\n    this.sendMessage(\"start\");\n  }\n\n  sendMessage(message: any) {\n    if (!this.iframe || !this.iframe.src || !this.iframe.contentWindow) {\n      return;\n    }\n\n    this.iframe.contentWindow.postMessage(message, this.iframe.src);\n  }\n\n  base64Encode(str: string): string {\n    return btoa(\n      encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {\n        return String.fromCharCode((\"0x\" + p1) as any);\n      })\n    );\n  }\n\n  cleanup() {\n    this.win.removeEventListener(\"message\", this.parseFunction, false);\n  }\n\n  private parseMessage(event: MessageEvent) {\n    if (!this.validMessage(event)) {\n      return;\n    }\n\n    const parts: string[] = event.data.split(\"|\");\n    if (parts[0] === \"success\" && this.successCallback) {\n      this.successCallback(parts[1]);\n    } else if (parts[0] === \"error\" && this.errorCallback) {\n      this.errorCallback(parts[1]);\n    } else if (parts[0] === \"info\" && this.infoCallback) {\n      this.infoCallback(parts[1]);\n    }\n  }\n\n  private validMessage(event: MessageEvent) {\n    if (\n      event.origin == null ||\n      event.origin === \"\" ||\n      event.origin !== (this.connectorLink as any).origin ||\n      event.data == null ||\n      typeof event.data !== \"string\"\n    ) {\n      return false;\n    }\n\n    return (\n      event.data.indexOf(\"success|\") === 0 ||\n      event.data.indexOf(\"error|\") === 0 ||\n      event.data.indexOf(\"info|\") === 0\n    );\n  }\n}\n","import { Directive, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport * as DuoWebSDK from \"duo_web_sdk\";\nimport { first } from \"rxjs/operators\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"@bitwarden/common/auth/enums/two-factor-provider-type\";\nimport { AuthResult } from \"@bitwarden/common/auth/models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { TokenTwoFactorRequest } from \"@bitwarden/common/auth/models/request/identity-token/token-two-factor.request\";\nimport { TwoFactorEmailRequest } from \"@bitwarden/common/auth/models/request/two-factor-email.request\";\nimport { TwoFactorProviders } from \"@bitwarden/common/auth/services/two-factor.service\";\nimport { WebAuthnIFrame } from \"@bitwarden/common/auth/webauthn-iframe\";\n\nimport { CaptchaProtectedComponent } from \"./captcha-protected.component\";\n\n@Directive()\nexport class TwoFactorComponent extends CaptchaProtectedComponent implements OnInit, OnDestroy {\n  token = \"\";\n  remember = false;\n  webAuthnReady = false;\n  webAuthnNewTab = false;\n  providers = TwoFactorProviders;\n  providerType = TwoFactorProviderType;\n  selectedProviderType: TwoFactorProviderType = TwoFactorProviderType.Authenticator;\n  webAuthnSupported = false;\n  webAuthn: WebAuthnIFrame = null;\n  title = \"\";\n  twoFactorEmail: string = null;\n  formPromise: Promise<any>;\n  emailPromise: Promise<any>;\n  identifier: string = null;\n  onSuccessfulLogin: () => Promise<any>;\n  onSuccessfulLoginNavigate: () => Promise<any>;\n\n  protected loginRoute = \"login\";\n  protected successRoute = \"vault\";\n\n  constructor(\n    protected authService: AuthService,\n    protected router: Router,\n    protected i18nService: I18nService,\n    protected apiService: ApiService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected win: Window,\n    protected environmentService: EnvironmentService,\n    protected stateService: StateService,\n    protected route: ActivatedRoute,\n    protected logService: LogService,\n    protected twoFactorService: TwoFactorService,\n    protected appIdService: AppIdService,\n    protected loginService: LoginService\n  ) {\n    super(environmentService, i18nService, platformUtilsService);\n    this.webAuthnSupported = this.platformUtilsService.supportsWebAuthn(win);\n  }\n\n  async ngOnInit() {\n    if (!this.authing || this.twoFactorService.getProviders() == null) {\n      this.router.navigate([this.loginRoute]);\n      return;\n    }\n\n    this.route.queryParams.pipe(first()).subscribe((qParams) => {\n      if (qParams.identifier != null) {\n        this.identifier = qParams.identifier;\n      }\n    });\n\n    if (this.needsLock) {\n      this.successRoute = \"lock\";\n    }\n\n    if (this.win != null && this.webAuthnSupported) {\n      const webVaultUrl = this.environmentService.getWebVaultUrl();\n      this.webAuthn = new WebAuthnIFrame(\n        this.win,\n        webVaultUrl,\n        this.webAuthnNewTab,\n        this.platformUtilsService,\n        this.i18nService,\n        (token: string) => {\n          this.token = token;\n          this.submit();\n        },\n        (error: string) => {\n          this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), error);\n        },\n        (info: string) => {\n          if (info === \"ready\") {\n            this.webAuthnReady = true;\n          }\n        }\n      );\n    }\n\n    this.selectedProviderType = this.twoFactorService.getDefaultProvider(this.webAuthnSupported);\n    await this.init();\n  }\n\n  ngOnDestroy(): void {\n    this.cleanupWebAuthn();\n    this.webAuthn = null;\n  }\n\n  async init() {\n    if (this.selectedProviderType == null) {\n      this.title = this.i18nService.t(\"loginUnavailable\");\n      return;\n    }\n\n    this.cleanupWebAuthn();\n    this.title = (TwoFactorProviders as any)[this.selectedProviderType].name;\n    const providerData = this.twoFactorService.getProviders().get(this.selectedProviderType);\n    switch (this.selectedProviderType) {\n      case TwoFactorProviderType.WebAuthn:\n        if (!this.webAuthnNewTab) {\n          setTimeout(() => {\n            this.authWebAuthn();\n          }, 500);\n        }\n        break;\n      case TwoFactorProviderType.Duo:\n      case TwoFactorProviderType.OrganizationDuo:\n        setTimeout(() => {\n          DuoWebSDK.init({\n            iframe: undefined,\n            host: providerData.Host,\n            sig_request: providerData.Signature,\n            submit_callback: async (f: HTMLFormElement) => {\n              const sig = f.querySelector('input[name=\"sig_response\"]') as HTMLInputElement;\n              if (sig != null) {\n                this.token = sig.value;\n                await this.submit();\n              }\n            },\n          });\n        }, 0);\n        break;\n      case TwoFactorProviderType.Email:\n        this.twoFactorEmail = providerData.Email;\n        if (this.twoFactorService.getProviders().size > 1) {\n          await this.sendEmail(false);\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  async submit() {\n    await this.setupCaptcha();\n\n    if (this.token == null || this.token === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"verificationCodeRequired\")\n      );\n      return;\n    }\n\n    if (this.selectedProviderType === TwoFactorProviderType.WebAuthn) {\n      if (this.webAuthn != null) {\n        this.webAuthn.stop();\n      } else {\n        return;\n      }\n    } else if (\n      this.selectedProviderType === TwoFactorProviderType.Email ||\n      this.selectedProviderType === TwoFactorProviderType.Authenticator\n    ) {\n      this.token = this.token.replace(\" \", \"\").trim();\n    }\n\n    try {\n      await this.doSubmit();\n    } catch {\n      if (this.selectedProviderType === TwoFactorProviderType.WebAuthn && this.webAuthn != null) {\n        this.webAuthn.start();\n      }\n    }\n  }\n\n  async doSubmit() {\n    this.formPromise = this.authService.logInTwoFactor(\n      new TokenTwoFactorRequest(this.selectedProviderType, this.token, this.remember),\n      this.captchaToken\n    );\n    const response: AuthResult = await this.formPromise;\n    const disableFavicon = await this.stateService.getDisableFavicon();\n    await this.stateService.setDisableFavicon(!!disableFavicon);\n    if (this.handleCaptchaRequired(response)) {\n      return;\n    }\n    if (this.onSuccessfulLogin != null) {\n      this.loginService.clearValues();\n      this.onSuccessfulLogin();\n    }\n    if (response.resetMasterPassword) {\n      this.successRoute = \"set-password\";\n    }\n    if (response.forcePasswordReset !== ForceResetPasswordReason.None) {\n      this.successRoute = \"update-temp-password\";\n    }\n    if (this.onSuccessfulLoginNavigate != null) {\n      this.loginService.clearValues();\n      this.onSuccessfulLoginNavigate();\n    } else {\n      this.loginService.clearValues();\n      this.router.navigate([this.successRoute], {\n        queryParams: {\n          identifier: this.identifier,\n        },\n      });\n    }\n  }\n\n  async sendEmail(doToast: boolean) {\n    if (this.selectedProviderType !== TwoFactorProviderType.Email) {\n      return;\n    }\n\n    if (this.emailPromise != null) {\n      return;\n    }\n\n    try {\n      const request = new TwoFactorEmailRequest();\n      request.email = this.authService.email;\n      request.masterPasswordHash = this.authService.masterPasswordHash;\n      request.deviceIdentifier = await this.appIdService.getAppId();\n      request.authRequestAccessCode = this.authService.accessCode;\n      request.authRequestId = this.authService.authRequestId;\n      this.emailPromise = this.apiService.postTwoFactorEmail(request);\n      await this.emailPromise;\n      if (doToast) {\n        this.platformUtilsService.showToast(\n          \"success\",\n          null,\n          this.i18nService.t(\"verificationCodeEmailSent\", this.twoFactorEmail)\n        );\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    this.emailPromise = null;\n  }\n\n  authWebAuthn() {\n    const providerData = this.twoFactorService.getProviders().get(this.selectedProviderType);\n\n    if (!this.webAuthnSupported || this.webAuthn == null) {\n      return;\n    }\n\n    this.webAuthn.init(providerData);\n  }\n\n  private cleanupWebAuthn() {\n    if (this.webAuthn != null) {\n      this.webAuthn.stop();\n      this.webAuthn.cleanup();\n    }\n  }\n\n  get authing(): boolean {\n    return (\n      this.authService.authingWithPassword() ||\n      this.authService.authingWithSso() ||\n      this.authService.authingWithUserApiKey() ||\n      this.authService.authingWithPasswordless()\n    );\n  }\n\n  get needsLock(): boolean {\n    return this.authService.authingWithSso() || this.authService.authingWithUserApiKey();\n  }\n}\n","export interface MessageBase {\n  command: string;\n}\n\nexport abstract class BroadcasterService {\n  send: (message: MessageBase, id?: string) => void;\n  subscribe: (id: string, messageCallback: (message: MessageBase) => void) => void;\n  unsubscribe: (id: string) => void;\n}\n","<form id=\"two-factor-page\" #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/login\">{{ \"back\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button\n        type=\"submit\"\n        [disabled]=\"form.loading\"\n        *ngIf=\"\n          selectedProviderType != null &&\n          selectedProviderType !== providerType.Duo &&\n          selectedProviderType !== providerType.OrganizationDuo &&\n          (selectedProviderType !== providerType.WebAuthn || form.loading)\n        \"\n      >\n        <span [hidden]=\"form.loading\">{{ \"continue\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <ng-container\n      *ngIf=\"\n        selectedProviderType === providerType.Authenticator ||\n        selectedProviderType === providerType.Email\n      \"\n    >\n      <div class=\"content text-center\">\n        <span *ngIf=\"selectedProviderType === providerType.Authenticator\">\n          {{ \"enterVerificationCodeApp\" | i18n }}\n        </span>\n        <span *ngIf=\"selectedProviderType === providerType.Email\">\n          {{ \"enterVerificationCodeEmail\" | i18n : twoFactorEmail }}\n        </span>\n      </div>\n      <div class=\"box first\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"code\">{{ \"verificationCode\" | i18n }}</label>\n            <input\n              id=\"code\"\n              type=\"text\"\n              name=\"Code\"\n              [(ngModel)]=\"token\"\n              required\n              appAutofocus\n              inputmode=\"tel\"\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"selectedProviderType === providerType.Yubikey\">\n      <div class=\"content text-center\">\n        <p class=\"text-center\">{{ \"insertYubiKey\" | i18n }}</p>\n        <img src=\"../../popup/images/yubikey.jpg\" class=\"img-rounded img-responsive\" alt=\"\" />\n      </div>\n      <div class=\"box first\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"code\" class=\"sr-only\">{{ \"verificationCode\" | i18n }}</label>\n            <input\n              id=\"code\"\n              type=\"password\"\n              name=\"Code\"\n              [(ngModel)]=\"token\"\n              required\n              appAutofocus\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"selectedProviderType === providerType.WebAuthn && !webAuthnNewTab\">\n      <div id=\"web-authn-frame\">\n        <iframe id=\"webauthn_iframe\"></iframe>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"selectedProviderType === providerType.WebAuthn && webAuthnNewTab\">\n      <div class=\"content text-center\" *ngIf=\"webAuthnNewTab\">\n        <p class=\"text-center\">{{ \"webAuthnNewTab\" | i18n }}</p>\n        <button type=\"button\" class=\"btn primary block\" (click)=\"authWebAuthn()\" appStopClick>\n          {{ \"webAuthnNewTabOpen\" | i18n }}\n        </button>\n      </div>\n    </ng-container>\n    <ng-container\n      *ngIf=\"\n        selectedProviderType === providerType.Duo ||\n        selectedProviderType === providerType.OrganizationDuo\n      \"\n    >\n      <div id=\"duo-frame\"><iframe id=\"duo_iframe\"></iframe></div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"remember\">{{ \"rememberMe\" | i18n }}</label>\n            <input id=\"remember\" type=\"checkbox\" name=\"Remember\" [(ngModel)]=\"remember\" />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <div class=\"box-content-row\" [hidden]=\"!showCaptcha()\">\n      <iframe id=\"hcaptcha_iframe\" height=\"80\"></iframe>\n    </div>\n    <div class=\"content\" *ngIf=\"selectedProviderType == null\">\n      <p class=\"text-center\">{{ \"noTwoStepProviders\" | i18n }}</p>\n      <p class=\"text-center\">{{ \"noTwoStepProviders2\" | i18n }}</p>\n    </div>\n    <div class=\"content no-vpad\" *ngIf=\"selectedProviderType != null\">\n      <p class=\"text-center\">\n        <button type=\"button\" appStopClick (click)=\"anotherMethod()\">\n          {{ \"useAnotherTwoStepMethod\" | i18n }}\n        </button>\n      </p>\n      <p *ngIf=\"selectedProviderType === providerType.Email\" class=\"text-center\">\n        <button type=\"button\" appStopClick (click)=\"sendEmail(true)\" [appApiAction]=\"emailPromise\">\n          {{ \"sendVerificationCodeEmailAgain\" | i18n }}\n        </button>\n      </p>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { TwoFactorComponent as BaseTwoFactorComponent } from \"@bitwarden/angular/auth/components/two-factor.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { LoginService } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"@bitwarden/common/auth/enums/two-factor-provider-type\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { PopupUtilsService } from \"../../popup/services/popup-utils.service\";\n\nconst BroadcasterSubscriptionId = \"TwoFactorComponent\";\n\n@Component({\n  selector: \"app-two-factor\",\n  templateUrl: \"two-factor.component.html\",\n})\nexport class TwoFactorComponent extends BaseTwoFactorComponent {\n  showNewWindowMessage = false;\n\n  constructor(\n    authService: AuthService,\n    router: Router,\n    i18nService: I18nService,\n    apiService: ApiService,\n    platformUtilsService: PlatformUtilsService,\n    private syncService: SyncService,\n    environmentService: EnvironmentService,\n    private broadcasterService: BroadcasterService,\n    private popupUtilsService: PopupUtilsService,\n    stateService: StateService,\n    route: ActivatedRoute,\n    private messagingService: MessagingService,\n    logService: LogService,\n    twoFactorService: TwoFactorService,\n    appIdService: AppIdService,\n    loginService: LoginService\n  ) {\n    super(\n      authService,\n      router,\n      i18nService,\n      apiService,\n      platformUtilsService,\n      window,\n      environmentService,\n      stateService,\n      route,\n      logService,\n      twoFactorService,\n      appIdService,\n      loginService\n    );\n    super.onSuccessfulLogin = () => {\n      this.loginService.clearValues();\n      return syncService.fullSync(true);\n    };\n    super.successRoute = \"/tabs/vault\";\n    // FIXME: Chromium 110 has broken WebAuthn support in extensions via an iframe\n    this.webAuthnNewTab = true;\n  }\n\n  async ngOnInit() {\n    if (this.route.snapshot.paramMap.has(\"webAuthnResponse\")) {\n      // WebAuthn fallback response\n      this.selectedProviderType = TwoFactorProviderType.WebAuthn;\n      this.token = this.route.snapshot.paramMap.get(\"webAuthnResponse\");\n      super.onSuccessfulLogin = async () => {\n        this.syncService.fullSync(true);\n        this.messagingService.send(\"reloadPopup\");\n        window.close();\n      };\n      this.remember = this.route.snapshot.paramMap.get(\"remember\") === \"true\";\n      await this.doSubmit();\n      return;\n    }\n\n    await super.ngOnInit();\n    if (this.selectedProviderType == null) {\n      return;\n    }\n\n    // WebAuthn prompt appears inside the popup on linux, and requires a larger popup width\n    // than usual to avoid cutting off the dialog.\n    if (this.selectedProviderType === TwoFactorProviderType.WebAuthn && (await this.isLinux())) {\n      document.body.classList.add(\"linux-webauthn\");\n    }\n\n    if (\n      this.selectedProviderType === TwoFactorProviderType.Email &&\n      this.popupUtilsService.inPopup(window)\n    ) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"popup2faCloseMessage\"),\n        null,\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\")\n      );\n      if (confirmed) {\n        this.popupUtilsService.popOut(window);\n      }\n    }\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      if (qParams.sso === \"true\") {\n        super.onSuccessfulLogin = () => {\n          BrowserApi.reloadOpenWindows();\n          const thisWindow = window.open(\"\", \"_self\");\n          thisWindow.close();\n          return this.syncService.fullSync(true);\n        };\n      }\n    });\n  }\n\n  async ngOnDestroy() {\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n\n    if (this.selectedProviderType === TwoFactorProviderType.WebAuthn && (await this.isLinux())) {\n      document.body.classList.remove(\"linux-webauthn\");\n    }\n    super.ngOnDestroy();\n  }\n\n  anotherMethod() {\n    this.router.navigate([\"2fa-options\"]);\n  }\n\n  async isLinux() {\n    return (await BrowserApi.getPlatformInfo()).os === \"linux\";\n  }\n}\n","export enum VerificationType {\n  MasterPassword = 0,\n  OTP = 1,\n}\n","import { SecretVerificationRequest } from \"./secret-verification.request\";\n\nexport class PasswordRequest extends SecretVerificationRequest {\n  newMasterPasswordHash: string;\n  masterPasswordHint: string;\n  key: string;\n}\n","export class OrganizationUserResetPasswordRequest {\n  newMasterPasswordHash: string;\n  key: string;\n}\n","import { OrganizationUserResetPasswordRequest } from \"../../../abstractions/organization-user/requests\";\n\nexport class UpdateTempPasswordRequest extends OrganizationUserResetPasswordRequest {\n  masterPasswordHint: string;\n}\n","import { SecretVerificationRequest } from \"../../auth/models/request/secret-verification.request\";\nimport { Verification } from \"../../types/verification\";\n\nexport abstract class UserVerificationService {\n  buildRequest: <T extends SecretVerificationRequest>(\n    verification: Verification,\n    requestClass?: new () => T,\n    alreadyHashed?: boolean\n  ) => Promise<T>;\n  verifyUser: (verification: Verification) => Promise<boolean>;\n  requestOTP: () => Promise<void>;\n}\n","import { Directive } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { UserVerificationService } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { MasterPasswordPolicyOptions } from \"@bitwarden/common/admin-console/models/domain/master-password-policy-options\";\nimport { VerificationType } from \"@bitwarden/common/auth/enums/verification-type\";\nimport { ForceResetPasswordReason } from \"@bitwarden/common/auth/models/domain/force-reset-password-reason\";\nimport { PasswordRequest } from \"@bitwarden/common/auth/models/request/password.request\";\nimport { UpdateTempPasswordRequest } from \"@bitwarden/common/auth/models/request/update-temp-password.request\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { Verification } from \"@bitwarden/common/types/verification\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { ChangePasswordComponent as BaseChangePasswordComponent } from \"./change-password.component\";\n\n@Directive()\nexport class UpdateTempPasswordComponent extends BaseChangePasswordComponent {\n  hint: string;\n  key: string;\n  enforcedPolicyOptions: MasterPasswordPolicyOptions;\n  showPassword = false;\n  reason: ForceResetPasswordReason = ForceResetPasswordReason.None;\n  verification: Verification = {\n    type: VerificationType.MasterPassword,\n    secret: \"\",\n  };\n\n  onSuccessfulChangePassword: () => Promise<any>;\n\n  get requireCurrentPassword(): boolean {\n    return this.reason === ForceResetPasswordReason.WeakMasterPassword;\n  }\n\n  constructor(\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    policyService: PolicyService,\n    cryptoService: CryptoService,\n    messagingService: MessagingService,\n    private apiService: ApiService,\n    stateService: StateService,\n    private syncService: SyncService,\n    private logService: LogService,\n    private userVerificationService: UserVerificationService,\n    private router: Router\n  ) {\n    super(\n      i18nService,\n      cryptoService,\n      messagingService,\n      passwordGenerationService,\n      platformUtilsService,\n      policyService,\n      stateService\n    );\n  }\n\n  async ngOnInit() {\n    await this.syncService.fullSync(true);\n\n    this.reason = await this.stateService.getForcePasswordResetReason();\n\n    // If we somehow end up here without a reason, go back to the home page\n    if (this.reason == ForceResetPasswordReason.None) {\n      this.router.navigate([\"/\"]);\n      return;\n    }\n\n    await super.ngOnInit();\n  }\n\n  get masterPasswordWarningText(): string {\n    return this.reason == ForceResetPasswordReason.WeakMasterPassword\n      ? this.i18nService.t(\"updateWeakMasterPasswordWarning\")\n      : this.i18nService.t(\"updateMasterPasswordWarning\");\n  }\n\n  togglePassword(confirmField: boolean) {\n    this.showPassword = !this.showPassword;\n    document.getElementById(confirmField ? \"masterPasswordRetype\" : \"masterPassword\").focus();\n  }\n\n  async setupSubmitActions(): Promise<boolean> {\n    this.email = await this.stateService.getEmail();\n    this.kdf = await this.stateService.getKdfType();\n    this.kdfConfig = await this.stateService.getKdfConfig();\n    return true;\n  }\n\n  async submit() {\n    // Validation\n    if (!(await this.strongPassword())) {\n      return;\n    }\n\n    if (!(await this.setupSubmitActions())) {\n      return;\n    }\n\n    try {\n      // Create new key and hash new password\n      const newKey = await this.cryptoService.makeKey(\n        this.masterPassword,\n        this.email.trim().toLowerCase(),\n        this.kdf,\n        this.kdfConfig\n      );\n      const newPasswordHash = await this.cryptoService.hashPassword(this.masterPassword, newKey);\n\n      // Grab user's current enc key\n      const userEncKey = await this.cryptoService.getEncKey();\n\n      // Create new encKey for the User\n      const newEncKey = await this.cryptoService.remakeEncKey(newKey, userEncKey);\n\n      await this.performSubmitActions(newPasswordHash, newKey, newEncKey);\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  async performSubmitActions(\n    masterPasswordHash: string,\n    key: SymmetricCryptoKey,\n    encKey: [SymmetricCryptoKey, EncString]\n  ) {\n    try {\n      switch (this.reason) {\n        case ForceResetPasswordReason.AdminForcePasswordReset:\n          this.formPromise = this.updateTempPassword(masterPasswordHash, encKey);\n          break;\n        case ForceResetPasswordReason.WeakMasterPassword:\n          this.formPromise = this.updatePassword(masterPasswordHash, encKey);\n          break;\n      }\n\n      await this.formPromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(\"updatedMasterPassword\")\n      );\n\n      await this.stateService.setForcePasswordResetReason(ForceResetPasswordReason.None);\n\n      if (this.onSuccessfulChangePassword != null) {\n        this.onSuccessfulChangePassword();\n      } else {\n        this.messagingService.send(\"logout\");\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n  private async updateTempPassword(\n    masterPasswordHash: string,\n    encKey: [SymmetricCryptoKey, EncString]\n  ) {\n    const request = new UpdateTempPasswordRequest();\n    request.key = encKey[1].encryptedString;\n    request.newMasterPasswordHash = masterPasswordHash;\n    request.masterPasswordHint = this.hint;\n\n    return this.apiService.putUpdateTempPassword(request);\n  }\n\n  private async updatePassword(\n    newMasterPasswordHash: string,\n    encKey: [SymmetricCryptoKey, EncString]\n  ) {\n    const request = await this.userVerificationService.buildRequest(\n      this.verification,\n      PasswordRequest\n    );\n    request.masterPasswordHint = this.hint;\n    request.newMasterPasswordHash = newMasterPasswordHash;\n    request.key = encKey[1].encryptedString;\n\n    return this.apiService.postPassword(request);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <a (click)=\"logOut()\">{{ \"logOut\" | i18n }}</a>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"updateMasterPassword\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"submit\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <app-callout type=\"warning\" title=\"{{ 'updateMasterPassword' | i18n }}\">\n      {{ masterPasswordWarningText }}\n    </app-callout>\n    <app-callout\n      type=\"info\"\n      [enforcedPolicyOptions]=\"enforcedPolicyOptions\"\n      *ngIf=\"enforcedPolicyOptions\"\n    >\n    </app-callout>\n    <div class=\"box\" *ngIf=\"requireCurrentPassword\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <div class=\"box-content-row-flex\">\n            <div class=\"row-main\">\n              <label for=\"currentMasterPassword\">\n                {{ \"currentMasterPass\" | i18n }}\n              </label>\n              <input\n                id=\"currentMasterPassword\"\n                type=\"password\"\n                name=\"CurrentMasterPassword\"\n                class=\"monospaced\"\n                [(ngModel)]=\"verification.secret\"\n                required\n                appInputVerbatim\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <div class=\"box-content-row-flex\">\n            <div class=\"row-main\">\n              <label for=\"masterPassword\">\n                {{ \"newMasterPass\" | i18n }}\n                <strong class=\"sub-label text-{{ color }}\" *ngIf=\"text\">\n                  {{ text }}\n                </strong>\n              </label>\n              <input\n                id=\"masterPassword\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                name=\"MasterPassword\"\n                class=\"monospaced\"\n                [(ngModel)]=\"masterPassword\"\n                required\n                appInputVerbatim\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePassword(false)\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n          <app-password-strength\n            [password]=\"masterPassword\"\n            [email]=\"email\"\n            (passwordStrengthResult)=\"getStrengthResult($event)\"\n            (passwordScoreColor)=\"getPasswordScoreText($event)\"\n          >\n          </app-password-strength>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n          <div class=\"row-main\">\n            <label for=\"masterPasswordRetype\">{{ \"confirmNewMasterPass\" | i18n }}</label>\n            <input\n              id=\"masterPasswordRetype\"\n              type=\"{{ showPassword ? 'text' : 'password' }}\"\n              name=\"MasterPasswordRetype\"\n              class=\"monospaced\"\n              [(ngModel)]=\"masterPasswordRetype\"\n              required\n              appInputVerbatim\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword(true)\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n              ></i>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"hint\">{{ \"masterPassHint\" | i18n }}</label>\n          <input id=\"hint\" type=\"text\" name=\"Hint\" aria-describedby=\"hintHelp\" [(ngModel)]=\"hint\" />\n        </div>\n      </div>\n      <div id=\"hintHelp\" class=\"box-footer\">\n        {{ \"masterPassHintDesc\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\n\nimport { UpdateTempPasswordComponent as BaseUpdateTempPasswordComponent } from \"@bitwarden/angular/auth/components/update-temp-password.component\";\n\n@Component({\n  selector: \"app-update-temp-password\",\n  templateUrl: \"update-temp-password.component.html\",\n})\nexport class UpdateTempPasswordComponent extends BaseUpdateTempPasswordComponent {}\n","export abstract class UsernameGenerationServiceAbstraction {\n  generateUsername: (options: any) => Promise<string>;\n  generateWord: (options: any) => Promise<string>;\n  generateSubaddress: (options: any) => Promise<string>;\n  generateCatchall: (options: any) => Promise<string>;\n  generateForwarded: (options: any) => Promise<string>;\n  getOptions: () => Promise<any>;\n  saveOptions: (options: any) => Promise<void>;\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class AnonAddyForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid AnonAddy API token.\";\n    }\n    if (options.anonaddy?.domain == null || options.anonaddy.domain === \"\") {\n      throw \"Invalid AnonAddy domain.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://app.anonaddy.com/api/v1/aliases\";\n    requestInit.body = JSON.stringify({\n      domain: options.anonaddy.domain,\n      description:\n        (options.website != null ? \"Website: \" + options.website + \". \" : \"\") +\n        \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json?.data?.email;\n    }\n    if (response.status === 401) {\n      throw \"Invalid AnonAddy API token.\";\n    }\n    throw \"Unknown AnonAddy error occurred.\";\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class DuckDuckGoForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid DuckDuckGo API token.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://quack.duckduckgo.com/api/email/addresses\";\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      if (json.address) {\n        return `${json.address}@duck.com`;\n      }\n    } else if (response.status === 401) {\n      throw \"Invalid DuckDuckGo API token.\";\n    }\n    throw \"Unknown DuckDuckGo error occurred.\";\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class FastmailForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid Fastmail API token.\";\n    }\n\n    const accountId = await this.getAccountId(apiService, options);\n    if (accountId == null || accountId === \"\") {\n      throw \"Unable to obtain Fastmail masked email account ID.\";\n    }\n\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://api.fastmail.com/jmap/api/\";\n    requestInit.body = JSON.stringify({\n      using: [\"https://www.fastmail.com/dev/maskedemail\", \"urn:ietf:params:jmap:core\"],\n      methodCalls: [\n        [\n          \"MaskedEmail/set\",\n          {\n            accountId: accountId,\n            create: {\n              \"new-masked-email\": {\n                state: \"enabled\",\n                description: \"\",\n                url: options.website,\n                emailPrefix: options.fastmail.prefix,\n              },\n            },\n          },\n          \"0\",\n        ],\n      ],\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200) {\n      const json = await response.json();\n      if (\n        json.methodResponses != null &&\n        json.methodResponses.length > 0 &&\n        json.methodResponses[0].length > 0\n      ) {\n        if (json.methodResponses[0][0] === \"MaskedEmail/set\") {\n          if (json.methodResponses[0][1]?.created?.[\"new-masked-email\"] != null) {\n            return json.methodResponses[0][1]?.created?.[\"new-masked-email\"]?.email;\n          }\n          if (json.methodResponses[0][1]?.notCreated?.[\"new-masked-email\"] != null) {\n            throw (\n              \"Fastmail error: \" +\n              json.methodResponses[0][1]?.notCreated?.[\"new-masked-email\"]?.description\n            );\n          }\n        } else if (json.methodResponses[0][0] === \"error\") {\n          throw \"Fastmail error: \" + json.methodResponses[0][1]?.description;\n        }\n      }\n    }\n    if (response.status === 401 || response.status === 403) {\n      throw \"Invalid Fastmail API token.\";\n    }\n    throw \"Unknown Fastmail error occurred.\";\n  }\n\n  private async getAccountId(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    const requestInit: RequestInit = {\n      cache: \"no-store\",\n      method: \"GET\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + options.apiKey,\n      }),\n    };\n    const url = \"https://api.fastmail.com/.well-known/jmap\";\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200) {\n      const json = await response.json();\n      if (json.primaryAccounts != null) {\n        return json.primaryAccounts[\"https://www.fastmail.com/dev/maskedemail\"];\n      }\n    }\n    return null;\n  }\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class FirefoxRelayForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid Firefox Relay API token.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Token \" + options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    const url = \"https://relay.firefox.com/api/v1/relayaddresses/\";\n    requestInit.body = JSON.stringify({\n      enabled: true,\n      generated_for: options.website,\n      description:\n        (options.website != null ? options.website + \" - \" : \"\") + \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json?.full_address;\n    }\n    if (response.status === 401) {\n      throw \"Invalid Firefox Relay API token.\";\n    }\n    throw \"Unknown Firefox Relay error occurred.\";\n  }\n}\n","export class ForwarderOptions {\n  apiKey: string;\n  website: string;\n  fastmail = new FastmailForwarderOptions();\n  anonaddy = new AnonAddyForwarderOptions();\n}\n\nexport class FastmailForwarderOptions {\n  prefix: string;\n}\n\nexport class AnonAddyForwarderOptions {\n  domain: string;\n}\n","import { ApiService } from \"../../../../abstractions/api.service\";\n\nimport { Forwarder } from \"./forwarder\";\nimport { ForwarderOptions } from \"./forwarder-options\";\n\nexport class SimpleLoginForwarder implements Forwarder {\n  async generate(apiService: ApiService, options: ForwarderOptions): Promise<string> {\n    if (options.apiKey == null || options.apiKey === \"\") {\n      throw \"Invalid SimpleLogin API key.\";\n    }\n    const requestInit: RequestInit = {\n      redirect: \"manual\",\n      cache: \"no-store\",\n      method: \"POST\",\n      headers: new Headers({\n        Authentication: options.apiKey,\n        \"Content-Type\": \"application/json\",\n      }),\n    };\n    let url = \"https://app.simplelogin.io/api/alias/random/new\";\n    if (options.website != null) {\n      url += \"?hostname=\" + options.website;\n    }\n    requestInit.body = JSON.stringify({\n      note:\n        (options.website != null ? \"Website: \" + options.website + \". \" : \"\") +\n        \"Generated by Bitwarden.\",\n    });\n    const request = new Request(url, requestInit);\n    const response = await apiService.nativeFetch(request);\n    if (response.status === 200 || response.status === 201) {\n      const json = await response.json();\n      return json.alias;\n    }\n    if (response.status === 401) {\n      throw \"Invalid SimpleLogin API key.\";\n    }\n    try {\n      const json = await response.json();\n      if (json?.error != null) {\n        throw \"SimpleLogin error:\" + json.error;\n      }\n    } catch {\n      // Do nothing...\n    }\n    throw \"Unknown SimpleLogin error occurred.\";\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { CryptoService } from \"../../../abstractions/crypto.service\";\nimport { StateService } from \"../../../abstractions/state.service\";\nimport { EFFLongWordList } from \"../../../misc/wordlist\";\n\nimport {\n  AnonAddyForwarder,\n  DuckDuckGoForwarder,\n  FastmailForwarder,\n  FirefoxRelayForwarder,\n  Forwarder,\n  ForwarderOptions,\n  SimpleLoginForwarder,\n} from \"./email-forwarders\";\nimport { UsernameGenerationServiceAbstraction } from \"./username-generation.service.abstraction\";\n\nconst DefaultOptions = {\n  type: \"word\",\n  wordCapitalize: true,\n  wordIncludeNumber: true,\n  subaddressType: \"random\",\n  catchallType: \"random\",\n  forwardedService: \"\",\n  forwardedAnonAddyDomain: \"anonaddy.me\",\n};\n\nexport class UsernameGenerationService implements UsernameGenerationServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private stateService: StateService,\n    private apiService: ApiService\n  ) {}\n\n  generateUsername(options: any): Promise<string> {\n    if (options.type === \"catchall\") {\n      return this.generateCatchall(options);\n    } else if (options.type === \"subaddress\") {\n      return this.generateSubaddress(options);\n    } else if (options.type === \"forwarded\") {\n      return this.generateForwarded(options);\n    } else {\n      return this.generateWord(options);\n    }\n  }\n\n  async generateWord(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.wordCapitalize == null) {\n      o.wordCapitalize = true;\n    }\n    if (o.wordIncludeNumber == null) {\n      o.wordIncludeNumber = true;\n    }\n\n    const wordIndex = await this.cryptoService.randomNumber(0, EFFLongWordList.length - 1);\n    let word = EFFLongWordList[wordIndex];\n    if (o.wordCapitalize) {\n      word = word.charAt(0).toUpperCase() + word.slice(1);\n    }\n    if (o.wordIncludeNumber) {\n      const num = await this.cryptoService.randomNumber(1, 9999);\n      word = word + this.zeroPad(num.toString(), 4);\n    }\n    return word;\n  }\n\n  async generateSubaddress(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    const subaddressEmail = o.subaddressEmail;\n    if (subaddressEmail == null || subaddressEmail.length < 3) {\n      return o.subaddressEmail;\n    }\n    const atIndex = subaddressEmail.indexOf(\"@\");\n    if (atIndex < 1 || atIndex >= subaddressEmail.length - 1) {\n      return subaddressEmail;\n    }\n    if (o.subaddressType == null) {\n      o.subaddressType = \"random\";\n    }\n\n    const emailBeginning = subaddressEmail.substr(0, atIndex);\n    const emailEnding = subaddressEmail.substr(atIndex + 1, subaddressEmail.length);\n\n    let subaddressString = \"\";\n    if (o.subaddressType === \"random\") {\n      subaddressString = await this.randomString(8);\n    } else if (o.subaddressType === \"website-name\") {\n      subaddressString = o.website;\n    }\n    return emailBeginning + \"+\" + subaddressString + \"@\" + emailEnding;\n  }\n\n  async generateCatchall(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.catchallDomain == null || o.catchallDomain === \"\") {\n      return null;\n    }\n    if (o.catchallType == null) {\n      o.catchallType = \"random\";\n    }\n\n    let startString = \"\";\n    if (o.catchallType === \"random\") {\n      startString = await this.randomString(8);\n    } else if (o.catchallType === \"website-name\") {\n      startString = o.website;\n    }\n    return startString + \"@\" + o.catchallDomain;\n  }\n\n  async generateForwarded(options: any): Promise<string> {\n    const o = Object.assign({}, DefaultOptions, options);\n\n    if (o.forwardedService == null) {\n      return null;\n    }\n\n    let forwarder: Forwarder = null;\n    const forwarderOptions = new ForwarderOptions();\n    forwarderOptions.website = o.website;\n    if (o.forwardedService === \"simplelogin\") {\n      forwarder = new SimpleLoginForwarder();\n      forwarderOptions.apiKey = o.forwardedSimpleLoginApiKey;\n    } else if (o.forwardedService === \"anonaddy\") {\n      forwarder = new AnonAddyForwarder();\n      forwarderOptions.apiKey = o.forwardedAnonAddyApiToken;\n      forwarderOptions.anonaddy.domain = o.forwardedAnonAddyDomain;\n    } else if (o.forwardedService === \"firefoxrelay\") {\n      forwarder = new FirefoxRelayForwarder();\n      forwarderOptions.apiKey = o.forwardedFirefoxApiToken;\n    } else if (o.forwardedService === \"fastmail\") {\n      forwarder = new FastmailForwarder();\n      forwarderOptions.apiKey = o.forwardedFastmailApiToken;\n    } else if (o.forwardedService === \"duckduckgo\") {\n      forwarder = new DuckDuckGoForwarder();\n      forwarderOptions.apiKey = o.forwardedDuckDuckGoToken;\n    }\n\n    if (forwarder == null) {\n      return null;\n    }\n\n    return forwarder.generate(this.apiService, forwarderOptions);\n  }\n\n  async getOptions(): Promise<any> {\n    let options = await this.stateService.getUsernameGenerationOptions();\n    if (options == null) {\n      options = Object.assign({}, DefaultOptions);\n    } else {\n      options = Object.assign({}, DefaultOptions, options);\n    }\n    await this.stateService.setUsernameGenerationOptions(options);\n    return options;\n  }\n\n  async saveOptions(options: any) {\n    await this.stateService.setUsernameGenerationOptions(options);\n  }\n\n  private async randomString(length: number) {\n    let str = \"\";\n    const charSet = \"abcdefghijklmnopqrstuvwxyz1234567890\";\n    for (let i = 0; i < length; i++) {\n      const randomCharIndex = await this.cryptoService.randomNumber(0, charSet.length - 1);\n      str += charSet.charAt(randomCharIndex);\n    }\n    return str;\n  }\n\n  // ref: https://stackoverflow.com/a/10073788\n  private zeroPad(number: string, width: number) {\n    return number.length >= width\n      ? number\n      : new Array(width - number.length + 1).join(\"0\") + number;\n  }\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { PasswordGeneratorPolicyOptions } from \"@bitwarden/common/admin-console/models/domain/password-generator-policy-options\";\nimport { EmailForwarderOptions } from \"@bitwarden/common/models/domain/email-forwarder-options\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { UsernameGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/username\";\n\n@Directive()\nexport class GeneratorComponent implements OnInit {\n  @Input() comingFromAddEdit = false;\n  @Input() type: string;\n  @Output() onSelected = new EventEmitter<string>();\n\n  usernameGeneratingPromise: Promise<string>;\n  typeOptions: any[];\n  passTypeOptions: any[];\n  usernameTypeOptions: any[];\n  subaddressOptions: any[];\n  catchallOptions: any[];\n  forwardOptions: EmailForwarderOptions[];\n  usernameOptions: any = {};\n  passwordOptions: any = {};\n  username = \"-\";\n  password = \"-\";\n  showOptions = false;\n  avoidAmbiguous = false;\n  enforcedPasswordPolicyOptions: PasswordGeneratorPolicyOptions;\n  usernameWebsite: string = null;\n\n  constructor(\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected usernameGenerationService: UsernameGenerationServiceAbstraction,\n    protected platformUtilsService: PlatformUtilsService,\n    protected stateService: StateService,\n    protected i18nService: I18nService,\n    protected logService: LogService,\n    protected route: ActivatedRoute,\n    private win: Window\n  ) {\n    this.typeOptions = [\n      { name: i18nService.t(\"password\"), value: \"password\" },\n      { name: i18nService.t(\"username\"), value: \"username\" },\n    ];\n    this.passTypeOptions = [\n      { name: i18nService.t(\"password\"), value: \"password\" },\n      { name: i18nService.t(\"passphrase\"), value: \"passphrase\" },\n    ];\n    this.usernameTypeOptions = [\n      {\n        name: i18nService.t(\"plusAddressedEmail\"),\n        value: \"subaddress\",\n        desc: i18nService.t(\"plusAddressedEmailDesc\"),\n      },\n      {\n        name: i18nService.t(\"catchallEmail\"),\n        value: \"catchall\",\n        desc: i18nService.t(\"catchallEmailDesc\"),\n      },\n      {\n        name: i18nService.t(\"forwardedEmail\"),\n        value: \"forwarded\",\n        desc: i18nService.t(\"forwardedEmailDesc\"),\n      },\n      { name: i18nService.t(\"randomWord\"), value: \"word\" },\n    ];\n    this.subaddressOptions = [{ name: i18nService.t(\"random\"), value: \"random\" }];\n    this.catchallOptions = [{ name: i18nService.t(\"random\"), value: \"random\" }];\n    this.initForwardOptions();\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (qParams) => {\n      const passwordOptionsResponse = await this.passwordGenerationService.getOptions();\n      this.passwordOptions = passwordOptionsResponse[0];\n      this.enforcedPasswordPolicyOptions = passwordOptionsResponse[1];\n      this.avoidAmbiguous = !this.passwordOptions.ambiguous;\n      this.passwordOptions.type =\n        this.passwordOptions.type === \"passphrase\" ? \"passphrase\" : \"password\";\n\n      this.usernameOptions = await this.usernameGenerationService.getOptions();\n      if (this.usernameOptions.type == null) {\n        this.usernameOptions.type = \"word\";\n      }\n      if (\n        this.usernameOptions.subaddressEmail == null ||\n        this.usernameOptions.subaddressEmail === \"\"\n      ) {\n        this.usernameOptions.subaddressEmail = await this.stateService.getEmail();\n      }\n      if (this.usernameWebsite == null) {\n        this.usernameOptions.subaddressType = this.usernameOptions.catchallType = \"random\";\n      } else {\n        this.usernameOptions.website = this.usernameWebsite;\n        const websiteOption = { name: this.i18nService.t(\"websiteName\"), value: \"website-name\" };\n        this.subaddressOptions.push(websiteOption);\n        this.catchallOptions.push(websiteOption);\n      }\n\n      if (this.type !== \"username\" && this.type !== \"password\") {\n        if (qParams.type === \"username\" || qParams.type === \"password\") {\n          this.type = qParams.type;\n        } else {\n          const generatorOptions = await this.stateService.getGeneratorOptions();\n          this.type = generatorOptions?.type ?? \"password\";\n        }\n      }\n      if (this.regenerateWithoutButtonPress()) {\n        await this.regenerate();\n      }\n    });\n  }\n\n  async typeChanged() {\n    await this.stateService.setGeneratorOptions({ type: this.type });\n    if (this.regenerateWithoutButtonPress()) {\n      await this.regenerate();\n    }\n  }\n\n  async regenerate() {\n    if (this.type === \"password\") {\n      await this.regeneratePassword();\n    } else if (this.type === \"username\") {\n      await this.regenerateUsername();\n    }\n  }\n\n  async sliderChanged() {\n    this.savePasswordOptions(false);\n    await this.passwordGenerationService.addHistory(this.password);\n  }\n\n  async sliderInput() {\n    this.normalizePasswordOptions();\n    this.password = await this.passwordGenerationService.generatePassword(this.passwordOptions);\n  }\n\n  async savePasswordOptions(regenerate = true) {\n    this.normalizePasswordOptions();\n    await this.passwordGenerationService.saveOptions(this.passwordOptions);\n\n    if (regenerate && this.regenerateWithoutButtonPress()) {\n      await this.regeneratePassword();\n    }\n  }\n\n  async saveUsernameOptions(regenerate = true) {\n    await this.usernameGenerationService.saveOptions(this.usernameOptions);\n    if (this.usernameOptions.type === \"forwarded\") {\n      this.username = \"-\";\n    }\n    if (regenerate && this.regenerateWithoutButtonPress()) {\n      await this.regenerateUsername();\n    }\n  }\n\n  async regeneratePassword() {\n    this.password = await this.passwordGenerationService.generatePassword(this.passwordOptions);\n    await this.passwordGenerationService.addHistory(this.password);\n  }\n\n  regenerateUsername() {\n    return this.generateUsername();\n  }\n\n  async generateUsername() {\n    try {\n      this.usernameGeneratingPromise = this.usernameGenerationService.generateUsername(\n        this.usernameOptions\n      );\n      this.username = await this.usernameGeneratingPromise;\n      if (this.username === \"\" || this.username === null) {\n        this.username = \"-\";\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  copy() {\n    const password = this.type === \"password\";\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(\n      password ? this.password : this.username,\n      copyOptions\n    );\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(password ? \"password\" : \"username\"))\n    );\n  }\n\n  select() {\n    this.onSelected.emit(this.type === \"password\" ? this.password : this.username);\n  }\n\n  toggleOptions() {\n    this.showOptions = !this.showOptions;\n  }\n\n  regenerateWithoutButtonPress() {\n    return this.type !== \"username\" || this.usernameOptions.type !== \"forwarded\";\n  }\n\n  private normalizePasswordOptions() {\n    // Application level normalize options depedent on class variables\n    this.passwordOptions.ambiguous = !this.avoidAmbiguous;\n\n    if (\n      !this.passwordOptions.uppercase &&\n      !this.passwordOptions.lowercase &&\n      !this.passwordOptions.number &&\n      !this.passwordOptions.special\n    ) {\n      this.passwordOptions.lowercase = true;\n      if (this.win != null) {\n        const lowercase = this.win.document.querySelector(\"#lowercase\") as HTMLInputElement;\n        if (lowercase) {\n          lowercase.checked = true;\n        }\n      }\n    }\n\n    this.passwordGenerationService.normalizeOptions(\n      this.passwordOptions,\n      this.enforcedPasswordPolicyOptions\n    );\n  }\n\n  private async initForwardOptions() {\n    this.forwardOptions = [\n      { name: \"AnonAddy\", value: \"anonaddy\", validForSelfHosted: true },\n      { name: \"DuckDuckGo\", value: \"duckduckgo\", validForSelfHosted: false },\n      { name: \"Fastmail\", value: \"fastmail\", validForSelfHosted: true },\n      { name: \"Firefox Relay\", value: \"firefoxrelay\", validForSelfHosted: false },\n      { name: \"SimpleLogin\", value: \"simplelogin\", validForSelfHosted: true },\n    ];\n\n    this.usernameOptions = await this.usernameGenerationService.getOptions();\n    if (\n      this.usernameOptions.forwardedService == null ||\n      this.usernameOptions.forwardedService === \"\"\n    ) {\n      this.forwardOptions.push({ name: \"\", value: null, validForSelfHosted: false });\n    }\n\n    this.forwardOptions = this.forwardOptions.sort((a, b) => a.name.localeCompare(b.name));\n  }\n}\n","import { Directive, ElementRef, HostListener } from \"@angular/core\";\n\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\n@Directive({\n  selector: \"[appSelectCopy]\",\n})\nexport class SelectCopyDirective {\n  constructor(private el: ElementRef, private platformUtilsService: PlatformUtilsService) {}\n\n  @HostListener(\"copy\") onCopy() {\n    if (window == null) {\n      return;\n    }\n    let copyText = \"\";\n    const selection = window.getSelection();\n    for (let i = 0; i < selection.rangeCount; i++) {\n      const range = selection.getRangeAt(i);\n      const text = range.toString();\n\n      // The selection should only contain one line of text. In some cases however, the\n      // selection contains newlines and space characters from the indentation of following\n      // sibling nodes. To avoid copying passwords containing trailing newlines and spaces\n      // that aren't part of the password, the selection has to be trimmed.\n      let stringEndPos = text.length;\n      const newLinePos = text.search(/(?:\\r\\n|\\r|\\n)/);\n      if (newLinePos > -1) {\n        const otherPart = text.substr(newLinePos).trim();\n        if (otherPart === \"\") {\n          stringEndPos = newLinePos;\n        }\n      }\n      copyText += text.substring(0, stringEndPos);\n    }\n    this.platformUtilsService.copyToClipboard(copyText, { window: window });\n  }\n}\n","<ng-container *ngIf=\"show\">\n  <button type=\"button\" (click)=\"expand()\" appA11yTitle=\"{{ 'popOutNewWindow' | i18n }}\">\n    <i class=\"bwi bwi-external-link bwi-rotate-270 bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n","import { Component, Input, OnInit } from \"@angular/core\";\n\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\n@Component({\n  selector: \"app-pop-out\",\n  templateUrl: \"pop-out.component.html\",\n})\nexport class PopOutComponent implements OnInit {\n  @Input() show = true;\n\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private popupUtilsService: PopupUtilsService\n  ) {}\n\n  ngOnInit() {\n    if (this.show) {\n      if (\n        (this.popupUtilsService.inSidebar(window) && this.platformUtilsService.isFirefox()) ||\n        this.popupUtilsService.inPopout(window)\n      ) {\n        this.show = false;\n      }\n    }\n  }\n\n  expand() {\n    this.popupUtilsService.popOut(window);\n  }\n}\n","import { Pipe, PipeTransform } from \"@angular/core\";\n\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\n/*\n An updated pipe that sanitizes HTML, highlights numbers and special characters (in different colors each)\n and handles Unicode / Emoji characters correctly.\n*/\n@Pipe({ name: \"colorPassword\" })\nexport class ColorPasswordPipe implements PipeTransform {\n  transform(password: string) {\n    const template = (character: string, type: string) =>\n      `<span class=\"password-${type}\">${character}</span>`;\n    const colorizedPassword = this.generateTemplate(password, template);\n    return colorizedPassword;\n  }\n\n  protected generateTemplate(\n    password: string,\n    templateGenerator: (chararacter: string, type: string, index?: number) => string\n  ) {\n    // Convert to an array to handle cases that stings have special characters, ie: emoji.\n    const passwordArray = Array.from(password);\n    let colorizedPassword = \"\";\n    for (let i = 0; i < passwordArray.length; i++) {\n      let character = passwordArray[i];\n      let isSpecial = false;\n      // Sanitize HTML first.\n      switch (character) {\n        case \"&\":\n          character = \"&amp;\";\n          isSpecial = true;\n          break;\n        case \"<\":\n          character = \"&lt;\";\n          isSpecial = true;\n          break;\n        case \">\":\n          character = \"&gt;\";\n          isSpecial = true;\n          break;\n        case \" \":\n          character = \"&nbsp;\";\n          isSpecial = true;\n          break;\n        default:\n          break;\n      }\n      let type = \"letter\";\n      if (character.match(Utils.regexpEmojiPresentation)) {\n        type = \"emoji\";\n      } else if (isSpecial || character.match(/[^\\w ]/)) {\n        type = \"special\";\n      } else if (character.match(/\\d/)) {\n        type = \"number\";\n      }\n      colorizedPassword += templateGenerator(character, type, i);\n    }\n    return colorizedPassword;\n  }\n}\n","<header>\n  <div class=\"left\">\n    <app-pop-out [show]=\"!comingFromAddEdit\"></app-pop-out>\n    <button type=\"button\" (click)=\"close()\" *ngIf=\"comingFromAddEdit\">\n      {{ \"cancel\" | i18n }}\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"generator\" | i18n }}</span>\n  </h1>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"select()\" *ngIf=\"comingFromAddEdit\">\n      {{ \"select\" | i18n }}\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <app-callout type=\"info\" *ngIf=\"enforcedPasswordPolicyOptions?.inEffect() && type === 'password'\">\n    {{ \"passwordGeneratorPolicyInEffect\" | i18n }}\n  </app-callout>\n  <div class=\"generated-block\" *ngIf=\"type === 'password'\">\n    <div class=\"generated-wrapper\" [innerHTML]=\"password | colorPassword\" appSelectCopy></div>\n    <div class=\"action-buttons\">\n      <button\n        type=\"button\"\n        class=\"row-btn\"\n        appStopClick\n        appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n        (click)=\"copy()\"\n      >\n        <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        appStopClick\n        appA11yTitle=\"{{ 'regeneratePassword' | i18n }}\"\n        (click)=\"regenerate()\"\n      >\n        <i class=\"bwi bwi-lg bwi-generate\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"generated-block\" *ngIf=\"type === 'username'\">\n    <div class=\"generated-wrapper\" [innerHTML]=\"username | colorPassword\" appSelectCopy></div>\n    <div class=\"action-buttons\" #form [appApiAction]=\"usernameGeneratingPromise\">\n      <button\n        type=\"button\"\n        class=\"row-btn\"\n        appStopClick\n        appA11yTitle=\"{{ 'copyUsername' | i18n }}\"\n        (click)=\"copy()\"\n      >\n        <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        appStopClick\n        appA11yTitle=\"{{ 'regenerateUsername' | i18n }}\"\n        (click)=\"$any(form).loading ? false : regenerate()\"\n        [attr.aria-disabled]=\"$any(form).loading ? 'true' : null\"\n      >\n        <i\n          class=\"bwi bwi-lg bwi-generate\"\n          [ngClass]=\"$any(form).loading ? 'bwi-spin' : ''\"\n          aria-hidden=\"true\"\n        ></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" role=\"radiogroup\" aria-labelledby=\"typeHeading\">\n        <label id=\"typeHeading\" class=\"radio-header\">{{\n          \"whatWouldYouLikeToGenerate\" | i18n\n        }}</label>\n        <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of typeOptions\">\n          <input\n            type=\"radio\"\n            [(ngModel)]=\"type\"\n            name=\"Type\"\n            id=\"type_{{ o.value }}\"\n            [value]=\"o.value\"\n            (change)=\"typeChanged()\"\n            [checked]=\"type === o.value\"\n            [disabled]=\"comingFromAddEdit && type !== o.value\"\n          />\n          <label for=\"type_{{ o.value }}\">\n            {{ o.name }}\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n  <ng-container *ngIf=\"type === 'password'\">\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"options\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" role=\"radiogroup\" aria-labelledby=\"passwordTypeHeading\">\n          <label id=\"passwordTypeHeading\" class=\"radio-header\">{{ \"passwordType\" | i18n }}</label>\n          <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of passTypeOptions\">\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"passwordOptions.type\"\n              name=\"PasswordType\"\n              id=\"passwordtype_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"savePasswordOptions()\"\n              [checked]=\"passwordOptions.type === o.value\"\n            />\n            <label for=\"passwordtype_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"passwordOptions.type === 'passphrase'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-input\" appBoxRow>\n          <label for=\"num-words\">{{ \"numWords\" | i18n }}</label>\n          <input\n            id=\"num-words\"\n            type=\"number\"\n            min=\"3\"\n            max=\"20\"\n            (change)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.numWords\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-input\" appBoxRow>\n          <label for=\"word-separator\">{{ \"wordSeparator\" | i18n }}</label>\n          <input\n            id=\"word-separator\"\n            type=\"text\"\n            maxlength=\"1\"\n            (input)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.wordSeparator\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"capitalize\">{{ \"capitalize\" | i18n }}</label>\n          <input\n            id=\"capitalize\"\n            type=\"checkbox\"\n            (change)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.capitalize\"\n            [disabled]=\"enforcedPasswordPolicyOptions?.capitalize\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"include-number\">{{ \"includeNumber\" | i18n }}</label>\n          <input\n            id=\"include-number\"\n            type=\"checkbox\"\n            (change)=\"savePasswordOptions()\"\n            [(ngModel)]=\"passwordOptions.includeNumber\"\n            [disabled]=\"enforcedPasswordPolicyOptions?.includeNumber\"\n          />\n        </div>\n      </div>\n    </div>\n    <ng-container *ngIf=\"passwordOptions.type === 'password'\">\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-slider\" appBoxRow>\n            <label for=\"length\">{{ \"length\" | i18n }}</label>\n            <input\n              id=\"length\"\n              type=\"number\"\n              min=\"5\"\n              max=\"128\"\n              [(ngModel)]=\"passwordOptions.length\"\n              (change)=\"savePasswordOptions()\"\n            />\n            <input\n              id=\"lengthRange\"\n              type=\"range\"\n              min=\"5\"\n              max=\"128\"\n              step=\"1\"\n              [(ngModel)]=\"passwordOptions.length\"\n              (change)=\"sliderChanged()\"\n              (input)=\"sliderInput()\"\n              attr.aria-label=\"{{ 'length' | i18n }}\"\n              tabindex=\"-1\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"uppercase\">A-Z</label>\n            <input\n              id=\"uppercase\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'uppercase' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useUppercase\"\n              [(ngModel)]=\"passwordOptions.uppercase\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"lowercase\">a-z</label>\n            <input\n              id=\"lowercase\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'lowercase' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useLowercase\"\n              [(ngModel)]=\"passwordOptions.lowercase\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"numbers\">0-9</label>\n            <input\n              id=\"numbers\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'numbers' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useNumbers\"\n              [(ngModel)]=\"passwordOptions.number\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"special\">!@#$%^&*</label>\n            <input\n              id=\"special\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              attr.aria-label=\"{{ 'specialCharacters' | i18n }}\"\n              [disabled]=\"enforcedPasswordPolicyOptions.useSpecial\"\n              [(ngModel)]=\"passwordOptions.special\"\n            />\n          </div>\n        </div>\n      </div>\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-input\" appBoxRow>\n            <label for=\"min-number\">{{ \"minNumbers\" | i18n }}</label>\n            <input\n              id=\"min-number\"\n              type=\"number\"\n              min=\"0\"\n              max=\"9\"\n              (change)=\"savePasswordOptions()\"\n              [(ngModel)]=\"passwordOptions.minNumber\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-input\" appBoxRow>\n            <label for=\"min-special\">{{ \"minSpecial\" | i18n }}</label>\n            <input\n              id=\"min-special\"\n              type=\"number\"\n              min=\"0\"\n              max=\"9\"\n              (change)=\"savePasswordOptions()\"\n              [(ngModel)]=\"passwordOptions.minSpecial\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"ambiguous\">{{ \"avoidAmbChar\" | i18n }}</label>\n            <input\n              id=\"ambiguous\"\n              type=\"checkbox\"\n              (change)=\"savePasswordOptions()\"\n              [(ngModel)]=\"avoidAmbiguous\"\n            />\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <div class=\"box list\">\n      <div class=\"box-content single-line\">\n        <a class=\"box-content-row box-content-row-flex\" routerLink=\"/generator-history\">\n          <div class=\"row-main\">{{ \"passwordHistory\" | i18n }}</div>\n          <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n        </a>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"type === 'username'\">\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"options\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" role=\"radiogroup\" aria-labelledby=\"usernameTypeHeading\">\n          <label id=\"usernameTypeHeading\" class=\"radio-header\">\n            {{ \"usernameType\" | i18n }}\n            <a\n              href=\"https://bitwarden.com/help/generator/#username-types\"\n              target=\"_blank\"\n              rel=\"noopener\"\n              appA11yTitle=\"{{ 'learnMore' | i18n }}\"\n            >\n              <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n            </a>\n          </label>\n          <div\n            class=\"radio-group align-start text-default\"\n            appBoxRow\n            *ngFor=\"let o of usernameTypeOptions\"\n          >\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"usernameOptions.type\"\n              name=\"UsernameType\"\n              id=\"type_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"saveUsernameOptions()\"\n              [checked]=\"usernameOptions.type === o.value\"\n            />\n            <label for=\"type_{{ o.value }}\">\n              {{ o.name }}\n              <div class=\"small text-muted\" *ngIf=\"o.desc\">\n                {{ o.desc }}\n              </div>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'forwarded'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" role=\"listbox\" aria-labelledby=\"forwardTypeHeading\">\n          <label id=\"forwardTypeHeading\">{{ \"service\" | i18n }}</label>\n          <select\n            id=\"ForwardTypeDropdown\"\n            name=\"ForwardType\"\n            [(ngModel)]=\"usernameOptions.forwardedService\"\n            (change)=\"saveUsernameOptions()\"\n          >\n            <option *ngFor=\"let o of forwardOptions\" [ngValue]=\"o.value\" role=\"option\">\n              {{ o.name }}\n            </option>\n          </select>\n        </div>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'simplelogin'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"simplelogin-apikey\">{{ \"apiKey\" | i18n }}</label>\n            <input\n              id=\"simplelogin-apikey\"\n              type=\"password\"\n              name=\"SimpleLoginApiKey\"\n              [(ngModel)]=\"usernameOptions.forwardedSimpleLoginApiKey\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'duckduckgo'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"duckduckgo-apikey\">{{ \"apiKey\" | i18n }}</label>\n            <input\n              id=\"duckduckgo-apikey\"\n              type=\"password\"\n              name=\"DuckDuckGoApiKey\"\n              [(ngModel)]=\"usernameOptions.forwardedDuckDuckGoToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'anonaddy'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"anonaddy-accessToken\">{{ \"apiAccessToken\" | i18n }}</label>\n            <input\n              id=\"anonaddy-accessToken\"\n              type=\"password\"\n              name=\"AnonAddyAccessToken\"\n              [(ngModel)]=\"usernameOptions.forwardedAnonAddyApiToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"anonaddy-domain\">{{ \"domainName\" | i18n }}</label>\n            <input\n              id=\"anonaddy-domain\"\n              type=\"text\"\n              name=\"AnonAddyDomain\"\n              [(ngModel)]=\"usernameOptions.forwardedAnonAddyDomain\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'firefoxrelay'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"firefox-apikey\">{{ \"apiAccessToken\" | i18n }}</label>\n            <input\n              id=\"firefox-apikey\"\n              type=\"password\"\n              name=\"FirefoxApiKey\"\n              [(ngModel)]=\"usernameOptions.forwardedFirefoxApiToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n        <ng-container *ngIf=\"usernameOptions.forwardedService === 'fastmail'\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"fastmail-apiToken\">{{ \"apiAccessToken\" | i18n }}</label>\n            <input\n              id=\"fastmail-apiToken\"\n              type=\"password\"\n              name=\"FastmailApiToken\"\n              [(ngModel)]=\"usernameOptions.forwardedFastmailApiToken\"\n              (blur)=\"saveUsernameOptions()\"\n            />\n          </div>\n        </ng-container>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'subaddress'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"subaddress-email\">{{ \"emailAddress\" | i18n }}</label>\n          <input\n            id=\"subaddress-email\"\n            type=\"text\"\n            name=\"SubaddressEmail\"\n            [(ngModel)]=\"usernameOptions.subaddressEmail\"\n            (blur)=\"saveUsernameOptions()\"\n          />\n        </div>\n        <div\n          class=\"box-content-row\"\n          role=\"radiogroup\"\n          aria-labelledby=\"subaddressTypeHeading\"\n          *ngIf=\"subaddressOptions.length > 1\"\n        >\n          <label id=\"subaddressTypeHeading\" class=\"radio-header\">{{ \"type\" | i18n }}</label>\n          <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of subaddressOptions\">\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"usernameOptions.subaddressType\"\n              name=\"SubaddressType\"\n              id=\"subaddresstype_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"saveUsernameOptions()\"\n              [checked]=\"usernameOptions.subaddressType === o.value\"\n            />\n            <label for=\"subaddresstype_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n        <div class=\"box-content-row\" appBoxRow *ngIf=\"usernameWebsite\">\n          <label for=\"subaddress-website\">{{ \"website\" | i18n }}</label>\n          <input\n            id=\"subaddress-website\"\n            type=\"text\"\n            name=\"SubaddressWebsite\"\n            [value]=\"usernameOptions.website\"\n            disabled\n            readonly\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'catchall'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"catchall-domain\">{{ \"domainName\" | i18n }}</label>\n          <input\n            id=\"catchall-domain\"\n            type=\"text\"\n            name=\"CatchallDomain\"\n            [(ngModel)]=\"usernameOptions.catchallDomain\"\n            (blur)=\"saveUsernameOptions()\"\n          />\n        </div>\n        <div\n          class=\"box-content-row\"\n          role=\"radiogroup\"\n          aria-labelledby=\"catchallTypeHeading\"\n          *ngIf=\"catchallOptions.length > 1\"\n        >\n          <label id=\"catchallTypeHeading\" class=\"radio-header\">{{ \"type\" | i18n }}</label>\n          <div class=\"radio-group text-default\" appBoxRow *ngFor=\"let o of catchallOptions\">\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"usernameOptions.catchallType\"\n              name=\"CatchallType\"\n              id=\"catchalltype_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"saveUsernameOptions()\"\n              [checked]=\"usernameOptions.catchallType === o.value\"\n            />\n            <label for=\"catchalltype_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n        <div class=\"box-content-row\" appBoxRow *ngIf=\"usernameWebsite\">\n          <label for=\"catchall-website\">{{ \"website\" | i18n }}</label>\n          <input\n            id=\"catchall-website\"\n            type=\"text\"\n            name=\"CatchallWebsite\"\n            [value]=\"usernameOptions.website\"\n            disabled\n            readonly\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"usernameOptions.type === 'word'\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"capitalize\">{{ \"capitalize\" | i18n }}</label>\n          <input\n            id=\"capitalize\"\n            type=\"checkbox\"\n            (change)=\"saveUsernameOptions()\"\n            [(ngModel)]=\"usernameOptions.wordCapitalize\"\n          />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"include-number\">{{ \"includeNumber\" | i18n }}</label>\n          <input\n            id=\"include-number\"\n            type=\"checkbox\"\n            (change)=\"saveUsernameOptions()\"\n            [(ngModel)]=\"usernameOptions.wordIncludeNumber\"\n          />\n        </div>\n      </div>\n    </div>\n  </ng-container>\n</main>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\n\nimport { GeneratorComponent as BaseGeneratorComponent } from \"@bitwarden/angular/tools/generator/components/generator.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { UsernameGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/username\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { AddEditCipherInfo } from \"@bitwarden/common/vault/types/add-edit-cipher-info\";\n\n@Component({\n  selector: \"app-generator\",\n  templateUrl: \"generator.component.html\",\n})\nexport class GeneratorComponent extends BaseGeneratorComponent {\n  private addEditCipherInfo: AddEditCipherInfo;\n  private cipherState: CipherView;\n\n  constructor(\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    usernameGenerationService: UsernameGenerationServiceAbstraction,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    stateService: StateService,\n    route: ActivatedRoute,\n    logService: LogService,\n    private location: Location\n  ) {\n    super(\n      passwordGenerationService,\n      usernameGenerationService,\n      platformUtilsService,\n      stateService,\n      i18nService,\n      logService,\n      route,\n      window\n    );\n  }\n\n  async ngOnInit() {\n    this.addEditCipherInfo = await this.stateService.getAddEditCipherInfo();\n    if (this.addEditCipherInfo != null) {\n      this.cipherState = this.addEditCipherInfo.cipher;\n    }\n    this.comingFromAddEdit = this.cipherState != null;\n    if (this.cipherState?.login?.hasUris) {\n      this.usernameWebsite = this.cipherState.login.uris[0].hostname;\n    }\n    await super.ngOnInit();\n  }\n\n  select() {\n    super.select();\n    if (this.type === \"password\") {\n      this.cipherState.login.password = this.password;\n    } else if (this.type === \"username\") {\n      this.cipherState.login.username = this.username;\n    }\n    this.addEditCipherInfo.cipher = this.cipherState;\n    this.stateService.setAddEditCipherInfo(this.addEditCipherInfo);\n    this.close();\n  }\n\n  close() {\n    this.location.back();\n  }\n}\n","export enum SendType {\n  Text = 0,\n  File = 1,\n}\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport {\n  GeneratedPasswordHistory,\n  PasswordGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/password\";\n\n@Directive()\nexport class PasswordGeneratorHistoryComponent implements OnInit {\n  history: GeneratedPasswordHistory[] = [];\n\n  constructor(\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    private win: Window\n  ) {}\n\n  async ngOnInit() {\n    this.history = await this.passwordGenerationService.getHistory();\n  }\n\n  clear() {\n    this.history = [];\n    this.passwordGenerationService.clear();\n  }\n\n  copy(password: string) {\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(password, copyOptions);\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"password\"))\n    );\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" type=\"button\" (click)=\"close()\">\n      <span class=\"header-icon\" aria-hidden=\"true\"><i class=\"bwi bwi-angle-left\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"passwordHistory\" | i18n }}</span>\n  </h1>\n  <div class=\"right\">\n    <button type=\"button\" type=\"button\" (click)=\"clear()\">\n      {{ \"clear\" | i18n }}\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list full-list\" *ngIf=\"history && history.length\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let h of history\">\n        <div class=\"row-main\">\n          <div class=\"row-main-content\">\n            <div\n              class=\"monospaced password-wrapper\"\n              appSelectCopy\n              [innerHTML]=\"h.password | colorPassword\"\n            ></div>\n            <span class=\"detail\">{{ h.date | date : \"medium\" }}</span>\n          </div>\n        </div>\n        <div class=\"action-buttons\">\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n            (click)=\"copy(h.password)\"\n          >\n            <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"no-items\" *ngIf=\"!history || !history.length\">\n    <p>{{ \"noPasswordsInList\" | i18n }}</p>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\n\nimport { PasswordGeneratorHistoryComponent as BasePasswordGeneratorHistoryComponent } from \"@bitwarden/angular/tools/generator/components/password-generator-history.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\n@Component({\n  selector: \"app-password-generator-history\",\n  templateUrl: \"password-generator-history.component.html\",\n})\nexport class PasswordGeneratorHistoryComponent extends BasePasswordGeneratorHistoryComponent {\n  constructor(\n    passwordGenerationService: PasswordGenerationServiceAbstraction,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    private location: Location\n  ) {\n    super(passwordGenerationService, platformUtilsService, i18nService, window);\n  }\n\n  close() {\n    this.location.back();\n  }\n}\n","import { View } from \"../../../../models/view/view\";\nimport { DeepJsonify } from \"../../../../types/deep-jsonify\";\nimport { SendFile } from \"../domain/send-file\";\n\nexport class SendFileView implements View {\n  id: string = null;\n  size: string = null;\n  sizeName: string = null;\n  fileName: string = null;\n\n  constructor(f?: SendFile) {\n    if (!f) {\n      return;\n    }\n\n    this.id = f.id;\n    this.size = f.size;\n    this.sizeName = f.sizeName;\n  }\n\n  get fileSize(): number {\n    try {\n      if (this.size != null) {\n        return parseInt(this.size, null);\n      }\n    } catch {\n      // Invalid file size.\n    }\n    return 0;\n  }\n\n  static fromJSON(json: DeepJsonify<SendFileView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendFileView(), json);\n  }\n}\n","import { View } from \"../../../../models/view/view\";\nimport { DeepJsonify } from \"../../../../types/deep-jsonify\";\nimport { SendText } from \"../domain/send-text\";\n\nexport class SendTextView implements View {\n  text: string = null;\n  hidden: boolean;\n\n  constructor(t?: SendText) {\n    if (!t) {\n      return;\n    }\n\n    this.hidden = t.hidden;\n  }\n\n  get maskedText(): string {\n    return this.text != null ? \"••••••••\" : null;\n  }\n\n  static fromJSON(json: DeepJsonify<SendTextView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendTextView(), json);\n  }\n}\n","import { Utils } from \"../../../../misc/utils\";\nimport { SymmetricCryptoKey } from \"../../../../models/domain/symmetric-crypto-key\";\nimport { View } from \"../../../../models/view/view\";\nimport { DeepJsonify } from \"../../../../types/deep-jsonify\";\nimport { SendType } from \"../../enums/send-type\";\nimport { Send } from \"../domain/send\";\n\nimport { SendFileView } from \"./send-file.view\";\nimport { SendTextView } from \"./send-text.view\";\n\nexport class SendView implements View {\n  id: string = null;\n  accessId: string = null;\n  name: string = null;\n  notes: string = null;\n  key: ArrayBuffer;\n  cryptoKey: SymmetricCryptoKey;\n  type: SendType = null;\n  text = new SendTextView();\n  file = new SendFileView();\n  maxAccessCount?: number = null;\n  accessCount = 0;\n  revisionDate: Date = null;\n  deletionDate: Date = null;\n  expirationDate: Date = null;\n  password: string = null;\n  disabled = false;\n  hideEmail = false;\n\n  constructor(s?: Send) {\n    if (!s) {\n      return;\n    }\n\n    this.id = s.id;\n    this.accessId = s.accessId;\n    this.type = s.type;\n    this.maxAccessCount = s.maxAccessCount;\n    this.accessCount = s.accessCount;\n    this.revisionDate = s.revisionDate;\n    this.deletionDate = s.deletionDate;\n    this.expirationDate = s.expirationDate;\n    this.disabled = s.disabled;\n    this.password = s.password;\n    this.hideEmail = s.hideEmail;\n  }\n\n  get urlB64Key(): string {\n    return Utils.fromBufferToUrlB64(this.key);\n  }\n\n  get maxAccessCountReached(): boolean {\n    if (this.maxAccessCount == null) {\n      return false;\n    }\n    return this.accessCount >= this.maxAccessCount;\n  }\n\n  get expired(): boolean {\n    if (this.expirationDate == null) {\n      return false;\n    }\n    return this.expirationDate <= new Date();\n  }\n\n  get pendingDelete(): boolean {\n    return this.deletionDate <= new Date();\n  }\n\n  toJSON() {\n    return Utils.merge(\n      { ...this },\n      {\n        key: Utils.fromBufferToB64(this.key),\n      }\n    );\n  }\n\n  static fromJSON(json: DeepJsonify<SendView>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new SendView(), json, {\n      key: Utils.fromB64ToArray(json.key)?.buffer,\n      cryptoKey: SymmetricCryptoKey.fromJSON(json.cryptoKey),\n      text: SendTextView.fromJSON(json.text),\n      file: SendFileView.fromJSON(json.file),\n      revisionDate: json.revisionDate == null ? null : new Date(json.revisionDate),\n      deletionDate: json.deletionDate == null ? null : new Date(json.deletionDate),\n      expirationDate: json.expirationDate == null ? null : new Date(json.expirationDate),\n    });\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { EncArrayBuffer } from \"../../../models/domain/enc-array-buffer\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { SendData } from \"../models/data/send.data\";\nimport { Send } from \"../models/domain/send\";\nimport { SendView } from \"../models/view/send.view\";\n\nexport abstract class SendService {\n  sends$: Observable<Send[]>;\n  sendViews$: Observable<SendView[]>;\n\n  encrypt: (\n    model: SendView,\n    file: File | ArrayBuffer,\n    password: string,\n    key?: SymmetricCryptoKey\n  ) => Promise<[Send, EncArrayBuffer]>;\n  get: (id: string) => Send;\n  /**\n   * @deprecated Do not call this, use the sends$ observable collection\n   */\n  getAll: () => Promise<Send[]>;\n  /**\n   * @deprecated Only use in CLI\n   */\n  getFromState: (id: string) => Promise<Send>;\n  /**\n   * @deprecated Only use in CLI\n   */\n  getAllDecryptedFromState: () => Promise<SendView[]>;\n}\n\nexport abstract class InternalSendService extends SendService {\n  upsert: (send: SendData | SendData[]) => Promise<any>;\n  replace: (sends: { [id: string]: SendData }) => Promise<void>;\n  clear: (userId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n}\n","import { EncArrayBuffer } from \"../../../models/domain/enc-array-buffer\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { Send } from \"../models/domain/send\";\nimport { SendAccessRequest } from \"../models/request/send-access.request\";\nimport { SendRequest } from \"../models/request/send.request\";\nimport { SendAccessResponse } from \"../models/response/send-access.response\";\nimport { SendFileDownloadDataResponse } from \"../models/response/send-file-download-data.response\";\nimport { SendFileUploadDataResponse } from \"../models/response/send-file-upload-data.response\";\nimport { SendResponse } from \"../models/response/send.response\";\nimport { SendAccessView } from \"../models/view/send-access.view\";\n\nexport abstract class SendApiService {\n  getSend: (id: string) => Promise<SendResponse>;\n  postSendAccess: (\n    id: string,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ) => Promise<SendAccessResponse>;\n  getSends: () => Promise<ListResponse<SendResponse>>;\n  postSend: (request: SendRequest) => Promise<SendResponse>;\n  postFileTypeSend: (request: SendRequest) => Promise<SendFileUploadDataResponse>;\n  postSendFile: (sendId: string, fileId: string, data: FormData) => Promise<any>;\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  postSendFileLegacy: (data: FormData) => Promise<SendResponse>;\n  putSend: (id: string, request: SendRequest) => Promise<SendResponse>;\n  putSendRemovePassword: (id: string) => Promise<SendResponse>;\n  deleteSend: (id: string) => Promise<any>;\n  getSendFileDownloadData: (\n    send: SendAccessView,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ) => Promise<SendFileDownloadDataResponse>;\n  renewSendFileUploadUrl: (sendId: string, fileId: string) => Promise<SendFileUploadDataResponse>;\n  removePassword: (id: string) => Promise<any>;\n  delete: (id: string) => Promise<any>;\n  save: (sendData: [Send, EncArrayBuffer]) => Promise<any>;\n}\n","import { DatePipe } from \"@angular/common\";\nimport { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { UntypedFormControl, UntypedFormGroup } from \"@angular/forms\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\n// Different BrowserPath = different controls.\nenum BrowserPath {\n  // Native datetime-locale.\n  // We are happy.\n  Default = \"default\",\n\n  // Native date and time inputs, but no datetime-locale.\n  // We use individual date and time inputs and create a datetime programatically on submit.\n  Firefox = \"firefox\",\n\n  // No native date, time, or datetime-locale inputs.\n  // We use a polyfill for dates and a dropdown for times.\n  Safari = \"safari\",\n}\n\nenum DateField {\n  DeletionDate = \"deletion\",\n  ExpriationDate = \"expiration\",\n}\n\n// Value = hours\nenum DatePreset {\n  OneHour = 1,\n  OneDay = 24,\n  TwoDays = 48,\n  ThreeDays = 72,\n  SevenDays = 168,\n  ThirtyDays = 720,\n  Custom = 0,\n  Never = null,\n}\n\n// TimeOption is used for the dropdown implementation of custom times\n// twelveHour = displayed time; twentyFourHour = time used in logic\ninterface TimeOption {\n  twelveHour: string;\n  twentyFourHour: string;\n}\n\n@Directive()\nexport class EffluxDatesComponent implements OnInit {\n  @Input() readonly initialDeletionDate: Date;\n  @Input() readonly initialExpirationDate: Date;\n  @Input() readonly editMode: boolean;\n  @Input() readonly disabled: boolean;\n\n  @Output() datesChanged = new EventEmitter<{ deletionDate: string; expirationDate: string }>();\n\n  get browserPath(): BrowserPath {\n    if (this.platformUtilsService.isFirefox()) {\n      return BrowserPath.Firefox;\n    } else if (this.platformUtilsService.isSafari()) {\n      return BrowserPath.Safari;\n    }\n    return BrowserPath.Default;\n  }\n\n  datesForm = new UntypedFormGroup({\n    selectedDeletionDatePreset: new UntypedFormControl(),\n    selectedExpirationDatePreset: new UntypedFormControl(),\n    defaultDeletionDateTime: new UntypedFormControl(),\n    defaultExpirationDateTime: new UntypedFormControl(),\n    fallbackDeletionDate: new UntypedFormControl(),\n    fallbackDeletionTime: new UntypedFormControl(),\n    fallbackExpirationDate: new UntypedFormControl(),\n    fallbackExpirationTime: new UntypedFormControl(),\n  });\n\n  deletionDatePresets: any[] = [\n    { name: this.i18nService.t(\"oneHour\"), value: DatePreset.OneHour },\n    { name: this.i18nService.t(\"oneDay\"), value: DatePreset.OneDay },\n    { name: this.i18nService.t(\"days\", \"2\"), value: DatePreset.TwoDays },\n    { name: this.i18nService.t(\"days\", \"3\"), value: DatePreset.ThreeDays },\n    { name: this.i18nService.t(\"days\", \"7\"), value: DatePreset.SevenDays },\n    { name: this.i18nService.t(\"days\", \"30\"), value: DatePreset.ThirtyDays },\n    { name: this.i18nService.t(\"custom\"), value: DatePreset.Custom },\n  ];\n\n  expirationDatePresets: any[] = [\n    { name: this.i18nService.t(\"never\"), value: DatePreset.Never },\n  ].concat([...this.deletionDatePresets]);\n\n  get selectedDeletionDatePreset(): UntypedFormControl {\n    return this.datesForm.get(\"selectedDeletionDatePreset\") as UntypedFormControl;\n  }\n\n  get selectedExpirationDatePreset(): UntypedFormControl {\n    return this.datesForm.get(\"selectedExpirationDatePreset\") as UntypedFormControl;\n  }\n\n  get defaultDeletionDateTime(): UntypedFormControl {\n    return this.datesForm.get(\"defaultDeletionDateTime\") as UntypedFormControl;\n  }\n\n  get defaultExpirationDateTime(): UntypedFormControl {\n    return this.datesForm.get(\"defaultExpirationDateTime\") as UntypedFormControl;\n  }\n\n  get fallbackDeletionDate(): UntypedFormControl {\n    return this.datesForm.get(\"fallbackDeletionDate\") as UntypedFormControl;\n  }\n\n  get fallbackDeletionTime(): UntypedFormControl {\n    return this.datesForm.get(\"fallbackDeletionTime\") as UntypedFormControl;\n  }\n\n  get fallbackExpirationDate(): UntypedFormControl {\n    return this.datesForm.get(\"fallbackExpirationDate\") as UntypedFormControl;\n  }\n\n  get fallbackExpirationTime(): UntypedFormControl {\n    return this.datesForm.get(\"fallbackExpirationTime\") as UntypedFormControl;\n  }\n\n  // Should be able to call these at any time and compute a submitable value\n  get formattedDeletionDate(): string {\n    switch (this.selectedDeletionDatePreset.value as DatePreset) {\n      case DatePreset.Never:\n        this.selectedDeletionDatePreset.setValue(DatePreset.SevenDays);\n        return this.formattedDeletionDate;\n      case DatePreset.Custom:\n        switch (this.browserPath) {\n          case BrowserPath.Safari:\n          case BrowserPath.Firefox:\n            return this.fallbackDeletionDate.value + \"T\" + this.fallbackDeletionTime.value;\n          default:\n            return this.defaultDeletionDateTime.value;\n        }\n      default: {\n        const now = new Date();\n        const miliseconds = now.setTime(\n          now.getTime() + (this.selectedDeletionDatePreset.value as number) * 60 * 60 * 1000\n        );\n        return new Date(miliseconds).toString();\n      }\n    }\n  }\n\n  get formattedExpirationDate(): string {\n    switch (this.selectedExpirationDatePreset.value as DatePreset) {\n      case DatePreset.Never:\n        return null;\n      case DatePreset.Custom:\n        switch (this.browserPath) {\n          case BrowserPath.Safari:\n          case BrowserPath.Firefox:\n            if (\n              (!this.fallbackExpirationDate.value || !this.fallbackExpirationTime.value) &&\n              this.editMode\n            ) {\n              return null;\n            }\n            return this.fallbackExpirationDate.value + \"T\" + this.fallbackExpirationTime.value;\n          default:\n            if (!this.defaultExpirationDateTime.value) {\n              return null;\n            }\n            return this.defaultExpirationDateTime.value;\n        }\n      default: {\n        const now = new Date();\n        const miliseconds = now.setTime(\n          now.getTime() + (this.selectedExpirationDatePreset.value as number) * 60 * 60 * 1000\n        );\n        return new Date(miliseconds).toString();\n      }\n    }\n  }\n  //\n\n  get safariDeletionTimePresetOptions() {\n    return this.safariTimePresetOptions(DateField.DeletionDate);\n  }\n\n  get safariExpirationTimePresetOptions() {\n    return this.safariTimePresetOptions(DateField.ExpriationDate);\n  }\n\n  private get nextWeek(): Date {\n    const nextWeek = new Date();\n    nextWeek.setDate(nextWeek.getDate() + 7);\n    return nextWeek;\n  }\n\n  constructor(\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected datePipe: DatePipe\n  ) {}\n\n  ngOnInit(): void {\n    this.setInitialFormValues();\n    this.emitDates();\n    this.datesForm.valueChanges.subscribe(() => {\n      this.emitDates();\n    });\n  }\n\n  onDeletionDatePresetSelect(value: DatePreset) {\n    this.selectedDeletionDatePreset.setValue(value);\n  }\n\n  clearExpiration() {\n    switch (this.browserPath) {\n      case BrowserPath.Safari:\n      case BrowserPath.Firefox:\n        this.fallbackExpirationDate.setValue(null);\n        this.fallbackExpirationTime.setValue(null);\n        break;\n      case BrowserPath.Default:\n        this.defaultExpirationDateTime.setValue(null);\n        break;\n    }\n  }\n\n  protected emitDates() {\n    this.datesChanged.emit({\n      deletionDate: this.formattedDeletionDate,\n      expirationDate: this.formattedExpirationDate,\n    });\n  }\n\n  protected setInitialFormValues() {\n    if (this.editMode) {\n      this.selectedDeletionDatePreset.setValue(DatePreset.Custom);\n      this.selectedExpirationDatePreset.setValue(DatePreset.Custom);\n      switch (this.browserPath) {\n        case BrowserPath.Safari:\n        case BrowserPath.Firefox:\n          this.fallbackDeletionDate.setValue(this.initialDeletionDate.toISOString().slice(0, 10));\n          this.fallbackDeletionTime.setValue(this.initialDeletionDate.toTimeString().slice(0, 5));\n          if (this.initialExpirationDate != null) {\n            this.fallbackExpirationDate.setValue(\n              this.initialExpirationDate.toISOString().slice(0, 10)\n            );\n            this.fallbackExpirationTime.setValue(\n              this.initialExpirationDate.toTimeString().slice(0, 5)\n            );\n          }\n          break;\n        case BrowserPath.Default:\n          if (this.initialExpirationDate) {\n            this.defaultExpirationDateTime.setValue(\n              this.datePipe.transform(new Date(this.initialExpirationDate), \"yyyy-MM-ddTHH:mm\")\n            );\n          }\n          this.defaultDeletionDateTime.setValue(\n            this.datePipe.transform(new Date(this.initialDeletionDate), \"yyyy-MM-ddTHH:mm\")\n          );\n          break;\n      }\n    } else {\n      this.selectedDeletionDatePreset.setValue(DatePreset.SevenDays);\n      this.selectedExpirationDatePreset.setValue(DatePreset.Never);\n\n      switch (this.browserPath) {\n        case BrowserPath.Safari:\n          this.fallbackDeletionDate.setValue(this.nextWeek.toISOString().slice(0, 10));\n          this.fallbackDeletionTime.setValue(\n            this.safariTimePresetOptions(DateField.DeletionDate)[1].twentyFourHour\n          );\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  protected safariTimePresetOptions(field: DateField): TimeOption[] {\n    // init individual arrays for major sort groups\n    const noon: TimeOption[] = [];\n    const midnight: TimeOption[] = [];\n    const ams: TimeOption[] = [];\n    const pms: TimeOption[] = [];\n\n    // determine minute skip (5 min, 10 min, 15 min, etc.)\n    const minuteIncrementer = 15;\n\n    // loop through each hour on a 12 hour system\n    for (let h = 1; h <= 12; h++) {\n      // loop through each minute in the hour using the skip to incriment\n      for (let m = 0; m < 60; m += minuteIncrementer) {\n        // init the final strings that will be added to the lists\n        let hour = h.toString();\n        let minutes = m.toString();\n\n        // add prepending 0s to single digit hours/minutes\n        if (h < 10) {\n          hour = \"0\" + hour;\n        }\n        if (m < 10) {\n          minutes = \"0\" + minutes;\n        }\n\n        // build time strings and push to relevant sort groups\n        if (h === 12) {\n          const midnightOption: TimeOption = {\n            twelveHour: `${hour}:${minutes} AM`,\n            twentyFourHour: `00:${minutes}`,\n          };\n          midnight.push(midnightOption);\n\n          const noonOption: TimeOption = {\n            twelveHour: `${hour}:${minutes} PM`,\n            twentyFourHour: `${hour}:${minutes}`,\n          };\n          noon.push(noonOption);\n        } else {\n          const amOption: TimeOption = {\n            twelveHour: `${hour}:${minutes} AM`,\n            twentyFourHour: `${hour}:${minutes}`,\n          };\n          ams.push(amOption);\n\n          const pmOption: TimeOption = {\n            twelveHour: `${hour}:${minutes} PM`,\n            twentyFourHour: `${h + 12}:${minutes}`,\n          };\n          pms.push(pmOption);\n        }\n      }\n    }\n\n    // bring all the arrays together in the right order\n    const validTimes = [...midnight, ...ams, ...noon, ...pms];\n\n    // determine if an unsupported value already exists on the send & add that to the top of the option list\n    // example: if the Send was created with a different client\n    if (field === DateField.ExpriationDate && this.initialExpirationDate != null && this.editMode) {\n      const previousValue: TimeOption = {\n        twelveHour: this.datePipe.transform(this.initialExpirationDate, \"hh:mm a\"),\n        twentyFourHour: this.datePipe.transform(this.initialExpirationDate, \"HH:mm\"),\n      };\n      return [previousValue, { twelveHour: null, twentyFourHour: null }, ...validTimes];\n    } else if (\n      field === DateField.DeletionDate &&\n      this.initialDeletionDate != null &&\n      this.editMode\n    ) {\n      const previousValue: TimeOption = {\n        twelveHour: this.datePipe.transform(this.initialDeletionDate, \"hh:mm a\"),\n        twentyFourHour: this.datePipe.transform(this.initialDeletionDate, \"HH:mm\"),\n      };\n      return [previousValue, ...validTimes];\n    } else {\n      return [{ twelveHour: null, twentyFourHour: null }, ...validTimes];\n    }\n  }\n}\n","import { DatePipe } from \"@angular/common\";\nimport { Directive, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { EncArrayBuffer } from \"@bitwarden/common/models/domain/enc-array-buffer\";\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { Send } from \"@bitwarden/common/tools/send/models/domain/send\";\nimport { SendFileView } from \"@bitwarden/common/tools/send/models/view/send-file.view\";\nimport { SendTextView } from \"@bitwarden/common/tools/send/models/view/send-text.view\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\n\n@Directive()\nexport class AddEditComponent implements OnInit, OnDestroy {\n  @Input() sendId: string;\n  @Input() type: SendType;\n\n  @Output() onSavedSend = new EventEmitter<SendView>();\n  @Output() onDeletedSend = new EventEmitter<SendView>();\n  @Output() onCancelled = new EventEmitter<SendView>();\n\n  copyLink = false;\n  disableSend = false;\n  disableHideEmail = false;\n  send: SendView;\n  deletionDate: string;\n  expirationDate: string;\n  hasPassword: boolean;\n  password: string;\n  showPassword = false;\n  formPromise: Promise<any>;\n  deletePromise: Promise<any>;\n  sendType = SendType;\n  typeOptions: any[];\n  canAccessPremium = true;\n  emailVerified = true;\n  alertShown = false;\n  showOptions = false;\n\n  protected componentName = \"\";\n  private sendLinkBaseUrl: string;\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected environmentService: EnvironmentService,\n    protected datePipe: DatePipe,\n    protected sendService: SendService,\n    protected messagingService: MessagingService,\n    protected policyService: PolicyService,\n    private logService: LogService,\n    protected stateService: StateService,\n    protected sendApiService: SendApiService\n  ) {\n    this.typeOptions = [\n      { name: i18nService.t(\"sendTypeFile\"), value: SendType.File },\n      { name: i18nService.t(\"sendTypeText\"), value: SendType.Text },\n    ];\n    this.sendLinkBaseUrl = this.environmentService.getSendUrl();\n  }\n\n  get link(): string {\n    if (this.send.id != null && this.send.accessId != null) {\n      return this.sendLinkBaseUrl + this.send.accessId + \"/\" + this.send.urlB64Key;\n    }\n    return null;\n  }\n\n  get isSafari() {\n    return this.platformUtilsService.isSafari();\n  }\n\n  get isDateTimeLocalSupported(): boolean {\n    return !(this.platformUtilsService.isFirefox() || this.platformUtilsService.isSafari());\n  }\n\n  async ngOnInit() {\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.DisableSend)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        this.disableSend = policyAppliesToActiveUser;\n      });\n\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.SendOptions, (p) => p.data.disableHideEmail)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        this.disableHideEmail = policyAppliesToActiveUser;\n      });\n\n    await this.load();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  get editMode(): boolean {\n    return this.sendId != null;\n  }\n\n  get title(): string {\n    return this.i18nService.t(this.editMode ? \"editSend\" : \"createSend\");\n  }\n\n  setDates(event: { deletionDate: string; expirationDate: string }) {\n    this.deletionDate = event.deletionDate;\n    this.expirationDate = event.expirationDate;\n  }\n\n  async load() {\n    this.canAccessPremium = await this.stateService.getCanAccessPremium();\n    this.emailVerified = await this.stateService.getEmailVerified();\n    if (!this.canAccessPremium || !this.emailVerified) {\n      this.type = SendType.Text;\n    }\n\n    if (this.send == null) {\n      if (this.editMode) {\n        const send = this.loadSend();\n        this.send = await send.decrypt();\n      } else {\n        this.send = new SendView();\n        this.send.type = this.type == null ? SendType.File : this.type;\n        this.send.file = new SendFileView();\n        this.send.text = new SendTextView();\n        this.send.deletionDate = new Date();\n        this.send.deletionDate.setDate(this.send.deletionDate.getDate() + 7);\n      }\n    }\n\n    this.hasPassword = this.send.password != null && this.send.password.trim() !== \"\";\n  }\n\n  async submit(): Promise<boolean> {\n    if (this.disableSend) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"sendDisabledWarning\")\n      );\n      return false;\n    }\n\n    if (this.send.name == null || this.send.name === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"nameRequired\")\n      );\n      return false;\n    }\n\n    let file: File = null;\n    if (this.send.type === SendType.File && !this.editMode) {\n      const fileEl = document.getElementById(\"file\") as HTMLInputElement;\n      const files = fileEl.files;\n      if (files == null || files.length === 0) {\n        this.platformUtilsService.showToast(\n          \"error\",\n          this.i18nService.t(\"errorOccurred\"),\n          this.i18nService.t(\"selectFile\")\n        );\n        return;\n      }\n\n      file = files[0];\n      if (files[0].size > 524288000) {\n        // 500 MB\n        this.platformUtilsService.showToast(\n          \"error\",\n          this.i18nService.t(\"errorOccurred\"),\n          this.i18nService.t(\"maxFileSize\")\n        );\n        return;\n      }\n    }\n\n    if (this.password != null && this.password.trim() === \"\") {\n      this.password = null;\n    }\n\n    this.formPromise = this.encryptSend(file).then(async (encSend) => {\n      const uploadPromise = this.sendApiService.save(encSend);\n      await uploadPromise;\n      if (this.send.id == null) {\n        this.send.id = encSend[0].id;\n      }\n      if (this.send.accessId == null) {\n        this.send.accessId = encSend[0].accessId;\n      }\n      this.onSavedSend.emit(this.send);\n      if (this.copyLink && this.link != null) {\n        await this.handleCopyLinkToClipboard();\n        return;\n      }\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode ? \"editedSend\" : \"createdSend\")\n      );\n    });\n    try {\n      await this.formPromise;\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n    return false;\n  }\n\n  async copyLinkToClipboard(link: string): Promise<void | boolean> {\n    return Promise.resolve(this.platformUtilsService.copyToClipboard(link));\n  }\n\n  async delete(): Promise<boolean> {\n    if (this.deletePromise != null) {\n      return false;\n    }\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"deleteSendConfirmation\"),\n      this.i18nService.t(\"deleteSend\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\",\n      false,\n      this.componentName != \"\" ? this.componentName + \" .modal-content\" : null\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.deletePromise = this.sendApiService.delete(this.send.id);\n      await this.deletePromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedSend\"));\n      await this.load();\n      this.onDeletedSend.emit(this.send);\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return false;\n  }\n\n  typeChanged() {\n    if (this.send.type === SendType.File && !this.alertShown) {\n      if (!this.canAccessPremium) {\n        this.alertShown = true;\n        this.messagingService.send(\"premiumRequired\");\n      } else if (!this.emailVerified) {\n        this.alertShown = true;\n        this.messagingService.send(\"emailVerificationRequired\");\n      }\n    }\n  }\n\n  toggleOptions() {\n    this.showOptions = !this.showOptions;\n  }\n\n  protected loadSend(): Send {\n    return this.sendService.get(this.sendId);\n  }\n\n  protected async encryptSend(file: File): Promise<[Send, EncArrayBuffer]> {\n    const sendData = await this.sendService.encrypt(this.send, file, this.password, null);\n\n    // Parse dates\n    try {\n      sendData[0].deletionDate = this.deletionDate == null ? null : new Date(this.deletionDate);\n    } catch {\n      sendData[0].deletionDate = null;\n    }\n    try {\n      sendData[0].expirationDate =\n        this.expirationDate == null ? null : new Date(this.expirationDate);\n    } catch {\n      sendData[0].expirationDate = null;\n    }\n\n    return sendData;\n  }\n\n  protected togglePasswordVisible() {\n    this.showPassword = !this.showPassword;\n    document.getElementById(\"password\").focus();\n  }\n  private async handleCopyLinkToClipboard() {\n    const copySuccess = await this.copyLinkToClipboard(this.link);\n    if (copySuccess ?? true) {\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode ? \"editedSend\" : \"createdSend\")\n      );\n    } else {\n      await this.platformUtilsService.showDialog(\n        this.i18nService.t(this.editMode ? \"editedSend\" : \"createdSend\"),\n        null,\n        this.i18nService.t(\"ok\"),\n        null,\n        \"success\",\n        null\n      );\n      await this.copyLinkToClipboard(this.link);\n    }\n  }\n}\n","import { StateService as BaseStateServiceAbstraction } from \"@bitwarden/common/abstractions/state.service\";\nimport { StorageOptions } from \"@bitwarden/common/models/domain/storage-options\";\n\nimport { Account } from \"../../models/account\";\nimport { BrowserComponentState } from \"../../models/browserComponentState\";\nimport { BrowserGroupingsComponentState } from \"../../models/browserGroupingsComponentState\";\nimport { BrowserSendComponentState } from \"../../models/browserSendComponentState\";\n\nexport abstract class BrowserStateService extends BaseStateServiceAbstraction<Account> {\n  getBrowserGroupingComponentState: (\n    options?: StorageOptions\n  ) => Promise<BrowserGroupingsComponentState>;\n  setBrowserGroupingComponentState: (\n    value: BrowserGroupingsComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getBrowserVaultItemsComponentState: (options?: StorageOptions) => Promise<BrowserComponentState>;\n  setBrowserVaultItemsComponentState: (\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getBrowserSendComponentState: (options?: StorageOptions) => Promise<BrowserSendComponentState>;\n  setBrowserSendComponentState: (\n    value: BrowserSendComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n  getBrowserSendTypeComponentState: (options?: StorageOptions) => Promise<BrowserComponentState>;\n  setBrowserSendTypeComponentState: (\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ) => Promise<void>;\n}\n","<ng-container [formGroup]=\"datesForm\">\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <ng-container *ngIf=\"!editMode\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"deletionDate\">{{ \"deletionDate\" | i18n }}</label>\n          <select\n            id=\"deletionDate\"\n            name=\"DeletionDateSelect\"\n            aria-describedby=\"deletionDateHelp\"\n            formControlName=\"selectedDeletionDatePreset\"\n            required\n          >\n            <option *ngFor=\"let o of deletionDatePresets\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n        <div class=\"box-content-row\" appBoxRow *ngIf=\"selectedDeletionDatePreset.value === 0\">\n          <ng-container *ngTemplateOutlet=\"deletionDateCustom\"></ng-container>\n        </div>\n      </ng-container>\n      <div class=\"box-content-row\" appBoxRow *ngIf=\"editMode\">\n        <label for=\"deletionDate\">{{ \"deletionDate\" | i18n }}</label>\n        <ng-container *ngTemplateOutlet=\"deletionDateCustom\"></ng-container>\n      </div>\n    </div>\n    <div id=\"deletionDateHelp\" class=\"box-footer\">\n      {{ \"deletionDateDesc\" | i18n }}\n      <ng-container\n        *ngIf=\"\n          !inPopout &&\n          browserPath == 'firefox' &&\n          (editMode || (selectedDeletionDatePreset.value === 0 && !editMode))\n        \"\n      >\n        <br />{{ \"sendFirefoxCustomDatePopoutMessage1\" | i18n }}\n        <a (click)=\"popOutWindow.emit()\">{{ \"sendFirefoxCustomDatePopoutMessage2\" | i18n }}</a>\n        {{ \"sendFirefoxCustomDatePopoutMessage3\" | i18n }}\n      </ng-container>\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <ng-container *ngIf=\"!editMode\">\n        <div class=\"box-content-row\" *ngIf=\"!editMode\" appBoxRow>\n          <label for=\"editExpirationDate\">{{ \"expirationDate\" | i18n }}</label>\n          <select\n            id=\"expirationDate\"\n            name=\"ExpirationDateSelect\"\n            aria-describedby=\"expirationDateHelp\"\n            formControlName=\"selectedExpirationDatePreset\"\n            required\n          >\n            <option *ngFor=\"let o of expirationDatePresets\" [ngValue]=\"o.value\">\n              {{ o.name }}\n            </option>\n          </select>\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"selectedExpirationDatePreset.value === 0\" appBoxRow>\n          <ng-container *ngTemplateOutlet=\"expirationDateCustom\"></ng-container>\n        </div>\n      </ng-container>\n      <div class=\"box-content-row\" *ngIf=\"editMode\" appBoxRow>\n        <div class=\"flex-label\">\n          <label>{{ \"expirationDate\" | i18n }}</label>\n          <button type=\"button\" *ngIf=\"!disabled\" appStopClick (click)=\"clearExpiration()\">\n            {{ \"clear\" | i18n }}\n          </button>\n        </div>\n        <ng-container *ngTemplateOutlet=\"expirationDateCustom\"></ng-container>\n      </div>\n    </div>\n    <div id=\"expirationDateHelp\" class=\"box-footer\">\n      {{ \"expirationDateDesc\" | i18n }}\n      <ng-container\n        *ngIf=\"\n          !inPopout &&\n          browserPath == 'firefox' &&\n          (editMode || (selectedExpirationDatePreset.value === 0 && !editMode))\n        \"\n      >\n        <br />{{ \"sendFirefoxCustomDatePopoutMessage1\" | i18n }}\n        <a (click)=\"popOutWindow.emit()\">{{ \"sendFirefoxCustomDatePopoutMessage2\" | i18n }}</a>\n        {{ \"sendFirefoxCustomDatePopoutMessage3\" | i18n }}\n      </ng-container>\n    </div>\n  </div>\n  <ng-template #deletionDateCustom>\n    <ng-container [ngSwitch]=\"browserPath\">\n      <ng-container *ngSwitchCase=\"'firefox'\">\n        <div class=\"flex flex-grow\">\n          <input\n            id=\"deletionDateCustomFallback\"\n            type=\"date\"\n            name=\"DeletionDateFallback\"\n            aria-describedby=\"deletionDateHelp\"\n            formControlName=\"fallbackDeletionDate\"\n            required\n            placeholder=\"MM/DD/YYYY\"\n            [readOnly]=\"disabled\"\n            data-date-format=\"mm/dd/yyyy\"\n          />\n          <input\n            id=\"deletionTimeCustomFallback\"\n            type=\"time\"\n            name=\"DeletionTimeDate\"\n            formControlName=\"fallbackDeletionTime\"\n            required\n            placeholder=\"HH:MM AM/PM\"\n            [readOnly]=\"disabled\"\n          />\n        </div>\n      </ng-container>\n      <ng-container *ngSwitchCase=\"'safari'\">\n        <div class=\"flex flex-grow\">\n          <input\n            id=\"deletionDateCustomFallback\"\n            type=\"date\"\n            name=\"DeletionDateFallback\"\n            aria-describedby=\"deletionDateHelp\"\n            formControlName=\"fallbackDeletionDate\"\n            required\n            placeholder=\"MM/DD/YYYY\"\n            [readOnly]=\"disabled\"\n            data-date-format=\"mm/dd/yyyy\"\n          />\n          <select\n            id=\"deletionTimeCustomFallback\"\n            formControlName=\"fallbackDeletionTime\"\n            name=\"SafariDeletionTime\"\n          >\n            <option *ngFor=\"let o of safariDeletionTimePresetOptions\" [ngValue]=\"o.twentyFourHour\">\n              {{ o.twelveHour }}\n            </option>\n          </select>\n        </div>\n      </ng-container>\n      <ng-container *ngSwitchDefault>\n        <input\n          id=\"deletionDateCustom\"\n          type=\"datetime-local\"\n          name=\"DeletionDate\"\n          aria-describedby=\"deletionDateHelp\"\n          formControlName=\"defaultDeletionDateTime\"\n          required\n          placeholder=\"MM/DD/YYYY HH:MM AM/PM\"\n        />\n      </ng-container>\n    </ng-container>\n  </ng-template>\n  <ng-template #expirationDateCustom>\n    <ng-container [ngSwitch]=\"browserPath\">\n      <ng-container *ngSwitchCase=\"'firefox'\">\n        <div class=\"flex flex-grow\">\n          <input\n            id=\"expirationDateCustomFallback\"\n            type=\"date\"\n            name=\"ExpirationDateFallback\"\n            aria-describedby=\"expirationDateHelp\"\n            formControlName=\"fallbackExpirationDate\"\n            [required]=\"!editMode\"\n            placeholder=\"MM/DD/YYYY\"\n            [readOnly]=\"disabled\"\n            data-date-format=\"mm/dd/yyyy\"\n          />\n          <input\n            id=\"expirationTimeCustomFallback\"\n            type=\"time\"\n            name=\"ExpirationTimeFallback\"\n            formControlName=\"fallbackExpirationTime\"\n            [required]=\"!editMode\"\n            placeholder=\"HH:MM AM/PM\"\n            [readOnly]=\"disabled\"\n          />\n        </div>\n      </ng-container>\n      <ng-container *ngSwitchCase=\"'safari'\">\n        <div class=\"flex flex-grow\">\n          <input\n            id=\"expirationDateCustomFallback\"\n            type=\"date\"\n            name=\"ExpirationDateFallback\"\n            aria-describedby=\"expirationDateHelp\"\n            formControlName=\"fallbackExpirationDate\"\n            [required]=\"!editMode\"\n            placeholder=\"MM/DD/YYYY\"\n            [readOnly]=\"disabled\"\n            data-date-format=\"mm/dd/yyyy\"\n          />\n          <select\n            id=\"expirationTimeCustomFallback\"\n            formControlName=\"fallbackExpirationTime\"\n            name=\"SafariExpirationTime\"\n          >\n            <option\n              *ngFor=\"let o of safariExpirationTimePresetOptions\"\n              [ngValue]=\"o.twentyFourHour\"\n            >\n              {{ o.twelveHour }}\n            </option>\n          </select>\n        </div>\n      </ng-container>\n      <ng-container *ngSwitchDefault>\n        <input\n          id=\"expirationDateCustom\"\n          type=\"datetime-local\"\n          name=\"ExpirationDate\"\n          aria-describedby=\"expirationDateHelp\"\n          formControlName=\"defaultExpirationDateTime\"\n          required\n          placeholder=\"MM/DD/YYYY HH:MM AM/PM\"\n          [readOnly]=\"disabled\"\n        />\n      </ng-container>\n    </ng-container>\n  </ng-template>\n</ng-container>\n","import { DatePipe } from \"@angular/common\";\nimport { Component, EventEmitter, Input, Output } from \"@angular/core\";\nimport { ControlContainer, NgForm } from \"@angular/forms\";\n\nimport { EffluxDatesComponent as BaseEffluxDatesComponent } from \"@bitwarden/angular/tools/send/efflux-dates.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\n@Component({\n  selector: \"app-send-efflux-dates\",\n  templateUrl: \"efflux-dates.component.html\",\n  viewProviders: [{ provide: ControlContainer, useExisting: NgForm }],\n})\nexport class EffluxDatesComponent extends BaseEffluxDatesComponent {\n  @Input() readonly inPopout: boolean;\n  @Output() popOutWindow = new EventEmitter();\n\n  constructor(\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected datePipe: DatePipe\n  ) {\n    super(i18nService, platformUtilsService, datePipe);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"cancel()\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading || disableSend\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\" *ngIf=\"send\">\n    <!-- Policy Banner -->\n    <app-callout type=\"warning\" title=\"{{ 'sendDisabled' | i18n }}\" *ngIf=\"disableSend\">\n      {{ \"sendDisabledWarning\" | i18n }}\n    </app-callout>\n    <app-callout type=\"info\" *ngIf=\"disableHideEmail && !disableSend\">\n      {{ \"sendOptionsPolicyInEffect\" | i18n }}\n    </app-callout>\n    <!-- File Warning -->\n    <app-callout\n      type=\"warning\"\n      icon=\"bwi-external-link bwi-rotate-270 bwi-fw\"\n      [clickable]=\"true\"\n      title=\"{{ 'sendFileCalloutHeader' | i18n }}\"\n      *ngIf=\"showFilePopoutMessage && send.type === sendType.File && !disableSend\"\n      (click)=\"popOutWindow()\"\n    >\n      <div *ngIf=\"showChromiumFileWarning\">{{ \"sendLinuxChromiumFileWarning\" | i18n }}</div>\n      <div *ngIf=\"showFirefoxFileWarning\">{{ \"sendFirefoxFileWarning\" | i18n }}</div>\n      <div *ngIf=\"showSafariFileWarning\">{{ \"sendSafariFileWarning\" | i18n }}</div>\n    </app-callout>\n    <!-- Name -->\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"name\">{{ \"name\" | i18n }}</label>\n          <input\n            id=\"name\"\n            type=\"text\"\n            name=\"Name\"\n            aria-describedby=\"nameHelp\"\n            [(ngModel)]=\"send.name\"\n            [readonly]=\"disableSend\"\n          />\n        </div>\n      </div>\n      <div id=\"nameHelp\" class=\"box-footer\">\n        {{ \"sendNameDesc\" | i18n }}\n      </div>\n    </div>\n    <!-- Type Options -->\n    <div class=\"box\" *ngIf=\"!editMode\">\n      <div class=\"box-content no-hover\">\n        <div class=\"box-content-row\">\n          <label for=\"sendTypeOptions\">{{ \"sendTypeHeader\" | i18n }}</label>\n          <div\n            class=\"radio-group text-default\"\n            appBoxRow\n            name=\"SendTypeOptions\"\n            *ngFor=\"let o of typeOptions\"\n          >\n            <input\n              type=\"radio\"\n              [(ngModel)]=\"send.type\"\n              name=\"Type_{{ o.value }}\"\n              id=\"type_{{ o.value }}\"\n              [value]=\"o.value\"\n              (change)=\"typeChanged()\"\n              [checked]=\"send.type === o.value\"\n              [readonly]=\"disableSend\"\n            />\n            <label for=\"type_{{ o.value }}\">\n              {{ o.name }}\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- File -->\n    <div class=\"box\" *ngIf=\"send.type === sendType.File && (editMode || showFileSelector)\">\n      <div class=\"box-content no-hover\">\n        <div class=\"box-content-row\" *ngIf=\"editMode\">\n          <label for=\"file\">{{ \"file\" | i18n }}</label>\n          <div class=\"row-main\">{{ send.file.fileName }} ({{ send.file.sizeName }})</div>\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"showFileSelector\">\n          <label for=\"file\">{{ \"file\" | i18n }}</label>\n          <input\n            type=\"file\"\n            id=\"file\"\n            name=\"file\"\n            aria-describedby=\"fileHelp\"\n            required\n            [readonly]=\"disableSend\"\n          />\n        </div>\n      </div>\n      <div id=\"fileHelp\" class=\"box-footer\" *ngIf=\"showFileSelector\">\n        {{ \"sendFileDesc\" | i18n }} {{ \"maxFileSize\" | i18n }}\n      </div>\n    </div>\n    <!-- Text -->\n    <div class=\"box\" *ngIf=\"send.type === sendType.Text\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"text\">{{ \"sendTypeText\" | i18n }}</label>\n          <textarea\n            id=\"text\"\n            name=\"Text\"\n            aria-describedby=\"textHelp\"\n            rows=\"6\"\n            [(ngModel)]=\"send.text.text\"\n            [readonly]=\"disableSend\"\n          ></textarea>\n        </div>\n      </div>\n      <div id=\"textHelp\" class=\"box-footer\">\n        {{ \"sendTextDesc\" | i18n }}\n      </div>\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"hideText\">{{ \"sendHideText\" | i18n }}</label>\n          <input\n            id=\"hideText\"\n            type=\"checkbox\"\n            name=\"HideText\"\n            [(ngModel)]=\"send.text.hidden\"\n            [disabled]=\"disableSend\"\n          />\n        </div>\n      </div>\n    </div>\n    <!-- Share -->\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"share\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <!-- Copy Link on Save -->\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"copyOnSave\">{{ \"sendShareDesc\" | i18n }}</label>\n          <input\n            id=\"copyOnSave\"\n            type=\"checkbox\"\n            name=\"CopyOnSave\"\n            [(ngModel)]=\"copyLink\"\n            [disabled]=\"disableSend\"\n          />\n        </div>\n      </div>\n    </div>\n    <!-- Options -->\n    <div class=\"box\">\n      <h2>\n        <button\n          type=\"button\"\n          class=\"box-header-expandable\"\n          (click)=\"showOptions = !showOptions\"\n          [attr.aria-expanded]=\"showOptions\"\n        >\n          <i *ngIf=\"!showOptions\" class=\"bwi bwi-angle-right bwi-sm icon\" aria-hidden=\"true\"></i>\n          <i *ngIf=\"showOptions\" class=\"bwi bwi-angle-down bwi-sm icon\" aria-hidden=\"true\"></i>\n          {{ \"options\" | i18n }}\n        </button>\n      </h2>\n    </div>\n    <div [hidden]=\"!showOptions\">\n      <app-send-efflux-dates\n        [initialDeletionDate]=\"send.deletionDate\"\n        [initialExpirationDate]=\"send.expirationDate\"\n        [editMode]=\"editMode\"\n        [disabled]=\"disableSend\"\n        (datesChanged)=\"setDates($event)\"\n        (popOutWindow)=\"popOutWindow()\"\n      >\n      </app-send-efflux-dates>\n      <!-- Maximum Access Count -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"maximumAccessCount\">{{ \"maximumAccessCount\" | i18n }}</label>\n            <input\n              id=\"maximumAccessCount\"\n              min=\"1\"\n              type=\"number\"\n              name=\"MaximumAccessCount\"\n              aria-describedby=\"maximumAccessCountHelp\"\n              [(ngModel)]=\"send.maxAccessCount\"\n              [readonly]=\"disableSend\"\n            />\n          </div>\n        </div>\n        <div id=\"maximumAccessCountHelp\" class=\"box-footer\">\n          {{ \"maximumAccessCountDesc\" | i18n }}\n        </div>\n      </div>\n      <!-- Current Access Count -->\n      <div class=\"box\" *ngIf=\"editMode\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"currentAccessCount\">{{ \"currentAccessCount\" | i18n }}</label>\n            <input\n              id=\"currentAccessCount\"\n              readonly\n              type=\"text\"\n              name=\"CurrentAccessCount\"\n              [(ngModel)]=\"send.accessCount\"\n            />\n          </div>\n        </div>\n      </div>\n      <!-- Password -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"password\" *ngIf=\"hasPassword\">{{ \"newPassword\" | i18n }}</label>\n              <label for=\"password\" *ngIf=\"!hasPassword\">{{ \"password\" | i18n }}</label>\n              <input\n                id=\"password\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                name=\"Password\"\n                aria-describedby=\"passwordHelp\"\n                class=\"monospaced\"\n                [(ngModel)]=\"password\"\n                appInputVerbatim\n                [readonly]=\"disableSend\"\n              />\n            </div>\n            <div class=\"action-buttons\" *ngIf=\"!disableSend\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePasswordVisible()\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  aria-hidden=\"true\"\n                ></i>\n              </button>\n            </div>\n          </div>\n        </div>\n        <div id=\"passwordHelp\" class=\"box-footer\">\n          {{ \"sendPasswordDesc\" | i18n }}\n        </div>\n      </div>\n      <!-- Notes -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"notes\">{{ \"notes\" | i18n }}</label>\n            <textarea\n              id=\"notes\"\n              name=\"Notes\"\n              aria-describedby=\"notesHelp\"\n              rows=\"6\"\n              [(ngModel)]=\"send.notes\"\n              [readonly]=\"disableSend\"\n            ></textarea>\n          </div>\n        </div>\n        <div id=\"notesHelp\" class=\"box-footer\">\n          {{ \"sendNotesDesc\" | i18n }}\n        </div>\n      </div>\n      <!-- Hide Email -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"hideEmail\">{{ \"hideEmail\" | i18n }}</label>\n            <input\n              id=\"hideEmail\"\n              type=\"checkbox\"\n              name=\"HideEmail\"\n              [(ngModel)]=\"send.hideEmail\"\n              [disabled]=\"(disableHideEmail && !send.hideEmail) || disableSend\"\n            />\n          </div>\n        </div>\n      </div>\n      <!-- Disable Send -->\n      <div class=\"box\">\n        <div class=\"box-content\">\n          <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n            <label for=\"disableSend\">{{ \"sendDisableDesc\" | i18n }}</label>\n            <input\n              id=\"disableSend\"\n              type=\"checkbox\"\n              name=\"DisableSend\"\n              [(ngModel)]=\"send.disabled\"\n              [disabled]=\"disableSend\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- Delete -->\n    <div class=\"box list\" *ngIf=\"editMode\">\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"delete()\"\n          [appApiAction]=\"deletePromise\"\n          #deleteBtn\n        >\n          <div class=\"row-main text-danger\">\n            <div class=\"icon text-danger\" aria-hidden=\"true\">\n              <i class=\"bwi bwi-trash bwi-lg bwi-fw\" [hidden]=\"$any(deleteBtn).loading\"></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n              ></i>\n            </div>\n            <span>{{ \"deleteSend\" | i18n }}</span>\n          </div>\n        </button>\n      </div>\n    </div>\n  </main>\n</form>\n","import { DatePipe, Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { AddEditComponent as BaseAddEditComponent } from \"@bitwarden/angular/tools/send/add-edit.component\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\n\nimport { PopupUtilsService } from \"../../../popup/services/popup-utils.service\";\nimport { BrowserStateService } from \"../../../services/abstractions/browser-state.service\";\n\n@Component({\n  selector: \"app-send-add-edit\",\n  templateUrl: \"send-add-edit.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class SendAddEditComponent extends BaseAddEditComponent {\n  // Options header\n  showOptions = false;\n  // File visibility\n  isFirefox = false;\n  inPopout = false;\n  inSidebar = false;\n  isLinux = false;\n  isUnsupportedMac = false;\n\n  constructor(\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    stateService: BrowserStateService,\n    messagingService: MessagingService,\n    policyService: PolicyService,\n    environmentService: EnvironmentService,\n    datePipe: DatePipe,\n    sendService: SendService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private popupUtilsService: PopupUtilsService,\n    logService: LogService,\n    sendApiService: SendApiService\n  ) {\n    super(\n      i18nService,\n      platformUtilsService,\n      environmentService,\n      datePipe,\n      sendService,\n      messagingService,\n      policyService,\n      logService,\n      stateService,\n      sendApiService\n    );\n  }\n\n  get showFileSelector(): boolean {\n    return !(this.editMode || this.showFilePopoutMessage);\n  }\n\n  get showFilePopoutMessage(): boolean {\n    return (\n      !this.editMode &&\n      (this.showFirefoxFileWarning || this.showSafariFileWarning || this.showChromiumFileWarning)\n    );\n  }\n\n  get showFirefoxFileWarning(): boolean {\n    return this.isFirefox && !(this.inSidebar || this.inPopout);\n  }\n\n  get showSafariFileWarning(): boolean {\n    return this.isSafari && !this.inPopout;\n  }\n\n  // Only show this for Chromium based browsers in Linux and Mac > Big Sur\n  get showChromiumFileWarning(): boolean {\n    return (\n      (this.isLinux || this.isUnsupportedMac) &&\n      !this.isFirefox &&\n      !(this.inSidebar || this.inPopout)\n    );\n  }\n\n  popOutWindow() {\n    this.popupUtilsService.popOut(window);\n  }\n\n  async ngOnInit() {\n    // File visilibity\n    this.isFirefox = this.platformUtilsService.isFirefox();\n    this.inPopout = this.popupUtilsService.inPopout(window);\n    this.inSidebar = this.popupUtilsService.inSidebar(window);\n    this.isLinux = window?.navigator?.userAgent.indexOf(\"Linux\") !== -1;\n    this.isUnsupportedMac =\n      this.platformUtilsService.isChrome() && window?.navigator?.appVersion.includes(\"Mac OS X 11\");\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.sendId) {\n        this.sendId = params.sendId;\n      }\n      if (params.type) {\n        const type = parseInt(params.type, null);\n        this.type = type;\n      }\n      await super.ngOnInit();\n    });\n\n    window.setTimeout(() => {\n      if (!this.editMode) {\n        document.getElementById(\"name\").focus();\n      }\n    }, 200);\n  }\n\n  async submit(): Promise<boolean> {\n    if (await super.submit()) {\n      this.cancel();\n      return true;\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    if (await super.delete()) {\n      this.cancel();\n      return true;\n    }\n\n    return false;\n  }\n\n  cancel() {\n    // If true, the window was pop'd out on the add-send page. location.back will not work\n    if ((window as any).previousPopupUrl.startsWith(\"/add-send\")) {\n      this.router.navigate([\"tabs/send\"]);\n    } else {\n      this.location.back();\n    }\n  }\n}\n","import { SendView } from \"../tools/send/models/view/send.view\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\n\nexport abstract class SearchService {\n  indexedEntityId?: string = null;\n  clearIndex: () => void;\n  isSearchable: (query: string) => boolean;\n  indexCiphers: (ciphersToIndex: CipherView[], indexedEntityGuid?: string) => void;\n  searchCiphers: (\n    query: string,\n    filter?: ((cipher: CipherView) => boolean) | ((cipher: CipherView) => boolean)[],\n    ciphers?: CipherView[]\n  ) => Promise<CipherView[]>;\n  searchCiphersBasic: (ciphers: CipherView[], query: string, deleted?: boolean) => CipherView[];\n  searchSends: (sends: SendView[], query: string) => SendView[];\n}\n","import { Directive, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Subject, takeUntil } from \"rxjs\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\n\n@Directive()\nexport class SendComponent implements OnInit, OnDestroy {\n  disableSend = false;\n  sendType = SendType;\n  loaded = false;\n  loading = true;\n  refreshing = false;\n  expired = false;\n  type: SendType = null;\n  sends: SendView[] = [];\n  filteredSends: SendView[] = [];\n  searchText: string;\n  selectedType: SendType;\n  selectedAll: boolean;\n  searchPlaceholder: string;\n  filter: (cipher: SendView) => boolean;\n  searchPending = false;\n  hasSearched = false; // search() function called - returns true if text qualifies for search\n\n  actionPromise: any;\n  onSuccessfulRemovePassword: () => Promise<any>;\n  onSuccessfulDelete: () => Promise<any>;\n  onSuccessfulLoad: () => Promise<any>;\n\n  private searchTimeout: any;\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    protected sendService: SendService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected environmentService: EnvironmentService,\n    protected ngZone: NgZone,\n    protected searchService: SearchService,\n    protected policyService: PolicyService,\n    private logService: LogService,\n    protected sendApiService: SendApiService\n  ) {}\n\n  async ngOnInit() {\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.DisableSend)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        this.disableSend = policyAppliesToActiveUser;\n      });\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async load(filter: (send: SendView) => boolean = null) {\n    this.loading = true;\n    this.sendService.sendViews$.pipe(takeUntil(this.destroy$)).subscribe((sends) => {\n      this.sends = sends;\n    });\n    if (this.onSuccessfulLoad != null) {\n      await this.onSuccessfulLoad();\n    } else {\n      // Default action\n      this.selectAll();\n    }\n    this.loading = false;\n    this.loaded = true;\n  }\n\n  async reload(filter: (send: SendView) => boolean = null) {\n    this.loaded = false;\n    this.sends = [];\n    await this.load(filter);\n  }\n\n  async refresh() {\n    try {\n      this.refreshing = true;\n      await this.reload(this.filter);\n    } finally {\n      this.refreshing = false;\n    }\n  }\n\n  async applyFilter(filter: (send: SendView) => boolean = null) {\n    this.filter = filter;\n    await this.search(null);\n  }\n\n  async search(timeout: number = null) {\n    this.searchPending = false;\n    if (this.searchTimeout != null) {\n      clearTimeout(this.searchTimeout);\n    }\n    if (timeout == null) {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      this.filteredSends = this.sends.filter((s) => this.filter == null || this.filter(s));\n      this.applyTextSearch();\n      return;\n    }\n    this.searchPending = true;\n    this.searchTimeout = setTimeout(async () => {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      this.filteredSends = this.sends.filter((s) => this.filter == null || this.filter(s));\n      this.applyTextSearch();\n      this.searchPending = false;\n    }, timeout);\n  }\n\n  async removePassword(s: SendView): Promise<boolean> {\n    if (this.actionPromise != null || s.password == null) {\n      return;\n    }\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"removePasswordConfirmation\"),\n      this.i18nService.t(\"removePassword\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.actionPromise = this.sendApiService.removePassword(s.id);\n      await this.actionPromise;\n      if (this.onSuccessfulRemovePassword != null) {\n        this.onSuccessfulRemovePassword();\n      } else {\n        // Default actions\n        this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"removedPassword\"));\n        await this.load();\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n    this.actionPromise = null;\n  }\n\n  async delete(s: SendView): Promise<boolean> {\n    if (this.actionPromise != null) {\n      return false;\n    }\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"deleteSendConfirmation\"),\n      this.i18nService.t(\"deleteSend\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.actionPromise = this.sendApiService.delete(s.id);\n      await this.actionPromise;\n\n      if (this.onSuccessfulDelete != null) {\n        this.onSuccessfulDelete();\n      } else {\n        // Default actions\n        this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedSend\"));\n        await this.refresh();\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n    this.actionPromise = null;\n    return true;\n  }\n\n  copy(s: SendView) {\n    const sendLinkBaseUrl = this.environmentService.getSendUrl();\n    const link = sendLinkBaseUrl + s.accessId + \"/\" + s.urlB64Key;\n    this.platformUtilsService.copyToClipboard(link);\n    this.platformUtilsService.showToast(\n      \"success\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"sendLink\"))\n    );\n  }\n\n  searchTextChanged() {\n    this.search(200);\n  }\n\n  selectAll() {\n    this.clearSelections();\n    this.selectedAll = true;\n    this.applyFilter(null);\n  }\n\n  selectType(type: SendType) {\n    this.clearSelections();\n    this.selectedType = type;\n    this.applyFilter((s) => s.type === type);\n  }\n\n  clearSelections() {\n    this.selectedAll = false;\n    this.selectedType = null;\n  }\n\n  private applyTextSearch() {\n    if (this.searchText != null) {\n      this.filteredSends = this.searchService.searchSends(this.filteredSends, this.searchText);\n    }\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nexport class BrowserComponentState {\n  scrollY: number;\n  searchText: string;\n\n  static fromJSON(json: Jsonify<BrowserComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserComponentState(), json);\n  }\n}\n","import { Utils } from \"@bitwarden/common/misc/utils\";\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { DeepJsonify } from \"@bitwarden/common/types/deep-jsonify\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\n\nexport class BrowserSendComponentState extends BrowserComponentState {\n  sends: SendView[];\n  typeCounts: Map<SendType, number>;\n\n  toJSON() {\n    return Utils.merge(this, {\n      typeCounts: Utils.mapToRecord(this.typeCounts),\n    });\n  }\n\n  static fromJSON(json: DeepJsonify<BrowserSendComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserSendComponentState(), json, {\n      sends: json.sends?.map((s) => SendView.fromJSON(s)),\n      typeCounts: Utils.recordToMap(json.typeCounts),\n    });\n  }\n}\n","import { Directive, HostListener } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appStopProp]\",\n})\nexport class StopPropDirective {\n  @HostListener(\"click\", [\"$event\"]) onClick($event: MouseEvent) {\n    $event.stopPropagation();\n  }\n}\n","<div\n  role=\"group\"\n  *ngFor=\"let s of sends\"\n  appA11yTitle=\"{{ s.name }}\"\n  class=\"box-content-row box-content-row-flex\"\n>\n  <button\n    type=\"button\"\n    class=\"row-main\"\n    (click)=\"selectSend(s)\"\n    appStopClick\n    title=\"{{ title }} - {{ s.name }}\"\n  >\n    <div class=\"app-vault-icon\">\n      <div class=\"icon\" aria-hidden=\"true\">\n        <i class=\"bwi bwi-fw bwi-lg bwi-file-text\" *ngIf=\"s.type === sendType.Text\"></i>\n        <i class=\"bwi bwi-fw bwi-lg bwi-file\" *ngIf=\"s.type === sendType.File\"></i>\n      </div>\n    </div>\n    <div class=\"row-main-content\">\n      <span class=\"text\">\n        {{ s.name }}\n        <ng-container *ngIf=\"s.disabled\">\n          <i\n            class=\"bwi bwi-exclamation-triangle text-muted\"\n            title=\"{{ 'disabled' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"disabled\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.password\">\n          <i\n            class=\"bwi bwi-key text-muted\"\n            title=\"{{ 'passwordProtected' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"passwordProtected\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.maxAccessCountReached\">\n          <i\n            class=\"bwi bwi-ban text-muted\"\n            title=\"{{ 'maxAccessCountReached' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"maxAccessCountReached\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.expired\">\n          <i class=\"bwi bwi-clock text-muted\" title=\"{{ 'expired' | i18n }}\" aria-hidden=\"true\"></i>\n          <span class=\"sr-only\">{{ \"expired\" | i18n }}</span>\n        </ng-container>\n        <ng-container *ngIf=\"s.pendingDelete\">\n          <i\n            class=\"bwi bwi-trash text-muted\"\n            title=\"{{ 'pendingDeletion' | i18n }}\"\n            aria-hidden=\"true\"\n          ></i>\n          <span class=\"sr-only\">{{ \"pendingDeletion\" | i18n }}</span>\n        </ng-container>\n      </span>\n      <span class=\"detail\">{{ s.deletionDate | date : \"medium\" }}</span>\n    </div>\n  </button>\n  <div class=\"action-buttons\">\n    <button\n      type=\"button\"\n      class=\"row-btn\"\n      appStopClick\n      appStopProp\n      appA11yTitle=\"{{ 'copySendLink' | i18n }}\"\n      (click)=\"copySendLink(s)\"\n    >\n      <i class=\"bwi bwi-lg bwi-files\" aria-hidden=\"true\"></i>\n    </button>\n    <button\n      type=\"button\"\n      class=\"row-btn\"\n      [ngClass]=\"{ disabled: disabledByPolicy }\"\n      [attr.disabled]=\"disabledByPolicy ? '' : null\"\n      appStopClick\n      appStopProp\n      appA11yTitle=\"{{ 'removePassword' | i18n }}\"\n      (click)=\"removePassword(s)\"\n      *ngIf=\"s.password\"\n    >\n      <i class=\"bwi bwi-lg bwi-undo\" aria-hidden=\"true\"></i>\n    </button>\n    <button\n      type=\"button\"\n      class=\"row-btn\"\n      appStopClick\n      appStopProp\n      appA11yTitle=\"{{ 'delete' | i18n }}\"\n      (click)=\"delete(s)\"\n    >\n      <i class=\"bwi bwi-lg bwi-trash\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\n\n@Component({\n  selector: \"app-send-list\",\n  templateUrl: \"send-list.component.html\",\n})\nexport class SendListComponent {\n  @Input() sends: SendView[];\n  @Input() title: string;\n  @Input() disabledByPolicy = false;\n  @Output() onSelected = new EventEmitter<SendView>();\n  @Output() onCopySendLink = new EventEmitter<SendView>();\n  @Output() onRemovePassword = new EventEmitter<SendView>();\n  @Output() onDeleteSend = new EventEmitter<SendView>();\n\n  sendType = SendType;\n\n  selectSend(s: SendView) {\n    this.onSelected.emit(s);\n  }\n\n  copySendLink(s: SendView) {\n    this.onCopySendLink.emit(s);\n  }\n\n  removePassword(s: SendView) {\n    this.onRemovePassword.emit(s);\n  }\n\n  delete(s: SendView) {\n    this.onDeleteSend.emit(s);\n  }\n}\n","<header>\n  <div class=\"left\" *ngIf=\"showLeftHeader\">\n    <app-pop-out></app-pop-out>\n  </div>\n  <h1 class=\"sr-only\">{{ \"send\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"search\"\n      placeholder=\"{{ 'searchSends' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\"></i>\n  </div>\n  <div class=\"right\">\n    <button\n      type=\"button\"\n      (click)=\"addSend()\"\n      appA11yTitle=\"{{ 'addSend' | i18n }}\"\n      [disabled]=\"disableSend\"\n    >\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" [ngClass]=\"{ flex: disableSend, 'tab-page': disableSend }\">\n  <app-callout type=\"warning\" title=\"{{ 'sendDisabled' | i18n }}\" *ngIf=\"disableSend\">\n    {{ \"sendDisabledWarning\" | i18n }}\n  </app-callout>\n  <div class=\"no-items\" *ngIf=\"(!sends || !sends.length) && !showSearching()\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\"></i>\n    <ng-container *ngIf=\"loaded\">\n      <img class=\"no-items-image\" aria-hidden=\"true\" />\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n      <button\n        type=\"button\"\n        (click)=\"addSend()\"\n        class=\"btn block primary link\"\n        [disabled]=\"disableSend\"\n      >\n        {{ \"addSend\" | i18n }}\n      </button>\n    </ng-container>\n  </div>\n  <ng-container *ngIf=\"sends && sends.length && !showSearching()\">\n    <div class=\"box list\">\n      <h2 class=\"box-header\">\n        {{ \"types\" | i18n }}\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(sendType.Text)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-file-text\"></i></div>\n            <span class=\"text\">{{ \"sendTypeText\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(sendType.Text) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(sendType.File)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-file\"></i></div>\n            <span class=\"text\">{{ \"sendTypeFile\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(sendType.File) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\">\n      <h2 class=\"box-header\">\n        {{ \"allSends\" | i18n }}\n        <div class=\"flex-right\">{{ sends.length }}</div>\n      </h2>\n      <div class=\"box-content\">\n        <app-send-list\n          [sends]=\"sends\"\n          title=\"{{ 'editItem' | i18n }}\"\n          [disabledByPolicy]=\"disableSend\"\n          (onSelected)=\"selectSend($event)\"\n          (onCopySendLink)=\"copy($event)\"\n          (onRemovePassword)=\"removePassword($event)\"\n          (onDeleteSend)=\"delete($event)\"\n        ></app-send-list>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"showSearching()\">\n    <div class=\"no-items\" *ngIf=\"!filteredSends || !filteredSends.length\">\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n    </div>\n    <div class=\"box list full-list\" *ngIf=\"filteredSends && filteredSends.length > 0\">\n      <div class=\"box-content\">\n        <app-send-list\n          [sends]=\"filteredSends\"\n          title=\"{{ 'editItem' | i18n }}\"\n          [disabledByPolicy]=\"disableSend\"\n          (onSelected)=\"selectSend($event)\"\n          (onCopySendLink)=\"copy($event)\"\n          (onRemovePassword)=\"removePassword($event)\"\n          (onDeleteSend)=\"delete($event)\"\n        >\n        </app-send-list>\n      </div>\n    </div>\n  </ng-container>\n</main>\n","import { ChangeDetectorRef, Component, NgZone } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { SendComponent as BaseSendComponent } from \"@bitwarden/angular/tools/send/send.component\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\nimport { BrowserSendComponentState } from \"../../../models/browserSendComponentState\";\nimport { PopupUtilsService } from \"../../../popup/services/popup-utils.service\";\nimport { BrowserStateService } from \"../../../services/abstractions/browser-state.service\";\n\nconst ComponentId = \"SendComponent\";\n\n@Component({\n  selector: \"app-send-groupings\",\n  templateUrl: \"send-groupings.component.html\",\n})\nexport class SendGroupingsComponent extends BaseSendComponent {\n  // Header\n  showLeftHeader = true;\n  // Send Type Calculations\n  typeCounts = new Map<SendType, number>();\n  // State Handling\n  state: BrowserSendComponentState;\n  private loadedTimeout: number;\n\n  constructor(\n    sendService: SendService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    environmentService: EnvironmentService,\n    ngZone: NgZone,\n    policyService: PolicyService,\n    searchService: SearchService,\n    private popupUtils: PopupUtilsService,\n    private stateService: BrowserStateService,\n    private router: Router,\n    private syncService: SyncService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private broadcasterService: BroadcasterService,\n    logService: LogService,\n    sendApiService: SendApiService\n  ) {\n    super(\n      sendService,\n      i18nService,\n      platformUtilsService,\n      environmentService,\n      ngZone,\n      searchService,\n      policyService,\n      logService,\n      sendApiService\n    );\n    super.onSuccessfulLoad = async () => {\n      this.calculateTypeCounts();\n      this.selectAll();\n    };\n  }\n\n  async ngOnInit() {\n    // Determine Header details\n    this.showLeftHeader = !(\n      this.popupUtils.inSidebar(window) && this.platformUtilsService.isFirefox()\n    );\n    // Clear state of Send Type Component\n    await this.stateService.setBrowserSendTypeComponentState(null);\n    // Let super class finish\n    await super.ngOnInit();\n    // Handle State Restore if necessary\n    const restoredScopeState = await this.restoreState();\n    if (this.state?.searchText != null) {\n      this.searchText = this.state.searchText;\n    }\n\n    if (!this.syncService.syncInProgress) {\n      this.load();\n    } else {\n      this.loadedTimeout = window.setTimeout(() => {\n        if (!this.loaded) {\n          this.load();\n        }\n      }, 5000);\n    }\n\n    if (!this.syncService.syncInProgress || restoredScopeState) {\n      window.setTimeout(() => this.popupUtils.setContentScrollY(window, this.state?.scrollY), 0);\n    }\n\n    // Load all sends if sync completed in background\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            window.setTimeout(() => {\n              this.load();\n            }, 500);\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    // Remove timeout\n    if (this.loadedTimeout != null) {\n      window.clearTimeout(this.loadedTimeout);\n    }\n    // Save state\n    this.saveState();\n    // Unsubscribe\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  async selectType(type: SendType) {\n    this.router.navigate([\"/send-type\"], { queryParams: { type: type } });\n  }\n\n  async selectSend(s: SendView) {\n    this.router.navigate([\"/edit-send\"], { queryParams: { sendId: s.id } });\n  }\n\n  async addSend() {\n    if (this.disableSend) {\n      return;\n    }\n    this.router.navigate([\"/add-send\"]);\n  }\n\n  async removePassword(s: SendView): Promise<boolean> {\n    if (this.disableSend) {\n      return;\n    }\n    super.removePassword(s);\n  }\n\n  showSearching() {\n    return (\n      this.hasSearched || (!this.searchPending && this.searchService.isSearchable(this.searchText))\n    );\n  }\n\n  private calculateTypeCounts() {\n    // Create type counts\n    const typeCounts = new Map<SendType, number>();\n    this.sends.forEach((s) => {\n      if (typeCounts.has(s.type)) {\n        typeCounts.set(s.type, typeCounts.get(s.type) + 1);\n      } else {\n        typeCounts.set(s.type, 1);\n      }\n    });\n    this.typeCounts = typeCounts;\n  }\n\n  private async saveState() {\n    this.state = Object.assign(new BrowserSendComponentState(), {\n      scrollY: this.popupUtils.getContentScrollY(window),\n      searchText: this.searchText,\n      sends: this.sends,\n      typeCounts: this.typeCounts,\n    });\n    await this.stateService.setBrowserSendComponentState(this.state);\n  }\n\n  private async restoreState(): Promise<boolean> {\n    this.state = await this.stateService.getBrowserSendComponentState();\n    if (this.state == null) {\n      return false;\n    }\n\n    if (this.state.sends != null) {\n      this.sends = this.state.sends;\n    }\n    if (this.state.typeCounts != null) {\n      this.typeCounts = this.state.typeCounts;\n    }\n\n    return true;\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"back()\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"sr-only\">{{ \"send\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"search\"\n      placeholder=\"{{ 'searchType' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\"></i>\n  </div>\n  <div class=\"right\">\n    <button\n      type=\"button\"\n      (click)=\"addSend()\"\n      appA11yTitle=\"{{ 'addSend' | i18n }}\"\n      [disabled]=\"disableSend\"\n    >\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" [ngClass]=\"{ flex: disableSend }\">\n  <app-callout type=\"warning\" title=\"{{ 'sendDisabled' | i18n }}\" *ngIf=\"disableSend\">\n    {{ \"sendDisabledWarning\" | i18n }}\n  </app-callout>\n  <div class=\"no-items\" *ngIf=\"!filteredSends.length\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\" aria-hidden=\"true\"></i>\n    <ng-container *ngIf=\"loaded\">\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n      <button\n        type=\"button\"\n        (click)=\"addSend()\"\n        class=\"btn block primary link\"\n        [disabled]=\"disableSend\"\n      >\n        {{ \"addSend\" | i18n }}\n      </button>\n    </ng-container>\n  </div>\n  <div class=\"box list only-list\" *ngIf=\"filteredSends.length\">\n    <h2 class=\"box-header\">\n      {{ groupingTitle }}\n      <span class=\"flex-right\">{{ filteredSends.length }}</span>\n    </h2>\n    <div class=\"box-content\">\n      <app-send-list\n        [sends]=\"filteredSends\"\n        title=\"{{ 'editItem' | i18n }}\"\n        [disabledByPolicy]=\"disableSend\"\n        (onSelected)=\"selectSend($event)\"\n        (onCopySendLink)=\"copy($event)\"\n        (onRemovePassword)=\"removePassword($event)\"\n        (onDeleteSend)=\"delete($event)\"\n      >\n      </app-send-list>\n    </div>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { SendComponent as BaseSendComponent } from \"@bitwarden/angular/tools/send/send.component\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { SendType } from \"@bitwarden/common/tools/send/enums/send-type\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\n\nimport { BrowserComponentState } from \"../../../models/browserComponentState\";\nimport { PopupUtilsService } from \"../../../popup/services/popup-utils.service\";\nimport { BrowserStateService } from \"../../../services/abstractions/browser-state.service\";\n\nconst ComponentId = \"SendTypeComponent\";\n\n@Component({\n  selector: \"app-send-type\",\n  templateUrl: \"send-type.component.html\",\n})\nexport class SendTypeComponent extends BaseSendComponent {\n  groupingTitle: string;\n  // State Handling\n  state: BrowserComponentState;\n  private refreshTimeout: number;\n  private applySavedState = true;\n\n  constructor(\n    sendService: SendService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    environmentService: EnvironmentService,\n    ngZone: NgZone,\n    policyService: PolicyService,\n    searchService: SearchService,\n    private popupUtils: PopupUtilsService,\n    private stateService: BrowserStateService,\n    private route: ActivatedRoute,\n    private location: Location,\n    private changeDetectorRef: ChangeDetectorRef,\n    private broadcasterService: BroadcasterService,\n    private router: Router,\n    logService: LogService,\n    sendApiService: SendApiService\n  ) {\n    super(\n      sendService,\n      i18nService,\n      platformUtilsService,\n      environmentService,\n      ngZone,\n      searchService,\n      policyService,\n      logService,\n      sendApiService\n    );\n    super.onSuccessfulLoad = async () => {\n      this.selectType(this.type);\n    };\n    this.applySavedState =\n      (window as any).previousPopupUrl != null &&\n      !(window as any).previousPopupUrl.startsWith(\"/send-type\");\n  }\n\n  async ngOnInit() {\n    // Let super class finish\n    await super.ngOnInit();\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (this.applySavedState) {\n        this.state = await this.stateService.getBrowserSendTypeComponentState();\n        if (this.state?.searchText != null) {\n          this.searchText = this.state.searchText;\n        }\n      }\n\n      if (params.type != null) {\n        this.type = parseInt(params.type, null);\n        switch (this.type) {\n          case SendType.Text:\n            this.groupingTitle = this.i18nService.t(\"sendTypeText\");\n            break;\n          case SendType.File:\n            this.groupingTitle = this.i18nService.t(\"sendTypeFile\");\n            break;\n          default:\n            break;\n        }\n        await this.load((s) => s.type === this.type);\n      }\n\n      // Restore state and remove reference\n      if (this.applySavedState && this.state != null) {\n        window.setTimeout(() => this.popupUtils.setContentScrollY(window, this.state?.scrollY), 0);\n      }\n      this.stateService.setBrowserSendTypeComponentState(null);\n    });\n\n    // Refresh Send list if sync completed in background\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (message.successfully) {\n              this.refreshTimeout = window.setTimeout(() => {\n                this.refresh();\n              }, 500);\n            }\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    // Remove timeout\n    if (this.refreshTimeout != null) {\n      window.clearTimeout(this.refreshTimeout);\n    }\n    // Save state\n    this.saveState();\n    // Unsubscribe\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  async selectSend(s: SendView) {\n    this.router.navigate([\"/edit-send\"], { queryParams: { sendId: s.id } });\n  }\n\n  async addSend() {\n    if (this.disableSend) {\n      return;\n    }\n    this.router.navigate([\"/add-send\"], { queryParams: { type: this.type } });\n  }\n\n  async removePassword(s: SendView): Promise<boolean> {\n    if (this.disableSend) {\n      return;\n    }\n    super.removePassword(s);\n  }\n\n  back() {\n    (window as any).routeDirection = \"b\";\n    this.location.back();\n  }\n\n  private async saveState() {\n    this.state = {\n      scrollY: this.popupUtils.getContentScrollY(window),\n      searchText: this.searchText,\n    };\n    await this.stateService.setBrowserSendTypeComponentState(this.state);\n  }\n}\n","import { map, Observable } from \"rxjs\";\n\nimport { I18nService } from \"../../../abstractions/i18n.service\";\nimport { Utils } from \"../../../misc/utils\";\nimport { OrganizationData } from \"../../models/data/organization.data\";\nimport { Organization } from \"../../models/domain/organization\";\n\nexport function canAccessVaultTab(org: Organization): boolean {\n  return org.canViewAssignedCollections || org.canViewAllCollections || org.canManageGroups;\n}\n\nexport function canAccessSettingsTab(org: Organization): boolean {\n  return (\n    org.isOwner ||\n    org.canManagePolicies ||\n    org.canManageSso ||\n    org.canManageScim ||\n    org.canAccessImportExport\n  );\n}\n\nexport function canAccessMembersTab(org: Organization): boolean {\n  return org.canManageUsers || org.canManageUsersPassword;\n}\n\nexport function canAccessGroupsTab(org: Organization): boolean {\n  return org.canManageGroups;\n}\n\nexport function canAccessReportingTab(org: Organization): boolean {\n  return org.canAccessReports || org.canAccessEventLogs;\n}\n\nexport function canAccessBillingTab(org: Organization): boolean {\n  return org.isOwner;\n}\n\nexport function canAccessOrgAdmin(org: Organization): boolean {\n  return (\n    canAccessMembersTab(org) ||\n    canAccessGroupsTab(org) ||\n    canAccessReportingTab(org) ||\n    canAccessBillingTab(org) ||\n    canAccessSettingsTab(org) ||\n    canAccessVaultTab(org)\n  );\n}\n\nexport function getOrganizationById(id: string) {\n  return map<Organization[], Organization | undefined>((orgs) => orgs.find((o) => o.id === id));\n}\n\nexport function canAccessAdmin(i18nService: I18nService) {\n  return map<Organization[], Organization[]>((orgs) =>\n    orgs.filter(canAccessOrgAdmin).sort(Utils.getSortFunction(i18nService, \"name\"))\n  );\n}\n\n/**\n * Returns `true` if a user is a member of an organization (rather than only being a ProviderUser)\n * @deprecated Use organizationService.memberOrganizations$ instead\n */\nexport function isMember(org: Organization): boolean {\n  return org.isMember;\n}\n\nexport abstract class OrganizationService {\n  organizations$: Observable<Organization[]>;\n\n  /**\n   * Organizations that the user is a member of (excludes organizations that they only have access to via a provider)\n   */\n  memberOrganizations$: Observable<Organization[]>;\n\n  get$: (id: string) => Observable<Organization | undefined>;\n  get: (id: string) => Organization;\n  getByIdentifier: (identifier: string) => Organization;\n  getAll: (userId?: string) => Promise<Organization[]>;\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the organization\n   */\n  getFromState: (id: string) => Promise<Organization>;\n  canManageSponsorships: () => Promise<boolean>;\n  hasOrganizations: () => boolean;\n}\n\nexport abstract class InternalOrganizationService extends OrganizationService {\n  replace: (organizations: { [id: string]: OrganizationData }) => Promise<void>;\n}\n","export enum CipherRepromptType {\n  None = 0,\n  Password = 1,\n}\n","export enum CipherType {\n  Login = 1,\n  SecureNote = 2,\n  Card = 3,\n  Identity = 4,\n}\n","import { LinkedIdType } from \"../enums\";\nimport { ItemView } from \"../vault/models/view/item.view\";\n\nexport class LinkedMetadata {\n  constructor(readonly propertyKey: string, private readonly _i18nKey?: string) {}\n\n  get i18nKey() {\n    return this._i18nKey ?? this.propertyKey;\n  }\n}\n\n/**\n * A decorator used to set metadata used by Linked custom fields. Apply it to a class property or getter to make it\n *    available as a Linked custom field option.\n * @param id - A unique value that is saved in the Field model. It is used to look up the decorated class property.\n * @param i18nKey - The i18n key used to describe the decorated class property in the UI. If it is null, then the name\n *    of the class property will be used as the i18n key.\n */\nexport function linkedFieldOption(id: LinkedIdType, i18nKey?: string) {\n  return (prototype: ItemView, propertyKey: string) => {\n    if (prototype.linkedFieldOptions == null) {\n      prototype.linkedFieldOptions = new Map<LinkedIdType, LinkedMetadata>();\n    }\n\n    prototype.linkedFieldOptions.set(id, new LinkedMetadata(propertyKey, i18nKey));\n  };\n}\n","import { LinkedMetadata } from \"../../../misc/linkedFieldOption.decorator\";\nimport { View } from \"../../../models/view/view\";\n\nexport abstract class ItemView implements View {\n  linkedFieldOptions: Map<number, LinkedMetadata>;\n  abstract get subTitle(): string;\n}\n","export enum InitializerKey {\n  Cipher = 0,\n  CipherView = 1,\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { CardLinkedId as LinkedId } from \"../../../enums\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class CardView extends ItemView {\n  @linkedFieldOption(LinkedId.CardholderName)\n  cardholderName: string = null;\n  @linkedFieldOption(LinkedId.ExpMonth, \"expirationMonth\")\n  expMonth: string = null;\n  @linkedFieldOption(LinkedId.ExpYear, \"expirationYear\")\n  expYear: string = null;\n  @linkedFieldOption(LinkedId.Code, \"securityCode\")\n  code: string = null;\n\n  private _brand: string = null;\n  private _number: string = null;\n  private _subTitle: string = null;\n\n  get maskedCode(): string {\n    return this.code != null ? \"•\".repeat(this.code.length) : null;\n  }\n\n  get maskedNumber(): string {\n    return this.number != null ? \"•\".repeat(this.number.length) : null;\n  }\n\n  @linkedFieldOption(LinkedId.Brand)\n  get brand(): string {\n    return this._brand;\n  }\n  set brand(value: string) {\n    this._brand = value;\n    this._subTitle = null;\n  }\n\n  @linkedFieldOption(LinkedId.Number)\n  get number(): string {\n    return this._number;\n  }\n  set number(value: string) {\n    this._number = value;\n    this._subTitle = null;\n  }\n\n  get subTitle(): string {\n    if (this._subTitle == null) {\n      this._subTitle = this.brand;\n      if (this.number != null && this.number.length >= 4) {\n        if (this._subTitle != null && this._subTitle !== \"\") {\n          this._subTitle += \", \";\n        } else {\n          this._subTitle = \"\";\n        }\n\n        // Show last 5 on amex, last 4 for all others\n        const count =\n          this.number.length >= 5 && this.number.match(new RegExp(\"^3[47]\")) != null ? 5 : 4;\n        this._subTitle += \"*\" + this.number.substr(this.number.length - count);\n      }\n    }\n    return this._subTitle;\n  }\n\n  get expiration(): string {\n    if (!this.expMonth && !this.expYear) {\n      return null;\n    }\n\n    let exp = this.expMonth != null ? (\"0\" + this.expMonth).slice(-2) : \"__\";\n    exp += \" / \" + (this.expYear != null ? this.formatYear(this.expYear) : \"____\");\n    return exp;\n  }\n\n  private formatYear(year: string): string {\n    return year.length === 2 ? \"20\" + year : year;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<CardView>>): CardView {\n    return Object.assign(new CardView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { View } from \"../../../models/view/view\";\nimport { Attachment } from \"../domain/attachment\";\n\nexport class AttachmentView implements View {\n  id: string = null;\n  url: string = null;\n  size: string = null;\n  sizeName: string = null;\n  fileName: string = null;\n  key: SymmetricCryptoKey = null;\n\n  constructor(a?: Attachment) {\n    if (!a) {\n      return;\n    }\n\n    this.id = a.id;\n    this.url = a.url;\n    this.size = a.size;\n    this.sizeName = a.sizeName;\n  }\n\n  get fileSize(): number {\n    try {\n      if (this.size != null) {\n        return parseInt(this.size, null);\n      }\n    } catch {\n      // Invalid file size.\n    }\n    return 0;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<AttachmentView>>): AttachmentView {\n    const key = obj.key == null ? null : SymmetricCryptoKey.fromJSON(obj.key);\n    return Object.assign(new AttachmentView(), obj, { key: key });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { FieldType, LinkedIdType } from \"../../../enums\";\nimport { View } from \"../../../models/view/view\";\nimport { Field } from \"../domain/field\";\n\nexport class FieldView implements View {\n  name: string = null;\n  value: string = null;\n  type: FieldType = null;\n  newField = false; // Marks if the field is new and hasn't been saved\n  showValue = false;\n  showCount = false;\n  linkedId: LinkedIdType = null;\n\n  constructor(f?: Field) {\n    if (!f) {\n      return;\n    }\n\n    this.type = f.type;\n    this.linkedId = f.linkedId;\n  }\n\n  get maskedValue(): string {\n    return this.value != null ? \"••••••••\" : null;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<FieldView>>): FieldView {\n    return Object.assign(new FieldView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { IdentityLinkedId as LinkedId } from \"../../../enums\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\nimport { Utils } from \"../../../misc/utils\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class IdentityView extends ItemView {\n  @linkedFieldOption(LinkedId.Title)\n  title: string = null;\n  @linkedFieldOption(LinkedId.MiddleName)\n  middleName: string = null;\n  @linkedFieldOption(LinkedId.Address1)\n  address1: string = null;\n  @linkedFieldOption(LinkedId.Address2)\n  address2: string = null;\n  @linkedFieldOption(LinkedId.Address3)\n  address3: string = null;\n  @linkedFieldOption(LinkedId.City, \"cityTown\")\n  city: string = null;\n  @linkedFieldOption(LinkedId.State, \"stateProvince\")\n  state: string = null;\n  @linkedFieldOption(LinkedId.PostalCode, \"zipPostalCode\")\n  postalCode: string = null;\n  @linkedFieldOption(LinkedId.Country)\n  country: string = null;\n  @linkedFieldOption(LinkedId.Company)\n  company: string = null;\n  @linkedFieldOption(LinkedId.Email)\n  email: string = null;\n  @linkedFieldOption(LinkedId.Phone)\n  phone: string = null;\n  @linkedFieldOption(LinkedId.Ssn)\n  ssn: string = null;\n  @linkedFieldOption(LinkedId.Username)\n  username: string = null;\n  @linkedFieldOption(LinkedId.PassportNumber)\n  passportNumber: string = null;\n  @linkedFieldOption(LinkedId.LicenseNumber)\n  licenseNumber: string = null;\n\n  private _firstName: string = null;\n  private _lastName: string = null;\n  private _subTitle: string = null;\n\n  constructor() {\n    super();\n  }\n\n  @linkedFieldOption(LinkedId.FirstName)\n  get firstName(): string {\n    return this._firstName;\n  }\n  set firstName(value: string) {\n    this._firstName = value;\n    this._subTitle = null;\n  }\n\n  @linkedFieldOption(LinkedId.LastName)\n  get lastName(): string {\n    return this._lastName;\n  }\n  set lastName(value: string) {\n    this._lastName = value;\n    this._subTitle = null;\n  }\n\n  get subTitle(): string {\n    if (this._subTitle == null && (this.firstName != null || this.lastName != null)) {\n      this._subTitle = \"\";\n      if (this.firstName != null) {\n        this._subTitle = this.firstName;\n      }\n      if (this.lastName != null) {\n        if (this._subTitle !== \"\") {\n          this._subTitle += \" \";\n        }\n        this._subTitle += this.lastName;\n      }\n    }\n\n    return this._subTitle;\n  }\n\n  @linkedFieldOption(LinkedId.FullName)\n  get fullName(): string {\n    if (\n      this.title != null ||\n      this.firstName != null ||\n      this.middleName != null ||\n      this.lastName != null\n    ) {\n      let name = \"\";\n      if (this.title != null) {\n        name += this.title + \" \";\n      }\n      if (this.firstName != null) {\n        name += this.firstName + \" \";\n      }\n      if (this.middleName != null) {\n        name += this.middleName + \" \";\n      }\n      if (this.lastName != null) {\n        name += this.lastName;\n      }\n      return name.trim();\n    }\n\n    return null;\n  }\n\n  get fullAddress(): string {\n    let address = this.address1;\n    if (!Utils.isNullOrWhitespace(this.address2)) {\n      if (!Utils.isNullOrWhitespace(address)) {\n        address += \", \";\n      }\n      address += this.address2;\n    }\n    if (!Utils.isNullOrWhitespace(this.address3)) {\n      if (!Utils.isNullOrWhitespace(address)) {\n        address += \", \";\n      }\n      address += this.address3;\n    }\n    return address;\n  }\n\n  get fullAddressPart2(): string {\n    if (this.city == null && this.state == null && this.postalCode == null) {\n      return null;\n    }\n    const city = this.city || \"-\";\n    const state = this.state;\n    const postalCode = this.postalCode || \"-\";\n    let addressPart2 = city;\n    if (!Utils.isNullOrWhitespace(state)) {\n      addressPart2 += \", \" + state;\n    }\n    addressPart2 += \", \" + postalCode;\n    return addressPart2;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<IdentityView>>): IdentityView {\n    return Object.assign(new IdentityView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { UriMatchType } from \"../../../enums\";\nimport { Utils } from \"../../../misc/utils\";\nimport { View } from \"../../../models/view/view\";\nimport { LoginUri } from \"../domain/login-uri\";\n\nconst CanLaunchWhitelist = [\n  \"https://\",\n  \"http://\",\n  \"ssh://\",\n  \"ftp://\",\n  \"sftp://\",\n  \"irc://\",\n  \"vnc://\",\n  // https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-uri\n  \"rdp://\", // Legacy RDP URI scheme\n  \"ms-rd:\", // Preferred RDP URI scheme\n  \"chrome://\",\n  \"iosapp://\",\n  \"androidapp://\",\n];\n\nexport class LoginUriView implements View {\n  match: UriMatchType = null;\n\n  private _uri: string = null;\n  private _domain: string = null;\n  private _hostname: string = null;\n  private _host: string = null;\n  private _canLaunch: boolean = null;\n\n  constructor(u?: LoginUri) {\n    if (!u) {\n      return;\n    }\n\n    this.match = u.match;\n  }\n\n  get uri(): string {\n    return this._uri;\n  }\n  set uri(value: string) {\n    this._uri = value;\n    this._domain = null;\n    this._canLaunch = null;\n  }\n\n  get domain(): string {\n    if (this._domain == null && this.uri != null) {\n      this._domain = Utils.getDomain(this.uri);\n      if (this._domain === \"\") {\n        this._domain = null;\n      }\n    }\n\n    return this._domain;\n  }\n\n  get hostname(): string {\n    if (this.match === UriMatchType.RegularExpression) {\n      return null;\n    }\n    if (this._hostname == null && this.uri != null) {\n      this._hostname = Utils.getHostname(this.uri);\n      if (this._hostname === \"\") {\n        this._hostname = null;\n      }\n    }\n\n    return this._hostname;\n  }\n\n  get host(): string {\n    if (this.match === UriMatchType.RegularExpression) {\n      return null;\n    }\n    if (this._host == null && this.uri != null) {\n      this._host = Utils.getHost(this.uri);\n      if (this._host === \"\") {\n        this._host = null;\n      }\n    }\n\n    return this._host;\n  }\n\n  get hostnameOrUri(): string {\n    return this.hostname != null ? this.hostname : this.uri;\n  }\n\n  get hostOrUri(): string {\n    return this.host != null ? this.host : this.uri;\n  }\n\n  get isWebsite(): boolean {\n    return (\n      this.uri != null &&\n      (this.uri.indexOf(\"http://\") === 0 ||\n        this.uri.indexOf(\"https://\") === 0 ||\n        (this.uri.indexOf(\"://\") < 0 && !Utils.isNullOrWhitespace(Utils.getDomain(this.uri))))\n    );\n  }\n\n  get canLaunch(): boolean {\n    if (this._canLaunch != null) {\n      return this._canLaunch;\n    }\n    if (this.uri != null && this.match !== UriMatchType.RegularExpression) {\n      const uri = this.launchUri;\n      for (let i = 0; i < CanLaunchWhitelist.length; i++) {\n        if (uri.indexOf(CanLaunchWhitelist[i]) === 0) {\n          this._canLaunch = true;\n          return this._canLaunch;\n        }\n      }\n    }\n    this._canLaunch = false;\n    return this._canLaunch;\n  }\n\n  get launchUri(): string {\n    return this.uri.indexOf(\"://\") < 0 && !Utils.isNullOrWhitespace(Utils.getDomain(this.uri))\n      ? \"http://\" + this.uri\n      : this.uri;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<LoginUriView>>): LoginUriView {\n    return Object.assign(new LoginUriView(), obj);\n  }\n\n  matchesUri(\n    targetUri: string,\n    equivalentDomains: Set<string>,\n    defaultUriMatch: UriMatchType = null\n  ): boolean {\n    if (!this.uri || !targetUri) {\n      return false;\n    }\n\n    let matchType = this.match ?? defaultUriMatch;\n    matchType ??= UriMatchType.Domain;\n\n    const targetDomain = Utils.getDomain(targetUri);\n    const matchDomains = equivalentDomains.add(targetDomain);\n\n    switch (matchType) {\n      case UriMatchType.Domain:\n        return this.matchesDomain(targetUri, matchDomains);\n      case UriMatchType.Host: {\n        const urlHost = Utils.getHost(targetUri);\n        return urlHost != null && urlHost === Utils.getHost(this.uri);\n      }\n      case UriMatchType.Exact:\n        return targetUri === this.uri;\n      case UriMatchType.StartsWith:\n        return targetUri.startsWith(this.uri);\n      case UriMatchType.RegularExpression:\n        try {\n          const regex = new RegExp(this.uri, \"i\");\n          return regex.test(targetUri);\n        } catch (e) {\n          // Invalid regex\n          return false;\n        }\n      case UriMatchType.Never:\n        return false;\n      default:\n        break;\n    }\n\n    return false;\n  }\n\n  private matchesDomain(targetUri: string, matchDomains: Set<string>) {\n    if (targetUri == null || this.domain == null || !matchDomains.has(this.domain)) {\n      return false;\n    }\n\n    if (Utils.DomainMatchBlacklist.has(this.domain)) {\n      const domainUrlHost = Utils.getHost(targetUri);\n      return !Utils.DomainMatchBlacklist.get(this.domain).has(domainUrlHost);\n    }\n\n    return true;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { LoginLinkedId as LinkedId, UriMatchType } from \"../../../enums\";\nimport { linkedFieldOption } from \"../../../misc/linkedFieldOption.decorator\";\nimport { Utils } from \"../../../misc/utils\";\nimport { Login } from \"../domain/login\";\n\nimport { ItemView } from \"./item.view\";\nimport { LoginUriView } from \"./login-uri.view\";\n\nexport class LoginView extends ItemView {\n  @linkedFieldOption(LinkedId.Username)\n  username: string = null;\n  @linkedFieldOption(LinkedId.Password)\n  password: string = null;\n\n  passwordRevisionDate?: Date = null;\n  totp: string = null;\n  uris: LoginUriView[] = null;\n  autofillOnPageLoad: boolean = null;\n\n  constructor(l?: Login) {\n    super();\n    if (!l) {\n      return;\n    }\n\n    this.passwordRevisionDate = l.passwordRevisionDate;\n    this.autofillOnPageLoad = l.autofillOnPageLoad;\n  }\n\n  get uri(): string {\n    return this.hasUris ? this.uris[0].uri : null;\n  }\n\n  get maskedPassword(): string {\n    return this.password != null ? \"••••••••\" : null;\n  }\n\n  get subTitle(): string {\n    return this.username;\n  }\n\n  get canLaunch(): boolean {\n    return this.hasUris && this.uris.some((u) => u.canLaunch);\n  }\n\n  get hasTotp(): boolean {\n    return !Utils.isNullOrWhitespace(this.totp);\n  }\n\n  get launchUri(): string {\n    if (this.hasUris) {\n      const uri = this.uris.find((u) => u.canLaunch);\n      if (uri != null) {\n        return uri.launchUri;\n      }\n    }\n    return null;\n  }\n\n  get hasUris(): boolean {\n    return this.uris != null && this.uris.length > 0;\n  }\n\n  matchesUri(\n    targetUri: string,\n    equivalentDomains: Set<string>,\n    defaultUriMatch: UriMatchType = null\n  ): boolean {\n    if (this.uris == null) {\n      return false;\n    }\n\n    return this.uris.some((uri) => uri.matchesUri(targetUri, equivalentDomains, defaultUriMatch));\n  }\n\n  static fromJSON(obj: Partial<Jsonify<LoginView>>): LoginView {\n    const passwordRevisionDate =\n      obj.passwordRevisionDate == null ? null : new Date(obj.passwordRevisionDate);\n    const uris = obj.uris?.map((uri: any) => LoginUriView.fromJSON(uri));\n\n    return Object.assign(new LoginView(), obj, {\n      passwordRevisionDate: passwordRevisionDate,\n      uris: uris,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { View } from \"../../../models/view/view\";\nimport { Password } from \"../domain/password\";\n\nexport class PasswordHistoryView implements View {\n  password: string = null;\n  lastUsedDate: Date = null;\n\n  constructor(ph?: Password) {\n    if (!ph) {\n      return;\n    }\n\n    this.lastUsedDate = ph.lastUsedDate;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<PasswordHistoryView>>): PasswordHistoryView {\n    const lastUsedDate = obj.lastUsedDate == null ? null : new Date(obj.lastUsedDate);\n\n    return Object.assign(new PasswordHistoryView(), obj, {\n      lastUsedDate: lastUsedDate,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SecureNoteType } from \"../../../enums\";\nimport { SecureNote } from \"../domain/secure-note\";\n\nimport { ItemView } from \"./item.view\";\n\nexport class SecureNoteView extends ItemView {\n  type: SecureNoteType = null;\n\n  constructor(n?: SecureNote) {\n    super();\n    if (!n) {\n      return;\n    }\n\n    this.type = n.type;\n  }\n\n  get subTitle(): string {\n    return null;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<SecureNoteView>>): SecureNoteView {\n    return Object.assign(new SecureNoteView(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { LinkedIdType } from \"../../../enums\";\nimport { InitializerMetadata } from \"../../../interfaces/initializer-metadata.interface\";\nimport { View } from \"../../../models/view/view\";\nimport { InitializerKey } from \"../../../services/cryptography/initializer-key\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { LocalData } from \"../data/local.data\";\nimport { Cipher } from \"../domain/cipher\";\n\nimport { AttachmentView } from \"./attachment.view\";\nimport { CardView } from \"./card.view\";\nimport { FieldView } from \"./field.view\";\nimport { IdentityView } from \"./identity.view\";\nimport { LoginView } from \"./login.view\";\nimport { PasswordHistoryView } from \"./password-history.view\";\nimport { SecureNoteView } from \"./secure-note.view\";\n\nexport class CipherView implements View, InitializerMetadata {\n  readonly initializerKey = InitializerKey.CipherView;\n\n  id: string = null;\n  organizationId: string = null;\n  folderId: string = null;\n  name: string = null;\n  notes: string = null;\n  type: CipherType = null;\n  favorite = false;\n  organizationUseTotp = false;\n  edit = false;\n  viewPassword = true;\n  localData: LocalData;\n  login = new LoginView();\n  identity = new IdentityView();\n  card = new CardView();\n  secureNote = new SecureNoteView();\n  attachments: AttachmentView[] = null;\n  fields: FieldView[] = null;\n  passwordHistory: PasswordHistoryView[] = null;\n  collectionIds: string[] = null;\n  revisionDate: Date = null;\n  creationDate: Date = null;\n  deletedDate: Date = null;\n  reprompt: CipherRepromptType = CipherRepromptType.None;\n\n  constructor(c?: Cipher) {\n    if (!c) {\n      return;\n    }\n\n    this.id = c.id;\n    this.organizationId = c.organizationId;\n    this.folderId = c.folderId;\n    this.favorite = c.favorite;\n    this.organizationUseTotp = c.organizationUseTotp;\n    this.edit = c.edit;\n    this.viewPassword = c.viewPassword;\n    this.type = c.type;\n    this.localData = c.localData;\n    this.collectionIds = c.collectionIds;\n    this.revisionDate = c.revisionDate;\n    this.creationDate = c.creationDate;\n    this.deletedDate = c.deletedDate;\n    // Old locally stored ciphers might have reprompt == null. If so set it to None.\n    this.reprompt = c.reprompt ?? CipherRepromptType.None;\n  }\n\n  private get item() {\n    switch (this.type) {\n      case CipherType.Login:\n        return this.login;\n      case CipherType.SecureNote:\n        return this.secureNote;\n      case CipherType.Card:\n        return this.card;\n      case CipherType.Identity:\n        return this.identity;\n      default:\n        break;\n    }\n\n    return null;\n  }\n\n  get subTitle(): string {\n    return this.item.subTitle;\n  }\n\n  get hasPasswordHistory(): boolean {\n    return this.passwordHistory && this.passwordHistory.length > 0;\n  }\n\n  get hasAttachments(): boolean {\n    return this.attachments && this.attachments.length > 0;\n  }\n\n  get hasOldAttachments(): boolean {\n    if (this.hasAttachments) {\n      for (let i = 0; i < this.attachments.length; i++) {\n        if (this.attachments[i].key == null) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  get hasFields(): boolean {\n    return this.fields && this.fields.length > 0;\n  }\n\n  get passwordRevisionDisplayDate(): Date {\n    if (this.type !== CipherType.Login || this.login == null) {\n      return null;\n    } else if (this.login.password == null || this.login.password === \"\") {\n      return null;\n    }\n    return this.login.passwordRevisionDate;\n  }\n\n  get isDeleted(): boolean {\n    return this.deletedDate != null;\n  }\n\n  get linkedFieldOptions() {\n    return this.item.linkedFieldOptions;\n  }\n\n  linkedFieldValue(id: LinkedIdType) {\n    const linkedFieldOption = this.linkedFieldOptions?.get(id);\n    if (linkedFieldOption == null) {\n      return null;\n    }\n\n    const item = this.item;\n    return this.item[linkedFieldOption.propertyKey as keyof typeof item];\n  }\n\n  linkedFieldI18nKey(id: LinkedIdType): string {\n    return this.linkedFieldOptions.get(id)?.i18nKey;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<CipherView>>): CipherView {\n    const view = new CipherView();\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    const deletedDate = obj.deletedDate == null ? null : new Date(obj.deletedDate);\n    const attachments = obj.attachments?.map((a: any) => AttachmentView.fromJSON(a));\n    const fields = obj.fields?.map((f: any) => FieldView.fromJSON(f));\n    const passwordHistory = obj.passwordHistory?.map((ph: any) => PasswordHistoryView.fromJSON(ph));\n\n    Object.assign(view, obj, {\n      revisionDate: revisionDate,\n      deletedDate: deletedDate,\n      attachments: attachments,\n      fields: fields,\n      passwordHistory: passwordHistory,\n    });\n\n    switch (obj.type) {\n      case CipherType.Card:\n        view.card = CardView.fromJSON(obj.card);\n        break;\n      case CipherType.Identity:\n        view.identity = IdentityView.fromJSON(obj.identity);\n        break;\n      case CipherType.Login:\n        view.login = LoginView.fromJSON(obj.login);\n        break;\n      case CipherType.SecureNote:\n        view.secureNote = SecureNoteView.fromJSON(obj.secureNote);\n        break;\n      default:\n        break;\n    }\n\n    return view;\n  }\n}\n","import { UriMatchType } from \"../../enums\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\nimport { CipherType } from \"../enums/cipher-type\";\nimport { CipherData } from \"../models/data/cipher.data\";\nimport { Cipher } from \"../models/domain/cipher\";\nimport { Field } from \"../models/domain/field\";\nimport { CipherView } from \"../models/view/cipher.view\";\nimport { FieldView } from \"../models/view/field.view\";\n\nexport abstract class CipherService {\n  clearCache: (userId?: string) => Promise<void>;\n  encrypt: (\n    model: CipherView,\n    key?: SymmetricCryptoKey,\n    originalCipher?: Cipher\n  ) => Promise<Cipher>;\n  encryptFields: (fieldsModel: FieldView[], key: SymmetricCryptoKey) => Promise<Field[]>;\n  encryptField: (fieldModel: FieldView, key: SymmetricCryptoKey) => Promise<Field>;\n  get: (id: string) => Promise<Cipher>;\n  getAll: () => Promise<Cipher[]>;\n  getAllDecrypted: () => Promise<CipherView[]>;\n  getAllDecryptedForGrouping: (groupingId: string, folder?: boolean) => Promise<CipherView[]>;\n  getAllDecryptedForUrl: (\n    url: string,\n    includeOtherTypes?: CipherType[],\n    defaultMatch?: UriMatchType\n  ) => Promise<CipherView[]>;\n  getAllFromApiForOrganization: (organizationId: string) => Promise<CipherView[]>;\n  getLastUsedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;\n  getLastLaunchedForUrl: (url: string, autofillOnPageLoad: boolean) => Promise<CipherView>;\n  getNextCipherForUrl: (url: string) => Promise<CipherView>;\n  updateLastUsedIndexForUrl: (url: string) => void;\n  updateLastUsedDate: (id: string) => Promise<void>;\n  updateLastLaunchedDate: (id: string) => Promise<void>;\n  saveNeverDomain: (domain: string) => Promise<void>;\n  createWithServer: (cipher: Cipher) => Promise<any>;\n  updateWithServer: (cipher: Cipher) => Promise<any>;\n  shareWithServer: (\n    cipher: CipherView,\n    organizationId: string,\n    collectionIds: string[]\n  ) => Promise<any>;\n  shareManyWithServer: (\n    ciphers: CipherView[],\n    organizationId: string,\n    collectionIds: string[]\n  ) => Promise<any>;\n  saveAttachmentWithServer: (\n    cipher: Cipher,\n    unencryptedFile: any,\n    admin?: boolean\n  ) => Promise<Cipher>;\n  saveAttachmentRawWithServer: (\n    cipher: Cipher,\n    filename: string,\n    data: ArrayBuffer,\n    admin?: boolean\n  ) => Promise<Cipher>;\n  saveCollectionsWithServer: (cipher: Cipher) => Promise<any>;\n  upsert: (cipher: CipherData | CipherData[]) => Promise<any>;\n  replace: (ciphers: { [id: string]: CipherData }) => Promise<any>;\n  clear: (userId: string) => Promise<any>;\n  moveManyWithServer: (ids: string[], folderId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n  deleteWithServer: (id: string, asAdmin?: boolean) => Promise<any>;\n  deleteManyWithServer: (ids: string[], asAdmin?: boolean) => Promise<any>;\n  deleteAttachment: (id: string, attachmentId: string) => Promise<void>;\n  deleteAttachmentWithServer: (id: string, attachmentId: string) => Promise<void>;\n  sortCiphersByLastUsed: (a: CipherView, b: CipherView) => number;\n  sortCiphersByLastUsedThenName: (a: CipherView, b: CipherView) => number;\n  getLocaleSortingFunction: () => (a: CipherView, b: CipherView) => number;\n  softDelete: (id: string | string[]) => Promise<any>;\n  softDeleteWithServer: (id: string, asAdmin?: boolean) => Promise<any>;\n  softDeleteManyWithServer: (ids: string[], asAdmin?: boolean) => Promise<any>;\n  restore: (\n    cipher: { id: string; revisionDate: string } | { id: string; revisionDate: string }[]\n  ) => Promise<any>;\n  restoreWithServer: (id: string, asAdmin?: boolean) => Promise<any>;\n  restoreManyWithServer: (ids: string[]) => Promise<any>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { FolderData } from \"../../models/data/folder.data\";\nimport { Folder } from \"../../models/domain/folder\";\nimport { FolderView } from \"../../models/view/folder.view\";\n\nexport abstract class FolderService {\n  folders$: Observable<Folder[]>;\n  folderViews$: Observable<FolderView[]>;\n\n  clearCache: () => Promise<void>;\n  encrypt: (model: FolderView, key?: SymmetricCryptoKey) => Promise<Folder>;\n  get: (id: string) => Promise<Folder>;\n  getAllFromState: () => Promise<Folder[]>;\n  /**\n   * @deprecated Only use in CLI!\n   */\n  getFromState: (id: string) => Promise<Folder>;\n  /**\n   * @deprecated Only use in CLI!\n   */\n  getAllDecryptedFromState: () => Promise<FolderView[]>;\n}\n\nexport abstract class InternalFolderService extends FolderService {\n  upsert: (folder: FolderData | FolderData[]) => Promise<void>;\n  replace: (folders: { [id: string]: FolderData }) => Promise<void>;\n  clear: (userId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n}\n","import { TreeNode } from \"../../models/domain/tree-node\";\nimport { CollectionData } from \"../models/data/collection.data\";\nimport { Collection } from \"../models/domain/collection\";\nimport { CollectionView } from \"../models/view/collection.view\";\n\nexport abstract class CollectionService {\n  clearCache: (userId?: string) => Promise<void>;\n  encrypt: (model: CollectionView) => Promise<Collection>;\n  decryptMany: (collections: Collection[]) => Promise<CollectionView[]>;\n  get: (id: string) => Promise<Collection>;\n  getAll: () => Promise<Collection[]>;\n  getAllDecrypted: () => Promise<CollectionView[]>;\n  getAllNested: (collections?: CollectionView[]) => Promise<TreeNode<CollectionView>[]>;\n  getNested: (id: string) => Promise<TreeNode<CollectionView>>;\n  upsert: (collection: CollectionData | CollectionData[]) => Promise<any>;\n  replace: (collections: { [id: string]: CollectionData }) => Promise<any>;\n  clear: (userId: string) => Promise<any>;\n  delete: (id: string | string[]) => Promise<any>;\n}\n","import { EventType } from \"../../enums\";\n\nexport abstract class EventCollectionService {\n  collect: (\n    eventType: EventType,\n    cipherId?: string,\n    uploadImmediately?: boolean,\n    organizationId?: string\n  ) => Promise<any>;\n}\n","export abstract class PasswordRepromptService {\n  protectedFields: () => string[];\n  showPasswordPrompt: () => Promise<boolean>;\n  enabled: () => Promise<boolean>;\n}\n","import { Directive, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { Observable, Subject, takeUntil, concatMap } from \"rxjs\";\n\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport {\n  isMember,\n  OrganizationService,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { OrganizationUserStatusType, PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { CollectionView } from \"@bitwarden/common/admin-console/models/view/collection.view\";\nimport { EventType, SecureNoteType, UriMatchType } from \"@bitwarden/common/enums\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { CardView } from \"@bitwarden/common/vault/models/view/card.view\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\nimport { IdentityView } from \"@bitwarden/common/vault/models/view/identity.view\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\nimport { LoginView } from \"@bitwarden/common/vault/models/view/login.view\";\nimport { SecureNoteView } from \"@bitwarden/common/vault/models/view/secure-note.view\";\n\n@Directive()\nexport class AddEditComponent implements OnInit, OnDestroy {\n  @Input() cloneMode = false;\n  @Input() folderId: string = null;\n  @Input() cipherId: string;\n  @Input() type: CipherType;\n  @Input() collectionIds: string[];\n  @Input() organizationId: string = null;\n  @Output() onSavedCipher = new EventEmitter<CipherView>();\n  @Output() onDeletedCipher = new EventEmitter<CipherView>();\n  @Output() onRestoredCipher = new EventEmitter<CipherView>();\n  @Output() onCancelled = new EventEmitter<CipherView>();\n  @Output() onEditAttachments = new EventEmitter<CipherView>();\n  @Output() onShareCipher = new EventEmitter<CipherView>();\n  @Output() onEditCollections = new EventEmitter<CipherView>();\n  @Output() onGeneratePassword = new EventEmitter();\n  @Output() onGenerateUsername = new EventEmitter();\n\n  editMode = false;\n  cipher: CipherView;\n  folders$: Observable<FolderView[]>;\n  collections: CollectionView[] = [];\n  title: string;\n  formPromise: Promise<any>;\n  deletePromise: Promise<any>;\n  restorePromise: Promise<any>;\n  checkPasswordPromise: Promise<number>;\n  showPassword = false;\n  showCardNumber = false;\n  showCardCode = false;\n  cipherType = CipherType;\n  typeOptions: any[];\n  cardBrandOptions: any[];\n  cardExpMonthOptions: any[];\n  identityTitleOptions: any[];\n  uriMatchOptions: any[];\n  ownershipOptions: any[] = [];\n  autofillOnPageLoadOptions: any[];\n  currentDate = new Date();\n  allowPersonal = true;\n  reprompt = false;\n  canUseReprompt = true;\n  organization: Organization;\n\n  protected componentName = \"\";\n  protected destroy$ = new Subject<void>();\n  protected writeableCollections: CollectionView[];\n  private personalOwnershipPolicyAppliesToActiveUser: boolean;\n  private previousCipherId: string;\n\n  constructor(\n    protected cipherService: CipherService,\n    protected folderService: FolderService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected auditService: AuditService,\n    protected stateService: StateService,\n    protected collectionService: CollectionService,\n    protected messagingService: MessagingService,\n    protected eventCollectionService: EventCollectionService,\n    protected policyService: PolicyService,\n    private logService: LogService,\n    protected passwordRepromptService: PasswordRepromptService,\n    private organizationService: OrganizationService,\n    protected sendApiService: SendApiService\n  ) {\n    this.typeOptions = [\n      { name: i18nService.t(\"typeLogin\"), value: CipherType.Login },\n      { name: i18nService.t(\"typeCard\"), value: CipherType.Card },\n      { name: i18nService.t(\"typeIdentity\"), value: CipherType.Identity },\n      { name: i18nService.t(\"typeSecureNote\"), value: CipherType.SecureNote },\n    ];\n    this.cardBrandOptions = [\n      { name: \"-- \" + i18nService.t(\"select\") + \" --\", value: null },\n      { name: \"Visa\", value: \"Visa\" },\n      { name: \"Mastercard\", value: \"Mastercard\" },\n      { name: \"American Express\", value: \"Amex\" },\n      { name: \"Discover\", value: \"Discover\" },\n      { name: \"Diners Club\", value: \"Diners Club\" },\n      { name: \"JCB\", value: \"JCB\" },\n      { name: \"Maestro\", value: \"Maestro\" },\n      { name: \"UnionPay\", value: \"UnionPay\" },\n      { name: \"RuPay\", value: \"RuPay\" },\n      { name: i18nService.t(\"other\"), value: \"Other\" },\n    ];\n    this.cardExpMonthOptions = [\n      { name: \"-- \" + i18nService.t(\"select\") + \" --\", value: null },\n      { name: \"01 - \" + i18nService.t(\"january\"), value: \"1\" },\n      { name: \"02 - \" + i18nService.t(\"february\"), value: \"2\" },\n      { name: \"03 - \" + i18nService.t(\"march\"), value: \"3\" },\n      { name: \"04 - \" + i18nService.t(\"april\"), value: \"4\" },\n      { name: \"05 - \" + i18nService.t(\"may\"), value: \"5\" },\n      { name: \"06 - \" + i18nService.t(\"june\"), value: \"6\" },\n      { name: \"07 - \" + i18nService.t(\"july\"), value: \"7\" },\n      { name: \"08 - \" + i18nService.t(\"august\"), value: \"8\" },\n      { name: \"09 - \" + i18nService.t(\"september\"), value: \"9\" },\n      { name: \"10 - \" + i18nService.t(\"october\"), value: \"10\" },\n      { name: \"11 - \" + i18nService.t(\"november\"), value: \"11\" },\n      { name: \"12 - \" + i18nService.t(\"december\"), value: \"12\" },\n    ];\n    this.identityTitleOptions = [\n      { name: \"-- \" + i18nService.t(\"select\") + \" --\", value: null },\n      { name: i18nService.t(\"mr\"), value: i18nService.t(\"mr\") },\n      { name: i18nService.t(\"mrs\"), value: i18nService.t(\"mrs\") },\n      { name: i18nService.t(\"ms\"), value: i18nService.t(\"ms\") },\n      { name: i18nService.t(\"mx\"), value: i18nService.t(\"mx\") },\n      { name: i18nService.t(\"dr\"), value: i18nService.t(\"dr\") },\n    ];\n    this.uriMatchOptions = [\n      { name: i18nService.t(\"defaultMatchDetection\"), value: null },\n      { name: i18nService.t(\"baseDomain\"), value: UriMatchType.Domain },\n      { name: i18nService.t(\"host\"), value: UriMatchType.Host },\n      { name: i18nService.t(\"startsWith\"), value: UriMatchType.StartsWith },\n      { name: i18nService.t(\"regEx\"), value: UriMatchType.RegularExpression },\n      { name: i18nService.t(\"exact\"), value: UriMatchType.Exact },\n      { name: i18nService.t(\"never\"), value: UriMatchType.Never },\n    ];\n    this.autofillOnPageLoadOptions = [\n      { name: i18nService.t(\"autoFillOnPageLoadUseDefault\"), value: null },\n      { name: i18nService.t(\"autoFillOnPageLoadYes\"), value: true },\n      { name: i18nService.t(\"autoFillOnPageLoadNo\"), value: false },\n    ];\n  }\n\n  async ngOnInit() {\n    this.writeableCollections = await this.loadCollections();\n    this.canUseReprompt = await this.passwordRepromptService.enabled();\n\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.PersonalOwnership)\n      .pipe(\n        concatMap(async (policyAppliesToActiveUser) => {\n          this.personalOwnershipPolicyAppliesToActiveUser = policyAppliesToActiveUser;\n          await this.init();\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async init() {\n    if (this.ownershipOptions.length) {\n      this.ownershipOptions = [];\n    }\n    if (this.personalOwnershipPolicyAppliesToActiveUser) {\n      this.allowPersonal = false;\n    } else {\n      const myEmail = await this.stateService.getEmail();\n      this.ownershipOptions.push({ name: myEmail, value: null });\n    }\n\n    const orgs = await this.organizationService.getAll();\n    orgs\n      .filter(isMember)\n      .sort(Utils.getSortFunction(this.i18nService, \"name\"))\n      .forEach((o) => {\n        if (o.enabled && o.status === OrganizationUserStatusType.Confirmed) {\n          this.ownershipOptions.push({ name: o.name, value: o.id });\n        }\n      });\n    if (!this.allowPersonal && this.organizationId == undefined) {\n      this.organizationId = this.defaultOwnerId;\n    }\n  }\n\n  async load() {\n    this.editMode = this.cipherId != null;\n    if (this.editMode) {\n      this.editMode = true;\n      if (this.cloneMode) {\n        this.cloneMode = true;\n        this.title = this.i18nService.t(\"addItem\");\n      } else {\n        this.title = this.i18nService.t(\"editItem\");\n      }\n    } else {\n      this.title = this.i18nService.t(\"addItem\");\n    }\n\n    const loadedAddEditCipherInfo = await this.loadAddEditCipherInfo();\n\n    if (this.cipher == null) {\n      if (this.editMode) {\n        const cipher = await this.loadCipher();\n        this.cipher = await cipher.decrypt();\n\n        // Adjust Cipher Name if Cloning\n        if (this.cloneMode) {\n          this.cipher.name += \" - \" + this.i18nService.t(\"clone\");\n          // If not allowing personal ownership, update cipher's org Id to prompt downstream changes\n          if (this.cipher.organizationId == null && !this.allowPersonal) {\n            this.cipher.organizationId = this.organizationId;\n          }\n        }\n      } else {\n        this.cipher = new CipherView();\n        this.cipher.organizationId = this.organizationId == null ? null : this.organizationId;\n        this.cipher.folderId = this.folderId;\n        this.cipher.type = this.type == null ? CipherType.Login : this.type;\n        this.cipher.login = new LoginView();\n        this.cipher.login.uris = [new LoginUriView()];\n        this.cipher.card = new CardView();\n        this.cipher.identity = new IdentityView();\n        this.cipher.secureNote = new SecureNoteView();\n        this.cipher.secureNote.type = SecureNoteType.Generic;\n        this.cipher.reprompt = CipherRepromptType.None;\n      }\n    }\n\n    if (this.cipher != null && (!this.editMode || loadedAddEditCipherInfo || this.cloneMode)) {\n      await this.organizationChanged();\n      if (\n        this.collectionIds != null &&\n        this.collectionIds.length > 0 &&\n        this.collections.length > 0\n      ) {\n        this.collections.forEach((c) => {\n          if (this.collectionIds.indexOf(c.id) > -1) {\n            (c as any).checked = true;\n          }\n        });\n      }\n    }\n\n    this.folders$ = this.folderService.folderViews$;\n\n    if (this.editMode && this.previousCipherId !== this.cipherId) {\n      this.eventCollectionService.collect(EventType.Cipher_ClientViewed, this.cipherId);\n    }\n    this.previousCipherId = this.cipherId;\n    this.reprompt = this.cipher.reprompt !== CipherRepromptType.None;\n  }\n\n  async submit(): Promise<boolean> {\n    if (this.cipher.isDeleted) {\n      return this.restore();\n    }\n\n    if (this.cipher.name == null || this.cipher.name === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"nameRequired\")\n      );\n      return false;\n    }\n\n    if (\n      (!this.editMode || this.cloneMode) &&\n      !this.allowPersonal &&\n      this.cipher.organizationId == null\n    ) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"personalOwnershipSubmitError\")\n      );\n      return false;\n    }\n\n    if (\n      (!this.editMode || this.cloneMode) &&\n      this.cipher.type === CipherType.Login &&\n      this.cipher.login.uris != null &&\n      this.cipher.login.uris.length === 1 &&\n      (this.cipher.login.uris[0].uri == null || this.cipher.login.uris[0].uri === \"\")\n    ) {\n      this.cipher.login.uris = null;\n    }\n\n    // Allows saving of selected collections during \"Add\" and \"Clone\" flows\n    if ((!this.editMode || this.cloneMode) && this.cipher.organizationId != null) {\n      this.cipher.collectionIds =\n        this.collections == null\n          ? []\n          : this.collections.filter((c) => (c as any).checked).map((c) => c.id);\n    }\n\n    // Clear current Cipher Id to trigger \"Add\" cipher flow\n    if (this.cloneMode) {\n      this.cipher.id = null;\n    }\n\n    const cipher = await this.encryptCipher();\n    try {\n      this.formPromise = this.saveCipher(cipher);\n      await this.formPromise;\n      this.cipher.id = cipher.id;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode && !this.cloneMode ? \"editedItem\" : \"addedItem\")\n      );\n      this.onSavedCipher.emit(this.cipher);\n      this.messagingService.send(this.editMode && !this.cloneMode ? \"editedCipher\" : \"addedCipher\");\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return false;\n  }\n\n  addUri() {\n    if (this.cipher.type !== CipherType.Login) {\n      return;\n    }\n\n    if (this.cipher.login.uris == null) {\n      this.cipher.login.uris = [];\n    }\n\n    this.cipher.login.uris.push(new LoginUriView());\n  }\n\n  removeUri(uri: LoginUriView) {\n    if (this.cipher.type !== CipherType.Login || this.cipher.login.uris == null) {\n      return;\n    }\n\n    const i = this.cipher.login.uris.indexOf(uri);\n    if (i > -1) {\n      this.cipher.login.uris.splice(i, 1);\n    }\n  }\n\n  getCardExpMonthDisplay() {\n    return this.cardExpMonthOptions.find((x) => x.value == this.cipher.card.expMonth)?.name;\n  }\n\n  trackByFunction(index: number, item: any) {\n    return index;\n  }\n\n  cancel() {\n    this.onCancelled.emit(this.cipher);\n  }\n\n  attachments() {\n    this.onEditAttachments.emit(this.cipher);\n  }\n\n  share() {\n    this.onShareCipher.emit(this.cipher);\n  }\n\n  editCollections() {\n    this.onEditCollections.emit(this.cipher);\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\n        this.cipher.isDeleted ? \"permanentlyDeleteItemConfirmation\" : \"deleteItemConfirmation\"\n      ),\n      this.i18nService.t(\"deleteItem\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\",\n      false,\n      this.componentName != \"\" ? this.componentName + \" .modal-content\" : null\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.deletePromise = this.deleteCipher();\n      await this.deletePromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.cipher.isDeleted ? \"permanentlyDeletedItem\" : \"deletedItem\")\n      );\n      this.onDeletedCipher.emit(this.cipher);\n      this.messagingService.send(\n        this.cipher.isDeleted ? \"permanentlyDeletedCipher\" : \"deletedCipher\"\n      );\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async restore(): Promise<boolean> {\n    if (!this.cipher.isDeleted) {\n      return false;\n    }\n\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"restoreItemConfirmation\"),\n      this.i18nService.t(\"restoreItem\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.restorePromise = this.restoreCipher();\n      await this.restorePromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"restoredItem\"));\n      this.onRestoredCipher.emit(this.cipher);\n      this.messagingService.send(\"restoredCipher\");\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async generateUsername(): Promise<boolean> {\n    if (this.cipher.login?.username?.length) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"overwriteUsernameConfirmation\"),\n        this.i18nService.t(\"overwriteUsername\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\")\n      );\n      if (!confirmed) {\n        return false;\n      }\n    }\n\n    this.onGenerateUsername.emit();\n    return true;\n  }\n\n  async generatePassword(): Promise<boolean> {\n    if (this.cipher.login?.password?.length) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"overwritePasswordConfirmation\"),\n        this.i18nService.t(\"overwritePassword\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"no\")\n      );\n      if (!confirmed) {\n        return false;\n      }\n    }\n\n    this.onGeneratePassword.emit();\n    return true;\n  }\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n    document.getElementById(\"loginPassword\").focus();\n    if (this.editMode && this.showPassword) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledPasswordVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async toggleCardNumber() {\n    this.showCardNumber = !this.showCardNumber;\n    if (this.showCardNumber) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardNumberVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  toggleCardCode() {\n    this.showCardCode = !this.showCardCode;\n    document.getElementById(\"cardCode\").focus();\n    if (this.editMode && this.showCardCode) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardCodeVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  toggleUriOptions(uri: LoginUriView) {\n    const u = uri as any;\n    u.showOptions = u.showOptions == null && uri.match != null ? false : !u.showOptions;\n  }\n\n  loginUriMatchChanged(uri: LoginUriView) {\n    const u = uri as any;\n    u.showOptions = u.showOptions == null ? true : u.showOptions;\n  }\n\n  async organizationChanged() {\n    if (this.writeableCollections != null) {\n      this.writeableCollections.forEach((c) => ((c as any).checked = false));\n    }\n    if (this.cipher.organizationId != null) {\n      this.collections = this.writeableCollections.filter(\n        (c) => c.organizationId === this.cipher.organizationId\n      );\n      const org = await this.organizationService.get(this.cipher.organizationId);\n      if (org != null) {\n        this.cipher.organizationUseTotp = org.useTotp;\n      }\n    } else {\n      this.collections = [];\n    }\n  }\n\n  async checkPassword() {\n    if (this.checkPasswordPromise != null) {\n      return;\n    }\n\n    if (\n      this.cipher.login == null ||\n      this.cipher.login.password == null ||\n      this.cipher.login.password === \"\"\n    ) {\n      return;\n    }\n\n    this.checkPasswordPromise = this.auditService.passwordLeaked(this.cipher.login.password);\n    const matches = await this.checkPasswordPromise;\n    this.checkPasswordPromise = null;\n\n    if (matches > 0) {\n      this.platformUtilsService.showToast(\n        \"warning\",\n        null,\n        this.i18nService.t(\"passwordExposed\", matches.toString())\n      );\n    } else {\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"passwordSafe\"));\n    }\n  }\n\n  repromptChanged() {\n    this.reprompt = !this.reprompt;\n    if (this.reprompt) {\n      this.cipher.reprompt = CipherRepromptType.Password;\n    } else {\n      this.cipher.reprompt = CipherRepromptType.None;\n    }\n  }\n\n  protected async loadCollections() {\n    const allCollections = await this.collectionService.getAllDecrypted();\n    return allCollections.filter((c) => !c.readOnly);\n  }\n\n  protected loadCipher() {\n    return this.cipherService.get(this.cipherId);\n  }\n\n  protected encryptCipher() {\n    return this.cipherService.encrypt(this.cipher);\n  }\n\n  protected saveCipher(cipher: Cipher) {\n    return this.cipher.id == null\n      ? this.cipherService.createWithServer(cipher)\n      : this.cipherService.updateWithServer(cipher);\n  }\n\n  protected deleteCipher() {\n    const asAdmin = this.organization?.canEditAnyCollection;\n    return this.cipher.isDeleted\n      ? this.cipherService.deleteWithServer(this.cipher.id, asAdmin)\n      : this.cipherService.softDeleteWithServer(this.cipher.id, asAdmin);\n  }\n\n  protected restoreCipher() {\n    const asAdmin = this.organization?.canEditAnyCollection;\n    return this.cipherService.restoreWithServer(this.cipher.id, asAdmin);\n  }\n\n  get defaultOwnerId(): string | null {\n    return this.ownershipOptions[0].value;\n  }\n\n  async loadAddEditCipherInfo(): Promise<boolean> {\n    const addEditCipherInfo: any = await this.stateService.getAddEditCipherInfo();\n    const loadedSavedInfo = addEditCipherInfo != null;\n\n    if (loadedSavedInfo) {\n      this.cipher = addEditCipherInfo.cipher;\n      this.collectionIds = addEditCipherInfo.collectionIds;\n\n      if (!this.editMode && !this.allowPersonal && this.cipher.organizationId == null) {\n        // This is a new cipher and personal ownership isn't allowed, so we need to set the default owner\n        this.cipher.organizationId = this.defaultOwnerId;\n      }\n    }\n\n    await this.stateService.setAddEditCipherInfo(null);\n\n    return loadedSavedInfo;\n  }\n}\n","import { CdkDragDrop, moveItemInArray } from \"@angular/cdk/drag-drop\";\nimport { Directive, Input, OnChanges, SimpleChanges } from \"@angular/core\";\n\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { EventType, FieldType } from \"@bitwarden/common/enums\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FieldView } from \"@bitwarden/common/vault/models/view/field.view\";\n\n@Directive()\nexport class AddEditCustomFieldsComponent implements OnChanges {\n  @Input() cipher: CipherView;\n  @Input() thisCipherType: CipherType;\n  @Input() editMode: boolean;\n\n  addFieldType: FieldType = FieldType.Text;\n  addFieldTypeOptions: any[];\n  addFieldLinkedTypeOption: any;\n  linkedFieldOptions: any[] = [];\n\n  cipherType = CipherType;\n  fieldType = FieldType;\n  eventType = EventType;\n\n  constructor(\n    private i18nService: I18nService,\n    private eventCollectionService: EventCollectionService\n  ) {\n    this.addFieldTypeOptions = [\n      { name: i18nService.t(\"cfTypeText\"), value: FieldType.Text },\n      { name: i18nService.t(\"cfTypeHidden\"), value: FieldType.Hidden },\n      { name: i18nService.t(\"cfTypeBoolean\"), value: FieldType.Boolean },\n    ];\n    this.addFieldLinkedTypeOption = {\n      name: this.i18nService.t(\"cfTypeLinked\"),\n      value: FieldType.Linked,\n    };\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.thisCipherType != null) {\n      this.setLinkedFieldOptions();\n\n      if (!changes.thisCipherType.firstChange) {\n        this.resetCipherLinkedFields();\n      }\n    }\n  }\n\n  addField() {\n    if (this.cipher.fields == null) {\n      this.cipher.fields = [];\n    }\n\n    const f = new FieldView();\n    f.type = this.addFieldType;\n    f.newField = true;\n\n    if (f.type === FieldType.Linked) {\n      f.linkedId = this.linkedFieldOptions[0].value;\n    }\n\n    this.cipher.fields.push(f);\n  }\n\n  removeField(field: FieldView) {\n    const i = this.cipher.fields.indexOf(field);\n    if (i > -1) {\n      this.cipher.fields.splice(i, 1);\n    }\n  }\n\n  toggleFieldValue(field: FieldView) {\n    const f = field as any;\n    f.showValue = !f.showValue;\n    if (this.editMode && f.showValue) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledHiddenFieldVisible,\n        this.cipher.id\n      );\n    }\n  }\n\n  trackByFunction(index: number, item: any) {\n    return index;\n  }\n\n  drop(event: CdkDragDrop<string[]>) {\n    moveItemInArray(this.cipher.fields, event.previousIndex, event.currentIndex);\n  }\n\n  private setLinkedFieldOptions() {\n    if (this.cipher.linkedFieldOptions == null) {\n      return;\n    }\n\n    const options: any = [];\n    this.cipher.linkedFieldOptions.forEach((linkedFieldOption, id) =>\n      options.push({ name: this.i18nService.t(linkedFieldOption.i18nKey), value: id })\n    );\n    this.linkedFieldOptions = options.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n  }\n\n  private resetCipherLinkedFields() {\n    if (this.cipher.fields == null || this.cipher.fields.length === 0) {\n      return;\n    }\n\n    // Delete any Linked custom fields if the item type does not support them\n    if (this.cipher.linkedFieldOptions == null) {\n      this.cipher.fields = this.cipher.fields.filter((f) => f.type !== FieldType.Linked);\n      return;\n    }\n\n    this.cipher.fields\n      .filter((f) => f.type === FieldType.Linked)\n      .forEach((f) => (f.linkedId = this.linkedFieldOptions[0].value));\n  }\n}\n","import { Directive, ElementRef, forwardRef, HostListener, Input, Renderer2 } from \"@angular/core\";\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from \"@angular/forms\";\n\n// ref: https://juristr.com/blog/2018/02/ng-true-value-directive/\n@Directive({\n  selector: \"input[type=checkbox][appTrueFalseValue]\",\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => TrueFalseValueDirective),\n      multi: true,\n    },\n  ],\n})\nexport class TrueFalseValueDirective implements ControlValueAccessor {\n  @Input() trueValue: boolean | string = true;\n  @Input() falseValue: boolean | string = false;\n\n  constructor(private elementRef: ElementRef, private renderer: Renderer2) {}\n\n  @HostListener(\"change\", [\"$event\"])\n  onHostChange(ev: any) {\n    this.propagateChange(ev.target.checked ? this.trueValue : this.falseValue);\n  }\n\n  writeValue(obj: any): void {\n    if (obj === this.trueValue) {\n      this.renderer.setProperty(this.elementRef.nativeElement, \"checked\", true);\n    } else {\n      this.renderer.setProperty(this.elementRef.nativeElement, \"checked\", false);\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    /* nothing */\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    /* nothing */\n  }\n\n  private propagateChange = (_: any) => {\n    /* nothing */\n  };\n}\n","<div class=\"box\">\n  <h2 class=\"box-header\">\n    {{ \"customFields\" | i18n }}\n  </h2>\n  <div class=\"box-content\">\n    <!-- Current custom fields -->\n    <div cdkDropList (cdkDropListDropped)=\"drop($event)\" *ngIf=\"cipher.hasFields\">\n      <div\n        role=\"group\"\n        class=\"box-content-row box-content-row-multi box-draggable-row\"\n        appBoxRow\n        cdkDrag\n        *ngFor=\"let f of cipher.fields; let i = index; trackBy: trackByFunction\"\n        [ngClass]=\"{ 'box-content-row-checkbox': f.type === fieldType.Boolean }\"\n        attr.aria-label=\"{{ f.name }}\"\n      >\n        <button\n          type=\"button\"\n          appStopClick\n          (click)=\"removeField(f)\"\n          appA11yTitle=\"{{ 'remove' | i18n }}\"\n          *ngIf=\"!(!cipher.edit && editMode)\"\n        >\n          <i class=\"bwi bwi-minus-circle bwi-lg\" aria-hidden=\"true\"></i>\n        </button>\n        <label for=\"fieldName{{ i }}\" class=\"sr-only\">{{ \"name\" | i18n }}</label>\n        <label for=\"fieldValue{{ i }}\" class=\"sr-only\">{{ \"value\" | i18n }}</label>\n        <div class=\"row-main\">\n          <input\n            id=\"fieldName{{ i }}\"\n            type=\"text\"\n            name=\"Field.Name{{ i }}\"\n            [(ngModel)]=\"f.name\"\n            class=\"row-label\"\n            placeholder=\"{{ 'name' | i18n }}\"\n            appInputVerbatim\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n          <!-- Text -->\n          <input\n            id=\"fieldValue{{ i }}\"\n            type=\"text\"\n            name=\"Field.Value{{ i }}\"\n            [(ngModel)]=\"f.value\"\n            *ngIf=\"f.type === fieldType.Text\"\n            placeholder=\"{{ 'value' | i18n }}\"\n            appInputVerbatim\n            attr.aria-describedby=\"fieldName{{ i }}\"\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n          <!-- Hidden -->\n          <input\n            id=\"fieldValue{{ i }}\"\n            type=\"{{ f.showValue ? 'text' : 'password' }}\"\n            name=\"Field.Value{{ i }}\"\n            [(ngModel)]=\"f.value\"\n            class=\"monospaced\"\n            appInputVerbatim\n            *ngIf=\"f.type === fieldType.Hidden\"\n            placeholder=\"{{ 'value' | i18n }}\"\n            [disabled]=\"!cipher.viewPassword && !f.newField\"\n            attr.aria-describedby=\"fieldName{{ i }}\"\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n          <!-- Linked -->\n          <select\n            id=\"fieldValue{{ i }}\"\n            name=\"Field.Value{{ i }}\"\n            [(ngModel)]=\"f.linkedId\"\n            *ngIf=\"f.type === fieldType.Linked && cipher.linkedFieldOptions != null\"\n            attr.aria-describedby=\"fieldName{{ i }}\"\n          >\n            <option *ngFor=\"let o of linkedFieldOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n        <!-- Boolean -->\n        <input\n          id=\"fieldValue{{ i }}\"\n          name=\"Field.Value{{ i }}\"\n          type=\"checkbox\"\n          [(ngModel)]=\"f.value\"\n          *ngIf=\"f.type === fieldType.Boolean\"\n          appTrueFalseValue\n          trueValue=\"true\"\n          falseValue=\"false\"\n          attr.aria-describedby=\"fieldName{{ i }}\"\n          [readonly]=\"!cipher.edit && editMode\"\n        />\n        <div\n          class=\"action-buttons\"\n          *ngIf=\"f.type === fieldType.Hidden && (cipher.viewPassword || f.newField)\"\n        >\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n            (click)=\"toggleFieldValue(f)\"\n            [attr.aria-pressed]=\"f.showValue\"\n          >\n            <i\n              class=\"bwi bwi-lg\"\n              aria-hidden=\"true\"\n              [ngClass]=\"{ 'bwi-eye': !f.showValue, 'bwi-eye-slash': f.showValue }\"\n            ></i>\n          </button>\n        </div>\n        <div\n          class=\"drag-handle\"\n          appA11yTitle=\"{{ 'dragToSort' | i18n }}\"\n          *ngIf=\"!(!cipher.edit && editMode)\"\n          cdkDragHandle\n        >\n          <i class=\"bwi bwi-hamburger\" aria-hidden=\"true\"></i>\n        </div>\n      </div>\n    </div>\n    <!-- Add new custom field -->\n    <div\n      class=\"box-content-row box-content-row-newmulti\"\n      *ngIf=\"!(!cipher.edit && editMode)\"\n      appBoxRow\n    >\n      <button type=\"button\" appStopClick (click)=\"addField()\">\n        <i class=\"bwi bwi-plus-circle bwi-fw bwi-lg\" aria-hidden=\"true\"></i>\n        {{ \"newCustomField\" | i18n }}\n      </button>\n      <label for=\"addFieldType\" class=\"sr-only\">{{ \"type\" | i18n }}</label>\n      <select id=\"addFieldType\" name=\"AddFieldType\" [(ngModel)]=\"addFieldType\" class=\"field-type\">\n        <option *ngFor=\"let o of addFieldTypeOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n        <option\n          *ngIf=\"cipher.linkedFieldOptions != null\"\n          [ngValue]=\"addFieldLinkedTypeOption.value\"\n        >\n          {{ addFieldLinkedTypeOption.name }}\n        </option>\n      </select>\n    </div>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\n\nimport { AddEditCustomFieldsComponent as BaseAddEditCustomFieldsComponent } from \"@bitwarden/angular/vault/components/add-edit-custom-fields.component\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\n\n@Component({\n  selector: \"app-vault-add-edit-custom-fields\",\n  templateUrl: \"add-edit-custom-fields.component.html\",\n})\nexport class AddEditCustomFieldsComponent extends BaseAddEditCustomFieldsComponent {\n  constructor(i18nService: I18nService, eventCollectionService: EventCollectionService) {\n    super(i18nService, eventCollectionService);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"cancel()\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\" *ngIf=\"cipher\">\n    <app-callout type=\"info\" *ngIf=\"allowOwnershipOptions() && !allowPersonal\">\n      {{ \"personalOwnershipPolicyInEffect\" | i18n }}\n    </app-callout>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"itemInformation\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" *ngIf=\"!editMode\" appBoxRow>\n          <label for=\"type\">{{ \"type\" | i18n }}</label>\n          <select id=\"type\" name=\"Type\" [(ngModel)]=\"cipher.type\">\n            <option *ngFor=\"let o of typeOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"name\">{{ \"name\" | i18n }}</label>\n          <input\n            id=\"name\"\n            type=\"text\"\n            name=\"Name\"\n            [(ngModel)]=\"cipher.name\"\n            [readonly]=\"!cipher.edit && editMode\"\n          />\n        </div>\n        <!-- Login -->\n        <div *ngIf=\"cipher.type === cipherType.Login\">\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"loginUsername\">{{ \"username\" | i18n }}</label>\n              <input\n                id=\"loginUsername\"\n                type=\"text\"\n                name=\"Login.Username\"\n                [(ngModel)]=\"cipher.login.username\"\n                inputmode=\"email\"\n                appInputVerbatim\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'generateUsername' | i18n }}\"\n                (click)=\"generateUsername()\"\n                *ngIf=\"!(!cipher.edit && editMode)\"\n              >\n                <i class=\"bwi bwi-lg bwi-generate\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"loginPassword\">{{ \"password\" | i18n }}</label>\n              <input\n                id=\"loginPassword\"\n                class=\"monospaced\"\n                type=\"{{ showPassword ? 'text' : 'password' }}\"\n                name=\"Login.Password\"\n                [(ngModel)]=\"cipher.login.password\"\n                appInputVerbatim\n                [disabled]=\"!cipher.viewPassword\"\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                #checkPasswordBtn\n                class=\"row-btn btn\"\n                appA11yTitle=\"{{ 'checkPassword' | i18n }}\"\n                (click)=\"checkPassword()\"\n                [appApiAction]=\"checkPasswordPromise\"\n                [disabled]=\"$any(checkPasswordBtn).loading\"\n                *ngIf=\"cipher.viewPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg bwi-check-circle\"\n                  [hidden]=\"$any(checkPasswordBtn).loading\"\n                  aria-hidden=\"true\"\n                ></i>\n                <i\n                  class=\"bwi bwi-lg bwi-spinner bwi-spin\"\n                  [hidden]=\"!$any(checkPasswordBtn).loading\"\n                  aria-hidden=\"true\"\n                ></i>\n              </button>\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"togglePassword()\"\n                *ngIf=\"cipher.viewPassword\"\n                [attr.aria-pressed]=\"showPassword\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                ></i>\n              </button>\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'generatePassword' | i18n }}\"\n                (click)=\"generatePassword()\"\n                *ngIf=\"cipher.viewPassword && !(!cipher.edit && editMode)\"\n              >\n                <i class=\"bwi bwi-lg bwi-generate\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"loginTotp\">{{ \"authenticatorKeyTotp\" | i18n }}</label>\n            <input\n              id=\"loginTotp\"\n              type=\"{{ cipher.viewPassword ? 'text' : 'password' }}\"\n              name=\"Login.Totp\"\n              class=\"monospaced\"\n              [(ngModel)]=\"cipher.login.totp\"\n              appInputVerbatim\n              [disabled]=\"!cipher.viewPassword\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n        </div>\n        <!-- Card -->\n        <div *ngIf=\"cipher.type === cipherType.Card\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardCardholderName\">{{ \"cardholderName\" | i18n }}</label>\n            <input\n              id=\"cardCardholderName\"\n              type=\"text\"\n              name=\"Card.CardCardholderName\"\n              [(ngModel)]=\"cipher.card.cardholderName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"cardNumber\">{{ \"number\" | i18n }}</label>\n              <input\n                id=\"cardNumber\"\n                class=\"monospaced\"\n                type=\"{{ showCardNumber ? 'text' : 'password' }}\"\n                name=\"Card.Number\"\n                [(ngModel)]=\"cipher.card.number\"\n                appInputVerbatim\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"toggleCardNumber()\"\n                [attr.aria-pressed]=\"showCardNumber\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showCardNumber, 'bwi-eye-slash': showCardNumber }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardBrand\">{{ \"brand\" | i18n }}</label>\n            <span *ngIf=\"!(!cipher.edit && editMode); else readonlyCardBrand\">\n              <select id=\"cardBrand\" name=\"Card.Brand\" [(ngModel)]=\"cipher.card.brand\">\n                <option *ngFor=\"let o of cardBrandOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n              </select>\n            </span>\n            <ng-template #readonlyCardBrand>\n              <input\n                id=\"cardBrand\"\n                name=\"Card.Brand\"\n                type=\"text\"\n                [readonly]=\"true\"\n                [value]=\"cipher.card.brand\"\n              />\n            </ng-template>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardExpMonth\">{{ \"expirationMonth\" | i18n }}</label>\n            <span *ngIf=\"!(!cipher.edit && editMode); else readonlyCardExpMonth\">\n              <select id=\"cardExpMonth\" name=\"Card.ExpMonth\" [(ngModel)]=\"cipher.card.expMonth\">\n                <option *ngFor=\"let o of cardExpMonthOptions\" [ngValue]=\"o.value\">\n                  {{ o.name }}\n                </option>\n              </select>\n            </span>\n            <ng-template #readonlyCardExpMonth>\n              <input\n                id=\"cardExpMonth\"\n                name=\"Card.ExpMonth\"\n                type=\"text\"\n                [readonly]=\"true\"\n                [value]=\"getCardExpMonthDisplay()\"\n              />\n            </ng-template>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"cardExpYear\">{{ \"expirationYear\" | i18n }}</label>\n            <input\n              id=\"cardExpYear\"\n              type=\"text\"\n              name=\"Card.ExpYear\"\n              [(ngModel)]=\"cipher.card.expYear\"\n              placeholder=\"{{ 'ex' | i18n }} {{ currentDate | date : 'yyyy' }}\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n            <div class=\"row-main\">\n              <label for=\"cardCode\">{{ \"securityCode\" | i18n }}</label>\n              <input\n                id=\"cardCode\"\n                class=\"monospaced\"\n                type=\"{{ showCardCode ? 'text' : 'password' }}\"\n                name=\"Card.Code\"\n                [(ngModel)]=\"cipher.card.code\"\n                appInputVerbatim\n                [readonly]=\"!cipher.edit && editMode\"\n              />\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                (click)=\"toggleCardCode()\"\n                [attr.aria-pressed]=\"showCardCode\"\n              >\n                <i\n                  class=\"bwi bwi-lg\"\n                  aria-hidden=\"true\"\n                  [ngClass]=\"{ 'bwi-eye': !showCardCode, 'bwi-eye-slash': showCardCode }\"\n                ></i>\n              </button>\n            </div>\n          </div>\n        </div>\n        <!-- Identity -->\n        <div *ngIf=\"cipher.type === cipherType.Identity\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idTitle\">{{ \"title\" | i18n }}</label>\n            <span *ngIf=\"!(!cipher.edit && editMode); else readonlyIdTitle\">\n              <select id=\"idTitle\" name=\"Identity.Title\" [(ngModel)]=\"cipher.identity.title\">\n                <option *ngFor=\"let o of identityTitleOptions\" [ngValue]=\"o.value\">\n                  {{ o.name }}\n                </option>\n              </select>\n            </span>\n            <ng-template #readonlyIdTitle>\n              <input\n                id=\"idTitle\"\n                name=\"Identity.Title\"\n                type=\"text\"\n                [readonly]=\"true\"\n                [value]=\"cipher.identity.title\"\n              />\n            </ng-template>\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idFirstName\">{{ \"firstName\" | i18n }}</label>\n            <input\n              id=\"idFirstName\"\n              type=\"text\"\n              name=\"Identity.FirstName\"\n              [(ngModel)]=\"cipher.identity.firstName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idMiddleName\">{{ \"middleName\" | i18n }}</label>\n            <input\n              id=\"idMiddleName\"\n              type=\"text\"\n              name=\"Identity.MiddleName\"\n              [(ngModel)]=\"cipher.identity.middleName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idLastName\">{{ \"lastName\" | i18n }}</label>\n            <input\n              id=\"idLastName\"\n              type=\"text\"\n              name=\"Identity.LastName\"\n              [(ngModel)]=\"cipher.identity.lastName\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idUsername\">{{ \"username\" | i18n }}</label>\n            <input\n              id=\"idUsername\"\n              type=\"text\"\n              name=\"Identity.Username\"\n              [(ngModel)]=\"cipher.identity.username\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idCompany\">{{ \"company\" | i18n }}</label>\n            <input\n              id=\"idCompany\"\n              type=\"text\"\n              name=\"Identity.Company\"\n              [(ngModel)]=\"cipher.identity.company\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idSsn\">{{ \"ssn\" | i18n }}</label>\n            <input\n              id=\"idSsn\"\n              type=\"text\"\n              name=\"Identity.SSN\"\n              [(ngModel)]=\"cipher.identity.ssn\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idPassportNumber\">{{ \"passportNumber\" | i18n }}</label>\n            <input\n              id=\"idPassportNumber\"\n              type=\"text\"\n              name=\"Identity.PassportNumber\"\n              [(ngModel)]=\"cipher.identity.passportNumber\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idLicenseNumber\">{{ \"licenseNumber\" | i18n }}</label>\n            <input\n              id=\"idLicenseNumber\"\n              type=\"text\"\n              name=\"Identity.LicenseNumber\"\n              [(ngModel)]=\"cipher.identity.licenseNumber\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idEmail\">{{ \"email\" | i18n }}</label>\n            <input\n              id=\"idEmail\"\n              type=\"text\"\n              name=\"Identity.Email\"\n              [(ngModel)]=\"cipher.identity.email\"\n              appInputVerbatim\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idPhone\">{{ \"phone\" | i18n }}</label>\n            <input\n              id=\"idPhone\"\n              type=\"text\"\n              name=\"Identity.Phone\"\n              [(ngModel)]=\"cipher.identity.phone\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idAddress1\">{{ \"address1\" | i18n }}</label>\n            <input\n              id=\"idAddress1\"\n              type=\"text\"\n              name=\"Identity.Address1\"\n              [(ngModel)]=\"cipher.identity.address1\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idAddress2\">{{ \"address2\" | i18n }}</label>\n            <input\n              id=\"idAddress2\"\n              type=\"text\"\n              name=\"Identity.Address2\"\n              [(ngModel)]=\"cipher.identity.address2\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idAddress3\">{{ \"address3\" | i18n }}</label>\n            <input\n              id=\"idAddress3\"\n              type=\"text\"\n              name=\"Identity.Address3\"\n              [(ngModel)]=\"cipher.identity.address3\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idCity\">{{ \"cityTown\" | i18n }}</label>\n            <input\n              id=\"idCity\"\n              type=\"text\"\n              name=\"Identity.City\"\n              [(ngModel)]=\"cipher.identity.city\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idState\">{{ \"stateProvince\" | i18n }}</label>\n            <input\n              id=\"idState\"\n              type=\"text\"\n              name=\"Identity.State\"\n              [(ngModel)]=\"cipher.identity.state\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idPostalCode\">{{ \"zipPostalCode\" | i18n }}</label>\n            <input\n              id=\"idPostalCode\"\n              type=\"text\"\n              name=\"Identity.PostalCode\"\n              [(ngModel)]=\"cipher.identity.postalCode\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"idCountry\">{{ \"country\" | i18n }}</label>\n            <input\n              id=\"idCountry\"\n              type=\"text\"\n              name=\"Identity.Country\"\n              [(ngModel)]=\"cipher.identity.country\"\n              [readonly]=\"!cipher.edit && editMode\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"cipher.type === cipherType.Login\">\n      <div class=\"box-content\">\n        <ng-container *ngIf=\"cipher.login.hasUris\">\n          <div\n            role=\"group\"\n            class=\"box-content-row box-content-row-multi\"\n            appBoxRow\n            *ngFor=\"let u of cipher.login.uris; let i = index; trackBy: trackByFunction\"\n            attr.aria-label=\"{{ 'uriPosition' | i18n : i + 1 }}\"\n          >\n            <button\n              type=\"button\"\n              appStopClick\n              (click)=\"removeUri(u)\"\n              appA11yTitle=\"{{ 'remove' | i18n }}\"\n            >\n              <i class=\"bwi bwi-minus-circle bwi-lg\" aria-hidden=\"true\"></i>\n            </button>\n            <div class=\"row-main\">\n              <label for=\"loginUri{{ i }}\">{{ \"uriPosition\" | i18n : i + 1 }}</label>\n              <input\n                id=\"loginUri{{ i }}\"\n                type=\"text\"\n                name=\"Login.Uris[{{ i }}].Uri\"\n                [(ngModel)]=\"u.uri\"\n                [hidden]=\"$any(u).showUriOptionsInput === true\"\n                placeholder=\"{{ 'ex' | i18n }} https://google.com\"\n                inputmode=\"url\"\n                appInputVerbatim\n              />\n              <label for=\"loginUriMatch{{ i }}\" class=\"sr-only\">\n                {{ \"currentUri\" | i18n }} {{ i + 1 }}\n              </label>\n              <select\n                *ngIf=\"currentUris && currentUris.length\"\n                id=\"currentUris{{ i }}\"\n                name=\"Login.Uris[{{ i }}].CurrentUris\"\n                [(ngModel)]=\"u.uri\"\n                [hidden]=\"!$any(u).showCurrentUris\"\n              >\n                <option [ngValue]=\"null\">-- {{ \"select\" | i18n }} --</option>\n                <option *ngFor=\"let u of currentUris\" [ngValue]=\"u\">{{ u }}</option>\n              </select>\n              <label for=\"loginUriMatch{{ i }}\" class=\"sr-only\">\n                {{ \"matchDetection\" | i18n }} {{ i + 1 }}\n              </label>\n              <select\n                id=\"loginUriMatch{{ i }}\"\n                name=\"Login.Uris[{{ i }}].Match\"\n                [(ngModel)]=\"u.match\"\n                [hidden]=\"\n                  $any(u).showOptions === false || ($any(u).showOptions == null && u.match == null)\n                \"\n                (change)=\"loginUriMatchChanged(u)\"\n              >\n                <option *ngFor=\"let o of uriMatchOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n              </select>\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                *ngIf=\"currentUris && currentUris.length\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleCurrentUris' | i18n }}\"\n                (click)=\"toggleUriInput(u)\"\n                [attr.aria-pressed]=\"$any(u).showCurrentUris === true\"\n              >\n                <i aria-hidden=\"true\" class=\"bwi bwi-lg bwi-list\"></i>\n              </button>\n              <button\n                type=\"button\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleOptions' | i18n }}\"\n                (click)=\"toggleUriOptions(u)\"\n                [attr.aria-pressed]=\"$any(u).showOptions === true\"\n              >\n                <i class=\"bwi bwi-lg bwi-cog\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n        </ng-container>\n        <button\n          type=\"button\"\n          appStopClick\n          (click)=\"addUri()\"\n          class=\"box-content-row box-content-row-newmulti single-line\"\n          *ngIf=\"!(!cipher.edit && editMode)\"\n        >\n          <i class=\"bwi bwi-plus-circle bwi-fw bwi-lg\" aria-hidden=\"true\"></i> {{ \"newUri\" | i18n }}\n        </button>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"showAutoFillOnPageLoadOptions\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"autofillOnPageLoad\">{{ \"itemAutoFillOnPageLoad\" | i18n }} </label>\n          <select\n            id=\"autofillOnPageLoad\"\n            name=\"AutofillOnPageLoad\"\n            [(ngModel)]=\"cipher.login.autofillOnPageLoad\"\n          >\n            <option *ngFor=\"let o of autofillOnPageLoadOptions\" [ngValue]=\"o.value\">\n              {{ o.name }}\n            </option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"folder\">{{ \"folder\" | i18n }}</label>\n          <select id=\"folder\" name=\"FolderId\" [(ngModel)]=\"cipher.folderId\">\n            <option *ngFor=\"let f of folders$ | async\" [ngValue]=\"f.id\">{{ f.name }}</option>\n          </select>\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"favorite\">{{ \"favorite\" | i18n }}</label>\n          <input id=\"favorite\" type=\"checkbox\" name=\"Favorite\" [(ngModel)]=\"cipher.favorite\" />\n        </div>\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow *ngIf=\"canUseReprompt\">\n          <label for=\"passwordPrompt\">\n            {{ \"passwordPrompt\" | i18n }}\n            <a\n              target=\"_blank\"\n              rel=\"noopener\"\n              appA11yTitle=\"{{ 'learnMore' | i18n }}\"\n              href=\"https://bitwarden.com/help/managing-items/#protect-individual-items\"\n            >\n              <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n            </a>\n          </label>\n          <input\n            id=\"passwordPrompt\"\n            type=\"checkbox\"\n            name=\"PasswordPrompt\"\n            [ngModel]=\"reprompt\"\n            (change)=\"repromptChanged()\"\n            [disabled]=\"!cipher.edit && editMode\"\n          />\n        </div>\n        <button\n          type=\"button\"\n          class=\"box-content-row box-content-row-flex text-default single-line\"\n          appStopClick\n          (click)=\"attachments()\"\n          *ngIf=\"editMode && showAttachments && !cloneMode\"\n        >\n          <div class=\"row-main\">{{ \"attachments\" | i18n }}</div>\n          <i\n            class=\"bwi bwi-external-link bwi-lg bwi-fw\"\n            aria-hidden=\"true\"\n            *ngIf=\"openAttachmentsInPopup\"\n          ></i>\n          <i\n            class=\"bwi bwi-angle-right row-sub-icon\"\n            aria-hidden=\"true\"\n            *ngIf=\"!openAttachmentsInPopup\"\n          ></i>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row box-content-row-flex text-default\"\n          appStopClick\n          (click)=\"editCollections()\"\n          *ngIf=\"editMode && cipher.organizationId && !cloneMode\"\n        >\n          <div class=\"row-main\">{{ \"collections\" | i18n }}</div>\n          <i class=\"bwi bwi-angle-right row-sub-icon\" aria-hidden=\"true\"></i>\n        </button>\n      </div>\n    </div>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        <label for=\"notes\">{{ \"notes\" | i18n }}</label>\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <textarea\n            id=\"notes\"\n            name=\"Notes\"\n            rows=\"6\"\n            [(ngModel)]=\"cipher.notes\"\n            [readonly]=\"!cipher.edit && editMode\"\n          ></textarea>\n        </div>\n      </div>\n    </div>\n    <app-vault-add-edit-custom-fields\n      *ngIf=\"!(!cipher.hasFields && !cipher.edit && editMode)\"\n      [cipher]=\"cipher\"\n      [thisCipherType]=\"cipher.type\"\n      [editMode]=\"editMode\"\n    >\n    </app-vault-add-edit-custom-fields>\n    <div class=\"box\" *ngIf=\"allowOwnershipOptions()\">\n      <h2 class=\"box-header\">\n        {{ \"ownership\" | i18n }}\n      </h2>\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"organizationId\">{{ \"whoOwnsThisItem\" | i18n }}</label>\n          <select\n            id=\"organizationId\"\n            class=\"form-control\"\n            name=\"OrganizationId\"\n            [(ngModel)]=\"cipher.organizationId\"\n            (change)=\"organizationChanged()\"\n          >\n            <option *ngFor=\"let o of ownershipOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\" *ngIf=\"(!editMode || cloneMode) && cipher.organizationId\">\n      <h2 class=\"box-header\">\n        {{ \"collections\" | i18n }}\n      </h2>\n      <div class=\"box-content\" *ngIf=\"!collections || !collections.length\">\n        <div class=\"box-content-row padded no-hover\">\n          {{ \"noCollectionsInList\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box-content\" *ngIf=\"collections && collections.length\">\n        <div\n          class=\"box-content-row box-content-row-checkbox\"\n          *ngFor=\"let c of collections; let i = index\"\n          appBoxRow\n        >\n          <label for=\"collection_{{ i }}\">{{ c.name }}</label>\n          <input\n            id=\"collection_{{ i }}\"\n            type=\"checkbox\"\n            [(ngModel)]=\"$any(c).checked\"\n            name=\"Collection[{{ i }}].Checked\"\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"editMode && !cloneMode && !(!cipher.edit && editMode)\">\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"delete()\"\n          [appApiAction]=\"deletePromise\"\n          #deleteBtn\n        >\n          <div class=\"row-main text-danger\">\n            <div class=\"icon text-danger\" aria-hidden=\"true\">\n              <i class=\"bwi bwi-trash bwi-lg bwi-fw\" [hidden]=\"$any(deleteBtn).loading\"></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n              ></i>\n            </div>\n            <span>{{ \"deleteItem\" | i18n }}</span>\n          </div>\n        </button>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { AddEditComponent as BaseAddEditComponent } from \"@bitwarden/angular/vault/components/add-edit.component\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\n\nimport { BrowserApi } from \"../../../../browser/browserApi\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\n\n@Component({\n  selector: \"app-vault-add-edit\",\n  templateUrl: \"add-edit.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class AddEditComponent extends BaseAddEditComponent {\n  currentUris: string[];\n  showAttachments = true;\n  openAttachmentsInPopup: boolean;\n  showAutoFillOnPageLoadOptions: boolean;\n\n  constructor(\n    cipherService: CipherService,\n    folderService: FolderService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    auditService: AuditService,\n    stateService: StateService,\n    collectionService: CollectionService,\n    messagingService: MessagingService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    eventCollectionService: EventCollectionService,\n    policyService: PolicyService,\n    private popupUtilsService: PopupUtilsService,\n    organizationService: OrganizationService,\n    passwordRepromptService: PasswordRepromptService,\n    logService: LogService,\n    sendApiService: SendApiService\n  ) {\n    super(\n      cipherService,\n      folderService,\n      i18nService,\n      platformUtilsService,\n      auditService,\n      stateService,\n      collectionService,\n      messagingService,\n      eventCollectionService,\n      policyService,\n      logService,\n      passwordRepromptService,\n      organizationService,\n      sendApiService\n    );\n  }\n\n  async ngOnInit() {\n    await super.ngOnInit();\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.cipherId) {\n        this.cipherId = params.cipherId;\n      }\n      if (params.folderId) {\n        this.folderId = params.folderId;\n      }\n      if (params.collectionId) {\n        const collection = this.writeableCollections.find((c) => c.id === params.collectionId);\n        if (collection != null) {\n          this.collectionIds = [collection.id];\n          this.organizationId = collection.organizationId;\n        }\n      }\n      if (params.type) {\n        const type = parseInt(params.type, null);\n        this.type = type;\n      }\n      this.editMode = !params.cipherId;\n\n      if (params.cloneMode != null) {\n        this.cloneMode = params.cloneMode === \"true\";\n      }\n      if (params.selectedVault) {\n        this.organizationId = params.selectedVault;\n      }\n      await this.load();\n\n      if (!this.editMode || this.cloneMode) {\n        if (\n          !this.popupUtilsService.inPopout(window) &&\n          params.name &&\n          (this.cipher.name == null || this.cipher.name === \"\")\n        ) {\n          this.cipher.name = params.name;\n        }\n        if (\n          !this.popupUtilsService.inPopout(window) &&\n          params.uri &&\n          (this.cipher.login.uris[0].uri == null || this.cipher.login.uris[0].uri === \"\")\n        ) {\n          this.cipher.login.uris[0].uri = params.uri;\n        }\n      }\n\n      this.openAttachmentsInPopup = this.popupUtilsService.inPopup(window);\n    });\n\n    if (!this.editMode) {\n      const tabs = await BrowserApi.tabsQuery({ windowType: \"normal\" });\n      this.currentUris =\n        tabs == null\n          ? null\n          : tabs.filter((tab) => tab.url != null && tab.url !== \"\").map((tab) => tab.url);\n    }\n\n    this.setFocus();\n\n    if (this.popupUtilsService.inTab(window)) {\n      this.popupUtilsService.enableCloseTabWarning();\n    }\n  }\n\n  async load() {\n    await super.load();\n    this.showAutoFillOnPageLoadOptions =\n      this.cipher.type === CipherType.Login &&\n      (await this.stateService.getEnableAutoFillOnPageLoad());\n  }\n\n  async submit(): Promise<boolean> {\n    const success = await super.submit();\n    if (!success) {\n      return false;\n    }\n\n    if (this.popupUtilsService.inTab(window)) {\n      this.popupUtilsService.disableCloseTabWarning();\n      this.messagingService.send(\"closeTab\", { delay: 1000 });\n      return true;\n    }\n\n    if (this.cloneMode) {\n      this.router.navigate([\"/tabs/vault\"]);\n    } else {\n      this.location.back();\n    }\n    return true;\n  }\n\n  attachments() {\n    super.attachments();\n\n    if (this.openAttachmentsInPopup) {\n      const destinationUrl = this.router\n        .createUrlTree([\"/attachments\"], { queryParams: { cipherId: this.cipher.id } })\n        .toString();\n      const currentBaseUrl = window.location.href.replace(this.router.url, \"\");\n      this.popupUtilsService.popOut(window, currentBaseUrl + destinationUrl);\n    } else {\n      this.router.navigate([\"/attachments\"], { queryParams: { cipherId: this.cipher.id } });\n    }\n  }\n\n  editCollections() {\n    super.editCollections();\n    if (this.cipher.organizationId != null) {\n      this.router.navigate([\"/collections\"], { queryParams: { cipherId: this.cipher.id } });\n    }\n  }\n\n  cancel() {\n    super.cancel();\n\n    if (this.popupUtilsService.inTab(window)) {\n      this.messagingService.send(\"closeTab\");\n      return;\n    }\n\n    this.location.back();\n  }\n\n  async generateUsername(): Promise<boolean> {\n    const confirmed = await super.generateUsername();\n    if (confirmed) {\n      await this.saveCipherState();\n      this.router.navigate([\"generator\"], { queryParams: { type: \"username\" } });\n    }\n    return confirmed;\n  }\n\n  async generatePassword(): Promise<boolean> {\n    const confirmed = await super.generatePassword();\n    if (confirmed) {\n      await this.saveCipherState();\n      this.router.navigate([\"generator\"], { queryParams: { type: \"password\" } });\n    }\n    return confirmed;\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await super.delete();\n    if (confirmed) {\n      this.router.navigate([\"/tabs/vault\"]);\n    }\n    return confirmed;\n  }\n\n  toggleUriInput(uri: LoginUriView) {\n    const u = uri as any;\n    u.showCurrentUris = !u.showCurrentUris;\n  }\n\n  allowOwnershipOptions(): boolean {\n    return (\n      (!this.editMode || this.cloneMode) &&\n      this.ownershipOptions &&\n      (this.ownershipOptions.length > 1 || !this.allowPersonal)\n    );\n  }\n\n  private saveCipherState() {\n    return this.stateService.setAddEditCipherInfo({\n      cipher: this.cipher,\n      collectionIds:\n        this.collections == null\n          ? []\n          : this.collections.filter((c) => (c as any).checked).map((c) => c.id),\n    });\n  }\n\n  private setFocus() {\n    window.setTimeout(() => {\n      if (this.editMode) {\n        return;\n      }\n\n      if (this.cipher.name != null && this.cipher.name !== \"\") {\n        document.getElementById(\"loginUsername\").focus();\n      } else {\n        document.getElementById(\"name\").focus();\n      }\n    }, 200);\n  }\n}\n","import { EncryptionType } from \"../../enums\";\nimport { IEncrypted } from \"../../interfaces/IEncrypted\";\nimport { Utils } from \"../../misc/utils\";\n\nconst ENC_TYPE_LENGTH = 1;\nconst IV_LENGTH = 16;\nconst MAC_LENGTH = 32;\nconst MIN_DATA_LENGTH = 1;\n\nexport class EncArrayBuffer implements IEncrypted {\n  readonly encryptionType: EncryptionType = null;\n  readonly dataBytes: ArrayBuffer = null;\n  readonly ivBytes: ArrayBuffer = null;\n  readonly macBytes: ArrayBuffer = null;\n\n  constructor(readonly buffer: ArrayBuffer) {\n    const encBytes = new Uint8Array(buffer);\n    const encType = encBytes[0];\n\n    switch (encType) {\n      case EncryptionType.AesCbc128_HmacSha256_B64:\n      case EncryptionType.AesCbc256_HmacSha256_B64: {\n        const minimumLength = ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH + MIN_DATA_LENGTH;\n        if (encBytes.length < minimumLength) {\n          this.throwDecryptionError();\n        }\n\n        this.ivBytes = encBytes.slice(ENC_TYPE_LENGTH, ENC_TYPE_LENGTH + IV_LENGTH).buffer;\n        this.macBytes = encBytes.slice(\n          ENC_TYPE_LENGTH + IV_LENGTH,\n          ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH\n        ).buffer;\n        this.dataBytes = encBytes.slice(ENC_TYPE_LENGTH + IV_LENGTH + MAC_LENGTH).buffer;\n        break;\n      }\n      case EncryptionType.AesCbc256_B64: {\n        const minimumLength = ENC_TYPE_LENGTH + IV_LENGTH + MIN_DATA_LENGTH;\n        if (encBytes.length < minimumLength) {\n          this.throwDecryptionError();\n        }\n\n        this.ivBytes = encBytes.slice(ENC_TYPE_LENGTH, ENC_TYPE_LENGTH + IV_LENGTH).buffer;\n        this.dataBytes = encBytes.slice(ENC_TYPE_LENGTH + IV_LENGTH).buffer;\n        break;\n      }\n      default:\n        this.throwDecryptionError();\n    }\n\n    this.encryptionType = encType;\n  }\n\n  private throwDecryptionError() {\n    throw new Error(\n      \"Error parsing encrypted ArrayBuffer: data is corrupted or has an invalid format.\"\n    );\n  }\n\n  static async fromResponse(response: {\n    arrayBuffer: () => Promise<ArrayBuffer>;\n  }): Promise<EncArrayBuffer> {\n    const buffer = await response.arrayBuffer();\n    if (buffer == null) {\n      throw new Error(\"Cannot create EncArrayBuffer from Response - Response is empty\");\n    }\n    return new EncArrayBuffer(buffer);\n  }\n\n  static fromB64(b64: string) {\n    const buffer = Utils.fromB64ToArray(b64).buffer;\n    return new EncArrayBuffer(buffer);\n  }\n}\n","import { FileDownloadRequest } from \"./fileDownloadRequest\";\n\nexport abstract class FileDownloadService {\n  download: (request: FileDownloadRequest) => void;\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { EncArrayBuffer } from \"@bitwarden/common/models/domain/enc-array-buffer\";\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { AttachmentView } from \"@bitwarden/common/vault/models/view/attachment.view\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Directive()\nexport class AttachmentsComponent implements OnInit {\n  @Input() cipherId: string;\n  @Output() onUploadedAttachment = new EventEmitter();\n  @Output() onDeletedAttachment = new EventEmitter();\n  @Output() onReuploadedAttachment = new EventEmitter();\n\n  cipher: CipherView;\n  cipherDomain: Cipher;\n  hasUpdatedKey: boolean;\n  canAccessAttachments: boolean;\n  formPromise: Promise<any>;\n  deletePromises: { [id: string]: Promise<any> } = {};\n  reuploadPromises: { [id: string]: Promise<any> } = {};\n  emergencyAccessId?: string = null;\n  protected componentName = \"\";\n\n  constructor(\n    protected cipherService: CipherService,\n    protected i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected apiService: ApiService,\n    protected win: Window,\n    protected logService: LogService,\n    protected stateService: StateService,\n    protected fileDownloadService: FileDownloadService\n  ) {}\n\n  async ngOnInit() {\n    await this.init();\n  }\n\n  async submit() {\n    if (!this.hasUpdatedKey) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"updateKey\")\n      );\n      return;\n    }\n\n    const fileEl = document.getElementById(\"file\") as HTMLInputElement;\n    const files = fileEl.files;\n    if (files == null || files.length === 0) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"selectFile\")\n      );\n      return;\n    }\n\n    if (files[0].size > 524288000) {\n      // 500 MB\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"maxFileSize\")\n      );\n      return;\n    }\n\n    try {\n      this.formPromise = this.saveCipherAttachment(files[0]);\n      this.cipherDomain = await this.formPromise;\n      this.cipher = await this.cipherDomain.decrypt();\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"attachmentSaved\"));\n      this.onUploadedAttachment.emit();\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    // reset file input\n    // ref: https://stackoverflow.com/a/20552042\n    fileEl.type = \"\";\n    fileEl.type = \"file\";\n    fileEl.value = \"\";\n  }\n\n  async delete(attachment: AttachmentView) {\n    if (this.deletePromises[attachment.id] != null) {\n      return;\n    }\n\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"deleteAttachmentConfirmation\"),\n      this.i18nService.t(\"deleteAttachment\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\",\n      false,\n      this.componentName != \"\" ? this.componentName + \" .modal-content\" : null\n    );\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      this.deletePromises[attachment.id] = this.deleteCipherAttachment(attachment.id);\n      await this.deletePromises[attachment.id];\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedAttachment\"));\n      const i = this.cipher.attachments.indexOf(attachment);\n      if (i > -1) {\n        this.cipher.attachments.splice(i, 1);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    this.deletePromises[attachment.id] = null;\n    this.onDeletedAttachment.emit();\n  }\n\n  async download(attachment: AttachmentView) {\n    const a = attachment as any;\n    if (a.downloading) {\n      return;\n    }\n\n    if (!this.canAccessAttachments) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"premiumRequired\"),\n        this.i18nService.t(\"premiumRequiredDesc\")\n      );\n      return;\n    }\n\n    let url: string;\n    try {\n      const attachmentDownloadResponse = await this.apiService.getAttachmentData(\n        this.cipher.id,\n        attachment.id,\n        this.emergencyAccessId\n      );\n      url = attachmentDownloadResponse.url;\n    } catch (e) {\n      if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {\n        url = attachment.url;\n      } else if (e instanceof ErrorResponse) {\n        throw new Error((e as ErrorResponse).getSingleMessage());\n      } else {\n        throw e;\n      }\n    }\n\n    a.downloading = true;\n    const response = await fetch(new Request(url, { cache: \"no-store\" }));\n    if (response.status !== 200) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n      a.downloading = false;\n      return;\n    }\n\n    try {\n      const encBuf = await EncArrayBuffer.fromResponse(response);\n      const key =\n        attachment.key != null\n          ? attachment.key\n          : await this.cryptoService.getOrgKey(this.cipher.organizationId);\n      const decBuf = await this.cryptoService.decryptFromBytes(encBuf, key);\n      this.fileDownloadService.download({\n        fileName: attachment.fileName,\n        blobData: decBuf,\n      });\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n    }\n\n    a.downloading = false;\n  }\n\n  protected async init() {\n    this.cipherDomain = await this.loadCipher();\n    this.cipher = await this.cipherDomain.decrypt();\n\n    this.hasUpdatedKey = await this.cryptoService.hasEncKey();\n    const canAccessPremium = await this.stateService.getCanAccessPremium();\n    this.canAccessAttachments = canAccessPremium || this.cipher.organizationId != null;\n\n    if (!this.canAccessAttachments) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"premiumRequiredDesc\"),\n        this.i18nService.t(\"premiumRequired\"),\n        this.i18nService.t(\"learnMore\"),\n        this.i18nService.t(\"cancel\")\n      );\n      if (confirmed) {\n        this.platformUtilsService.launchUri(\"https://vault.bitwarden.com/#/?premium=purchase\");\n      }\n    } else if (!this.hasUpdatedKey) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"updateKey\"),\n        this.i18nService.t(\"featureUnavailable\"),\n        this.i18nService.t(\"learnMore\"),\n        this.i18nService.t(\"cancel\"),\n        \"warning\"\n      );\n      if (confirmed) {\n        this.platformUtilsService.launchUri(\n          \"https://bitwarden.com/help/account-encryption-key/#rotate-your-encryption-key\"\n        );\n      }\n    }\n  }\n\n  protected async reuploadCipherAttachment(attachment: AttachmentView, admin: boolean) {\n    const a = attachment as any;\n    if (attachment.key != null || a.downloading || this.reuploadPromises[attachment.id] != null) {\n      return;\n    }\n\n    try {\n      this.reuploadPromises[attachment.id] = Promise.resolve().then(async () => {\n        // 1. Download\n        a.downloading = true;\n        const response = await fetch(new Request(attachment.url, { cache: \"no-store\" }));\n        if (response.status !== 200) {\n          this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n          a.downloading = false;\n          return;\n        }\n\n        try {\n          // 2. Resave\n          const encBuf = await EncArrayBuffer.fromResponse(response);\n          const key =\n            attachment.key != null\n              ? attachment.key\n              : await this.cryptoService.getOrgKey(this.cipher.organizationId);\n          const decBuf = await this.cryptoService.decryptFromBytes(encBuf, key);\n          this.cipherDomain = await this.cipherService.saveAttachmentRawWithServer(\n            this.cipherDomain,\n            attachment.fileName,\n            decBuf,\n            admin\n          );\n          this.cipher = await this.cipherDomain.decrypt();\n\n          // 3. Delete old\n          this.deletePromises[attachment.id] = this.deleteCipherAttachment(attachment.id);\n          await this.deletePromises[attachment.id];\n          const foundAttachment = this.cipher.attachments.filter((a2) => a2.id === attachment.id);\n          if (foundAttachment.length > 0) {\n            const i = this.cipher.attachments.indexOf(foundAttachment[0]);\n            if (i > -1) {\n              this.cipher.attachments.splice(i, 1);\n            }\n          }\n\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"attachmentSaved\")\n          );\n          this.onReuploadedAttachment.emit();\n        } catch (e) {\n          this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n        }\n\n        a.downloading = false;\n      });\n      await this.reuploadPromises[attachment.id];\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  protected loadCipher() {\n    return this.cipherService.get(this.cipherId);\n  }\n\n  protected saveCipherAttachment(file: File) {\n    return this.cipherService.saveAttachmentWithServer(this.cipherDomain, file);\n  }\n\n  protected deleteCipherAttachment(attachmentId: string) {\n    return this.cipherService.deleteAttachmentWithServer(this.cipher.id, attachmentId);\n  }\n\n  protected async reupload(attachment: AttachmentView) {\n    // TODO: This should be removed but is needed since we re-use the same template\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"close()\" *ngIf=\"openedAttachmentsInPopup\">\n        {{ \"close\" | i18n }}\n      </button>\n      <button type=\"button\" (click)=\"back()\" *ngIf=\"!openedAttachmentsInPopup\">\n        <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"attachments\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\" *ngIf=\"cipher && cipher.hasAttachments\">\n      <div class=\"box-content no-hover single-line\">\n        <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let a of cipher.attachments\">\n          <div class=\"row-main\">\n            {{ a.fileName }}\n          </div>\n          <small class=\"row-sub-label\">{{ a.sizeName }}</small>\n          <div class=\"action-buttons no-pad\">\n            <button\n              type=\"button\"\n              class=\"row-btn btn\"\n              type=\"button\"\n              appStopClick\n              appA11yTitle=\"{{ 'deleteAttachment' | i18n }}\"\n              (click)=\"delete(a)\"\n              #deleteBtn\n              [appApiAction]=\"deletePromises[a.id]\"\n              [disabled]=\"$any(deleteBtn).loading\"\n            >\n              <i\n                class=\"bwi bwi-trash bwi-lg bwi-fw\"\n                [hidden]=\"$any(deleteBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"box\">\n      <h2 class=\"box-header\">\n        {{ \"newAttachment\" | i18n }}\n      </h2>\n      <div class=\"box-content no-hover\">\n        <div class=\"box-content-row\">\n          <label for=\"file\">{{ \"file\" | i18n }}</label>\n          <input type=\"file\" id=\"file\" name=\"file\" aria-describedby=\"fileHelp\" required />\n        </div>\n      </div>\n      <div id=\"fileHelp\" class=\"box-footer\">\n        {{ \"maxFileSize\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { AttachmentsComponent as BaseAttachmentsComponent } from \"@bitwarden/angular/vault/components/attachments.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\n@Component({\n  selector: \"app-vault-attachments\",\n  templateUrl: \"attachments.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class AttachmentsComponent extends BaseAttachmentsComponent {\n  openedAttachmentsInPopup: boolean;\n\n  constructor(\n    cipherService: CipherService,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    platformUtilsService: PlatformUtilsService,\n    apiService: ApiService,\n    private location: Location,\n    private route: ActivatedRoute,\n    stateService: StateService,\n    logService: LogService,\n    fileDownloadService: FileDownloadService\n  ) {\n    super(\n      cipherService,\n      i18nService,\n      cryptoService,\n      platformUtilsService,\n      apiService,\n      window,\n      logService,\n      stateService,\n      fileDownloadService\n    );\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.cipherId = params.cipherId;\n      await this.init();\n    });\n\n    this.openedAttachmentsInPopup = history.length === 1;\n  }\n\n  back() {\n    this.location.back();\n  }\n\n  close() {\n    window.close();\n  }\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport { CollectionView } from \"@bitwarden/common/admin-console/models/view/collection.view\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Directive()\nexport class CollectionsComponent implements OnInit {\n  @Input() cipherId: string;\n  @Input() allowSelectNone = false;\n  @Output() onSavedCollections = new EventEmitter();\n\n  formPromise: Promise<any>;\n  cipher: CipherView;\n  collectionIds: string[];\n  collections: CollectionView[] = [];\n\n  protected cipherDomain: Cipher;\n\n  constructor(\n    protected collectionService: CollectionService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    protected cipherService: CipherService,\n    private logService: LogService\n  ) {}\n\n  async ngOnInit() {\n    await this.load();\n  }\n\n  async load() {\n    this.cipherDomain = await this.loadCipher();\n    this.collectionIds = this.loadCipherCollections();\n    this.cipher = await this.cipherDomain.decrypt();\n    this.collections = await this.loadCollections();\n\n    this.collections.forEach((c) => ((c as any).checked = false));\n    if (this.collectionIds != null) {\n      this.collections.forEach((c) => {\n        (c as any).checked = this.collectionIds != null && this.collectionIds.indexOf(c.id) > -1;\n      });\n    }\n  }\n\n  async submit() {\n    const selectedCollectionIds = this.collections\n      .filter((c) => !!(c as any).checked)\n      .map((c) => c.id);\n    if (!this.allowSelectNone && selectedCollectionIds.length === 0) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"selectOneCollection\")\n      );\n      return;\n    }\n    this.cipherDomain.collectionIds = selectedCollectionIds;\n    try {\n      this.formPromise = this.saveCollections();\n      await this.formPromise;\n      this.onSavedCollections.emit();\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"editedItem\"));\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  protected loadCipher() {\n    return this.cipherService.get(this.cipherId);\n  }\n\n  protected loadCipherCollections() {\n    return this.cipherDomain.collectionIds;\n  }\n\n  protected async loadCollections() {\n    const allCollections = await this.collectionService.getAllDecrypted();\n    return allCollections.filter(\n      (c) => !c.readOnly && c.organizationId === this.cipher.organizationId\n    );\n  }\n\n  protected saveCollections() {\n    return this.cipherService.saveCollectionsWithServer(this.cipherDomain);\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" (click)=\"back()\">\n        <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"collections\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\" *ngIf=\"!collections || !collections.length\">\n        <div class=\"box-content-row padded no-hover\">\n          {{ \"noCollectionsInList\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box-content\" *ngIf=\"collections && collections.length\">\n        <div\n          class=\"box-content-row box-content-row-checkbox\"\n          *ngFor=\"let c of collections; let i = index\"\n          appBoxRow\n        >\n          <label for=\"collection_{{ i }}\">{{ c.name }}</label>\n          <input\n            id=\"collection_{{ i }}\"\n            type=\"checkbox\"\n            [(ngModel)]=\"$any(c).checked\"\n            name=\"Collection[{{ i }}].Checked\"\n          />\n        </div>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { CollectionsComponent as BaseCollectionsComponent } from \"@bitwarden/angular/admin-console/components/collections.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\n@Component({\n  selector: \"app-vault-collections\",\n  templateUrl: \"collections.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class CollectionsComponent extends BaseCollectionsComponent {\n  constructor(\n    collectionService: CollectionService,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    cipherService: CipherService,\n    private route: ActivatedRoute,\n    private location: Location,\n    logService: LogService\n  ) {\n    super(collectionService, platformUtilsService, i18nService, cipherService, logService);\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    this.onSavedCollections.subscribe(() => {\n      this.back();\n    });\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.cipherId = params.cipherId;\n      await this.load();\n    });\n  }\n\n  back() {\n    this.location.back();\n  }\n}\n","import { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport { CipherStatus } from \"./cipher-status.model\";\n\nexport type VaultFilterFunction = (cipher: CipherView) => boolean;\n\nexport class VaultFilter {\n  cipherType?: CipherType;\n  selectedCollection = false; // This is needed because of how the \"Unassigned\" collection works. It has a null id.\n  selectedCollectionId?: string;\n  status?: CipherStatus;\n  selectedFolder = false; // This is needed because of how the \"No Folder\" folder works. It has a null id.\n  selectedFolderId?: string;\n  selectedOrganizationId?: string;\n  myVaultOnly = false;\n  refreshCollectionsAndFolders = false;\n\n  constructor(init?: Partial<VaultFilter>) {\n    Object.assign(this, init);\n  }\n\n  resetFilter() {\n    this.cipherType = null;\n    this.status = null;\n    this.selectedCollection = false;\n    this.selectedCollectionId = null;\n    this.selectedFolder = false;\n    this.selectedFolderId = null;\n  }\n\n  resetOrganization() {\n    this.myVaultOnly = false;\n    this.selectedOrganizationId = null;\n    this.resetFilter();\n  }\n\n  buildFilter(): VaultFilterFunction {\n    return (cipher) => {\n      let cipherPassesFilter = true;\n      if (this.status === \"favorites\" && cipherPassesFilter) {\n        cipherPassesFilter = cipher.favorite;\n      }\n      if (this.status === \"trash\" && cipherPassesFilter) {\n        cipherPassesFilter = cipher.isDeleted;\n      }\n      if (this.cipherType != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.type === this.cipherType;\n      }\n      if (this.selectedFolder && this.selectedFolderId == null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.folderId == null;\n      }\n      if (this.selectedFolder && this.selectedFolderId != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.folderId === this.selectedFolderId;\n      }\n      if (this.selectedCollection && this.selectedCollectionId == null && cipherPassesFilter) {\n        cipherPassesFilter =\n          cipher.organizationId != null &&\n          (cipher.collectionIds == null || cipher.collectionIds.length === 0);\n      }\n      if (this.selectedCollection && this.selectedCollectionId != null && cipherPassesFilter) {\n        cipherPassesFilter =\n          cipher.collectionIds != null && cipher.collectionIds.includes(this.selectedCollectionId);\n      }\n      if (this.selectedOrganizationId != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === this.selectedOrganizationId;\n      }\n      if (this.myVaultOnly && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === null;\n      }\n      return cipherPassesFilter;\n    };\n  }\n}\n","export class TreeNode<T extends ITreeNodeObject> {\n  node: T;\n  parent: TreeNode<T>;\n  children: TreeNode<T>[] = [];\n\n  constructor(node: T, parent: TreeNode<T>, name?: string, id?: string) {\n    this.parent = parent;\n    this.node = node;\n    if (name) {\n      this.node.name = name;\n    }\n    if (id) {\n      this.node.id = id;\n    }\n  }\n}\n\nexport interface ITreeNodeObject {\n  id: string;\n  name: string;\n}\n","import { ITreeNodeObject, TreeNode } from \"../models/domain/tree-node\";\n\nexport class ServiceUtils {\n  /**\n   * Recursively adds a node to nodeTree\n   * @param {TreeNode<ITreeNodeObject>[]} nodeTree - An array of TreeNodes that the node will be added to\n   * @param {number} partIndex - Index of the `parts` array that is being processed\n   * @param {string[]} parts - Array of strings that represent the path to the `obj` node\n   * @param {ITreeNodeObject} obj - The node to be added to the tree\n   * @param {ITreeNodeObject} parent - The parent node of the `obj` node\n   * @param {string} delimiter - The delimiter used to split the path string, will be used to combine the path for missing nodes\n   */\n  static nestedTraverse(\n    nodeTree: TreeNode<ITreeNodeObject>[],\n    partIndex: number,\n    parts: string[],\n    obj: ITreeNodeObject,\n    parent: TreeNode<ITreeNodeObject> | undefined,\n    delimiter: string\n  ) {\n    if (parts.length <= partIndex) {\n      return;\n    }\n\n    const end: boolean = partIndex === parts.length - 1;\n    const partName: string = parts[partIndex];\n\n    for (let i = 0; i < nodeTree.length; i++) {\n      if (nodeTree[i].node.name !== partName) {\n        continue;\n      }\n      if (end && nodeTree[i].node.id !== obj.id) {\n        // Another node exists with the same name as the node being added\n        nodeTree.push(new TreeNode(obj, parent, partName));\n        return;\n      }\n      // Move down the tree to the next level\n      ServiceUtils.nestedTraverse(\n        nodeTree[i].children,\n        partIndex + 1,\n        parts,\n        obj,\n        nodeTree[i],\n        delimiter\n      );\n      return;\n    }\n\n    // If there's no node here with the same name...\n    if (nodeTree.filter((n) => n.node.name === partName).length === 0) {\n      // And we're at the end of the path given, add the node\n      if (end) {\n        nodeTree.push(new TreeNode(obj, parent, partName));\n        return;\n      }\n      // And we're not at the end of the path, combine the current name with the next name\n      // 1, *1.2, 1.2.1 becomes\n      // 1, *1.2/1.2.1\n      const newPartName = partName + delimiter + parts[partIndex + 1];\n      ServiceUtils.nestedTraverse(\n        nodeTree,\n        0,\n        [newPartName, ...parts.slice(partIndex + 2)],\n        obj,\n        parent,\n        delimiter\n      );\n    }\n  }\n\n  /**\n   * Searches a tree for a node with a matching `id`\n   * @param {TreeNode<T>} nodeTree - A single TreeNode branch that will be searched\n   * @param {string} id - The id of the node to be found\n   * @returns {TreeNode<T>} The node with a matching `id`\n   */\n  static getTreeNodeObject<T extends ITreeNodeObject>(\n    nodeTree: TreeNode<T>,\n    id: string\n  ): TreeNode<T> {\n    if (nodeTree.node.id === id) {\n      return nodeTree;\n    }\n    for (let i = 0; i < nodeTree.children.length; i++) {\n      if (nodeTree.children[i].children != null) {\n        const node = ServiceUtils.getTreeNodeObject(nodeTree.children[i], id);\n        if (node !== null) {\n          return node;\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Searches an array of tree nodes for a node with a matching `id`\n   * @param {TreeNode<T>} nodeTree - An array of TreeNode branches that will be searched\n   * @param {string} id - The id of the node to be found\n   * @returns {TreeNode<T>} The node with a matching `id`\n   */\n  static getTreeNodeObjectFromList<T extends ITreeNodeObject>(\n    nodeTree: TreeNode<T>[],\n    id: string\n  ): TreeNode<T> {\n    for (let i = 0; i < nodeTree.length; i++) {\n      if (nodeTree[i].node.id === id) {\n        return nodeTree[i];\n      } else if (nodeTree[i].children != null) {\n        const node = ServiceUtils.getTreeNodeObjectFromList(nodeTree[i].children, id);\n        if (node !== null) {\n          return node;\n        }\n      }\n    }\n    return null;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { ITreeNodeObject } from \"../../../models/domain/tree-node\";\nimport { View } from \"../../../models/view/view\";\nimport { Folder } from \"../domain/folder\";\n\nexport class FolderView implements View, ITreeNodeObject {\n  id: string = null;\n  name: string = null;\n  revisionDate: Date = null;\n\n  constructor(f?: Folder) {\n    if (!f) {\n      return;\n    }\n\n    this.id = f.id;\n    this.revisionDate = f.revisionDate;\n  }\n\n  static fromJSON(obj: Jsonify<FolderView>) {\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    return Object.assign(new FolderView(), obj, { revisionDate });\n  }\n}\n","import { ITreeNodeObject, TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\n\nexport class DynamicTreeNode<T extends ITreeNodeObject> {\n  fullList: T[];\n  nestedList: TreeNode<T>[];\n\n  hasId(id: string): boolean {\n    return this.fullList != null && this.fullList.filter((i: T) => i.id === id).length > 0;\n  }\n\n  constructor(init?: Partial<DynamicTreeNode<T>>) {\n    Object.assign(this, init);\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { firstValueFrom, from, mergeMap, Observable } from \"rxjs\";\n\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport {\n  isMember,\n  OrganizationService,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { CollectionView } from \"@bitwarden/common/admin-console/models/view/collection.view\";\nimport { ServiceUtils } from \"@bitwarden/common/misc/serviceUtils\";\nimport { TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { DeprecatedVaultFilterService as DeprecatedVaultFilterServiceAbstraction } from \"../../abstractions/deprecated-vault-filter.service\";\nimport { DynamicTreeNode } from \"../models/dynamic-tree-node.model\";\n\nconst NestingDelimiter = \"/\";\n\n@Injectable()\nexport class VaultFilterService implements DeprecatedVaultFilterServiceAbstraction {\n  constructor(\n    protected stateService: StateService,\n    protected organizationService: OrganizationService,\n    protected folderService: FolderService,\n    protected cipherService: CipherService,\n    protected collectionService: CollectionService,\n    protected policyService: PolicyService\n  ) {}\n\n  async storeCollapsedFilterNodes(collapsedFilterNodes: Set<string>): Promise<void> {\n    await this.stateService.setCollapsedGroupings(Array.from(collapsedFilterNodes));\n  }\n\n  async buildCollapsedFilterNodes(): Promise<Set<string>> {\n    return new Set(await this.stateService.getCollapsedGroupings());\n  }\n\n  async buildOrganizations(): Promise<Organization[]> {\n    let organizations = await this.organizationService.getAll();\n    if (organizations != null) {\n      organizations = organizations.filter(isMember).sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    return organizations;\n  }\n\n  buildNestedFolders(organizationId?: string): Observable<DynamicTreeNode<FolderView>> {\n    const transformation = async (storedFolders: FolderView[]) => {\n      let folders: FolderView[];\n\n      // If no org or \"My Vault\" is selected, show all folders\n      if (organizationId == null || organizationId == \"MyVault\") {\n        folders = storedFolders;\n      } else {\n        // Otherwise, show only folders that have ciphers from the selected org and the \"no folder\" folder\n        const ciphers = await this.cipherService.getAllDecrypted();\n        const orgCiphers = ciphers.filter((c) => c.organizationId == organizationId);\n        folders = storedFolders.filter(\n          (f) => orgCiphers.some((oc) => oc.folderId == f.id) || f.id == null\n        );\n      }\n\n      const nestedFolders = await this.getAllFoldersNested(folders);\n      return new DynamicTreeNode<FolderView>({\n        fullList: folders,\n        nestedList: nestedFolders,\n      });\n    };\n\n    return this.folderService.folderViews$.pipe(\n      mergeMap((folders) => from(transformation(folders)))\n    );\n  }\n\n  async buildCollections(organizationId?: string): Promise<DynamicTreeNode<CollectionView>> {\n    const storedCollections = await this.collectionService.getAllDecrypted();\n    let collections: CollectionView[];\n    if (organizationId != null) {\n      collections = storedCollections.filter((c) => c.organizationId === organizationId);\n    } else {\n      collections = storedCollections;\n    }\n    const nestedCollections = await this.collectionService.getAllNested(collections);\n    return new DynamicTreeNode<CollectionView>({\n      fullList: collections,\n      nestedList: nestedCollections,\n    });\n  }\n\n  async checkForSingleOrganizationPolicy(): Promise<boolean> {\n    return await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.SingleOrg)\n    );\n  }\n\n  async checkForPersonalOwnershipPolicy(): Promise<boolean> {\n    return await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.PersonalOwnership)\n    );\n  }\n\n  protected async getAllFoldersNested(folders: FolderView[]): Promise<TreeNode<FolderView>[]> {\n    const nodes: TreeNode<FolderView>[] = [];\n    folders.forEach((f) => {\n      const folderCopy = new FolderView();\n      folderCopy.id = f.id;\n      folderCopy.revisionDate = f.revisionDate;\n      const parts = f.name != null ? f.name.replace(/^\\/+|\\/+$/g, \"\").split(NestingDelimiter) : [];\n      ServiceUtils.nestedTraverse(nodes, 0, parts, folderCopy, null, NestingDelimiter);\n    });\n    return nodes;\n  }\n\n  async getFolderNested(id: string): Promise<TreeNode<FolderView>> {\n    const folders = await this.getAllFoldersNested(\n      await firstValueFrom(this.folderService.folderViews$)\n    );\n    return ServiceUtils.getTreeNodeObjectFromList(folders, id) as TreeNode<FolderView>;\n  }\n}\n","import { VaultFilter } from \"@bitwarden/angular/vault/vault-filter/models/vault-filter.model\";\nimport { VaultFilterService as BaseVaultFilterService } from \"@bitwarden/angular/vault/vault-filter/services/vault-filter.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nexport class VaultFilterService extends BaseVaultFilterService {\n  vaultFilter: VaultFilter = new VaultFilter();\n\n  allVaults = \"allVaults\";\n  myVault = \"myVault\";\n\n  constructor(\n    stateService: StateService,\n    organizationService: OrganizationService,\n    folderService: FolderService,\n    cipherService: CipherService,\n    collectionService: CollectionService,\n    policyService: PolicyService\n  ) {\n    super(\n      stateService,\n      organizationService,\n      folderService,\n      cipherService,\n      collectionService,\n      policyService\n    );\n    this.vaultFilter.myVaultOnly = false;\n    this.vaultFilter.selectedOrganizationId = null;\n  }\n\n  getVaultFilter() {\n    return this.vaultFilter;\n  }\n\n  setVaultFilter(filter: string) {\n    if (filter === this.allVaults) {\n      this.vaultFilter.myVaultOnly = false;\n      this.vaultFilter.selectedOrganizationId = null;\n    } else if (filter === this.myVault) {\n      this.vaultFilter.myVaultOnly = true;\n      this.vaultFilter.selectedOrganizationId = null;\n    } else {\n      this.vaultFilter.myVaultOnly = false;\n      this.vaultFilter.selectedOrganizationId = filter;\n    }\n  }\n\n  clear() {\n    this.setVaultFilter(this.allVaults);\n  }\n\n  filterCipherForSelectedVault(cipher: CipherView) {\n    if (!this.vaultFilter.selectedOrganizationId && !this.vaultFilter.myVaultOnly) {\n      return false;\n    }\n    if (this.vaultFilter.selectedOrganizationId) {\n      if (cipher.organizationId === this.vaultFilter.selectedOrganizationId) {\n        return false;\n      }\n    } else if (this.vaultFilter.myVaultOnly) {\n      if (!cipher.organizationId) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n","import { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport AutofillField from \"../../models/autofill-field\";\nimport AutofillForm from \"../../models/autofill-form\";\nimport AutofillPageDetails from \"../../models/autofill-page-details\";\n\nexport interface PageDetail {\n  frameId: number;\n  tab: chrome.tabs.Tab;\n  details: AutofillPageDetails;\n}\n\nexport interface AutoFillOptions {\n  cipher: CipherView;\n  pageDetails: PageDetail[];\n  doc?: typeof window.document;\n  tab: chrome.tabs.Tab;\n  skipUsernameOnlyFill?: boolean;\n  onlyEmptyFields?: boolean;\n  onlyVisibleFields?: boolean;\n  fillNewPassword?: boolean;\n  skipLastUsed?: boolean;\n  allowUntrustedIframe?: boolean;\n}\n\nexport interface FormData {\n  form: AutofillForm;\n  password: AutofillField;\n  username: AutofillField;\n  passwords: AutofillField[];\n}\n\nexport abstract class AutofillService {\n  getFormsWithPasswordFields: (pageDetails: AutofillPageDetails) => FormData[];\n  doAutoFill: (options: AutoFillOptions) => Promise<string>;\n  doAutoFillOnTab: (\n    pageDetails: PageDetail[],\n    tab: chrome.tabs.Tab,\n    fromCommand: boolean\n  ) => Promise<string>;\n  doAutoFillActiveTab: (pageDetails: PageDetail[], fromCommand: boolean) => Promise<string>;\n}\n","import { Directive, ElementRef, HostListener, Input } from \"@angular/core\";\n\n@Directive({\n  selector: \"[appFallbackSrc]\",\n})\nexport class FallbackSrcDirective {\n  @Input(\"appFallbackSrc\") appFallbackSrc: string;\n\n  constructor(private el: ElementRef) {}\n\n  @HostListener(\"error\") onError() {\n    this.el.nativeElement.src = this.appFallbackSrc;\n  }\n}\n","<div class=\"icon\" aria-hidden=\"true\">\n  <img\n    [src]=\"image\"\n    appFallbackSrc=\"{{ fallbackImage }}\"\n    *ngIf=\"imageEnabled && image\"\n    alt=\"\"\n    decoding=\"async\"\n    loading=\"lazy\"\n  />\n  <i class=\"tw-text-muted bwi bwi-lg {{ icon }}\" *ngIf=\"!imageEnabled || !image\"></i>\n</div>\n","import { Component, Input, OnChanges } from \"@angular/core\";\n\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n/**\n * Provides a mapping from supported card brands to\n * the filenames of icon that should be present in images/cards folder of clients.\n */\nconst cardIcons: Record<string, string> = {\n  Visa: \"card-visa\",\n  Mastercard: \"card-mastercard\",\n  Amex: \"card-amex\",\n  Discover: \"card-discover\",\n  \"Diners Club\": \"card-diners-club\",\n  JCB: \"card-jcb\",\n  Maestro: \"card-maestro\",\n  UnionPay: \"card-union-pay\",\n  RuPay: \"card-ru-pay\",\n};\n\n@Component({\n  selector: \"app-vault-icon\",\n  templateUrl: \"icon.component.html\",\n})\nexport class IconComponent implements OnChanges {\n  @Input() cipher: CipherView;\n  icon: string;\n  image: string;\n  fallbackImage: string;\n  imageEnabled: boolean;\n\n  private iconsUrl: string;\n\n  constructor(environmentService: EnvironmentService, private stateService: StateService) {\n    this.iconsUrl = environmentService.getIconsUrl();\n  }\n\n  async ngOnChanges() {\n    // Components may be re-used when using cdk-virtual-scroll. Which puts the component in a weird state,\n    // to avoid this we reset all state variables.\n    this.image = null;\n    this.fallbackImage = null;\n    this.imageEnabled = !(await this.stateService.getDisableFavicon());\n    this.load();\n  }\n\n  protected load() {\n    switch (this.cipher.type) {\n      case CipherType.Login:\n        this.icon = \"bwi-globe\";\n        this.setLoginIcon();\n        break;\n      case CipherType.SecureNote:\n        this.icon = \"bwi-sticky-note\";\n        break;\n      case CipherType.Card:\n        this.icon = \"bwi-credit-card\";\n        this.setCardIcon();\n        break;\n      case CipherType.Identity:\n        this.icon = \"bwi-id-card\";\n        break;\n      default:\n        break;\n    }\n  }\n\n  private setLoginIcon() {\n    if (this.cipher.login.uri) {\n      let hostnameUri = this.cipher.login.uri;\n      let isWebsite = false;\n\n      if (hostnameUri.indexOf(\"androidapp://\") === 0) {\n        this.icon = \"bwi-android\";\n        this.image = null;\n      } else if (hostnameUri.indexOf(\"iosapp://\") === 0) {\n        this.icon = \"bwi-apple\";\n        this.image = null;\n      } else if (\n        this.imageEnabled &&\n        hostnameUri.indexOf(\"://\") === -1 &&\n        hostnameUri.indexOf(\".\") > -1\n      ) {\n        hostnameUri = \"http://\" + hostnameUri;\n        isWebsite = true;\n      } else if (this.imageEnabled) {\n        isWebsite = hostnameUri.indexOf(\"http\") === 0 && hostnameUri.indexOf(\".\") > -1;\n      }\n\n      if (this.imageEnabled && isWebsite) {\n        try {\n          this.image = this.iconsUrl + \"/\" + Utils.getHostname(hostnameUri) + \"/icon.png\";\n          this.fallbackImage = \"images/bwi-globe.png\";\n        } catch (e) {\n          // Ignore error since the fallback icon will be shown if image is null.\n        }\n      }\n    } else {\n      this.image = null;\n    }\n  }\n\n  private setCardIcon() {\n    const brand = this.cipher.card.brand;\n    if (this.imageEnabled && brand in cardIcons) {\n      this.icon = \"credit-card-icon \" + cardIcons[brand];\n    }\n  }\n}\n","export abstract class TotpService {\n  getCode: (key: string) => Promise<string>;\n  getTimeInterval: (key: string) => number;\n}\n","<button\n  type=\"button\"\n  class=\"row-btn\"\n  (click)=\"view()\"\n  appStopClick\n  appStopProp\n  appA11yTitle=\"{{ 'view' | i18n }}\"\n  *ngIf=\"showView\"\n>\n  <i class=\"bwi bwi-lg bwi-list-alt\" aria-hidden=\"true\"></i>\n</button>\n<ng-container *ngIf=\"cipher.type === cipherType.Login\">\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'launch' | i18n }}\"\n    (click)=\"launchCipher()\"\n    *ngIf=\"!showView\"\n    [ngClass]=\"{ disabled: !cipher.login.canLaunch }\"\n    [attr.disabled]=\"!cipher.login.canLaunch ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-share-square\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyUsername' | i18n }}\"\n    (click)=\"copy(cipher, cipher.login.username, 'username', 'Username')\"\n    [ngClass]=\"{ disabled: !cipher.login.username }\"\n    [attr.disabled]=\"!cipher.login.username ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-user\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n    (click)=\"copy(cipher, cipher.login.password, 'password', 'Password')\"\n    [ngClass]=\"{ disabled: !cipher.login.password || !cipher.viewPassword }\"\n    [attr.disabled]=\"!cipher.login.password ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-key\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyVerificationCode' | i18n }}\"\n    (click)=\"copy(cipher, cipher.login.totp, 'verificationCodeTotp', 'TOTP')\"\n    [ngClass]=\"{ disabled: !displayTotpCopyButton(cipher) }\"\n    [attr.disabled]=\"!displayTotpCopyButton(cipher) ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-clock\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n<ng-container *ngIf=\"cipher.type === cipherType.Card\">\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyNumber' | i18n }}\"\n    (click)=\"copy(cipher, cipher.card.number, 'number', 'Card Number')\"\n    [ngClass]=\"{ disabled: !cipher.card.number }\"\n    [attr.disabled]=\"!cipher.card.number ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-hashtag\" aria-hidden=\"true\"></i>\n  </button>\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copySecurityCode' | i18n }}\"\n    (click)=\"copy(cipher, cipher.card.code, 'securityCode', 'Security Code')\"\n    [ngClass]=\"{ disabled: !cipher.card.code }\"\n    [attr.disabled]=\"!cipher.card.code ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-key\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n<ng-container *ngIf=\"cipher.type === cipherType.SecureNote\">\n  <button\n    type=\"button\"\n    class=\"row-btn\"\n    appStopClick\n    appStopProp\n    appA11yTitle=\"{{ 'copyNote' | i18n }}\"\n    (click)=\"copy(cipher, cipher.notes, 'note', 'Note')\"\n    [ngClass]=\"{ disabled: !cipher.notes }\"\n    [attr.disabled]=\"!cipher.notes ? '' : null\"\n  >\n    <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n  </button>\n</ng-container>\n","import { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { EventType } from \"@bitwarden/common/enums\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Component({\n  selector: \"app-action-buttons\",\n  templateUrl: \"action-buttons.component.html\",\n})\nexport class ActionButtonsComponent {\n  @Output() onView = new EventEmitter<CipherView>();\n  @Output() launchEvent = new EventEmitter<CipherView>();\n  @Input() cipher: CipherView;\n  @Input() showView = false;\n\n  cipherType = CipherType;\n  userHasPremiumAccess = false;\n\n  constructor(\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService,\n    private eventCollectionService: EventCollectionService,\n    private totpService: TotpService,\n    private stateService: StateService,\n    private passwordRepromptService: PasswordRepromptService\n  ) {}\n\n  async ngOnInit() {\n    this.userHasPremiumAccess = await this.stateService.getCanAccessPremium();\n  }\n\n  launchCipher() {\n    this.launchEvent.emit(this.cipher);\n  }\n\n  async copy(cipher: CipherView, value: string, typeI18nKey: string, aType: string) {\n    if (\n      this.cipher.reprompt !== CipherRepromptType.None &&\n      this.passwordRepromptService.protectedFields().includes(aType) &&\n      !(await this.passwordRepromptService.showPasswordPrompt())\n    ) {\n      return;\n    }\n\n    if (value == null || (aType === \"TOTP\" && !this.displayTotpCopyButton(cipher))) {\n      return;\n    } else if (aType === \"TOTP\") {\n      value = await this.totpService.getCode(value);\n    }\n\n    if (!cipher.viewPassword) {\n      return;\n    }\n\n    this.platformUtilsService.copyToClipboard(value, { window: window });\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(typeI18nKey))\n    );\n\n    if (typeI18nKey === \"password\" || typeI18nKey === \"verificationCodeTotp\") {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledHiddenFieldVisible,\n        cipher.id\n      );\n    } else if (typeI18nKey === \"securityCode\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedCardCode, cipher.id);\n    }\n  }\n\n  displayTotpCopyButton(cipher: CipherView) {\n    return (\n      (cipher?.login?.hasTotp ?? false) && (cipher.organizationUseTotp || this.userHasPremiumAccess)\n    );\n  }\n\n  view() {\n    this.onView.emit(this.cipher);\n  }\n}\n","<div\n  role=\"group\"\n  appA11yTitle=\"{{ cipher.name }}\"\n  class=\"virtual-scroll-item\"\n  [ngClass]=\"{ 'override-last': !last }\"\n>\n  <div class=\"box-content-row box-content-row-flex\">\n    <button\n      type=\"button\"\n      (click)=\"selectCipher(cipher)\"\n      (dblclick)=\"launchCipher(cipher)\"\n      appStopClick\n      title=\"{{ title }} - {{ cipher.name }}\"\n      class=\"row-main\"\n    >\n      <app-vault-icon [cipher]=\"cipher\"></app-vault-icon>\n      <div class=\"row-main-content\">\n        <span class=\"text\">\n          <span class=\"truncate-box\">\n            <span class=\"truncate\">{{ cipher.name }}</span>\n            <ng-container *ngIf=\"cipher.organizationId\">\n              <i\n                class=\"bwi bwi-collection text-muted\"\n                title=\"{{ 'shared' | i18n }}\"\n                aria-hidden=\"true\"\n              ></i>\n              <span class=\"sr-only\">{{ \"shared\" | i18n }}</span>\n            </ng-container>\n            <ng-container *ngIf=\"cipher.hasAttachments\">\n              <i\n                class=\"bwi bwi-paperclip text-muted\"\n                title=\"{{ 'attachments' | i18n }}\"\n                aria-hidden=\"true\"\n              ></i>\n              <span class=\"sr-only\">{{ \"attachments\" | i18n }}</span>\n            </ng-container>\n          </span>\n        </span>\n        <span class=\"detail\">{{ cipher.subTitle }}</span>\n      </div>\n    </button>\n    <app-action-buttons\n      [cipher]=\"cipher\"\n      [showView]=\"showView\"\n      (onView)=\"viewCipher(cipher)\"\n      (launchEvent)=\"launchCipher(cipher)\"\n      class=\"action-buttons\"\n    >\n    </app-action-buttons>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Component({\n  selector: \"app-cipher-row\",\n  templateUrl: \"cipher-row.component.html\",\n})\nexport class CipherRowComponent {\n  @Output() onSelected = new EventEmitter<CipherView>();\n  @Output() launchEvent = new EventEmitter<CipherView>();\n  @Output() onView = new EventEmitter<CipherView>();\n  @Input() cipher: CipherView;\n  @Input() last: boolean;\n  @Input() showView = false;\n  @Input() title: string;\n\n  selectCipher(c: CipherView) {\n    this.onSelected.emit(c);\n  }\n\n  launchCipher(c: CipherView) {\n    this.launchEvent.emit(c);\n  }\n\n  viewCipher(c: CipherView) {\n    this.onView.emit(c);\n  }\n}\n","<!-- Please remove this disable statement when editing this file! -->\n<!-- eslint-disable @angular-eslint/template/button-has-type -->\n<ng-container *ngIf=\"loaded && organizations$ | async as organizations\">\n  <div class=\"content org-filter-content\" *ngIf=\"loaded && shouldShow(organizations)\">\n    <ng-container *ngIf=\"selectedVault$ | async as vaultFilterDisplay\">\n      <button\n        #toggleVaults\n        class=\"org-filter\"\n        (click)=\"openOverlay()\"\n        aria-haspopup=\"menu\"\n        aria-controls=\"cdk-overlay-container\"\n        [attr.aria-expanded]=\"isOpen\"\n        [attr.aria-label]=\"vaultFilterDisplay\"\n      >\n        <span class=\"org-filter-text-container\">\n          <span class=\"org-filter-text-name\">{{ vaultFilterDisplay }}</span\n          >&nbsp;\n          <span\n            ><i\n              class=\"bwi bwi-sm\"\n              aria-hidden=\"true\"\n              [ngClass]=\"{ 'bwi-angle-down': !isOpen, 'bwi-angle-up': isOpen }\"\n            ></i></span\n        ></span>\n      </button>\n    </ng-container>\n    <ng-template class=\"vault-select-container\" #vaultSelectorTemplate>\n      <div\n        class=\"vault-select\"\n        [@transformPanel]=\"'open'\"\n        cdkTrapFocus\n        cdkTrapFocusAutoCapture\n        role=\"dialog\"\n        aria-modal=\"true\"\n      >\n        <button appStopClick (click)=\"selectAllVaults()\">\n          <div class=\"vault-select-org-text-container\">\n            <i class=\"bwi bwi-fw bwi-filter vault-select-prefix-icon\" aria-hidden=\"true\"></i>\n            <span class=\"vault-select-org-name\">{{ \"allVaults\" | i18n }}</span>\n          </div>\n        </button>\n        <button *ngIf=\"!enforcePersonalOwnership\" appStopClick (click)=\"selectMyVault()\">\n          <div class=\"vault-select-org-text-container\">\n            <i class=\"bwi bwi-fw bwi-user vault-select-prefix-icon\" aria-hidden=\"true\"></i>\n            <span class=\"vault-select-org-name\">{{ \"myVault\" | i18n }}</span>\n          </div>\n        </button>\n        <button\n          *ngFor=\"let organization of organizations\"\n          appStopClick\n          (click)=\"selectOrganization(organization)\"\n        >\n          <div class=\"vault-select-org-text-container\">\n            <i\n              *ngIf=\"organization.planProductType !== 1\"\n              class=\"bwi bwi-fw bwi-business vault-select-prefix-icon\"\n              aria-hidden=\"true\"\n            ></i>\n            <i\n              *ngIf=\"organization.planProductType === 1\"\n              class=\"bwi bwi-fw bwi-family vault-select-prefix-icon\"\n              aria-hidden=\"true\"\n            ></i>\n\n            <span class=\"vault-select-org-name\">{{ organization.name }}</span\n            ><i\n              *ngIf=\"!organization.enabled\"\n              class=\"bwi bwi-fw bwi-exclamation-triangle text-danger vault-select-suffix-icon\"\n              attr.aria-label=\"{{ 'organizationIsDisabled' | i18n }}\"\n              appA11yTitle=\"{{ 'organizationIsDisabled' | i18n }}\"\n            ></i>\n          </div>\n        </button>\n      </div>\n    </ng-template>\n  </div>\n</ng-container>\n","import { animate, state, style, transition, trigger } from \"@angular/animations\";\nimport { ConnectedPosition, Overlay, OverlayRef } from \"@angular/cdk/overlay\";\nimport { TemplatePortal } from \"@angular/cdk/portal\";\nimport {\n  Component,\n  ElementRef,\n  EventEmitter,\n  OnInit,\n  Output,\n  TemplateRef,\n  ViewChild,\n  ViewContainerRef,\n  HostListener,\n  OnDestroy,\n} from \"@angular/core\";\nimport { BehaviorSubject, concatMap, map, merge, Observable, Subject, takeUntil } from \"rxjs\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\n@Component({\n  selector: \"app-vault-select\",\n  templateUrl: \"vault-select.component.html\",\n  animations: [\n    trigger(\"transformPanel\", [\n      state(\n        \"void\",\n        style({\n          opacity: 0,\n        })\n      ),\n      transition(\n        \"void => open\",\n        animate(\n          \"100ms linear\",\n          style({\n            opacity: 1,\n          })\n        )\n      ),\n      transition(\"* => void\", animate(\"100ms linear\", style({ opacity: 0 }))),\n    ]),\n  ],\n})\nexport class VaultSelectComponent implements OnInit, OnDestroy {\n  @Output() onVaultSelectionChanged = new EventEmitter();\n\n  @ViewChild(\"toggleVaults\", { read: ElementRef })\n  buttonRef: ElementRef<HTMLButtonElement>;\n  @ViewChild(\"vaultSelectorTemplate\", { read: TemplateRef }) templateRef: TemplateRef<HTMLElement>;\n\n  private _selectedVault = new BehaviorSubject<string | null>(null);\n\n  isOpen = false;\n  loaded = false;\n  organizations$: Observable<Organization[]>;\n  selectedVault$: Observable<string | null> = this._selectedVault.asObservable();\n\n  enforcePersonalOwnership = false;\n  overlayPostition: ConnectedPosition[] = [\n    {\n      originX: \"start\",\n      originY: \"bottom\",\n      overlayX: \"start\",\n      overlayY: \"top\",\n    },\n  ];\n\n  private overlayRef: OverlayRef;\n  private _destroy = new Subject<void>();\n\n  shouldShow(organizations: Organization[]): boolean {\n    return (\n      (organizations.length > 0 && !this.enforcePersonalOwnership) ||\n      (organizations.length > 1 && this.enforcePersonalOwnership)\n    );\n  }\n\n  constructor(\n    private vaultFilterService: VaultFilterService,\n    private i18nService: I18nService,\n    private overlay: Overlay,\n    private viewContainerRef: ViewContainerRef,\n    private platformUtilsService: PlatformUtilsService,\n    private organizationService: OrganizationService\n  ) {}\n\n  @HostListener(\"document:keydown.escape\", [\"$event\"])\n  handleKeyboardEvent(event: KeyboardEvent) {\n    if (this.isOpen) {\n      event.preventDefault();\n      this.close();\n    }\n  }\n\n  async ngOnInit() {\n    this.organizations$ = this.organizationService.memberOrganizations$\n      .pipe(takeUntil(this._destroy))\n      .pipe(map((orgs) => orgs.sort(Utils.getSortFunction(this.i18nService, \"name\"))));\n\n    this.organizations$\n      .pipe(\n        concatMap(async (organizations) => {\n          this.enforcePersonalOwnership =\n            await this.vaultFilterService.checkForPersonalOwnershipPolicy();\n\n          if (this.shouldShow(organizations)) {\n            if (this.enforcePersonalOwnership && !this.vaultFilterService.vaultFilter.myVaultOnly) {\n              const firstOrganization = organizations[0];\n              this._selectedVault.next(firstOrganization.name);\n              this.vaultFilterService.setVaultFilter(firstOrganization.id);\n            } else if (this.vaultFilterService.vaultFilter.myVaultOnly) {\n              this._selectedVault.next(this.i18nService.t(this.vaultFilterService.myVault));\n            } else if (this.vaultFilterService.vaultFilter.selectedOrganizationId != null) {\n              const selectedOrganization = organizations.find(\n                (o) => o.id === this.vaultFilterService.vaultFilter.selectedOrganizationId\n              );\n              this._selectedVault.next(selectedOrganization.name);\n            } else {\n              this._selectedVault.next(this.i18nService.t(this.vaultFilterService.allVaults));\n            }\n          }\n        })\n      )\n      .pipe(takeUntil(this._destroy))\n      .subscribe();\n\n    this.loaded = true;\n  }\n\n  ngOnDestroy(): void {\n    this._destroy.next();\n    this._destroy.complete();\n    this._selectedVault.complete();\n  }\n\n  openOverlay() {\n    const viewPortHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    const positionStrategyBuilder = this.overlay.position();\n\n    const positionStrategy = positionStrategyBuilder\n      .flexibleConnectedTo(this.buttonRef.nativeElement)\n      .withFlexibleDimensions(true)\n      .withPush(true)\n      .withViewportMargin(10)\n      .withGrowAfterOpen(true)\n      .withPositions(this.overlayPostition);\n\n    this.overlayRef = this.overlay.create({\n      hasBackdrop: true,\n      positionStrategy,\n      maxHeight: viewPortHeight - 160,\n      backdropClass: \"cdk-overlay-transparent-backdrop\",\n      scrollStrategy: this.overlay.scrollStrategies.close(),\n    });\n\n    const templatePortal = new TemplatePortal(this.templateRef, this.viewContainerRef);\n    this.overlayRef.attach(templatePortal);\n    this.isOpen = true;\n\n    // Handle closing\n    merge(\n      this.overlayRef.outsidePointerEvents(),\n      this.overlayRef.backdropClick(),\n      this.overlayRef.detachments()\n      // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    ).subscribe(() => {\n      this.close();\n    });\n  }\n\n  close() {\n    if (this.overlayRef) {\n      this.overlayRef.dispose();\n      this.overlayRef = undefined;\n    }\n    this.isOpen = false;\n  }\n\n  selectOrganization(organization: Organization) {\n    if (!organization.enabled) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"disabledOrganizationFilterError\")\n      );\n    } else {\n      this._selectedVault.next(organization.name);\n      this.vaultFilterService.setVaultFilter(organization.id);\n      this.onVaultSelectionChanged.emit();\n      this.close();\n    }\n  }\n  selectAllVaults() {\n    this._selectedVault.next(this.i18nService.t(this.vaultFilterService.allVaults));\n    this.vaultFilterService.setVaultFilter(this.vaultFilterService.allVaults);\n    this.onVaultSelectionChanged.emit();\n    this.close();\n  }\n  selectMyVault() {\n    this._selectedVault.next(this.i18nService.t(this.vaultFilterService.myVault));\n    this.vaultFilterService.setVaultFilter(this.vaultFilterService.myVault);\n    this.onVaultSelectionChanged.emit();\n    this.close();\n  }\n}\n","<header>\n  <h1 class=\"sr-only\">{{ \"currentTab\" | i18n }}</h1>\n  <div class=\"left\">\n    <app-pop-out *ngIf=\"!inSidebar\"></app-pop-out>\n    <button\n      type=\"button\"\n      (click)=\"refresh()\"\n      appA11yTitle=\"{{ 'refresh' | i18n }}\"\n      *ngIf=\"inSidebar\"\n    >\n      <i class=\"bwi bwi-refresh-tab bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n  <div class=\"search\">\n    <input\n      type=\"{{ searchTypeSearch ? 'search' : 'text' }}\"\n      placeholder=\"{{ 'searchVault' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search$.next()\"\n      autocomplete=\"off\"\n      (keydown)=\"closeOnEsc($event)\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\" aria-hidden=\"true\"></i>\n  </div>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addCipher()\" appA11yTitle=\"{{ 'addItem' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"no-items\" *ngIf=\"!loaded\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" aria-hidden=\"true\"></i>\n  </div>\n  <ng-container *ngIf=\"loaded\">\n    <app-vault-select (onVaultSelectionChanged)=\"load()\"></app-vault-select>\n    <app-callout *ngIf=\"showHowToAutofill\" type=\"info\" title=\"{{ 'howToAutofill' | i18n }}\">\n      <p>{{ autofillCalloutText }}</p>\n      <button\n        type=\"button\"\n        class=\"btn primary callout-half\"\n        appStopClick\n        (click)=\"dismissCallout()\"\n      >\n        {{ \"gotIt\" | i18n }}\n      </button>\n      <button type=\"button\" class=\"btn callout-half\" appStopClick (click)=\"goToSettings()\">\n        {{ \"autofillSettings\" | i18n }}\n      </button>\n    </app-callout>\n    <div class=\"box list\" *ngIf=\"loginCiphers\">\n      <h2 class=\"box-header\">\n        {{ \"typeLogins\" | i18n }}\n        <span class=\"flex-right\">{{ loginCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content no-hover\">\n        <app-cipher-row\n          *ngFor=\"let loginCipher of loginCiphers\"\n          [cipher]=\"loginCipher\"\n          title=\"{{ 'autoFill' | i18n }}\"\n          [showView]=\"true\"\n          (onSelected)=\"fillCipher($event)\"\n          (onView)=\"viewCipher($event)\"\n        >\n        </app-cipher-row>\n        <div class=\"box-content-row padded no-hover\" *ngIf=\"!loginCiphers.length\">\n          <p class=\"text-center\">{{ \"autoFillInfo\" | i18n }}</p>\n          <button type=\"button\" class=\"btn primary link block\" (click)=\"addCipher()\">\n            {{ \"addLogin\" | i18n }}\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"cardCiphers && cardCiphers.length\">\n      <h2 class=\"box-header\">\n        {{ \"cards\" | i18n }}\n        <span class=\"flex-right\">{{ cardCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let cardCipher of cardCiphers\"\n          [cipher]=\"cardCipher\"\n          title=\"{{ 'autoFill' | i18n }}\"\n          [showView]=\"true\"\n          (onSelected)=\"fillCipher($event)\"\n          (onView)=\"viewCipher($event)\"\n        ></app-cipher-row>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"identityCiphers && identityCiphers.length\">\n      <h2 class=\"box-header\">\n        {{ \"identities\" | i18n }}\n        <span class=\"flex-right\">{{ identityCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let identityCipher of identityCiphers\"\n          [cipher]=\"identityCipher\"\n          title=\"{{ 'autoFill' | i18n }}\"\n          [showView]=\"true\"\n          (onSelected)=\"fillCipher($event)\"\n          (onView)=\"viewCipher($event)\"\n        ></app-cipher-row>\n      </div>\n    </div>\n  </ng-container>\n</main>\n","import { ChangeDetectorRef, Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { Subject } from \"rxjs\";\nimport { debounceTime, takeUntil } from \"rxjs/operators\";\n\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport { AutofillService } from \"../../../../autofill/services/abstractions/autofill.service\";\nimport { BrowserApi } from \"../../../../browser/browserApi\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\nconst BroadcasterSubscriptionId = \"CurrentTabComponent\";\n\n@Component({\n  selector: \"app-current-tab\",\n  templateUrl: \"current-tab.component.html\",\n})\nexport class CurrentTabComponent implements OnInit, OnDestroy {\n  pageDetails: any[] = [];\n  tab: chrome.tabs.Tab;\n  cardCiphers: CipherView[];\n  identityCiphers: CipherView[];\n  loginCiphers: CipherView[];\n  url: string;\n  hostname: string;\n  searchText: string;\n  inSidebar = false;\n  searchTypeSearch = false;\n  loaded = false;\n  isLoading = false;\n  showOrganizations = false;\n  showHowToAutofill = false;\n  autofillCalloutText: string;\n  protected search$ = new Subject<void>();\n  private destroy$ = new Subject<void>();\n\n  private totpCode: string;\n  private totpTimeout: number;\n  private loadedTimeout: number;\n  private searchTimeout: number;\n\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private cipherService: CipherService,\n    private popupUtilsService: PopupUtilsService,\n    private autofillService: AutofillService,\n    private i18nService: I18nService,\n    private router: Router,\n    private ngZone: NgZone,\n    private broadcasterService: BroadcasterService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private syncService: SyncService,\n    private searchService: SearchService,\n    private stateService: StateService,\n    private passwordRepromptService: PasswordRepromptService,\n    private organizationService: OrganizationService,\n    private vaultFilterService: VaultFilterService\n  ) {}\n\n  async ngOnInit() {\n    this.searchTypeSearch = !this.platformUtilsService.isSafari();\n    this.inSidebar = this.popupUtilsService.inSidebar(window);\n\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (this.isLoading) {\n              window.setTimeout(() => {\n                this.load();\n              }, 500);\n            }\n            break;\n          case \"collectPageDetailsResponse\":\n            if (message.sender === BroadcasterSubscriptionId) {\n              this.pageDetails.push({\n                frameId: message.webExtSender.frameId,\n                tab: message.tab,\n                details: message.details,\n              });\n            }\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n\n    if (!this.syncService.syncInProgress) {\n      await this.load();\n      await this.setCallout();\n    } else {\n      this.loadedTimeout = window.setTimeout(async () => {\n        if (!this.isLoading) {\n          await this.load();\n          await this.setCallout();\n        }\n      }, 5000);\n    }\n\n    this.search$\n      .pipe(debounceTime(500), takeUntil(this.destroy$))\n      .subscribe(() => this.searchVault());\n\n    // activate autofill on page load if policy is set\n    if (await this.stateService.getActivateAutoFillOnPageLoadFromPolicy()) {\n      await this.stateService.setEnableAutoFillOnPageLoad(true);\n      await this.stateService.setActivateAutoFillOnPageLoadFromPolicy(false);\n      this.platformUtilsService.showToast(\n        \"info\",\n        null,\n        this.i18nService.t(\"autofillPageLoadPolicyActivated\")\n      );\n    }\n  }\n\n  ngOnDestroy() {\n    window.clearTimeout(this.loadedTimeout);\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async refresh() {\n    await this.load();\n  }\n\n  addCipher() {\n    this.router.navigate([\"/add-cipher\"], {\n      queryParams: {\n        name: this.hostname,\n        uri: this.url,\n        selectedVault: this.vaultFilterService.getVaultFilter().selectedOrganizationId,\n      },\n    });\n  }\n\n  viewCipher(cipher: CipherView) {\n    this.router.navigate([\"/view-cipher\"], { queryParams: { cipherId: cipher.id } });\n  }\n\n  async fillCipher(cipher: CipherView, closePopupDelay?: number) {\n    if (\n      cipher.reprompt !== CipherRepromptType.None &&\n      !(await this.passwordRepromptService.showPasswordPrompt())\n    ) {\n      return;\n    }\n\n    this.totpCode = null;\n    if (this.totpTimeout != null) {\n      window.clearTimeout(this.totpTimeout);\n    }\n\n    if (this.pageDetails == null || this.pageDetails.length === 0) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n      return;\n    }\n\n    try {\n      this.totpCode = await this.autofillService.doAutoFill({\n        tab: this.tab,\n        cipher: cipher,\n        pageDetails: this.pageDetails,\n        doc: window.document,\n        fillNewPassword: true,\n      });\n      if (this.totpCode != null) {\n        this.platformUtilsService.copyToClipboard(this.totpCode, { window: window });\n      }\n      if (this.popupUtilsService.inPopup(window)) {\n        if (!closePopupDelay) {\n          if (this.platformUtilsService.isFirefox() || this.platformUtilsService.isSafari()) {\n            BrowserApi.closePopup(window);\n          } else {\n            // Slight delay to fix bug in Chromium browsers where popup closes without copying totp to clipboard\n            setTimeout(() => BrowserApi.closePopup(window), 50);\n          }\n        } else {\n          setTimeout(() => BrowserApi.closePopup(window), closePopupDelay);\n        }\n      }\n    } catch {\n      this.ngZone.run(() => {\n        this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n        this.changeDetectorRef.detectChanges();\n      });\n    }\n  }\n\n  searchVault() {\n    if (!this.searchService.isSearchable(this.searchText)) {\n      return;\n    }\n\n    this.router.navigate([\"/tabs/vault\"], { queryParams: { searchText: this.searchText } });\n  }\n\n  closeOnEsc(e: KeyboardEvent) {\n    // If input not empty, use browser default behavior of clearing input instead\n    if (e.key === \"Escape\" && (this.searchText == null || this.searchText === \"\")) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  protected async load() {\n    this.isLoading = false;\n    this.tab = await BrowserApi.getTabFromCurrentWindow();\n    if (this.tab != null) {\n      this.url = this.tab.url;\n    } else {\n      this.loginCiphers = [];\n      this.isLoading = this.loaded = true;\n      return;\n    }\n\n    this.hostname = Utils.getHostname(this.url);\n    this.pageDetails = [];\n    BrowserApi.tabSendMessage(this.tab, {\n      command: \"collectPageDetails\",\n      tab: this.tab,\n      sender: BroadcasterSubscriptionId,\n    });\n\n    const otherTypes: CipherType[] = [];\n    const dontShowCards = await this.stateService.getDontShowCardsCurrentTab();\n    const dontShowIdentities = await this.stateService.getDontShowIdentitiesCurrentTab();\n    this.showOrganizations = this.organizationService.hasOrganizations();\n    if (!dontShowCards) {\n      otherTypes.push(CipherType.Card);\n    }\n    if (!dontShowIdentities) {\n      otherTypes.push(CipherType.Identity);\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(\n      this.url,\n      otherTypes.length > 0 ? otherTypes : null\n    );\n\n    this.loginCiphers = [];\n    this.cardCiphers = [];\n    this.identityCiphers = [];\n\n    ciphers.forEach((c) => {\n      if (!this.vaultFilterService.filterCipherForSelectedVault(c)) {\n        switch (c.type) {\n          case CipherType.Login:\n            this.loginCiphers.push(c);\n            break;\n          case CipherType.Card:\n            this.cardCiphers.push(c);\n            break;\n          case CipherType.Identity:\n            this.identityCiphers.push(c);\n            break;\n          default:\n            break;\n        }\n      }\n    });\n\n    this.loginCiphers = this.loginCiphers.sort((a, b) =>\n      this.cipherService.sortCiphersByLastUsedThenName(a, b)\n    );\n    this.isLoading = this.loaded = true;\n  }\n\n  async goToSettings() {\n    this.router.navigate([\"autofill\"]);\n  }\n\n  async dismissCallout() {\n    await this.stateService.setDismissedAutofillCallout(true);\n    this.showHowToAutofill = false;\n  }\n\n  private async setCallout() {\n    this.showHowToAutofill =\n      this.loginCiphers.length > 0 &&\n      !(await this.stateService.getEnableAutoFillOnPageLoad()) &&\n      !(await this.stateService.getDismissedAutofillCallout());\n\n    if (this.showHowToAutofill) {\n      const autofillCommand = await this.platformUtilsService.getAutofillKeyboardShortcut();\n      await this.setAutofillCalloutText(autofillCommand);\n    }\n  }\n\n  private setAutofillCalloutText(command: string) {\n    if (command) {\n      this.autofillCalloutText = this.i18nService.t(\"autofillSelectInfoWithCommand\", command);\n    } else {\n      this.autofillCalloutText = this.i18nService.t(\"autofillSelectInfoWithoutCommand\");\n    }\n  }\n}\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { PasswordHistoryView } from \"@bitwarden/common/vault/models/view/password-history.view\";\n\n@Directive()\nexport class PasswordHistoryComponent implements OnInit {\n  cipherId: string;\n  history: PasswordHistoryView[] = [];\n\n  constructor(\n    protected cipherService: CipherService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    private win: Window\n  ) {}\n\n  async ngOnInit() {\n    await this.init();\n  }\n\n  copy(password: string) {\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(password, copyOptions);\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"password\"))\n    );\n  }\n\n  protected async init() {\n    const cipher = await this.cipherService.get(this.cipherId);\n    const decCipher = await cipher.decrypt();\n    this.history = decCipher.passwordHistory == null ? [] : decCipher.passwordHistory;\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"close()\">{{ \"close\" | i18n }}</button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"passwordHistory\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list full-list\" *ngIf=\"history && history.length\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let h of history\">\n        <div class=\"row-main\">\n          <div class=\"row-main-content\">\n            <span\n              class=\"text monospaced no-ellipsis\"\n              [innerHTML]=\"h.password | colorPassword\"\n            ></span>\n            <span class=\"detail\">{{ h.lastUsedDate | date : \"medium\" }}</span>\n          </div>\n        </div>\n        <div class=\"action-buttons\">\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n            (click)=\"copy(h.password)\"\n          >\n            <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"no-items\" *ngIf=\"!history || !history.length\">\n    <p>{{ \"noPasswordsInList\" | i18n }}</p>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { PasswordHistoryComponent as BasePasswordHistoryComponent } from \"@bitwarden/angular/vault/components/password-history.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\n@Component({\n  selector: \"app-password-history\",\n  templateUrl: \"password-history.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class PasswordHistoryComponent extends BasePasswordHistoryComponent {\n  constructor(\n    cipherService: CipherService,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    private location: Location,\n    private route: ActivatedRoute\n  ) {\n    super(cipherService, platformUtilsService, i18nService, window);\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.cipherId) {\n        this.cipherId = params.cipherId;\n      } else {\n        this.close();\n      }\n      await this.init();\n    });\n  }\n\n  close() {\n    this.location.back();\n  }\n}\n","type CheckableBase = {\n  checked?: boolean;\n};\n\nexport type Checkable<T> = T & CheckableBase;\n\nexport function isChecked(item: CheckableBase): boolean {\n  return !!item.checked;\n}\n","import { Directive, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { firstValueFrom, map, Observable, Subject, takeUntil } from \"rxjs\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationUserStatusType } from \"@bitwarden/common/admin-console/enums\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { CollectionView } from \"@bitwarden/common/admin-console/models/view/collection.view\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { Checkable, isChecked } from \"@bitwarden/common/types/checkable\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Directive()\nexport class ShareComponent implements OnInit, OnDestroy {\n  @Input() cipherId: string;\n  @Input() organizationId: string;\n  @Output() onSharedCipher = new EventEmitter();\n\n  formPromise: Promise<void>;\n  cipher: CipherView;\n  collections: Checkable<CollectionView>[] = [];\n  organizations$: Observable<Organization[]>;\n\n  protected writeableCollections: Checkable<CollectionView>[] = [];\n\n  private _destroy = new Subject<void>();\n\n  constructor(\n    protected collectionService: CollectionService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected i18nService: I18nService,\n    protected cipherService: CipherService,\n    private logService: LogService,\n    protected organizationService: OrganizationService\n  ) {}\n\n  async ngOnInit() {\n    await this.load();\n  }\n\n  ngOnDestroy(): void {\n    this._destroy.next();\n    this._destroy.complete();\n  }\n\n  async load() {\n    const allCollections = await this.collectionService.getAllDecrypted();\n    this.writeableCollections = allCollections.map((c) => c).filter((c) => !c.readOnly);\n\n    this.organizations$ = this.organizationService.memberOrganizations$.pipe(\n      map((orgs) => {\n        return orgs\n          .filter((o) => o.enabled && o.status === OrganizationUserStatusType.Confirmed)\n          .sort(Utils.getSortFunction(this.i18nService, \"name\"));\n      })\n    );\n\n    this.organizations$.pipe(takeUntil(this._destroy)).subscribe((orgs) => {\n      if (this.organizationId == null && orgs.length > 0) {\n        this.organizationId = orgs[0].id;\n      }\n    });\n\n    const cipherDomain = await this.cipherService.get(this.cipherId);\n    this.cipher = await cipherDomain.decrypt();\n\n    this.filterCollections();\n  }\n\n  filterCollections() {\n    this.writeableCollections.forEach((c) => (c.checked = false));\n    if (this.organizationId == null || this.writeableCollections.length === 0) {\n      this.collections = [];\n    } else {\n      this.collections = this.writeableCollections.filter(\n        (c) => c.organizationId === this.organizationId\n      );\n    }\n  }\n\n  async submit(): Promise<boolean> {\n    const selectedCollectionIds = this.collections.filter(isChecked).map((c) => c.id);\n    if (selectedCollectionIds.length === 0) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"selectOneCollection\")\n      );\n      return;\n    }\n\n    const cipherDomain = await this.cipherService.get(this.cipherId);\n    const cipherView = await cipherDomain.decrypt();\n    const orgs = await firstValueFrom(this.organizations$);\n    const orgName =\n      orgs.find((o) => o.id === this.organizationId)?.name ?? this.i18nService.t(\"organization\");\n\n    try {\n      this.formPromise = this.cipherService\n        .shareWithServer(cipherView, this.organizationId, selectedCollectionIds)\n        .then(async () => {\n          this.onSharedCipher.emit();\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"movedItemToOrg\", cipherView.name, orgName)\n          );\n        });\n      await this.formPromise;\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n    return false;\n  }\n\n  get canSave() {\n    if (this.collections != null) {\n      for (let i = 0; i < this.collections.length; i++) {\n        if (this.collections[i].checked) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <ng-container *ngIf=\"organizations$ | async as organizations\">\n    <header>\n      <div class=\"left\">\n        <button type=\"button\" (click)=\"cancel()\">{{ \"cancel\" | i18n }}</button>\n      </div>\n      <h1 class=\"center\">\n        <span class=\"title\">{{ \"moveToOrganization\" | i18n }}</span>\n      </h1>\n      <div class=\"right\">\n        <button\n          type=\"submit\"\n          [disabled]=\"form.loading || !canSave\"\n          *ngIf=\"organizations && organizations.length\"\n        >\n          <span [hidden]=\"form.loading\">{{ \"move\" | i18n }}</span>\n          <i\n            class=\"bwi bwi-spinner bwi-lg bwi-spin\"\n            [hidden]=\"!form.loading\"\n            aria-hidden=\"true\"\n          ></i>\n        </button>\n      </div>\n    </header>\n    <main tabindex=\"-1\">\n      <div class=\"box\">\n        <div class=\"box-content\" *ngIf=\"!organizations || !organizations.length\">\n          <div class=\"box-content-row padded no-hover\">\n            {{ \"noOrganizationsList\" | i18n }}\n          </div>\n        </div>\n        <div class=\"box-content\" *ngIf=\"organizations && organizations.length\">\n          <div class=\"box-content-row\" appBoxRow>\n            <label for=\"organization\">{{ \"organization\" | i18n }}</label>\n            <select\n              id=\"organization\"\n              name=\"OrganizationId\"\n              aria-describedby=\"organizationHelp\"\n              [(ngModel)]=\"organizationId\"\n              (change)=\"filterCollections()\"\n            >\n              <option *ngFor=\"let o of organizations\" [ngValue]=\"o.id\">{{ o.name }}</option>\n            </select>\n          </div>\n        </div>\n        <div id=\"organizationHelp\" class=\"box-footer\">\n          {{ \"moveToOrgDesc\" | i18n }}\n        </div>\n      </div>\n      <div class=\"box\" *ngIf=\"organizations && organizations.length\">\n        <h2 class=\"box-header\">\n          {{ \"collections\" | i18n }}\n        </h2>\n        <div class=\"box-content\" *ngIf=\"!collections || !collections.length\">\n          <div class=\"box-content-row padded no-hover\">\n            {{ \"noCollectionsInList\" | i18n }}\n          </div>\n        </div>\n        <div class=\"box-content\" *ngIf=\"collections && collections.length\">\n          <div\n            class=\"box-content-row box-content-row-checkbox\"\n            *ngFor=\"let c of collections; let i = index\"\n            appBoxRow\n          >\n            <label for=\"collection_{{ i }}\">{{ c.name }}</label>\n            <input\n              id=\"collection_{{ i }}\"\n              type=\"checkbox\"\n              [(ngModel)]=\"c.checked\"\n              name=\"Collection[{{ i }}].Checked\"\n            />\n          </div>\n        </div>\n      </div>\n    </main>\n  </ng-container>\n</form>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { ShareComponent as BaseShareComponent } from \"@bitwarden/angular/components/share.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\n@Component({\n  selector: \"app-vault-share\",\n  templateUrl: \"share.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class ShareComponent extends BaseShareComponent {\n  constructor(\n    collectionService: CollectionService,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    logService: LogService,\n    cipherService: CipherService,\n    private route: ActivatedRoute,\n    private router: Router,\n    organizationService: OrganizationService\n  ) {\n    super(\n      collectionService,\n      platformUtilsService,\n      i18nService,\n      cipherService,\n      logService,\n      organizationService\n    );\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    this.onSharedCipher.subscribe(() => {\n      this.router.navigate([\"view-cipher\", { cipherId: this.cipherId }]);\n    });\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.cipherId = params.cipherId;\n      await this.load();\n    });\n  }\n\n  async submit(): Promise<boolean> {\n    const success = await super.submit();\n    if (success) {\n      this.cancel();\n    }\n    return success;\n  }\n\n  cancel() {\n    this.router.navigate([\"/view-cipher\"], {\n      replaceUrl: true,\n      queryParams: { cipherId: this.cipher.id },\n    });\n  }\n}\n","import { CollectionView } from \"@bitwarden/common/admin-console/models/view/collection.view\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { DeepJsonify } from \"@bitwarden/common/types/deep-jsonify\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\n\nexport class BrowserGroupingsComponentState extends BrowserComponentState {\n  favoriteCiphers: CipherView[];\n  noFolderCiphers: CipherView[];\n  ciphers: CipherView[];\n  collectionCounts: Map<string, number>;\n  folderCounts: Map<string, number>;\n  typeCounts: Map<CipherType, number>;\n  folders: FolderView[];\n  collections: CollectionView[];\n  deletedCount: number;\n\n  toJSON() {\n    return Utils.merge(this, {\n      collectionCounts: Utils.mapToRecord(this.collectionCounts),\n      folderCounts: Utils.mapToRecord(this.folderCounts),\n      typeCounts: Utils.mapToRecord(this.typeCounts),\n    });\n  }\n\n  static fromJSON(json: DeepJsonify<BrowserGroupingsComponentState>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new BrowserGroupingsComponentState(), json, {\n      favoriteCiphers: json.favoriteCiphers?.map((c) => CipherView.fromJSON(c)),\n      noFolderCiphers: json.noFolderCiphers?.map((c) => CipherView.fromJSON(c)),\n      ciphers: json.ciphers?.map((c) => CipherView.fromJSON(c)),\n      collectionCounts: Utils.recordToMap(json.collectionCounts),\n      folderCounts: Utils.recordToMap(json.folderCounts),\n      typeCounts: Utils.recordToMap(json.typeCounts),\n      folders: json.folders?.map((f) => FolderView.fromJSON(f)),\n    });\n  }\n}\n","<header>\n  <div class=\"left\">\n    <app-pop-out></app-pop-out>\n  </div>\n  <h1 class=\"sr-only\">{{ \"myVault\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"{{ searchTypeSearch ? 'search' : 'text' }}\"\n      placeholder=\"{{ 'searchVault' | i18n }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n      (keydown)=\"closeOnEsc($event)\"\n    />\n    <i class=\"bwi bwi-search\"></i>\n  </div>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addCipher()\" appA11yTitle=\"{{ 'addItem' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" cdk-scrollable>\n  <app-vault-select\n    (onVaultSelectionChanged)=\"vaultFilterChanged()\"\n    class=\"select-index-top\"\n  ></app-vault-select>\n  <div class=\"no-items\" *ngIf=\"(!ciphers || !ciphers.length) && !showSearching()\">\n    <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\"></i>\n    <ng-container *ngIf=\"loaded\">\n      <img class=\"no-items-image\" aria-hidden=\"true\" />\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n      <button type=\"button\" (click)=\"addCipher()\" class=\"btn block primary link\">\n        {{ \"addItem\" | i18n }}\n      </button>\n    </ng-container>\n  </div>\n  <ng-container *ngIf=\"ciphers && ciphers.length && !showSearching()\">\n    <div class=\"box list\" *ngIf=\"favoriteCiphers\">\n      <h2 class=\"box-header\">\n        {{ \"favorites\" | i18n }}\n        <span class=\"flex-right\">{{ favoriteCiphers.length }}</span>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let favoriteCipher of favoriteCiphers\"\n          [cipher]=\"favoriteCipher\"\n          title=\"{{ 'viewItem' | i18n }}\"\n          (onSelected)=\"selectCipher($event)\"\n          (launchEvent)=\"launchCipher($event)\"\n        >\n        </app-cipher-row>\n      </div>\n    </div>\n    <div class=\"box list\">\n      <h2 class=\"box-header\">\n        {{ \"types\" | i18n }}\n        <span class=\"flex-right\">4</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.Login)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-globe\"></i></div>\n            <span class=\"text\">{{ \"typeLogin\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.Login) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.Card)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-credit-card\"></i></div>\n            <span class=\"text\">{{ \"typeCard\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.Card) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.Identity)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-id-card\"></i></div>\n            <span class=\"text\">{{ \"typeIdentity\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.Identity) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectType(cipherType.SecureNote)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-sticky-note\"></i></div>\n            <span class=\"text\">{{ \"typeSecureNote\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ typeCounts.get(cipherType.SecureNote) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"nestedFolders?.length\">\n      <h2 class=\"box-header\">\n        {{ \"folders\" | i18n }}\n        <span class=\"flex-right\">{{ folderCount }}</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let f of nestedFolders\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectFolder(f.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\">\n              <i class=\"bwi bwi-fw bwi-lg bwi-folder\"></i>\n            </div>\n            <span class=\"text\">{{ f.node.name }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ folderCounts.get(f.node.id) || 0 }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"showCollections && nestedCollections && nestedCollections.length\">\n      <h2 class=\"box-header\">\n        {{ \"collections\" | i18n }}\n        <span class=\"flex-right\">{{ nestedCollections.length }}</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let nestedCollection of nestedCollections\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectCollection(nestedCollection.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-collection\"></i></div>\n            <span class=\"text\">{{ nestedCollection.node.name }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{\n            collectionCounts.get(nestedCollection.node.id) || 0\n          }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"showNoFolderCiphers\">\n      <h2 class=\"box-header\">\n        {{ \"noneFolder\" | i18n }}\n        <div class=\"flex-right\">{{ noFolderCiphers.length }}</div>\n      </h2>\n      <div class=\"box-content\">\n        <app-cipher-row\n          *ngFor=\"let noFolderCipher of noFolderCiphers\"\n          [cipher]=\"noFolderCipher\"\n          title=\"{{ 'viewItem' | i18n }}\"\n          (onSelected)=\"selectCipher($event)\"\n          (launchEvent)=\"launchCipher($event)\"\n        >\n        </app-cipher-row>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"deletedCount\">\n      <h2 class=\"box-header\">\n        {{ \"trash\" | i18n }}\n        <span class=\"flex-right\">{{ deletedCount }}</span>\n      </h2>\n      <div class=\"box-content single-line\">\n        <button type=\"button\" class=\"box-content-row\" appStopClick (click)=\"selectTrash()\">\n          <div class=\"row-main\">\n            <div class=\"icon\"><i class=\"bwi bwi-fw bwi-lg bwi-trash\"></i></div>\n            <span class=\"text\">{{ \"trash\" | i18n }}</span>\n          </div>\n          <span class=\"row-sub-label\">{{ deletedCount }}</span>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\"></i></span>\n        </button>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"showSearching()\">\n    <div class=\"no-items\" *ngIf=\"!ciphers || !ciphers.length\">\n      <p>{{ \"noItemsInList\" | i18n }}</p>\n    </div>\n    <cdk-virtual-scroll-viewport\n      itemSize=\"55\"\n      minBufferPx=\"400\"\n      maxBufferPx=\"600\"\n      *ngIf=\"ciphers && ciphers.length > 0\"\n    >\n      <div class=\"box list full-list\">\n        <div class=\"box-content\">\n          <app-cipher-row\n            *cdkVirtualFor=\"let searchedCipher of ciphers\"\n            [cipher]=\"searchedCipher\"\n            title=\"{{ 'viewItem' | i18n }}\"\n            (onSelected)=\"selectCipher($event)\"\n            (launchEvent)=\"launchCipher($event)\"\n          >\n          </app-cipher-row>\n        </div>\n      </div>\n    </cdk-virtual-scroll-viewport>\n  </ng-container>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { firstValueFrom } from \"rxjs\";\nimport { first } from \"rxjs/operators\";\n\nimport { VaultFilter } from \"@bitwarden/angular/vault/vault-filter/models/vault-filter.model\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { CollectionView } from \"@bitwarden/common/admin-console/models/view/collection.view\";\nimport { TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { BrowserApi } from \"../../../../browser/browserApi\";\nimport { BrowserGroupingsComponentState } from \"../../../../models/browserGroupingsComponentState\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\nimport { BrowserStateService } from \"../../../../services/abstractions/browser-state.service\";\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\nconst ComponentId = \"VaultComponent\";\n\n@Component({\n  selector: \"app-vault-filter\",\n  templateUrl: \"vault-filter.component.html\",\n})\nexport class VaultFilterComponent implements OnInit, OnDestroy {\n  get showNoFolderCiphers(): boolean {\n    return (\n      this.noFolderCiphers != null &&\n      this.noFolderCiphers.length < this.noFolderListSize &&\n      this.collections.length === 0\n    );\n  }\n\n  get folderCount(): number {\n    return this.nestedFolders.length - (this.showNoFolderCiphers ? 0 : 1);\n  }\n  folders: FolderView[];\n  nestedFolders: TreeNode<FolderView>[];\n  collections: CollectionView[];\n  nestedCollections: TreeNode<CollectionView>[];\n  loaded = false;\n  cipherType = CipherType;\n  ciphers: CipherView[];\n  favoriteCiphers: CipherView[];\n  noFolderCiphers: CipherView[];\n  folderCounts = new Map<string, number>();\n  collectionCounts = new Map<string, number>();\n  typeCounts = new Map<CipherType, number>();\n  searchText: string;\n  state: BrowserGroupingsComponentState;\n  showLeftHeader = true;\n  searchPending = false;\n  searchTypeSearch = false;\n  deletedCount = 0;\n  vaultFilter: VaultFilter;\n  selectedOrganization: string = null;\n  showCollections = true;\n\n  private loadedTimeout: number;\n  private selectedTimeout: number;\n  private preventSelected = false;\n  private noFolderListSize = 100;\n  private searchTimeout: any = null;\n  private hasSearched = false;\n  private hasLoadedAllCiphers = false;\n  private allCiphers: CipherView[] = null;\n\n  constructor(\n    private i18nService: I18nService,\n    private cipherService: CipherService,\n    private router: Router,\n    private ngZone: NgZone,\n    private broadcasterService: BroadcasterService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private route: ActivatedRoute,\n    private popupUtils: PopupUtilsService,\n    private syncService: SyncService,\n    private platformUtilsService: PlatformUtilsService,\n    private searchService: SearchService,\n    private location: Location,\n    private browserStateService: BrowserStateService,\n    private vaultFilterService: VaultFilterService\n  ) {\n    this.noFolderListSize = 100;\n  }\n\n  async ngOnInit() {\n    this.searchTypeSearch = !this.platformUtilsService.isSafari();\n    this.showLeftHeader = !(\n      this.popupUtils.inSidebar(window) && this.platformUtilsService.isFirefox()\n    );\n    await this.browserStateService.setBrowserVaultItemsComponentState(null);\n\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            window.setTimeout(() => {\n              this.load();\n            }, 500);\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n\n    const restoredScopeState = await this.restoreState();\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      this.state = await this.browserStateService.getBrowserGroupingComponentState();\n      if (this.state?.searchText) {\n        this.searchText = this.state.searchText;\n      } else if (params.searchText) {\n        this.searchText = params.searchText;\n        this.location.replaceState(\"vault\");\n      }\n\n      if (!this.syncService.syncInProgress) {\n        this.load();\n      } else {\n        this.loadedTimeout = window.setTimeout(() => {\n          if (!this.loaded) {\n            this.load();\n          }\n        }, 5000);\n      }\n\n      if (!this.syncService.syncInProgress || restoredScopeState) {\n        window.setTimeout(() => this.popupUtils.setContentScrollY(window, this.state?.scrollY), 0);\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.loadedTimeout != null) {\n      window.clearTimeout(this.loadedTimeout);\n    }\n    if (this.selectedTimeout != null) {\n      window.clearTimeout(this.selectedTimeout);\n    }\n    this.saveState();\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  async load() {\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n\n    this.updateSelectedOrg();\n    await this.loadCollectionsAndFolders();\n    await this.loadCiphers();\n\n    if (this.showNoFolderCiphers && this.nestedFolders.length > 0) {\n      // Remove \"No Folder\" from folder listing\n      this.nestedFolders = this.nestedFolders.slice(0, this.nestedFolders.length - 1);\n    }\n\n    this.loaded = true;\n  }\n\n  async loadCiphers() {\n    this.allCiphers = await this.cipherService.getAllDecrypted();\n    if (!this.hasLoadedAllCiphers) {\n      this.hasLoadedAllCiphers = !this.searchService.isSearchable(this.searchText);\n    }\n    await this.search(null);\n    this.getCounts();\n  }\n\n  async loadCollections() {\n    const allCollections = await this.vaultFilterService.buildCollections(\n      this.selectedOrganization\n    );\n    this.collections = allCollections.fullList;\n    this.nestedCollections = allCollections.nestedList;\n  }\n\n  async loadFolders() {\n    const allFolders = await firstValueFrom(\n      this.vaultFilterService.buildNestedFolders(this.selectedOrganization)\n    );\n    this.folders = allFolders.fullList;\n    this.nestedFolders = allFolders.nestedList;\n  }\n\n  async search(timeout: number = null) {\n    this.searchPending = false;\n    if (this.searchTimeout != null) {\n      clearTimeout(this.searchTimeout);\n    }\n    const filterDeleted = (c: CipherView) => !c.isDeleted;\n    if (timeout == null) {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      this.ciphers = await this.searchService.searchCiphers(\n        this.searchText,\n        filterDeleted,\n        this.allCiphers\n      );\n      this.ciphers = this.ciphers.filter(\n        (c) => !this.vaultFilterService.filterCipherForSelectedVault(c)\n      );\n      return;\n    }\n    this.searchPending = true;\n    this.searchTimeout = setTimeout(async () => {\n      this.hasSearched = this.searchService.isSearchable(this.searchText);\n      if (!this.hasLoadedAllCiphers && !this.hasSearched) {\n        await this.loadCiphers();\n      } else {\n        this.ciphers = await this.searchService.searchCiphers(\n          this.searchText,\n          filterDeleted,\n          this.allCiphers\n        );\n      }\n      this.ciphers = this.ciphers.filter(\n        (c) => !this.vaultFilterService.filterCipherForSelectedVault(c)\n      );\n      this.searchPending = false;\n    }, timeout);\n  }\n\n  async selectType(type: CipherType) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { type: type } });\n  }\n\n  async selectFolder(folder: FolderView) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { folderId: folder.id || \"none\" } });\n  }\n\n  async selectCollection(collection: CollectionView) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { collectionId: collection.id } });\n  }\n\n  async selectTrash() {\n    this.router.navigate([\"/ciphers\"], { queryParams: { deleted: true } });\n  }\n\n  async selectCipher(cipher: CipherView) {\n    this.selectedTimeout = window.setTimeout(() => {\n      if (!this.preventSelected) {\n        this.router.navigate([\"/view-cipher\"], { queryParams: { cipherId: cipher.id } });\n      }\n      this.preventSelected = false;\n    }, 200);\n  }\n\n  async launchCipher(cipher: CipherView) {\n    if (cipher.type !== CipherType.Login || !cipher.login.canLaunch) {\n      return;\n    }\n\n    if (this.selectedTimeout != null) {\n      window.clearTimeout(this.selectedTimeout);\n    }\n    this.preventSelected = true;\n    await this.cipherService.updateLastLaunchedDate(cipher.id);\n    BrowserApi.createNewTab(cipher.login.launchUri);\n    if (this.popupUtils.inPopup(window)) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  async addCipher() {\n    this.router.navigate([\"/add-cipher\"], {\n      queryParams: { selectedVault: this.vaultFilter.selectedOrganizationId },\n    });\n  }\n\n  async vaultFilterChanged() {\n    if (this.showSearching) {\n      await this.search();\n    }\n    this.updateSelectedOrg();\n    await this.loadCollectionsAndFolders();\n    this.getCounts();\n  }\n\n  updateSelectedOrg() {\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n    if (this.vaultFilter.selectedOrganizationId != null) {\n      this.selectedOrganization = this.vaultFilter.selectedOrganizationId;\n    } else {\n      this.selectedOrganization = null;\n    }\n  }\n\n  getCounts() {\n    let favoriteCiphers: CipherView[] = null;\n    let noFolderCiphers: CipherView[] = null;\n    const folderCounts = new Map<string, number>();\n    const collectionCounts = new Map<string, number>();\n    const typeCounts = new Map<CipherType, number>();\n\n    this.deletedCount = this.allCiphers.filter(\n      (c) => c.isDeleted && !this.vaultFilterService.filterCipherForSelectedVault(c)\n    ).length;\n\n    this.ciphers?.forEach((c) => {\n      if (!this.vaultFilterService.filterCipherForSelectedVault(c)) {\n        if (c.isDeleted) {\n          return;\n        }\n        if (c.favorite) {\n          if (favoriteCiphers == null) {\n            favoriteCiphers = [];\n          }\n          favoriteCiphers.push(c);\n        }\n\n        if (c.folderId == null) {\n          if (noFolderCiphers == null) {\n            noFolderCiphers = [];\n          }\n          noFolderCiphers.push(c);\n        }\n\n        if (typeCounts.has(c.type)) {\n          typeCounts.set(c.type, typeCounts.get(c.type) + 1);\n        } else {\n          typeCounts.set(c.type, 1);\n        }\n\n        if (folderCounts.has(c.folderId)) {\n          folderCounts.set(c.folderId, folderCounts.get(c.folderId) + 1);\n        } else {\n          folderCounts.set(c.folderId, 1);\n        }\n\n        if (c.collectionIds != null) {\n          c.collectionIds.forEach((colId) => {\n            if (collectionCounts.has(colId)) {\n              collectionCounts.set(colId, collectionCounts.get(colId) + 1);\n            } else {\n              collectionCounts.set(colId, 1);\n            }\n          });\n        }\n      }\n    });\n\n    this.favoriteCiphers = favoriteCiphers;\n    this.noFolderCiphers = noFolderCiphers;\n    this.typeCounts = typeCounts;\n    this.folderCounts = folderCounts;\n    this.collectionCounts = collectionCounts;\n  }\n\n  showSearching() {\n    return (\n      this.hasSearched || (!this.searchPending && this.searchService.isSearchable(this.searchText))\n    );\n  }\n\n  closeOnEsc(e: KeyboardEvent) {\n    // If input not empty, use browser default behavior of clearing input instead\n    if (e.key === \"Escape\" && (this.searchText == null || this.searchText === \"\")) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  private async loadCollectionsAndFolders() {\n    this.showCollections = !this.vaultFilter.myVaultOnly;\n    await this.loadFolders();\n    await this.loadCollections();\n  }\n\n  private async saveState() {\n    this.state = Object.assign(new BrowserGroupingsComponentState(), {\n      scrollY: this.popupUtils.getContentScrollY(window),\n      searchText: this.searchText,\n      favoriteCiphers: this.favoriteCiphers,\n      noFolderCiphers: this.noFolderCiphers,\n      ciphers: this.ciphers,\n      collectionCounts: this.collectionCounts,\n      folderCounts: this.folderCounts,\n      typeCounts: this.typeCounts,\n      folders: this.folders,\n      collections: this.collections,\n      deletedCount: this.deletedCount,\n    });\n    await this.browserStateService.setBrowserGroupingComponentState(this.state);\n  }\n\n  private async restoreState(): Promise<boolean> {\n    this.state = await this.browserStateService.getBrowserGroupingComponentState();\n    if (this.state == null) {\n      return false;\n    }\n\n    if (this.state.favoriteCiphers != null) {\n      this.favoriteCiphers = this.state.favoriteCiphers;\n    }\n    if (this.state.noFolderCiphers != null) {\n      this.noFolderCiphers = this.state.noFolderCiphers;\n    }\n    if (this.state.ciphers != null) {\n      this.ciphers = this.state.ciphers;\n    }\n    if (this.state.collectionCounts != null) {\n      this.collectionCounts = this.state.collectionCounts;\n    }\n    if (this.state.folderCounts != null) {\n      this.folderCounts = this.state.folderCounts;\n    }\n    if (this.state.typeCounts != null) {\n      this.typeCounts = this.state.typeCounts;\n    }\n    if (this.state.folders != null) {\n      this.folders = this.state.folders;\n    }\n    if (this.state.collections != null) {\n      this.collections = this.state.collections;\n    }\n    if (this.state.deletedCount != null) {\n      this.deletedCount = this.state.deletedCount;\n    }\n\n    return true;\n  }\n}\n","import { Directive, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\n@Directive()\nexport class VaultItemsComponent {\n  @Input() activeCipherId: string = null;\n  @Output() onCipherClicked = new EventEmitter<CipherView>();\n  @Output() onCipherRightClicked = new EventEmitter<CipherView>();\n  @Output() onAddCipher = new EventEmitter();\n  @Output() onAddCipherOptions = new EventEmitter();\n\n  loaded = false;\n  ciphers: CipherView[] = [];\n  searchPlaceholder: string = null;\n  filter: (cipher: CipherView) => boolean = null;\n  deleted = false;\n  organization: Organization;\n  accessEvents = false;\n\n  protected searchPending = false;\n\n  private searchTimeout: any = null;\n  private _searchText: string = null;\n  get searchText() {\n    return this._searchText;\n  }\n  set searchText(value: string) {\n    this._searchText = value;\n  }\n\n  constructor(protected searchService: SearchService, protected cipherService: CipherService) {}\n\n  async load(filter: (cipher: CipherView) => boolean = null, deleted = false) {\n    this.deleted = deleted ?? false;\n    await this.applyFilter(filter);\n    this.loaded = true;\n  }\n\n  async reload(filter: (cipher: CipherView) => boolean = null, deleted = false) {\n    this.loaded = false;\n    await this.load(filter, deleted);\n  }\n\n  async refresh() {\n    await this.reload(this.filter, this.deleted);\n  }\n\n  async applyFilter(filter: (cipher: CipherView) => boolean = null) {\n    this.filter = filter;\n    await this.search(null);\n  }\n\n  async search(timeout: number = null, indexedCiphers?: CipherView[]) {\n    this.searchPending = false;\n    if (this.searchTimeout != null) {\n      clearTimeout(this.searchTimeout);\n    }\n    if (timeout == null) {\n      await this.doSearch(indexedCiphers);\n      return;\n    }\n    this.searchPending = true;\n    this.searchTimeout = setTimeout(async () => {\n      await this.doSearch(indexedCiphers);\n      this.searchPending = false;\n    }, timeout);\n  }\n\n  selectCipher(cipher: CipherView) {\n    this.onCipherClicked.emit(cipher);\n  }\n\n  rightClickCipher(cipher: CipherView) {\n    this.onCipherRightClicked.emit(cipher);\n  }\n\n  addCipher() {\n    this.onAddCipher.emit();\n  }\n\n  addCipherOptions() {\n    this.onAddCipherOptions.emit();\n  }\n\n  isSearching() {\n    return !this.searchPending && this.searchService.isSearchable(this.searchText);\n  }\n\n  protected deletedFilter: (cipher: CipherView) => boolean = (c) => c.isDeleted === this.deleted;\n\n  protected async doSearch(indexedCiphers?: CipherView[]) {\n    indexedCiphers = indexedCiphers ?? (await this.cipherService.getAllDecrypted());\n    this.ciphers = await this.searchService.searchCiphers(\n      this.searchText,\n      [this.filter, this.deletedFilter],\n      indexedCiphers\n    );\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"back()\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"sr-only\">{{ \"myVault\" | i18n }}</h1>\n  <div class=\"search\">\n    <input\n      type=\"{{ searchTypeSearch ? 'search' : 'text' }}\"\n      placeholder=\"{{ searchPlaceholder || ('searchVault' | i18n) }}\"\n      id=\"search\"\n      [(ngModel)]=\"searchText\"\n      (input)=\"search(200)\"\n      autocomplete=\"off\"\n      appAutofocus\n    />\n    <i class=\"bwi bwi-search\" aria-hidden=\"true\"></i>\n  </div>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addCipher()\" appA11yTitle=\"{{ 'addItem' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" [ngClass]=\"{ 'stacked-boxes': showGroupings() }\">\n  <ng-container *ngIf=\"showGroupings()\">\n    <app-vault-select\n      *ngIf=\"showVaultFilter\"\n      (onVaultSelectionChanged)=\"changeVaultSelection()\"\n    ></app-vault-select>\n    <div class=\"box list\" *ngIf=\"nestedFolders && nestedFolders.length\">\n      <h2 class=\"box-header\">\n        {{ \"folders\" | i18n }}\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let f of nestedFolders\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectFolder(f.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\">\n              <i class=\"bwi bwi-fw bwi-lg bwi-folder\" aria-hidden=\"true\"></i>\n            </div>\n            <span class=\"text\">{{ f.node.name }}</span>\n          </div>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i></span>\n        </button>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"nestedCollections && nestedCollections.length\">\n      <h2 class=\"box-header\">\n        {{ \"collections\" | i18n }}\n      </h2>\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          *ngFor=\"let c of nestedCollections\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"selectCollection(c.node)\"\n        >\n          <div class=\"row-main\">\n            <div class=\"icon\">\n              <i class=\"bwi bwi-fw bwi-lg bwi-collection\" aria-hidden=\"true\"></i>\n            </div>\n            <span class=\"text\">{{ c.node.name }}</span>\n          </div>\n          <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i></span>\n        </button>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf=\"ciphers\">\n    <div *ngIf=\"!ciphers.length\">\n      <app-vault-select\n        *ngIf=\"showVaultFilter && !showGroupings()\"\n        (onVaultSelectionChanged)=\"changeVaultSelection()\"\n      ></app-vault-select>\n      <div class=\"no-items\">\n        <i class=\"bwi bwi-spinner bwi-spin bwi-3x\" *ngIf=\"!loaded\" aria-hidden=\"true\"></i>\n        <ng-container *ngIf=\"loaded\">\n          <img class=\"no-items-image\" aria-hidden=\"true\" />\n          <p>{{ \"noItemsInList\" | i18n }}</p>\n          <button type=\"button\" (click)=\"addCipher()\" class=\"btn block primary link\">\n            {{ \"addItem\" | i18n }}\n          </button>\n        </ng-container>\n      </div>\n    </div>\n    <cdk-virtual-scroll-viewport\n      itemSize=\"55\"\n      minBufferPx=\"400\"\n      maxBufferPx=\"600\"\n      *ngIf=\"ciphers.length\"\n      #virtualScrollViewport\n      ><app-vault-select\n        *ngIf=\"showVaultFilter && !showGroupings()\"\n        (onVaultSelectionChanged)=\"changeVaultSelection()\"\n      ></app-vault-select>\n      <div class=\"box list only-list\">\n        <h2 class=\"box-header\">\n          {{ groupingTitle }}\n          <span class=\"flex-right\">{{ isSearching() ? ciphers.length : ciphers.length }}</span>\n        </h2>\n        <div class=\"box-content\">\n          <app-cipher-row\n            *cdkVirtualFor=\"let c of ciphers; let last = last\"\n            [cipher]=\"c\"\n            [last]=\"last\"\n            title=\"{{ 'viewItem' | i18n }}\"\n            (onSelected)=\"selectCipher($event)\"\n            (launchEvent)=\"launchCipher($event)\"\n          ></app-cipher-row>\n        </div>\n      </div>\n    </cdk-virtual-scroll-viewport>\n  </ng-container>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { VaultItemsComponent as BaseVaultItemsComponent } from \"@bitwarden/angular/vault/components/vault-items.component\";\nimport { VaultFilter } from \"@bitwarden/angular/vault/vault-filter/models/vault-filter.model\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { CollectionView } from \"@bitwarden/common/admin-console/models/view/collection.view\";\nimport { TreeNode } from \"@bitwarden/common/models/domain/tree-node\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\nimport { BrowserApi } from \"../../../../browser/browserApi\";\nimport { BrowserComponentState } from \"../../../../models/browserComponentState\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\nimport { BrowserStateService } from \"../../../../services/abstractions/browser-state.service\";\nimport { VaultFilterService } from \"../../../services/vault-filter.service\";\n\nconst ComponentId = \"VaultItemsComponent\";\n\n@Component({\n  selector: \"app-vault-items\",\n  templateUrl: \"vault-items.component.html\",\n})\nexport class VaultItemsComponent extends BaseVaultItemsComponent implements OnInit, OnDestroy {\n  groupingTitle: string;\n  state: BrowserComponentState;\n  folderId: string = null;\n  collectionId: string = null;\n  type: CipherType = null;\n  nestedFolders: TreeNode<FolderView>[];\n  nestedCollections: TreeNode<CollectionView>[];\n  searchTypeSearch = false;\n  showOrganizations = false;\n  vaultFilter: VaultFilter;\n  deleted = true;\n  noneFolder = false;\n  showVaultFilter = false;\n\n  private selectedTimeout: number;\n  private preventSelected = false;\n  private applySavedState = true;\n  private scrollingContainer = \"cdk-virtual-scroll-viewport\";\n\n  constructor(\n    searchService: SearchService,\n    private organizationService: OrganizationService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    private ngZone: NgZone,\n    private broadcasterService: BroadcasterService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private stateService: BrowserStateService,\n    private popupUtils: PopupUtilsService,\n    private i18nService: I18nService,\n    private folderService: FolderService,\n    private collectionService: CollectionService,\n    private platformUtilsService: PlatformUtilsService,\n    cipherService: CipherService,\n    private vaultFilterService: VaultFilterService\n  ) {\n    super(searchService, cipherService);\n    this.applySavedState =\n      (window as any).previousPopupUrl != null &&\n      !(window as any).previousPopupUrl.startsWith(\"/ciphers\");\n  }\n\n  async ngOnInit() {\n    this.searchTypeSearch = !this.platformUtilsService.isSafari();\n    this.showOrganizations = this.organizationService.hasOrganizations();\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (this.applySavedState) {\n        this.state = await this.stateService.getBrowserVaultItemsComponentState();\n        if (this.state?.searchText) {\n          this.searchText = this.state.searchText;\n        }\n      }\n\n      if (params.deleted) {\n        this.showVaultFilter = true;\n        this.groupingTitle = this.i18nService.t(\"trash\");\n        this.searchPlaceholder = this.i18nService.t(\"searchTrash\");\n        await this.load(this.buildFilter(), true);\n      } else if (params.type) {\n        this.showVaultFilter = true;\n        this.searchPlaceholder = this.i18nService.t(\"searchType\");\n        this.type = parseInt(params.type, null);\n        switch (this.type) {\n          case CipherType.Login:\n            this.groupingTitle = this.i18nService.t(\"logins\");\n            break;\n          case CipherType.Card:\n            this.groupingTitle = this.i18nService.t(\"cards\");\n            break;\n          case CipherType.Identity:\n            this.groupingTitle = this.i18nService.t(\"identities\");\n            break;\n          case CipherType.SecureNote:\n            this.groupingTitle = this.i18nService.t(\"secureNotes\");\n            break;\n          default:\n            break;\n        }\n        await this.load(this.buildFilter());\n      } else if (params.folderId) {\n        this.showVaultFilter = true;\n        this.folderId = params.folderId === \"none\" ? null : params.folderId;\n        this.searchPlaceholder = this.i18nService.t(\"searchFolder\");\n        if (this.folderId != null) {\n          this.showOrganizations = false;\n          const folderNode = await this.vaultFilterService.getFolderNested(this.folderId);\n          if (folderNode != null && folderNode.node != null) {\n            this.groupingTitle = folderNode.node.name;\n            this.nestedFolders =\n              folderNode.children != null && folderNode.children.length > 0\n                ? folderNode.children\n                : null;\n          }\n        } else {\n          this.noneFolder = true;\n          this.groupingTitle = this.i18nService.t(\"noneFolder\");\n        }\n        await this.load(this.buildFilter());\n      } else if (params.collectionId) {\n        this.showVaultFilter = false;\n        this.collectionId = params.collectionId;\n        this.searchPlaceholder = this.i18nService.t(\"searchCollection\");\n        const collectionNode = await this.collectionService.getNested(this.collectionId);\n        if (collectionNode != null && collectionNode.node != null) {\n          this.groupingTitle = collectionNode.node.name;\n          this.nestedCollections =\n            collectionNode.children != null && collectionNode.children.length > 0\n              ? collectionNode.children\n              : null;\n        }\n        await this.load(\n          (c) => c.collectionIds != null && c.collectionIds.indexOf(this.collectionId) > -1\n        );\n      } else {\n        this.showVaultFilter = true;\n        this.groupingTitle = this.i18nService.t(\"allItems\");\n        await this.load(this.buildFilter());\n      }\n\n      if (this.applySavedState && this.state != null) {\n        window.setTimeout(\n          () =>\n            this.popupUtils.setContentScrollY(window, this.state.scrollY, this.scrollingContainer),\n          0\n        );\n      }\n      await this.stateService.setBrowserVaultItemsComponentState(null);\n    });\n\n    this.broadcasterService.subscribe(ComponentId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (message.successfully) {\n              window.setTimeout(() => {\n                this.refresh();\n              }, 500);\n            }\n            break;\n          default:\n            break;\n        }\n\n        this.changeDetectorRef.detectChanges();\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.saveState();\n    this.broadcasterService.unsubscribe(ComponentId);\n  }\n\n  selectCipher(cipher: CipherView) {\n    this.selectedTimeout = window.setTimeout(() => {\n      if (!this.preventSelected) {\n        super.selectCipher(cipher);\n        this.router.navigate([\"/view-cipher\"], { queryParams: { cipherId: cipher.id } });\n      }\n      this.preventSelected = false;\n    }, 200);\n  }\n\n  selectFolder(folder: FolderView) {\n    if (folder.id != null) {\n      this.router.navigate([\"/ciphers\"], { queryParams: { folderId: folder.id } });\n    }\n  }\n\n  selectCollection(collection: CollectionView) {\n    this.router.navigate([\"/ciphers\"], { queryParams: { collectionId: collection.id } });\n  }\n\n  async launchCipher(cipher: CipherView) {\n    if (cipher.type !== CipherType.Login || !cipher.login.canLaunch) {\n      return;\n    }\n\n    if (this.selectedTimeout != null) {\n      window.clearTimeout(this.selectedTimeout);\n    }\n    this.preventSelected = true;\n    await this.cipherService.updateLastLaunchedDate(cipher.id);\n    BrowserApi.createNewTab(cipher.login.launchUri);\n    if (this.popupUtils.inPopup(window)) {\n      BrowserApi.closePopup(window);\n    }\n  }\n\n  addCipher() {\n    if (this.deleted) {\n      return false;\n    }\n    super.addCipher();\n    this.router.navigate([\"/add-cipher\"], {\n      queryParams: {\n        folderId: this.folderId,\n        type: this.type,\n        collectionId: this.collectionId,\n        selectedVault: this.vaultFilter.selectedOrganizationId,\n      },\n    });\n  }\n\n  back() {\n    (window as any).routeDirection = \"b\";\n    this.location.back();\n  }\n\n  showGroupings() {\n    return (\n      !this.isSearching() &&\n      ((this.nestedFolders && this.nestedFolders.length) ||\n        (this.nestedCollections && this.nestedCollections.length))\n    );\n  }\n\n  async changeVaultSelection() {\n    this.vaultFilter = this.vaultFilterService.getVaultFilter();\n    await this.load(this.buildFilter(), this.deleted);\n  }\n\n  private buildFilter(): (cipher: CipherView) => boolean {\n    return (cipher) => {\n      let cipherPassesFilter = true;\n      if (this.deleted && cipherPassesFilter) {\n        cipherPassesFilter = cipher.isDeleted;\n      }\n      if (this.type != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.type === this.type;\n      }\n      if (this.folderId != null && this.folderId != \"none\" && cipherPassesFilter) {\n        cipherPassesFilter = cipher.folderId === this.folderId;\n      }\n      if (this.noneFolder) {\n        cipherPassesFilter = cipher.folderId == null;\n      }\n      if (this.collectionId != null && cipherPassesFilter) {\n        cipherPassesFilter =\n          cipher.collectionIds != null && cipher.collectionIds.indexOf(this.collectionId) > -1;\n      }\n      if (this.vaultFilter.selectedOrganizationId != null && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === this.vaultFilter.selectedOrganizationId;\n      }\n      if (this.vaultFilter.myVaultOnly && cipherPassesFilter) {\n        cipherPassesFilter = cipher.organizationId === null;\n      }\n      return cipherPassesFilter;\n    };\n  }\n\n  private async saveState() {\n    this.state = {\n      scrollY: this.popupUtils.getContentScrollY(window, this.scrollingContainer),\n      searchText: this.searchText,\n    };\n    await this.stateService.setBrowserVaultItemsComponentState(this.state);\n  }\n}\n","import { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport abstract class TokenService {\n  setTokens: (\n    accessToken: string,\n    refreshToken: string,\n    clientIdClientSecret: [string, string]\n  ) => Promise<any>;\n  setToken: (token: string) => Promise<any>;\n  getToken: () => Promise<string>;\n  setRefreshToken: (refreshToken: string) => Promise<any>;\n  getRefreshToken: () => Promise<string>;\n  setClientId: (clientId: string) => Promise<any>;\n  getClientId: () => Promise<string>;\n  setClientSecret: (clientSecret: string) => Promise<any>;\n  getClientSecret: () => Promise<string>;\n  setTwoFactorToken: (tokenResponse: IdentityTokenResponse) => Promise<any>;\n  getTwoFactorToken: () => Promise<string>;\n  clearTwoFactorToken: () => Promise<any>;\n  clearToken: (userId?: string) => Promise<any>;\n  decodeToken: (token?: string) => any;\n  getTokenExpirationDate: () => Promise<Date>;\n  tokenSecondsRemaining: (offsetSeconds?: number) => Promise<number>;\n  tokenNeedsRefresh: (minutes?: number) => Promise<boolean>;\n  getUserId: () => Promise<string>;\n  getEmail: () => Promise<string>;\n  getEmailVerified: () => Promise<boolean>;\n  getName: () => Promise<string>;\n  getIssuer: () => Promise<string>;\n  getIsExternal: () => Promise<boolean>;\n}\n","import {\n  ChangeDetectorRef,\n  Directive,\n  EventEmitter,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Output,\n} from \"@angular/core\";\nimport { firstValueFrom } from \"rxjs\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { TokenService } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { EventType, FieldType } from \"@bitwarden/common/enums\";\nimport { EncArrayBuffer } from \"@bitwarden/common/models/domain/enc-array-buffer\";\nimport { ErrorResponse } from \"@bitwarden/common/models/response/error.response\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { AttachmentView } from \"@bitwarden/common/vault/models/view/attachment.view\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\n\nconst BroadcasterSubscriptionId = \"ViewComponent\";\n\n@Directive()\nexport class ViewComponent implements OnDestroy, OnInit {\n  @Input() cipherId: string;\n  @Output() onEditCipher = new EventEmitter<CipherView>();\n  @Output() onCloneCipher = new EventEmitter<CipherView>();\n  @Output() onShareCipher = new EventEmitter<CipherView>();\n  @Output() onDeletedCipher = new EventEmitter<CipherView>();\n  @Output() onRestoredCipher = new EventEmitter<CipherView>();\n\n  cipher: CipherView;\n  showPassword: boolean;\n  showPasswordCount: boolean;\n  showCardNumber: boolean;\n  showCardCode: boolean;\n  canAccessPremium: boolean;\n  showPremiumRequiredTotp: boolean;\n  totpCode: string;\n  totpCodeFormatted: string;\n  totpDash: number;\n  totpSec: number;\n  totpLow: boolean;\n  fieldType = FieldType;\n  checkPasswordPromise: Promise<number>;\n  folder: FolderView;\n\n  private totpInterval: any;\n  private previousCipherId: string;\n  private passwordReprompted = false;\n\n  constructor(\n    protected cipherService: CipherService,\n    protected folderService: FolderService,\n    protected totpService: TotpService,\n    protected tokenService: TokenService,\n    protected i18nService: I18nService,\n    protected cryptoService: CryptoService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected auditService: AuditService,\n    protected win: Window,\n    protected broadcasterService: BroadcasterService,\n    protected ngZone: NgZone,\n    protected changeDetectorRef: ChangeDetectorRef,\n    protected eventCollectionService: EventCollectionService,\n    protected apiService: ApiService,\n    protected passwordRepromptService: PasswordRepromptService,\n    private logService: LogService,\n    protected stateService: StateService,\n    protected fileDownloadService: FileDownloadService\n  ) {}\n\n  ngOnInit() {\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"syncCompleted\":\n            if (message.successfully) {\n              await this.load();\n              this.changeDetectorRef.detectChanges();\n            }\n            break;\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n    this.cleanUp();\n  }\n\n  async load() {\n    this.cleanUp();\n\n    const cipher = await this.cipherService.get(this.cipherId);\n    this.cipher = await cipher.decrypt();\n    this.canAccessPremium = await this.stateService.getCanAccessPremium();\n    this.showPremiumRequiredTotp =\n      this.cipher.login.totp && !this.canAccessPremium && !this.cipher.organizationUseTotp;\n\n    if (this.cipher.folderId) {\n      this.folder = await (\n        await firstValueFrom(this.folderService.folderViews$)\n      ).find((f) => f.id == this.cipher.folderId);\n    }\n\n    if (\n      this.cipher.type === CipherType.Login &&\n      this.cipher.login.totp &&\n      (cipher.organizationUseTotp || this.canAccessPremium)\n    ) {\n      await this.totpUpdateCode();\n      const interval = this.totpService.getTimeInterval(this.cipher.login.totp);\n      await this.totpTick(interval);\n\n      this.totpInterval = setInterval(async () => {\n        await this.totpTick(interval);\n      }, 1000);\n    }\n\n    if (this.previousCipherId !== this.cipherId) {\n      this.eventCollectionService.collect(EventType.Cipher_ClientViewed, this.cipherId);\n    }\n    this.previousCipherId = this.cipherId;\n  }\n\n  async edit() {\n    if (await this.promptPassword()) {\n      this.onEditCipher.emit(this.cipher);\n      return true;\n    }\n\n    return false;\n  }\n\n  async clone() {\n    if (await this.promptPassword()) {\n      this.onCloneCipher.emit(this.cipher);\n      return true;\n    }\n\n    return false;\n  }\n\n  async share() {\n    if (await this.promptPassword()) {\n      this.onShareCipher.emit(this.cipher);\n      return true;\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\n        this.cipher.isDeleted ? \"permanentlyDeleteItemConfirmation\" : \"deleteItemConfirmation\"\n      ),\n      this.i18nService.t(\"deleteItem\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      await this.deleteCipher();\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.cipher.isDeleted ? \"permanentlyDeletedItem\" : \"deletedItem\")\n      );\n      this.onDeletedCipher.emit(this.cipher);\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async restore(): Promise<boolean> {\n    if (!this.cipher.isDeleted) {\n      return false;\n    }\n\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"restoreItemConfirmation\"),\n      this.i18nService.t(\"restoreItem\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\"\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      await this.restoreCipher();\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"restoredItem\"));\n      this.onRestoredCipher.emit(this.cipher);\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  async togglePassword() {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    this.showPassword = !this.showPassword;\n    this.showPasswordCount = false;\n    if (this.showPassword) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledPasswordVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async togglePasswordCount() {\n    if (!this.showPassword) {\n      return;\n    }\n\n    this.showPasswordCount = !this.showPasswordCount;\n  }\n\n  async toggleCardNumber() {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    this.showCardNumber = !this.showCardNumber;\n    if (this.showCardNumber) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardNumberVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async toggleCardCode() {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    this.showCardCode = !this.showCardCode;\n    if (this.showCardCode) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledCardCodeVisible,\n        this.cipherId\n      );\n    }\n  }\n\n  async checkPassword() {\n    if (\n      this.cipher.login == null ||\n      this.cipher.login.password == null ||\n      this.cipher.login.password === \"\"\n    ) {\n      return;\n    }\n\n    this.checkPasswordPromise = this.auditService.passwordLeaked(this.cipher.login.password);\n    const matches = await this.checkPasswordPromise;\n\n    if (matches > 0) {\n      this.platformUtilsService.showToast(\n        \"warning\",\n        null,\n        this.i18nService.t(\"passwordExposed\", matches.toString())\n      );\n    } else {\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"passwordSafe\"));\n    }\n  }\n\n  launch(uri: LoginUriView, cipherId?: string) {\n    if (!uri.canLaunch) {\n      return;\n    }\n\n    if (cipherId) {\n      this.cipherService.updateLastLaunchedDate(cipherId);\n    }\n\n    this.platformUtilsService.launchUri(uri.launchUri);\n  }\n\n  async copy(value: string, typeI18nKey: string, aType: string) {\n    if (value == null) {\n      return;\n    }\n\n    if (\n      this.passwordRepromptService.protectedFields().includes(aType) &&\n      !(await this.promptPassword())\n    ) {\n      return;\n    }\n\n    const copyOptions = this.win != null ? { window: this.win } : null;\n    this.platformUtilsService.copyToClipboard(value, copyOptions);\n    this.platformUtilsService.showToast(\n      \"info\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(typeI18nKey))\n    );\n\n    if (typeI18nKey === \"password\") {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledHiddenFieldVisible,\n        this.cipherId\n      );\n    } else if (typeI18nKey === \"securityCode\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedCardCode, this.cipherId);\n    } else if (aType === \"H_Field\") {\n      this.eventCollectionService.collect(EventType.Cipher_ClientCopiedHiddenField, this.cipherId);\n    }\n  }\n\n  setTextDataOnDrag(event: DragEvent, data: string) {\n    event.dataTransfer.setData(\"text\", data);\n  }\n\n  async downloadAttachment(attachment: AttachmentView) {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n    const a = attachment as any;\n    if (a.downloading) {\n      return;\n    }\n\n    if (this.cipher.organizationId == null && !this.canAccessPremium) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"premiumRequired\"),\n        this.i18nService.t(\"premiumRequiredDesc\")\n      );\n      return;\n    }\n\n    let url: string;\n    try {\n      const attachmentDownloadResponse = await this.apiService.getAttachmentData(\n        this.cipher.id,\n        attachment.id\n      );\n      url = attachmentDownloadResponse.url;\n    } catch (e) {\n      if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {\n        url = attachment.url;\n      } else if (e instanceof ErrorResponse) {\n        throw new Error((e as ErrorResponse).getSingleMessage());\n      } else {\n        throw e;\n      }\n    }\n\n    a.downloading = true;\n    const response = await fetch(new Request(url, { cache: \"no-store\" }));\n    if (response.status !== 200) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n      a.downloading = false;\n      return;\n    }\n\n    try {\n      const encBuf = await EncArrayBuffer.fromResponse(response);\n      const key =\n        attachment.key != null\n          ? attachment.key\n          : await this.cryptoService.getOrgKey(this.cipher.organizationId);\n      const decBuf = await this.cryptoService.decryptFromBytes(encBuf, key);\n      this.fileDownloadService.download({\n        fileName: attachment.fileName,\n        blobData: decBuf,\n      });\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"errorOccurred\"));\n    }\n\n    a.downloading = false;\n  }\n\n  protected deleteCipher() {\n    return this.cipher.isDeleted\n      ? this.cipherService.deleteWithServer(this.cipher.id)\n      : this.cipherService.softDeleteWithServer(this.cipher.id);\n  }\n\n  protected restoreCipher() {\n    return this.cipherService.restoreWithServer(this.cipher.id);\n  }\n\n  protected async promptPassword() {\n    if (this.cipher.reprompt === CipherRepromptType.None || this.passwordReprompted) {\n      return true;\n    }\n\n    return (this.passwordReprompted = await this.passwordRepromptService.showPasswordPrompt());\n  }\n\n  private cleanUp() {\n    this.totpCode = null;\n    this.cipher = null;\n    this.folder = null;\n    this.showPassword = false;\n    this.showCardNumber = false;\n    this.showCardCode = false;\n    this.passwordReprompted = false;\n    if (this.totpInterval) {\n      clearInterval(this.totpInterval);\n    }\n  }\n\n  private async totpUpdateCode() {\n    if (\n      this.cipher == null ||\n      this.cipher.type !== CipherType.Login ||\n      this.cipher.login.totp == null\n    ) {\n      if (this.totpInterval) {\n        clearInterval(this.totpInterval);\n      }\n      return;\n    }\n\n    this.totpCode = await this.totpService.getCode(this.cipher.login.totp);\n    if (this.totpCode != null) {\n      if (this.totpCode.length > 4) {\n        const half = Math.floor(this.totpCode.length / 2);\n        this.totpCodeFormatted =\n          this.totpCode.substring(0, half) + \" \" + this.totpCode.substring(half);\n      } else {\n        this.totpCodeFormatted = this.totpCode;\n      }\n    } else {\n      this.totpCodeFormatted = null;\n      if (this.totpInterval) {\n        clearInterval(this.totpInterval);\n      }\n    }\n  }\n\n  private async totpTick(intervalSeconds: number) {\n    const epoch = Math.round(new Date().getTime() / 1000.0);\n    const mod = epoch % intervalSeconds;\n\n    this.totpSec = intervalSeconds - mod;\n    this.totpDash = +(Math.round(((78.6 / intervalSeconds) * mod + \"e+2\") as any) + \"e-2\");\n    this.totpLow = this.totpSec <= 7;\n    if (mod === 0) {\n      await this.totpUpdateCode();\n    }\n  }\n}\n","import { Directive, Input } from \"@angular/core\";\n\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventType, FieldType } from \"@bitwarden/common/enums\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FieldView } from \"@bitwarden/common/vault/models/view/field.view\";\n\n@Directive()\nexport class ViewCustomFieldsComponent {\n  @Input() cipher: CipherView;\n  @Input() promptPassword: () => Promise<boolean>;\n  @Input() copy: (value: string, typeI18nKey: string, aType: string) => void;\n\n  fieldType = FieldType;\n\n  constructor(private eventCollectionService: EventCollectionService) {}\n\n  async toggleFieldValue(field: FieldView) {\n    if (!(await this.promptPassword())) {\n      return;\n    }\n\n    const f = field as any;\n    f.showValue = !f.showValue;\n    f.showCount = false;\n    if (f.showValue) {\n      this.eventCollectionService.collect(\n        EventType.Cipher_ClientToggledHiddenFieldVisible,\n        this.cipher.id\n      );\n    }\n  }\n\n  async toggleFieldCount(field: FieldView) {\n    if (!field.showValue) {\n      return;\n    }\n\n    field.showCount = !field.showCount;\n  }\n\n  setTextDataOnDrag(event: DragEvent, data: string) {\n    event.dataTransfer.setData(\"text\", data);\n  }\n}\n","import { Pipe } from \"@angular/core\";\n\nimport { ColorPasswordPipe } from \"./color-password.pipe\";\n\n/*\n An updated pipe that extends ColourPasswordPipe to include a character count\n*/\n@Pipe({ name: \"colorPasswordCount\" })\nexport class ColorPasswordCountPipe extends ColorPasswordPipe {\n  transform(password: string) {\n    const template = (character: string, type: string, index: number) =>\n      `<span class=\"password-character password-${type}\">\n                ${character}<span class=\"password-count\">${index + 1}</span>\n            </span>`;\n    const colorizedPasswordCount = this.generateTemplate(password, template);\n\n    return colorizedPasswordCount;\n  }\n}\n","<ng-container>\n  <h2 class=\"box-header\">\n    {{ \"customFields\" | i18n }}\n  </h2>\n  <div class=\"box-content\">\n    <div class=\"box-content-row box-content-row-flex\" *ngFor=\"let field of cipher.fields\">\n      <div class=\"row-main\">\n        <span\n          *ngIf=\"field.type != fieldType.Linked\"\n          class=\"row-label draggable\"\n          draggable=\"true\"\n          (dragstart)=\"setTextDataOnDrag($event, field.value)\"\n          >{{ field.name }}</span\n        >\n        <span *ngIf=\"field.type === fieldType.Linked\" class=\"row-label\">{{ field.name }}</span>\n        <div *ngIf=\"field.type === fieldType.Text\">\n          {{ field.value || \"&nbsp;\" }}\n        </div>\n        <div *ngIf=\"field.type === fieldType.Hidden\">\n          <span *ngIf=\"!field.showValue\" class=\"monospaced\">{{ field.maskedValue }}</span>\n          <span\n            *ngIf=\"field.showValue && !field.showCount\"\n            class=\"monospaced show-whitespace\"\n            [innerHTML]=\"field.value | colorPassword\"\n          ></span>\n          <span\n            *ngIf=\"field.showValue && field.showCount\"\n            [innerHTML]=\"field.value | colorPasswordCount\"\n          ></span>\n        </div>\n        <div *ngIf=\"field.type === fieldType.Boolean\">\n          <i class=\"bwi bwi-check-square\" *ngIf=\"field.value === 'true'\" aria-hidden=\"true\"></i>\n          <i class=\"bwi bwi-square\" *ngIf=\"field.value !== 'true'\" aria-hidden=\"true\"></i>\n          <span class=\"sr-only\">{{ field.value }}</span>\n        </div>\n        <div *ngIf=\"field.type === fieldType.Linked\" class=\"box-content-row-flex\">\n          <div class=\"icon icon-small\">\n            <i\n              class=\"bwi bwi-link\"\n              aria-hidden=\"true\"\n              appA11yTitle=\"{{ 'linkedValue' | i18n }}\"\n            ></i>\n            <span class=\"sr-only\">{{ \"linkedValue\" | i18n }}</span>\n          </div>\n          <span>{{ cipher.linkedFieldI18nKey(field.linkedId) | i18n }}</span>\n        </div>\n      </div>\n      <div class=\"action-buttons action-buttons-fixed\">\n        <button\n          type=\"button\"\n          class=\"row-btn\"\n          appStopClick\n          attr.aria-label=\"{{ 'toggleCharacterCount' | i18n }} {{ field.name }}\"\n          appA11yTitle=\"{{ 'toggleCharacterCount' | i18n }}\"\n          *ngIf=\"field.type === fieldType.Hidden && cipher.viewPassword && field.showValue\"\n          (click)=\"toggleFieldCount(field)\"\n          [attr.aria-pressed]=\"field.showCount\"\n        >\n          <i class=\"bwi bwi-lg bwi-numbered-list\" aria-hidden=\"true\"></i>\n        </button>\n        <button\n          type=\"button\"\n          class=\"row-btn\"\n          appStopClick\n          attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ field.name }}\"\n          appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n          *ngIf=\"field.type === fieldType.Hidden && cipher.viewPassword\"\n          (click)=\"toggleFieldValue(field)\"\n          [attr.aria-pressed]=\"field.showValue\"\n        >\n          <i\n            class=\"bwi bwi-lg\"\n            aria-hidden=\"true\"\n            [ngClass]=\"{ 'bwi-eye': !field.showValue, 'bwi-eye-slash': field.showValue }\"\n          ></i>\n        </button>\n        <button\n          type=\"button\"\n          class=\"row-btn\"\n          appStopClick\n          attr.aria-label=\"{{ 'copyValue' | i18n }} {{ field.name }}\"\n          appA11yTitle=\"{{ 'copyValue' | i18n }}\"\n          *ngIf=\"\n            field.value &&\n            field.type !== fieldType.Boolean &&\n            field.type !== fieldType.Linked &&\n            !(field.type === fieldType.Hidden && !cipher.viewPassword)\n          \"\n          (click)=\"\n            copy(field.value, 'value', field.type === fieldType.Hidden ? 'H_Field' : 'Field')\n          \"\n        >\n          <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n        </button>\n      </div>\n    </div>\n  </div>\n</ng-container>\n","import { Component } from \"@angular/core\";\n\nimport { ViewCustomFieldsComponent as BaseViewCustomFieldsComponent } from \"@bitwarden/angular/vault/components/view-custom-fields.component\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\n\n@Component({\n  selector: \"app-vault-view-custom-fields\",\n  templateUrl: \"view-custom-fields.component.html\",\n})\nexport class ViewCustomFieldsComponent extends BaseViewCustomFieldsComponent {\n  constructor(eventCollectionService: EventCollectionService) {\n    super(eventCollectionService);\n  }\n}\n","<!-- Please remove this disable statement when editing this file! -->\n<!-- eslint-disable @angular-eslint/template/button-has-type -->\n<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"close()\">{{ \"close\" | i18n }}</button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"viewItem\" | i18n }}</span>\n  </h1>\n  <div class=\"right\" *ngIf=\"cipher\">\n    <button type=\"button\" (click)=\"edit()\" *ngIf=\"!cipher.isDeleted\">\n      {{ \"edit\" | i18n }}\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\" *ngIf=\"cipher\">\n  <div class=\"box\">\n    <h2 class=\"box-header\">\n      {{ \"itemInformation\" | i18n }}\n    </h2>\n    <div class=\"box-content\">\n      <div class=\"box-content-row\">\n        <label\n          for=\"name\"\n          class=\"draggable\"\n          draggable=\"true\"\n          (dragstart)=\"setTextDataOnDrag($event, cipher.name)\"\n          >{{ \"name\" | i18n }}</label\n        >\n        <input id=\"name\" type=\"text\" [value]=\"cipher.name\" readonly aria-readonly=\"true\" />\n      </div>\n      <!-- Login -->\n      <div *ngIf=\"cipher.login\">\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.login.username\">\n          <div class=\"row-main\">\n            <label\n              for=\"loginUsername\"\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.login.username)\"\n              >{{ \"username\" | i18n }}\n            </label>\n            <input\n              id=\"loginUsername\"\n              type=\"text\"\n              [value]=\"cipher.login.username\"\n              readonly\n              aria-readonly=\"true\"\n            />\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copyUsername' | i18n }}\"\n              (click)=\"copy(cipher.login.username, 'username', 'Username')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.login.password\">\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.login.password)\"\n              >{{ \"password\" | i18n }}</span\n            >\n            <div *ngIf=\"!showPassword\" class=\"monospaced\">\n              {{ cipher.login.maskedPassword }}\n            </div>\n            <div\n              *ngIf=\"showPassword && !showPasswordCount\"\n              class=\"monospaced password-wrapper\"\n              appSelectCopy\n              [innerHTML]=\"cipher.login.password | colorPassword\"\n            ></div>\n            <div\n              *ngIf=\"showPassword && showPasswordCount\"\n              [innerHTML]=\"cipher.login.password | colorPasswordCount\"\n            ></div>\n          </div>\n          <div class=\"action-buttons action-buttons-fixed\">\n            <button\n              type=\"button\"\n              #checkPasswordBtn\n              class=\"row-btn btn\"\n              appA11yTitle=\"{{ 'checkPassword' | i18n }}\"\n              (click)=\"checkPassword()\"\n              [appApiAction]=\"checkPasswordPromise\"\n              [disabled]=\"$any(checkPasswordBtn).loading\"\n              *ngIf=\"cipher.viewPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg bwi-check-circle\"\n                [hidden]=\"$any(checkPasswordBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n              <i\n                class=\"bwi bwi-lg bwi-spinner bwi-spin\"\n                [hidden]=\"!$any(checkPasswordBtn).loading\"\n                aria-hidden=\"true\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleCharacterCount' | i18n }} {{ 'password' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleCharacterCount' | i18n }}\"\n              (click)=\"togglePasswordCount()\"\n              *ngIf=\"showPassword\"\n              [attr.aria-pressed]=\"showPasswordCount\"\n            >\n              <i class=\"bwi bwi-lg bwi-numbered-list\" aria-hidden=\"true\"></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ 'password' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"togglePassword()\"\n              *ngIf=\"cipher.viewPassword\"\n              [attr.aria-pressed]=\"showPassword\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copyPassword' | i18n }}\"\n              (click)=\"copy(cipher.login.password, 'password', 'Password')\"\n              *ngIf=\"cipher.viewPassword\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n        <div\n          class=\"box-content-row box-content-row-flex totp\"\n          [ngClass]=\"{ low: totpLow }\"\n          *ngIf=\"cipher.login.totp && totpCode\"\n        >\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, totpCode)\"\n              >{{ \"verificationCodeTotp\" | i18n }}</span\n            >\n            <span class=\"totp-code\">{{ totpCodeFormatted }}</span>\n          </div>\n          <span class=\"totp-countdown\" aria-hidden=\"true\">\n            <span class=\"totp-sec\">{{ totpSec }}</span>\n            <svg>\n              <g>\n                <circle\n                  class=\"totp-circle inner\"\n                  r=\"12.6\"\n                  cy=\"16\"\n                  cx=\"16\"\n                  [ngStyle]=\"{ 'stroke-dashoffset.px': totpDash }\"\n                ></circle>\n                <circle class=\"totp-circle outer\" r=\"14\" cy=\"16\" cx=\"16\"></circle>\n              </g>\n            </svg>\n          </span>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              title=\"{{ 'copyVerificationCode' | i18n }}\"\n              (click)=\"copy(totpCode, 'verificationCodeTotp', 'TOTP')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n              <span class=\"sr-only\">{{ \"copyValue\" | i18n }}</span>\n              <span\n                class=\"sr-only exists-only-on-parent-focus\"\n                aria-live=\"polite\"\n                aria-atomic=\"true\"\n                >{{ totpSec }}</span\n              >\n            </button>\n          </div>\n        </div>\n\n        <div class=\"box-content-row box-content-row-flex totp\" *ngIf=\"showPremiumRequiredTotp\">\n          <div class=\"row-main\">\n            <span class=\"row-label\">{{ \"verificationCodeTotp\" | i18n }}</span>\n            <span class=\"row-label\">\n              <a routerLink=\"/premium\">\n                {{ \"premiumSubcriptionRequired\" | i18n }}\n              </a>\n            </span>\n          </div>\n        </div>\n      </div>\n      <!-- Card -->\n      <div *ngIf=\"cipher.card\">\n        <div class=\"box-content-row\" *ngIf=\"cipher.card.cardholderName\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.card.cardholderName)\"\n            >{{ \"cardholderName\" | i18n }}</span\n          >\n          {{ cipher.card.cardholderName }}\n        </div>\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.card.number\">\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.card.number)\"\n              >{{ \"number\" | i18n }}</span\n            >\n            <span [hidden]=\"showCardNumber\" class=\"monospaced\">{{\n              cipher.card.maskedNumber | creditCardNumber : cipher.card.brand\n            }}</span>\n            <span [hidden]=\"!showCardNumber\" class=\"monospaced\">{{\n              cipher.card.number | creditCardNumber : cipher.card.brand\n            }}</span>\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ 'number' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"toggleCardNumber()\"\n              [attr.aria-pressed]=\"showCardNumber\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showCardNumber, 'bwi-eye-slash': showCardNumber }\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copyNumber' | i18n }}\"\n              (click)=\"copy(cipher.card.number, 'number', 'Card Number')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.card.brand\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.card.brand)\"\n            >{{ \"brand\" | i18n }}</span\n          >\n          {{ cipher.card.brand }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.card.expiration\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.card.expiration)\"\n            >{{ \"expiration\" | i18n }}</span\n          >\n          {{ cipher.card.expiration }}\n        </div>\n        <div class=\"box-content-row box-content-row-flex\" *ngIf=\"cipher.card.code\">\n          <div class=\"row-main\">\n            <span\n              class=\"row-label draggable\"\n              draggable=\"true\"\n              (dragstart)=\"setTextDataOnDrag($event, cipher.card.code)\"\n              >{{ \"securityCode\" | i18n }}</span\n            >\n            <span [hidden]=\"showCardCode\" class=\"monospaced\">{{ cipher.card.maskedCode }}</span>\n            <span [hidden]=\"!showCardCode\" class=\"monospaced\">{{ cipher.card.code }}</span>\n          </div>\n          <div class=\"action-buttons\">\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              attr.aria-label=\"{{ 'toggleVisibility' | i18n }} {{ 'securityCode' | i18n }}\"\n              appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n              (click)=\"toggleCardCode()\"\n              [attr.aria-pressed]=\"showCardCode\"\n            >\n              <i\n                class=\"bwi bwi-lg\"\n                aria-hidden=\"true\"\n                [ngClass]=\"{ 'bwi-eye': !showCardCode, 'bwi-eye-slash': showCardCode }\"\n              ></i>\n            </button>\n            <button\n              type=\"button\"\n              class=\"row-btn\"\n              appStopClick\n              appA11yTitle=\"{{ 'copySecurityCode' | i18n }}\"\n              (click)=\"copy(cipher.card.code, 'securityCode', 'Security Code')\"\n            >\n              <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      <!-- Identity -->\n      <div *ngIf=\"cipher.identity\">\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.fullName\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.fullName)\"\n            >{{ \"identityName\" | i18n }}</span\n          >\n          {{ cipher.identity.fullName }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.username\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.username)\"\n            >{{ \"username\" | i18n }}</span\n          >\n          {{ cipher.identity.username }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.company\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.company)\"\n            >{{ \"company\" | i18n }}</span\n          >\n          {{ cipher.identity.company }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.ssn\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.ssn)\"\n            >{{ \"ssn\" | i18n }}</span\n          >\n          {{ cipher.identity.ssn }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.passportNumber\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.passportNumber)\"\n            >{{ \"passportNumber\" | i18n }}</span\n          >\n          {{ cipher.identity.passportNumber }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.licenseNumber\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.licenseNumber)\"\n            >{{ \"licenseNumber\" | i18n }}</span\n          >\n          {{ cipher.identity.licenseNumber }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.email\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.email)\"\n            >{{ \"email\" | i18n }}</span\n          >\n          {{ cipher.identity.email }}\n        </div>\n        <div class=\"box-content-row\" *ngIf=\"cipher.identity.phone\">\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, cipher.identity.phone)\"\n            >{{ \"phone\" | i18n }}</span\n          >\n          {{ cipher.identity.phone }}\n        </div>\n        <div\n          class=\"box-content-row\"\n          *ngIf=\"cipher.identity.address1 || cipher.identity.city || cipher.identity.country\"\n        >\n          <span\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"\n              setTextDataOnDrag(\n                $event,\n                (cipher.identity.address1 ? cipher.identity.address1 + '\\n' : '') +\n                  (cipher.identity.address2 ? cipher.identity.address2 + '\\n' : '') +\n                  (cipher.identity.address3 ? cipher.identity.address3 + '\\n' : '') +\n                  (cipher.identity.fullAddressPart2\n                    ? cipher.identity.fullAddressPart2 + '\\n'\n                    : '') +\n                  (cipher.identity.country ? cipher.identity.country : '')\n              )\n            \"\n            >{{ \"address\" | i18n }}</span\n          >\n          <div *ngIf=\"cipher.identity.address1\">{{ cipher.identity.address1 }}</div>\n          <div *ngIf=\"cipher.identity.address2\">{{ cipher.identity.address2 }}</div>\n          <div *ngIf=\"cipher.identity.address3\">{{ cipher.identity.address3 }}</div>\n          <div *ngIf=\"cipher.identity.fullAddressPart2\">{{ cipher.identity.fullAddressPart2 }}</div>\n          <div *ngIf=\"cipher.identity.country\">{{ cipher.identity.country }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.login && cipher.login.hasUris\">\n    <div class=\"box-content\">\n      <div\n        class=\"box-content-row box-content-row-flex\"\n        *ngFor=\"let u of cipher.login.uris; let i = index\"\n      >\n        <div class=\"row-main\">\n          <label\n            for=\"hostOrUri{{ i }}\"\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, u.uri)\"\n            *ngIf=\"!u.isWebsite\"\n            >{{ \"uri\" | i18n }}</label\n          >\n          <label\n            for=\"hostOrUri{{ i }}\"\n            class=\"row-label draggable\"\n            draggable=\"true\"\n            (dragstart)=\"setTextDataOnDrag($event, u.uri)\"\n            *ngIf=\"u.isWebsite\"\n            >{{ \"website\" | i18n }}</label\n          >\n          <span title=\"{{ u.uri }}\">\n            <input\n              id=\"hostOrUri{{ i }}\"\n              type=\"text\"\n              [value]=\"u.hostOrUri\"\n              readonly\n              aria-readonly=\"true\"\n            />\n          </span>\n        </div>\n        <div class=\"action-buttons\">\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            attr.aria-label=\"{{ 'launch' | i18n }} {{ u.uri }}\"\n            appA11yTitle=\"{{ 'launch' | i18n }}\"\n            *ngIf=\"u.canLaunch\"\n            (click)=\"launch(u)\"\n          >\n            <i class=\"bwi bwi-lg bwi-share-square\" aria-hidden=\"true\"></i>\n          </button>\n          <button\n            type=\"button\"\n            class=\"row-btn\"\n            appStopClick\n            attr.aria-label=\"{{ 'copyUri' | i18n }} {{ u.uri }}\"\n            appA11yTitle=\"{{ 'copyUri' | i18n }}\"\n            (click)=\"copy(u.uri, u.isWebsite ? 'website' : 'uri', 'URI')\"\n          >\n            <i class=\"bwi bwi-lg bwi-clone\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.folderId && folder\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\">\n        <label\n          for=\"folderName\"\n          class=\"draggable\"\n          draggable=\"true\"\n          (dragstart)=\"setTextDataOnDrag($event, folder.name)\"\n          >{{ \"folder\" | i18n }}</label\n        >\n        <input id=\"folderName\" type=\"text\" name=\"folderName\" [value]=\"folder.name\" readonly />\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.notes\">\n    <h2 class=\"box-header\">\n      <label\n        for=\"notes\"\n        class=\"draggable\"\n        draggable=\"true\"\n        (dragstart)=\"setTextDataOnDrag($event, cipher.notes)\"\n        >{{ \"notes\" | i18n }}</label\n      >\n    </h2>\n    <div class=\"box-content\">\n      <div class=\"box-content-row\">\n        <textarea\n          id=\"notes\"\n          [value]=\"cipher.notes\"\n          rows=\"6\"\n          readonly\n          aria-readonly=\"true\"\n        ></textarea>\n      </div>\n    </div>\n  </div>\n  <div class=\"box\" *ngIf=\"cipher.hasFields\">\n    <app-vault-view-custom-fields\n      [cipher]=\"cipher\"\n      [promptPassword]=\"promptPassword.bind(this)\"\n      [copy]=\"copy.bind(this)\"\n    ></app-vault-view-custom-fields>\n  </div>\n  <div\n    class=\"box\"\n    *ngIf=\"cipher.hasAttachments && (canAccessPremium || cipher.organizationId) && showAttachments\"\n  >\n    <h2 class=\"box-header\">\n      {{ \"attachments\" | i18n }}\n    </h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        *ngFor=\"let attachment of cipher.attachments\"\n        appStopClick\n        (click)=\"downloadAttachment(attachment)\"\n      >\n        <span class=\"row-main\">{{ attachment.fileName }}</span>\n        <small class=\"row-sub-label\">{{ attachment.sizeName }}</small>\n        <i\n          class=\"bwi bwi-download bwi-fw row-sub-icon\"\n          *ngIf=\"!$any(attachment).downloading\"\n          aria-hidden=\"true\"\n        ></i>\n        <i\n          class=\"bwi bwi-spinner bwi-fw bwi-spin row-sub-icon\"\n          *ngIf=\"$any(attachment).downloading\"\n          aria-hidden=\"true\"\n        ></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"fillCipher()\"\n        *ngIf=\"cipher.type !== cipherType.SecureNote && !cipher.isDeleted && !inPopout\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-pencil-square bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"autoFill\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"fillCipherAndSave()\"\n        *ngIf=\"cipher.type === cipherType.Login && !cipher.isDeleted && !inPopout\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-bookmark bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"autoFillAndSave\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"clone()\"\n        *ngIf=\"!cipher.organizationId && !cipher.isDeleted\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-files bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"cloneItem\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"share()\"\n        *ngIf=\"!cipher.organizationId\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-arrow-circle-right bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"moveToOrganization\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"restore()\"\n        *ngIf=\"cipher.isDeleted\"\n      >\n        <div class=\"row-main text-primary\">\n          <div class=\"icon text-primary\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-undo bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ \"restoreItem\" | i18n }}</span>\n        </div>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row\"\n        appStopClick\n        (click)=\"delete()\"\n        *ngIf=\"cipher.edit\"\n      >\n        <div class=\"row-main text-danger\">\n          <div class=\"icon text-danger\" aria-hidden=\"true\">\n            <i class=\"bwi bwi-trash bwi-lg bwi-fw\"></i>\n          </div>\n          <span>{{ (cipher.isDeleted ? \"permanentlyDeleteItem\" : \"deleteItem\") | i18n }}</span>\n        </div>\n      </button>\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-footer\">\n      <div>\n        <b class=\"font-weight-semibold\">{{ \"dateUpdated\" | i18n }}:</b>\n        {{ cipher.revisionDate | date : \"medium\" }}\n      </div>\n      <div *ngIf=\"cipher.creationDate\">\n        <b class=\"font-weight-semibold\">{{ \"dateCreated\" | i18n }}:</b>\n        {{ cipher.creationDate | date : \"medium\" }}\n      </div>\n      <div *ngIf=\"cipher.passwordRevisionDisplayDate\">\n        <b class=\"font-weight-semibold\">{{ \"datePasswordUpdated\" | i18n }}:</b>\n        {{ cipher.passwordRevisionDisplayDate | date : \"medium\" }}\n      </div>\n      <div *ngIf=\"cipher.hasPasswordHistory\">\n        <b class=\"font-weight-semibold\">{{ \"passwordHistory\" | i18n }}:</b>\n        <button\n          routerLink=\"/cipher-password-history\"\n          [queryParams]=\"{ cipherId: cipher.id }\"\n          appStopClick\n          title=\"{{ 'passwordHistory' | i18n }}\"\n        >\n          {{ cipher.passwordHistory.length }}\n        </button>\n      </div>\n    </div>\n  </div>\n</main>\n","import { Location } from \"@angular/common\";\nimport { ChangeDetectorRef, Component, NgZone } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { ViewComponent as BaseViewComponent } from \"@bitwarden/angular/vault/components/view.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { TokenService } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { Cipher } from \"@bitwarden/common/vault/models/domain/cipher\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\n\nimport { AutofillService } from \"../../../../autofill/services/abstractions/autofill.service\";\nimport { BrowserApi } from \"../../../../browser/browserApi\";\nimport { PopupUtilsService } from \"../../../../popup/services/popup-utils.service\";\n\nconst BroadcasterSubscriptionId = \"ChildViewComponent\";\n\n@Component({\n  selector: \"app-vault-view\",\n  templateUrl: \"view.component.html\",\n})\nexport class ViewComponent extends BaseViewComponent {\n  showAttachments = true;\n  pageDetails: any[] = [];\n  tab: any;\n  loadPageDetailsTimeout: number;\n  inPopout = false;\n  cipherType = CipherType;\n\n  constructor(\n    cipherService: CipherService,\n    folderService: FolderService,\n    totpService: TotpService,\n    tokenService: TokenService,\n    i18nService: I18nService,\n    cryptoService: CryptoService,\n    platformUtilsService: PlatformUtilsService,\n    auditService: AuditService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private location: Location,\n    broadcasterService: BroadcasterService,\n    ngZone: NgZone,\n    changeDetectorRef: ChangeDetectorRef,\n    stateService: StateService,\n    eventCollectionService: EventCollectionService,\n    private autofillService: AutofillService,\n    private messagingService: MessagingService,\n    private popupUtilsService: PopupUtilsService,\n    apiService: ApiService,\n    passwordRepromptService: PasswordRepromptService,\n    logService: LogService,\n    fileDownloadService: FileDownloadService\n  ) {\n    super(\n      cipherService,\n      folderService,\n      totpService,\n      tokenService,\n      i18nService,\n      cryptoService,\n      platformUtilsService,\n      auditService,\n      window,\n      broadcasterService,\n      ngZone,\n      changeDetectorRef,\n      eventCollectionService,\n      apiService,\n      passwordRepromptService,\n      logService,\n      stateService,\n      fileDownloadService\n    );\n  }\n\n  ngOnInit() {\n    this.inPopout = this.popupUtilsService.inPopout(window);\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.cipherId) {\n        this.cipherId = params.cipherId;\n      } else {\n        this.close();\n      }\n\n      await this.load();\n    });\n\n    super.ngOnInit();\n\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"collectPageDetailsResponse\":\n            if (message.sender === BroadcasterSubscriptionId) {\n              this.pageDetails.push({\n                frameId: message.webExtSender.frameId,\n                tab: message.tab,\n                details: message.details,\n              });\n            }\n            break;\n          case \"tabChanged\":\n          case \"windowChanged\":\n            if (this.loadPageDetailsTimeout != null) {\n              window.clearTimeout(this.loadPageDetailsTimeout);\n            }\n            this.loadPageDetailsTimeout = window.setTimeout(() => this.loadPageDetails(), 500);\n            break;\n          default:\n            break;\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n  }\n\n  async load() {\n    await super.load();\n    await this.loadPageDetails();\n  }\n\n  async edit() {\n    if (this.cipher.isDeleted) {\n      return false;\n    }\n    if (!(await super.edit())) {\n      return false;\n    }\n\n    this.router.navigate([\"/edit-cipher\"], { queryParams: { cipherId: this.cipher.id } });\n    return true;\n  }\n\n  async clone() {\n    if (this.cipher.isDeleted) {\n      return false;\n    }\n\n    if (!(await super.clone())) {\n      return false;\n    }\n\n    this.router.navigate([\"/clone-cipher\"], {\n      queryParams: {\n        cloneMode: true,\n        cipherId: this.cipher.id,\n      },\n    });\n    return true;\n  }\n\n  async share() {\n    if (!(await super.share())) {\n      return false;\n    }\n\n    if (this.cipher.organizationId == null) {\n      this.router.navigate([\"/share-cipher\"], {\n        replaceUrl: true,\n        queryParams: { cipherId: this.cipher.id },\n      });\n    }\n    return true;\n  }\n\n  async fillCipher() {\n    const didAutofill = await this.doAutofill();\n    if (didAutofill) {\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"autoFillSuccess\"));\n    }\n  }\n\n  async fillCipherAndSave() {\n    const didAutofill = await this.doAutofill();\n\n    if (didAutofill) {\n      if (this.tab == null) {\n        throw new Error(\"No tab found.\");\n      }\n\n      if (this.cipher.login.uris == null) {\n        this.cipher.login.uris = [];\n      } else {\n        if (this.cipher.login.uris.some((uri) => uri.uri === this.tab.url)) {\n          this.platformUtilsService.showToast(\n            \"success\",\n            null,\n            this.i18nService.t(\"autoFillSuccessAndSavedUri\")\n          );\n          return;\n        }\n      }\n\n      const loginUri = new LoginUriView();\n      loginUri.uri = this.tab.url;\n      this.cipher.login.uris.push(loginUri);\n\n      try {\n        const cipher: Cipher = await this.cipherService.encrypt(this.cipher);\n        await this.cipherService.updateWithServer(cipher);\n        this.platformUtilsService.showToast(\n          \"success\",\n          null,\n          this.i18nService.t(\"autoFillSuccessAndSavedUri\")\n        );\n        this.messagingService.send(\"editedCipher\");\n      } catch {\n        this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"unexpectedError\"));\n      }\n    }\n  }\n\n  async restore() {\n    if (!this.cipher.isDeleted) {\n      return false;\n    }\n    if (await super.restore()) {\n      this.close();\n      return true;\n    }\n    return false;\n  }\n\n  async delete() {\n    if (await super.delete()) {\n      this.messagingService.send(\"deletedCipher\");\n      this.close();\n      return true;\n    }\n    return false;\n  }\n\n  close() {\n    this.location.back();\n  }\n\n  private async loadPageDetails() {\n    this.pageDetails = [];\n    this.tab = await BrowserApi.getTabFromCurrentWindow();\n    if (this.tab == null) {\n      return;\n    }\n    BrowserApi.tabSendMessage(this.tab, {\n      command: \"collectPageDetails\",\n      tab: this.tab,\n      sender: BroadcasterSubscriptionId,\n    });\n  }\n\n  private async doAutofill() {\n    if (!(await this.promptPassword())) {\n      return false;\n    }\n\n    if (this.pageDetails == null || this.pageDetails.length === 0) {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n      return false;\n    }\n\n    try {\n      this.totpCode = await this.autofillService.doAutoFill({\n        tab: this.tab,\n        cipher: this.cipher,\n        pageDetails: this.pageDetails,\n        doc: window.document,\n        fillNewPassword: true,\n      });\n      if (this.totpCode != null) {\n        this.platformUtilsService.copyToClipboard(this.totpCode, { window: window });\n      }\n    } catch {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"autofillError\"));\n      this.changeDetectorRef.detectChanges();\n      return false;\n    }\n\n    return true;\n  }\n}\n","import { Injectable, OnDestroy } from \"@angular/core\";\nimport { CanActivate, NavigationEnd, NavigationStart, Router } from \"@angular/router\";\nimport { Subscription } from \"rxjs\";\nimport { filter, pairwise } from \"rxjs/operators\";\n\n@Injectable()\nexport class DebounceNavigationService implements CanActivate, OnDestroy {\n  navigationStartSub: Subscription;\n  navigationSuccessSub: Subscription;\n\n  private lastNavigation: NavigationStart;\n  private thisNavigation: NavigationStart;\n  private lastNavigationSuccessId: number;\n\n  constructor(private router: Router) {\n    this.navigationStartSub = this.router.events\n      .pipe(\n        filter((event) => event instanceof NavigationStart),\n        pairwise()\n      )\n      .subscribe(\n        (events: [NavigationStart, NavigationStart]) =>\n          ([this.lastNavigation, this.thisNavigation] = events)\n      );\n\n    this.navigationSuccessSub = this.router.events\n      .pipe(filter((event) => event instanceof NavigationEnd))\n      .subscribe((event: NavigationEnd) => (this.lastNavigationSuccessId = event.id));\n  }\n\n  async canActivate() {\n    return !(\n      this.thisNavigation?.navigationTrigger === \"hashchange\" &&\n      this.lastNavigation.navigationTrigger === \"popstate\" &&\n      this.lastNavigationSuccessId === this.lastNavigation.id &&\n      this.lastNavigation.url === this.thisNavigation?.url\n    );\n  }\n\n  ngOnDestroy() {\n    if (this.navigationStartSub != null) {\n      this.navigationStartSub.unsubscribe();\n    }\n\n    if (this.navigationSuccessSub != null) {\n      this.navigationSuccessSub.unsubscribe();\n    }\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"autofill\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n        <label for=\"autofill\">{{ \"enableAutoFillOnPageLoad\" | i18n }}</label>\n        <input\n          id=\"autofill\"\n          type=\"checkbox\"\n          aria-describedby=\"autofillHelp\"\n          (change)=\"updateAutoFillOnPageLoad()\"\n          [(ngModel)]=\"enableAutoFillOnPageLoad\"\n        />\n      </div>\n    </div>\n    <div id=\"autofillHelp\" class=\"box-footer\">\n      {{ \"enableAutoFillOnPageLoadDesc\" | i18n }}\n      <b>{{ \"warning\" | i18n }}</b\n      >: {{ \"experimentalFeature\" | i18n }}\n      <a (click)=\"AboutAutofill()\">{{ \"learnMoreAboutAutofill\" | i18n }}</a>\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" appBoxRow>\n        <label for=\"defaultAutofill\">{{ \"defaultAutoFillOnPageLoad\" | i18n }}</label>\n        <select\n          id=\"defaultAutofill\"\n          name=\"DefaultAutofill\"\n          aria-describedby=\"defaultAutofillHelp\"\n          [(ngModel)]=\"autoFillOnPageLoadDefault\"\n          (change)=\"updateAutoFillOnPageLoadDefault()\"\n          [disabled]=\"!enableAutoFillOnPageLoad\"\n        >\n          <option *ngFor=\"let o of autoFillOnPageLoadOptions\" [ngValue]=\"o.value\">\n            {{ o.name }}\n          </option>\n        </select>\n      </div>\n    </div>\n    <div id=\"defaultAutofillHelp\" class=\"box-footer\">\n      {{ \"defaultAutoFillOnPageLoadDesc\" | i18n }}\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <div class=\"box-content-row\" appBoxRow>\n        <label for=\"defaultUriMatch\">{{ \"defaultUriMatchDetection\" | i18n }}</label>\n        <select\n          id=\"defaultUriMatch\"\n          name=\"DefaultUriMatch\"\n          aria-describedby=\"defaultUriMatchHelp\"\n          [(ngModel)]=\"defaultUriMatch\"\n          (change)=\"saveDefaultUriMatch()\"\n        >\n          <option *ngFor=\"let o of uriMatchOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n        </select>\n      </div>\n    </div>\n    <div id=\"defaultUriMatchHelp\" class=\"box-footer\">\n      {{ \"defaultUriMatchDetectionDesc\" | i18n }}\n    </div>\n  </div>\n  <div class=\"box\">\n    <div class=\"box-content\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-link box-content-row-flex\"\n        (click)=\"commandSettings()\"\n      >\n        <div class=\"row-main\">{{ \"autofillShortcut\" | i18n }}</div>\n        <i class=\"bwi bwi-external-link bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n    <div id=\"autofillKeyboardHelp\" class=\"box-footer\">\n      {{ autofillKeyboardHelperText }}\n    </div>\n  </div>\n</main>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { UriMatchType } from \"@bitwarden/common/enums\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\n@Component({\n  selector: \"app-autofill\",\n  templateUrl: \"autofill.component.html\",\n})\nexport class AutofillComponent implements OnInit {\n  enableAutoFillOnPageLoad = false;\n  autoFillOnPageLoadDefault = false;\n  autoFillOnPageLoadOptions: any[];\n  defaultUriMatch = UriMatchType.Domain;\n  uriMatchOptions: any[];\n  autofillKeyboardHelperText: string;\n\n  constructor(\n    private stateService: StateService,\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService\n  ) {\n    this.autoFillOnPageLoadOptions = [\n      { name: i18nService.t(\"autoFillOnPageLoadYes\"), value: true },\n      { name: i18nService.t(\"autoFillOnPageLoadNo\"), value: false },\n    ];\n    this.uriMatchOptions = [\n      { name: i18nService.t(\"baseDomain\"), value: UriMatchType.Domain },\n      { name: i18nService.t(\"host\"), value: UriMatchType.Host },\n      { name: i18nService.t(\"startsWith\"), value: UriMatchType.StartsWith },\n      { name: i18nService.t(\"regEx\"), value: UriMatchType.RegularExpression },\n      { name: i18nService.t(\"exact\"), value: UriMatchType.Exact },\n      { name: i18nService.t(\"never\"), value: UriMatchType.Never },\n    ];\n  }\n\n  async ngOnInit() {\n    this.enableAutoFillOnPageLoad = await this.stateService.getEnableAutoFillOnPageLoad();\n\n    this.autoFillOnPageLoadDefault =\n      (await this.stateService.getAutoFillOnPageLoadDefault()) ?? true;\n\n    const defaultUriMatch = await this.stateService.getDefaultUriMatch();\n    this.defaultUriMatch = defaultUriMatch == null ? UriMatchType.Domain : defaultUriMatch;\n\n    const command = await this.platformUtilsService.getAutofillKeyboardShortcut();\n    await this.setAutofillKeyboardHelperText(command);\n  }\n\n  async updateAutoFillOnPageLoad() {\n    await this.stateService.setEnableAutoFillOnPageLoad(this.enableAutoFillOnPageLoad);\n  }\n\n  async updateAutoFillOnPageLoadDefault() {\n    await this.stateService.setAutoFillOnPageLoadDefault(this.autoFillOnPageLoadDefault);\n  }\n\n  async saveDefaultUriMatch() {\n    await this.stateService.setDefaultUriMatch(this.defaultUriMatch);\n  }\n\n  AboutAutofill() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/help/auto-fill-browser/\");\n  }\n\n  private async setAutofillKeyboardHelperText(command: string) {\n    if (command) {\n      this.autofillKeyboardHelperText = this.i18nService.t(\"autofillShortcutText\", command);\n    } else {\n      this.autofillKeyboardHelperText = this.i18nService.t(\"autofillShortcutNotSet\");\n    }\n  }\n\n  async commandSettings() {\n    if (this.platformUtilsService.isChrome()) {\n      BrowserApi.createNewTab(\"chrome://extensions/shortcuts\");\n    } else if (this.platformUtilsService.isOpera()) {\n      BrowserApi.createNewTab(\"opera://extensions/shortcuts\");\n    } else if (this.platformUtilsService.isEdge()) {\n      BrowserApi.createNewTab(\"edge://extensions/shortcuts\");\n    } else if (this.platformUtilsService.isVivaldi()) {\n      BrowserApi.createNewTab(\"vivaldi://extensions/shortcuts\");\n    } else {\n      BrowserApi.createNewTab(\"https://bitwarden.com/help/keyboard-shortcuts\");\n    }\n  }\n}\n","<form #form (ngSubmit)=\"submit()\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/tabs/settings\">\n        <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"excludedDomains\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\">{{ \"save\" | i18n }}</button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <ng-container *ngIf=\"excludedDomains\">\n          <div\n            class=\"box-content-row box-content-row-multi\"\n            appBoxRow\n            *ngFor=\"let domain of excludedDomains; let i = index; trackBy: trackByFunction\"\n          >\n            <button\n              type=\"button\"\n              appStopClick\n              (click)=\"removeUri(i)\"\n              appA11yTitle=\"{{ 'remove' | i18n }}\"\n            >\n              <i class=\"bwi bwi-minus-circle bwi-lg\" aria-hidden=\"true\"></i>\n            </button>\n            <div class=\"row-main\">\n              <label for=\"excludedDomain{{ i }}\">{{ \"uriPosition\" | i18n : i + 1 }}</label>\n              <input\n                id=\"excludedDomain{{ i }}\"\n                name=\"excludedDomain{{ i }}\"\n                type=\"text\"\n                [(ngModel)]=\"domain.uri\"\n                placeholder=\"{{ 'ex' | i18n }} https://google.com\"\n                inputmode=\"url\"\n                appInputVerbatim\n              />\n              <label for=\"currentUris{{ i }}\" class=\"sr-only\">\n                {{ \"currentUri\" | i18n }} {{ i + 1 }}\n              </label>\n              <select\n                *ngIf=\"currentUris && currentUris.length\"\n                id=\"currentUris{{ i }}\"\n                name=\"currentUris{{ i }}\"\n                [(ngModel)]=\"domain.uri\"\n                [hidden]=\"!domain.showCurrentUris\"\n              >\n                <option [ngValue]=\"null\">-- {{ \"select\" | i18n }} --</option>\n                <option *ngFor=\"let u of currentUris\" [ngValue]=\"u\">{{ u }}</option>\n              </select>\n            </div>\n            <div class=\"action-buttons\">\n              <button\n                type=\"button\"\n                *ngIf=\"currentUris && currentUris.length\"\n                class=\"row-btn\"\n                appStopClick\n                appA11yTitle=\"{{ 'toggleCurrentUris' | i18n }}\"\n                (click)=\"toggleUriInput(domain)\"\n                [attr.aria-pressed]=\"domain.showCurrentUris === true\"\n              >\n                <i aria-hidden=\"true\" class=\"bwi bwi-lg bwi-list\"></i>\n              </button>\n            </div>\n          </div>\n        </ng-container>\n        <button\n          type=\"button\"\n          appStopClick\n          (click)=\"addUri()\"\n          class=\"box-content-row box-content-row-newmulti single-line\"\n        >\n          <i class=\"bwi bwi-plus-circle bwi-fw bwi-lg\" aria-hidden=\"true\"></i> {{ \"newUri\" | i18n }}\n        </button>\n      </div>\n      <div class=\"box-footer\">\n        {{ \"excludedDomainsDesc\" | i18n }}\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component, NgZone, OnDestroy, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\n\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\ninterface ExcludedDomain {\n  uri: string;\n  showCurrentUris: boolean;\n}\n\nconst BroadcasterSubscriptionId = \"excludedDomains\";\n\n@Component({\n  selector: \"app-excluded-domains\",\n  templateUrl: \"excluded-domains.component.html\",\n})\nexport class ExcludedDomainsComponent implements OnInit, OnDestroy {\n  excludedDomains: ExcludedDomain[] = [];\n  existingExcludedDomains: ExcludedDomain[] = [];\n  currentUris: string[];\n  loadCurrentUrisTimeout: number;\n\n  constructor(\n    private stateService: StateService,\n    private i18nService: I18nService,\n    private router: Router,\n    private broadcasterService: BroadcasterService,\n    private ngZone: NgZone,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  async ngOnInit() {\n    const savedDomains = await this.stateService.getNeverDomains();\n    if (savedDomains) {\n      for (const uri of Object.keys(savedDomains)) {\n        this.excludedDomains.push({ uri: uri, showCurrentUris: false });\n        this.existingExcludedDomains.push({ uri: uri, showCurrentUris: false });\n      }\n    }\n\n    await this.loadCurrentUris();\n\n    this.broadcasterService.subscribe(BroadcasterSubscriptionId, (message: any) => {\n      this.ngZone.run(async () => {\n        switch (message.command) {\n          case \"tabChanged\":\n          case \"windowChanged\":\n            if (this.loadCurrentUrisTimeout != null) {\n              window.clearTimeout(this.loadCurrentUrisTimeout);\n            }\n            this.loadCurrentUrisTimeout = window.setTimeout(\n              async () => await this.loadCurrentUris(),\n              500\n            );\n            break;\n          default:\n            break;\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.broadcasterService.unsubscribe(BroadcasterSubscriptionId);\n  }\n\n  async addUri() {\n    this.excludedDomains.push({ uri: \"\", showCurrentUris: false });\n  }\n\n  async removeUri(i: number) {\n    this.excludedDomains.splice(i, 1);\n  }\n\n  async submit() {\n    const savedDomains: { [name: string]: null } = {};\n    const newExcludedDomains = this.getNewlyAddedDomians(this.excludedDomains);\n    for (const domain of this.excludedDomains) {\n      const resp = newExcludedDomains.filter((e) => e.uri === domain.uri);\n      if (resp.length === 0) {\n        savedDomains[domain.uri] = null;\n      } else {\n        if (domain.uri && domain.uri !== \"\") {\n          const validDomain = Utils.getHostname(domain.uri);\n          if (!validDomain) {\n            this.platformUtilsService.showToast(\n              \"error\",\n              null,\n              this.i18nService.t(\"excludedDomainsInvalidDomain\", domain.uri)\n            );\n            return;\n          }\n          savedDomains[validDomain] = null;\n        }\n      }\n    }\n\n    await this.stateService.setNeverDomains(savedDomains);\n    this.router.navigate([\"/tabs/settings\"]);\n  }\n\n  trackByFunction(index: number, item: any) {\n    return index;\n  }\n\n  getNewlyAddedDomians(domain: ExcludedDomain[]): ExcludedDomain[] {\n    const result = this.excludedDomains.filter(\n      (newDomain) =>\n        !this.existingExcludedDomains.some((oldDomain) => newDomain.uri === oldDomain.uri)\n    );\n    return result;\n  }\n\n  toggleUriInput(domain: ExcludedDomain) {\n    domain.showCurrentUris = !domain.showCurrentUris;\n  }\n\n  async loadCurrentUris() {\n    const tabs = await BrowserApi.tabsQuery({ windowType: \"normal\" });\n    if (tabs) {\n      const uriSet = new Set(tabs.map((tab) => Utils.getHostname(tab.url)));\n      uriSet.delete(null);\n      this.currentUris = Array.from(uriSet);\n    }\n  }\n}\n","import { EventView } from \"../models/view/event.view\";\n\nexport const EXPORT_FORMATS = [\"csv\", \"json\", \"encrypted_json\"] as const;\nexport type ExportFormat = (typeof EXPORT_FORMATS)[number];\nexport abstract class ExportService {\n  getExport: (format?: ExportFormat, organizationId?: string) => Promise<string>;\n  getPasswordProtectedExport: (password: string, organizationId?: string) => Promise<string>;\n  getOrganizationExport: (organizationId: string, format?: ExportFormat) => Promise<string>;\n  getEventExport: (events: EventView[]) => Promise<string>;\n  getFileName: (prefix?: string, extension?: string) => string;\n}\n","import { Directive, EventEmitter, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { UntypedFormBuilder, Validators } from \"@angular/forms\";\nimport { merge, takeUntil, Subject, startWith } from \"rxjs\";\n\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { ExportService } from \"@bitwarden/common/abstractions/export.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { UserVerificationService } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { EncryptedExportType, EventType } from \"@bitwarden/common/enums\";\n\n@Directive()\nexport class ExportComponent implements OnInit, OnDestroy {\n  @Output() onSaved = new EventEmitter();\n\n  formPromise: Promise<string>;\n  disabledByPolicy = false;\n\n  exportForm = this.formBuilder.group({\n    format: [\"json\"],\n    secret: [\"\"],\n    filePassword: [\"\", Validators.required],\n    confirmFilePassword: [\"\", Validators.required],\n    fileEncryptionType: [EncryptedExportType.AccountEncrypted],\n  });\n\n  formatOptions = [\n    { name: \".json\", value: \"json\" },\n    { name: \".csv\", value: \"csv\" },\n    { name: \".json (Encrypted)\", value: \"encrypted_json\" },\n  ];\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    protected cryptoService: CryptoService,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected exportService: ExportService,\n    protected eventCollectionService: EventCollectionService,\n    private policyService: PolicyService,\n    protected win: Window,\n    private logService: LogService,\n    private userVerificationService: UserVerificationService,\n    private formBuilder: UntypedFormBuilder,\n    protected fileDownloadService: FileDownloadService\n  ) {}\n\n  async ngOnInit() {\n    this.policyService\n      .policyAppliesToActiveUser$(PolicyType.DisablePersonalVaultExport)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((policyAppliesToActiveUser) => {\n        this.disabledByPolicy = policyAppliesToActiveUser;\n      });\n\n    await this.checkExportDisabled();\n\n    merge(\n      this.exportForm.get(\"format\").valueChanges,\n      this.exportForm.get(\"fileEncryptionType\").valueChanges\n    )\n      .pipe(takeUntil(this.destroy$))\n      .pipe(startWith(0))\n      .subscribe(() => this.adjustValidators());\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n  }\n\n  async checkExportDisabled() {\n    if (this.disabledByPolicy) {\n      this.exportForm.disable();\n    }\n  }\n\n  get encryptedFormat() {\n    return this.format === \"encrypted_json\";\n  }\n\n  protected async doExport() {\n    try {\n      this.formPromise = this.getExportData();\n      const data = await this.formPromise;\n      this.downloadFile(data);\n      this.saved();\n      await this.collectEvent();\n      this.exportForm.get(\"secret\").setValue(\"\");\n      this.exportForm.clearValidators();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  async submit() {\n    if (this.disabledByPolicy) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"personalVaultExportPolicyInEffect\")\n      );\n      return;\n    }\n\n    const acceptedWarning = await this.warningDialog();\n    if (!acceptedWarning) {\n      return;\n    }\n    const secret = this.exportForm.get(\"secret\").value;\n\n    try {\n      await this.userVerificationService.verifyUser(secret);\n    } catch (e) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), e.message);\n      return;\n    }\n\n    this.doExport();\n  }\n\n  async warningDialog() {\n    if (this.encryptedFormat) {\n      return await this.platformUtilsService.showDialog(\n        \"<p>\" +\n          this.i18nService.t(\"encExportKeyWarningDesc\") +\n          \"<p>\" +\n          this.i18nService.t(\"encExportAccountWarningDesc\"),\n        this.i18nService.t(\"confirmVaultExport\"),\n        this.i18nService.t(\"exportVault\"),\n        this.i18nService.t(\"cancel\"),\n        \"warning\",\n        true\n      );\n    } else {\n      return await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"exportWarningDesc\"),\n        this.i18nService.t(\"confirmVaultExport\"),\n        this.i18nService.t(\"exportVault\"),\n        this.i18nService.t(\"cancel\"),\n        \"warning\"\n      );\n    }\n  }\n\n  protected saved() {\n    this.onSaved.emit();\n  }\n\n  protected getExportData() {\n    if (\n      this.format === \"encrypted_json\" &&\n      this.fileEncryptionType === EncryptedExportType.FileEncrypted\n    ) {\n      return this.exportService.getPasswordProtectedExport(this.filePassword);\n    } else {\n      return this.exportService.getExport(this.format, null);\n    }\n  }\n\n  protected getFileName(prefix?: string) {\n    let extension = this.format;\n    if (this.format === \"encrypted_json\") {\n      if (prefix == null) {\n        prefix = \"encrypted\";\n      } else {\n        prefix = \"encrypted_\" + prefix;\n      }\n      extension = \"json\";\n    }\n    return this.exportService.getFileName(prefix, extension);\n  }\n\n  protected async collectEvent(): Promise<void> {\n    await this.eventCollectionService.collect(EventType.User_ClientExportedVault);\n  }\n\n  get format() {\n    return this.exportForm.get(\"format\").value;\n  }\n\n  get filePassword() {\n    return this.exportForm.get(\"filePassword\").value;\n  }\n\n  get confirmFilePassword() {\n    return this.exportForm.get(\"confirmFilePassword\").value;\n  }\n\n  get fileEncryptionType() {\n    return this.exportForm.get(\"fileEncryptionType\").value;\n  }\n\n  adjustValidators() {\n    this.exportForm.get(\"confirmFilePassword\").reset();\n    this.exportForm.get(\"filePassword\").reset();\n\n    if (this.encryptedFormat && this.fileEncryptionType == EncryptedExportType.FileEncrypted) {\n      this.exportForm.controls.filePassword.enable();\n      this.exportForm.controls.confirmFilePassword.enable();\n    } else {\n      this.exportForm.controls.filePassword.disable();\n      this.exportForm.controls.confirmFilePassword.disable();\n    }\n  }\n\n  private downloadFile(csv: string): void {\n    const fileName = this.getFileName();\n    this.fileDownloadService.download({\n      fileName: fileName,\n      blobData: csv,\n      blobOptions: { type: \"text/plain\" },\n    });\n  }\n}\n","<ng-container *ngIf=\"show\">\n  <app-callout type=\"info\" title=\"{{ scopeConfig.title | i18n }}\">\n    {{ scopeConfig.description | i18n : scopeConfig.scopeIdentifier }}\n  </app-callout>\n</ng-container>\n","import { Component, Input, OnInit } from \"@angular/core\";\n\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\n\n@Component({\n  selector: \"app-export-scope-callout\",\n  templateUrl: \"export-scope-callout.component.html\",\n})\nexport class ExportScopeCalloutComponent implements OnInit {\n  @Input() organizationId: string = null;\n\n  show = false;\n  scopeConfig: {\n    title: string;\n    description: string;\n    scopeIdentifier: string;\n  };\n\n  constructor(\n    protected organizationService: OrganizationService,\n    protected stateService: StateService\n  ) {}\n\n  async ngOnInit(): Promise<void> {\n    if (!this.organizationService.hasOrganizations()) {\n      return;\n    }\n    this.scopeConfig =\n      this.organizationId != null\n        ? {\n            title: \"exportingOrganizationVaultTitle\",\n            description: \"exportingOrganizationVaultDescription\",\n            scopeIdentifier: this.organizationService.get(this.organizationId).name,\n          }\n        : {\n            title: \"exportingPersonalVaultTitle\",\n            description: \"exportingPersonalVaultDescription\",\n            scopeIdentifier: await this.stateService.getEmail(),\n          };\n    this.show = true;\n  }\n}\n","import { Directive, OnInit } from \"@angular/core\";\nimport { ControlValueAccessor, FormControl } from \"@angular/forms\";\n\nimport { UserVerificationService } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { VerificationType } from \"@bitwarden/common/auth/enums/verification-type\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { Verification } from \"@bitwarden/common/types/verification\";\n\n/**\n * Used for general-purpose user verification throughout the app.\n * Collects the user's master password, or if they are using Key Connector, prompts for an OTP via email.\n * This is exposed to the parent component via the ControlValueAccessor interface (e.g. bind it to a FormControl).\n * Use UserVerificationService to verify the user's input.\n */\n@Directive({\n  selector: \"app-user-verification\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class UserVerificationComponent implements ControlValueAccessor, OnInit {\n  usesKeyConnector = false;\n  disableRequestOTP = false;\n  sentCode = false;\n\n  secret = new FormControl(\"\");\n\n  private onChange: (value: Verification) => void;\n\n  constructor(\n    private keyConnectorService: KeyConnectorService,\n    private userVerificationService: UserVerificationService\n  ) {}\n\n  async ngOnInit() {\n    this.usesKeyConnector = await this.keyConnectorService.getUsesKeyConnector();\n    this.processChanges(this.secret.value);\n\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil\n    this.secret.valueChanges.subscribe((secret: string) => this.processChanges(secret));\n  }\n\n  async requestOTP() {\n    if (this.usesKeyConnector) {\n      this.disableRequestOTP = true;\n      try {\n        await this.userVerificationService.requestOTP();\n        this.sentCode = true;\n      } finally {\n        this.disableRequestOTP = false;\n      }\n    }\n  }\n\n  writeValue(obj: any): void {\n    this.secret.setValue(obj);\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    // Not implemented\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    this.disableRequestOTP = isDisabled;\n    if (isDisabled) {\n      this.secret.disable();\n    } else {\n      this.secret.enable();\n    }\n  }\n\n  private processChanges(secret: string) {\n    if (this.onChange == null) {\n      return;\n    }\n\n    this.onChange({\n      type: this.usesKeyConnector ? VerificationType.OTP : VerificationType.MasterPassword,\n      secret: Utils.isNullOrWhitespace(secret) ? null : secret,\n    });\n  }\n}\n","<ng-container *ngIf=\"!usesKeyConnector\">\n  <div class=\"box-content-row\" appBoxRow>\n    <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n    <input\n      id=\"masterPassword\"\n      type=\"password\"\n      name=\"MasterPasswordHash\"\n      aria-describedby=\"confirmIdentityHelp\"\n      class=\"form-control\"\n      [formControl]=\"secret\"\n      required\n      appAutofocus\n      appInputVerbatim\n    />\n  </div>\n</ng-container>\n<ng-container *ngIf=\"usesKeyConnector\">\n  <div class=\"box-content-row\" appBoxRow>\n    <label class=\"d-block\">{{ \"sendVerificationCode\" | i18n }}</label>\n    <button\n      type=\"button\"\n      class=\"btn btn-outline-secondary\"\n      (click)=\"requestOTP()\"\n      [disabled]=\"disableRequestOTP\"\n    >\n      {{ \"sendCode\" | i18n }}\n    </button>\n    <span class=\"ml-2 text-success\" role=\"alert\" @sent *ngIf=\"sentCode\">\n      <i class=\"bwi bwi-check-circle\" aria-hidden=\"true\"></i>\n      {{ \"codeSent\" | i18n }}\n    </span>\n  </div>\n\n  <div class=\"box-content-row\" appBoxRow>\n    <label for=\"verificationCode\">{{ \"verificationCode\" | i18n }}</label>\n    <input\n      id=\"verificationCode\"\n      type=\"input\"\n      name=\"verificationCode\"\n      class=\"form-control\"\n      [formControl]=\"secret\"\n      required\n      appAutofocus\n      appInputVerbatim\n    />\n  </div>\n</ng-container>\n","import { animate, style, transition, trigger } from \"@angular/animations\";\nimport { Component } from \"@angular/core\";\nimport { NG_VALUE_ACCESSOR } from \"@angular/forms\";\n\nimport { UserVerificationComponent as BaseComponent } from \"@bitwarden/angular/auth/components/user-verification.component\";\n\n@Component({\n  selector: \"app-user-verification\",\n  templateUrl: \"user-verification.component.html\",\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: UserVerificationComponent,\n    },\n  ],\n  animations: [\n    trigger(\"sent\", [\n      transition(\":enter\", [style({ opacity: 0 }), animate(\"100ms\", style({ opacity: 1 }))]),\n    ]),\n  ],\n})\nexport class UserVerificationComponent extends BaseComponent {}\n","<form (ngSubmit)=\"submit()\" [formGroup]=\"exportForm\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/tabs/settings\">\n        <span class=\"header-icon\" aria-hidden=\"true\"><i class=\"bwi bwi-angle-left\"></i></span>\n        <span>{{ \"back\" | i18n }}</span>\n      </button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ \"exportVault\" | i18n }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"!exportForm.enabled\">\n        {{ \"submit\" | i18n }}\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\">\n    <app-callout type=\"warning\" title=\"{{ 'vaultExportDisabled' | i18n }}\" *ngIf=\"disabledByPolicy\">\n      {{ \"personalVaultExportPolicyInEffect\" | i18n }}\n    </app-callout>\n    <app-export-scope-callout *ngIf=\"!disabledByPolicy\"></app-export-scope-callout>\n\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"format\">{{ \"fileFormat\" | i18n }}</label>\n          <select id=\"format\" name=\"Format\" formControlName=\"format\">\n            <option *ngFor=\"let f of formatOptions\" [value]=\"f.value\">{{ f.name }}</option>\n          </select>\n        </div>\n        <app-user-verification ngDefaultControl formControlName=\"secret\" name=\"Secret\">\n        </app-user-verification>\n      </div>\n      <div id=\"confirmIdentityHelp\" class=\"box-footer\">\n        <p>{{ \"confirmIdentity\" | i18n }}</p>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { UntypedFormBuilder } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\n\nimport { ExportComponent as BaseExportComponent } from \"@bitwarden/angular/components/export.component\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { ExportService } from \"@bitwarden/common/abstractions/export.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { UserVerificationService } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\n\n@Component({\n  selector: \"app-export\",\n  templateUrl: \"export.component.html\",\n})\nexport class ExportComponent extends BaseExportComponent {\n  constructor(\n    cryptoService: CryptoService,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    exportService: ExportService,\n    eventCollectionService: EventCollectionService,\n    policyService: PolicyService,\n    private router: Router,\n    logService: LogService,\n    userVerificationService: UserVerificationService,\n    formBuilder: UntypedFormBuilder,\n    fileDownloadService: FileDownloadService\n  ) {\n    super(\n      cryptoService,\n      i18nService,\n      platformUtilsService,\n      exportService,\n      eventCollectionService,\n      policyService,\n      window,\n      logService,\n      userVerificationService,\n      formBuilder,\n      fileDownloadService\n    );\n  }\n\n  protected saved() {\n    super.saved();\n    this.router.navigate([\"/tabs/settings\"]);\n  }\n}\n","import { Folder } from \"../../models/domain/folder\";\nimport { FolderResponse } from \"../../models/response/folder.response\";\n\nexport class FolderApiServiceAbstraction {\n  save: (folder: Folder) => Promise<any>;\n  delete: (id: string) => Promise<any>;\n  get: (id: string) => Promise<FolderResponse>;\n}\n","import { Directive, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\n@Directive()\nexport class FolderAddEditComponent implements OnInit {\n  @Input() folderId: string;\n  @Output() onSavedFolder = new EventEmitter<FolderView>();\n  @Output() onDeletedFolder = new EventEmitter<FolderView>();\n\n  editMode = false;\n  folder: FolderView = new FolderView();\n  title: string;\n  formPromise: Promise<any>;\n  deletePromise: Promise<any>;\n  protected componentName = \"\";\n\n  constructor(\n    protected folderService: FolderService,\n    protected folderApiService: FolderApiServiceAbstraction,\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    private logService: LogService\n  ) {}\n\n  async ngOnInit() {\n    await this.init();\n  }\n\n  async submit(): Promise<boolean> {\n    if (this.folder.name == null || this.folder.name === \"\") {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"nameRequired\")\n      );\n      return false;\n    }\n\n    try {\n      const folder = await this.folderService.encrypt(this.folder);\n      this.formPromise = this.folderApiService.save(folder);\n      await this.formPromise;\n      this.platformUtilsService.showToast(\n        \"success\",\n        null,\n        this.i18nService.t(this.editMode ? \"editedFolder\" : \"addedFolder\")\n      );\n      this.onSavedFolder.emit(this.folder);\n      return true;\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"deleteFolderConfirmation\"),\n      this.i18nService.t(\"deleteFolder\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"no\"),\n      \"warning\",\n      false,\n      this.componentName != \"\" ? this.componentName + \" .modal-content\" : null\n    );\n    if (!confirmed) {\n      return false;\n    }\n\n    try {\n      this.deletePromise = this.folderApiService.delete(this.folder.id);\n      await this.deletePromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"deletedFolder\"));\n      this.onDeletedFolder.emit(this.folder);\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    return true;\n  }\n\n  protected async init() {\n    this.editMode = this.folderId != null;\n\n    if (this.editMode) {\n      this.editMode = true;\n      this.title = this.i18nService.t(\"editFolder\");\n      const folder = await this.folderService.get(this.folderId);\n      this.folder = await folder.decrypt();\n    } else {\n      this.title = this.i18nService.t(\"addFolder\");\n    }\n  }\n}\n","<form #form (ngSubmit)=\"submit()\" [appApiAction]=\"formPromise\">\n  <header>\n    <div class=\"left\">\n      <button type=\"button\" routerLink=\"/folders\">{{ \"cancel\" | i18n }}</button>\n    </div>\n    <h1 class=\"center\">\n      <span class=\"title\">{{ title }}</span>\n    </h1>\n    <div class=\"right\">\n      <button type=\"submit\" [disabled]=\"form.loading\">\n        <span [hidden]=\"form.loading\">{{ \"save\" | i18n }}</span>\n        <i class=\"bwi bwi-spinner bwi-lg bwi-spin\" [hidden]=\"!form.loading\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </header>\n  <main tabindex=\"-1\" *ngIf=\"folder\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"name\">{{ \"name\" | i18n }}</label>\n          <input\n            id=\"name\"\n            type=\"text\"\n            name=\"Name\"\n            [(ngModel)]=\"folder.name\"\n            [appAutofocus]=\"!editMode\"\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"box list\" *ngIf=\"editMode\">\n      <div class=\"box-content single-line\">\n        <button\n          type=\"button\"\n          class=\"box-content-row\"\n          appStopClick\n          (click)=\"delete()\"\n          [appApiAction]=\"deletePromise\"\n          #deleteBtn\n        >\n          <div class=\"row-main text-danger\">\n            <div class=\"icon text-danger\" aria-hidden=\"true\">\n              <i class=\"bwi bwi-trash bwi-lg bwi-fw\" [hidden]=\"$any(deleteBtn).loading\"></i>\n              <i\n                class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n                [hidden]=\"!$any(deleteBtn).loading\"\n              ></i>\n            </div>\n            <span>{{ \"deleteFolder\" | i18n }}</span>\n          </div>\n        </button>\n      </div>\n    </div>\n  </main>\n</form>\n","import { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { first } from \"rxjs/operators\";\n\nimport { FolderAddEditComponent as BaseFolderAddEditComponent } from \"@bitwarden/angular/vault/components/folder-add-edit.component\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\n\n@Component({\n  selector: \"app-folder-add-edit\",\n  templateUrl: \"folder-add-edit.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class FolderAddEditComponent extends BaseFolderAddEditComponent {\n  constructor(\n    folderService: FolderService,\n    folderApiService: FolderApiServiceAbstraction,\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    private router: Router,\n    private route: ActivatedRoute,\n    logService: LogService\n  ) {\n    super(folderService, folderApiService, i18nService, platformUtilsService, logService);\n  }\n\n  async ngOnInit() {\n    // eslint-disable-next-line rxjs-angular/prefer-takeuntil, rxjs/no-async-subscribe\n    this.route.queryParams.pipe(first()).subscribe(async (params) => {\n      if (params.folderId) {\n        this.folderId = params.folderId;\n      }\n      await this.init();\n    });\n  }\n\n  async submit(): Promise<boolean> {\n    if (await super.submit()) {\n      this.router.navigate([\"/folders\"]);\n      return true;\n    }\n\n    return false;\n  }\n\n  async delete(): Promise<boolean> {\n    const confirmed = await super.delete();\n    if (confirmed) {\n      this.router.navigate([\"/folders\"]);\n    }\n    return confirmed;\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"folders\" | i18n }}</span>\n  </h1>\n  <div class=\"right\">\n    <button type=\"button\" (click)=\"addFolder()\" appA11yTitle=\"{{ 'addFolder' | i18n }}\">\n      <i class=\"bwi bwi-plus bwi-lg bwi-fw\" aria-hidden=\"true\"></i>\n    </button>\n  </div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list full-list\" *ngIf=\"(folders$ | async)?.length\">\n    <div class=\"box-content\">\n      <button\n        type=\"button\"\n        appStopClick\n        (click)=\"folderSelected(f)\"\n        class=\"box-content-row padded\"\n        *ngFor=\"let f of folders$ | async\"\n      >\n        {{ f.name }}\n      </button>\n    </div>\n  </div>\n  <div class=\"no-items\" *ngIf=\"!(folders$ | async)?.length\">\n    <p>{{ \"noFolders\" | i18n }}</p>\n  </div>\n</main>\n","import { Component } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { map, Observable } from \"rxjs\";\n\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\n\n@Component({\n  selector: \"app-folders\",\n  templateUrl: \"folders.component.html\",\n})\nexport class FoldersComponent {\n  folders$: Observable<FolderView[]>;\n\n  constructor(private folderService: FolderService, private router: Router) {\n    this.folders$ = this.folderService.folderViews$.pipe(\n      map((folders) => {\n        if (folders.length > 0) {\n          folders = folders.slice(0, folders.length - 1);\n        }\n\n        return folders;\n      })\n    );\n  }\n\n  folderSelected(folder: FolderView) {\n    this.router.navigate([\"/edit-folder\"], { queryParams: { folderId: folder.id } });\n  }\n\n  addFolder() {\n    this.router.navigate([\"/add-folder\"]);\n  }\n}\n","import { Component } from \"@angular/core\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\n@Component({\n  selector: \"app-help-and-feedback\",\n  templateUrl: \"help-and-feedback.component.html\",\n})\nexport class HelpAndFeedbackComponent {\n  launchHelp() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/help/\");\n  }\n  launchContactForm() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/contact/\");\n  }\n\n  launchForums() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/getinvolved/\");\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"helpFeedback\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box list\">\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"launchHelp()\"\n      >\n        <div class=\"icon\">\n          <i class=\"bwi bwi-shield bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n        </div>\n        <div class=\"row-main\">{{ \"helpCenter\" | i18n }}</div>\n        <i class=\"bwi bwi-external-link bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"launchForums()\"\n      >\n        <div class=\"icon\">\n          <i class=\"bwi bwi-discourse bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n        </div>\n        <div class=\"row-main\">{{ \"communityForums\" | i18n }}</div>\n        <i class=\"bwi bwi-external-link bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"launchContactForm()\"\n      >\n        <div class=\"icon\">\n          <i class=\"bwi bwi-shield bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n        </div>\n        <div class=\"row-main\">{{ \"contactSupport\" | i18n }}</div>\n        <i class=\"bwi bwi-external-link bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n</main>\n","import { Observable } from \"rxjs\";\n\nimport { ThemeType } from \"@bitwarden/common/enums\";\n\nimport { Theme } from \"./theme\";\n\nexport abstract class AbstractThemingService {\n  theme$: Observable<Theme>;\n  monitorThemeChanges: () => Promise<void>;\n  updateSystemTheme: (systemTheme: ThemeType) => void;\n  updateConfiguredTheme: (theme: ThemeType) => Promise<void>;\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"options\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"box\">\n    <h2>\n      <button\n        type=\"button\"\n        class=\"box-header-expandable\"\n        (click)=\"showGeneral = !showGeneral\"\n        [attr.aria-expanded]=\"showGeneral\"\n      >\n        <i *ngIf=\"!showGeneral\" class=\"bwi bwi-angle-right bwi-sm icon\" aria-hidden=\"true\"></i>\n        <i *ngIf=\"showGeneral\" class=\"bwi bwi-angle-down bwi-sm icon\" aria-hidden=\"true\"></i>\n        General\n      </button>\n    </h2>\n  </div>\n  <ng-container *ngIf=\"showGeneral\">\n    <div class=\"box\" *ngIf=\"showClearClipboard\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"clearClipboard\">{{ \"clearClipboard\" | i18n }}</label>\n          <select\n            id=\"clearClipboard\"\n            name=\"ClearClipboard\"\n            aria-describedby=\"clearClipboardHelp\"\n            [(ngModel)]=\"clearClipboard\"\n            (change)=\"saveClearClipboard()\"\n          >\n            <option *ngFor=\"let o of clearClipboardOptions\" [ngValue]=\"o.value\">\n              {{ o.name }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div id=\"clearClipboardHelp\" class=\"box-footer\">{{ \"clearClipboardDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"totp\">{{ \"enableAutoTotpCopy\" | i18n }}</label>\n          <input\n            id=\"totp\"\n            type=\"checkbox\"\n            aria-describedby=\"totpHelp\"\n            (change)=\"updateAutoTotpCopy()\"\n            [(ngModel)]=\"enableAutoTotpCopy\"\n          />\n        </div>\n      </div>\n      <div id=\"totpHelp\" class=\"box-footer\">{{ \"disableAutoTotpCopyDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"addlogin-notification-bar\">{{ \"enableAddLoginNotification\" | i18n }}</label>\n          <input\n            id=\"addlogin-notification-bar\"\n            type=\"checkbox\"\n            aria-describedby=\"addlogin-notification-barHelp\"\n            (change)=\"updateAddLoginNotification()\"\n            [(ngModel)]=\"enableAddLoginNotification\"\n          />\n        </div>\n      </div>\n      <div id=\"addlogin-notification-barHelp\" class=\"box-footer\">\n        {{ \"addLoginNotificationDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"changedpass-notification-bar\">{{\n            \"enableChangedPasswordNotification\" | i18n\n          }}</label>\n          <input\n            id=\"changedpass-notification-bar\"\n            type=\"checkbox\"\n            aria-describedby=\"changedpass-notification-barHelp\"\n            (change)=\"updateChangedPasswordNotification()\"\n            [(ngModel)]=\"enableChangedPasswordNotification\"\n          />\n        </div>\n      </div>\n      <div id=\"changedpass-notification-barHelp\" class=\"box-footer\">\n        {{ \"changedPasswordNotificationDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"context-menu\">{{ \"enableContextMenuItem\" | i18n }}</label>\n          <input\n            id=\"context-menu\"\n            type=\"checkbox\"\n            aria-describedby=\"context-menuHelp\"\n            (change)=\"updateContextMenuItem()\"\n            [(ngModel)]=\"enableContextMenuItem\"\n          />\n        </div>\n      </div>\n      <div id=\"context-menuHelp\" class=\"box-footer\">{{ \"contextMenuItemDesc\" | i18n }}</div>\n    </div>\n  </ng-container>\n  <div class=\"box box-section-divider\">\n    <h2>\n      <button\n        type=\"button\"\n        class=\"box-header-expandable\"\n        (click)=\"showDisplay = !showDisplay\"\n        [attr.aria-expanded]=\"showDisplay\"\n      >\n        <i *ngIf=\"!showDisplay\" class=\"bwi bwi-angle-right bwi-sm icon\" aria-hidden=\"true\"></i>\n        <i *ngIf=\"showDisplay\" class=\"bwi bwi-angle-down bwi-sm icon\" aria-hidden=\"true\"></i>\n        Display\n      </button>\n    </h2>\n  </div>\n  <ng-container *ngIf=\"showDisplay\">\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"showCardsCurrentTab\">{{ \"showCardsCurrentTab\" | i18n }}</label>\n          <input\n            id=\"showCardsCurrentTab\"\n            type=\"checkbox\"\n            aria-describedby=\"showCardsCurrentTabHelp\"\n            (change)=\"updateShowCardsCurrentTab()\"\n            [(ngModel)]=\"showCardsCurrentTab\"\n          />\n        </div>\n      </div>\n      <div id=\"showCardsCurrentTabHelp\" class=\"box-footer\">\n        {{ \"showCardsCurrentTabDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"showIdentitiesCurrentTab\">{{ \"showIdentitiesCurrentTab\" | i18n }}</label>\n          <input\n            id=\"showIdentitiesCurrentTab\"\n            type=\"checkbox\"\n            aria-describedby=\"showIdentitiesCurrentTabHelp\"\n            (change)=\"updateShowIdentitiesCurrentTab()\"\n            [(ngModel)]=\"showIdentitiesCurrentTab\"\n          />\n        </div>\n      </div>\n      <div id=\"showIdentitiesCurrentTabHelp\" class=\"box-footer\">\n        {{ \"showIdentitiesCurrentTabDesc\" | i18n }}\n      </div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"favicon\">{{ \"enableFavicon\" | i18n }}</label>\n          <input\n            id=\"favicon\"\n            type=\"checkbox\"\n            aria-describedby=\"faviconHelp\"\n            (change)=\"updateFavicon()\"\n            [(ngModel)]=\"enableFavicon\"\n          />\n        </div>\n      </div>\n      <div id=\"faviconHelp\" class=\"box-footer\">{{ \"faviconDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n          <label for=\"badge\">{{ \"enableBadgeCounter\" | i18n }}</label>\n          <input\n            id=\"badge\"\n            type=\"checkbox\"\n            aria-describedby=\"badgeHelp\"\n            (change)=\"updateBadgeCounter()\"\n            [(ngModel)]=\"enableBadgeCounter\"\n          />\n        </div>\n      </div>\n      <div id=\"badgeHelp\" class=\"box-footer\">{{ \"badgeCounterDesc\" | i18n }}</div>\n    </div>\n    <div class=\"box\">\n      <div class=\"box-content\">\n        <div class=\"box-content-row\" appBoxRow>\n          <label for=\"theme\">{{ \"theme\" | i18n }}</label>\n          <select\n            id=\"theme\"\n            name=\"Theme\"\n            aria-describedby=\"themeHelp\"\n            [(ngModel)]=\"theme\"\n            (change)=\"saveTheme()\"\n          >\n            <option *ngFor=\"let o of themeOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n          </select>\n        </div>\n      </div>\n      <div id=\"themeHelp\" class=\"box-footer\">{{ \"themeDesc\" | i18n }}</div>\n    </div>\n  </ng-container>\n</main>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { AbstractThemingService } from \"@bitwarden/angular/services/theming/theming.service.abstraction\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { ThemeType, UriMatchType } from \"@bitwarden/common/enums\";\n\n@Component({\n  selector: \"app-options\",\n  templateUrl: \"options.component.html\",\n})\nexport class OptionsComponent implements OnInit {\n  enableFavicon = false;\n  enableBadgeCounter = false;\n  enableAutoFillOnPageLoad = false;\n  autoFillOnPageLoadDefault = false;\n  autoFillOnPageLoadOptions: any[];\n  enableAutoTotpCopy = false; // TODO: Does it matter if this is set to false or true?\n  enableContextMenuItem = false;\n  enableAddLoginNotification = false;\n  enableChangedPasswordNotification = false;\n  showCardsCurrentTab = false;\n  showIdentitiesCurrentTab = false;\n  showClearClipboard = true;\n  theme: ThemeType;\n  themeOptions: any[];\n  defaultUriMatch = UriMatchType.Domain;\n  uriMatchOptions: any[];\n  clearClipboard: number;\n  clearClipboardOptions: any[];\n  showGeneral = true;\n  showAutofill = true;\n  showDisplay = true;\n\n  constructor(\n    private messagingService: MessagingService,\n    private stateService: StateService,\n    private totpService: TotpService,\n    i18nService: I18nService,\n    private themingService: AbstractThemingService\n  ) {\n    this.themeOptions = [\n      { name: i18nService.t(\"default\"), value: ThemeType.System },\n      { name: i18nService.t(\"light\"), value: ThemeType.Light },\n      { name: i18nService.t(\"dark\"), value: ThemeType.Dark },\n      { name: \"Nord\", value: ThemeType.Nord },\n      { name: i18nService.t(\"solarizedDark\"), value: ThemeType.SolarizedDark },\n    ];\n    this.uriMatchOptions = [\n      { name: i18nService.t(\"baseDomain\"), value: UriMatchType.Domain },\n      { name: i18nService.t(\"host\"), value: UriMatchType.Host },\n      { name: i18nService.t(\"startsWith\"), value: UriMatchType.StartsWith },\n      { name: i18nService.t(\"regEx\"), value: UriMatchType.RegularExpression },\n      { name: i18nService.t(\"exact\"), value: UriMatchType.Exact },\n      { name: i18nService.t(\"never\"), value: UriMatchType.Never },\n    ];\n    this.clearClipboardOptions = [\n      { name: i18nService.t(\"never\"), value: null },\n      { name: i18nService.t(\"tenSeconds\"), value: 10 },\n      { name: i18nService.t(\"twentySeconds\"), value: 20 },\n      { name: i18nService.t(\"thirtySeconds\"), value: 30 },\n      { name: i18nService.t(\"oneMinute\"), value: 60 },\n      { name: i18nService.t(\"twoMinutes\"), value: 120 },\n      { name: i18nService.t(\"fiveMinutes\"), value: 300 },\n    ];\n    this.autoFillOnPageLoadOptions = [\n      { name: i18nService.t(\"autoFillOnPageLoadYes\"), value: true },\n      { name: i18nService.t(\"autoFillOnPageLoadNo\"), value: false },\n    ];\n  }\n\n  async ngOnInit() {\n    this.enableAutoFillOnPageLoad = await this.stateService.getEnableAutoFillOnPageLoad();\n\n    this.autoFillOnPageLoadDefault =\n      (await this.stateService.getAutoFillOnPageLoadDefault()) ?? true;\n\n    this.enableAddLoginNotification = !(await this.stateService.getDisableAddLoginNotification());\n\n    this.enableChangedPasswordNotification =\n      !(await this.stateService.getDisableChangedPasswordNotification());\n\n    this.enableContextMenuItem = !(await this.stateService.getDisableContextMenuItem());\n\n    this.showCardsCurrentTab = !(await this.stateService.getDontShowCardsCurrentTab());\n    this.showIdentitiesCurrentTab = !(await this.stateService.getDontShowIdentitiesCurrentTab());\n\n    this.enableAutoTotpCopy = !(await this.stateService.getDisableAutoTotpCopy());\n\n    this.enableFavicon = !(await this.stateService.getDisableFavicon());\n\n    this.enableBadgeCounter = !(await this.stateService.getDisableBadgeCounter());\n\n    this.theme = await this.stateService.getTheme();\n\n    const defaultUriMatch = await this.stateService.getDefaultUriMatch();\n    this.defaultUriMatch = defaultUriMatch == null ? UriMatchType.Domain : defaultUriMatch;\n\n    this.clearClipboard = await this.stateService.getClearClipboard();\n  }\n\n  async updateAddLoginNotification() {\n    await this.stateService.setDisableAddLoginNotification(!this.enableAddLoginNotification);\n  }\n\n  async updateChangedPasswordNotification() {\n    await this.stateService.setDisableChangedPasswordNotification(\n      !this.enableChangedPasswordNotification\n    );\n  }\n\n  async updateContextMenuItem() {\n    await this.stateService.setDisableContextMenuItem(!this.enableContextMenuItem);\n    this.messagingService.send(\"bgUpdateContextMenu\");\n  }\n\n  async updateAutoTotpCopy() {\n    await this.stateService.setDisableAutoTotpCopy(!this.enableAutoTotpCopy);\n  }\n\n  async updateAutoFillOnPageLoad() {\n    await this.stateService.setEnableAutoFillOnPageLoad(this.enableAutoFillOnPageLoad);\n  }\n\n  async updateAutoFillOnPageLoadDefault() {\n    await this.stateService.setAutoFillOnPageLoadDefault(this.autoFillOnPageLoadDefault);\n  }\n\n  async updateFavicon() {\n    await this.stateService.setDisableFavicon(!this.enableFavicon);\n  }\n\n  async updateBadgeCounter() {\n    await this.stateService.setDisableBadgeCounter(!this.enableBadgeCounter);\n    this.messagingService.send(\"bgUpdateContextMenu\");\n  }\n\n  async updateShowCardsCurrentTab() {\n    await this.stateService.setDontShowCardsCurrentTab(!this.showCardsCurrentTab);\n  }\n\n  async updateShowIdentitiesCurrentTab() {\n    await this.stateService.setDontShowIdentitiesCurrentTab(!this.showIdentitiesCurrentTab);\n  }\n\n  async saveTheme() {\n    await this.themingService.updateConfiguredTheme(this.theme);\n  }\n\n  async saveDefaultUriMatch() {\n    await this.stateService.setDefaultUriMatch(this.defaultUriMatch);\n  }\n\n  async saveClearClipboard() {\n    await this.stateService.setClearClipboard(this.clearClipboard);\n  }\n}\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\n\n@Directive()\nexport class PremiumComponent implements OnInit {\n  isPremium = false;\n  price = 10;\n  refreshPromise: Promise<any>;\n\n  constructor(\n    protected i18nService: I18nService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected apiService: ApiService,\n    private logService: LogService,\n    protected stateService: StateService\n  ) {}\n\n  async ngOnInit() {\n    this.isPremium = await this.stateService.getCanAccessPremium();\n  }\n\n  async refresh() {\n    try {\n      this.refreshPromise = this.apiService.refreshIdentityToken();\n      await this.refreshPromise;\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"refreshComplete\"));\n      this.isPremium = await this.stateService.getCanAccessPremium();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  async purchase() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"premiumPurchaseAlert\"),\n      this.i18nService.t(\"premiumPurchase\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      this.platformUtilsService.launchUri(\"https://vault.bitwarden.com/#/?premium=purchase\");\n    }\n  }\n\n  async manage() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"premiumManageAlert\"),\n      this.i18nService.t(\"premiumManage\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      this.platformUtilsService.launchUri(\"https://vault.bitwarden.com/#/?premium=manage\");\n    }\n  }\n}\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" (click)=\"goBack()\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"premiumMembership\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"content\">\n    <ng-container *ngIf=\"!isPremium\">\n      <p class=\"text-center lead\">{{ \"premiumNotCurrentMember\" | i18n }}</p>\n      <p>{{ \"premiumSignUpAndGet\" | i18n }}</p>\n      <ul class=\"bwi-ul\">\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpStorage\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpTwoStep\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpReports\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpTotp\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpSupport\" | i18n }}\n        </li>\n        <li>\n          <i class=\"bwi bwi-li bwi-check text-success\" aria-hidden=\"true\"></i>\n          {{ \"ppremiumSignUpFuture\" | i18n }}\n        </li>\n      </ul>\n      <p class=\"text-center lead\">{{ priceString }}</p>\n      <button type=\"button\" class=\"btn primary block\" (click)=\"purchase()\">\n        <b>{{ \"premiumPurchase\" | i18n }}</b>\n      </button>\n      <button\n        #refreshBtn\n        type=\"button\"\n        (click)=\"refresh()\"\n        [disabled]=\"$any(refreshBtn).loading\"\n        [appApiAction]=\"refreshPromise\"\n        class=\"btn link block\"\n      >\n        <span [hidden]=\"$any(refreshBtn).loading\">{{ \"premiumRefresh\" | i18n }}</span>\n        <i\n          class=\"bwi bwi-spinner bwi-spin bwi-lg bwi-fw\"\n          [hidden]=\"!$any(refreshBtn).loading\"\n          aria-hidden=\"true\"\n        ></i>\n      </button>\n    </ng-container>\n    <ng-container *ngIf=\"isPremium\">\n      <p class=\"text-center lead\">{{ \"premiumCurrentMember\" | i18n }}</p>\n      <p class=\"text-center\">{{ \"premiumCurrentMemberThanks\" | i18n }}</p>\n      <button type=\"button\" class=\"btn block primary\" (click)=\"manage()\">\n        <b>{{ \"premiumManage\" | i18n }}</b>\n      </button>\n    </ng-container>\n  </div>\n</main>\n","import { CurrencyPipe, Location } from \"@angular/common\";\nimport { Component } from \"@angular/core\";\n\nimport { PremiumComponent as BasePremiumComponent } from \"@bitwarden/angular/vault/components/premium.component\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\n\n@Component({\n  selector: \"app-premium\",\n  templateUrl: \"premium.component.html\",\n})\nexport class PremiumComponent extends BasePremiumComponent {\n  priceString: string;\n\n  constructor(\n    i18nService: I18nService,\n    platformUtilsService: PlatformUtilsService,\n    apiService: ApiService,\n    stateService: StateService,\n    logService: LogService,\n    private location: Location,\n    private currencyPipe: CurrencyPipe\n  ) {\n    super(i18nService, platformUtilsService, apiService, logService, stateService);\n\n    // Support old price string. Can be removed in future once all translations are properly updated.\n    const thePrice = this.currencyPipe.transform(this.price, \"$\");\n    this.priceString = i18nService.t(\"premiumPrice\", thePrice);\n    if (this.priceString.indexOf(\"%price%\") > -1) {\n      this.priceString = this.priceString.replace(\"%price%\", thePrice);\n    }\n  }\n\n  goBack() {\n    this.location.back();\n  }\n}\n","import { Observable, Subject } from \"rxjs\";\nimport { first } from \"rxjs/operators\";\n\nexport class ModalRef {\n  onCreated: Observable<HTMLElement>; // Modal added to the DOM.\n  onClose: Observable<any>; // Initiated close.\n  onClosed: Observable<any>; // Modal was closed (Remove element from DOM)\n  onShow: Observable<void>; // Start showing modal\n  onShown: Observable<void>; // Modal is fully visible\n\n  private readonly _onCreated = new Subject<HTMLElement>();\n  private readonly _onClose = new Subject<any>();\n  private readonly _onClosed = new Subject<any>();\n  private readonly _onShow = new Subject<void>();\n  private readonly _onShown = new Subject<void>();\n  private lastResult: any;\n\n  constructor() {\n    this.onCreated = this._onCreated.asObservable();\n    this.onClose = this._onClose.asObservable();\n    this.onClosed = this._onClosed.asObservable();\n    this.onShow = this._onShow.asObservable();\n    this.onShown = this._onShow.asObservable();\n  }\n\n  show() {\n    this._onShow.next();\n  }\n\n  shown() {\n    this._onShown.next();\n  }\n\n  close(result?: any) {\n    this.lastResult = result;\n    this._onClose.next(result);\n  }\n\n  closed() {\n    this._onClosed.next(this.lastResult);\n  }\n\n  created(el: HTMLElement) {\n    this._onCreated.next(el);\n  }\n\n  onClosedPromise(): Promise<any> {\n    return this.onClosed.pipe(first()).toPromise();\n  }\n}\n","import { ConfigurableFocusTrap, ConfigurableFocusTrapFactory } from \"@angular/cdk/a11y\";\nimport {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ComponentRef,\n  ElementRef,\n  OnDestroy,\n  Type,\n  ViewChild,\n  ViewContainerRef,\n} from \"@angular/core\";\n\nimport { ModalService } from \"../../services/modal.service\";\n\nimport { ModalRef } from \"./modal.ref\";\n\n@Component({\n  selector: \"app-modal\",\n  template: \"<ng-template #modalContent></ng-template>\",\n})\nexport class DynamicModalComponent implements AfterViewInit, OnDestroy {\n  componentRef: ComponentRef<any>;\n\n  @ViewChild(\"modalContent\", { read: ViewContainerRef, static: true })\n  modalContentRef: ViewContainerRef;\n\n  childComponentType: Type<any>;\n  setComponentParameters: (component: any) => void;\n\n  private focusTrap: ConfigurableFocusTrap;\n\n  constructor(\n    private modalService: ModalService,\n    private cd: ChangeDetectorRef,\n    private el: ElementRef<HTMLElement>,\n    private focusTrapFactory: ConfigurableFocusTrapFactory,\n    public modalRef: ModalRef\n  ) {}\n\n  ngAfterViewInit() {\n    this.loadChildComponent(this.childComponentType);\n    if (this.setComponentParameters != null) {\n      this.setComponentParameters(this.componentRef.instance);\n    }\n    this.cd.detectChanges();\n\n    this.modalRef.created(this.el.nativeElement);\n    this.focusTrap = this.focusTrapFactory.create(\n      this.el.nativeElement.querySelector(\".modal-dialog\")\n    );\n    if (this.el.nativeElement.querySelector(\"[appAutoFocus]\") == null) {\n      this.focusTrap.focusFirstTabbableElementWhenReady();\n    }\n  }\n\n  loadChildComponent(componentType: Type<any>) {\n    const componentFactory = this.modalService.resolveComponentFactory(componentType);\n\n    this.modalContentRef.clear();\n    this.componentRef = this.modalContentRef.createComponent(componentFactory);\n  }\n\n  ngOnDestroy() {\n    if (this.componentRef) {\n      this.componentRef.destroy();\n    }\n    this.focusTrap.destroy();\n  }\n\n  close() {\n    this.modalRef.close();\n  }\n\n  getFocus() {\n    const autoFocusEl = this.el.nativeElement.querySelector(\"[appAutoFocus]\") as HTMLElement;\n    autoFocusEl?.focus();\n  }\n}\n","import { InjectFlags, InjectOptions, Injector, ProviderToken } from \"@angular/core\";\n\nexport class ModalInjector implements Injector {\n  constructor(private _parentInjector: Injector, private _additionalTokens: WeakMap<any, any>) {}\n\n  get<T>(\n    token: ProviderToken<T>,\n    notFoundValue: undefined,\n    options: InjectOptions & { optional?: false }\n  ): T;\n  get<T>(token: ProviderToken<T>, notFoundValue: null, options: InjectOptions): T;\n  get<T>(token: ProviderToken<T>, notFoundValue?: T, options?: InjectOptions | InjectFlags): T;\n  get<T>(token: ProviderToken<T>, notFoundValue?: T, flags?: InjectFlags): T;\n  get(token: any, notFoundValue?: any): any;\n  get(token: any, notFoundValue?: any, flags?: any): any {\n    return this._additionalTokens.get(token) ?? this._parentInjector.get<any>(token, notFoundValue);\n  }\n}\n","export enum VaultTimeoutAction {\n  Lock = \"lock\",\n  LogOut = \"logOut\",\n}\n","import {\n  ApplicationRef,\n  ComponentFactory,\n  ComponentFactoryResolver,\n  ComponentRef,\n  EmbeddedViewRef,\n  Injectable,\n  Injector,\n  Type,\n  ViewContainerRef,\n} from \"@angular/core\";\nimport { first } from \"rxjs/operators\";\n\nimport { DynamicModalComponent } from \"../components/modal/dynamic-modal.component\";\nimport { ModalInjector } from \"../components/modal/modal-injector\";\nimport { ModalRef } from \"../components/modal/modal.ref\";\n\nexport class ModalConfig<D = any> {\n  data?: D;\n  allowMultipleModals?: boolean;\n  replaceTopModal?: boolean;\n}\n\n@Injectable()\nexport class ModalService {\n  protected modalList: ComponentRef<DynamicModalComponent>[] = [];\n\n  // Lazy loaded modules are not available in componentFactoryResolver,\n  // therefore modules needs to manually initialize their resolvers.\n  private factoryResolvers: Map<Type<any>, ComponentFactoryResolver> = new Map();\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private applicationRef: ApplicationRef,\n    private injector: Injector\n  ) {\n    document.addEventListener(\"keyup\", (event) => {\n      if (event.key === \"Escape\" && this.modalCount > 0) {\n        this.topModal.instance.close();\n      }\n    });\n  }\n\n  get modalCount() {\n    return this.modalList.length;\n  }\n\n  private get topModal() {\n    return this.modalList[this.modalCount - 1];\n  }\n\n  /**\n   * @deprecated Use `dialogService.open` (in web) or `modalService.open` (in desktop/browser) instead.\n   * If replacing an existing call to this method, also remove any `@ViewChild` and `<ng-template>` associated with the\n   * existing usage.\n   */\n  async openViewRef<T>(\n    componentType: Type<T>,\n    viewContainerRef: ViewContainerRef,\n    setComponentParameters: (component: T) => void = null\n  ): Promise<[ModalRef, T]> {\n    const [modalRef, modalComponentRef] = this.openInternal(componentType, null, false);\n    modalComponentRef.instance.setComponentParameters = setComponentParameters;\n\n    viewContainerRef.insert(modalComponentRef.hostView);\n\n    await modalRef.onCreated.pipe(first()).toPromise();\n\n    return [modalRef, modalComponentRef.instance.componentRef.instance];\n  }\n\n  open(componentType: Type<any>, config: ModalConfig = {}) {\n    const { replaceTopModal = false, allowMultipleModals = false } = config;\n\n    if (this.modalCount > 0 && replaceTopModal) {\n      this.topModal.instance.close();\n    }\n\n    if (this.modalCount > 0 && !allowMultipleModals) {\n      return;\n    }\n\n    const [modalRef] = this.openInternal(componentType, config, true);\n\n    return modalRef;\n  }\n\n  registerComponentFactoryResolver<T>(\n    componentType: Type<T>,\n    componentFactoryResolver: ComponentFactoryResolver\n  ): void {\n    this.factoryResolvers.set(componentType, componentFactoryResolver);\n  }\n\n  resolveComponentFactory<T>(componentType: Type<T>): ComponentFactory<T> {\n    if (this.factoryResolvers.has(componentType)) {\n      return this.factoryResolvers.get(componentType).resolveComponentFactory(componentType);\n    }\n\n    return this.componentFactoryResolver.resolveComponentFactory(componentType);\n  }\n\n  closeAll(): void {\n    this.modalList.forEach((modal) => modal.instance.close());\n  }\n\n  protected openInternal(\n    componentType: Type<any>,\n    config?: ModalConfig,\n    attachToDom?: boolean\n  ): [ModalRef, ComponentRef<DynamicModalComponent>] {\n    const [modalRef, componentRef] = this.createModalComponent(config);\n    componentRef.instance.childComponentType = componentType;\n\n    if (attachToDom) {\n      this.applicationRef.attachView(componentRef.hostView);\n      const domElem = (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n      document.body.appendChild(domElem);\n    }\n\n    modalRef.onClosed.pipe(first()).subscribe(() => {\n      if (attachToDom) {\n        this.applicationRef.detachView(componentRef.hostView);\n      }\n      componentRef.destroy();\n\n      this.modalList.pop();\n      if (this.modalCount > 0) {\n        this.topModal.instance.getFocus();\n      }\n    });\n\n    this.setupHandlers(modalRef);\n\n    this.modalList.push(componentRef);\n\n    return [modalRef, componentRef];\n  }\n\n  protected setupHandlers(modalRef: ModalRef) {\n    let backdrop: HTMLElement = null;\n\n    // Add backdrop, setup [data-dismiss] handler.\n    modalRef.onCreated.pipe(first()).subscribe((el) => {\n      document.body.classList.add(\"modal-open\");\n\n      const modalEl: HTMLElement = el.querySelector(\".modal\");\n      const dialogEl = modalEl.querySelector(\".modal-dialog\") as HTMLElement;\n\n      backdrop = document.createElement(\"div\");\n      backdrop.className = \"modal-backdrop fade\";\n      backdrop.style.zIndex = `${this.modalCount}040`;\n      modalEl.prepend(backdrop);\n\n      dialogEl.addEventListener(\"click\", (e: Event) => {\n        e.stopPropagation();\n      });\n      dialogEl.style.zIndex = `${this.modalCount}050`;\n\n      const modals = Array.from(\n        el.querySelectorAll('.modal-backdrop, .modal *[data-dismiss=\"modal\"]')\n      );\n      for (const closeElement of modals) {\n        closeElement.addEventListener(\"click\", () => {\n          modalRef.close();\n        });\n      }\n    });\n\n    // onClose is used in Web to hook into bootstrap. On other projects we pipe it directly to closed.\n    modalRef.onClose.pipe(first()).subscribe(() => {\n      modalRef.closed();\n\n      if (this.modalCount === 0) {\n        document.body.classList.remove(\"modal-open\");\n      }\n    });\n  }\n\n  protected createModalComponent(\n    config: ModalConfig\n  ): [ModalRef, ComponentRef<DynamicModalComponent>] {\n    const modalRef = new ModalRef();\n\n    const map = new WeakMap();\n    map.set(ModalConfig, config);\n    map.set(ModalRef, modalRef);\n\n    const componentFactory =\n      this.componentFactoryResolver.resolveComponentFactory(DynamicModalComponent);\n    const componentRef = componentFactory.create(new ModalInjector(this.injector, map));\n\n    return [modalRef, componentRef];\n  }\n}\n","import { Directive, OnInit } from \"@angular/core\";\n\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\nimport { ModalRef } from \"./modal/modal.ref\";\n\n@Directive()\nexport class SetPinComponent implements OnInit {\n  pin = \"\";\n  showPin = false;\n  masterPassOnRestart = true;\n  showMasterPassOnRestart = true;\n\n  constructor(\n    private modalRef: ModalRef,\n    private cryptoService: CryptoService,\n    private keyConnectorService: KeyConnectorService,\n    private stateService: StateService\n  ) {}\n\n  async ngOnInit() {\n    this.showMasterPassOnRestart = this.masterPassOnRestart =\n      !(await this.keyConnectorService.getUsesKeyConnector());\n  }\n\n  toggleVisibility() {\n    this.showPin = !this.showPin;\n  }\n\n  async submit() {\n    if (Utils.isNullOrWhitespace(this.pin)) {\n      this.modalRef.close(false);\n    }\n\n    const kdf = await this.stateService.getKdfType();\n    const kdfConfig = await this.stateService.getKdfConfig();\n    const email = await this.stateService.getEmail();\n    const pinKey = await this.cryptoService.makePinKey(this.pin, email, kdf, kdfConfig);\n    const key = await this.cryptoService.getKey();\n    const pinProtectedKey = await this.cryptoService.encrypt(key.key, pinKey);\n    if (this.masterPassOnRestart) {\n      const encPin = await this.cryptoService.encrypt(this.pin);\n      await this.stateService.setProtectedPin(encPin.encryptedString);\n      await this.stateService.setDecryptedPinProtected(pinProtectedKey);\n    } else {\n      await this.stateService.setEncryptedPinProtected(pinProtectedKey.encryptedString);\n    }\n\n    this.modalRef.close(true);\n  }\n}\n","<div class=\"modal fade\" role=\"dialog\" aria-modal=\"true\">\n  <div class=\"modal-dialog modal-dialog-scrollable\" role=\"document\">\n    <form class=\"modal-content\" #form (ngSubmit)=\"submit()\">\n      <div class=\"modal-body\">\n        <div>\n          {{ \"setYourPinCode\" | i18n }}\n        </div>\n        <div class=\"box\">\n          <div class=\"box-content\">\n            <div class=\"box-content-row box-content-row-flex no-hover no-bg\" appBoxRow>\n              <div class=\"row-main\">\n                <label for=\"pin\">{{ \"pin\" | i18n }}</label>\n                <input\n                  id=\"pin\"\n                  type=\"{{ showPin ? 'text' : 'password' }}\"\n                  name=\"Pin\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"pin\"\n                  required\n                  appInputVerbatim\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"toggleVisibility()\"\n                  [attr.aria-pressed]=\"showPin\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPin, 'bwi-eye-slash': showPin }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"checkbox\" *ngIf=\"showMasterPassOnRestart\">\n          <label for=\"masterPasswordOnRestart\">\n            <input\n              type=\"checkbox\"\n              id=\"masterPasswordOnRestart\"\n              name=\"MasterPasswordOnRestart\"\n              [(ngModel)]=\"masterPassOnRestart\"\n            />\n            <span>{{ \"lockWithMasterPassOnRestart\" | i18n }}</span>\n          </label>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\">\n          <span>{{ \"ok\" | i18n }}</span>\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n          {{ \"cancel\" | i18n }}\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\n\nimport { SetPinComponent as BaseSetPinComponent } from \"@bitwarden/angular/components/set-pin.component\";\n\n@Component({\n  templateUrl: \"set-pin.component.html\",\n})\nexport class SetPinComponent extends BaseSetPinComponent {}\n","import { Observable } from \"rxjs\";\n\nimport { ServerConfig } from \"./server-config\";\n\nexport abstract class ConfigServiceAbstraction {\n  serverConfig$: Observable<ServerConfig | null>;\n}\n","<div class=\"modal fade\" role=\"dialog\" aria-modal=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-body\">\n        <p class=\"text-center\">\n          <i class=\"bwi bwi-shield bwi-3x\" aria-hidden=\"true\"></i>\n        </p>\n        <p class=\"text-center\">\n          <b>Bitwarden</b>\n        </p>\n        <p class=\"text-center\">&copy; Bitwarden Inc. 2015-{{ year }}</p>\n        <p class=\"text-center\">{{ \"version\" | i18n }}: {{ version }}</p>\n        <ng-container *ngIf=\"serverConfig$ | async as serverConfig\">\n          <p class=\"text-center\" *ngIf=\"isCloud\">\n            {{ \"serverVersion\" | i18n }}: {{ this.serverConfig?.version }}\n            <span *ngIf=\"!serverConfig.isValid()\">\n              ({{ \"lastSeenOn\" | i18n : (serverConfig.utcDate | date : \"mediumDate\") }})\n            </span>\n          </p>\n\n          <ng-container *ngIf=\"!isCloud\">\n            <ng-container *ngIf=\"serverConfig.server\">\n              <p class=\"text-center\">\n                {{ \"serverVersion\" | i18n }} <small>({{ \"thirdParty\" | i18n }})</small>:\n                {{ this.serverConfig?.version }}\n                <span *ngIf=\"!serverConfig.isValid()\">\n                  ({{ \"lastSeenOn\" | i18n : (serverConfig.utcDate | date : \"mediumDate\") }})\n                </span>\n              </p>\n              <div class=\"text-center\">\n                <small>{{ \"thirdPartyServerMessage\" | i18n : serverConfig.server?.name }}</small>\n              </div>\n            </ng-container>\n\n            <p class=\"text-center\" *ngIf=\"!serverConfig.server\">\n              {{ \"serverVersion\" | i18n }} <small>({{ \"selfHosted\" | i18n }})</small>:\n              {{ this.serverConfig?.version }}\n              <span *ngIf=\"!serverConfig.isValid()\">\n                ({{ \"lastSeenOn\" | i18n : (serverConfig.utcDate | date : \"mediumDate\") }})\n              </span>\n            </p>\n          </ng-container>\n        </ng-container>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n          {{ \"close\" | i18n }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\nimport { Observable } from \"rxjs\";\n\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/abstractions/config/config.service.abstraction\";\nimport { ServerConfig } from \"@bitwarden/common/abstractions/config/server-config\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\n@Component({\n  selector: \"app-about\",\n  templateUrl: \"about.component.html\",\n})\nexport class AboutComponent {\n  serverConfig$: Observable<ServerConfig>;\n\n  year = new Date().getFullYear();\n  version = BrowserApi.getApplicationVersion();\n  isCloud: boolean;\n\n  constructor(configService: ConfigServiceAbstraction, environmentService: EnvironmentService) {\n    this.serverConfig$ = configService.serverConfig$;\n    this.isCloud = environmentService.isCloud();\n  }\n}\n","import { Directive, Input, OnChanges, OnDestroy, OnInit } from \"@angular/core\";\nimport {\n  AbstractControl,\n  ControlValueAccessor,\n  FormBuilder,\n  ValidationErrors,\n  Validator,\n} from \"@angular/forms\";\nimport { filter, Subject, takeUntil } from \"rxjs\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { Policy } from \"@bitwarden/common/admin-console/models/domain/policy\";\n\n@Directive()\nexport class VaultTimeoutInputComponent\n  implements ControlValueAccessor, Validator, OnInit, OnDestroy, OnChanges\n{\n  get showCustom() {\n    return this.form.get(\"vaultTimeout\").value === VaultTimeoutInputComponent.CUSTOM_VALUE;\n  }\n\n  get exceedsMinimumTimout(): boolean {\n    return (\n      !this.showCustom || this.customTimeInMinutes() > VaultTimeoutInputComponent.MIN_CUSTOM_MINUTES\n    );\n  }\n\n  static CUSTOM_VALUE = -100;\n  static MIN_CUSTOM_MINUTES = 0;\n\n  form = this.formBuilder.group({\n    vaultTimeout: [null],\n    custom: this.formBuilder.group({\n      hours: [null],\n      minutes: [null],\n    }),\n  });\n\n  @Input() vaultTimeoutOptions: { name: string; value: number }[];\n  vaultTimeoutPolicy: Policy;\n  vaultTimeoutPolicyHours: number;\n  vaultTimeoutPolicyMinutes: number;\n\n  private onChange: (vaultTimeout: number) => void;\n  private validatorChange: () => void;\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private policyService: PolicyService,\n    private i18nService: I18nService\n  ) {}\n\n  async ngOnInit() {\n    this.policyService\n      .get$(PolicyType.MaximumVaultTimeout)\n      .pipe(\n        filter((policy) => policy != null),\n        takeUntil(this.destroy$)\n      )\n      .subscribe((policy) => {\n        this.vaultTimeoutPolicy = policy;\n        this.applyVaultTimeoutPolicy();\n      });\n\n    this.form.valueChanges.pipe(takeUntil(this.destroy$)).subscribe((value) => {\n      if (this.onChange) {\n        this.onChange(this.getVaultTimeout(value));\n      }\n    });\n\n    // Assign the previous value to the custom fields\n    this.form.controls.vaultTimeout.valueChanges\n      .pipe(\n        filter((value) => value !== VaultTimeoutInputComponent.CUSTOM_VALUE),\n        takeUntil(this.destroy$)\n      )\n      .subscribe((_) => {\n        const current = Math.max(this.form.value.vaultTimeout, 0);\n        this.form.patchValue({\n          custom: {\n            hours: Math.floor(current / 60),\n            minutes: current % 60,\n          },\n        });\n      });\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  ngOnChanges() {\n    if (\n      !this.vaultTimeoutOptions.find((p) => p.value === VaultTimeoutInputComponent.CUSTOM_VALUE)\n    ) {\n      this.vaultTimeoutOptions.push({\n        name: this.i18nService.t(\"custom\"),\n        value: VaultTimeoutInputComponent.CUSTOM_VALUE,\n      });\n    }\n  }\n\n  getVaultTimeout(value: any) {\n    if (value.vaultTimeout !== VaultTimeoutInputComponent.CUSTOM_VALUE) {\n      return value.vaultTimeout;\n    }\n\n    return value.custom.hours * 60 + value.custom.minutes;\n  }\n\n  writeValue(value: number): void {\n    if (value == null) {\n      return;\n    }\n\n    if (this.vaultTimeoutOptions.every((p) => p.value !== value)) {\n      this.form.setValue({\n        vaultTimeout: VaultTimeoutInputComponent.CUSTOM_VALUE,\n        custom: {\n          hours: Math.floor(value / 60),\n          minutes: value % 60,\n        },\n      });\n      return;\n    }\n\n    this.form.patchValue({\n      vaultTimeout: value,\n    });\n  }\n\n  registerOnChange(onChange: any): void {\n    this.onChange = onChange;\n  }\n\n  registerOnTouched(onTouched: any): void {\n    // Empty\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    // Empty\n  }\n\n  validate(control: AbstractControl): ValidationErrors {\n    if (this.vaultTimeoutPolicy && this.vaultTimeoutPolicy?.data?.minutes < control.value) {\n      return { policyError: true };\n    }\n\n    if (!this.exceedsMinimumTimout) {\n      return { minTimeoutError: true };\n    }\n\n    return null;\n  }\n\n  registerOnValidatorChange(fn: () => void): void {\n    this.validatorChange = fn;\n  }\n\n  private customTimeInMinutes() {\n    return this.form.value.custom.hours * 60 + this.form.value.custom.minutes;\n  }\n\n  private applyVaultTimeoutPolicy() {\n    this.vaultTimeoutPolicyHours = Math.floor(this.vaultTimeoutPolicy.data.minutes / 60);\n    this.vaultTimeoutPolicyMinutes = this.vaultTimeoutPolicy.data.minutes % 60;\n\n    this.vaultTimeoutOptions = this.vaultTimeoutOptions.filter(\n      (t) =>\n        t.value <= this.vaultTimeoutPolicy.data.minutes &&\n        (t.value > 0 || t.value === VaultTimeoutInputComponent.CUSTOM_VALUE) &&\n        t.value != null\n    );\n    this.validatorChange();\n  }\n}\n","<div [formGroup]=\"form\">\n  <div class=\"box-content-row last display-block\" appBoxRow>\n    <label for=\"vaultTimeout\">{{ \"vaultTimeout\" | i18n }}</label>\n    <select\n      id=\"vaultTimeout\"\n      name=\"VaultTimeout\"\n      formControlName=\"vaultTimeout\"\n      class=\"form-control\"\n    >\n      <option *ngFor=\"let o of vaultTimeoutOptions\" [ngValue]=\"o.value\">{{ o.name }}</option>\n    </select>\n  </div>\n  <div class=\"box-content-row last\" *ngIf=\"showCustom\">\n    <div formGroupName=\"custom\" class=\"row\">\n      <div class=\"col\">\n        <div class=\"display-block\" appBoxRow>\n          <label for=\"customVaultTimeout\">{{ \"hours\" | i18n }}</label>\n          <input\n            id=\"hours\"\n            class=\"form-control\"\n            type=\"number\"\n            min=\"0\"\n            name=\"hours\"\n            formControlName=\"hours\"\n          />\n        </div>\n      </div>\n      <div class=\"col\">\n        <div class=\"display-block\" appBoxRow>\n          <label for=\"customVaultTimeout\">{{ \"minutes\" | i18n }}</label>\n          <input\n            id=\"minutes\"\n            class=\"form-control\"\n            type=\"number\"\n            min=\"0\"\n            max=\"59\"\n            name=\"minutes\"\n            formControlName=\"minutes\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component } from \"@angular/core\";\nimport { NG_VALIDATORS, NG_VALUE_ACCESSOR } from \"@angular/forms\";\n\nimport { VaultTimeoutInputComponent as VaultTimeoutInputComponentBase } from \"@bitwarden/angular/components/settings/vault-timeout-input.component\";\n\n@Component({\n  selector: \"app-vault-timeout-input\",\n  templateUrl: \"vault-timeout-input.component.html\",\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: VaultTimeoutInputComponent,\n    },\n    {\n      provide: NG_VALIDATORS,\n      multi: true,\n      useExisting: VaultTimeoutInputComponent,\n    },\n  ],\n})\nexport class VaultTimeoutInputComponent extends VaultTimeoutInputComponentBase {}\n","<header>\n  <div class=\"left\">\n    <app-pop-out></app-pop-out>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"settings\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\" [formGroup]=\"form\">\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"manage\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/autofill\"\n      >\n        <div class=\"row-main\">{{ \"autofill\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/folders\"\n      >\n        <div class=\"row-main\">{{ \"folders\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/sync\"\n      >\n        <div class=\"row-main\">{{ \"sync\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/excluded-domains\"\n      >\n        <div class=\"row-main\">{{ \"excludedDomains\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"security\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <app-callout type=\"info\" *ngIf=\"vaultTimeoutPolicyCallout | async as policy\">\n        <span *ngIf=\"policy.timeout && policy.action\">\n          {{\n            \"vaultTimeoutPolicyWithActionInEffect\"\n              | i18n : policy.timeout.hours : policy.timeout.minutes : (policy.action | i18n)\n          }}\n        </span>\n        <span *ngIf=\"policy.timeout && !policy.action\">\n          {{ \"vaultTimeoutPolicyInEffect\" | i18n : policy.timeout.hours : policy.timeout.minutes }}\n        </span>\n        <span *ngIf=\"!policy.timeout && policy.action\">\n          {{ \"vaultTimeoutActionPolicyInEffect\" | i18n : (policy.action | i18n) }}\n        </span>\n      </app-callout>\n      <app-vault-timeout-input\n        [vaultTimeoutOptions]=\"vaultTimeoutOptions\"\n        [formControl]=\"form.controls.vaultTimeout\"\n        ngDefaultControl\n      >\n      </app-vault-timeout-input>\n      <div class=\"box-content-row display-block\" appBoxRow>\n        <label for=\"vaultTimeoutAction\">{{ \"vaultTimeoutAction\" | i18n }}</label>\n        <select\n          #vaultTimeoutActionSelect\n          id=\"vaultTimeoutAction\"\n          name=\"VaultTimeoutActions\"\n          formControlName=\"vaultTimeoutAction\"\n        >\n          <option *ngFor=\"let o of vaultTimeoutActionOptions\" [ngValue]=\"o.value\">\n            {{ o.name }}\n          </option>\n        </select>\n      </div>\n      <div class=\"box-content-row box-content-row-checkbox\" appBoxRow>\n        <label for=\"pin\">{{ \"unlockWithPin\" | i18n }}</label>\n        <input id=\"pin\" type=\"checkbox\" (change)=\"updatePin()\" formControlName=\"pin\" />\n      </div>\n      <div class=\"box-content-row box-content-row-checkbox\" appBoxRow *ngIf=\"supportsBiometric\">\n        <label for=\"biometric\">{{ \"unlockWithBiometrics\" | i18n }}</label>\n        <input\n          id=\"biometric\"\n          type=\"checkbox\"\n          (change)=\"updateBiometric()\"\n          formControlName=\"biometric\"\n        />\n      </div>\n      <div\n        class=\"box-content-row box-content-row-checkbox\"\n        appBoxRow\n        *ngIf=\"supportsBiometric && this.form.value.biometric\"\n      >\n        <label for=\"autoBiometricsPrompt\">{{ \"enableAutoBiometricsPrompt\" | i18n }}</label>\n        <input\n          id=\"autoBiometricsPrompt\"\n          type=\"checkbox\"\n          (change)=\"updateAutoBiometricsPrompt()\"\n          formControlName=\"enableAutoBiometricsPrompt\"\n        />\n      </div>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"lock()\"\n      >\n        <div class=\"row-main\">{{ \"lockNow\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"twoStep()\"\n      >\n        <div class=\"row-main\">{{ \"twoStepLogin\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"account\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button type=\"button\" class=\"box-content-row\" routerLink=\"/premium\">\n        <div class=\"row-main\">\n          <div class=\"icon text-primary\">\n            <i class=\"bwi bwi-fw bwi-lg bwi-star-f\" aria-hidden=\"true\"></i>\n          </div>\n          <span class=\"text text-primary\"\n            ><b>{{ \"premiumMembership\" | i18n }}</b></span\n          >\n        </div>\n        <span><i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i></span>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"changePassword()\"\n        *ngIf=\"showChangeMasterPass\"\n      >\n        <div class=\"row-main\">{{ \"changeMasterPassword\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"fingerprint()\"\n      >\n        <div class=\"row-main\">{{ \"fingerprintPhrase\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"logOut()\"\n      >\n        <div class=\"row-main\">{{ \"logOut\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"tools\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"import()\"\n      >\n        <div class=\"row-main\">{{ \"importItems\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"export()\"\n      >\n        <div class=\"row-main\">{{ \"exportVault\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"webVault()\"\n      >\n        <div class=\"row-main\">{{ \"bitWebVault\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"box list\">\n    <h2 class=\"box-header\">{{ \"other\" | i18n }}</h2>\n    <div class=\"box-content single-line\">\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/options\"\n      >\n        <div class=\"row-main\">{{ \"options\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"about()\"\n      >\n        <div class=\"row-main\">{{ \"about\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"share()\"\n      >\n        <div class=\"row-main\">{{ \"learnOrg\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        routerLink=\"/help-and-feedback\"\n      >\n        <div class=\"row-main\">{{ \"helpFeedback\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n      <button\n        type=\"button\"\n        aria-describedby=\"rateExtensionHelp\"\n        class=\"box-content-row box-content-row-flex text-default\"\n        appStopClick\n        (click)=\"rate()\"\n      >\n        <div class=\"row-main\">{{ \"rateExtension\" | i18n }}</div>\n        <i class=\"bwi bwi-angle-right bwi-lg row-sub-icon\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n    <div id=\"rateExtensionHelp\" class=\"box-footer\">{{ \"rateExtensionDesc\" | i18n }}</div>\n  </div>\n</main>\n","import { Component, ElementRef, OnInit, ViewChild } from \"@angular/core\";\nimport { FormBuilder } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\nimport { concatMap, debounceTime, filter, map, Observable, Subject, takeUntil, tap } from \"rxjs\";\nimport Swal from \"sweetalert2\";\n\nimport { ModalService } from \"@bitwarden/angular/services/modal.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { DeviceType } from \"@bitwarden/common/enums\";\nimport { VaultTimeoutAction } from \"@bitwarden/common/enums/vault-timeout-action.enum\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { BiometricErrors, BiometricErrorTypes } from \"../../models/biometricErrors\";\nimport { SetPinComponent } from \"../components/set-pin.component\";\nimport { PopupUtilsService } from \"../services/popup-utils.service\";\n\nimport { AboutComponent } from \"./about.component\";\n\nconst RateUrls = {\n  [DeviceType.ChromeExtension]:\n    \"https://chrome.google.com/webstore/detail/bitwarden-free-password-m/nngceckbapebfimnlniiiahkandclblb/reviews\",\n  [DeviceType.FirefoxExtension]:\n    \"https://addons.mozilla.org/en-US/firefox/addon/bitwarden-password-manager/#reviews\",\n  [DeviceType.OperaExtension]:\n    \"https://addons.opera.com/en/extensions/details/bitwarden-free-password-manager/#feedback-container\",\n  [DeviceType.EdgeExtension]:\n    \"https://microsoftedge.microsoft.com/addons/detail/jbkfoedolllekgbhcbcoahefnbanhhlh\",\n  [DeviceType.VivaldiExtension]:\n    \"https://chrome.google.com/webstore/detail/bitwarden-free-password-m/nngceckbapebfimnlniiiahkandclblb/reviews\",\n  [DeviceType.SafariExtension]: \"https://apps.apple.com/app/bitwarden/id1352778147\",\n};\n\n@Component({\n  selector: \"app-settings\",\n  templateUrl: \"settings.component.html\",\n})\n// eslint-disable-next-line rxjs-angular/prefer-takeuntil\nexport class SettingsComponent implements OnInit {\n  @ViewChild(\"vaultTimeoutActionSelect\", { read: ElementRef, static: true })\n  vaultTimeoutActionSelectRef: ElementRef;\n  vaultTimeoutOptions: any[];\n  vaultTimeoutActionOptions: any[];\n  vaultTimeoutPolicyCallout: Observable<{\n    timeout: { hours: number; minutes: number };\n    action: VaultTimeoutAction;\n  }>;\n  supportsBiometric: boolean;\n  previousVaultTimeout: number = null;\n  showChangeMasterPass = true;\n\n  form = this.formBuilder.group({\n    vaultTimeout: [null as number | null],\n    vaultTimeoutAction: [VaultTimeoutAction.Lock],\n    pin: [null as boolean | null],\n    biometric: false,\n    enableAutoBiometricsPrompt: true,\n  });\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private policyService: PolicyService,\n    private formBuilder: FormBuilder,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private vaultTimeoutService: VaultTimeoutService,\n    private vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    public messagingService: MessagingService,\n    private router: Router,\n    private environmentService: EnvironmentService,\n    private cryptoService: CryptoService,\n    private stateService: StateService,\n    private popupUtilsService: PopupUtilsService,\n    private modalService: ModalService,\n    private keyConnectorService: KeyConnectorService\n  ) {}\n\n  async ngOnInit() {\n    this.vaultTimeoutPolicyCallout = this.policyService.get$(PolicyType.MaximumVaultTimeout).pipe(\n      filter((policy) => policy != null),\n      map((policy) => {\n        let timeout;\n        if (policy.data?.minutes) {\n          timeout = {\n            hours: Math.floor(policy.data?.minutes / 60),\n            minutes: policy.data?.minutes % 60,\n          };\n        }\n        return { timeout: timeout, action: policy.data?.action };\n      }),\n      tap((policy) => {\n        if (policy.action) {\n          this.form.controls.vaultTimeoutAction.disable({ emitEvent: false });\n        } else {\n          this.form.controls.vaultTimeoutAction.enable({ emitEvent: false });\n        }\n      })\n    );\n\n    const showOnLocked =\n      !this.platformUtilsService.isFirefox() && !this.platformUtilsService.isSafari();\n\n    this.vaultTimeoutOptions = [\n      { name: this.i18nService.t(\"immediately\"), value: 0 },\n      { name: this.i18nService.t(\"oneMinute\"), value: 1 },\n      { name: this.i18nService.t(\"fiveMinutes\"), value: 5 },\n      { name: this.i18nService.t(\"fifteenMinutes\"), value: 15 },\n      { name: this.i18nService.t(\"thirtyMinutes\"), value: 30 },\n      { name: this.i18nService.t(\"oneHour\"), value: 60 },\n      { name: this.i18nService.t(\"fourHours\"), value: 240 },\n      // { name: i18nService.t('onIdle'), value: -4 },\n      // { name: i18nService.t('onSleep'), value: -3 },\n    ];\n\n    if (showOnLocked) {\n      this.vaultTimeoutOptions.push({ name: this.i18nService.t(\"onLocked\"), value: -2 });\n    }\n\n    this.vaultTimeoutOptions.push({ name: this.i18nService.t(\"onRestart\"), value: -1 });\n    this.vaultTimeoutOptions.push({ name: this.i18nService.t(\"never\"), value: null });\n\n    this.vaultTimeoutActionOptions = [\n      { name: this.i18nService.t(VaultTimeoutAction.Lock), value: VaultTimeoutAction.Lock },\n      { name: this.i18nService.t(VaultTimeoutAction.LogOut), value: VaultTimeoutAction.LogOut },\n    ];\n\n    let timeout = await this.vaultTimeoutSettingsService.getVaultTimeout();\n    if (timeout === -2 && !showOnLocked) {\n      timeout = -1;\n    }\n    const pinSet = await this.vaultTimeoutSettingsService.isPinLockSet();\n\n    const initialValues = {\n      vaultTimeout: timeout,\n      vaultTimeoutAction: await this.vaultTimeoutSettingsService.getVaultTimeoutAction(),\n      pin: pinSet[0] || pinSet[1],\n      biometric: await this.vaultTimeoutSettingsService.isBiometricLockSet(),\n      enableAutoBiometricsPrompt: !(await this.stateService.getDisableAutoBiometricsPrompt()),\n    };\n    this.form.setValue(initialValues, { emitEvent: false });\n\n    this.previousVaultTimeout = timeout;\n    this.supportsBiometric = await this.platformUtilsService.supportsBiometric();\n    this.showChangeMasterPass = !(await this.keyConnectorService.getUsesKeyConnector());\n\n    this.form.controls.vaultTimeout.valueChanges\n      .pipe(\n        debounceTime(250),\n        concatMap(async (value) => {\n          await this.saveVaultTimeout(value);\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n\n    this.form.controls.vaultTimeoutAction.valueChanges\n      .pipe(\n        concatMap(async (action) => {\n          await this.saveVaultTimeoutAction(action);\n        }),\n        takeUntil(this.destroy$)\n      )\n      .subscribe();\n\n    this.form.controls.biometric.valueChanges\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((enabled) => {\n        if (enabled) {\n          this.form.controls.enableAutoBiometricsPrompt.enable();\n        } else {\n          this.form.controls.enableAutoBiometricsPrompt.disable();\n        }\n      });\n  }\n\n  async saveVaultTimeout(newValue: number) {\n    if (newValue == null) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"neverLockWarning\"),\n        null,\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"cancel\"),\n        \"warning\"\n      );\n      if (!confirmed) {\n        this.form.controls.vaultTimeout.setValue(this.previousVaultTimeout);\n        return;\n      }\n    }\n\n    // The minTimeoutError does not apply to browser because it supports Immediately\n    // So only check for the policyError\n    if (this.form.controls.vaultTimeout.hasError(\"policyError\")) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"vaultTimeoutTooLarge\")\n      );\n      return;\n    }\n\n    this.previousVaultTimeout = this.form.value.vaultTimeout;\n\n    await this.vaultTimeoutSettingsService.setVaultTimeoutOptions(\n      newValue,\n      this.form.value.vaultTimeoutAction\n    );\n    if (this.previousVaultTimeout == null) {\n      this.messagingService.send(\"bgReseedStorage\");\n    }\n  }\n\n  async saveVaultTimeoutAction(newValue: VaultTimeoutAction) {\n    if (newValue === VaultTimeoutAction.LogOut) {\n      const confirmed = await this.platformUtilsService.showDialog(\n        this.i18nService.t(\"vaultTimeoutLogOutConfirmation\"),\n        this.i18nService.t(\"vaultTimeoutLogOutConfirmationTitle\"),\n        this.i18nService.t(\"yes\"),\n        this.i18nService.t(\"cancel\"),\n        \"warning\"\n      );\n      if (!confirmed) {\n        this.vaultTimeoutActionOptions.forEach((option: any, i) => {\n          if (option.value === this.form.value.vaultTimeoutAction) {\n            this.vaultTimeoutActionSelectRef.nativeElement.value =\n              i + \": \" + this.form.value.vaultTimeoutAction;\n          }\n        });\n        this.form.controls.vaultTimeoutAction.patchValue(VaultTimeoutAction.Lock, {\n          emitEvent: false,\n        });\n        return;\n      }\n    }\n\n    if (this.form.controls.vaultTimeout.hasError(\"policyError\")) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        null,\n        this.i18nService.t(\"vaultTimeoutTooLarge\")\n      );\n      return;\n    }\n\n    await this.vaultTimeoutSettingsService.setVaultTimeoutOptions(\n      this.form.value.vaultTimeout,\n      newValue\n    );\n  }\n\n  async updatePin() {\n    if (this.form.value.pin) {\n      const ref = this.modalService.open(SetPinComponent, { allowMultipleModals: true });\n\n      if (ref == null) {\n        this.form.controls.pin.setValue(false);\n        return;\n      }\n\n      this.form.controls.pin.setValue(await ref.onClosedPromise());\n    } else {\n      await this.cryptoService.clearPinProtectedKey();\n      await this.vaultTimeoutSettingsService.clear();\n    }\n  }\n\n  async updateBiometric() {\n    if (this.form.value.biometric && this.supportsBiometric) {\n      let granted;\n      try {\n        granted = await BrowserApi.requestPermission({ permissions: [\"nativeMessaging\"] });\n      } catch (e) {\n        // eslint-disable-next-line\n        console.error(e);\n\n        if (this.platformUtilsService.isFirefox() && this.popupUtilsService.inSidebar(window)) {\n          await this.platformUtilsService.showDialog(\n            this.i18nService.t(\"nativeMessaginPermissionSidebarDesc\"),\n            this.i18nService.t(\"nativeMessaginPermissionSidebarTitle\"),\n            this.i18nService.t(\"ok\"),\n            null\n          );\n          this.form.controls.biometric.setValue(false);\n          return;\n        }\n      }\n\n      if (!granted) {\n        await this.platformUtilsService.showDialog(\n          this.i18nService.t(\"nativeMessaginPermissionErrorDesc\"),\n          this.i18nService.t(\"nativeMessaginPermissionErrorTitle\"),\n          this.i18nService.t(\"ok\"),\n          null\n        );\n        this.form.controls.biometric.setValue(false);\n        return;\n      }\n\n      const submitted = Swal.fire({\n        heightAuto: false,\n        buttonsStyling: false,\n        titleText: this.i18nService.t(\"awaitDesktop\"),\n        text: this.i18nService.t(\"awaitDesktopDesc\"),\n        icon: \"info\",\n        iconHtml: '<i class=\"swal-custom-icon bwi bwi-info-circle text-info\"></i>',\n        showCancelButton: true,\n        cancelButtonText: this.i18nService.t(\"cancel\"),\n        showConfirmButton: false,\n        allowOutsideClick: false,\n      });\n\n      await this.stateService.setBiometricAwaitingAcceptance(true);\n      await this.cryptoService.toggleKey();\n\n      await Promise.race([\n        submitted.then(async (result) => {\n          if (result.dismiss === Swal.DismissReason.cancel) {\n            this.form.controls.biometric.setValue(false);\n            await this.stateService.setBiometricAwaitingAcceptance(null);\n          }\n        }),\n        this.platformUtilsService\n          .authenticateBiometric()\n          .then((result) => {\n            this.form.controls.biometric.setValue(result);\n\n            Swal.close();\n            if (this.form.value.biometric === false) {\n              this.platformUtilsService.showToast(\n                \"error\",\n                this.i18nService.t(\"errorEnableBiometricTitle\"),\n                this.i18nService.t(\"errorEnableBiometricDesc\")\n              );\n            }\n          })\n          .catch((e) => {\n            // Handle connection errors\n            this.form.controls.biometric.setValue(false);\n\n            const error = BiometricErrors[e as BiometricErrorTypes];\n\n            this.platformUtilsService.showDialog(\n              this.i18nService.t(error.description),\n              this.i18nService.t(error.title),\n              this.i18nService.t(\"ok\"),\n              null,\n              \"error\"\n            );\n          }),\n      ]);\n    } else {\n      await this.stateService.setBiometricUnlock(null);\n      await this.stateService.setBiometricFingerprintValidated(false);\n    }\n  }\n\n  async updateAutoBiometricsPrompt() {\n    await this.stateService.setDisableAutoBiometricsPrompt(\n      !this.form.value.enableAutoBiometricsPrompt\n    );\n  }\n\n  async lock() {\n    await this.vaultTimeoutService.lock();\n  }\n\n  async logOut() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"logOutConfirmation\"),\n      this.i18nService.t(VaultTimeoutAction.LogOut),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      this.messagingService.send(\"logout\");\n    }\n  }\n\n  async changePassword() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"changeMasterPasswordConfirmation\"),\n      this.i18nService.t(\"changeMasterPassword\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      BrowserApi.createNewTab(\n        \"https://bitwarden.com/help/master-password/#change-your-master-password\"\n      );\n    }\n  }\n\n  async twoStep() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"twoStepLoginConfirmation\"),\n      this.i18nService.t(\"twoStepLogin\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      BrowserApi.createNewTab(\"https://bitwarden.com/help/setup-two-step-login/\");\n    }\n  }\n\n  async share() {\n    const confirmed = await this.platformUtilsService.showDialog(\n      this.i18nService.t(\"learnOrgConfirmation\"),\n      this.i18nService.t(\"learnOrg\"),\n      this.i18nService.t(\"yes\"),\n      this.i18nService.t(\"cancel\")\n    );\n    if (confirmed) {\n      BrowserApi.createNewTab(\"https://bitwarden.com/help/about-organizations/\");\n    }\n  }\n\n  async webVault() {\n    const url = this.environmentService.getWebVaultUrl();\n    BrowserApi.createNewTab(url);\n  }\n\n  import() {\n    BrowserApi.createNewTab(\"https://bitwarden.com/help/import-data/\");\n  }\n\n  export() {\n    this.router.navigate([\"/export\"]);\n  }\n\n  about() {\n    this.modalService.open(AboutComponent);\n  }\n\n  async fingerprint() {\n    const fingerprint = await this.cryptoService.getFingerprint(\n      await this.stateService.getUserId()\n    );\n    const p = document.createElement(\"p\");\n    p.innerText = this.i18nService.t(\"yourAccountsFingerprint\") + \":\";\n    const p2 = document.createElement(\"p\");\n    p2.innerText = fingerprint.join(\"-\");\n    const div = document.createElement(\"div\");\n    div.appendChild(p);\n    div.appendChild(p2);\n\n    const result = await Swal.fire({\n      heightAuto: false,\n      buttonsStyling: false,\n      html: div,\n      showCancelButton: true,\n      cancelButtonText: this.i18nService.t(\"close\"),\n      showConfirmButton: true,\n      confirmButtonText: this.i18nService.t(\"learnMore\"),\n    });\n\n    if (result.value) {\n      this.platformUtilsService.launchUri(\"https://bitwarden.com/help/fingerprint-phrase/\");\n    }\n  }\n\n  rate() {\n    const deviceType = this.platformUtilsService.getDevice();\n    BrowserApi.createNewTab((RateUrls as any)[deviceType]);\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\n\n@Component({\n  selector: \"app-sync\",\n  templateUrl: \"sync.component.html\",\n})\nexport class SyncComponent implements OnInit {\n  lastSync = \"--\";\n  syncPromise: Promise<any>;\n\n  constructor(\n    private syncService: SyncService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService\n  ) {}\n\n  async ngOnInit() {\n    await this.setLastSync();\n  }\n\n  async sync() {\n    this.syncPromise = this.syncService.fullSync(true);\n    const success = await this.syncPromise;\n    if (success) {\n      await this.setLastSync();\n      this.platformUtilsService.showToast(\"success\", null, this.i18nService.t(\"syncingComplete\"));\n    } else {\n      this.platformUtilsService.showToast(\"error\", null, this.i18nService.t(\"syncingFailed\"));\n    }\n  }\n\n  async setLastSync() {\n    const last = await this.syncService.getLastSync();\n    if (last != null) {\n      this.lastSync = last.toLocaleDateString() + \" \" + last.toLocaleTimeString();\n    } else {\n      this.lastSync = this.i18nService.t(\"never\");\n    }\n  }\n}\n","<div class=\"tab-page\">\n  <router-outlet></router-outlet>\n  <nav class=\"tabs\">\n    <ul>\n      <li routerLinkActive=\"active\" #rlaCurrentTab=\"routerLinkActive\" *ngIf=\"showCurrentTab\">\n        <button\n          type=\"button\"\n          routerLink=\"current\"\n          appA11yTitle=\"{{ 'currentTab' | i18n }}\"\n          [attr.aria-pressed]=\"rlaCurrentTab.isActive\"\n        >\n          <i class=\"bwi bwi-folder-closed-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"tab\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaMyVault=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"vault\"\n          appA11yTitle=\"{{ 'myVault' | i18n }}\"\n          [attr.aria-pressed]=\"rlaMyVault.isActive\"\n        >\n          <i class=\"bwi bwi-lock-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"vault\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaSend=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"send\"\n          appA11yTitle=\"{{ 'send' | i18n }}\"\n          [attr.aria-pressed]=\"rlaSend.isActive\"\n        >\n          <i class=\"bwi bwi-send-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"send\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaGenerator=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"generator\"\n          appA11yTitle=\"{{ 'passGen' | i18n }}\"\n          [attr.aria-pressed]=\"rlaGenerator.isActive\"\n        >\n          <i class=\"bwi bwi-generate-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"generator\" | i18n }}\n        </button>\n      </li>\n      <li routerLinkActive=\"active\" #rlaSettings=\"routerLinkActive\">\n        <button\n          type=\"button\"\n          routerLink=\"settings\"\n          appA11yTitle=\"{{ 'settings' | i18n }}\"\n          [attr.aria-pressed]=\"rlaSettings.isActive\"\n        >\n          <i class=\"bwi bwi-cog-f bwi-2x\" aria-hidden=\"true\"></i>{{ \"settings\" | i18n }}\n        </button>\n      </li>\n    </ul>\n  </nav>\n</div>\n","<header>\n  <div class=\"left\">\n    <button type=\"button\" routerLink=\"/tabs/settings\">\n      <span class=\"header-icon\"><i class=\"bwi bwi-angle-left\" aria-hidden=\"true\"></i></span>\n      <span>{{ \"back\" | i18n }}</span>\n    </button>\n  </div>\n  <h1 class=\"center\">\n    <span class=\"title\">{{ \"sync\" | i18n }}</span>\n  </h1>\n  <div class=\"right\"></div>\n</header>\n<main tabindex=\"-1\">\n  <div class=\"content center-content\">\n    <button\n      type=\"button\"\n      class=\"btn block primary\"\n      aria-describedby=\"lastSyncHint\"\n      (click)=\"sync()\"\n      #syncBtn\n      [disabled]=\"$any(syncBtn).loading\"\n      [appApiAction]=\"syncPromise\"\n    >\n      <span [hidden]=\"$any(syncBtn).loading\">{{ \"syncVaultNow\" | i18n }}</span>\n      <i\n        class=\"bwi bwi-spinner bwi-lg bwi-spin\"\n        [hidden]=\"!$any(syncBtn).loading\"\n        aria-hidden=\"true\"\n      ></i>\n    </button>\n    <p id=\"lastSyncHint\" class=\"text-center text-muted small\">\n      {{ \"lastSync\" | i18n }} {{ lastSync }}\n    </p>\n  </div>\n</main>\n","import { Component, OnInit } from \"@angular/core\";\n\nimport { PopupUtilsService } from \"./services/popup-utils.service\";\n\n@Component({\n  selector: \"app-tabs\",\n  templateUrl: \"tabs.component.html\",\n})\nexport class TabsComponent implements OnInit {\n  showCurrentTab = true;\n\n  constructor(private popupUtilsService: PopupUtilsService) {}\n\n  ngOnInit() {\n    this.showCurrentTab = !this.popupUtilsService.inPopout(window);\n  }\n}\n","import { Injectable, NgModule } from \"@angular/core\";\nimport { ActivatedRouteSnapshot, RouteReuseStrategy, RouterModule, Routes } from \"@angular/router\";\n\nimport { AuthGuard } from \"@bitwarden/angular/auth/guards/auth.guard\";\nimport { LockGuard } from \"@bitwarden/angular/auth/guards/lock.guard\";\nimport { UnauthGuard } from \"@bitwarden/angular/auth/guards/unauth.guard\";\n\nimport { EnvironmentComponent } from \"../auth/popup/environment.component\";\nimport { HintComponent } from \"../auth/popup/hint.component\";\nimport { HomeComponent } from \"../auth/popup/home.component\";\nimport { LockComponent } from \"../auth/popup/lock.component\";\nimport { LoginWithDeviceComponent } from \"../auth/popup/login-with-device.component\";\nimport { LoginComponent } from \"../auth/popup/login.component\";\nimport { RegisterComponent } from \"../auth/popup/register.component\";\nimport { RemovePasswordComponent } from \"../auth/popup/remove-password.component\";\nimport { SetPasswordComponent } from \"../auth/popup/set-password.component\";\nimport { SsoComponent } from \"../auth/popup/sso.component\";\nimport { TwoFactorOptionsComponent } from \"../auth/popup/two-factor-options.component\";\nimport { TwoFactorComponent } from \"../auth/popup/two-factor.component\";\nimport { UpdateTempPasswordComponent } from \"../auth/popup/update-temp-password.component\";\nimport { GeneratorComponent } from \"../tools/popup/generator/generator.component\";\nimport { PasswordGeneratorHistoryComponent } from \"../tools/popup/generator/password-generator-history.component\";\nimport { SendAddEditComponent } from \"../tools/popup/send/send-add-edit.component\";\nimport { SendGroupingsComponent } from \"../tools/popup/send/send-groupings.component\";\nimport { SendTypeComponent } from \"../tools/popup/send/send-type.component\";\nimport { AddEditComponent } from \"../vault/popup/components/vault/add-edit.component\";\nimport { AttachmentsComponent } from \"../vault/popup/components/vault/attachments.component\";\nimport { CollectionsComponent } from \"../vault/popup/components/vault/collections.component\";\nimport { CurrentTabComponent } from \"../vault/popup/components/vault/current-tab.component\";\nimport { PasswordHistoryComponent } from \"../vault/popup/components/vault/password-history.component\";\nimport { ShareComponent } from \"../vault/popup/components/vault/share.component\";\nimport { VaultFilterComponent } from \"../vault/popup/components/vault/vault-filter.component\";\nimport { VaultItemsComponent } from \"../vault/popup/components/vault/vault-items.component\";\nimport { ViewComponent } from \"../vault/popup/components/vault/view.component\";\n\nimport { DebounceNavigationService } from \"./services/debounceNavigationService\";\nimport { AutofillComponent } from \"./settings/autofill.component\";\nimport { ExcludedDomainsComponent } from \"./settings/excluded-domains.component\";\nimport { ExportComponent } from \"./settings/export.component\";\nimport { FolderAddEditComponent } from \"./settings/folder-add-edit.component\";\nimport { FoldersComponent } from \"./settings/folders.component\";\nimport { HelpAndFeedbackComponent } from \"./settings/help-and-feedback.component\";\nimport { OptionsComponent } from \"./settings/options.component\";\nimport { PremiumComponent } from \"./settings/premium.component\";\nimport { SettingsComponent } from \"./settings/settings.component\";\nimport { SyncComponent } from \"./settings/sync.component\";\nimport { TabsComponent } from \"./tabs.component\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    redirectTo: \"home\",\n    pathMatch: \"full\",\n  },\n  {\n    path: \"vault\",\n    redirectTo: \"/tabs/vault\",\n    pathMatch: \"full\",\n  },\n  {\n    path: \"home\",\n    component: HomeComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"home\" },\n  },\n  {\n    path: \"login\",\n    component: LoginComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"login\" },\n  },\n  {\n    path: \"login-with-device\",\n    component: LoginWithDeviceComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"login-with-device\" },\n  },\n  {\n    path: \"lock\",\n    component: LockComponent,\n    canActivate: [LockGuard],\n    data: { state: \"lock\" },\n  },\n  {\n    path: \"2fa\",\n    component: TwoFactorComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"2fa\" },\n  },\n  {\n    path: \"2fa-options\",\n    component: TwoFactorOptionsComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"2fa-options\" },\n  },\n  {\n    path: \"sso\",\n    component: SsoComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"sso\" },\n  },\n  {\n    path: \"set-password\",\n    component: SetPasswordComponent,\n    data: { state: \"set-password\" },\n  },\n  {\n    path: \"remove-password\",\n    component: RemovePasswordComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"remove-password\" },\n  },\n  {\n    path: \"register\",\n    component: RegisterComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"register\" },\n  },\n  {\n    path: \"hint\",\n    component: HintComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"hint\" },\n  },\n  {\n    path: \"environment\",\n    component: EnvironmentComponent,\n    canActivate: [UnauthGuard],\n    data: { state: \"environment\" },\n  },\n  {\n    path: \"ciphers\",\n    component: VaultItemsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"ciphers\" },\n  },\n  {\n    path: \"view-cipher\",\n    component: ViewComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"view-cipher\" },\n  },\n  {\n    path: \"cipher-password-history\",\n    component: PasswordHistoryComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"cipher-password-history\" },\n  },\n  {\n    path: \"add-cipher\",\n    component: AddEditComponent,\n    canActivate: [AuthGuard, DebounceNavigationService],\n    data: { state: \"add-cipher\" },\n    runGuardsAndResolvers: \"always\",\n  },\n  {\n    path: \"edit-cipher\",\n    component: AddEditComponent,\n    canActivate: [AuthGuard, DebounceNavigationService],\n    data: { state: \"edit-cipher\" },\n    runGuardsAndResolvers: \"always\",\n  },\n  {\n    path: \"share-cipher\",\n    component: ShareComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"share-cipher\" },\n  },\n  {\n    path: \"collections\",\n    component: CollectionsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"collections\" },\n  },\n  {\n    path: \"attachments\",\n    component: AttachmentsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"attachments\" },\n  },\n  {\n    path: \"generator\",\n    component: GeneratorComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"generator\" },\n  },\n  {\n    path: \"generator-history\",\n    component: PasswordGeneratorHistoryComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"generator-history\" },\n  },\n  {\n    path: \"export\",\n    component: ExportComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"export\" },\n  },\n  {\n    path: \"autofill\",\n    component: AutofillComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"autofill\" },\n  },\n  {\n    path: \"folders\",\n    component: FoldersComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"folders\" },\n  },\n  {\n    path: \"add-folder\",\n    component: FolderAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"add-folder\" },\n  },\n  {\n    path: \"edit-folder\",\n    component: FolderAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"edit-folder\" },\n  },\n  {\n    path: \"sync\",\n    component: SyncComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"sync\" },\n  },\n  {\n    path: \"excluded-domains\",\n    component: ExcludedDomainsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"excluded-domains\" },\n  },\n  {\n    path: \"premium\",\n    component: PremiumComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"premium\" },\n  },\n  {\n    path: \"options\",\n    component: OptionsComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"options\" },\n  },\n  {\n    path: \"clone-cipher\",\n    component: AddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"clone-cipher\" },\n  },\n  {\n    path: \"send-type\",\n    component: SendTypeComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"send-type\" },\n  },\n  {\n    path: \"add-send\",\n    component: SendAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"add-send\" },\n  },\n  {\n    path: \"edit-send\",\n    component: SendAddEditComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"edit-send\" },\n  },\n  {\n    path: \"update-temp-password\",\n    component: UpdateTempPasswordComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"update-temp-password\" },\n  },\n  {\n    path: \"help-and-feedback\",\n    component: HelpAndFeedbackComponent,\n    canActivate: [AuthGuard],\n    data: { state: \"help-and-feedback\" },\n  },\n  {\n    path: \"tabs\",\n    component: TabsComponent,\n    data: { state: \"tabs\" },\n    children: [\n      {\n        path: \"\",\n        redirectTo: \"/tabs/vault\",\n        pathMatch: \"full\",\n      },\n      {\n        path: \"current\",\n        component: CurrentTabComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_current\" },\n        runGuardsAndResolvers: \"always\",\n      },\n      {\n        path: \"vault\",\n        component: VaultFilterComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_vault\" },\n      },\n      {\n        path: \"generator\",\n        component: GeneratorComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_generator\" },\n      },\n      {\n        path: \"settings\",\n        component: SettingsComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_settings\" },\n      },\n      {\n        path: \"send\",\n        component: SendGroupingsComponent,\n        canActivate: [AuthGuard],\n        data: { state: \"tabs_send\" },\n      },\n    ],\n  },\n];\n\n@Injectable()\nexport class NoRouteReuseStrategy implements RouteReuseStrategy {\n  shouldDetach(route: ActivatedRouteSnapshot) {\n    return false;\n  }\n\n  // eslint-disable-next-line\n  store(route: ActivatedRouteSnapshot, handle: {}) {\n    /* Nothing */\n  }\n\n  shouldAttach(route: ActivatedRouteSnapshot) {\n    return false;\n  }\n\n  retrieve(route: ActivatedRouteSnapshot): any {\n    return null;\n  }\n\n  shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot) {\n    return false;\n  }\n}\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes, {\n      useHash: true,\n      onSameUrlNavigation: \"reload\",\n      /*enableTracing: true,*/\n    }),\n  ],\n  exports: [RouterModule],\n  providers: [{ provide: RouteReuseStrategy, useClass: NoRouteReuseStrategy }],\n})\nexport class AppRoutingModule {}\n","import { animate, group, query, style, transition, trigger } from \"@angular/animations\";\n\nconst queryShown = query(\n  \":enter, :leave\",\n  [style({ position: \"fixed\", width: \"100%\", height: \"100%\" })],\n  {\n    optional: true,\n  }\n);\n\n// ref: https://github.com/angular/angular/issues/15477\nconst queryChildRoute = query(\"router-outlet ~ *\", [style({}), animate(1, style({}))], {\n  optional: true,\n});\n\nconst speed = \"0.4s\";\n\nexport function queryTranslate(\n  direction: string,\n  axis: string,\n  from: number,\n  to: number,\n  zIndex = 1000\n) {\n  return query(\n    \":\" + direction,\n    [\n      style({\n        transform: \"translate\" + axis + \"(\" + from + \"%)\",\n        zIndex: zIndex,\n        boxShadow: \"0 3px 2px -2px gray\",\n      }),\n      animate(speed + \" ease-in-out\", style({ transform: \"translate\" + axis + \"(\" + to + \"%)\" })),\n    ],\n    { optional: true }\n  );\n}\n\nexport function queryTranslateX(direction: string, from: number, to: number, zIndex = 1000) {\n  return queryTranslate(direction, \"X\", from, to, zIndex);\n}\n\nexport function queryTranslateY(direction: string, from: number, to: number, zIndex = 1000) {\n  return queryTranslate(direction, \"Y\", from, to, zIndex);\n}\n\nconst inSlideLeft = [\n  queryShown,\n  group([queryTranslateX(\"enter\", 100, 0), queryTranslateX(\"leave\", 0, -100), queryChildRoute]),\n];\n\nconst outSlideRight = [\n  queryShown,\n  group([queryTranslateX(\"enter\", -100, 0), queryTranslateX(\"leave\", 0, 100)]),\n];\n\nconst inSlideUp = [\n  queryShown,\n  group([queryTranslateY(\"enter\", 100, 0, 1010), queryTranslateY(\"leave\", 0, 0), queryChildRoute]),\n];\n\nconst outSlideDown = [\n  queryShown,\n  group([queryTranslateY(\"enter\", 0, 0), queryTranslateY(\"leave\", 0, 100, 1010)]),\n];\n\nconst inSlideDown = [\n  queryShown,\n  group([queryTranslateY(\"enter\", -100, 0, 1010), queryTranslateY(\"leave\", 0, 0), queryChildRoute]),\n];\n\n// eslint-disable-next-line\nconst outSlideUp = [\n  queryShown,\n  group([queryTranslateY(\"enter\", 0, 0), queryTranslateY(\"leave\", 0, -100, 1010)]),\n];\n\nexport function tabsToCiphers(fromState: string, toState: string) {\n  if (fromState == null || toState === null || toState.indexOf(\"ciphers_\") === -1) {\n    return false;\n  }\n  return (\n    (fromState.indexOf(\"ciphers_\") === 0 && fromState.indexOf(\"ciphers_direction=b\") === -1) ||\n    fromState === \"tabs\"\n  );\n}\n\nexport function ciphersToTabs(fromState: string, toState: string) {\n  if (fromState == null || toState === null || fromState.indexOf(\"ciphers_\") === -1) {\n    return false;\n  }\n  return toState.indexOf(\"ciphers_direction=b\") === 0 || toState === \"tabs\";\n}\n\nexport function ciphersToView(fromState: string, toState: string) {\n  if (fromState == null || toState === null) {\n    return false;\n  }\n  return (\n    fromState.indexOf(\"ciphers_\") === 0 &&\n    (toState === \"view-cipher\" || toState === \"add-cipher\" || toState === \"clone-cipher\")\n  );\n}\n\nexport function viewToCiphers(fromState: string, toState: string) {\n  if (fromState == null || toState === null) {\n    return false;\n  }\n  return (\n    (fromState === \"view-cipher\" || fromState === \"add-cipher\" || fromState === \"clone-cipher\") &&\n    toState.indexOf(\"ciphers_\") === 0\n  );\n}\n\nexport const routerTransition = trigger(\"routerTransition\", [\n  transition(\"void => home\", inSlideLeft),\n  transition(\"void => tabs\", inSlideLeft),\n\n  transition(\"home => environment, home => login, home => register\", inSlideUp),\n\n  transition(\"login => home\", outSlideDown),\n  transition(\"login => hint\", inSlideUp),\n  transition(\"login => tabs, login => 2fa, login => login-with-device\", inSlideLeft),\n\n  transition(\"hint => login, register => home, environment => home\", outSlideDown),\n\n  transition(\"2fa => login\", outSlideRight),\n  transition(\"2fa => 2fa-options\", inSlideUp),\n  transition(\"2fa-options => 2fa\", outSlideDown),\n  transition(\"2fa => tabs\", inSlideLeft),\n\n  transition(\"login-with-device => tabs, login-with-device => 2fa\", inSlideLeft),\n  transition(\"login-with-device => login\", outSlideRight),\n\n  transition(tabsToCiphers, inSlideLeft),\n  transition(ciphersToTabs, outSlideRight),\n\n  transition(ciphersToView, inSlideUp),\n  transition(viewToCiphers, outSlideDown),\n\n  transition(\"tabs => view-cipher\", inSlideUp),\n  transition(\"view-cipher => tabs\", outSlideDown),\n\n  transition(\"view-cipher => edit-cipher, view-cipher => cipher-password-history\", inSlideUp),\n  transition(\n    \"edit-cipher => view-cipher, cipher-password-history => view-cipher, edit-cipher => tabs\",\n    outSlideDown\n  ),\n\n  transition(\"view-cipher => clone-cipher\", inSlideUp),\n  transition(\"clone-cipher => view-cipher, clone-cipher => tabs\", outSlideDown),\n\n  transition(\"view-cipher => share-cipher\", inSlideUp),\n  transition(\"share-cipher => view-cipher\", outSlideDown),\n\n  transition(\"tabs => add-cipher\", inSlideUp),\n  transition(\"add-cipher => tabs\", outSlideDown),\n\n  transition(\"generator => generator-history, tabs => generator-history\", inSlideLeft),\n  transition(\"generator-history => generator, generator-history => tabs\", outSlideRight),\n\n  transition(\n    \"add-cipher => generator, edit-cipher => generator, clone-cipher => generator\",\n    inSlideUp\n  ),\n  transition(\n    \"generator => add-cipher, generator => edit-cipher, generator => clone-cipher\",\n    outSlideDown\n  ),\n\n  transition(\"edit-cipher => attachments, edit-cipher => collections\", inSlideLeft),\n  transition(\"attachments => edit-cipher, collections => edit-cipher\", outSlideRight),\n\n  transition(\"clone-cipher => attachments, clone-cipher => collections\", inSlideLeft),\n  transition(\"attachments => clone-cipher, collections => clone-cipher\", outSlideRight),\n\n  transition(\"tabs => export\", inSlideLeft),\n  transition(\"export => tabs\", outSlideRight),\n\n  transition(\"tabs => folders\", inSlideLeft),\n  transition(\"folders => tabs\", outSlideRight),\n\n  transition(\"folders => edit-folder, folders => add-folder\", inSlideUp),\n  transition(\"edit-folder => folders, add-folder => folders\", outSlideDown),\n\n  transition(\"tabs => sync\", inSlideLeft),\n  transition(\"sync => tabs\", outSlideRight),\n\n  transition(\"tabs => excluded-domains\", inSlideLeft),\n  transition(\"excluded-domains => tabs\", outSlideRight),\n\n  transition(\"tabs => options\", inSlideLeft),\n  transition(\"options => tabs\", outSlideRight),\n\n  transition(\"tabs => premium\", inSlideLeft),\n  transition(\"premium => tabs\", outSlideRight),\n\n  transition(\"tabs => lock\", inSlideDown),\n\n  transition(\"tabs => help-and-feedback\", inSlideLeft),\n  transition(\"help-and-feedback => tabs\", outSlideRight),\n\n  transition(\"tabs => send-type\", inSlideLeft),\n  transition(\"send-type => tabs\", outSlideRight),\n\n  transition(\"tabs => add-send, send-type => add-send\", inSlideUp),\n  transition(\"add-send => tabs, add-send => send-type\", outSlideDown),\n\n  transition(\"tabs => edit-send, send-type => edit-send\", inSlideUp),\n  transition(\"edit-send => tabs, edit-send => send-type\", outSlideDown),\n\n  transition(\"tabs => autofill\", inSlideLeft),\n  transition(\"autofill => tabs\", outSlideRight),\n]);\n","import {\n  ChangeDetectorRef,\n  Component,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  SecurityContext,\n} from \"@angular/core\";\nimport { DomSanitizer } from \"@angular/platform-browser\";\nimport { NavigationEnd, Router, RouterOutlet } from \"@angular/router\";\nimport { IndividualConfig, ToastrService } from \"ngx-toastr\";\nimport { Subject, takeUntil } from \"rxjs\";\nimport Swal, { SweetAlertIcon } from \"sweetalert2\";\n\nimport { BroadcasterService } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { BrowserStateService } from \"../services/abstractions/browser-state.service\";\n\nimport { routerTransition } from \"./app-routing.animations\";\n\n@Component({\n  selector: \"app-root\",\n  styles: [],\n  animations: [routerTransition],\n  template: ` <div [@routerTransition]=\"getState(o)\">\n    <router-outlet #o=\"outlet\"></router-outlet>\n  </div>`,\n})\nexport class AppComponent implements OnInit, OnDestroy {\n  private lastActivity: number = null;\n  private activeUserId: string;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private toastrService: ToastrService,\n    private broadcasterService: BroadcasterService,\n    private authService: AuthService,\n    private i18nService: I18nService,\n    private router: Router,\n    private stateService: BrowserStateService,\n    private messagingService: MessagingService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private ngZone: NgZone,\n    private sanitizer: DomSanitizer,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  async ngOnInit() {\n    // Component states must not persist between closing and reopening the popup, otherwise they become dead objects\n    // Clear them aggressively to make sure this doesn't occur\n    await this.clearComponentStates();\n\n    this.stateService.activeAccount$.pipe(takeUntil(this.destroy$)).subscribe((userId) => {\n      this.activeUserId = userId;\n    });\n\n    this.ngZone.runOutsideAngular(() => {\n      window.onmousedown = () => this.recordActivity();\n      window.ontouchstart = () => this.recordActivity();\n      window.onclick = () => this.recordActivity();\n      window.onscroll = () => this.recordActivity();\n      window.onkeypress = () => this.recordActivity();\n    });\n\n    (window as any).bitwardenPopupMainMessageListener = async (\n      msg: any,\n      sender: any,\n      sendResponse: any\n    ) => {\n      if (msg.command === \"doneLoggingOut\") {\n        this.ngZone.run(async () => {\n          this.authService.logOut(async () => {\n            if (msg.expired) {\n              this.showToast({\n                type: \"warning\",\n                title: this.i18nService.t(\"loggedOut\"),\n                text: this.i18nService.t(\"loginExpired\"),\n              });\n            }\n\n            if (this.activeUserId === null) {\n              this.router.navigate([\"home\"]);\n            }\n          });\n          this.changeDetectorRef.detectChanges();\n        });\n      } else if (msg.command === \"authBlocked\") {\n        this.ngZone.run(() => {\n          this.router.navigate([\"home\"]);\n        });\n      } else if (msg.command === \"locked\") {\n        if (msg.userId == null || msg.userId === (await this.stateService.getUserId())) {\n          this.ngZone.run(() => {\n            this.router.navigate([\"lock\"]);\n          });\n        }\n      } else if (msg.command === \"showDialog\") {\n        await this.showDialog(msg);\n      } else if (msg.command === \"showToast\") {\n        this.ngZone.run(() => {\n          this.showToast(msg);\n        });\n      } else if (msg.command === \"reloadProcess\") {\n        const forceWindowReload =\n          this.platformUtilsService.isSafari() ||\n          this.platformUtilsService.isFirefox() ||\n          this.platformUtilsService.isOpera();\n        // Wait to make sure background has reloaded first.\n        window.setTimeout(\n          () => BrowserApi.reloadExtension(forceWindowReload ? window : null),\n          2000\n        );\n      } else if (msg.command === \"reloadPopup\") {\n        this.ngZone.run(() => {\n          this.router.navigate([\"/\"]);\n        });\n      } else if (msg.command === \"convertAccountToKeyConnector\") {\n        this.ngZone.run(async () => {\n          this.router.navigate([\"/remove-password\"]);\n        });\n      } else {\n        msg.webExtSender = sender;\n        this.broadcasterService.send(msg);\n      }\n    };\n\n    BrowserApi.messageListener(\"app.component\", (window as any).bitwardenPopupMainMessageListener);\n\n    // eslint-disable-next-line rxjs/no-async-subscribe\n    this.router.events.pipe(takeUntil(this.destroy$)).subscribe(async (event) => {\n      if (event instanceof NavigationEnd) {\n        const url = event.urlAfterRedirects || event.url || \"\";\n        if (\n          url.startsWith(\"/tabs/\") &&\n          (window as any).previousPopupUrl != null &&\n          (window as any).previousPopupUrl.startsWith(\"/tabs/\")\n        ) {\n          await this.clearComponentStates();\n        }\n        if (url.startsWith(\"/tabs/\")) {\n          await this.stateService.setAddEditCipherInfo(null);\n        }\n        (window as any).previousPopupUrl = url;\n\n        // Clear route direction after animation (400ms)\n        if ((window as any).routeDirection != null) {\n          window.setTimeout(() => {\n            (window as any).routeDirection = null;\n          }, 400);\n        }\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  getState(outlet: RouterOutlet) {\n    if (outlet.activatedRouteData.state === \"ciphers\") {\n      const routeDirection =\n        (window as any).routeDirection != null ? (window as any).routeDirection : \"\";\n      return (\n        \"ciphers_direction=\" +\n        routeDirection +\n        \"_\" +\n        (outlet.activatedRoute.queryParams as any).value.folderId +\n        \"_\" +\n        (outlet.activatedRoute.queryParams as any).value.collectionId\n      );\n    } else {\n      return outlet.activatedRouteData.state;\n    }\n  }\n\n  private async recordActivity() {\n    if (this.activeUserId == null) {\n      return;\n    }\n\n    const now = new Date().getTime();\n    if (this.lastActivity != null && now - this.lastActivity < 250) {\n      return;\n    }\n\n    this.lastActivity = now;\n    await this.stateService.setLastActive(now, { userId: this.activeUserId });\n  }\n\n  private showToast(msg: any) {\n    let message = \"\";\n\n    const options: Partial<IndividualConfig> = {};\n\n    if (typeof msg.text === \"string\") {\n      message = msg.text;\n    } else if (msg.text.length === 1) {\n      message = msg.text[0];\n    } else {\n      msg.text.forEach(\n        (t: string) =>\n          (message += \"<p>\" + this.sanitizer.sanitize(SecurityContext.HTML, t) + \"</p>\")\n      );\n      options.enableHtml = true;\n    }\n    if (msg.options != null) {\n      if (msg.options.trustedHtml === true) {\n        options.enableHtml = true;\n      }\n      if (msg.options.timeout != null && msg.options.timeout > 0) {\n        options.timeOut = msg.options.timeout;\n      }\n    }\n\n    this.toastrService.show(message, msg.title, options, \"toast-\" + msg.type);\n  }\n\n  private async showDialog(msg: any) {\n    let iconClasses: string = null;\n    const type = msg.type;\n    if (type != null) {\n      // If you add custom types to this part, the type to SweetAlertIcon cast below needs to be changed.\n      switch (type) {\n        case \"success\":\n          iconClasses = \"bwi-check text-success\";\n          break;\n        case \"warning\":\n          iconClasses = \"bwi-exclamation-triangle text-warning\";\n          break;\n        case \"error\":\n          iconClasses = \"bwi-error text-danger\";\n          break;\n        case \"info\":\n          iconClasses = \"bwi-info-circle text-info\";\n          break;\n        default:\n          break;\n      }\n    }\n\n    const cancelText = msg.cancelText;\n    const confirmText = msg.confirmText;\n    const confirmed = await Swal.fire({\n      heightAuto: false,\n      buttonsStyling: false,\n      icon: type as SweetAlertIcon, // required to be any of the SweetAlertIcons to output the iconHtml.\n      iconHtml:\n        iconClasses != null ? `<i class=\"swal-custom-icon bwi ${iconClasses}\"></i>` : undefined,\n      text: msg.text,\n      html: msg.html,\n      titleText: msg.title,\n      showCancelButton: cancelText != null,\n      cancelButtonText: cancelText,\n      showConfirmButton: true,\n      confirmButtonText: confirmText == null ? this.i18nService.t(\"ok\") : confirmText,\n      timer: 300000,\n    });\n\n    this.messagingService.send(\"showDialogResolve\", {\n      dialogId: msg.dialogId,\n      confirmed: confirmed.value,\n    });\n  }\n\n  private async clearComponentStates() {\n    if (!(await this.stateService.getIsAuthenticated())) {\n      return;\n    }\n\n    await Promise.all([\n      this.stateService.setBrowserGroupingComponentState(null),\n      this.stateService.setBrowserVaultItemsComponentState(null),\n      this.stateService.setBrowserSendComponentState(null),\n      this.stateService.setBrowserSendTypeComponentState(null),\n    ]);\n  }\n}\n","import { InjectionToken } from \"@angular/core\";\n\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/abstractions/storage.service\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\n\nexport const WINDOW = new InjectionToken<Window>(\"WINDOW\");\nexport const MEMORY_STORAGE = new InjectionToken<AbstractMemoryStorageService>(\"MEMORY_STORAGE\");\nexport const SECURE_STORAGE = new InjectionToken<AbstractStorageService>(\"SECURE_STORAGE\");\nexport const STATE_FACTORY = new InjectionToken<StateFactory>(\"STATE_FACTORY\");\nexport const STATE_SERVICE_USE_CACHE = new InjectionToken<boolean>(\"STATE_SERVICE_USE_CACHE\");\nexport const LOGOUT_CALLBACK = new InjectionToken<(expired: boolean, userId?: string) => void>(\n  \"LOGOUT_CALLBACK\"\n);\nexport const LOCKED_CALLBACK = new InjectionToken<() => void>(\"LOCKED_CALLBACK\");\nexport const CLIENT_TYPE = new InjectionToken<boolean>(\"CLIENT_TYPE\");\nexport const LOCALES_DIRECTORY = new InjectionToken<string>(\"LOCALES_DIRECTORY\");\nexport const SYSTEM_LANGUAGE = new InjectionToken<string>(\"SYSTEM_LANGUAGE\");\nexport const LOG_MAC_FAILURES = new InjectionToken<string>(\"LOG_MAC_FAILURES\");\n","import { ServerConfigResponse } from \"../../models/response/server-config.response\";\n\nexport abstract class ConfigApiServiceAbstraction {\n  get: () => Promise<ServerConfigResponse>;\n}\n","import { IEncrypted } from \"../interfaces/IEncrypted\";\nimport { Decryptable } from \"../interfaces/decryptable.interface\";\nimport { InitializerMetadata } from \"../interfaces/initializer-metadata.interface\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\n\nexport abstract class EncryptService {\n  abstract encrypt(plainValue: string | ArrayBuffer, key: SymmetricCryptoKey): Promise<EncString>;\n  abstract encryptToBytes: (\n    plainValue: ArrayBuffer,\n    key?: SymmetricCryptoKey\n  ) => Promise<EncArrayBuffer>;\n  abstract decryptToUtf8: (encString: EncString, key: SymmetricCryptoKey) => Promise<string>;\n  abstract decryptToBytes: (encThing: IEncrypted, key: SymmetricCryptoKey) => Promise<ArrayBuffer>;\n  abstract resolveLegacyKey: (key: SymmetricCryptoKey, encThing: IEncrypted) => SymmetricCryptoKey;\n  abstract decryptItems: <T extends InitializerMetadata>(\n    items: Decryptable<T>[],\n    key: SymmetricCryptoKey\n  ) => Promise<T[]>;\n}\n","export abstract class EventUploadService {\n  uploadEvents: (userId?: string) => Promise<void>;\n}\n","import { FileUploadType } from \"../../enums\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../models/domain/enc-string\";\n\nexport abstract class FileUploadService {\n  upload: (\n    uploadData: { url: string; fileUploadType: FileUploadType },\n    fileName: EncString,\n    encryptedFileData: EncArrayBuffer,\n    fileUploadMethods: FileUploadApiMethods\n  ) => Promise<void>;\n}\n\nexport type FileUploadApiMethods = {\n  postDirect: (fileData: FormData) => Promise<void>;\n  renewFileUploadUrl: () => Promise<string>;\n  rollback: () => Promise<void>;\n};\n","export abstract class NotificationsService {\n  init: () => Promise<void>;\n  updateConnection: (sync?: boolean) => Promise<void>;\n  reconnectFromActivity: () => Promise<void>;\n  disconnectFromInactivity: () => Promise<void>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { OrganizationDomainResponse } from \"./responses/organization-domain.response\";\n\nexport abstract class OrgDomainServiceAbstraction {\n  orgDomains$: Observable<OrganizationDomainResponse[]>;\n\n  get: (orgDomainId: string) => OrganizationDomainResponse;\n\n  copyDnsTxt: (dnsTxt: string) => void;\n}\n\n// Note: this separate class is designed to hold methods that are not\n// meant to be used in components (e.g., data write methods)\nexport abstract class OrgDomainInternalServiceAbstraction extends OrgDomainServiceAbstraction {\n  upsert: (orgDomains: OrganizationDomainResponse[]) => void;\n  replace: (orgDomains: OrganizationDomainResponse[]) => void;\n  clearCache: () => void;\n  delete: (orgDomainIds: string[]) => void;\n}\n","import { Observable } from \"rxjs\";\n\nimport { AccountSettingsSettings } from \"../models/domain/account\";\n\nexport abstract class SettingsService {\n  settings$: Observable<AccountSettingsSettings>;\n\n  setEquivalentDomains: (equivalentDomains: string[][]) => Promise<any>;\n  getEquivalentDomains: (url: string) => Set<string>;\n  clear: (userId?: string) => Promise<void>;\n}\n","export abstract class StateMigrationService {\n  needsMigration: () => Promise<boolean>;\n  migrate: () => Promise<void>;\n}\n","import { MemoryStorageOptions, StorageOptions } from \"../models/domain/storage-options\";\n\nexport abstract class AbstractStorageService {\n  abstract get<T>(key: string, options?: StorageOptions): Promise<T>;\n  abstract has(key: string, options?: StorageOptions): Promise<boolean>;\n  abstract save<T>(key: string, obj: T, options?: StorageOptions): Promise<void>;\n  abstract remove(key: string, options?: StorageOptions): Promise<void>;\n}\n\nexport abstract class AbstractMemoryStorageService extends AbstractStorageService {\n  // Used to identify the service in the session sync decorator framework\n  static readonly TYPE = \"MemoryStorageService\";\n  readonly type = AbstractMemoryStorageService.TYPE;\n\n  abstract get<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T>;\n  abstract getBypassCache<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T>;\n}\n","import { VerifyOTPRequest } from \"../../auth/models/request/verify-otp.request\";\n\nexport abstract class UserVerificationApiServiceAbstraction {\n  postAccountVerifyOTP: (request: VerifyOTPRequest) => Promise<void>;\n  postAccountRequestOTP: () => Promise<void>;\n}\n","import { Provider } from \"../../models/domain/provider\";\nimport { ProviderData } from \"../models/data/provider.data\";\n\nexport abstract class ProviderService {\n  get: (id: string) => Promise<Provider>;\n  getAll: () => Promise<Provider[]>;\n  save: (providers: { [id: string]: ProviderData }) => Promise<any>;\n}\n","import { CollectionDetailsResponse } from \"../response/collection.response\";\n\nexport class CollectionData {\n  id: string;\n  organizationId: string;\n  name: string;\n  externalId: string;\n  readOnly: boolean;\n\n  constructor(response: CollectionDetailsResponse) {\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.name = response.name;\n    this.externalId = response.externalId;\n    this.readOnly = response.readOnly;\n  }\n}\n","import { ITreeNodeObject } from \"../../../models/domain/tree-node\";\nimport { View } from \"../../../models/view/view\";\nimport { Collection } from \"../domain/collection\";\nimport { CollectionAccessDetailsResponse } from \"../response/collection.response\";\n\nexport const NestingDelimiter = \"/\";\n\nexport class CollectionView implements View, ITreeNodeObject {\n  id: string = null;\n  organizationId: string = null;\n  name: string = null;\n  externalId: string = null;\n  readOnly: boolean = null;\n  hidePasswords: boolean = null;\n\n  constructor(c?: Collection | CollectionAccessDetailsResponse) {\n    if (!c) {\n      return;\n    }\n\n    this.id = c.id;\n    this.organizationId = c.organizationId;\n    this.externalId = c.externalId;\n    if (c instanceof Collection) {\n      this.readOnly = c.readOnly;\n      this.hidePasswords = c.hidePasswords;\n    }\n  }\n}\n","import Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { CollectionData } from \"../data/collection.data\";\nimport { CollectionView } from \"../view/collection.view\";\n\nexport class Collection extends Domain {\n  id: string;\n  organizationId: string;\n  name: EncString;\n  externalId: string;\n  readOnly: boolean;\n  hidePasswords: boolean;\n\n  constructor(obj?: CollectionData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        organizationId: null,\n        name: null,\n        externalId: null,\n        readOnly: null,\n        hidePasswords: null,\n      },\n      [\"id\", \"organizationId\", \"externalId\", \"readOnly\", \"hidePasswords\"]\n    );\n  }\n\n  decrypt(): Promise<CollectionView> {\n    return this.decryptObj(\n      new CollectionView(this),\n      {\n        name: null,\n      },\n      this.organizationId\n    );\n  }\n}\n","import { CryptoService } from \"../../abstractions/crypto.service\";\nimport { I18nService } from \"../../abstractions/i18n.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { ServiceUtils } from \"../../misc/serviceUtils\";\nimport { Utils } from \"../../misc/utils\";\nimport { TreeNode } from \"../../models/domain/tree-node\";\nimport { CollectionService as CollectionServiceAbstraction } from \"../abstractions/collection.service\";\nimport { CollectionData } from \"../models/data/collection.data\";\nimport { Collection } from \"../models/domain/collection\";\nimport { CollectionView } from \"../models/view/collection.view\";\n\nconst NestingDelimiter = \"/\";\n\nexport class CollectionService implements CollectionServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private stateService: StateService\n  ) {}\n\n  async clearCache(userId?: string): Promise<void> {\n    await this.stateService.setDecryptedCollections(null, { userId: userId });\n  }\n\n  async encrypt(model: CollectionView): Promise<Collection> {\n    if (model.organizationId == null) {\n      throw new Error(\"Collection has no organization id.\");\n    }\n    const key = await this.cryptoService.getOrgKey(model.organizationId);\n    if (key == null) {\n      throw new Error(\"No key for this collection's organization.\");\n    }\n    const collection = new Collection();\n    collection.id = model.id;\n    collection.organizationId = model.organizationId;\n    collection.readOnly = model.readOnly;\n    collection.name = await this.cryptoService.encrypt(model.name, key);\n    return collection;\n  }\n\n  async decryptMany(collections: Collection[]): Promise<CollectionView[]> {\n    if (collections == null) {\n      return [];\n    }\n    const decCollections: CollectionView[] = [];\n    const promises: Promise<any>[] = [];\n    collections.forEach((collection) => {\n      promises.push(collection.decrypt().then((c) => decCollections.push(c)));\n    });\n    await Promise.all(promises);\n    return decCollections.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n  }\n\n  async get(id: string): Promise<Collection> {\n    const collections = await this.stateService.getEncryptedCollections();\n    // eslint-disable-next-line\n    if (collections == null || !collections.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Collection(collections[id]);\n  }\n\n  async getAll(): Promise<Collection[]> {\n    const collections = await this.stateService.getEncryptedCollections();\n    const response: Collection[] = [];\n    for (const id in collections) {\n      // eslint-disable-next-line\n      if (collections.hasOwnProperty(id)) {\n        response.push(new Collection(collections[id]));\n      }\n    }\n    return response;\n  }\n\n  async getAllDecrypted(): Promise<CollectionView[]> {\n    let decryptedCollections = await this.stateService.getDecryptedCollections();\n    if (decryptedCollections != null) {\n      return decryptedCollections;\n    }\n\n    const hasKey = await this.cryptoService.hasKey();\n    if (!hasKey) {\n      throw new Error(\"No key.\");\n    }\n\n    const collections = await this.getAll();\n    decryptedCollections = await this.decryptMany(collections);\n\n    await this.stateService.setDecryptedCollections(decryptedCollections);\n    return decryptedCollections;\n  }\n\n  async getAllNested(collections: CollectionView[] = null): Promise<TreeNode<CollectionView>[]> {\n    if (collections == null) {\n      collections = await this.getAllDecrypted();\n    }\n    const nodes: TreeNode<CollectionView>[] = [];\n    collections.forEach((c) => {\n      const collectionCopy = new CollectionView();\n      collectionCopy.id = c.id;\n      collectionCopy.organizationId = c.organizationId;\n      const parts = c.name != null ? c.name.replace(/^\\/+|\\/+$/g, \"\").split(NestingDelimiter) : [];\n      ServiceUtils.nestedTraverse(nodes, 0, parts, collectionCopy, null, NestingDelimiter);\n    });\n    return nodes;\n  }\n\n  /**\n   * @deprecated August 30 2022: Moved to new Vault Filter Service\n   * Remove when Desktop and Browser are updated\n   */\n  async getNested(id: string): Promise<TreeNode<CollectionView>> {\n    const collections = await this.getAllNested();\n    return ServiceUtils.getTreeNodeObjectFromList(collections, id) as TreeNode<CollectionView>;\n  }\n\n  async upsert(collection: CollectionData | CollectionData[]): Promise<any> {\n    let collections = await this.stateService.getEncryptedCollections();\n    if (collections == null) {\n      collections = {};\n    }\n\n    if (collection instanceof CollectionData) {\n      const c = collection as CollectionData;\n      collections[c.id] = c;\n    } else {\n      (collection as CollectionData[]).forEach((c) => {\n        collections[c.id] = c;\n      });\n    }\n\n    await this.replace(collections);\n  }\n\n  async replace(collections: { [id: string]: CollectionData }): Promise<any> {\n    await this.clearCache();\n    await this.stateService.setEncryptedCollections(collections);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    await this.clearCache(userId);\n    await this.stateService.setEncryptedCollections(null, { userId: userId });\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const collections = await this.stateService.getEncryptedCollections();\n    if (collections == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      delete collections[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete collections[i];\n      });\n    }\n\n    await this.replace(collections);\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class ApiKeyResponse extends BaseResponse {\n  apiKey: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.apiKey = this.getResponseProperty(\"ApiKey\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n","export enum SsoType {\n  None = 0,\n  OpenIdConnect = 1,\n  Saml2 = 2,\n}\n\nexport enum OpenIdConnectRedirectBehavior {\n  RedirectGet = 0,\n  FormPost = 1,\n}\n\nexport enum Saml2BindingType {\n  HttpRedirect = 1,\n  HttpPost = 2,\n}\n\nexport enum Saml2NameIdFormat {\n  NotConfigured = 0,\n  Unspecified = 1,\n  EmailAddress = 2,\n  X509SubjectName = 3,\n  WindowsDomainQualifiedName = 4,\n  KerberosPrincipalName = 5,\n  EntityIdentifier = 6,\n  Persistent = 7,\n  Transient = 8,\n}\n\nexport enum Saml2SigningBehavior {\n  IfIdpWantAuthnRequestsSigned = 0,\n  Always = 1,\n  Never = 3,\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport {\n  OpenIdConnectRedirectBehavior,\n  Saml2BindingType,\n  Saml2NameIdFormat,\n  Saml2SigningBehavior,\n  SsoType,\n} from \"../../enums/sso\";\nimport { SsoConfigView } from \"../view/sso-config.view\";\n\nexport class SsoConfigApi extends BaseResponse {\n  static fromView(view: SsoConfigView, api = new SsoConfigApi()) {\n    api.configType = view.configType;\n\n    api.keyConnectorEnabled = view.keyConnectorEnabled;\n    api.keyConnectorUrl = view.keyConnectorUrl;\n\n    if (api.configType === SsoType.OpenIdConnect) {\n      api.authority = view.openId.authority;\n      api.clientId = view.openId.clientId;\n      api.clientSecret = view.openId.clientSecret;\n      api.metadataAddress = view.openId.metadataAddress;\n      api.redirectBehavior = view.openId.redirectBehavior;\n      api.getClaimsFromUserInfoEndpoint = view.openId.getClaimsFromUserInfoEndpoint;\n      api.additionalScopes = view.openId.additionalScopes;\n      api.additionalUserIdClaimTypes = view.openId.additionalUserIdClaimTypes;\n      api.additionalEmailClaimTypes = view.openId.additionalEmailClaimTypes;\n      api.additionalNameClaimTypes = view.openId.additionalNameClaimTypes;\n      api.acrValues = view.openId.acrValues;\n      api.expectedReturnAcrValue = view.openId.expectedReturnAcrValue;\n    } else if (api.configType === SsoType.Saml2) {\n      api.spNameIdFormat = view.saml.spNameIdFormat;\n      api.spOutboundSigningAlgorithm = view.saml.spOutboundSigningAlgorithm;\n      api.spSigningBehavior = view.saml.spSigningBehavior;\n      api.spMinIncomingSigningAlgorithm = view.saml.spMinIncomingSigningAlgorithm;\n      api.spWantAssertionsSigned = view.saml.spWantAssertionsSigned;\n      api.spValidateCertificates = view.saml.spValidateCertificates;\n\n      api.idpEntityId = view.saml.idpEntityId;\n      api.idpBindingType = view.saml.idpBindingType;\n      api.idpSingleSignOnServiceUrl = view.saml.idpSingleSignOnServiceUrl;\n      api.idpSingleLogoutServiceUrl = view.saml.idpSingleLogoutServiceUrl;\n      api.idpX509PublicCert = view.saml.idpX509PublicCert;\n      api.idpOutboundSigningAlgorithm = view.saml.idpOutboundSigningAlgorithm;\n      api.idpAllowUnsolicitedAuthnResponse = view.saml.idpAllowUnsolicitedAuthnResponse;\n      api.idpWantAuthnRequestsSigned = view.saml.idpWantAuthnRequestsSigned;\n\n      // Value is inverted in the api model (disable instead of allow)\n      api.idpDisableOutboundLogoutRequests = !view.saml.idpAllowOutboundLogoutRequests;\n    }\n\n    return api;\n  }\n  configType: SsoType;\n\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n\n  // OpenId\n  authority: string;\n  clientId: string;\n  clientSecret: string;\n  metadataAddress: string;\n  redirectBehavior: OpenIdConnectRedirectBehavior;\n  getClaimsFromUserInfoEndpoint: boolean;\n  additionalScopes: string;\n  additionalUserIdClaimTypes: string;\n  additionalEmailClaimTypes: string;\n  additionalNameClaimTypes: string;\n  acrValues: string;\n  expectedReturnAcrValue: string;\n\n  // SAML\n  spNameIdFormat: Saml2NameIdFormat;\n  spOutboundSigningAlgorithm: string;\n  spSigningBehavior: Saml2SigningBehavior;\n  spMinIncomingSigningAlgorithm: string;\n  spWantAssertionsSigned: boolean;\n  spValidateCertificates: boolean;\n\n  idpEntityId: string;\n  idpBindingType: Saml2BindingType;\n  idpSingleSignOnServiceUrl: string;\n  idpSingleLogoutServiceUrl: string;\n  idpX509PublicCert: string;\n  idpOutboundSigningAlgorithm: string;\n  idpAllowUnsolicitedAuthnResponse: boolean;\n  idpDisableOutboundLogoutRequests: boolean;\n  idpWantAuthnRequestsSigned: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n\n    this.configType = this.getResponseProperty(\"ConfigType\");\n\n    this.keyConnectorEnabled = this.getResponseProperty(\"KeyConnectorEnabled\");\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n\n    this.authority = this.getResponseProperty(\"Authority\");\n    this.clientId = this.getResponseProperty(\"ClientId\");\n    this.clientSecret = this.getResponseProperty(\"ClientSecret\");\n    this.metadataAddress = this.getResponseProperty(\"MetadataAddress\");\n    this.redirectBehavior = this.getResponseProperty(\"RedirectBehavior\");\n    this.getClaimsFromUserInfoEndpoint = this.getResponseProperty(\"GetClaimsFromUserInfoEndpoint\");\n    this.additionalScopes = this.getResponseProperty(\"AdditionalScopes\");\n    this.additionalUserIdClaimTypes = this.getResponseProperty(\"AdditionalUserIdClaimTypes\");\n    this.additionalEmailClaimTypes = this.getResponseProperty(\"AdditionalEmailClaimTypes\");\n    this.additionalNameClaimTypes = this.getResponseProperty(\"AdditionalNameClaimTypes\");\n    this.acrValues = this.getResponseProperty(\"AcrValues\");\n    this.expectedReturnAcrValue = this.getResponseProperty(\"ExpectedReturnAcrValue\");\n\n    this.spNameIdFormat = this.getResponseProperty(\"SpNameIdFormat\");\n    this.spOutboundSigningAlgorithm = this.getResponseProperty(\"SpOutboundSigningAlgorithm\");\n    this.spSigningBehavior = this.getResponseProperty(\"SpSigningBehavior\");\n    this.spMinIncomingSigningAlgorithm = this.getResponseProperty(\"SpMinIncomingSigningAlgorithm\");\n    this.spWantAssertionsSigned = this.getResponseProperty(\"SpWantAssertionsSigned\");\n    this.spValidateCertificates = this.getResponseProperty(\"SpValidateCertificates\");\n\n    this.idpEntityId = this.getResponseProperty(\"IdpEntityId\");\n    this.idpBindingType = this.getResponseProperty(\"IdpBindingType\");\n    this.idpSingleSignOnServiceUrl = this.getResponseProperty(\"IdpSingleSignOnServiceUrl\");\n    this.idpSingleLogoutServiceUrl = this.getResponseProperty(\"IdpSingleLogoutServiceUrl\");\n    this.idpX509PublicCert = this.getResponseProperty(\"IdpX509PublicCert\");\n    this.idpOutboundSigningAlgorithm = this.getResponseProperty(\"IdpOutboundSigningAlgorithm\");\n    this.idpAllowUnsolicitedAuthnResponse = this.getResponseProperty(\n      \"IdpAllowUnsolicitedAuthnResponse\"\n    );\n    this.idpDisableOutboundLogoutRequests = this.getResponseProperty(\n      \"IdpDisableOutboundLogoutRequests\"\n    );\n    this.idpWantAuthnRequestsSigned = this.getResponseProperty(\"IdpWantAuthnRequestsSigned\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { SsoConfigApi } from \"../api/sso-config.api\";\n\nexport class OrganizationSsoResponse extends BaseResponse {\n  enabled: boolean;\n  identifier: string;\n  data: SsoConfigApi;\n  urls: SsoUrls;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.identifier = this.getResponseProperty(\"Identifier\");\n    this.data =\n      this.getResponseProperty(\"Data\") != null\n        ? new SsoConfigApi(this.getResponseProperty(\"Data\"))\n        : null;\n    this.urls = new SsoUrls(this.getResponseProperty(\"Urls\"));\n  }\n}\n\nclass SsoUrls extends BaseResponse {\n  callbackPath: string;\n  signedOutCallbackPath: string;\n  spEntityId: string;\n  spMetadataUrl: string;\n  spAcsUrl: string;\n\n  constructor(response: any) {\n    super(response);\n    this.callbackPath = this.getResponseProperty(\"CallbackPath\");\n    this.signedOutCallbackPath = this.getResponseProperty(\"SignedOutCallbackPath\");\n    this.spEntityId = this.getResponseProperty(\"SpEntityId\");\n    this.spMetadataUrl = this.getResponseProperty(\"SpMetadataUrl\");\n    this.spAcsUrl = this.getResponseProperty(\"SpAcsUrl\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { PaymentMethodType, TransactionType } from \"../../enums\";\n\nexport class BillingResponse extends BaseResponse {\n  balance: number;\n  paymentSource: BillingSourceResponse;\n  invoices: BillingInvoiceResponse[] = [];\n  transactions: BillingTransactionResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.balance = this.getResponseProperty(\"Balance\");\n    const paymentSource = this.getResponseProperty(\"PaymentSource\");\n    const transactions = this.getResponseProperty(\"Transactions\");\n    const invoices = this.getResponseProperty(\"Invoices\");\n    this.paymentSource = paymentSource == null ? null : new BillingSourceResponse(paymentSource);\n    if (transactions != null) {\n      this.transactions = transactions.map((t: any) => new BillingTransactionResponse(t));\n    }\n    if (invoices != null) {\n      this.invoices = invoices.map((i: any) => new BillingInvoiceResponse(i));\n    }\n  }\n\n  get hasNoHistory() {\n    return this.invoices.length == 0 && this.transactions.length == 0;\n  }\n}\n\nexport class BillingSourceResponse extends BaseResponse {\n  type: PaymentMethodType;\n  cardBrand: string;\n  description: string;\n  needsVerification: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.cardBrand = this.getResponseProperty(\"CardBrand\");\n    this.description = this.getResponseProperty(\"Description\");\n    this.needsVerification = this.getResponseProperty(\"NeedsVerification\");\n  }\n}\n\nexport class BillingInvoiceResponse extends BaseResponse {\n  url: string;\n  pdfUrl: string;\n  number: string;\n  paid: boolean;\n  date: string;\n  amount: number;\n\n  constructor(response: any) {\n    super(response);\n    this.url = this.getResponseProperty(\"Url\");\n    this.pdfUrl = this.getResponseProperty(\"PdfUrl\");\n    this.number = this.getResponseProperty(\"Number\");\n    this.paid = this.getResponseProperty(\"Paid\");\n    this.date = this.getResponseProperty(\"Date\");\n    this.amount = this.getResponseProperty(\"Amount\");\n  }\n}\n\nexport class BillingTransactionResponse extends BaseResponse {\n  createdDate: string;\n  amount: number;\n  refunded: boolean;\n  partiallyRefunded: boolean;\n  refundedAmount: number;\n  type: TransactionType;\n  paymentMethodType: PaymentMethodType;\n  details: string;\n\n  constructor(response: any) {\n    super(response);\n    this.createdDate = this.getResponseProperty(\"CreatedDate\");\n    this.amount = this.getResponseProperty(\"Amount\");\n    this.refunded = this.getResponseProperty(\"Refunded\");\n    this.partiallyRefunded = this.getResponseProperty(\"PartiallyRefunded\");\n    this.refundedAmount = this.getResponseProperty(\"RefundedAmount\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.paymentMethodType = this.getResponseProperty(\"PaymentMethodType\");\n    this.details = this.getResponseProperty(\"Details\");\n  }\n}\n","import { ProductType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { PlanType } from \"../../enums\";\n\nexport class PlanResponse extends BaseResponse {\n  type: PlanType;\n  product: ProductType;\n  name: string;\n  isAnnual: boolean;\n  nameLocalizationKey: string;\n  descriptionLocalizationKey: string;\n  canBeUsedByBusiness: boolean;\n  baseSeats: number;\n  baseStorageGb: number;\n  maxCollections: number;\n  maxUsers: number;\n\n  hasAdditionalSeatsOption: boolean;\n  maxAdditionalSeats: number;\n  hasAdditionalStorageOption: boolean;\n  maxAdditionalStorage: number;\n  hasPremiumAccessOption: boolean;\n  trialPeriodDays: number;\n\n  hasSelfHost: boolean;\n  hasPolicies: boolean;\n  hasGroups: boolean;\n  hasDirectory: boolean;\n  hasEvents: boolean;\n  hasTotp: boolean;\n  has2fa: boolean;\n  hasApi: boolean;\n  hasSso: boolean;\n  hasResetPassword: boolean;\n  usersGetPremium: boolean;\n\n  upgradeSortOrder: number;\n  displaySortOrder: number;\n  legacyYear: number;\n  disabled: boolean;\n\n  stripePlanId: string;\n  stripeSeatPlanId: string;\n  stripeStoragePlanId: string;\n  stripePremiumAccessPlanId: string;\n  basePrice: number;\n  seatPrice: number;\n  additionalStoragePricePerGb: number;\n  premiumAccessOptionPrice: number;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.product = this.getResponseProperty(\"Product\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.isAnnual = this.getResponseProperty(\"IsAnnual\");\n    this.nameLocalizationKey = this.getResponseProperty(\"NameLocalizationKey\");\n    this.descriptionLocalizationKey = this.getResponseProperty(\"DescriptionLocalizationKey\");\n    this.canBeUsedByBusiness = this.getResponseProperty(\"CanBeUsedByBusiness\");\n    this.baseSeats = this.getResponseProperty(\"BaseSeats\");\n    this.baseStorageGb = this.getResponseProperty(\"BaseStorageGb\");\n    this.maxCollections = this.getResponseProperty(\"MaxCollections\");\n    this.maxUsers = this.getResponseProperty(\"MaxUsers\");\n    this.hasAdditionalSeatsOption = this.getResponseProperty(\"HasAdditionalSeatsOption\");\n    this.maxAdditionalSeats = this.getResponseProperty(\"MaxAdditionalSeats\");\n    this.hasAdditionalStorageOption = this.getResponseProperty(\"HasAdditionalStorageOption\");\n    this.maxAdditionalStorage = this.getResponseProperty(\"MaxAdditionalStorage\");\n    this.hasPremiumAccessOption = this.getResponseProperty(\"HasPremiumAccessOption\");\n    this.trialPeriodDays = this.getResponseProperty(\"TrialPeriodDays\");\n    this.hasSelfHost = this.getResponseProperty(\"HasSelfHost\");\n    this.hasPolicies = this.getResponseProperty(\"HasPolicies\");\n    this.hasGroups = this.getResponseProperty(\"HasGroups\");\n    this.hasDirectory = this.getResponseProperty(\"HasDirectory\");\n    this.hasEvents = this.getResponseProperty(\"HasEvents\");\n    this.hasTotp = this.getResponseProperty(\"HasTotp\");\n    this.has2fa = this.getResponseProperty(\"Has2fa\");\n    this.hasApi = this.getResponseProperty(\"HasApi\");\n    this.hasSso = this.getResponseProperty(\"HasSso\");\n    this.hasResetPassword = this.getResponseProperty(\"HasResetPassword\");\n    this.usersGetPremium = this.getResponseProperty(\"UsersGetPremium\");\n    this.upgradeSortOrder = this.getResponseProperty(\"UpgradeSortOrder\");\n    this.displaySortOrder = this.getResponseProperty(\"SortOrder\");\n    this.legacyYear = this.getResponseProperty(\"LegacyYear\");\n    this.disabled = this.getResponseProperty(\"Disabled\");\n    this.stripePlanId = this.getResponseProperty(\"StripePlanId\");\n    this.stripeSeatPlanId = this.getResponseProperty(\"StripeSeatPlanId\");\n    this.stripeStoragePlanId = this.getResponseProperty(\"StripeStoragePlanId\");\n    this.stripePremiumAccessPlanId = this.getResponseProperty(\"StripePremiumAccessPlanId\");\n    this.basePrice = this.getResponseProperty(\"BasePrice\");\n    this.seatPrice = this.getResponseProperty(\"SeatPrice\");\n    this.additionalStoragePricePerGb = this.getResponseProperty(\"AdditionalStoragePricePerGb\");\n    this.premiumAccessOptionPrice = this.getResponseProperty(\"PremiumAccessOptionPrice\");\n  }\n}\n","import { PlanType } from \"../../../billing/enums\";\nimport { PlanResponse } from \"../../../billing/models/response/plan.response\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationResponse extends BaseResponse {\n  id: string;\n  name: string;\n  businessName: string;\n  businessAddress1: string;\n  businessAddress2: string;\n  businessAddress3: string;\n  businessCountry: string;\n  businessTaxNumber: string;\n  billingEmail: string;\n  plan: PlanResponse;\n  planType: PlanType;\n  seats: number;\n  maxAutoscaleSeats: number;\n  maxCollections: number;\n  maxStorageGb: number;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  hasPublicAndPrivateKeys: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.businessName = this.getResponseProperty(\"BusinessName\");\n    this.businessAddress1 = this.getResponseProperty(\"BusinessAddress1\");\n    this.businessAddress2 = this.getResponseProperty(\"BusinessAddress2\");\n    this.businessAddress3 = this.getResponseProperty(\"BusinessAddress3\");\n    this.businessCountry = this.getResponseProperty(\"BusinessCountry\");\n    this.businessTaxNumber = this.getResponseProperty(\"BusinessTaxNumber\");\n    this.billingEmail = this.getResponseProperty(\"BillingEmail\");\n    const plan = this.getResponseProperty(\"Plan\");\n    this.plan = plan == null ? null : new PlanResponse(plan);\n    this.planType = this.getResponseProperty(\"PlanType\");\n    this.seats = this.getResponseProperty(\"Seats\");\n    this.maxAutoscaleSeats = this.getResponseProperty(\"MaxAutoscaleSeats\");\n    this.maxCollections = this.getResponseProperty(\"MaxCollections\");\n    this.maxStorageGb = this.getResponseProperty(\"MaxStorageGb\");\n    this.useGroups = this.getResponseProperty(\"UseGroups\");\n    this.useDirectory = this.getResponseProperty(\"UseDirectory\");\n    this.useEvents = this.getResponseProperty(\"UseEvents\");\n    this.useTotp = this.getResponseProperty(\"UseTotp\");\n    this.use2fa = this.getResponseProperty(\"Use2fa\");\n    this.useApi = this.getResponseProperty(\"UseApi\");\n    this.useResetPassword = this.getResponseProperty(\"UseResetPassword\");\n    this.useSecretsManager = this.getResponseProperty(\"UseSecretsManager\");\n    this.hasPublicAndPrivateKeys = this.getResponseProperty(\"HasPublicAndPrivateKeys\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class SubscriptionResponse extends BaseResponse {\n  storageName: string;\n  storageGb: number;\n  maxStorageGb: number;\n  subscription: BillingSubscriptionResponse;\n  upcomingInvoice: BillingSubscriptionUpcomingInvoiceResponse;\n  license: any;\n  expiration: string;\n  usingInAppPurchase: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.storageName = this.getResponseProperty(\"StorageName\");\n    this.storageGb = this.getResponseProperty(\"StorageGb\");\n    this.maxStorageGb = this.getResponseProperty(\"MaxStorageGb\");\n    this.license = this.getResponseProperty(\"License\");\n    this.expiration = this.getResponseProperty(\"Expiration\");\n    this.usingInAppPurchase = this.getResponseProperty(\"UsingInAppPurchase\");\n    const subscription = this.getResponseProperty(\"Subscription\");\n    const upcomingInvoice = this.getResponseProperty(\"UpcomingInvoice\");\n    this.subscription = subscription == null ? null : new BillingSubscriptionResponse(subscription);\n    this.upcomingInvoice =\n      upcomingInvoice == null\n        ? null\n        : new BillingSubscriptionUpcomingInvoiceResponse(upcomingInvoice);\n  }\n}\n\nexport class BillingSubscriptionResponse extends BaseResponse {\n  trialStartDate: string;\n  trialEndDate: string;\n  periodStartDate: string;\n  periodEndDate: string;\n  cancelledDate: string;\n  cancelAtEndDate: boolean;\n  status: string;\n  cancelled: boolean;\n  items: BillingSubscriptionItemResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.trialEndDate = this.getResponseProperty(\"TrialStartDate\");\n    this.trialEndDate = this.getResponseProperty(\"TrialEndDate\");\n    this.periodStartDate = this.getResponseProperty(\"PeriodStartDate\");\n    this.periodEndDate = this.getResponseProperty(\"PeriodEndDate\");\n    this.cancelledDate = this.getResponseProperty(\"CancelledDate\");\n    this.cancelAtEndDate = this.getResponseProperty(\"CancelAtEndDate\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.cancelled = this.getResponseProperty(\"Cancelled\");\n    const items = this.getResponseProperty(\"Items\");\n    if (items != null) {\n      this.items = items.map((i: any) => new BillingSubscriptionItemResponse(i));\n    }\n  }\n}\n\nexport class BillingSubscriptionItemResponse extends BaseResponse {\n  name: string;\n  amount: number;\n  quantity: number;\n  interval: string;\n  sponsoredSubscriptionItem: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.amount = this.getResponseProperty(\"Amount\");\n    this.quantity = this.getResponseProperty(\"Quantity\");\n    this.interval = this.getResponseProperty(\"Interval\");\n    this.sponsoredSubscriptionItem = this.getResponseProperty(\"SponsoredSubscriptionItem\");\n  }\n}\n\nexport class BillingSubscriptionUpcomingInvoiceResponse extends BaseResponse {\n  date: string;\n  amount?: number;\n\n  constructor(response: any) {\n    super(response);\n    this.date = this.getResponseProperty(\"Date\");\n    this.amount = this.getResponseProperty(\"Amount\");\n  }\n}\n","import { OrganizationResponse } from \"../../../admin-console/models/response/organization.response\";\n\nimport {\n  BillingSubscriptionResponse,\n  BillingSubscriptionUpcomingInvoiceResponse,\n} from \"./subscription.response\";\n\nexport class OrganizationSubscriptionResponse extends OrganizationResponse {\n  storageName: string;\n  storageGb: number;\n  subscription: BillingSubscriptionResponse;\n  upcomingInvoice: BillingSubscriptionUpcomingInvoiceResponse;\n  expiration: string;\n\n  constructor(response: any) {\n    super(response);\n    this.storageName = this.getResponseProperty(\"StorageName\");\n    this.storageGb = this.getResponseProperty(\"StorageGb\");\n    const subscription = this.getResponseProperty(\"Subscription\");\n    this.subscription = subscription == null ? null : new BillingSubscriptionResponse(subscription);\n    const upcomingInvoice = this.getResponseProperty(\"UpcomingInvoice\");\n    this.upcomingInvoice =\n      upcomingInvoice == null\n        ? null\n        : new BillingSubscriptionUpcomingInvoiceResponse(upcomingInvoice);\n    this.expiration = this.getResponseProperty(\"Expiration\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class PermissionsApi extends BaseResponse {\n  accessEventLogs: boolean;\n  accessImportExport: boolean;\n  accessReports: boolean;\n  createNewCollections: boolean;\n  editAnyCollection: boolean;\n  deleteAnyCollection: boolean;\n  editAssignedCollections: boolean;\n  deleteAssignedCollections: boolean;\n  manageCiphers: boolean;\n  manageGroups: boolean;\n  manageSso: boolean;\n  managePolicies: boolean;\n  manageUsers: boolean;\n  manageResetPassword: boolean;\n  manageScim: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return this;\n    }\n    this.accessEventLogs = this.getResponseProperty(\"AccessEventLogs\");\n    this.accessImportExport = this.getResponseProperty(\"AccessImportExport\");\n    this.accessReports = this.getResponseProperty(\"AccessReports\");\n\n    this.createNewCollections = this.getResponseProperty(\"CreateNewCollections\");\n    this.editAnyCollection = this.getResponseProperty(\"EditAnyCollection\");\n    this.deleteAnyCollection = this.getResponseProperty(\"DeleteAnyCollection\");\n    this.editAssignedCollections = this.getResponseProperty(\"EditAssignedCollections\");\n    this.deleteAssignedCollections = this.getResponseProperty(\"DeleteAssignedCollections\");\n\n    this.manageCiphers = this.getResponseProperty(\"ManageCiphers\");\n    this.manageGroups = this.getResponseProperty(\"ManageGroups\");\n    this.manageSso = this.getResponseProperty(\"ManageSso\");\n    this.managePolicies = this.getResponseProperty(\"ManagePolicies\");\n    this.manageUsers = this.getResponseProperty(\"ManageUsers\");\n    this.manageResetPassword = this.getResponseProperty(\"ManageResetPassword\");\n    this.manageScim = this.getResponseProperty(\"ManageScim\");\n  }\n}\n","import { ProductType, ProviderType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { OrganizationUserStatusType, OrganizationUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\n\nexport class ProfileOrganizationResponse extends BaseResponse {\n  id: string;\n  name: string;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  useActivateAutofillPolicy: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  key: string;\n  hasPublicAndPrivateKeys: boolean;\n  status: OrganizationUserStatusType;\n  type: OrganizationUserType;\n  enabled: boolean;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  providerId: string;\n  providerName: string;\n  providerType?: ProviderType;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.usePolicies = this.getResponseProperty(\"UsePolicies\");\n    this.useGroups = this.getResponseProperty(\"UseGroups\");\n    this.useDirectory = this.getResponseProperty(\"UseDirectory\");\n    this.useEvents = this.getResponseProperty(\"UseEvents\");\n    this.useTotp = this.getResponseProperty(\"UseTotp\");\n    this.use2fa = this.getResponseProperty(\"Use2fa\");\n    this.useApi = this.getResponseProperty(\"UseApi\");\n    this.useSso = this.getResponseProperty(\"UseSso\");\n    this.useKeyConnector = this.getResponseProperty(\"UseKeyConnector\") ?? false;\n    this.useScim = this.getResponseProperty(\"UseScim\") ?? false;\n    this.useCustomPermissions = this.getResponseProperty(\"UseCustomPermissions\") ?? false;\n    this.useResetPassword = this.getResponseProperty(\"UseResetPassword\");\n    this.useSecretsManager = this.getResponseProperty(\"UseSecretsManager\");\n    this.useActivateAutofillPolicy = this.getResponseProperty(\"UseActivateAutofillPolicy\");\n    this.selfHost = this.getResponseProperty(\"SelfHost\");\n    this.usersGetPremium = this.getResponseProperty(\"UsersGetPremium\");\n    this.seats = this.getResponseProperty(\"Seats\");\n    this.maxCollections = this.getResponseProperty(\"MaxCollections\");\n    this.maxStorageGb = this.getResponseProperty(\"MaxStorageGb\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.hasPublicAndPrivateKeys = this.getResponseProperty(\"HasPublicAndPrivateKeys\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.ssoBound = this.getResponseProperty(\"SsoBound\");\n    this.identifier = this.getResponseProperty(\"Identifier\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"permissions\"));\n    this.resetPasswordEnrolled = this.getResponseProperty(\"ResetPasswordEnrolled\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.providerName = this.getResponseProperty(\"ProviderName\");\n    this.providerType = this.getResponseProperty(\"ProviderType\");\n    this.familySponsorshipFriendlyName = this.getResponseProperty(\"FamilySponsorshipFriendlyName\");\n    this.familySponsorshipAvailable = this.getResponseProperty(\"FamilySponsorshipAvailable\");\n    this.planProductType = this.getResponseProperty(\"PlanProductType\");\n    this.keyConnectorEnabled = this.getResponseProperty(\"KeyConnectorEnabled\") ?? false;\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n    const familySponsorshipLastSyncDateString = this.getResponseProperty(\n      \"FamilySponsorshipLastSyncDate\"\n    );\n    if (familySponsorshipLastSyncDateString) {\n      this.familySponsorshipLastSyncDate = new Date(familySponsorshipLastSyncDateString);\n    }\n    const familySponsorshipValidUntilString = this.getResponseProperty(\n      \"FamilySponsorshipValidUntil\"\n    );\n    if (familySponsorshipValidUntilString) {\n      this.familySponsorshipValidUntil = new Date(familySponsorshipValidUntilString);\n    }\n    this.familySponsorshipToDelete = this.getResponseProperty(\"FamilySponsorshipToDelete\");\n    this.accessSecretsManager = this.getResponseProperty(\"AccessSecretsManager\");\n  }\n}\n","import { ProfileOrganizationResponse } from \"./profile-organization.response\";\n\nexport class ProfileProviderOrganizationResponse extends ProfileOrganizationResponse {\n  constructor(response: any) {\n    super(response);\n    this.keyConnectorEnabled = false;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { ProviderUserStatusType, ProviderUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\n\nexport class ProfileProviderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  key: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  permissions: PermissionsApi;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"permissions\"));\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.useEvents = this.getResponseProperty(\"UseEvents\");\n  }\n}\n","import { ProfileOrganizationResponse } from \"../../admin-console/models/response/profile-organization.response\";\nimport { ProfileProviderOrganizationResponse } from \"../../admin-console/models/response/profile-provider-organization.response\";\nimport { ProfileProviderResponse } from \"../../admin-console/models/response/profile-provider.response\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class ProfileResponse extends BaseResponse {\n  id: string;\n  name: string;\n  email: string;\n  emailVerified: boolean;\n  masterPasswordHint: string;\n  premiumPersonally: boolean;\n  premiumFromOrganization: boolean;\n  culture: string;\n  twoFactorEnabled: boolean;\n  key: string;\n  avatarColor: string;\n  privateKey: string;\n  securityStamp: string;\n  forcePasswordReset: boolean;\n  usesKeyConnector: boolean;\n  organizations: ProfileOrganizationResponse[] = [];\n  providers: ProfileProviderResponse[] = [];\n  providerOrganizations: ProfileProviderOrganizationResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.emailVerified = this.getResponseProperty(\"EmailVerified\");\n    this.masterPasswordHint = this.getResponseProperty(\"MasterPasswordHint\");\n    this.premiumPersonally = this.getResponseProperty(\"Premium\");\n    this.premiumFromOrganization = this.getResponseProperty(\"PremiumFromOrganization\");\n    this.culture = this.getResponseProperty(\"Culture\");\n    this.twoFactorEnabled = this.getResponseProperty(\"TwoFactorEnabled\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n    this.privateKey = this.getResponseProperty(\"PrivateKey\");\n    this.securityStamp = this.getResponseProperty(\"SecurityStamp\");\n    this.forcePasswordReset = this.getResponseProperty(\"ForcePasswordReset\") ?? false;\n    this.usesKeyConnector = this.getResponseProperty(\"UsesKeyConnector\") ?? false;\n\n    const organizations = this.getResponseProperty(\"Organizations\");\n    if (organizations != null) {\n      this.organizations = organizations.map((o: any) => new ProfileOrganizationResponse(o));\n    }\n    const providers = this.getResponseProperty(\"Providers\");\n    if (providers != null) {\n      this.providers = providers.map((o: any) => new ProfileProviderResponse(o));\n    }\n    const providerOrganizations = this.getResponseProperty(\"ProviderOrganizations\");\n    if (providerOrganizations != null) {\n      this.providerOrganizations = providerOrganizations.map(\n        (o: any) => new ProfileProviderOrganizationResponse(o)\n      );\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { ProfileResponse } from \"../../../models/response/profile.response\";\n\nexport class PaymentResponse extends BaseResponse {\n  userProfile: ProfileResponse;\n  paymentIntentClientSecret: string;\n  success: boolean;\n\n  constructor(response: any) {\n    super(response);\n    const userProfile = this.getResponseProperty(\"UserProfile\");\n    if (userProfile != null) {\n      this.userProfile = new ProfileResponse(userProfile);\n    }\n    this.paymentIntentClientSecret = this.getResponseProperty(\"PaymentIntentClientSecret\");\n    this.success = this.getResponseProperty(\"Success\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TaxInfoResponse extends BaseResponse {\n  taxId: string;\n  taxIdType: string;\n  line1: string;\n  line2: string;\n  city: string;\n  state: string;\n  country: string;\n  postalCode: string;\n\n  constructor(response: any) {\n    super(response);\n    this.taxId = this.getResponseProperty(\"TaxIdNumber\");\n    this.taxIdType = this.getResponseProperty(\"TaxIdType\");\n    this.line1 = this.getResponseProperty(\"Line1\");\n    this.line2 = this.getResponseProperty(\"Line2\");\n    this.city = this.getResponseProperty(\"City\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.country = this.getResponseProperty(\"Country\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class ListResponse<T> extends BaseResponse {\n  data: T[];\n  continuationToken: string;\n\n  constructor(response: any, t: new (dataResponse: any) => T) {\n    super(response);\n    const data = this.getResponseProperty(\"Data\");\n    this.data = data == null ? [] : data.map((dr: any) => new t(dr));\n    this.continuationToken = this.getResponseProperty(\"ContinuationToken\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { OrganizationApiKeyType } from \"../../enums\";\n\nexport class OrganizationApiKeyInformationResponse extends BaseResponse {\n  keyType: OrganizationApiKeyType;\n\n  constructor(response: any) {\n    super(response);\n    this.keyType = this.getResponseProperty(\"KeyType\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationAutoEnrollStatusResponse extends BaseResponse {\n  id: string;\n  resetPasswordEnabled: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.resetPasswordEnabled = this.getResponseProperty(\"ResetPasswordEnabled\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class KeysResponse extends BaseResponse {\n  privateKey: string;\n  publicKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.privateKey = this.getResponseProperty(\"PrivateKey\");\n    this.publicKey = this.getResponseProperty(\"PublicKey\");\n  }\n}\n","import { KeysResponse } from \"../../../models/response/keys.response\";\n\nexport class OrganizationKeysResponse extends KeysResponse {\n  constructor(response: any) {\n    super(response);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { ProductType, ProviderType } from \"../../../enums\";\nimport { OrganizationUserStatusType, OrganizationUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\nimport { OrganizationData } from \"../data/organization.data\";\n\nexport class Organization {\n  id: string;\n  name: string;\n  status: OrganizationUserStatusType;\n\n  /**\n   * The member's role in the organization.\n   * Avoid using this for permission checks - use the getters instead (e.g. isOwner, isAdmin, canManageX), because they\n   * properly handle permission inheritance and relationships.\n   */\n  type: OrganizationUserType;\n\n  enabled: boolean;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  useActivateAutofillPolicy: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  hasPublicAndPrivateKeys: boolean;\n  providerId: string;\n  providerName: string;\n  providerType?: ProviderType;\n  /**\n   * Indicates that a user is a ProviderUser for the organization\n   */\n  isProviderUser: boolean;\n  /**\n   * Indicates that a user is a member for the organization (may be `false` if they have access via a Provider only)\n   */\n  isMember: boolean;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(obj?: OrganizationData) {\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.name = obj.name;\n    this.status = obj.status;\n    this.type = obj.type;\n    this.enabled = obj.enabled;\n    this.usePolicies = obj.usePolicies;\n    this.useGroups = obj.useGroups;\n    this.useDirectory = obj.useDirectory;\n    this.useEvents = obj.useEvents;\n    this.useTotp = obj.useTotp;\n    this.use2fa = obj.use2fa;\n    this.useApi = obj.useApi;\n    this.useSso = obj.useSso;\n    this.useKeyConnector = obj.useKeyConnector;\n    this.useScim = obj.useScim;\n    this.useCustomPermissions = obj.useCustomPermissions;\n    this.useResetPassword = obj.useResetPassword;\n    this.useSecretsManager = obj.useSecretsManager;\n    this.useActivateAutofillPolicy = obj.useActivateAutofillPolicy;\n    this.selfHost = obj.selfHost;\n    this.usersGetPremium = obj.usersGetPremium;\n    this.seats = obj.seats;\n    this.maxCollections = obj.maxCollections;\n    this.maxStorageGb = obj.maxStorageGb;\n    this.ssoBound = obj.ssoBound;\n    this.identifier = obj.identifier;\n    this.permissions = obj.permissions;\n    this.resetPasswordEnrolled = obj.resetPasswordEnrolled;\n    this.userId = obj.userId;\n    this.hasPublicAndPrivateKeys = obj.hasPublicAndPrivateKeys;\n    this.providerId = obj.providerId;\n    this.providerName = obj.providerName;\n    this.providerType = obj.providerType;\n    this.isProviderUser = obj.isProviderUser;\n    this.isMember = obj.isMember;\n    this.familySponsorshipFriendlyName = obj.familySponsorshipFriendlyName;\n    this.familySponsorshipAvailable = obj.familySponsorshipAvailable;\n    this.planProductType = obj.planProductType;\n    this.keyConnectorEnabled = obj.keyConnectorEnabled;\n    this.keyConnectorUrl = obj.keyConnectorUrl;\n    this.familySponsorshipLastSyncDate = obj.familySponsorshipLastSyncDate;\n    this.familySponsorshipValidUntil = obj.familySponsorshipValidUntil;\n    this.familySponsorshipToDelete = obj.familySponsorshipToDelete;\n    this.accessSecretsManager = obj.accessSecretsManager;\n  }\n\n  get canAccess() {\n    if (this.isOwner) {\n      return true;\n    }\n    return this.enabled && this.status === OrganizationUserStatusType.Confirmed;\n  }\n\n  /**\n   * Whether a user has Manager permissions or greater\n   */\n  get isManager() {\n    return this.type === OrganizationUserType.Manager || this.isAdmin;\n  }\n\n  /**\n   * Whether a user has Admin permissions or greater\n   */\n  get isAdmin() {\n    return this.type === OrganizationUserType.Admin || this.isOwner;\n  }\n\n  /**\n   * Whether a user has Owner permissions (including ProviderUsers)\n   */\n  get isOwner() {\n    return this.type === OrganizationUserType.Owner || this.isProviderUser;\n  }\n\n  get canAccessEventLogs() {\n    return (this.isAdmin || this.permissions.accessEventLogs) && this.useEvents;\n  }\n\n  get canAccessImportExport() {\n    return this.isAdmin || this.permissions.accessImportExport;\n  }\n\n  get canAccessReports() {\n    return this.isAdmin || this.permissions.accessReports;\n  }\n\n  get canCreateNewCollections() {\n    return this.isManager || this.permissions.createNewCollections;\n  }\n\n  get canEditAnyCollection() {\n    return this.isAdmin || this.permissions.editAnyCollection;\n  }\n\n  get canUseAdminCollections() {\n    return this.canEditAnyCollection;\n  }\n\n  get canDeleteAnyCollection() {\n    return this.isAdmin || this.permissions.deleteAnyCollection;\n  }\n\n  get canViewAllCollections() {\n    return this.canCreateNewCollections || this.canEditAnyCollection || this.canDeleteAnyCollection;\n  }\n\n  get canEditAssignedCollections() {\n    return this.isManager || this.permissions.editAssignedCollections;\n  }\n\n  get canDeleteAssignedCollections() {\n    return this.isManager || this.permissions.deleteAssignedCollections;\n  }\n\n  get canViewAssignedCollections() {\n    return this.canDeleteAssignedCollections || this.canEditAssignedCollections;\n  }\n\n  get canManageGroups() {\n    return (this.isAdmin || this.permissions.manageGroups) && this.useGroups;\n  }\n\n  get canManageSso() {\n    return (this.isAdmin || this.permissions.manageSso) && this.useSso;\n  }\n\n  get canManageDomainVerification() {\n    return (this.isAdmin || this.permissions.manageSso) && this.useSso;\n  }\n\n  get canManageScim() {\n    return (this.isAdmin || this.permissions.manageScim) && this.useScim;\n  }\n\n  get canManagePolicies() {\n    return (this.isAdmin || this.permissions.managePolicies) && this.usePolicies;\n  }\n\n  get canManageUsers() {\n    return this.isAdmin || this.permissions.manageUsers;\n  }\n\n  get canManageUsersPassword() {\n    return this.isAdmin || this.permissions.manageResetPassword;\n  }\n\n  get isExemptFromPolicies() {\n    return this.canManagePolicies;\n  }\n\n  get canViewSubscription() {\n    if (this.canEditSubscription) {\n      return true;\n    }\n\n    return this.hasProvider && this.providerType === ProviderType.Msp\n      ? this.isProviderUser\n      : this.isOwner;\n  }\n\n  get canEditSubscription() {\n    return this.hasProvider ? this.isProviderUser : this.isOwner;\n  }\n\n  get canEditPaymentMethods() {\n    return this.canEditSubscription;\n  }\n\n  get canViewBillingHistory() {\n    return this.canEditSubscription;\n  }\n\n  get hasProvider() {\n    return this.providerId != null || this.providerName != null;\n  }\n\n  get canAccessSecretsManager() {\n    return this.useSecretsManager && this.accessSecretsManager;\n  }\n\n  get isFreeOrg() {\n    // return true if organization needs to be upgraded from a free org\n    return !this.useTotp;\n  }\n\n  static fromJSON(json: Jsonify<Organization>) {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Organization(), json, {\n      familySponsorshipLastSyncDate: new Date(json.familySponsorshipLastSyncDate),\n      familySponsorshipValidUntil: new Date(json.familySponsorshipValidUntil),\n    });\n  }\n}\n","import { BehaviorSubject, concatMap, map, Observable } from \"rxjs\";\n\nimport { StateService } from \"../../../abstractions/state.service\";\nimport {\n  InternalOrganizationService as InternalOrganizationServiceAbstraction,\n  isMember,\n} from \"../../abstractions/organization/organization.service.abstraction\";\nimport { OrganizationData } from \"../../models/data/organization.data\";\nimport { Organization } from \"../../models/domain/organization\";\n\nexport class OrganizationService implements InternalOrganizationServiceAbstraction {\n  protected _organizations = new BehaviorSubject<Organization[]>([]);\n\n  organizations$ = this._organizations.asObservable();\n  memberOrganizations$ = this.organizations$.pipe(map((orgs) => orgs.filter(isMember)));\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (!unlocked) {\n            this._organizations.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getOrganizations();\n          this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  get$(id: string): Observable<Organization | undefined> {\n    return this.organizations$.pipe(map((orgs) => orgs.find((o) => o.id === id)));\n  }\n\n  async getAll(userId?: string): Promise<Organization[]> {\n    const organizationsMap = await this.stateService.getOrganizations({ userId: userId });\n    return Object.values(organizationsMap || {}).map((o) => new Organization(o));\n  }\n\n  async canManageSponsorships(): Promise<boolean> {\n    const organizations = this._organizations.getValue();\n    return organizations.some(\n      (o) => o.familySponsorshipAvailable || o.familySponsorshipFriendlyName !== null\n    );\n  }\n\n  hasOrganizations(): boolean {\n    const organizations = this._organizations.getValue();\n    return organizations.length > 0;\n  }\n\n  async upsert(organization: OrganizationData): Promise<void> {\n    let organizations = await this.stateService.getOrganizations();\n    if (organizations == null) {\n      organizations = {};\n    }\n\n    organizations[organization.id] = organization;\n\n    await this.replace(organizations);\n  }\n\n  async delete(id: string): Promise<void> {\n    const organizations = await this.stateService.getOrganizations();\n    if (organizations == null) {\n      return;\n    }\n\n    if (organizations[id] == null) {\n      return;\n    }\n\n    delete organizations[id];\n    await this.replace(organizations);\n  }\n\n  get(id: string): Organization {\n    const organizations = this._organizations.getValue();\n\n    return organizations.find((organization) => organization.id === id);\n  }\n\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the organization\n   */\n  async getFromState(id: string): Promise<Organization> {\n    const organizationsMap = await this.stateService.getOrganizations();\n    const organization = organizationsMap[id];\n    if (organization == null) {\n      return null;\n    }\n\n    return new Organization(organization);\n  }\n\n  getByIdentifier(identifier: string): Organization {\n    const organizations = this._organizations.getValue();\n\n    return organizations.find((organization) => organization.identifier === identifier);\n  }\n\n  async replace(organizations: { [id: string]: OrganizationData }) {\n    await this.stateService.setOrganizations(organizations);\n    this.updateObservables(organizations);\n  }\n\n  private updateObservables(organizationsMap: { [id: string]: OrganizationData }) {\n    const organizations = Object.values(organizationsMap || {}).map((o) => new Organization(o));\n    this._organizations.next(organizations);\n  }\n}\n","import { PolicyType } from \"../../enums\";\nimport { PolicyResponse } from \"../response/policy.response\";\n\nexport class PolicyData {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(response: PolicyResponse) {\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.type = response.type;\n    this.data = response.data;\n    this.enabled = response.enabled;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { PolicyType } from \"../../enums\";\n\nexport class PolicyResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.data = this.getResponseProperty(\"Data\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { ApiService } from \"../../../abstractions/api.service\";\nimport { StateService } from \"../../../abstractions/state.service\";\nimport { Utils } from \"../../../misc/utils\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { PolicyApiServiceAbstraction } from \"../../abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService } from \"../../abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { PolicyRequest } from \"../../models/request/policy.request\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport class PolicyApiService implements PolicyApiServiceAbstraction {\n  constructor(\n    private policyService: InternalPolicyService,\n    private apiService: ApiService,\n    private stateService: StateService\n  ) {}\n\n  async getPolicy(organizationId: string, type: PolicyType): Promise<PolicyResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies/\" + type,\n      null,\n      true,\n      true\n    );\n    return new PolicyResponse(r);\n  }\n\n  async getPolicies(organizationId: string): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getPoliciesByToken(\n    organizationId: string,\n    token: string,\n    email: string,\n    organizationUserId: string\n  ): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" +\n        organizationId +\n        \"/policies/token?\" +\n        \"token=\" +\n        encodeURIComponent(token) +\n        \"&email=\" +\n        Utils.encodeRFC3986URIComponent(email) +\n        \"&organizationUserId=\" +\n        organizationUserId,\n      null,\n      false,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getPoliciesByInvitedUser(\n    organizationId: string,\n    userId: string\n  ): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/policies/invited-user?\" + \"userId=\" + userId,\n      null,\n      false,\n      true\n    );\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  async getMasterPasswordPoliciesForInvitedUsers(\n    orgId: string\n  ): Promise<MasterPasswordPolicyOptions> {\n    const userId = await this.stateService.getUserId();\n    const response = await this.getPoliciesByInvitedUser(orgId, userId);\n    const policies = await this.policyService.mapPoliciesFromToken(response);\n    return await firstValueFrom(this.policyService.masterPasswordPolicyOptions$(policies));\n  }\n\n  async putPolicy(organizationId: string, type: PolicyType, request: PolicyRequest): Promise<any> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/policies/\" + type,\n      request,\n      true,\n      true\n    );\n    const response = new PolicyResponse(r);\n    const data = new PolicyData(response);\n    await this.policyService.upsert(data);\n  }\n}\n","import Domain from \"../../../models/domain/domain-base\";\nimport { PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../data/policy.data\";\n\nexport class Policy extends Domain {\n  id: string;\n  organizationId: string;\n  type: PolicyType;\n  data: any;\n  enabled: boolean;\n\n  constructor(obj?: PolicyData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.organizationId = obj.organizationId;\n    this.type = obj.type;\n    this.data = obj.data;\n    this.enabled = obj.enabled;\n  }\n}\n","import Domain from \"../../../models/domain/domain-base\";\n\nexport class ResetPasswordPolicyOptions extends Domain {\n  autoEnrollEnabled = false;\n}\n","import { BehaviorSubject, concatMap, map, Observable, of } from \"rxjs\";\n\nimport { StateService } from \"../../../abstractions/state.service\";\nimport { Utils } from \"../../../misc/utils\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { OrganizationService } from \"../../abstractions/organization/organization.service.abstraction\";\nimport { InternalPolicyService as InternalPolicyServiceAbstraction } from \"../../abstractions/policy/policy.service.abstraction\";\nimport { OrganizationUserStatusType, OrganizationUserType, PolicyType } from \"../../enums\";\nimport { PolicyData } from \"../../models/data/policy.data\";\nimport { MasterPasswordPolicyOptions } from \"../../models/domain/master-password-policy-options\";\nimport { Organization } from \"../../models/domain/organization\";\nimport { Policy } from \"../../models/domain/policy\";\nimport { ResetPasswordPolicyOptions } from \"../../models/domain/reset-password-policy-options\";\nimport { PolicyResponse } from \"../../models/response/policy.response\";\n\nexport class PolicyService implements InternalPolicyServiceAbstraction {\n  protected _policies: BehaviorSubject<Policy[]> = new BehaviorSubject([]);\n\n  policies$ = this._policies.asObservable();\n\n  constructor(\n    protected stateService: StateService,\n    private organizationService: OrganizationService\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._policies.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getEncryptedPolicies();\n\n          await this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  /**\n   * Returns the first policy found that applies to the active user\n   * @param policyType Policy type to search for\n   * @param policyFilter Additional filter to apply to the policy\n   */\n  get$(policyType: PolicyType, policyFilter?: (policy: Policy) => boolean): Observable<Policy> {\n    return this.policies$.pipe(\n      concatMap(async (policies) => {\n        const userId = await this.stateService.getUserId();\n        const appliesToCurrentUser = await this.checkPoliciesThatApplyToUser(\n          policies,\n          policyType,\n          policyFilter,\n          userId\n        );\n        if (appliesToCurrentUser) {\n          return policies.find((policy) => policy.type === policyType && policy.enabled);\n        }\n      })\n    );\n  }\n\n  /**\n   * @deprecated Do not call this, use the policies$ observable collection\n   */\n  async getAll(type?: PolicyType, userId?: string): Promise<Policy[]> {\n    let response: Policy[] = [];\n    const decryptedPolicies = await this.stateService.getDecryptedPolicies({ userId: userId });\n    if (decryptedPolicies != null) {\n      response = decryptedPolicies;\n    } else {\n      const diskPolicies = await this.stateService.getEncryptedPolicies({ userId: userId });\n      for (const id in diskPolicies) {\n        if (Object.prototype.hasOwnProperty.call(diskPolicies, id)) {\n          response.push(new Policy(diskPolicies[id]));\n        }\n      }\n      await this.stateService.setDecryptedPolicies(response, { userId: userId });\n    }\n    if (type != null) {\n      return response.filter((policy) => policy.type === type);\n    } else {\n      return response;\n    }\n  }\n\n  masterPasswordPolicyOptions$(policies?: Policy[]): Observable<MasterPasswordPolicyOptions> {\n    const observable = policies ? of(policies) : this.policies$;\n    return observable.pipe(\n      map((obsPolicies) => {\n        let enforcedOptions: MasterPasswordPolicyOptions = null;\n        const filteredPolicies = obsPolicies.filter((p) => p.type === PolicyType.MasterPassword);\n\n        if (filteredPolicies == null || filteredPolicies.length === 0) {\n          return enforcedOptions;\n        }\n\n        filteredPolicies.forEach((currentPolicy) => {\n          if (!currentPolicy.enabled || currentPolicy.data == null) {\n            return;\n          }\n\n          if (enforcedOptions == null) {\n            enforcedOptions = new MasterPasswordPolicyOptions();\n          }\n\n          if (\n            currentPolicy.data.minComplexity != null &&\n            currentPolicy.data.minComplexity > enforcedOptions.minComplexity\n          ) {\n            enforcedOptions.minComplexity = currentPolicy.data.minComplexity;\n          }\n\n          if (\n            currentPolicy.data.minLength != null &&\n            currentPolicy.data.minLength > enforcedOptions.minLength\n          ) {\n            enforcedOptions.minLength = currentPolicy.data.minLength;\n          }\n\n          if (currentPolicy.data.requireUpper) {\n            enforcedOptions.requireUpper = true;\n          }\n\n          if (currentPolicy.data.requireLower) {\n            enforcedOptions.requireLower = true;\n          }\n\n          if (currentPolicy.data.requireNumbers) {\n            enforcedOptions.requireNumbers = true;\n          }\n\n          if (currentPolicy.data.requireSpecial) {\n            enforcedOptions.requireSpecial = true;\n          }\n\n          if (currentPolicy.data.enforceOnLogin) {\n            enforcedOptions.enforceOnLogin = true;\n          }\n        });\n\n        return enforcedOptions;\n      })\n    );\n  }\n\n  policyAppliesToActiveUser$(policyType: PolicyType, policyFilter?: (policy: Policy) => boolean) {\n    return this.policies$.pipe(\n      concatMap(async (policies) => {\n        const userId = await this.stateService.getUserId();\n        return await this.checkPoliciesThatApplyToUser(policies, policyType, policyFilter, userId);\n      })\n    );\n  }\n\n  evaluateMasterPassword(\n    passwordStrength: number,\n    newPassword: string,\n    enforcedPolicyOptions: MasterPasswordPolicyOptions\n  ): boolean {\n    if (enforcedPolicyOptions == null) {\n      return true;\n    }\n\n    if (\n      enforcedPolicyOptions.minComplexity > 0 &&\n      enforcedPolicyOptions.minComplexity > passwordStrength\n    ) {\n      return false;\n    }\n\n    if (\n      enforcedPolicyOptions.minLength > 0 &&\n      enforcedPolicyOptions.minLength > newPassword.length\n    ) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireUpper && newPassword.toLocaleLowerCase() === newPassword) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireLower && newPassword.toLocaleUpperCase() === newPassword) {\n      return false;\n    }\n\n    if (enforcedPolicyOptions.requireNumbers && !/[0-9]/.test(newPassword)) {\n      return false;\n    }\n\n    // eslint-disable-next-line\n    if (enforcedPolicyOptions.requireSpecial && !/[!@#$%\\^&*]/g.test(newPassword)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  getResetPasswordPolicyOptions(\n    policies: Policy[],\n    orgId: string\n  ): [ResetPasswordPolicyOptions, boolean] {\n    const resetPasswordPolicyOptions = new ResetPasswordPolicyOptions();\n\n    if (policies == null || orgId == null) {\n      return [resetPasswordPolicyOptions, false];\n    }\n\n    const policy = policies.find(\n      (p) => p.organizationId === orgId && p.type === PolicyType.ResetPassword && p.enabled\n    );\n    resetPasswordPolicyOptions.autoEnrollEnabled = policy?.data?.autoEnrollEnabled ?? false;\n\n    return [resetPasswordPolicyOptions, policy?.enabled ?? false];\n  }\n\n  mapPoliciesFromToken(policiesResponse: ListResponse<PolicyResponse>): Policy[] {\n    if (policiesResponse == null || policiesResponse.data == null) {\n      return null;\n    }\n\n    const policiesData = policiesResponse.data.map((p) => new PolicyData(p));\n    return policiesData.map((p) => new Policy(p));\n  }\n\n  async policyAppliesToUser(\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) {\n    const policies = await this.getAll(policyType, userId);\n\n    return this.checkPoliciesThatApplyToUser(policies, policyType, policyFilter, userId);\n  }\n\n  async upsert(policy: PolicyData): Promise<any> {\n    let policies = await this.stateService.getEncryptedPolicies();\n    if (policies == null) {\n      policies = {};\n    }\n\n    policies[policy.id] = policy;\n\n    await this.updateObservables(policies);\n    await this.stateService.setDecryptedPolicies(null);\n    await this.stateService.setEncryptedPolicies(policies);\n  }\n\n  async replace(policies: { [id: string]: PolicyData }): Promise<void> {\n    await this.updateObservables(policies);\n    await this.stateService.setDecryptedPolicies(null);\n    await this.stateService.setEncryptedPolicies(policies);\n  }\n\n  async clear(userId?: string): Promise<void> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._policies.next([]);\n    }\n    await this.stateService.setDecryptedPolicies(null, { userId: userId });\n    await this.stateService.setEncryptedPolicies(null, { userId: userId });\n  }\n\n  private isExemptFromPolicies(organization: Organization, policyType: PolicyType) {\n    if (policyType === PolicyType.MaximumVaultTimeout) {\n      return organization.type === OrganizationUserType.Owner;\n    }\n\n    return organization.isExemptFromPolicies;\n  }\n\n  private async updateObservables(policiesMap: { [id: string]: PolicyData }) {\n    const policies = Object.values(policiesMap || {}).map((f) => new Policy(f));\n\n    this._policies.next(policies);\n  }\n\n  private async checkPoliciesThatApplyToUser(\n    policies: Policy[],\n    policyType: PolicyType,\n    policyFilter?: (policy: Policy) => boolean,\n    userId?: string\n  ) {\n    const organizations = await this.organizationService.getAll(userId);\n    const filteredPolicies = policies.filter(\n      (p) => p.type === policyType && p.enabled && (policyFilter == null || policyFilter(p))\n    );\n    const policySet = new Set(filteredPolicies.map((p) => p.organizationId));\n\n    return organizations.some(\n      (o) =>\n        o.status >= OrganizationUserStatusType.Accepted &&\n        o.usePolicies &&\n        policySet.has(o.id) &&\n        !this.isExemptFromPolicies(o, policyType)\n    );\n  }\n}\n","import { ProviderUserStatusType, ProviderUserType } from \"../../admin-console/enums\";\nimport { ProviderData } from \"../../admin-console/models/data/provider.data\";\n\nexport class Provider {\n  id: string;\n  name: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(obj?: ProviderData) {\n    if (obj == null) {\n      return;\n    }\n\n    this.id = obj.id;\n    this.name = obj.name;\n    this.status = obj.status;\n    this.type = obj.type;\n    this.enabled = obj.enabled;\n    this.userId = obj.userId;\n    this.useEvents = obj.useEvents;\n  }\n\n  get canAccess() {\n    if (this.isProviderAdmin) {\n      return true;\n    }\n    return this.enabled && this.status === ProviderUserStatusType.Confirmed;\n  }\n\n  get canCreateOrganizations() {\n    return this.enabled && this.isProviderAdmin;\n  }\n\n  get canManageUsers() {\n    return this.isProviderAdmin;\n  }\n\n  get canAccessEventLogs() {\n    return this.isProviderAdmin;\n  }\n\n  get isProviderAdmin() {\n    return this.type === ProviderUserType.ProviderAdmin;\n  }\n}\n","import { StateService } from \"../../abstractions/state.service\";\nimport { Provider } from \"../../models/domain/provider\";\nimport { ProviderService as ProviderServiceAbstraction } from \"../abstractions/provider.service\";\nimport { ProviderData } from \"../models/data/provider.data\";\n\nexport class ProviderService implements ProviderServiceAbstraction {\n  constructor(private stateService: StateService) {}\n\n  async get(id: string): Promise<Provider> {\n    const providers = await this.stateService.getProviders();\n    // eslint-disable-next-line\n    if (providers == null || !providers.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Provider(providers[id]);\n  }\n\n  async getAll(): Promise<Provider[]> {\n    const providers = await this.stateService.getProviders();\n    const response: Provider[] = [];\n    for (const id in providers) {\n      // eslint-disable-next-line\n      if (providers.hasOwnProperty(id)) {\n        response.push(new Provider(providers[id]));\n      }\n    }\n    return response;\n  }\n\n  async save(providers: { [id: string]: ProviderData }) {\n    await this.stateService.setProviders(providers);\n  }\n}\n","export abstract class AccountService {}\n\nexport abstract class InternalAccountService extends AccountService {\n  abstract delete(): void;\n}\n","export class PreloginRequest {\n  email: string;\n\n  constructor(email: string) {\n    this.email = email;\n  }\n}\n","import { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\n\nexport abstract class TokenRequest {\n  protected device?: DeviceRequest;\n  protected passwordlessAuthRequest: string;\n\n  constructor(protected twoFactor: TokenTwoFactorRequest, device?: DeviceRequest) {\n    this.device = device != null ? device : null;\n  }\n\n  // eslint-disable-next-line\n  alterIdentityTokenHeaders(headers: Headers) {\n    // Implemented in subclass if required\n  }\n\n  setTwoFactor(twoFactor: TokenTwoFactorRequest) {\n    this.twoFactor = twoFactor;\n  }\n\n  setPasswordlessAccessCode(accessCode: string) {\n    this.passwordlessAuthRequest = accessCode;\n  }\n\n  protected toIdentityToken(clientId: string) {\n    const obj: any = {\n      scope: \"api offline_access\",\n      client_id: clientId,\n    };\n\n    if (this.device) {\n      obj.deviceType = this.device.type;\n      obj.deviceIdentifier = this.device.identifier;\n      obj.deviceName = this.device.name;\n      // no push tokens for browser apps yet\n      // obj.devicePushToken = this.device.pushToken;\n    }\n\n    //passswordless login\n    if (this.passwordlessAuthRequest) {\n      obj.authRequest = this.passwordlessAuthRequest;\n    }\n\n    if (this.twoFactor) {\n      if (this.twoFactor.token && this.twoFactor.provider != null) {\n        obj.twoFactorToken = this.twoFactor.token;\n        obj.twoFactorProvider = this.twoFactor.provider;\n        obj.twoFactorRemember = this.twoFactor.remember ? \"1\" : \"0\";\n      }\n    }\n\n    return obj;\n  }\n}\n","import { ClientType } from \"../../../../enums\";\nimport { Utils } from \"../../../../misc/utils\";\nimport { CaptchaProtectedRequest } from \"../captcha-protected.request\";\n\nimport { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class PasswordTokenRequest extends TokenRequest implements CaptchaProtectedRequest {\n  constructor(\n    public email: string,\n    public masterPasswordHash: string,\n    public captchaResponse: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken(clientId: ClientType) {\n    const obj = super.toIdentityToken(clientId);\n\n    obj.grant_type = \"password\";\n    obj.username = this.email;\n    obj.password = this.masterPasswordHash;\n\n    if (this.captchaResponse != null) {\n      obj.captchaResponse = this.captchaResponse;\n    }\n\n    return obj;\n  }\n\n  alterIdentityTokenHeaders(headers: Headers) {\n    headers.set(\"Auth-Email\", Utils.fromUtf8ToUrlB64(this.email));\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class IdentityCaptchaResponse extends BaseResponse {\n  siteKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.siteKey = this.getResponseProperty(\"HCaptcha_SiteKey\");\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport {\n  ServerConfigResponse,\n  ThirdPartyServerConfigResponse,\n  EnvironmentServerConfigResponse,\n} from \"../response/server-config.response\";\n\nexport class ServerConfigData {\n  version: string;\n  gitHash: string;\n  server?: ThirdPartyServerConfigData;\n  environment?: EnvironmentServerConfigData;\n  utcDate: string;\n\n  constructor(serverConfigResponse: Partial<ServerConfigResponse>) {\n    this.version = serverConfigResponse?.version;\n    this.gitHash = serverConfigResponse?.gitHash;\n    this.server = serverConfigResponse?.server\n      ? new ThirdPartyServerConfigData(serverConfigResponse.server)\n      : null;\n    this.utcDate = new Date().toISOString();\n    this.environment = serverConfigResponse?.environment\n      ? new EnvironmentServerConfigData(serverConfigResponse.environment)\n      : null;\n  }\n\n  static fromJSON(obj: Jsonify<ServerConfigData>): ServerConfigData {\n    return Object.assign(new ServerConfigData({}), obj, {\n      server: obj?.server ? ThirdPartyServerConfigData.fromJSON(obj.server) : null,\n      environment: obj?.environment ? EnvironmentServerConfigData.fromJSON(obj.environment) : null,\n    });\n  }\n}\n\nexport class ThirdPartyServerConfigData {\n  name: string;\n  url: string;\n\n  constructor(response: Partial<ThirdPartyServerConfigResponse>) {\n    this.name = response.name;\n    this.url = response.url;\n  }\n\n  static fromJSON(obj: Jsonify<ThirdPartyServerConfigData>): ThirdPartyServerConfigData {\n    return Object.assign(new ThirdPartyServerConfigData({}), obj);\n  }\n}\n\nexport class EnvironmentServerConfigData {\n  vault: string;\n  api: string;\n  identity: string;\n  notifications: string;\n  sso: string;\n\n  constructor(response: Partial<EnvironmentServerConfigResponse>) {\n    this.vault = response.vault;\n    this.api = response.api;\n    this.identity = response.identity;\n    this.notifications = response.notifications;\n    this.sso = response.sso;\n  }\n\n  static fromJSON(obj: Jsonify<EnvironmentServerConfigData>): EnvironmentServerConfigData {\n    return Object.assign(new EnvironmentServerConfigData({}), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { CollectionData } from \"../../admin-console/models/data/collection.data\";\nimport { EncryptedOrganizationKeyData } from \"../../admin-console/models/data/encrypted-organization-key.data\";\nimport { OrganizationData } from \"../../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../../admin-console/models/data/provider.data\";\nimport { Policy } from \"../../admin-console/models/domain/policy\";\nimport { CollectionView } from \"../../admin-console/models/view/collection.view\";\nimport { AuthenticationStatus } from \"../../auth/enums/authentication-status\";\nimport { EnvironmentUrls } from \"../../auth/models/domain/environment-urls\";\nimport { ForceResetPasswordReason } from \"../../auth/models/domain/force-reset-password-reason\";\nimport { KdfType, UriMatchType } from \"../../enums\";\nimport { Utils } from \"../../misc/utils\";\nimport { GeneratedPasswordHistory } from \"../../tools/generator/password\";\nimport { SendData } from \"../../tools/send/models/data/send.data\";\nimport { SendView } from \"../../tools/send/models/view/send.view\";\nimport { DeepJsonify } from \"../../types/deep-jsonify\";\nimport { CipherData } from \"../../vault/models/data/cipher.data\";\nimport { FolderData } from \"../../vault/models/data/folder.data\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\nimport { EventData } from \"../data/event.data\";\nimport { ServerConfigData } from \"../data/server-config.data\";\n\nimport { EncString } from \"./enc-string\";\nimport { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport class EncryptionPair<TEncrypted, TDecrypted> {\n  encrypted?: TEncrypted;\n  decrypted?: TDecrypted;\n\n  toJSON() {\n    return {\n      encrypted: this.encrypted,\n      decrypted:\n        this.decrypted instanceof ArrayBuffer\n          ? Utils.fromBufferToByteString(this.decrypted)\n          : this.decrypted,\n    };\n  }\n\n  static fromJSON<TEncrypted, TDecrypted>(\n    obj: { encrypted?: Jsonify<TEncrypted>; decrypted?: string | Jsonify<TDecrypted> },\n    decryptedFromJson?: (decObj: Jsonify<TDecrypted> | string) => TDecrypted,\n    encryptedFromJson?: (encObj: Jsonify<TEncrypted>) => TEncrypted\n  ) {\n    if (obj == null) {\n      return null;\n    }\n\n    const pair = new EncryptionPair<TEncrypted, TDecrypted>();\n    if (obj?.encrypted != null) {\n      pair.encrypted = encryptedFromJson\n        ? encryptedFromJson(obj.encrypted)\n        : (obj.encrypted as TEncrypted);\n    }\n    if (obj?.decrypted != null) {\n      pair.decrypted = decryptedFromJson\n        ? decryptedFromJson(obj.decrypted)\n        : (obj.decrypted as TDecrypted);\n    }\n    return pair;\n  }\n}\n\nexport class DataEncryptionPair<TEncrypted, TDecrypted> {\n  encrypted?: { [id: string]: TEncrypted };\n  decrypted?: TDecrypted[];\n}\n\n// This is a temporary structure to handle migrated `DataEncryptionPair` to\n//  avoid needing a data migration at this stage. It should be replaced with\n//  proper data migrations when `DataEncryptionPair` is deprecated.\nexport class TemporaryDataEncryption<TEncrypted> {\n  encrypted?: { [id: string]: TEncrypted };\n}\n\nexport class AccountData {\n  ciphers?: DataEncryptionPair<CipherData, CipherView> = new DataEncryptionPair<\n    CipherData,\n    CipherView\n  >();\n  folders? = new TemporaryDataEncryption<FolderData>();\n  localData?: any;\n  sends?: DataEncryptionPair<SendData, SendView> = new DataEncryptionPair<SendData, SendView>();\n  collections?: DataEncryptionPair<CollectionData, CollectionView> = new DataEncryptionPair<\n    CollectionData,\n    CollectionView\n  >();\n  policies?: DataEncryptionPair<PolicyData, Policy> = new DataEncryptionPair<PolicyData, Policy>();\n  passwordGenerationHistory?: EncryptionPair<\n    GeneratedPasswordHistory[],\n    GeneratedPasswordHistory[]\n  > = new EncryptionPair<GeneratedPasswordHistory[], GeneratedPasswordHistory[]>();\n  addEditCipherInfo?: any;\n  eventCollection?: EventData[];\n  organizations?: { [id: string]: OrganizationData };\n  providers?: { [id: string]: ProviderData };\n}\n\nexport class AccountKeys {\n  cryptoMasterKey?: SymmetricCryptoKey;\n  cryptoMasterKeyAuto?: string;\n  cryptoMasterKeyB64?: string;\n  cryptoMasterKeyBiometric?: string;\n  cryptoSymmetricKey?: EncryptionPair<string, SymmetricCryptoKey> = new EncryptionPair<\n    string,\n    SymmetricCryptoKey\n  >();\n  organizationKeys?: EncryptionPair<\n    { [orgId: string]: EncryptedOrganizationKeyData },\n    Record<string, SymmetricCryptoKey>\n  > = new EncryptionPair<\n    { [orgId: string]: EncryptedOrganizationKeyData },\n    Record<string, SymmetricCryptoKey>\n  >();\n  providerKeys?: EncryptionPair<any, Record<string, SymmetricCryptoKey>> = new EncryptionPair<\n    any,\n    Record<string, SymmetricCryptoKey>\n  >();\n  privateKey?: EncryptionPair<string, ArrayBuffer> = new EncryptionPair<string, ArrayBuffer>();\n  publicKey?: ArrayBuffer;\n  apiKeyClientSecret?: string;\n\n  toJSON() {\n    return Utils.merge(this, {\n      publicKey: Utils.fromBufferToByteString(this.publicKey),\n    });\n  }\n\n  static fromJSON(obj: DeepJsonify<AccountKeys>): AccountKeys {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountKeys(), {\n      cryptoMasterKey: SymmetricCryptoKey.fromJSON(obj?.cryptoMasterKey),\n      cryptoSymmetricKey: EncryptionPair.fromJSON(\n        obj?.cryptoSymmetricKey,\n        SymmetricCryptoKey.fromJSON\n      ),\n      organizationKeys: AccountKeys.initRecordEncryptionPairsFromJSON(obj?.organizationKeys),\n      providerKeys: AccountKeys.initRecordEncryptionPairsFromJSON(obj?.providerKeys),\n      privateKey: EncryptionPair.fromJSON<string, ArrayBuffer>(\n        obj?.privateKey,\n        (decObj: string) => Utils.fromByteStringToArray(decObj).buffer\n      ),\n      publicKey: Utils.fromByteStringToArray(obj?.publicKey)?.buffer,\n    });\n  }\n\n  static initRecordEncryptionPairsFromJSON(obj: any) {\n    return EncryptionPair.fromJSON(obj, (decObj: any) => {\n      if (obj == null) {\n        return null;\n      }\n\n      const record: Record<string, SymmetricCryptoKey> = {};\n      for (const id in decObj) {\n        record[id] = SymmetricCryptoKey.fromJSON(decObj[id]);\n      }\n      return record;\n    });\n  }\n}\n\nexport class AccountProfile {\n  apiKeyClientId?: string;\n  authenticationStatus?: AuthenticationStatus;\n  convertAccountToKeyConnector?: boolean;\n  name?: string;\n  email?: string;\n  emailVerified?: boolean;\n  entityId?: string;\n  entityType?: string;\n  everBeenUnlocked?: boolean;\n  forcePasswordResetReason?: ForceResetPasswordReason;\n  hasPremiumPersonally?: boolean;\n  hasPremiumFromOrganization?: boolean;\n  lastSync?: string;\n  userId?: string;\n  usesKeyConnector?: boolean;\n  keyHash?: string;\n  kdfIterations?: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  kdfType?: KdfType;\n\n  static fromJSON(obj: Jsonify<AccountProfile>): AccountProfile {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountProfile(), obj);\n  }\n}\n\nexport class AccountSettings {\n  autoConfirmFingerPrints?: boolean;\n  autoFillOnPageLoadDefault?: boolean;\n  biometricUnlock?: boolean;\n  clearClipboard?: number;\n  collapsedGroupings?: string[];\n  defaultUriMatch?: UriMatchType;\n  disableAddLoginNotification?: boolean;\n  disableAutoBiometricsPrompt?: boolean;\n  disableAutoTotpCopy?: boolean;\n  disableBadgeCounter?: boolean;\n  disableChangedPasswordNotification?: boolean;\n  disableContextMenuItem?: boolean;\n  disableGa?: boolean;\n  dismissedAutoFillOnPageLoadCallout?: boolean;\n  dontShowCardsCurrentTab?: boolean;\n  dontShowIdentitiesCurrentTab?: boolean;\n  enableAlwaysOnTop?: boolean;\n  enableAutoFillOnPageLoad?: boolean;\n  enableBiometric?: boolean;\n  enableFullWidth?: boolean;\n  environmentUrls: EnvironmentUrls = new EnvironmentUrls();\n  equivalentDomains?: any;\n  minimizeOnCopyToClipboard?: boolean;\n  neverDomains?: { [id: string]: any };\n  passwordGenerationOptions?: any;\n  usernameGenerationOptions?: any;\n  generatorOptions?: any;\n  pinProtected?: EncryptionPair<string, EncString> = new EncryptionPair<string, EncString>();\n  protectedPin?: string;\n  settings?: AccountSettingsSettings; // TODO: Merge whatever is going on here into the AccountSettings model properly\n  vaultTimeout?: number;\n  vaultTimeoutAction?: string = \"lock\";\n  serverConfig?: ServerConfigData;\n  approveLoginRequests?: boolean;\n  avatarColor?: string;\n  activateAutoFillOnPageLoadFromPolicy?: boolean;\n  smOnboardingTasks?: Record<string, Record<string, boolean>>;\n\n  static fromJSON(obj: Jsonify<AccountSettings>): AccountSettings {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountSettings(), obj, {\n      environmentUrls: EnvironmentUrls.fromJSON(obj?.environmentUrls),\n      pinProtected: EncryptionPair.fromJSON<string, EncString>(\n        obj?.pinProtected,\n        EncString.fromJSON\n      ),\n      serverConfig: ServerConfigData.fromJSON(obj?.serverConfig),\n    });\n  }\n}\n\nexport type AccountSettingsSettings = {\n  equivalentDomains?: string[][];\n};\n\nexport class AccountTokens {\n  accessToken?: string;\n  refreshToken?: string;\n  securityStamp?: string;\n\n  static fromJSON(obj: Jsonify<AccountTokens>): AccountTokens {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountTokens(), obj);\n  }\n}\n\nexport class Account {\n  data?: AccountData = new AccountData();\n  keys?: AccountKeys = new AccountKeys();\n  profile?: AccountProfile = new AccountProfile();\n  settings?: AccountSettings = new AccountSettings();\n  tokens?: AccountTokens = new AccountTokens();\n\n  constructor(init: Partial<Account>) {\n    Object.assign(this, {\n      data: {\n        ...new AccountData(),\n        ...init?.data,\n      },\n      keys: {\n        ...new AccountKeys(),\n        ...init?.keys,\n      },\n      profile: {\n        ...new AccountProfile(),\n        ...init?.profile,\n      },\n      settings: {\n        ...new AccountSettings(),\n        ...init?.settings,\n      },\n      tokens: {\n        ...new AccountTokens(),\n        ...init?.tokens,\n      },\n    });\n  }\n\n  static fromJSON(json: Jsonify<Account>): Account {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Account({}), json, {\n      keys: AccountKeys.fromJSON(json?.keys),\n      profile: AccountProfile.fromJSON(json?.profile),\n      settings: AccountSettings.fromJSON(json?.settings),\n      tokens: AccountTokens.fromJSON(json?.tokens),\n    });\n  }\n}\n","import { Utils } from \"../../../misc/utils\";\nimport { TwoFactorProviderType } from \"../../enums/two-factor-provider-type\";\n\nimport { ForceResetPasswordReason } from \"./force-reset-password-reason\";\n\nexport class AuthResult {\n  captchaSiteKey = \"\";\n  resetMasterPassword = false;\n  forcePasswordReset: ForceResetPasswordReason = ForceResetPasswordReason.None;\n  twoFactorProviders: Map<TwoFactorProviderType, { [key: string]: string }> = null;\n\n  get requiresCaptcha() {\n    return !Utils.isNullOrWhitespace(this.captchaSiteKey);\n  }\n\n  get requiresTwoFactor() {\n    return this.twoFactorProviders != null;\n  }\n}\n","import { PlatformUtilsService } from \"../../../../abstractions/platformUtils.service\";\nimport { DeviceType } from \"../../../../enums\";\n\nexport class DeviceRequest {\n  type: DeviceType;\n  name: string;\n  identifier: string;\n  pushToken?: string;\n\n  constructor(appId: string, platformUtilsService: PlatformUtilsService) {\n    this.type = platformUtilsService.getDevice();\n    this.name = platformUtilsService.getDeviceString();\n    this.identifier = appId;\n    this.pushToken = null;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class MasterPasswordPolicyResponse extends BaseResponse {\n  minComplexity: number;\n  minLength: number;\n  requireUpper: boolean;\n  requireLower: boolean;\n  requireNumbers: boolean;\n  requireSpecial: boolean;\n\n  /**\n   * Flag to indicate if the policy should be enforced on login.\n   * If true, and the user's password does not meet the policy requirements,\n   * the user will be forced to update their password.\n   */\n  enforceOnLogin: boolean;\n\n  constructor(response: any) {\n    super(response);\n\n    this.minComplexity = this.getResponseProperty(\"MinComplexity\");\n    this.minLength = this.getResponseProperty(\"MinLength\");\n    this.requireUpper = this.getResponseProperty(\"RequireUpper\");\n    this.requireLower = this.getResponseProperty(\"RequireLower\");\n    this.requireNumbers = this.getResponseProperty(\"RequireNumbers\");\n    this.requireSpecial = this.getResponseProperty(\"RequireSpecial\");\n    this.enforceOnLogin = this.getResponseProperty(\"EnforceOnLogin\");\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { MasterPasswordPolicyResponse } from \"./master-password-policy.response\";\n\nexport class IdentityTokenResponse extends BaseResponse {\n  accessToken: string;\n  expiresIn: number;\n  refreshToken: string;\n  tokenType: string;\n\n  resetMasterPassword: boolean;\n  privateKey: string;\n  key: string;\n  twoFactorToken: string;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  forcePasswordReset: boolean;\n  masterPasswordPolicy: MasterPasswordPolicyResponse;\n  apiUseKeyConnector: boolean;\n  keyConnectorUrl: string;\n\n  constructor(response: any) {\n    super(response);\n    this.accessToken = response.access_token;\n    this.expiresIn = response.expires_in;\n    this.refreshToken = response.refresh_token;\n    this.tokenType = response.token_type;\n\n    this.resetMasterPassword = this.getResponseProperty(\"ResetMasterPassword\");\n    this.privateKey = this.getResponseProperty(\"PrivateKey\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.twoFactorToken = this.getResponseProperty(\"TwoFactorToken\");\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n    this.forcePasswordReset = this.getResponseProperty(\"ForcePasswordReset\");\n    this.apiUseKeyConnector = this.getResponseProperty(\"ApiUseKeyConnector\");\n    this.keyConnectorUrl = this.getResponseProperty(\"KeyConnectorUrl\");\n    this.masterPasswordPolicy = new MasterPasswordPolicyResponse(\n      this.getResponseProperty(\"MasterPasswordPolicy\")\n    );\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { TwoFactorProviderType } from \"../../enums/two-factor-provider-type\";\n\nimport { MasterPasswordPolicyResponse } from \"./master-password-policy.response\";\n\nexport class IdentityTwoFactorResponse extends BaseResponse {\n  twoFactorProviders: TwoFactorProviderType[];\n  twoFactorProviders2 = new Map<TwoFactorProviderType, { [key: string]: string }>();\n  captchaToken: string;\n  masterPasswordPolicy: MasterPasswordPolicyResponse;\n\n  constructor(response: any) {\n    super(response);\n    this.captchaToken = this.getResponseProperty(\"CaptchaBypassToken\");\n    this.twoFactorProviders = this.getResponseProperty(\"TwoFactorProviders\");\n    const twoFactorProviders2 = this.getResponseProperty(\"TwoFactorProviders2\");\n    if (twoFactorProviders2 != null) {\n      for (const prop in twoFactorProviders2) {\n        // eslint-disable-next-line\n        if (twoFactorProviders2.hasOwnProperty(prop)) {\n          this.twoFactorProviders2.set(parseInt(prop, null), twoFactorProviders2[prop]);\n        }\n      }\n    }\n    this.masterPasswordPolicy = new MasterPasswordPolicyResponse(\n      this.getResponseProperty(\"MasterPasswordPolicy\")\n    );\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../abstractions/appId.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { Account, AccountProfile, AccountTokens } from \"../../models/domain/account\";\nimport { KeysRequest } from \"../../models/request/keys.request\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { TwoFactorProviderType } from \"../enums/two-factor-provider-type\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"../models/domain/force-reset-password-reason\";\nimport {\n  PasswordlessLogInCredentials,\n  PasswordLogInCredentials,\n  SsoLogInCredentials,\n  UserApiLogInCredentials,\n} from \"../models/domain/log-in-credentials\";\nimport { DeviceRequest } from \"../models/request/identity-token/device.request\";\nimport { PasswordTokenRequest } from \"../models/request/identity-token/password-token.request\";\nimport { SsoTokenRequest } from \"../models/request/identity-token/sso-token.request\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { UserApiTokenRequest } from \"../models/request/identity-token/user-api-token.request\";\nimport { IdentityCaptchaResponse } from \"../models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\ntype IdentityResponse = IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse;\n\nexport abstract class LogInStrategy {\n  protected abstract tokenRequest: UserApiTokenRequest | PasswordTokenRequest | SsoTokenRequest;\n  protected captchaBypassToken: string = null;\n\n  constructor(\n    protected cryptoService: CryptoService,\n    protected apiService: ApiService,\n    protected tokenService: TokenService,\n    protected appIdService: AppIdService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected messagingService: MessagingService,\n    protected logService: LogService,\n    protected stateService: StateService,\n    protected twoFactorService: TwoFactorService\n  ) {}\n\n  abstract logIn(\n    credentials:\n      | UserApiLogInCredentials\n      | PasswordLogInCredentials\n      | SsoLogInCredentials\n      | PasswordlessLogInCredentials\n  ): Promise<AuthResult>;\n\n  // The user key comes from different sources depending on the login strategy\n  protected abstract setUserKey(response: IdentityTokenResponse): Promise<void>;\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string = null\n  ): Promise<AuthResult> {\n    this.tokenRequest.setTwoFactor(twoFactor);\n    const [authResult] = await this.startLogIn();\n    return authResult;\n  }\n\n  protected async startLogIn(): Promise<[AuthResult, IdentityResponse]> {\n    this.twoFactorService.clearSelectedProvider();\n\n    const response = await this.apiService.postIdentityToken(this.tokenRequest);\n\n    if (response instanceof IdentityTwoFactorResponse) {\n      return [await this.processTwoFactorResponse(response), response];\n    } else if (response instanceof IdentityCaptchaResponse) {\n      return [await this.processCaptchaResponse(response), response];\n    } else if (response instanceof IdentityTokenResponse) {\n      return [await this.processTokenResponse(response), response];\n    }\n\n    throw new Error(\"Invalid response object.\");\n  }\n\n  protected async buildDeviceRequest() {\n    const appId = await this.appIdService.getAppId();\n    return new DeviceRequest(appId, this.platformUtilsService);\n  }\n\n  protected async buildTwoFactor(userProvidedTwoFactor?: TokenTwoFactorRequest) {\n    if (userProvidedTwoFactor != null) {\n      return userProvidedTwoFactor;\n    }\n\n    const storedTwoFactorToken = await this.tokenService.getTwoFactorToken();\n    if (storedTwoFactorToken != null) {\n      return new TokenTwoFactorRequest(TwoFactorProviderType.Remember, storedTwoFactorToken, false);\n    }\n\n    return new TokenTwoFactorRequest();\n  }\n\n  protected async saveAccountInformation(tokenResponse: IdentityTokenResponse) {\n    const accountInformation = await this.tokenService.decodeToken(tokenResponse.accessToken);\n    await this.stateService.addAccount(\n      new Account({\n        profile: {\n          ...new AccountProfile(),\n          ...{\n            userId: accountInformation.sub,\n            name: accountInformation.name,\n            email: accountInformation.email,\n            hasPremiumPersonally: accountInformation.premium,\n            kdfIterations: tokenResponse.kdfIterations,\n            kdfMemory: tokenResponse.kdfMemory,\n            kdfParallelism: tokenResponse.kdfParallelism,\n            kdfType: tokenResponse.kdf,\n          },\n        },\n        tokens: {\n          ...new AccountTokens(),\n          ...{\n            accessToken: tokenResponse.accessToken,\n            refreshToken: tokenResponse.refreshToken,\n          },\n        },\n      })\n    );\n  }\n\n  protected async processTokenResponse(response: IdentityTokenResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.resetMasterPassword = response.resetMasterPassword;\n\n    if (response.forcePasswordReset) {\n      result.forcePasswordReset = ForceResetPasswordReason.AdminForcePasswordReset;\n    }\n\n    await this.saveAccountInformation(response);\n\n    if (response.twoFactorToken != null) {\n      await this.tokenService.setTwoFactorToken(response);\n    }\n\n    await this.setUserKey(response);\n\n    // Must come after the user Key is set, otherwise createKeyPairForOldAccount will fail\n    const newSsoUser = response.key == null;\n    if (!newSsoUser) {\n      await this.cryptoService.setEncKey(response.key);\n      await this.cryptoService.setEncPrivateKey(\n        response.privateKey ?? (await this.createKeyPairForOldAccount())\n      );\n    }\n\n    this.messagingService.send(\"loggedIn\");\n\n    return result;\n  }\n\n  private async processTwoFactorResponse(response: IdentityTwoFactorResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.twoFactorProviders = response.twoFactorProviders2;\n\n    this.twoFactorService.setProviders(response);\n    this.captchaBypassToken = response.captchaToken ?? null;\n    return result;\n  }\n\n  private async processCaptchaResponse(response: IdentityCaptchaResponse): Promise<AuthResult> {\n    const result = new AuthResult();\n    result.captchaSiteKey = response.siteKey;\n    return result;\n  }\n\n  private async createKeyPairForOldAccount() {\n    try {\n      const [publicKey, privateKey] = await this.cryptoService.makeKeyPair();\n      await this.apiService.postAccountKeys(new KeysRequest(publicKey, privateKey.encryptedString));\n      return privateKey.encryptedString;\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../abstractions/appId.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { PolicyService } from \"../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { MasterPasswordPolicyOptions } from \"../../admin-console/models/domain/master-password-policy-options\";\nimport { HashPurpose } from \"../../enums\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\nimport { PasswordGenerationServiceAbstraction } from \"../../tools/generator/password\";\nimport { AuthService } from \"../abstractions/auth.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { ForceResetPasswordReason } from \"../models/domain/force-reset-password-reason\";\nimport { PasswordLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { PasswordTokenRequest } from \"../models/request/identity-token/password-token.request\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { IdentityCaptchaResponse } from \"../models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../models/response/identity-two-factor.response\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class PasswordLogInStrategy extends LogInStrategy {\n  get email() {\n    return this.tokenRequest.email;\n  }\n\n  get masterPasswordHash() {\n    return this.tokenRequest.masterPasswordHash;\n  }\n\n  tokenRequest: PasswordTokenRequest;\n\n  private localHashedPassword: string;\n  private key: SymmetricCryptoKey;\n\n  /**\n   * Options to track if the user needs to update their password due to a password that does not meet an organization's\n   * master password policy.\n   */\n  private forcePasswordResetReason: ForceResetPasswordReason = ForceResetPasswordReason.None;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    protected stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private passwordGenerationService: PasswordGenerationServiceAbstraction,\n    private policyService: PolicyService,\n    private authService: AuthService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  async setUserKey() {\n    await this.cryptoService.setKey(this.key);\n    await this.cryptoService.setKeyHash(this.localHashedPassword);\n  }\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    this.tokenRequest.captchaResponse = captchaResponse ?? this.captchaBypassToken;\n    const result = await super.logInTwoFactor(twoFactor);\n\n    // 2FA was successful, save the force update password options with the state service if defined\n    if (\n      !result.requiresTwoFactor &&\n      !result.requiresCaptcha &&\n      this.forcePasswordResetReason != ForceResetPasswordReason.None\n    ) {\n      await this.stateService.setForcePasswordResetReason(this.forcePasswordResetReason);\n      result.forcePasswordReset = this.forcePasswordResetReason;\n    }\n\n    return result;\n  }\n\n  async logIn(credentials: PasswordLogInCredentials) {\n    const { email, masterPassword, captchaToken, twoFactor } = credentials;\n\n    this.key = await this.authService.makePreloginKey(masterPassword, email);\n\n    // Hash the password early (before authentication) so we don't persist it in memory in plaintext\n    this.localHashedPassword = await this.cryptoService.hashPassword(\n      masterPassword,\n      this.key,\n      HashPurpose.LocalAuthorization\n    );\n    const hashedPassword = await this.cryptoService.hashPassword(masterPassword, this.key);\n\n    this.tokenRequest = new PasswordTokenRequest(\n      email,\n      hashedPassword,\n      captchaToken,\n      await this.buildTwoFactor(twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    const [authResult, identityResponse] = await this.startLogIn();\n    const masterPasswordPolicyOptions =\n      this.getMasterPasswordPolicyOptionsFromResponse(identityResponse);\n\n    // The identity result can contain master password policies for the user's organizations\n    if (masterPasswordPolicyOptions?.enforceOnLogin) {\n      // If there is a policy active, evaluate the supplied password before its no longer in memory\n      const meetsRequirements = this.evaluateMasterPassword(\n        credentials,\n        masterPasswordPolicyOptions\n      );\n\n      if (!meetsRequirements) {\n        if (authResult.requiresCaptcha || authResult.requiresTwoFactor) {\n          // Save the flag to this strategy for later use as the master password is about to pass out of scope\n          this.forcePasswordResetReason = ForceResetPasswordReason.WeakMasterPassword;\n        } else {\n          // Authentication was successful, save the force update password options with the state service\n          await this.stateService.setForcePasswordResetReason(\n            ForceResetPasswordReason.WeakMasterPassword\n          );\n          authResult.forcePasswordReset = ForceResetPasswordReason.WeakMasterPassword;\n        }\n      }\n    }\n    return authResult;\n  }\n\n  private getMasterPasswordPolicyOptionsFromResponse(\n    response: IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse\n  ): MasterPasswordPolicyOptions {\n    if (response == null || response instanceof IdentityCaptchaResponse) {\n      return null;\n    }\n    return MasterPasswordPolicyOptions.fromResponse(response.masterPasswordPolicy);\n  }\n\n  private evaluateMasterPassword(\n    { masterPassword, email }: PasswordLogInCredentials,\n    options: MasterPasswordPolicyOptions\n  ): boolean {\n    const passwordStrength = this.passwordGenerationService.passwordStrength(\n      masterPassword,\n      email\n    )?.score;\n\n    return this.policyService.evaluateMasterPassword(passwordStrength, masterPassword, options);\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../abstractions/appId.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { AuthService } from \"../abstractions/auth.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { PasswordlessLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { PasswordTokenRequest } from \"../models/request/identity-token/password-token.request\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class PasswordlessLogInStrategy extends LogInStrategy {\n  get email() {\n    return this.tokenRequest.email;\n  }\n\n  get accessCode() {\n    return this.passwordlessCredentials.accessCode;\n  }\n\n  get authRequestId() {\n    return this.passwordlessCredentials.authRequestId;\n  }\n\n  tokenRequest: PasswordTokenRequest;\n  private passwordlessCredentials: PasswordlessLogInCredentials;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private authService: AuthService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  async setUserKey() {\n    await this.cryptoService.setKey(this.passwordlessCredentials.decKey);\n    await this.cryptoService.setKeyHash(this.passwordlessCredentials.localPasswordHash);\n  }\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    this.tokenRequest.captchaResponse = captchaResponse ?? this.captchaBypassToken;\n    return super.logInTwoFactor(twoFactor);\n  }\n\n  async logIn(credentials: PasswordlessLogInCredentials) {\n    this.passwordlessCredentials = credentials;\n\n    this.tokenRequest = new PasswordTokenRequest(\n      credentials.email,\n      credentials.accessCode,\n      null,\n      await this.buildTwoFactor(credentials.twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    this.tokenRequest.setPasswordlessAccessCode(credentials.authRequestId);\n    const [authResult] = await this.startLogIn();\n    return authResult;\n  }\n}\n","import { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class SsoTokenRequest extends TokenRequest {\n  constructor(\n    public code: string,\n    public codeVerifier: string,\n    public redirectUri: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken(clientId: string) {\n    const obj = super.toIdentityToken(clientId);\n\n    obj.grant_type = \"authorization_code\";\n    obj.code = this.code;\n    obj.code_verifier = this.codeVerifier;\n    obj.redirect_uri = this.redirectUri;\n\n    return obj;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../abstractions/appId.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { KeyConnectorService } from \"../abstractions/key-connector.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { SsoLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { SsoTokenRequest } from \"../models/request/identity-token/sso-token.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class SsoLogInStrategy extends LogInStrategy {\n  tokenRequest: SsoTokenRequest;\n  orgId: string;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private keyConnectorService: KeyConnectorService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  async setUserKey(tokenResponse: IdentityTokenResponse) {\n    const newSsoUser = tokenResponse.key == null;\n\n    if (tokenResponse.keyConnectorUrl != null) {\n      if (!newSsoUser) {\n        await this.keyConnectorService.getAndSetKey(tokenResponse.keyConnectorUrl);\n      } else {\n        await this.keyConnectorService.convertNewSsoUserToKeyConnector(tokenResponse, this.orgId);\n      }\n    }\n  }\n\n  async logIn(credentials: SsoLogInCredentials) {\n    this.orgId = credentials.orgId;\n    this.tokenRequest = new SsoTokenRequest(\n      credentials.code,\n      credentials.codeVerifier,\n      credentials.redirectUrl,\n      await this.buildTwoFactor(credentials.twoFactor),\n      await this.buildDeviceRequest()\n    );\n\n    const [authResult] = await this.startLogIn();\n    return authResult;\n  }\n}\n","import { DeviceRequest } from \"./device.request\";\nimport { TokenTwoFactorRequest } from \"./token-two-factor.request\";\nimport { TokenRequest } from \"./token.request\";\n\nexport class UserApiTokenRequest extends TokenRequest {\n  constructor(\n    public clientId: string,\n    public clientSecret: string,\n    protected twoFactor: TokenTwoFactorRequest,\n    device?: DeviceRequest\n  ) {\n    super(twoFactor, device);\n  }\n\n  toIdentityToken() {\n    const obj = super.toIdentityToken(this.clientId);\n\n    obj.scope = this.clientId.startsWith(\"organization\") ? \"api.organization\" : \"api\";\n    obj.grant_type = \"client_credentials\";\n    obj.client_secret = this.clientSecret;\n\n    return obj;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../abstractions/appId.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { EnvironmentService } from \"../../abstractions/environment.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { TokenService } from \"../../auth/abstractions/token.service\";\nimport { TwoFactorService } from \"../../auth/abstractions/two-factor.service\";\nimport { KeyConnectorService } from \"../abstractions/key-connector.service\";\nimport { UserApiLogInCredentials } from \"../models/domain/log-in-credentials\";\nimport { UserApiTokenRequest } from \"../models/request/identity-token/user-api-token.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nimport { LogInStrategy } from \"./login.strategy\";\n\nexport class UserApiLogInStrategy extends LogInStrategy {\n  tokenRequest: UserApiTokenRequest;\n\n  constructor(\n    cryptoService: CryptoService,\n    apiService: ApiService,\n    tokenService: TokenService,\n    appIdService: AppIdService,\n    platformUtilsService: PlatformUtilsService,\n    messagingService: MessagingService,\n    logService: LogService,\n    stateService: StateService,\n    twoFactorService: TwoFactorService,\n    private environmentService: EnvironmentService,\n    private keyConnectorService: KeyConnectorService\n  ) {\n    super(\n      cryptoService,\n      apiService,\n      tokenService,\n      appIdService,\n      platformUtilsService,\n      messagingService,\n      logService,\n      stateService,\n      twoFactorService\n    );\n  }\n\n  async setUserKey(tokenResponse: IdentityTokenResponse) {\n    if (tokenResponse.apiUseKeyConnector) {\n      const keyConnectorUrl = this.environmentService.getKeyConnectorUrl();\n      await this.keyConnectorService.getAndSetKey(keyConnectorUrl);\n    }\n  }\n\n  async logIn(credentials: UserApiLogInCredentials) {\n    this.tokenRequest = new UserApiTokenRequest(\n      credentials.clientId,\n      credentials.clientSecret,\n      await this.buildTwoFactor(),\n      await this.buildDeviceRequest()\n    );\n\n    const [authResult] = await this.startLogIn();\n    return authResult;\n  }\n\n  protected async saveAccountInformation(tokenResponse: IdentityTokenResponse) {\n    await super.saveAccountInformation(tokenResponse);\n    await this.stateService.setApiKeyClientId(this.tokenRequest.clientId);\n    await this.stateService.setApiKeyClientSecret(this.tokenRequest.clientSecret);\n  }\n}\n","export class PasswordlessAuthRequest {\n  constructor(\n    readonly key: string,\n    readonly masterPasswordHash: string,\n    readonly deviceIdentifier: string,\n    readonly requestApproved: boolean\n  ) {}\n}\n","import { Observable, Subject } from \"rxjs\";\n\nimport { ApiService } from \"../../abstractions/api.service\";\nimport { AppIdService } from \"../../abstractions/appId.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { EncryptService } from \"../../abstractions/encrypt.service\";\nimport { EnvironmentService } from \"../../abstractions/environment.service\";\nimport { I18nService } from \"../../abstractions/i18n.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { PolicyService } from \"../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { KdfType, KeySuffixOptions } from \"../../enums\";\nimport { Utils } from \"../../misc/utils\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\nimport { PreloginRequest } from \"../../models/request/prelogin.request\";\nimport { ErrorResponse } from \"../../models/response/error.response\";\nimport { AuthRequestPushNotification } from \"../../models/response/notification.response\";\nimport { PasswordGenerationServiceAbstraction } from \"../../tools/generator/password\";\nimport { AuthService as AuthServiceAbstraction } from \"../abstractions/auth.service\";\nimport { KeyConnectorService } from \"../abstractions/key-connector.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { TwoFactorService } from \"../abstractions/two-factor.service\";\nimport { AuthenticationStatus } from \"../enums/authentication-status\";\nimport { AuthenticationType } from \"../enums/authentication-type\";\nimport { PasswordLogInStrategy } from \"../login-strategies/password-login.strategy\";\nimport { PasswordlessLogInStrategy } from \"../login-strategies/passwordless-login.strategy\";\nimport { SsoLogInStrategy } from \"../login-strategies/sso-login.strategy\";\nimport { UserApiLogInStrategy } from \"../login-strategies/user-api-login.strategy\";\nimport { AuthResult } from \"../models/domain/auth-result\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport {\n  PasswordlessLogInCredentials,\n  PasswordLogInCredentials,\n  SsoLogInCredentials,\n  UserApiLogInCredentials,\n} from \"../models/domain/log-in-credentials\";\nimport { TokenTwoFactorRequest } from \"../models/request/identity-token/token-two-factor.request\";\nimport { PasswordlessAuthRequest } from \"../models/request/passwordless-auth.request\";\nimport { AuthRequestResponse } from \"../models/response/auth-request.response\";\n\nconst sessionTimeoutLength = 2 * 60 * 1000; // 2 minutes\n\nexport class AuthService implements AuthServiceAbstraction {\n  get email(): string {\n    if (\n      this.logInStrategy instanceof PasswordLogInStrategy ||\n      this.logInStrategy instanceof PasswordlessLogInStrategy\n    ) {\n      return this.logInStrategy.email;\n    }\n\n    return null;\n  }\n\n  get masterPasswordHash(): string {\n    return this.logInStrategy instanceof PasswordLogInStrategy\n      ? this.logInStrategy.masterPasswordHash\n      : null;\n  }\n\n  get accessCode(): string {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy\n      ? this.logInStrategy.accessCode\n      : null;\n  }\n\n  get authRequestId(): string {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy\n      ? this.logInStrategy.authRequestId\n      : null;\n  }\n\n  private logInStrategy:\n    | UserApiLogInStrategy\n    | PasswordLogInStrategy\n    | SsoLogInStrategy\n    | PasswordlessLogInStrategy;\n  private sessionTimeout: any;\n\n  private pushNotificationSubject = new Subject<string>();\n\n  constructor(\n    protected cryptoService: CryptoService,\n    protected apiService: ApiService,\n    protected tokenService: TokenService,\n    protected appIdService: AppIdService,\n    protected platformUtilsService: PlatformUtilsService,\n    protected messagingService: MessagingService,\n    protected logService: LogService,\n    protected keyConnectorService: KeyConnectorService,\n    protected environmentService: EnvironmentService,\n    protected stateService: StateService,\n    protected twoFactorService: TwoFactorService,\n    protected i18nService: I18nService,\n    protected encryptService: EncryptService,\n    protected passwordGenerationService: PasswordGenerationServiceAbstraction,\n    protected policyService: PolicyService\n  ) {}\n\n  async logIn(\n    credentials:\n      | UserApiLogInCredentials\n      | PasswordLogInCredentials\n      | SsoLogInCredentials\n      | PasswordlessLogInCredentials\n  ): Promise<AuthResult> {\n    this.clearState();\n\n    let strategy:\n      | UserApiLogInStrategy\n      | PasswordLogInStrategy\n      | SsoLogInStrategy\n      | PasswordlessLogInStrategy;\n\n    switch (credentials.type) {\n      case AuthenticationType.Password:\n        strategy = new PasswordLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.passwordGenerationService,\n          this.policyService,\n          this\n        );\n        break;\n      case AuthenticationType.Sso:\n        strategy = new SsoLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.keyConnectorService\n        );\n        break;\n      case AuthenticationType.UserApi:\n        strategy = new UserApiLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this.environmentService,\n          this.keyConnectorService\n        );\n        break;\n      case AuthenticationType.Passwordless:\n        strategy = new PasswordlessLogInStrategy(\n          this.cryptoService,\n          this.apiService,\n          this.tokenService,\n          this.appIdService,\n          this.platformUtilsService,\n          this.messagingService,\n          this.logService,\n          this.stateService,\n          this.twoFactorService,\n          this\n        );\n        break;\n    }\n\n    const result = await strategy.logIn(credentials as any);\n\n    if (result?.requiresTwoFactor) {\n      this.saveState(strategy);\n    }\n    return result;\n  }\n\n  async logInTwoFactor(\n    twoFactor: TokenTwoFactorRequest,\n    captchaResponse: string\n  ): Promise<AuthResult> {\n    if (this.logInStrategy == null) {\n      throw new Error(this.i18nService.t(\"sessionTimeout\"));\n    }\n\n    try {\n      const result = await this.logInStrategy.logInTwoFactor(twoFactor, captchaResponse);\n\n      // Only clear state if 2FA token has been accepted, otherwise we need to be able to try again\n      if (!result.requiresTwoFactor && !result.requiresCaptcha) {\n        this.clearState();\n      }\n      return result;\n    } catch (e) {\n      // API exceptions are okay, but if there are any unhandled client-side errors then clear state to be safe\n      if (!(e instanceof ErrorResponse)) {\n        this.clearState();\n      }\n      throw e;\n    }\n  }\n\n  logOut(callback: () => void) {\n    callback();\n    this.messagingService.send(\"loggedOut\");\n  }\n\n  authingWithUserApiKey(): boolean {\n    return this.logInStrategy instanceof UserApiLogInStrategy;\n  }\n\n  authingWithSso(): boolean {\n    return this.logInStrategy instanceof SsoLogInStrategy;\n  }\n\n  authingWithPassword(): boolean {\n    return this.logInStrategy instanceof PasswordLogInStrategy;\n  }\n\n  authingWithPasswordless(): boolean {\n    return this.logInStrategy instanceof PasswordlessLogInStrategy;\n  }\n\n  async getAuthStatus(userId?: string): Promise<AuthenticationStatus> {\n    const isAuthenticated = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!isAuthenticated) {\n      return AuthenticationStatus.LoggedOut;\n    }\n\n    // Keys aren't stored for a device that is locked or logged out\n    // Make sure we're logged in before checking this, otherwise we could mix up those states\n    const neverLock =\n      (await this.cryptoService.hasKeyStored(KeySuffixOptions.Auto, userId)) &&\n      !(await this.stateService.getEverBeenUnlocked({ userId: userId }));\n    if (neverLock) {\n      // TODO: This also _sets_ the key so when we check memory in the next line it finds a key.\n      // We should refactor here.\n      await this.cryptoService.getKey(KeySuffixOptions.Auto, userId);\n    }\n\n    const hasKeyInMemory = await this.cryptoService.hasKeyInMemory(userId);\n    if (!hasKeyInMemory) {\n      return AuthenticationStatus.Locked;\n    }\n\n    return AuthenticationStatus.Unlocked;\n  }\n\n  async makePreloginKey(masterPassword: string, email: string): Promise<SymmetricCryptoKey> {\n    email = email.trim().toLowerCase();\n    let kdf: KdfType = null;\n    let kdfConfig: KdfConfig = null;\n    try {\n      const preloginResponse = await this.apiService.postPrelogin(new PreloginRequest(email));\n      if (preloginResponse != null) {\n        kdf = preloginResponse.kdf;\n        kdfConfig = new KdfConfig(\n          preloginResponse.kdfIterations,\n          preloginResponse.kdfMemory,\n          preloginResponse.kdfParallelism\n        );\n      }\n    } catch (e) {\n      if (e == null || e.statusCode !== 404) {\n        throw e;\n      }\n    }\n    return this.cryptoService.makeKey(masterPassword, email, kdf, kdfConfig);\n  }\n\n  async authResponsePushNotifiction(notification: AuthRequestPushNotification): Promise<any> {\n    this.pushNotificationSubject.next(notification.id);\n  }\n\n  getPushNotifcationObs$(): Observable<any> {\n    return this.pushNotificationSubject.asObservable();\n  }\n\n  async passwordlessLogin(\n    id: string,\n    key: string,\n    requestApproved: boolean\n  ): Promise<AuthRequestResponse> {\n    const pubKey = Utils.fromB64ToArray(key);\n    const encryptedKey = await this.cryptoService.rsaEncrypt(\n      (\n        await this.cryptoService.getKey()\n      ).encKey,\n      pubKey.buffer\n    );\n    const encryptedMasterPassword = await this.cryptoService.rsaEncrypt(\n      Utils.fromUtf8ToArray(await this.stateService.getKeyHash()),\n      pubKey.buffer\n    );\n    const request = new PasswordlessAuthRequest(\n      encryptedKey.encryptedString,\n      encryptedMasterPassword.encryptedString,\n      await this.appIdService.getAppId(),\n      requestApproved\n    );\n    return await this.apiService.putAuthRequest(id, request);\n  }\n\n  private saveState(\n    strategy:\n      | UserApiLogInStrategy\n      | PasswordLogInStrategy\n      | SsoLogInStrategy\n      | PasswordlessLogInStrategy\n  ) {\n    this.logInStrategy = strategy;\n    this.startSessionTimeout();\n  }\n\n  private clearState() {\n    this.logInStrategy = null;\n    this.clearSessionTimeout();\n  }\n\n  private startSessionTimeout() {\n    this.clearSessionTimeout();\n    this.sessionTimeout = setTimeout(() => this.clearState(), sessionTimeoutLength);\n  }\n\n  private clearSessionTimeout() {\n    if (this.sessionTimeout != null) {\n      clearTimeout(this.sessionTimeout);\n    }\n  }\n}\n","export class KeyConnectorUserKeyRequest {\n  key: string;\n\n  constructor(key: string) {\n    this.key = key;\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { KeysRequest } from \"../../../models/request/keys.request\";\nimport { KdfConfig } from \"../domain/kdf-config\";\n\nexport class SetKeyConnectorKeyRequest {\n  key: string;\n  keys: KeysRequest;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  orgIdentifier: string;\n\n  constructor(\n    key: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    orgIdentifier: string,\n    keys: KeysRequest\n  ) {\n    this.key = key;\n    this.kdf = kdf;\n    this.kdfIterations = kdfConfig.iterations;\n    this.kdfMemory = kdfConfig.memory;\n    this.kdfParallelism = kdfConfig.parallelism;\n    this.orgIdentifier = orgIdentifier;\n    this.keys = keys;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"../../abstractions/cryptoFunction.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { OrganizationService } from \"../../admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationUserType } from \"../../admin-console/enums\";\nimport { Utils } from \"../../misc/utils\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\nimport { KeysRequest } from \"../../models/request/keys.request\";\nimport { KeyConnectorService as KeyConnectorServiceAbstraction } from \"../abstractions/key-connector.service\";\nimport { TokenService } from \"../abstractions/token.service\";\nimport { KdfConfig } from \"../models/domain/kdf-config\";\nimport { KeyConnectorUserKeyRequest } from \"../models/request/key-connector-user-key.request\";\nimport { SetKeyConnectorKeyRequest } from \"../models/request/set-key-connector-key.request\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport class KeyConnectorService implements KeyConnectorServiceAbstraction {\n  constructor(\n    private stateService: StateService,\n    private cryptoService: CryptoService,\n    private apiService: ApiService,\n    private tokenService: TokenService,\n    private logService: LogService,\n    private organizationService: OrganizationService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private logoutCallback: (expired: boolean, userId?: string) => void\n  ) {}\n\n  setUsesKeyConnector(usesKeyConnector: boolean) {\n    return this.stateService.setUsesKeyConnector(usesKeyConnector);\n  }\n\n  async getUsesKeyConnector(): Promise<boolean> {\n    return await this.stateService.getUsesKeyConnector();\n  }\n\n  async userNeedsMigration() {\n    const loggedInUsingSso = await this.tokenService.getIsExternal();\n    const requiredByOrganization = (await this.getManagingOrganization()) != null;\n    const userIsNotUsingKeyConnector = !(await this.getUsesKeyConnector());\n\n    return loggedInUsingSso && requiredByOrganization && userIsNotUsingKeyConnector;\n  }\n\n  async migrateUser() {\n    const organization = await this.getManagingOrganization();\n    const key = await this.cryptoService.getKey();\n    const keyConnectorRequest = new KeyConnectorUserKeyRequest(key.encKeyB64);\n\n    try {\n      await this.apiService.postUserKeyToKeyConnector(\n        organization.keyConnectorUrl,\n        keyConnectorRequest\n      );\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n\n    await this.apiService.postConvertToKeyConnector();\n  }\n\n  async getAndSetKey(url: string) {\n    try {\n      const userKeyResponse = await this.apiService.getUserKeyFromKeyConnector(url);\n      const keyArr = Utils.fromB64ToArray(userKeyResponse.key);\n      const k = new SymmetricCryptoKey(keyArr);\n      await this.cryptoService.setKey(k);\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n  }\n\n  async getManagingOrganization() {\n    const orgs = await this.organizationService.getAll();\n    return orgs.find(\n      (o) =>\n        o.keyConnectorEnabled &&\n        o.type !== OrganizationUserType.Admin &&\n        o.type !== OrganizationUserType.Owner &&\n        !o.isProviderUser\n    );\n  }\n\n  async convertNewSsoUserToKeyConnector(tokenResponse: IdentityTokenResponse, orgId: string) {\n    const { kdf, kdfIterations, kdfMemory, kdfParallelism, keyConnectorUrl } = tokenResponse;\n    const password = await this.cryptoFunctionService.randomBytes(64);\n    const kdfConfig = new KdfConfig(kdfIterations, kdfMemory, kdfParallelism);\n\n    const k = await this.cryptoService.makeKey(\n      Utils.fromBufferToB64(password),\n      await this.tokenService.getEmail(),\n      kdf,\n      kdfConfig\n    );\n    const keyConnectorRequest = new KeyConnectorUserKeyRequest(k.encKeyB64);\n    await this.cryptoService.setKey(k);\n\n    const encKey = await this.cryptoService.makeEncKey(k);\n    await this.cryptoService.setEncKey(encKey[1].encryptedString);\n\n    const [pubKey, privKey] = await this.cryptoService.makeKeyPair();\n\n    try {\n      await this.apiService.postUserKeyToKeyConnector(keyConnectorUrl, keyConnectorRequest);\n    } catch (e) {\n      this.handleKeyConnectorError(e);\n    }\n\n    const keys = new KeysRequest(pubKey, privKey.encryptedString);\n    const setPasswordRequest = new SetKeyConnectorKeyRequest(\n      encKey[1].encryptedString,\n      kdf,\n      kdfConfig,\n      orgId,\n      keys\n    );\n    await this.apiService.postSetKeyConnectorKey(setPasswordRequest);\n  }\n\n  async setConvertAccountRequired(status: boolean) {\n    await this.stateService.setConvertAccountToKeyConnector(status);\n  }\n\n  async getConvertAccountRequired(): Promise<boolean> {\n    return await this.stateService.getConvertAccountToKeyConnector();\n  }\n\n  async removeConvertAccountRequired() {\n    await this.stateService.setConvertAccountToKeyConnector(null);\n  }\n\n  async clear() {\n    await this.removeConvertAccountRequired();\n  }\n\n  private handleKeyConnectorError(e: any) {\n    this.logService.error(e);\n    if (this.logoutCallback != null) {\n      this.logoutCallback(false);\n    }\n    throw new Error(\"Key Connector error\");\n  }\n}\n","import { StateService } from \"../../abstractions/state.service\";\nimport { LoginService as LoginServiceAbstraction } from \"../abstractions/login.service\";\n\nexport class LoginService implements LoginServiceAbstraction {\n  private _email: string;\n  private _rememberEmail: boolean;\n\n  constructor(private stateService: StateService) {}\n\n  getEmail() {\n    return this._email;\n  }\n\n  getRememberEmail() {\n    return this._rememberEmail;\n  }\n\n  setEmail(value: string) {\n    this._email = value;\n  }\n\n  setRememberEmail(value: boolean) {\n    this._rememberEmail = value;\n  }\n\n  clearValues() {\n    this._email = null;\n    this._rememberEmail = null;\n  }\n\n  async saveEmailSettings() {\n    await this.stateService.setRememberedEmail(this._rememberEmail ? this._email : null);\n    this.clearValues();\n  }\n}\n","import { StateService } from \"../../abstractions/state.service\";\nimport { Utils } from \"../../misc/utils\";\nimport { TokenService as TokenServiceAbstraction } from \"../abstractions/token.service\";\nimport { IdentityTokenResponse } from \"../models/response/identity-token.response\";\n\nexport class TokenService implements TokenServiceAbstraction {\n  static decodeToken(token: string): Promise<any> {\n    if (token == null) {\n      throw new Error(\"Token not provided.\");\n    }\n\n    const parts = token.split(\".\");\n    if (parts.length !== 3) {\n      throw new Error(\"JWT must have 3 parts\");\n    }\n\n    const decoded = Utils.fromUrlB64ToUtf8(parts[1]);\n    if (decoded == null) {\n      throw new Error(\"Cannot decode the token\");\n    }\n\n    const decodedToken = JSON.parse(decoded);\n    return decodedToken;\n  }\n\n  constructor(private stateService: StateService) {}\n\n  async setTokens(\n    accessToken: string,\n    refreshToken: string,\n    clientIdClientSecret: [string, string]\n  ): Promise<any> {\n    await this.setToken(accessToken);\n    await this.setRefreshToken(refreshToken);\n    if (clientIdClientSecret != null) {\n      await this.setClientId(clientIdClientSecret[0]);\n      await this.setClientSecret(clientIdClientSecret[1]);\n    }\n  }\n\n  async setClientId(clientId: string): Promise<any> {\n    return await this.stateService.setApiKeyClientId(clientId);\n  }\n\n  async getClientId(): Promise<string> {\n    return await this.stateService.getApiKeyClientId();\n  }\n\n  async setClientSecret(clientSecret: string): Promise<any> {\n    return await this.stateService.setApiKeyClientSecret(clientSecret);\n  }\n\n  async getClientSecret(): Promise<string> {\n    return await this.stateService.getApiKeyClientSecret();\n  }\n\n  async setToken(token: string): Promise<void> {\n    await this.stateService.setAccessToken(token);\n  }\n\n  async getToken(): Promise<string> {\n    return await this.stateService.getAccessToken();\n  }\n\n  async setRefreshToken(refreshToken: string): Promise<any> {\n    return await this.stateService.setRefreshToken(refreshToken);\n  }\n\n  async getRefreshToken(): Promise<string> {\n    return await this.stateService.getRefreshToken();\n  }\n\n  async setTwoFactorToken(tokenResponse: IdentityTokenResponse): Promise<any> {\n    return await this.stateService.setTwoFactorToken(tokenResponse.twoFactorToken);\n  }\n\n  async getTwoFactorToken(): Promise<string> {\n    return await this.stateService.getTwoFactorToken();\n  }\n\n  async clearTwoFactorToken(): Promise<any> {\n    return await this.stateService.setTwoFactorToken(null);\n  }\n\n  async clearToken(userId?: string): Promise<any> {\n    await this.stateService.setAccessToken(null, { userId: userId });\n    await this.stateService.setRefreshToken(null, { userId: userId });\n    await this.stateService.setApiKeyClientId(null, { userId: userId });\n    await this.stateService.setApiKeyClientSecret(null, { userId: userId });\n  }\n\n  // jwthelper methods\n  // ref https://github.com/auth0/angular-jwt/blob/master/src/angularJwt/services/jwt.js\n\n  async decodeToken(token?: string): Promise<any> {\n    token = token ?? (await this.stateService.getAccessToken());\n\n    if (token == null) {\n      throw new Error(\"Token not found.\");\n    }\n\n    return TokenService.decodeToken(token);\n  }\n\n  async getTokenExpirationDate(): Promise<Date> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.exp === \"undefined\") {\n      return null;\n    }\n\n    const d = new Date(0); // The 0 here is the key, which sets the date to the epoch\n    d.setUTCSeconds(decoded.exp);\n    return d;\n  }\n\n  async tokenSecondsRemaining(offsetSeconds = 0): Promise<number> {\n    const d = await this.getTokenExpirationDate();\n    if (d == null) {\n      return 0;\n    }\n\n    const msRemaining = d.valueOf() - (new Date().valueOf() + offsetSeconds * 1000);\n    return Math.round(msRemaining / 1000);\n  }\n\n  async tokenNeedsRefresh(minutes = 5): Promise<boolean> {\n    const sRemaining = await this.tokenSecondsRemaining();\n    return sRemaining < 60 * minutes;\n  }\n\n  async getUserId(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.sub === \"undefined\") {\n      throw new Error(\"No user id found\");\n    }\n\n    return decoded.sub as string;\n  }\n\n  async getEmail(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.email === \"undefined\") {\n      throw new Error(\"No email found\");\n    }\n\n    return decoded.email as string;\n  }\n\n  async getEmailVerified(): Promise<boolean> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.email_verified === \"undefined\") {\n      throw new Error(\"No email verification found\");\n    }\n\n    return decoded.email_verified as boolean;\n  }\n\n  async getName(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.name === \"undefined\") {\n      return null;\n    }\n\n    return decoded.name as string;\n  }\n\n  async getIssuer(): Promise<string> {\n    const decoded = await this.decodeToken();\n    if (typeof decoded.iss === \"undefined\") {\n      throw new Error(\"No issuer found\");\n    }\n\n    return decoded.iss as string;\n  }\n\n  async getIsExternal(): Promise<boolean> {\n    const decoded = await this.decodeToken();\n\n    return Array.isArray(decoded.amr) && decoded.amr.includes(\"external\");\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { UserVerificationApiServiceAbstraction } from \"../../../abstractions/userVerification/userVerification-api.service.abstraction\";\nimport { VerifyOTPRequest } from \"../../models/request/verify-otp.request\";\n\nexport class UserVerificationApiService implements UserVerificationApiServiceAbstraction {\n  constructor(private apiService: ApiService) {}\n\n  postAccountVerifyOTP(request: VerifyOTPRequest): Promise<void> {\n    return this.apiService.send(\"POST\", \"/accounts/verify-otp\", request, true, false);\n  }\n  async postAccountRequestOTP(): Promise<void> {\n    return this.apiService.send(\"POST\", \"/accounts/request-otp\", null, true, false);\n  }\n}\n","export class VerifyOTPRequest {\n  OTP: string;\n\n  constructor(OTP: string) {\n    this.OTP = OTP;\n  }\n}\n","import { CryptoService } from \"../../../abstractions/crypto.service\";\nimport { I18nService } from \"../../../abstractions/i18n.service\";\nimport { UserVerificationApiServiceAbstraction } from \"../../../abstractions/userVerification/userVerification-api.service.abstraction\";\nimport { UserVerificationService as UserVerificationServiceAbstraction } from \"../../../abstractions/userVerification/userVerification.service.abstraction\";\nimport { Verification } from \"../../../types/verification\";\nimport { VerificationType } from \"../../enums/verification-type\";\nimport { SecretVerificationRequest } from \"../../models/request/secret-verification.request\";\nimport { VerifyOTPRequest } from \"../../models/request/verify-otp.request\";\n\n/**\n * Used for general-purpose user verification throughout the app.\n * Use it to verify the input collected by UserVerificationComponent.\n */\nexport class UserVerificationService implements UserVerificationServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private userVerificationApiService: UserVerificationApiServiceAbstraction\n  ) {}\n\n  /**\n   * Create a new request model to be used for server-side verification\n   * @param verification User-supplied verification data (Master Password or OTP)\n   * @param requestClass The request model to create\n   * @param alreadyHashed Whether the master password is already hashed\n   */\n  async buildRequest<T extends SecretVerificationRequest>(\n    verification: Verification,\n    requestClass?: new () => T,\n    alreadyHashed?: boolean\n  ) {\n    this.validateInput(verification);\n\n    const request =\n      requestClass != null ? new requestClass() : (new SecretVerificationRequest() as T);\n\n    if (verification.type === VerificationType.OTP) {\n      request.otp = verification.secret;\n    } else {\n      request.masterPasswordHash = alreadyHashed\n        ? verification.secret\n        : await this.cryptoService.hashPassword(verification.secret, null);\n    }\n\n    return request;\n  }\n\n  /**\n   * Used to verify the Master Password client-side, or send the OTP to the server for verification (with no other data)\n   * Generally used for client-side verification only.\n   * @param verification User-supplied verification data (Master Password or OTP)\n   */\n  async verifyUser(verification: Verification): Promise<boolean> {\n    this.validateInput(verification);\n\n    if (verification.type === VerificationType.OTP) {\n      const request = new VerifyOTPRequest(verification.secret);\n      try {\n        await this.userVerificationApiService.postAccountVerifyOTP(request);\n      } catch (e) {\n        throw new Error(this.i18nService.t(\"invalidVerificationCode\"));\n      }\n    } else {\n      const passwordValid = await this.cryptoService.compareAndUpdateKeyHash(\n        verification.secret,\n        null\n      );\n      if (!passwordValid) {\n        throw new Error(this.i18nService.t(\"invalidMasterPassword\"));\n      }\n    }\n    return true;\n  }\n\n  async requestOTP() {\n    await this.userVerificationApiService.postAccountRequestOTP();\n  }\n\n  private validateInput(verification: Verification) {\n    if (verification?.secret == null || verification.secret === \"\") {\n      if (verification.type === VerificationType.OTP) {\n        throw new Error(this.i18nService.t(\"verificationCodeRequired\"));\n      } else {\n        throw new Error(this.i18nService.t(\"masterPasswordRequired\"));\n      }\n    }\n  }\n}\n","import { Account } from \"../models/domain/account\";\n\nexport class AccountFactory<T extends Account = Account> {\n  private accountConstructor: new (init: Partial<T>) => T;\n\n  constructor(accountConstructor: new (init: Partial<T>) => T) {\n    this.accountConstructor = accountConstructor;\n  }\n\n  create(args: Partial<T>) {\n    return new this.accountConstructor(args);\n  }\n}\n","import { GlobalState } from \"../models/domain/global-state\";\n\nexport class GlobalStateFactory<T extends GlobalState = GlobalState> {\n  private globalStateConstructor: new (init: Partial<T>) => T;\n\n  constructor(globalStateConstructor: new (init: Partial<T>) => T) {\n    this.globalStateConstructor = globalStateConstructor;\n  }\n\n  create(args?: Partial<T>) {\n    return new this.globalStateConstructor(args);\n  }\n}\n","import { Account } from \"../models/domain/account\";\nimport { GlobalState } from \"../models/domain/global-state\";\n\nimport { AccountFactory } from \"./accountFactory\";\nimport { GlobalStateFactory } from \"./globalStateFactory\";\n\nexport class StateFactory<\n  TGlobal extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> {\n  private globalStateFactory: GlobalStateFactory<TGlobal>;\n  private accountFactory: AccountFactory<TAccount>;\n\n  constructor(\n    globalStateConstructor: new (init: Partial<TGlobal>) => TGlobal,\n    accountConstructor: new (init: Partial<TAccount>) => TAccount\n  ) {\n    this.globalStateFactory = new GlobalStateFactory(globalStateConstructor);\n    this.accountFactory = new AccountFactory(accountConstructor);\n  }\n\n  createGlobal(args: Partial<TGlobal>): TGlobal {\n    return this.globalStateFactory.create(args);\n  }\n\n  createAccount(args: Partial<TAccount>): TAccount {\n    return this.accountFactory.create(args);\n  }\n}\n","export class WindowState {\n  width?: number;\n  height?: number;\n  isMaximized?: boolean;\n  // TODO: displayBounds is an Electron.Rectangle.\n  // We need to establish some kind of client-specific global state, similiar to the way we already extend a base Account.\n  displayBounds: any;\n  x?: number;\n  y?: number;\n  zoomFactor?: number;\n}\n","import { EnvironmentUrls } from \"../../auth/models/domain/environment-urls\";\nimport { StateVersion, ThemeType } from \"../../enums\";\n\nimport { WindowState } from \"./window-state\";\n\nexport class GlobalState {\n  enableAlwaysOnTop?: boolean;\n  installedVersion?: string;\n  locale?: string;\n  organizationInvitation?: any;\n  ssoCodeVerifier?: string;\n  ssoOrganizationIdentifier?: string;\n  ssoState?: string;\n  rememberedEmail?: string;\n  theme?: ThemeType = ThemeType.System;\n  window?: WindowState = new WindowState();\n  twoFactorToken?: string;\n  disableFavicon?: boolean;\n  biometricAwaitingAcceptance?: boolean;\n  biometricFingerprintValidated?: boolean;\n  vaultTimeout?: number;\n  vaultTimeoutAction?: string;\n  loginRedirect?: any;\n  mainWindowSize?: number;\n  enableBiometrics?: boolean;\n  biometricText?: string;\n  noAutoPromptBiometricsText?: string;\n  stateVersion: StateVersion = StateVersion.One;\n  environmentUrls: EnvironmentUrls = new EnvironmentUrls();\n  enableTray?: boolean;\n  enableMinimizeToTray?: boolean;\n  enableCloseToTray?: boolean;\n  enableStartToTray?: boolean;\n  openAtLogin?: boolean;\n  alwaysShowDock?: boolean;\n  enableBrowserIntegration?: boolean;\n  enableBrowserIntegrationFingerprint?: boolean;\n  enableDuckDuckGoBrowserIntegration?: boolean;\n}\n","export class UpdateAvatarRequest {\n  avatarColor: string;\n\n  constructor(avatarColor: string) {\n    this.avatarColor = avatarColor;\n  }\n}\n","import { BehaviorSubject, Observable } from \"rxjs\";\n\nimport { AvatarUpdateService as AvatarUpdateServiceAbstraction } from \"../../abstractions/account/avatar-update.service\";\nimport { ApiService } from \"../../abstractions/api.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { UpdateAvatarRequest } from \"../../models/request/update-avatar.request\";\nimport { ProfileResponse } from \"../../models/response/profile.response\";\n\nexport class AvatarUpdateService implements AvatarUpdateServiceAbstraction {\n  private _avatarUpdate$ = new BehaviorSubject<string | null>(null);\n  avatarUpdate$: Observable<string | null> = this._avatarUpdate$.asObservable();\n\n  constructor(private apiService: ApiService, private stateService: StateService) {\n    this.loadColorFromState();\n  }\n\n  loadColorFromState(): Promise<string | null> {\n    return this.stateService.getAvatarColor().then((color) => {\n      this._avatarUpdate$.next(color);\n      return color;\n    });\n  }\n\n  pushUpdate(color: string | null): Promise<ProfileResponse | void> {\n    return this.apiService.putAvatar(new UpdateAvatarRequest(color)).then((response) => {\n      this.stateService.setAvatarColor(response.avatarColor);\n      this._avatarUpdate$.next(response.avatarColor);\n    });\n  }\n}\n","import { NotificationType } from \"../../enums\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class NotificationResponse extends BaseResponse {\n  contextId: string;\n  type: NotificationType;\n  payload: any;\n\n  constructor(response: any) {\n    super(response);\n    this.contextId = this.getResponseProperty(\"ContextId\");\n    this.type = this.getResponseProperty(\"Type\");\n\n    const payload = this.getResponseProperty(\"Payload\");\n    switch (this.type) {\n      case NotificationType.SyncCipherCreate:\n      case NotificationType.SyncCipherDelete:\n      case NotificationType.SyncCipherUpdate:\n      case NotificationType.SyncLoginDelete:\n        this.payload = new SyncCipherNotification(payload);\n        break;\n      case NotificationType.SyncFolderCreate:\n      case NotificationType.SyncFolderDelete:\n      case NotificationType.SyncFolderUpdate:\n        this.payload = new SyncFolderNotification(payload);\n        break;\n      case NotificationType.SyncVault:\n      case NotificationType.SyncCiphers:\n      case NotificationType.SyncOrgKeys:\n      case NotificationType.SyncSettings:\n      case NotificationType.LogOut:\n        this.payload = new UserNotification(payload);\n        break;\n      case NotificationType.SyncSendCreate:\n      case NotificationType.SyncSendUpdate:\n      case NotificationType.SyncSendDelete:\n        this.payload = new SyncSendNotification(payload);\n        break;\n      case NotificationType.AuthRequest:\n      case NotificationType.AuthRequestResponse:\n        this.payload = new AuthRequestPushNotification(payload);\n        break;\n      default:\n        break;\n    }\n  }\n}\n\nexport class SyncCipherNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  organizationId: string;\n  collectionIds: string[];\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.collectionIds = this.getResponseProperty(\"CollectionIds\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class SyncFolderNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class UserNotification extends BaseResponse {\n  userId: string;\n  date: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.date = new Date(this.getResponseProperty(\"Date\"));\n  }\n}\n\nexport class SyncSendNotification extends BaseResponse {\n  id: string;\n  userId: string;\n  revisionDate: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.revisionDate = new Date(this.getResponseProperty(\"RevisionDate\"));\n  }\n}\n\nexport class AuthRequestPushNotification extends BaseResponse {\n  id: string;\n  userId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport {\n  HttpTransportType,\n  HubConnection,\n  HubConnectionBuilder,\n  IHubProtocol,\n} from \"@microsoft/signalr\";\nimport { MessagePackHubProtocol } from \"@microsoft/signalr-protocol-msgpack\";\n\nimport { AnonymousHubService as AnonymousHubServiceAbstraction } from \"../abstractions/anonymousHub.service\";\nimport { EnvironmentService } from \"../abstractions/environment.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { AuthService } from \"../auth/abstractions/auth.service\";\n\nimport {\n  AuthRequestPushNotification,\n  NotificationResponse,\n} from \"./../models/response/notification.response\";\n\n@Injectable()\nexport class AnonymousHubService implements AnonymousHubServiceAbstraction {\n  private anonHubConnection: HubConnection;\n  private url: string;\n\n  constructor(\n    private environmentService: EnvironmentService,\n    private authService: AuthService,\n    private logService: LogService\n  ) {}\n\n  async createHubConnection(token: string) {\n    this.url = this.environmentService.getNotificationsUrl();\n\n    this.anonHubConnection = new HubConnectionBuilder()\n      .withUrl(this.url + \"/anonymous-hub?Token=\" + token, {\n        skipNegotiation: true,\n        transport: HttpTransportType.WebSockets,\n      })\n      .withHubProtocol(new MessagePackHubProtocol() as IHubProtocol)\n      .build();\n\n    this.anonHubConnection.start().catch((error) => this.logService.error(error));\n\n    this.anonHubConnection.on(\"AuthRequestResponseRecieved\", (data: any) => {\n      this.ProcessNotification(new NotificationResponse(data));\n    });\n  }\n\n  stopHubConnection() {\n    if (this.anonHubConnection) {\n      this.anonHubConnection.stop();\n    }\n  }\n\n  private async ProcessNotification(notification: NotificationResponse) {\n    await this.authService.authResponsePushNotifiction(\n      notification.payload as AuthRequestPushNotification\n    );\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class SelectionReadOnlyResponse extends BaseResponse {\n  id: string;\n  readOnly: boolean;\n  hidePasswords: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.readOnly = this.getResponseProperty(\"ReadOnly\");\n    this.hidePasswords = this.getResponseProperty(\"HidePasswords\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { SelectionReadOnlyResponse } from \"./selection-read-only.response\";\n\nexport class CollectionResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  name: string;\n  externalId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.externalId = this.getResponseProperty(\"ExternalId\");\n  }\n}\n\nexport class CollectionDetailsResponse extends CollectionResponse {\n  readOnly: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.readOnly = this.getResponseProperty(\"ReadOnly\") || false;\n  }\n}\n\nexport class CollectionAccessDetailsResponse extends CollectionResponse {\n  groups: SelectionReadOnlyResponse[] = [];\n  users: SelectionReadOnlyResponse[] = [];\n\n  /**\n   * Flag indicating the user has been explicitly assigned to this Collection\n   */\n  assigned: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.assigned = this.getResponseProperty(\"Assigned\") || false;\n\n    const groups = this.getResponseProperty(\"Groups\");\n    if (groups != null) {\n      this.groups = groups.map((g: any) => new SelectionReadOnlyResponse(g));\n    }\n\n    const users = this.getResponseProperty(\"Users\");\n    if (users != null) {\n      this.users = users.map((g: any) => new SelectionReadOnlyResponse(g));\n    }\n  }\n}\n","import { BillingSyncConfigApi } from \"../../../billing/models/api/billing-sync-config.api\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { OrganizationConnectionType } from \"../../enums\";\nimport { ScimConfigApi } from \"../api/scim-config.api\";\n\n/**API response config types for OrganizationConnectionResponse */\nexport type OrganizationConnectionConfigApis = BillingSyncConfigApi | ScimConfigApi;\n\nexport class OrganizationConnectionResponse<\n  TConfig extends OrganizationConnectionConfigApis\n> extends BaseResponse {\n  id: string;\n  type: OrganizationConnectionType;\n  organizationId: string;\n  enabled: boolean;\n  config: TConfig;\n\n  constructor(response: any, configType: { new (response: any): TConfig }) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    const rawConfig = this.getResponseProperty(\"Config\");\n    this.config = rawConfig == null ? null : new configType(rawConfig);\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nexport class CardApi extends BaseResponse {\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.cardholderName = this.getResponseProperty(\"CardholderName\");\n    this.brand = this.getResponseProperty(\"Brand\");\n    this.number = this.getResponseProperty(\"Number\");\n    this.expMonth = this.getResponseProperty(\"ExpMonth\");\n    this.expYear = this.getResponseProperty(\"ExpYear\");\n    this.code = this.getResponseProperty(\"Code\");\n  }\n}\n","import { FieldType, LinkedIdType } from \"../../enums\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class FieldApi extends BaseResponse {\n  name: string;\n  value: string;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.value = this.getResponseProperty(\"Value\");\n    this.linkedId = this.getResponseProperty(\"linkedId\");\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nexport class IdentityApi extends BaseResponse {\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.title = this.getResponseProperty(\"Title\");\n    this.firstName = this.getResponseProperty(\"FirstName\");\n    this.middleName = this.getResponseProperty(\"MiddleName\");\n    this.lastName = this.getResponseProperty(\"LastName\");\n    this.address1 = this.getResponseProperty(\"Address1\");\n    this.address2 = this.getResponseProperty(\"Address2\");\n    this.address3 = this.getResponseProperty(\"Address3\");\n    this.city = this.getResponseProperty(\"City\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.country = this.getResponseProperty(\"Country\");\n    this.company = this.getResponseProperty(\"Company\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.phone = this.getResponseProperty(\"Phone\");\n    this.ssn = this.getResponseProperty(\"SSN\");\n    this.username = this.getResponseProperty(\"Username\");\n    this.passportNumber = this.getResponseProperty(\"PassportNumber\");\n    this.licenseNumber = this.getResponseProperty(\"LicenseNumber\");\n  }\n}\n","import { UriMatchType } from \"../../enums\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class LoginUriApi extends BaseResponse {\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.uri = this.getResponseProperty(\"Uri\");\n    const match = this.getResponseProperty(\"Match\");\n    this.match = match != null ? match : null;\n  }\n}\n","import { BaseResponse } from \"../response/base.response\";\n\nimport { LoginUriApi } from \"./login-uri.api\";\n\nexport class LoginApi extends BaseResponse {\n  uris: LoginUriApi[];\n  username: string;\n  password: string;\n  passwordRevisionDate: string;\n  totp: string;\n  autofillOnPageLoad: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.username = this.getResponseProperty(\"Username\");\n    this.password = this.getResponseProperty(\"Password\");\n    this.passwordRevisionDate = this.getResponseProperty(\"PasswordRevisionDate\");\n    this.totp = this.getResponseProperty(\"Totp\");\n    this.autofillOnPageLoad = this.getResponseProperty(\"AutofillOnPageLoad\");\n\n    const uris = this.getResponseProperty(\"Uris\");\n    if (uris != null) {\n      this.uris = uris.map((u: any) => new LoginUriApi(u));\n    }\n  }\n}\n","import { SecureNoteType } from \"../../enums\";\nimport { BaseResponse } from \"../response/base.response\";\n\nexport class SecureNoteApi extends BaseResponse {\n  type: SecureNoteType;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.type = this.getResponseProperty(\"Type\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class AttachmentResponse extends BaseResponse {\n  id: string;\n  url: string;\n  fileName: string;\n  key: string;\n  size: string;\n  sizeName: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.url = this.getResponseProperty(\"Url\");\n    this.fileName = this.getResponseProperty(\"FileName\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.size = this.getResponseProperty(\"Size\");\n    this.sizeName = this.getResponseProperty(\"SizeName\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class PasswordHistoryResponse extends BaseResponse {\n  password: string;\n  lastUsedDate: string;\n\n  constructor(response: any) {\n    super(response);\n    this.password = this.getResponseProperty(\"Password\");\n    this.lastUsedDate = this.getResponseProperty(\"LastUsedDate\");\n  }\n}\n","import { CardApi } from \"../../../models/api/card.api\";\nimport { FieldApi } from \"../../../models/api/field.api\";\nimport { IdentityApi } from \"../../../models/api/identity.api\";\nimport { LoginApi } from \"../../../models/api/login.api\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\n\nimport { AttachmentResponse } from \"./attachment.response\";\nimport { PasswordHistoryResponse } from \"./password-history.response\";\n\nexport class CipherResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  folderId: string;\n  type: number;\n  name: string;\n  notes: string;\n  fields: FieldApi[];\n  login: LoginApi;\n  card: CardApi;\n  identity: IdentityApi;\n  secureNote: SecureNoteApi;\n  favorite: boolean;\n  edit: boolean;\n  viewPassword: boolean;\n  organizationUseTotp: boolean;\n  revisionDate: string;\n  attachments: AttachmentResponse[];\n  passwordHistory: PasswordHistoryResponse[];\n  collectionIds: string[];\n  creationDate: string;\n  deletedDate: string;\n  reprompt: CipherRepromptType;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.folderId = this.getResponseProperty(\"FolderId\") || null;\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.notes = this.getResponseProperty(\"Notes\");\n    this.favorite = this.getResponseProperty(\"Favorite\") || false;\n    this.edit = !!this.getResponseProperty(\"Edit\");\n    if (this.getResponseProperty(\"ViewPassword\") == null) {\n      this.viewPassword = true;\n    } else {\n      this.viewPassword = this.getResponseProperty(\"ViewPassword\");\n    }\n    this.organizationUseTotp = this.getResponseProperty(\"OrganizationUseTotp\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.collectionIds = this.getResponseProperty(\"CollectionIds\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.deletedDate = this.getResponseProperty(\"DeletedDate\");\n\n    const login = this.getResponseProperty(\"Login\");\n    if (login != null) {\n      this.login = new LoginApi(login);\n    }\n\n    const card = this.getResponseProperty(\"Card\");\n    if (card != null) {\n      this.card = new CardApi(card);\n    }\n\n    const identity = this.getResponseProperty(\"Identity\");\n    if (identity != null) {\n      this.identity = new IdentityApi(identity);\n    }\n\n    const secureNote = this.getResponseProperty(\"SecureNote\");\n    if (secureNote != null) {\n      this.secureNote = new SecureNoteApi(secureNote);\n    }\n\n    const fields = this.getResponseProperty(\"Fields\");\n    if (fields != null) {\n      this.fields = fields.map((f: any) => new FieldApi(f));\n    }\n\n    const attachments = this.getResponseProperty(\"Attachments\");\n    if (attachments != null) {\n      this.attachments = attachments.map((a: any) => new AttachmentResponse(a));\n    }\n\n    const passwordHistory = this.getResponseProperty(\"PasswordHistory\");\n    if (passwordHistory != null) {\n      this.passwordHistory = passwordHistory.map((h: any) => new PasswordHistoryResponse(h));\n    }\n\n    this.reprompt = this.getResponseProperty(\"Reprompt\") || CipherRepromptType.None;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { CipherResponse } from \"../../../vault/models/response/cipher.response\";\n\nimport { CollectionResponse } from \"./collection.response\";\n\nexport class OrganizationExportResponse extends BaseResponse {\n  collections: CollectionResponse[];\n  ciphers: CipherResponse[];\n\n  constructor(response: any) {\n    super(response);\n    const collections = this.getResponseProperty(\"Collections\");\n    if (collections != null) {\n      this.collections = collections.map((c: any) => new CollectionResponse(c));\n    }\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationSponsorshipSyncStatusResponse extends BaseResponse {\n  lastSyncDate?: Date;\n\n  constructor(response: any) {\n    super(response);\n    const lastSyncDate = this.getResponseProperty(\"LastSyncDate\");\n    if (lastSyncDate) {\n      this.lastSyncDate = new Date(lastSyncDate);\n    }\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class ProviderOrganizationResponse extends BaseResponse {\n  id: string;\n  providerId: string;\n  organizationId: string;\n  key: string;\n  settings: string;\n  creationDate: string;\n  revisionDate: string;\n  userCount: number;\n  seats?: number;\n  plan?: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.settings = this.getResponseProperty(\"Settings\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.userCount = this.getResponseProperty(\"UserCount\");\n    this.seats = this.getResponseProperty(\"Seats\");\n    this.plan = this.getResponseProperty(\"Plan\");\n  }\n}\n\nexport class ProviderOrganizationOrganizationDetailsResponse extends ProviderOrganizationResponse {\n  organizationName: string;\n\n  constructor(response: any) {\n    super(response);\n    this.organizationName = this.getResponseProperty(\"OrganizationName\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationUserBulkPublicKeyResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { OrganizationUserBulkPublicKeyResponse } from \"../../../../abstractions/organization-user/responses\";\n\nexport class ProviderUserBulkPublicKeyResponse extends OrganizationUserBulkPublicKeyResponse {}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class ProviderUserBulkResponse extends BaseResponse {\n  id: string;\n  error: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.error = this.getResponseProperty(\"Error\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\nimport { ProviderUserStatusType, ProviderUserType } from \"../../../enums\";\nimport { PermissionsApi } from \"../../api/permissions.api\";\n\nexport class ProviderUserResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  type: ProviderUserType;\n  status: ProviderUserStatusType;\n  permissions: PermissionsApi;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"Permissions\"));\n  }\n}\n\nexport class ProviderUserUserDetailsResponse extends ProviderUserResponse {\n  name: string;\n  email: string;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class ProviderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  businessName: string;\n  billingEmail: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.businessName = this.getResponseProperty(\"BusinessName\");\n    this.billingEmail = this.getResponseProperty(\"BillingEmail\");\n  }\n}\n","import { DeviceType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nconst RequestTimeOut = 60000 * 15; //15 Minutes\n\nexport class AuthRequestResponse extends BaseResponse {\n  id: string;\n  publicKey: string;\n  requestDeviceType: DeviceType;\n  requestIpAddress: string;\n  key: string;\n  masterPasswordHash: string;\n  creationDate: string;\n  requestApproved?: boolean;\n  responseDate?: string;\n  isAnswered: boolean;\n  isExpired: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.publicKey = this.getResponseProperty(\"PublicKey\");\n    this.requestDeviceType = this.getResponseProperty(\"RequestDeviceType\");\n    this.requestIpAddress = this.getResponseProperty(\"RequestIpAddress\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.masterPasswordHash = this.getResponseProperty(\"MasterPasswordHash\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.requestApproved = this.getResponseProperty(\"RequestApproved\");\n    this.responseDate = this.getResponseProperty(\"ResponseDate\");\n\n    const requestDate = new Date(this.creationDate);\n    const requestDateUTC = Date.UTC(\n      requestDate.getUTCFullYear(),\n      requestDate.getUTCMonth(),\n      requestDate.getDate(),\n      requestDate.getUTCHours(),\n      requestDate.getUTCMinutes(),\n      requestDate.getUTCSeconds(),\n      requestDate.getUTCMilliseconds()\n    );\n\n    const dateNow = new Date(Date.now());\n    const dateNowUTC = Date.UTC(\n      dateNow.getUTCFullYear(),\n      dateNow.getUTCMonth(),\n      dateNow.getDate(),\n      dateNow.getUTCHours(),\n      dateNow.getUTCMinutes(),\n      dateNow.getUTCSeconds(),\n      dateNow.getUTCMilliseconds()\n    );\n\n    this.isExpired = dateNowUTC - requestDateUTC >= RequestTimeOut;\n    this.isAnswered = this.requestApproved != null && this.responseDate != null;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class DeviceVerificationResponse extends BaseResponse {\n  isDeviceVerificationSectionEnabled: boolean;\n  unknownDeviceVerificationEnabled: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.isDeviceVerificationSectionEnabled = this.getResponseProperty(\n      \"IsDeviceVerificationSectionEnabled\"\n    );\n    this.unknownDeviceVerificationEnabled = this.getResponseProperty(\n      \"UnknownDeviceVerificationEnabled\"\n    );\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { CipherResponse } from \"../../../vault/models/response/cipher.response\";\nimport { EmergencyAccessStatusType } from \"../../enums/emergency-access-status-type\";\nimport { EmergencyAccessType } from \"../../enums/emergency-access-type\";\n\nexport class EmergencyAccessGranteeDetailsResponse extends BaseResponse {\n  id: string;\n  granteeId: string;\n  name: string;\n  email: string;\n  type: EmergencyAccessType;\n  status: EmergencyAccessStatusType;\n  waitTimeDays: number;\n  creationDate: string;\n  avatarColor: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.granteeId = this.getResponseProperty(\"GranteeId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.waitTimeDays = this.getResponseProperty(\"WaitTimeDays\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n  }\n}\n\nexport class EmergencyAccessGrantorDetailsResponse extends BaseResponse {\n  id: string;\n  grantorId: string;\n  name: string;\n  email: string;\n  type: EmergencyAccessType;\n  status: EmergencyAccessStatusType;\n  waitTimeDays: number;\n  creationDate: string;\n  avatarColor: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.grantorId = this.getResponseProperty(\"GrantorId\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.waitTimeDays = this.getResponseProperty(\"WaitTimeDays\");\n    this.creationDate = this.getResponseProperty(\"CreationDate\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n  }\n}\n\nexport class EmergencyAccessTakeoverResponse extends BaseResponse {\n  keyEncrypted: string;\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n\n  constructor(response: any) {\n    super(response);\n\n    this.keyEncrypted = this.getResponseProperty(\"KeyEncrypted\");\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n  }\n}\n\nexport class EmergencyAccessViewResponse extends BaseResponse {\n  keyEncrypted: string;\n  ciphers: CipherResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n\n    this.keyEncrypted = this.getResponseProperty(\"KeyEncrypted\");\n\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class KeyConnectorUserKeyResponse extends BaseResponse {\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { KdfType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class PreloginResponse extends BaseResponse {\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n\n  constructor(response: any) {\n    super(response);\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { ICaptchaProtectedResponse } from \"./captcha-protected.response\";\n\nexport class RegisterResponse extends BaseResponse implements ICaptchaProtectedResponse {\n  captchaBypassToken: string;\n\n  constructor(response: any) {\n    super(response);\n    this.captchaBypassToken = this.getResponseProperty(\"CaptchaBypassToken\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class SsoPreValidateResponse extends BaseResponse {\n  token: string;\n\n  constructor(response: any) {\n    super(response);\n    this.token = this.getResponseProperty(\"Token\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorAuthenticatorResponse extends BaseResponse {\n  enabled: boolean;\n  key: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.key = this.getResponseProperty(\"Key\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorDuoResponse extends BaseResponse {\n  enabled: boolean;\n  host: string;\n  secretKey: string;\n  integrationKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.host = this.getResponseProperty(\"Host\");\n    this.secretKey = this.getResponseProperty(\"SecretKey\");\n    this.integrationKey = this.getResponseProperty(\"IntegrationKey\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorEmailResponse extends BaseResponse {\n  enabled: boolean;\n  email: string;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.email = this.getResponseProperty(\"Email\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\nimport { TwoFactorProviderType } from \"../../enums/two-factor-provider-type\";\n\nexport class TwoFactorProviderResponse extends BaseResponse {\n  enabled: boolean;\n  type: TwoFactorProviderType;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.type = this.getResponseProperty(\"Type\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorRecoverResponse extends BaseResponse {\n  code: string;\n\n  constructor(response: any) {\n    super(response);\n    this.code = this.getResponseProperty(\"Code\");\n  }\n}\n","import { Utils } from \"../../../misc/utils\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorWebAuthnResponse extends BaseResponse {\n  enabled: boolean;\n  keys: KeyResponse[];\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    const keys = this.getResponseProperty(\"Keys\");\n    this.keys = keys == null ? null : keys.map((k: any) => new KeyResponse(k));\n  }\n}\n\nexport class KeyResponse extends BaseResponse {\n  name: string;\n  id: number;\n  migrated: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.id = this.getResponseProperty(\"Id\");\n    this.migrated = this.getResponseProperty(\"Migrated\");\n  }\n}\n\nexport class ChallengeResponse extends BaseResponse implements PublicKeyCredentialCreationOptions {\n  attestation?: AttestationConveyancePreference;\n  authenticatorSelection?: AuthenticatorSelectionCriteria;\n  challenge: BufferSource;\n  excludeCredentials?: PublicKeyCredentialDescriptor[];\n  extensions?: AuthenticationExtensionsClientInputs;\n  pubKeyCredParams: PublicKeyCredentialParameters[];\n  rp: PublicKeyCredentialRpEntity;\n  timeout?: number;\n  user: PublicKeyCredentialUserEntity;\n\n  constructor(response: any) {\n    super(response);\n    this.attestation = this.getResponseProperty(\"attestation\");\n    this.authenticatorSelection = this.getResponseProperty(\"authenticatorSelection\");\n    this.challenge = Utils.fromUrlB64ToArray(this.getResponseProperty(\"challenge\"));\n    this.excludeCredentials = this.getResponseProperty(\"excludeCredentials\").map((c: any) => {\n      c.id = Utils.fromUrlB64ToArray(c.id).buffer;\n      return c;\n    });\n    this.extensions = this.getResponseProperty(\"extensions\");\n    this.pubKeyCredParams = this.getResponseProperty(\"pubKeyCredParams\");\n    this.rp = this.getResponseProperty(\"rp\");\n    this.timeout = this.getResponseProperty(\"timeout\");\n\n    const user = this.getResponseProperty(\"user\");\n    user.id = Utils.fromUrlB64ToArray(user.id);\n\n    this.user = user;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TwoFactorYubiKeyResponse extends BaseResponse {\n  enabled: boolean;\n  key1: string;\n  key2: string;\n  key3: string;\n  key4: string;\n  key5: string;\n  nfc: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.enabled = this.getResponseProperty(\"Enabled\");\n    this.key1 = this.getResponseProperty(\"Key1\");\n    this.key2 = this.getResponseProperty(\"Key2\");\n    this.key3 = this.getResponseProperty(\"Key3\");\n    this.key4 = this.getResponseProperty(\"Key4\");\n    this.key5 = this.getResponseProperty(\"Key5\");\n    this.nfc = this.getResponseProperty(\"Nfc\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { BillingInvoiceResponse, BillingTransactionResponse } from \"./billing.response\";\n\nexport class BillingHistoryResponse extends BaseResponse {\n  invoices: BillingInvoiceResponse[] = [];\n  transactions: BillingTransactionResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    const transactions = this.getResponseProperty(\"Transactions\");\n    const invoices = this.getResponseProperty(\"Invoices\");\n    if (transactions != null) {\n      this.transactions = transactions.map((t: any) => new BillingTransactionResponse(t));\n    }\n    if (invoices != null) {\n      this.invoices = invoices.map((i: any) => new BillingInvoiceResponse(i));\n    }\n  }\n\n  get hasNoHistory() {\n    return this.invoices.length == 0 && this.transactions.length == 0;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { BillingSourceResponse } from \"./billing.response\";\n\nexport class BillingPaymentResponse extends BaseResponse {\n  balance: number;\n  paymentSource: BillingSourceResponse;\n\n  constructor(response: any) {\n    super(response);\n    this.balance = this.getResponseProperty(\"Balance\");\n    const paymentSource = this.getResponseProperty(\"PaymentSource\");\n    this.paymentSource = paymentSource == null ? null : new BillingSourceResponse(paymentSource);\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class TaxRateResponse extends BaseResponse {\n  id: string;\n  country: string;\n  state: string;\n  postalCode: string;\n  rate: number;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.country = this.getResponseProperty(\"Country\");\n    this.state = this.getResponseProperty(\"State\");\n    this.postalCode = this.getResponseProperty(\"PostalCode\");\n    this.rate = this.getResponseProperty(\"Rate\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class BreachAccountResponse extends BaseResponse {\n  addedDate: string;\n  breachDate: string;\n  dataClasses: string[];\n  description: string;\n  domain: string;\n  isActive: boolean;\n  isVerified: boolean;\n  logoPath: string;\n  modifiedDate: string;\n  name: string;\n  pwnCount: number;\n  title: string;\n\n  constructor(response: any) {\n    super(response);\n    this.addedDate = this.getResponseProperty(\"AddedDate\");\n    this.breachDate = this.getResponseProperty(\"BreachDate\");\n    this.dataClasses = this.getResponseProperty(\"DataClasses\");\n    this.description = this.getResponseProperty(\"Description\");\n    this.domain = this.getResponseProperty(\"Domain\");\n    this.isActive = this.getResponseProperty(\"IsActive\");\n    this.isVerified = this.getResponseProperty(\"IsVerified\");\n    this.logoPath = this.getResponseProperty(\"LogoPath\");\n    this.modifiedDate = this.getResponseProperty(\"ModifiedDate\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.pwnCount = this.getResponseProperty(\"PwnCount\");\n    this.title = this.getResponseProperty(\"Title\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class GlobalDomainResponse extends BaseResponse {\n  type: number;\n  domains: string[];\n  excluded: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.domains = this.getResponseProperty(\"Domains\");\n    this.excluded = this.getResponseProperty(\"Excluded\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\nimport { GlobalDomainResponse } from \"./global-domain.response\";\n\nexport class DomainsResponse extends BaseResponse {\n  equivalentDomains: string[][];\n  globalEquivalentDomains: GlobalDomainResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.equivalentDomains = this.getResponseProperty(\"EquivalentDomains\");\n    const globalEquivalentDomains = this.getResponseProperty(\"GlobalEquivalentDomains\");\n    if (globalEquivalentDomains != null) {\n      this.globalEquivalentDomains = globalEquivalentDomains.map(\n        (d: any) => new GlobalDomainResponse(d)\n      );\n    } else {\n      this.globalEquivalentDomains = [];\n    }\n  }\n}\n","import { DeviceType, EventSystemUser, EventType } from \"../../enums\";\n\nimport { BaseResponse } from \"./base.response\";\n\nexport class EventResponse extends BaseResponse {\n  type: EventType;\n  userId: string;\n  organizationId: string;\n  providerId: string;\n  cipherId: string;\n  collectionId: string;\n  groupId: string;\n  policyId: string;\n  organizationUserId: string;\n  providerUserId: string;\n  providerOrganizationId: string;\n  actingUserId: string;\n  date: string;\n  deviceType: DeviceType;\n  ipAddress: string;\n  installationId: string;\n  systemUser: EventSystemUser;\n  domainName: string;\n  secretId: string;\n  serviceAccountId: string;\n\n  constructor(response: any) {\n    super(response);\n    this.type = this.getResponseProperty(\"Type\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.organizationId = this.getResponseProperty(\"OrganizationId\");\n    this.providerId = this.getResponseProperty(\"ProviderId\");\n    this.cipherId = this.getResponseProperty(\"CipherId\");\n    this.collectionId = this.getResponseProperty(\"CollectionId\");\n    this.groupId = this.getResponseProperty(\"GroupId\");\n    this.policyId = this.getResponseProperty(\"PolicyId\");\n    this.organizationUserId = this.getResponseProperty(\"OrganizationUserId\");\n    this.providerUserId = this.getResponseProperty(\"ProviderUserId\");\n    this.providerOrganizationId = this.getResponseProperty(\"ProviderOrganizationId\");\n    this.actingUserId = this.getResponseProperty(\"ActingUserId\");\n    this.date = this.getResponseProperty(\"Date\");\n    this.deviceType = this.getResponseProperty(\"DeviceType\");\n    this.ipAddress = this.getResponseProperty(\"IpAddress\");\n    this.installationId = this.getResponseProperty(\"InstallationId\");\n    this.systemUser = this.getResponseProperty(\"SystemUser\");\n    this.domainName = this.getResponseProperty(\"DomainName\");\n    this.secretId = this.getResponseProperty(\"SecretId\");\n    this.serviceAccountId = this.getResponseProperty(\"ServiceAccountId\");\n  }\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class UserKeyResponse extends BaseResponse {\n  userId: string;\n  publicKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.publicKey = this.getResponseProperty(\"PublicKey\");\n  }\n}\n","import { FileUploadType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nimport { CipherResponse } from \"./cipher.response\";\n\nexport class AttachmentUploadDataResponse extends BaseResponse {\n  attachmentId: string;\n  fileUploadType: FileUploadType;\n  cipherResponse: CipherResponse;\n  cipherMiniResponse: CipherResponse;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.attachmentId = this.getResponseProperty(\"AttachmentId\");\n    this.fileUploadType = this.getResponseProperty(\"FileUploadType\");\n    const cipherResponse = this.getResponseProperty(\"CipherResponse\");\n    const cipherMiniResponse = this.getResponseProperty(\"CipherMiniResponse\");\n    this.cipherResponse = cipherResponse == null ? null : new CipherResponse(cipherResponse);\n    this.cipherMiniResponse =\n      cipherMiniResponse == null ? null : new CipherResponse(cipherMiniResponse);\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class SendFileApi extends BaseResponse {\n  id: string;\n  fileName: string;\n  size: string;\n  sizeName: string;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.id = this.getResponseProperty(\"Id\");\n    this.fileName = this.getResponseProperty(\"FileName\");\n    this.size = this.getResponseProperty(\"Size\");\n    this.sizeName = this.getResponseProperty(\"SizeName\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class SendTextApi extends BaseResponse {\n  text: string;\n  hidden: boolean;\n\n  constructor(data: any = null) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.text = this.getResponseProperty(\"Text\");\n    this.hidden = this.getResponseProperty(\"Hidden\") || false;\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\nimport { SendType } from \"../../enums/send-type\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\n\nexport class SendResponse extends BaseResponse {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: string;\n  notes: string;\n  file: SendFileApi;\n  text: SendTextApi;\n  key: string;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: string;\n  expirationDate: string;\n  deletionDate: string;\n  password: string;\n  disable: boolean;\n  hideEmail: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.accessId = this.getResponseProperty(\"AccessId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.notes = this.getResponseProperty(\"Notes\");\n    this.key = this.getResponseProperty(\"Key\");\n    this.maxAccessCount = this.getResponseProperty(\"MaxAccessCount\");\n    this.accessCount = this.getResponseProperty(\"AccessCount\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n    this.expirationDate = this.getResponseProperty(\"ExpirationDate\");\n    this.deletionDate = this.getResponseProperty(\"DeletionDate\");\n    this.password = this.getResponseProperty(\"Password\");\n    this.disable = this.getResponseProperty(\"Disabled\") || false;\n    this.hideEmail = this.getResponseProperty(\"HideEmail\") || false;\n\n    const text = this.getResponseProperty(\"Text\");\n    if (text != null) {\n      this.text = new SendTextApi(text);\n    }\n\n    const file = this.getResponseProperty(\"File\");\n    if (file != null) {\n      this.file = new SendFileApi(file);\n    }\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class FolderResponse extends BaseResponse {\n  id: string;\n  name: string;\n  revisionDate: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.name = this.getResponseProperty(\"Name\");\n    this.revisionDate = this.getResponseProperty(\"RevisionDate\");\n  }\n}\n","import { CollectionDetailsResponse } from \"../../../admin-console/models/response/collection.response\";\nimport { PolicyResponse } from \"../../../admin-console/models/response/policy.response\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\nimport { DomainsResponse } from \"../../../models/response/domains.response\";\nimport { ProfileResponse } from \"../../../models/response/profile.response\";\nimport { SendResponse } from \"../../../tools/send/models/response/send.response\";\n\nimport { CipherResponse } from \"./cipher.response\";\nimport { FolderResponse } from \"./folder.response\";\n\nexport class SyncResponse extends BaseResponse {\n  profile?: ProfileResponse;\n  folders: FolderResponse[] = [];\n  collections: CollectionDetailsResponse[] = [];\n  ciphers: CipherResponse[] = [];\n  domains?: DomainsResponse;\n  policies?: PolicyResponse[] = [];\n  sends: SendResponse[] = [];\n\n  constructor(response: any) {\n    super(response);\n\n    const profile = this.getResponseProperty(\"Profile\");\n    if (profile != null) {\n      this.profile = new ProfileResponse(profile);\n    }\n\n    const folders = this.getResponseProperty(\"Folders\");\n    if (folders != null) {\n      this.folders = folders.map((f: any) => new FolderResponse(f));\n    }\n\n    const collections = this.getResponseProperty(\"Collections\");\n    if (collections != null) {\n      this.collections = collections.map((c: any) => new CollectionDetailsResponse(c));\n    }\n\n    const ciphers = this.getResponseProperty(\"Ciphers\");\n    if (ciphers != null) {\n      this.ciphers = ciphers.map((c: any) => new CipherResponse(c));\n    }\n\n    const domains = this.getResponseProperty(\"Domains\");\n    if (domains != null) {\n      this.domains = new DomainsResponse(domains);\n    }\n\n    const policies = this.getResponseProperty(\"Policies\");\n    if (policies != null) {\n      this.policies = policies.map((p: any) => new PolicyResponse(p));\n    }\n\n    const sends = this.getResponseProperty(\"Sends\");\n    if (sends != null) {\n      this.sends = sends.map((s: any) => new SendResponse(s));\n    }\n  }\n}\n","import { ApiService as ApiServiceAbstraction } from \"../abstractions/api.service\";\nimport { AppIdService } from \"../abstractions/appId.service\";\nimport { EnvironmentService } from \"../abstractions/environment.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\nimport { OrganizationConnectionType } from \"../admin-console/enums\";\nimport { CollectionRequest } from \"../admin-console/models/request/collection.request\";\nimport { OrganizationConnectionRequest } from \"../admin-console/models/request/organization-connection.request\";\nimport { OrganizationSponsorshipCreateRequest } from \"../admin-console/models/request/organization/organization-sponsorship-create.request\";\nimport { OrganizationSponsorshipRedeemRequest } from \"../admin-console/models/request/organization/organization-sponsorship-redeem.request\";\nimport { ProviderAddOrganizationRequest } from \"../admin-console/models/request/provider/provider-add-organization.request\";\nimport { ProviderOrganizationCreateRequest } from \"../admin-console/models/request/provider/provider-organization-create.request\";\nimport { ProviderSetupRequest } from \"../admin-console/models/request/provider/provider-setup.request\";\nimport { ProviderUpdateRequest } from \"../admin-console/models/request/provider/provider-update.request\";\nimport { ProviderUserAcceptRequest } from \"../admin-console/models/request/provider/provider-user-accept.request\";\nimport { ProviderUserBulkConfirmRequest } from \"../admin-console/models/request/provider/provider-user-bulk-confirm.request\";\nimport { ProviderUserBulkRequest } from \"../admin-console/models/request/provider/provider-user-bulk.request\";\nimport { ProviderUserConfirmRequest } from \"../admin-console/models/request/provider/provider-user-confirm.request\";\nimport { ProviderUserInviteRequest } from \"../admin-console/models/request/provider/provider-user-invite.request\";\nimport { ProviderUserUpdateRequest } from \"../admin-console/models/request/provider/provider-user-update.request\";\nimport { SelectionReadOnlyRequest } from \"../admin-console/models/request/selection-read-only.request\";\nimport {\n  CollectionAccessDetailsResponse,\n  CollectionResponse,\n} from \"../admin-console/models/response/collection.response\";\nimport {\n  OrganizationConnectionConfigApis,\n  OrganizationConnectionResponse,\n} from \"../admin-console/models/response/organization-connection.response\";\nimport { OrganizationExportResponse } from \"../admin-console/models/response/organization-export.response\";\nimport { OrganizationSponsorshipSyncStatusResponse } from \"../admin-console/models/response/organization-sponsorship-sync-status.response\";\nimport { PolicyResponse } from \"../admin-console/models/response/policy.response\";\nimport {\n  ProviderOrganizationOrganizationDetailsResponse,\n  ProviderOrganizationResponse,\n} from \"../admin-console/models/response/provider/provider-organization.response\";\nimport { ProviderUserBulkPublicKeyResponse } from \"../admin-console/models/response/provider/provider-user-bulk-public-key.response\";\nimport { ProviderUserBulkResponse } from \"../admin-console/models/response/provider/provider-user-bulk.response\";\nimport {\n  ProviderUserResponse,\n  ProviderUserUserDetailsResponse,\n} from \"../admin-console/models/response/provider/provider-user.response\";\nimport { ProviderResponse } from \"../admin-console/models/response/provider/provider.response\";\nimport { SelectionReadOnlyResponse } from \"../admin-console/models/response/selection-read-only.response\";\nimport { TokenService } from \"../auth/abstractions/token.service\";\nimport { DeviceVerificationRequest } from \"../auth/models/request/device-verification.request\";\nimport { EmailTokenRequest } from \"../auth/models/request/email-token.request\";\nimport { EmailRequest } from \"../auth/models/request/email.request\";\nimport { EmergencyAccessAcceptRequest } from \"../auth/models/request/emergency-access-accept.request\";\nimport { EmergencyAccessConfirmRequest } from \"../auth/models/request/emergency-access-confirm.request\";\nimport { EmergencyAccessInviteRequest } from \"../auth/models/request/emergency-access-invite.request\";\nimport { EmergencyAccessPasswordRequest } from \"../auth/models/request/emergency-access-password.request\";\nimport { EmergencyAccessUpdateRequest } from \"../auth/models/request/emergency-access-update.request\";\nimport { DeviceRequest } from \"../auth/models/request/identity-token/device.request\";\nimport { PasswordTokenRequest } from \"../auth/models/request/identity-token/password-token.request\";\nimport { SsoTokenRequest } from \"../auth/models/request/identity-token/sso-token.request\";\nimport { TokenTwoFactorRequest } from \"../auth/models/request/identity-token/token-two-factor.request\";\nimport { UserApiTokenRequest } from \"../auth/models/request/identity-token/user-api-token.request\";\nimport { KeyConnectorUserKeyRequest } from \"../auth/models/request/key-connector-user-key.request\";\nimport { PasswordHintRequest } from \"../auth/models/request/password-hint.request\";\nimport { PasswordRequest } from \"../auth/models/request/password.request\";\nimport { PasswordlessAuthRequest } from \"../auth/models/request/passwordless-auth.request\";\nimport { PasswordlessCreateAuthRequest } from \"../auth/models/request/passwordless-create-auth.request\";\nimport { SecretVerificationRequest } from \"../auth/models/request/secret-verification.request\";\nimport { SetKeyConnectorKeyRequest } from \"../auth/models/request/set-key-connector-key.request\";\nimport { SetPasswordRequest } from \"../auth/models/request/set-password.request\";\nimport { TwoFactorEmailRequest } from \"../auth/models/request/two-factor-email.request\";\nimport { TwoFactorProviderRequest } from \"../auth/models/request/two-factor-provider.request\";\nimport { TwoFactorRecoveryRequest } from \"../auth/models/request/two-factor-recovery.request\";\nimport { UpdateProfileRequest } from \"../auth/models/request/update-profile.request\";\nimport { UpdateTempPasswordRequest } from \"../auth/models/request/update-temp-password.request\";\nimport { UpdateTwoFactorAuthenticatorRequest } from \"../auth/models/request/update-two-factor-authenticator.request\";\nimport { UpdateTwoFactorDuoRequest } from \"../auth/models/request/update-two-factor-duo.request\";\nimport { UpdateTwoFactorEmailRequest } from \"../auth/models/request/update-two-factor-email.request\";\nimport { UpdateTwoFactorWebAuthnDeleteRequest } from \"../auth/models/request/update-two-factor-web-authn-delete.request\";\nimport { UpdateTwoFactorWebAuthnRequest } from \"../auth/models/request/update-two-factor-web-authn.request\";\nimport { UpdateTwoFactorYubioOtpRequest } from \"../auth/models/request/update-two-factor-yubio-otp.request\";\nimport { ApiKeyResponse } from \"../auth/models/response/api-key.response\";\nimport { AuthRequestResponse } from \"../auth/models/response/auth-request.response\";\nimport { DeviceVerificationResponse } from \"../auth/models/response/device-verification.response\";\nimport {\n  EmergencyAccessGranteeDetailsResponse,\n  EmergencyAccessGrantorDetailsResponse,\n  EmergencyAccessTakeoverResponse,\n  EmergencyAccessViewResponse,\n} from \"../auth/models/response/emergency-access.response\";\nimport { IdentityCaptchaResponse } from \"../auth/models/response/identity-captcha.response\";\nimport { IdentityTokenResponse } from \"../auth/models/response/identity-token.response\";\nimport { IdentityTwoFactorResponse } from \"../auth/models/response/identity-two-factor.response\";\nimport { KeyConnectorUserKeyResponse } from \"../auth/models/response/key-connector-user-key.response\";\nimport { MasterPasswordPolicyResponse } from \"../auth/models/response/master-password-policy.response\";\nimport { PreloginResponse } from \"../auth/models/response/prelogin.response\";\nimport { RegisterResponse } from \"../auth/models/response/register.response\";\nimport { SsoPreValidateResponse } from \"../auth/models/response/sso-pre-validate.response\";\nimport { TwoFactorAuthenticatorResponse } from \"../auth/models/response/two-factor-authenticator.response\";\nimport { TwoFactorDuoResponse } from \"../auth/models/response/two-factor-duo.response\";\nimport { TwoFactorEmailResponse } from \"../auth/models/response/two-factor-email.response\";\nimport { TwoFactorProviderResponse } from \"../auth/models/response/two-factor-provider.response\";\nimport { TwoFactorRecoverResponse } from \"../auth/models/response/two-factor-recover.response\";\nimport {\n  ChallengeResponse,\n  TwoFactorWebAuthnResponse,\n} from \"../auth/models/response/two-factor-web-authn.response\";\nimport { TwoFactorYubiKeyResponse } from \"../auth/models/response/two-factor-yubi-key.response\";\nimport { BitPayInvoiceRequest } from \"../billing/models/request/bit-pay-invoice.request\";\nimport { PaymentRequest } from \"../billing/models/request/payment.request\";\nimport { TaxInfoUpdateRequest } from \"../billing/models/request/tax-info-update.request\";\nimport { BillingHistoryResponse } from \"../billing/models/response/billing-history.response\";\nimport { BillingPaymentResponse } from \"../billing/models/response/billing-payment.response\";\nimport { PaymentResponse } from \"../billing/models/response/payment.response\";\nimport { PlanResponse } from \"../billing/models/response/plan.response\";\nimport { SubscriptionResponse } from \"../billing/models/response/subscription.response\";\nimport { TaxInfoResponse } from \"../billing/models/response/tax-info.response\";\nimport { TaxRateResponse } from \"../billing/models/response/tax-rate.response\";\nimport { DeviceType } from \"../enums\";\nimport { Utils } from \"../misc/utils\";\nimport { CollectionBulkDeleteRequest } from \"../models/request/collection-bulk-delete.request\";\nimport { DeleteRecoverRequest } from \"../models/request/delete-recover.request\";\nimport { EventRequest } from \"../models/request/event.request\";\nimport { IapCheckRequest } from \"../models/request/iap-check.request\";\nimport { KdfRequest } from \"../models/request/kdf.request\";\nimport { KeysRequest } from \"../models/request/keys.request\";\nimport { OrganizationImportRequest } from \"../models/request/organization-import.request\";\nimport { PreloginRequest } from \"../models/request/prelogin.request\";\nimport { RegisterRequest } from \"../models/request/register.request\";\nimport { StorageRequest } from \"../models/request/storage.request\";\nimport { UpdateAvatarRequest } from \"../models/request/update-avatar.request\";\nimport { UpdateDomainsRequest } from \"../models/request/update-domains.request\";\nimport { UpdateKeyRequest } from \"../models/request/update-key.request\";\nimport { VerifyDeleteRecoverRequest } from \"../models/request/verify-delete-recover.request\";\nimport { VerifyEmailRequest } from \"../models/request/verify-email.request\";\nimport { BreachAccountResponse } from \"../models/response/breach-account.response\";\nimport { DomainsResponse } from \"../models/response/domains.response\";\nimport { ErrorResponse } from \"../models/response/error.response\";\nimport { EventResponse } from \"../models/response/event.response\";\nimport { ListResponse } from \"../models/response/list.response\";\nimport { ProfileResponse } from \"../models/response/profile.response\";\nimport { UserKeyResponse } from \"../models/response/user-key.response\";\nimport { AttachmentRequest } from \"../vault/models/request/attachment.request\";\nimport { CipherBulkDeleteRequest } from \"../vault/models/request/cipher-bulk-delete.request\";\nimport { CipherBulkMoveRequest } from \"../vault/models/request/cipher-bulk-move.request\";\nimport { CipherBulkShareRequest } from \"../vault/models/request/cipher-bulk-share.request\";\nimport { CipherCollectionsRequest } from \"../vault/models/request/cipher-collections.request\";\nimport { CipherCreateRequest } from \"../vault/models/request/cipher-create.request\";\nimport { CipherPartialRequest } from \"../vault/models/request/cipher-partial.request\";\nimport { CipherShareRequest } from \"../vault/models/request/cipher-share.request\";\nimport { CipherRequest } from \"../vault/models/request/cipher.request\";\nimport { AttachmentUploadDataResponse } from \"../vault/models/response/attachment-upload-data.response\";\nimport { AttachmentResponse } from \"../vault/models/response/attachment.response\";\nimport { CipherResponse } from \"../vault/models/response/cipher.response\";\nimport { SyncResponse } from \"../vault/models/response/sync.response\";\n\n/**\n * @deprecated The `ApiService` class is deprecated and calls should be extracted into individual\n * api services. The `send` method is still allowed to be used within api services. For background\n * of this decision please read https://contributing.bitwarden.com/architecture/adr/refactor-api-service.\n */\nexport class ApiService implements ApiServiceAbstraction {\n  private device: DeviceType;\n  private deviceType: string;\n  private isWebClient = false;\n  private isDesktopClient = false;\n\n  constructor(\n    private tokenService: TokenService,\n    private platformUtilsService: PlatformUtilsService,\n    private environmentService: EnvironmentService,\n    private appIdService: AppIdService,\n    private logoutCallback: (expired: boolean) => Promise<void>,\n    private customUserAgent: string = null\n  ) {\n    this.device = platformUtilsService.getDevice();\n    this.deviceType = this.device.toString();\n    this.isWebClient =\n      this.device === DeviceType.IEBrowser ||\n      this.device === DeviceType.ChromeBrowser ||\n      this.device === DeviceType.EdgeBrowser ||\n      this.device === DeviceType.FirefoxBrowser ||\n      this.device === DeviceType.OperaBrowser ||\n      this.device === DeviceType.SafariBrowser ||\n      this.device === DeviceType.UnknownBrowser ||\n      this.device === DeviceType.VivaldiBrowser;\n    this.isDesktopClient =\n      this.device === DeviceType.WindowsDesktop ||\n      this.device === DeviceType.MacOsDesktop ||\n      this.device === DeviceType.LinuxDesktop;\n  }\n\n  // Auth APIs\n\n  async postIdentityToken(\n    request: UserApiTokenRequest | PasswordTokenRequest | SsoTokenRequest\n  ): Promise<IdentityTokenResponse | IdentityTwoFactorResponse | IdentityCaptchaResponse> {\n    const headers = new Headers({\n      \"Content-Type\": \"application/x-www-form-urlencoded; charset=utf-8\",\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n    request.alterIdentityTokenHeaders(headers);\n\n    const identityToken =\n      request instanceof UserApiTokenRequest\n        ? request.toIdentityToken()\n        : request.toIdentityToken(this.platformUtilsService.getClientType());\n\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + \"/connect/token\", {\n        body: this.qsStringify(identityToken),\n        credentials: this.getCredentials(),\n        cache: \"no-store\",\n        headers: headers,\n        method: \"POST\",\n      })\n    );\n\n    let responseJson: any = null;\n    if (this.isJsonResponse(response)) {\n      responseJson = await response.json();\n    }\n\n    if (responseJson != null) {\n      if (response.status === 200) {\n        return new IdentityTokenResponse(responseJson);\n      } else if (\n        response.status === 400 &&\n        responseJson.TwoFactorProviders2 &&\n        Object.keys(responseJson.TwoFactorProviders2).length\n      ) {\n        await this.tokenService.clearTwoFactorToken();\n        return new IdentityTwoFactorResponse(responseJson);\n      } else if (\n        response.status === 400 &&\n        responseJson.HCaptcha_SiteKey &&\n        Object.keys(responseJson.HCaptcha_SiteKey).length\n      ) {\n        return new IdentityCaptchaResponse(responseJson);\n      }\n    }\n\n    return Promise.reject(new ErrorResponse(responseJson, response.status, true));\n  }\n\n  async refreshIdentityToken(): Promise<any> {\n    try {\n      await this.doAuthRefresh();\n    } catch (e) {\n      return Promise.reject(null);\n    }\n  }\n\n  async postAuthRequest(request: PasswordlessCreateAuthRequest): Promise<AuthRequestResponse> {\n    const r = await this.send(\"POST\", \"/auth-requests/\", request, false, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthResponse(id: string, accessCode: string): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}/response?code=${accessCode}`;\n    const r = await this.send(\"GET\", path, null, false, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthRequest(id: string): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}`;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async putAuthRequest(id: string, request: PasswordlessAuthRequest): Promise<AuthRequestResponse> {\n    const path = `/auth-requests/${id}`;\n    const r = await this.send(\"PUT\", path, request, true, true);\n    return new AuthRequestResponse(r);\n  }\n\n  async getAuthRequests(): Promise<ListResponse<AuthRequestResponse>> {\n    const path = `/auth-requests/`;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new ListResponse(r, AuthRequestResponse);\n  }\n\n  async getLastAuthRequest(): Promise<AuthRequestResponse> {\n    const requests = await this.getAuthRequests();\n    const activeRequests = requests.data.filter((m) => !m.isAnswered && !m.isExpired);\n    const lastRequest = activeRequests.sort((a: AuthRequestResponse, b: AuthRequestResponse) =>\n      a.creationDate.localeCompare(b.creationDate)\n    )[activeRequests.length - 1];\n    return lastRequest;\n  }\n\n  // Account APIs\n\n  async getProfile(): Promise<ProfileResponse> {\n    const r = await this.send(\"GET\", \"/accounts/profile\", null, true, true);\n    return new ProfileResponse(r);\n  }\n\n  async getUserSubscription(): Promise<SubscriptionResponse> {\n    const r = await this.send(\"GET\", \"/accounts/subscription\", null, true, true);\n    return new SubscriptionResponse(r);\n  }\n\n  async getTaxInfo(): Promise<TaxInfoResponse> {\n    const r = await this.send(\"GET\", \"/accounts/tax\", null, true, true);\n    return new TaxInfoResponse(r);\n  }\n\n  async putProfile(request: UpdateProfileRequest): Promise<ProfileResponse> {\n    const r = await this.send(\"PUT\", \"/accounts/profile\", request, true, true);\n    return new ProfileResponse(r);\n  }\n\n  async putAvatar(request: UpdateAvatarRequest): Promise<ProfileResponse> {\n    const r = await this.send(\"PUT\", \"/accounts/avatar\", request, true, true);\n    return new ProfileResponse(r);\n  }\n\n  putTaxInfo(request: TaxInfoUpdateRequest): Promise<any> {\n    return this.send(\"PUT\", \"/accounts/tax\", request, true, false);\n  }\n\n  async postPrelogin(request: PreloginRequest): Promise<PreloginResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/accounts/prelogin\",\n      request,\n      false,\n      true,\n      this.environmentService.getIdentityUrl()\n    );\n    return new PreloginResponse(r);\n  }\n\n  postEmailToken(request: EmailTokenRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/email-token\", request, true, false);\n  }\n\n  postEmail(request: EmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/email\", request, true, false);\n  }\n\n  postPassword(request: PasswordRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/password\", request, true, false);\n  }\n\n  setPassword(request: SetPasswordRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/set-password\", request, true, false);\n  }\n\n  postSetKeyConnectorKey(request: SetKeyConnectorKeyRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/set-key-connector-key\", request, true, false);\n  }\n\n  postSecurityStamp(request: SecretVerificationRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/security-stamp\", request, true, false);\n  }\n\n  async getAccountRevisionDate(): Promise<number> {\n    const r = await this.send(\"GET\", \"/accounts/revision-date\", null, true, true);\n    return r as number;\n  }\n\n  postPasswordHint(request: PasswordHintRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/password-hint\", request, false, false);\n  }\n\n  async postRegister(request: RegisterRequest): Promise<RegisterResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/accounts/register\",\n      request,\n      false,\n      true,\n      this.environmentService.getIdentityUrl()\n    );\n    return new RegisterResponse(r);\n  }\n\n  async postPremium(data: FormData): Promise<PaymentResponse> {\n    const r = await this.send(\"POST\", \"/accounts/premium\", data, true, true);\n    return new PaymentResponse(r);\n  }\n\n  async postIapCheck(request: IapCheckRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/iap-check\", request, true, false);\n  }\n\n  postReinstatePremium(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/reinstate-premium\", null, true, false);\n  }\n\n  postCancelPremium(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/cancel-premium\", null, true, false);\n  }\n\n  async postAccountStorage(request: StorageRequest): Promise<PaymentResponse> {\n    const r = await this.send(\"POST\", \"/accounts/storage\", request, true, true);\n    return new PaymentResponse(r);\n  }\n\n  postAccountPayment(request: PaymentRequest): Promise<void> {\n    return this.send(\"POST\", \"/accounts/payment\", request, true, false);\n  }\n\n  postAccountLicense(data: FormData): Promise<any> {\n    return this.send(\"POST\", \"/accounts/license\", data, true, false);\n  }\n\n  postAccountKeys(request: KeysRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/keys\", request, true, false);\n  }\n\n  postAccountKey(request: UpdateKeyRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/key\", request, true, false);\n  }\n\n  postAccountVerifyEmail(): Promise<any> {\n    return this.send(\"POST\", \"/accounts/verify-email\", null, true, false);\n  }\n\n  postAccountVerifyEmailToken(request: VerifyEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/verify-email-token\", request, false, false);\n  }\n\n  postAccountVerifyPassword(\n    request: SecretVerificationRequest\n  ): Promise<MasterPasswordPolicyResponse> {\n    return this.send(\"POST\", \"/accounts/verify-password\", request, true, true);\n  }\n\n  postAccountRecoverDelete(request: DeleteRecoverRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/delete-recover\", request, false, false);\n  }\n\n  postAccountRecoverDeleteToken(request: VerifyDeleteRecoverRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/delete-recover-token\", request, false, false);\n  }\n\n  postAccountKdf(request: KdfRequest): Promise<any> {\n    return this.send(\"POST\", \"/accounts/kdf\", request, true, false);\n  }\n\n  async deleteSsoUser(organizationId: string): Promise<void> {\n    return this.send(\"DELETE\", \"/accounts/sso/\" + organizationId, null, true, false);\n  }\n\n  async getSsoUserIdentifier(): Promise<string> {\n    return this.send(\"GET\", \"/accounts/sso/user-identifier\", null, true, true);\n  }\n\n  async postUserApiKey(id: string, request: SecretVerificationRequest): Promise<ApiKeyResponse> {\n    const r = await this.send(\"POST\", \"/accounts/api-key\", request, true, true);\n    return new ApiKeyResponse(r);\n  }\n\n  async postUserRotateApiKey(\n    id: string,\n    request: SecretVerificationRequest\n  ): Promise<ApiKeyResponse> {\n    const r = await this.send(\"POST\", \"/accounts/rotate-api-key\", request, true, true);\n    return new ApiKeyResponse(r);\n  }\n\n  putUpdateTempPassword(request: UpdateTempPasswordRequest): Promise<any> {\n    return this.send(\"PUT\", \"/accounts/update-temp-password\", request, true, false);\n  }\n\n  postConvertToKeyConnector(): Promise<void> {\n    return this.send(\"POST\", \"/accounts/convert-to-key-connector\", null, true, false);\n  }\n\n  // Account Billing APIs\n\n  async getUserBillingHistory(): Promise<BillingHistoryResponse> {\n    const r = await this.send(\"GET\", \"/accounts/billing/history\", null, true, true);\n    return new BillingHistoryResponse(r);\n  }\n\n  async getUserBillingPayment(): Promise<BillingPaymentResponse> {\n    const r = await this.send(\"GET\", \"/accounts/billing/payment-method\", null, true, true);\n    return new BillingPaymentResponse(r);\n  }\n\n  // Cipher APIs\n\n  async getCipher(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id, null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getFullCipherDetails(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id + \"/details\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getCipherAdmin(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"GET\", \"/ciphers/\" + id + \"/admin\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async getCiphersOrganization(organizationId: string): Promise<ListResponse<CipherResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/ciphers/organization-details?organizationId=\" + organizationId,\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CipherResponse);\n  }\n\n  async postCipher(request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async postCipherCreate(request: CipherCreateRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/create\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async postCipherAdmin(request: CipherCreateRequest): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/admin\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putCipher(id: string, request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id, request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putPartialCipher(id: string, request: CipherPartialRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/partial\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putCipherAdmin(id: string, request: CipherRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/admin\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  deleteCipher(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id, null, true, false);\n  }\n\n  deleteCipherAdmin(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id + \"/admin\", null, true, false);\n  }\n\n  deleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers\", request, true, false);\n  }\n\n  deleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/admin\", request, true, false);\n  }\n\n  putMoveCiphers(request: CipherBulkMoveRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/move\", request, true, false);\n  }\n\n  async putShareCipher(id: string, request: CipherShareRequest): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/share\", request, true, true);\n    return new CipherResponse(r);\n  }\n\n  putShareCiphers(request: CipherBulkShareRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/share\", request, true, false);\n  }\n\n  putCipherCollections(id: string, request: CipherCollectionsRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/collections\", request, true, false);\n  }\n\n  putCipherCollectionsAdmin(id: string, request: CipherCollectionsRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/collections-admin\", request, true, false);\n  }\n\n  postPurgeCiphers(\n    request: SecretVerificationRequest,\n    organizationId: string = null\n  ): Promise<any> {\n    let path = \"/ciphers/purge\";\n    if (organizationId != null) {\n      path += \"?organizationId=\" + organizationId;\n    }\n    return this.send(\"POST\", path, request, true, false);\n  }\n\n  putDeleteCipher(id: string): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/delete\", null, true, false);\n  }\n\n  putDeleteCipherAdmin(id: string): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/\" + id + \"/delete-admin\", null, true, false);\n  }\n\n  putDeleteManyCiphers(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/delete\", request, true, false);\n  }\n\n  putDeleteManyCiphersAdmin(request: CipherBulkDeleteRequest): Promise<any> {\n    return this.send(\"PUT\", \"/ciphers/delete-admin\", request, true, false);\n  }\n\n  async putRestoreCipher(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/restore\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putRestoreCipherAdmin(id: string): Promise<CipherResponse> {\n    const r = await this.send(\"PUT\", \"/ciphers/\" + id + \"/restore-admin\", null, true, true);\n    return new CipherResponse(r);\n  }\n\n  async putRestoreManyCiphers(\n    request: CipherBulkDeleteRequest\n  ): Promise<ListResponse<CipherResponse>> {\n    const r = await this.send(\"PUT\", \"/ciphers/restore\", request, true, true);\n    return new ListResponse<CipherResponse>(r, CipherResponse);\n  }\n\n  // Attachments APIs\n\n  async getAttachmentData(\n    cipherId: string,\n    attachmentId: string,\n    emergencyAccessId?: string\n  ): Promise<AttachmentResponse> {\n    const path =\n      (emergencyAccessId != null ? \"/emergency-access/\" + emergencyAccessId + \"/\" : \"/ciphers/\") +\n      cipherId +\n      \"/attachment/\" +\n      attachmentId;\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new AttachmentResponse(r);\n  }\n\n  async postCipherAttachment(\n    id: string,\n    request: AttachmentRequest\n  ): Promise<AttachmentUploadDataResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment/v2\", request, true, true);\n    return new AttachmentUploadDataResponse(r);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postCipherAttachmentLegacy(id: string, data: FormData): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment\", data, true, true);\n    return new CipherResponse(r);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postCipherAttachmentAdminLegacy(id: string, data: FormData): Promise<CipherResponse> {\n    const r = await this.send(\"POST\", \"/ciphers/\" + id + \"/attachment-admin\", data, true, true);\n    return new CipherResponse(r);\n  }\n\n  deleteCipherAttachment(id: string, attachmentId: string): Promise<any> {\n    return this.send(\"DELETE\", \"/ciphers/\" + id + \"/attachment/\" + attachmentId, null, true, false);\n  }\n\n  deleteCipherAttachmentAdmin(id: string, attachmentId: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/admin\",\n      null,\n      true,\n      false\n    );\n  }\n\n  postShareCipherAttachment(\n    id: string,\n    attachmentId: string,\n    data: FormData,\n    organizationId: string\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/share?organizationId=\" + organizationId,\n      data,\n      true,\n      false\n    );\n  }\n\n  async renewAttachmentUploadUrl(\n    id: string,\n    attachmentId: string\n  ): Promise<AttachmentUploadDataResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/ciphers/\" + id + \"/attachment/\" + attachmentId + \"/renew\",\n      null,\n      true,\n      true\n    );\n    return new AttachmentUploadDataResponse(r);\n  }\n\n  postAttachmentFile(id: string, attachmentId: string, data: FormData): Promise<any> {\n    return this.send(\"POST\", \"/ciphers/\" + id + \"/attachment/\" + attachmentId, data, true, false);\n  }\n\n  // Collections APIs\n\n  async getCollectionAccessDetails(\n    organizationId: string,\n    id: string\n  ): Promise<CollectionAccessDetailsResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/details\",\n      null,\n      true,\n      true\n    );\n    return new CollectionAccessDetailsResponse(r);\n  }\n\n  async getUserCollections(): Promise<ListResponse<CollectionResponse>> {\n    const r = await this.send(\"GET\", \"/collections\", null, true, true);\n    return new ListResponse(r, CollectionResponse);\n  }\n\n  async getCollections(organizationId: string): Promise<ListResponse<CollectionResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CollectionResponse);\n  }\n\n  async getManyCollectionsWithAccessDetails(\n    organizationId: string\n  ): Promise<ListResponse<CollectionAccessDetailsResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/details\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, CollectionAccessDetailsResponse);\n  }\n\n  async getCollectionUsers(\n    organizationId: string,\n    id: string\n  ): Promise<SelectionReadOnlyResponse[]> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/users\",\n      null,\n      true,\n      true\n    );\n    return r.map((dr: any) => new SelectionReadOnlyResponse(dr));\n  }\n\n  async postCollection(\n    organizationId: string,\n    request: CollectionRequest\n  ): Promise<CollectionResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/collections\",\n      request,\n      true,\n      true\n    );\n    return new CollectionResponse(r);\n  }\n\n  async putCollection(\n    organizationId: string,\n    id: string,\n    request: CollectionRequest\n  ): Promise<CollectionResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id,\n      request,\n      true,\n      true\n    );\n    return new CollectionResponse(r);\n  }\n\n  async putCollectionUsers(\n    organizationId: string,\n    id: string,\n    request: SelectionReadOnlyRequest[]\n  ): Promise<any> {\n    await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/users\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteCollection(organizationId: string, id: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id,\n      null,\n      true,\n      false\n    );\n  }\n\n  deleteManyCollections(request: CollectionBulkDeleteRequest): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + request.organizationId + \"/collections\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteCollectionUser(\n    organizationId: string,\n    id: string,\n    organizationUserId: string\n  ): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/collections/\" + id + \"/user/\" + organizationUserId,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Groups APIs\n\n  async getGroupUsers(organizationId: string, id: string): Promise<string[]> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/users\",\n      null,\n      true,\n      true\n    );\n    return r;\n  }\n\n  async putGroupUsers(organizationId: string, id: string, request: string[]): Promise<any> {\n    await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/users\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteGroupUser(organizationId: string, id: string, organizationUserId: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/groups/\" + id + \"/user/\" + organizationUserId,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Plan APIs\n\n  async getPlans(): Promise<ListResponse<PlanResponse>> {\n    const r = await this.send(\"GET\", \"/plans/\", null, false, true);\n    return new ListResponse(r, PlanResponse);\n  }\n\n  async postPublicImportDirectory(request: OrganizationImportRequest): Promise<any> {\n    return this.send(\"POST\", \"/public/organization/import\", request, true, false);\n  }\n\n  async getTaxRates(): Promise<ListResponse<TaxRateResponse>> {\n    const r = await this.send(\"GET\", \"/plans/sales-tax-rates/\", null, true, true);\n    return new ListResponse(r, TaxRateResponse);\n  }\n\n  // Settings APIs\n\n  async getSettingsDomains(): Promise<DomainsResponse> {\n    const r = await this.send(\"GET\", \"/settings/domains\", null, true, true);\n    return new DomainsResponse(r);\n  }\n\n  async putSettingsDomains(request: UpdateDomainsRequest): Promise<DomainsResponse> {\n    const r = await this.send(\"PUT\", \"/settings/domains\", request, true, true);\n    return new DomainsResponse(r);\n  }\n\n  // Sync APIs\n\n  async getSync(): Promise<SyncResponse> {\n    const path = this.isDesktopClient || this.isWebClient ? \"/sync?excludeDomains=true\" : \"/sync\";\n    const r = await this.send(\"GET\", path, null, true, true);\n    return new SyncResponse(r);\n  }\n\n  // Two-factor APIs\n\n  async getTwoFactorProviders(): Promise<ListResponse<TwoFactorProviderResponse>> {\n    const r = await this.send(\"GET\", \"/two-factor\", null, true, true);\n    return new ListResponse(r, TwoFactorProviderResponse);\n  }\n\n  async getTwoFactorOrganizationProviders(\n    organizationId: string\n  ): Promise<ListResponse<TwoFactorProviderResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/two-factor\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, TwoFactorProviderResponse);\n  }\n\n  async getTwoFactorAuthenticator(\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorAuthenticatorResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-authenticator\", request, true, true);\n    return new TwoFactorAuthenticatorResponse(r);\n  }\n\n  async getTwoFactorEmail(request: SecretVerificationRequest): Promise<TwoFactorEmailResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-email\", request, true, true);\n    return new TwoFactorEmailResponse(r);\n  }\n\n  async getTwoFactorDuo(request: SecretVerificationRequest): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-duo\", request, true, true);\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async getTwoFactorOrganizationDuo(\n    organizationId: string,\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/two-factor/get-duo\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async getTwoFactorYubiKey(request: SecretVerificationRequest): Promise<TwoFactorYubiKeyResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-yubikey\", request, true, true);\n    return new TwoFactorYubiKeyResponse(r);\n  }\n\n  async getTwoFactorWebAuthn(\n    request: SecretVerificationRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-webauthn\", request, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async getTwoFactorWebAuthnChallenge(\n    request: SecretVerificationRequest\n  ): Promise<ChallengeResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-webauthn-challenge\", request, true, true);\n    return new ChallengeResponse(r);\n  }\n\n  async getTwoFactorRecover(request: SecretVerificationRequest): Promise<TwoFactorRecoverResponse> {\n    const r = await this.send(\"POST\", \"/two-factor/get-recover\", request, true, true);\n    return new TwoFactorRecoverResponse(r);\n  }\n\n  async putTwoFactorAuthenticator(\n    request: UpdateTwoFactorAuthenticatorRequest\n  ): Promise<TwoFactorAuthenticatorResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/authenticator\", request, true, true);\n    return new TwoFactorAuthenticatorResponse(r);\n  }\n\n  async putTwoFactorEmail(request: UpdateTwoFactorEmailRequest): Promise<TwoFactorEmailResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/email\", request, true, true);\n    return new TwoFactorEmailResponse(r);\n  }\n\n  async putTwoFactorDuo(request: UpdateTwoFactorDuoRequest): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/duo\", request, true, true);\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async putTwoFactorOrganizationDuo(\n    organizationId: string,\n    request: UpdateTwoFactorDuoRequest\n  ): Promise<TwoFactorDuoResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/two-factor/duo\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorDuoResponse(r);\n  }\n\n  async putTwoFactorYubiKey(\n    request: UpdateTwoFactorYubioOtpRequest\n  ): Promise<TwoFactorYubiKeyResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/yubikey\", request, true, true);\n    return new TwoFactorYubiKeyResponse(r);\n  }\n\n  async putTwoFactorWebAuthn(\n    request: UpdateTwoFactorWebAuthnRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const response = request.deviceResponse.response as AuthenticatorAttestationResponse;\n    const data: any = Object.assign({}, request);\n\n    data.deviceResponse = {\n      id: request.deviceResponse.id,\n      rawId: btoa(request.deviceResponse.id),\n      type: request.deviceResponse.type,\n      extensions: request.deviceResponse.getClientExtensionResults(),\n      response: {\n        AttestationObject: Utils.fromBufferToB64(response.attestationObject),\n        clientDataJson: Utils.fromBufferToB64(response.clientDataJSON),\n      },\n    };\n\n    const r = await this.send(\"PUT\", \"/two-factor/webauthn\", data, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async deleteTwoFactorWebAuthn(\n    request: UpdateTwoFactorWebAuthnDeleteRequest\n  ): Promise<TwoFactorWebAuthnResponse> {\n    const r = await this.send(\"DELETE\", \"/two-factor/webauthn\", request, true, true);\n    return new TwoFactorWebAuthnResponse(r);\n  }\n\n  async putTwoFactorDisable(request: TwoFactorProviderRequest): Promise<TwoFactorProviderResponse> {\n    const r = await this.send(\"PUT\", \"/two-factor/disable\", request, true, true);\n    return new TwoFactorProviderResponse(r);\n  }\n\n  async putTwoFactorOrganizationDisable(\n    organizationId: string,\n    request: TwoFactorProviderRequest\n  ): Promise<TwoFactorProviderResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/two-factor/disable\",\n      request,\n      true,\n      true\n    );\n    return new TwoFactorProviderResponse(r);\n  }\n\n  postTwoFactorRecover(request: TwoFactorRecoveryRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/recover\", request, false, false);\n  }\n\n  postTwoFactorEmailSetup(request: TwoFactorEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/send-email\", request, true, false);\n  }\n\n  postTwoFactorEmail(request: TwoFactorEmailRequest): Promise<any> {\n    return this.send(\"POST\", \"/two-factor/send-email-login\", request, false, false);\n  }\n\n  async getDeviceVerificationSettings(): Promise<DeviceVerificationResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/two-factor/get-device-verification-settings\",\n      null,\n      true,\n      true\n    );\n    return new DeviceVerificationResponse(r);\n  }\n\n  async putDeviceVerificationSettings(\n    request: DeviceVerificationRequest\n  ): Promise<DeviceVerificationResponse> {\n    const r = await this.send(\n      \"PUT\",\n      \"/two-factor/device-verification-settings\",\n      request,\n      true,\n      true\n    );\n    return new DeviceVerificationResponse(r);\n  }\n\n  async getKnownDevice(email: string, deviceIdentifier: string): Promise<boolean> {\n    const r = await this.send(\"GET\", \"/devices/knowndevice\", null, false, true, null, (headers) => {\n      headers.set(\"X-Device-Identifier\", deviceIdentifier);\n      headers.set(\"X-Request-Email\", Utils.fromUtf8ToUrlB64(email));\n    });\n    return r as boolean;\n  }\n\n  // Emergency Access APIs\n\n  async getEmergencyAccessTrusted(): Promise<ListResponse<EmergencyAccessGranteeDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/trusted\", null, true, true);\n    return new ListResponse(r, EmergencyAccessGranteeDetailsResponse);\n  }\n\n  async getEmergencyAccessGranted(): Promise<ListResponse<EmergencyAccessGrantorDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/granted\", null, true, true);\n    return new ListResponse(r, EmergencyAccessGrantorDetailsResponse);\n  }\n\n  async getEmergencyAccess(id: string): Promise<EmergencyAccessGranteeDetailsResponse> {\n    const r = await this.send(\"GET\", \"/emergency-access/\" + id, null, true, true);\n    return new EmergencyAccessGranteeDetailsResponse(r);\n  }\n\n  async getEmergencyGrantorPolicies(id: string): Promise<ListResponse<PolicyResponse>> {\n    const r = await this.send(\"GET\", \"/emergency-access/\" + id + \"/policies\", null, true, true);\n    return new ListResponse(r, PolicyResponse);\n  }\n\n  putEmergencyAccess(id: string, request: EmergencyAccessUpdateRequest): Promise<any> {\n    return this.send(\"PUT\", \"/emergency-access/\" + id, request, true, false);\n  }\n\n  deleteEmergencyAccess(id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/emergency-access/\" + id, null, true, false);\n  }\n\n  postEmergencyAccessInvite(request: EmergencyAccessInviteRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/invite\", request, true, false);\n  }\n\n  postEmergencyAccessReinvite(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/reinvite\", null, true, false);\n  }\n\n  postEmergencyAccessAccept(id: string, request: EmergencyAccessAcceptRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/accept\", request, true, false);\n  }\n\n  postEmergencyAccessConfirm(id: string, request: EmergencyAccessConfirmRequest): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/confirm\", request, true, false);\n  }\n\n  postEmergencyAccessInitiate(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/initiate\", null, true, false);\n  }\n\n  postEmergencyAccessApprove(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/approve\", null, true, false);\n  }\n\n  postEmergencyAccessReject(id: string): Promise<any> {\n    return this.send(\"POST\", \"/emergency-access/\" + id + \"/reject\", null, true, false);\n  }\n\n  async postEmergencyAccessTakeover(id: string): Promise<EmergencyAccessTakeoverResponse> {\n    const r = await this.send(\"POST\", \"/emergency-access/\" + id + \"/takeover\", null, true, true);\n    return new EmergencyAccessTakeoverResponse(r);\n  }\n\n  async postEmergencyAccessPassword(\n    id: string,\n    request: EmergencyAccessPasswordRequest\n  ): Promise<any> {\n    await this.send(\"POST\", \"/emergency-access/\" + id + \"/password\", request, true, true);\n  }\n\n  async postEmergencyAccessView(id: string): Promise<EmergencyAccessViewResponse> {\n    const r = await this.send(\"POST\", \"/emergency-access/\" + id + \"/view\", null, true, true);\n    return new EmergencyAccessViewResponse(r);\n  }\n\n  // Organization APIs\n\n  async getCloudCommunicationsEnabled(): Promise<boolean> {\n    const r = await this.send(\"GET\", \"/organizations/connections/enabled\", null, true, true);\n    return r as boolean;\n  }\n\n  async getOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    id: string,\n    type: OrganizationConnectionType,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\"GET\", `/organizations/connections/${id}/${type}`, null, true, true);\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async createOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig }\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\"POST\", \"/organizations/connections/\", request, true, true);\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async updateOrganizationConnection<TConfig extends OrganizationConnectionConfigApis>(\n    request: OrganizationConnectionRequest,\n    configType: { new (response: any): TConfig },\n    organizationConnectionId?: string\n  ): Promise<OrganizationConnectionResponse<TConfig>> {\n    const r = await this.send(\n      \"PUT\",\n      \"/organizations/connections/\" + organizationConnectionId,\n      request,\n      true,\n      true\n    );\n    return new OrganizationConnectionResponse(r, configType);\n  }\n\n  async deleteOrganizationConnection(id: string): Promise<void> {\n    return this.send(\"DELETE\", \"/organizations/connections/\" + id, null, true, false);\n  }\n\n  // Provider APIs\n\n  async postProviderSetup(id: string, request: ProviderSetupRequest) {\n    const r = await this.send(\"POST\", \"/providers/\" + id + \"/setup\", request, true, true);\n    return new ProviderResponse(r);\n  }\n\n  async getProvider(id: string) {\n    const r = await this.send(\"GET\", \"/providers/\" + id, null, true, true);\n    return new ProviderResponse(r);\n  }\n\n  async putProvider(id: string, request: ProviderUpdateRequest) {\n    const r = await this.send(\"PUT\", \"/providers/\" + id, request, true, true);\n    return new ProviderResponse(r);\n  }\n\n  // Provider User APIs\n\n  async getProviderUsers(\n    providerId: string\n  ): Promise<ListResponse<ProviderUserUserDetailsResponse>> {\n    const r = await this.send(\"GET\", \"/providers/\" + providerId + \"/users\", null, true, true);\n    return new ListResponse(r, ProviderUserUserDetailsResponse);\n  }\n\n  async getProviderUser(providerId: string, id: string): Promise<ProviderUserResponse> {\n    const r = await this.send(\"GET\", \"/providers/\" + providerId + \"/users/\" + id, null, true, true);\n    return new ProviderUserResponse(r);\n  }\n\n  postProviderUserInvite(providerId: string, request: ProviderUserInviteRequest): Promise<any> {\n    return this.send(\"POST\", \"/providers/\" + providerId + \"/users/invite\", request, true, false);\n  }\n\n  postProviderUserReinvite(providerId: string, id: string): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/reinvite\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async postManyProviderUserReinvite(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/reinvite\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  async postProviderUserBulkConfirm(\n    providerId: string,\n    request: ProviderUserBulkConfirmRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/confirm\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  async deleteManyProviderUsers(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkResponse>> {\n    const r = await this.send(\"DELETE\", \"/providers/\" + providerId + \"/users\", request, true, true);\n    return new ListResponse(r, ProviderUserBulkResponse);\n  }\n\n  postProviderUserAccept(\n    providerId: string,\n    id: string,\n    request: ProviderUserAcceptRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/accept\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postProviderUserConfirm(\n    providerId: string,\n    id: string,\n    request: ProviderUserConfirmRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/\" + id + \"/confirm\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async postProviderUsersPublicKey(\n    providerId: string,\n    request: ProviderUserBulkRequest\n  ): Promise<ListResponse<ProviderUserBulkPublicKeyResponse>> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/users/public-keys\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderUserBulkPublicKeyResponse);\n  }\n\n  putProviderUser(\n    providerId: string,\n    id: string,\n    request: ProviderUserUpdateRequest\n  ): Promise<any> {\n    return this.send(\"PUT\", \"/providers/\" + providerId + \"/users/\" + id, request, true, false);\n  }\n\n  deleteProviderUser(providerId: string, id: string): Promise<any> {\n    return this.send(\"DELETE\", \"/providers/\" + providerId + \"/users/\" + id, null, true, false);\n  }\n\n  // Provider Organization APIs\n\n  async getProviderClients(\n    providerId: string\n  ): Promise<ListResponse<ProviderOrganizationOrganizationDetailsResponse>> {\n    const r = await this.send(\n      \"GET\",\n      \"/providers/\" + providerId + \"/organizations\",\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, ProviderOrganizationOrganizationDetailsResponse);\n  }\n\n  postProviderAddOrganization(\n    providerId: string,\n    request: ProviderAddOrganizationRequest\n  ): Promise<any> {\n    return this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/organizations/add\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async postProviderCreateOrganization(\n    providerId: string,\n    request: ProviderOrganizationCreateRequest\n  ): Promise<ProviderOrganizationResponse> {\n    const r = await this.send(\n      \"POST\",\n      \"/providers/\" + providerId + \"/organizations\",\n      request,\n      true,\n      true\n    );\n    return new ProviderOrganizationResponse(r);\n  }\n\n  deleteProviderOrganization(providerId: string, id: string): Promise<any> {\n    return this.send(\n      \"DELETE\",\n      \"/providers/\" + providerId + \"/organizations/\" + id,\n      null,\n      true,\n      false\n    );\n  }\n\n  // Event APIs\n\n  async getEvents(start: string, end: string, token: string): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsCipher(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/ciphers/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsOrganization(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/organizations/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsOrganizationUser(\n    organizationId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\n        \"/organizations/\" + organizationId + \"/users/\" + id + \"/events\",\n        start,\n        end,\n        token\n      ),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsProvider(\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\"/providers/\" + id + \"/events\", start, end, token),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async getEventsProviderUser(\n    providerId: string,\n    id: string,\n    start: string,\n    end: string,\n    token: string\n  ): Promise<ListResponse<EventResponse>> {\n    const r = await this.send(\n      \"GET\",\n      this.addEventParameters(\n        \"/providers/\" + providerId + \"/users/\" + id + \"/events\",\n        start,\n        end,\n        token\n      ),\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, EventResponse);\n  }\n\n  async postEventsCollect(request: EventRequest[]): Promise<any> {\n    const authHeader = await this.getActiveBearerToken();\n    const headers = new Headers({\n      \"Device-Type\": this.deviceType,\n      Authorization: \"Bearer \" + authHeader,\n      \"Content-Type\": \"application/json; charset=utf-8\",\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n    const response = await this.fetch(\n      new Request(this.environmentService.getEventsUrl() + \"/collect\", {\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        method: \"POST\",\n        body: JSON.stringify(request),\n        headers: headers,\n      })\n    );\n    if (response.status !== 200) {\n      return Promise.reject(\"Event post failed.\");\n    }\n  }\n\n  // User APIs\n\n  async getUserPublicKey(id: string): Promise<UserKeyResponse> {\n    const r = await this.send(\"GET\", \"/users/\" + id + \"/public-key\", null, true, true);\n    return new UserKeyResponse(r);\n  }\n\n  // HIBP APIs\n\n  async getHibpBreach(username: string): Promise<BreachAccountResponse[]> {\n    const r = await this.send(\"GET\", \"/hibp/breach?username=\" + username, null, true, true);\n    return r.map((a: any) => new BreachAccountResponse(a));\n  }\n\n  // Misc\n\n  async postBitPayInvoice(request: BitPayInvoiceRequest): Promise<string> {\n    const r = await this.send(\"POST\", \"/bitpay-invoice\", request, true, true);\n    return r as string;\n  }\n\n  async postSetupPayment(): Promise<string> {\n    const r = await this.send(\"POST\", \"/setup-payment\", null, true, true);\n    return r as string;\n  }\n\n  // Key Connector\n\n  async getUserKeyFromKeyConnector(keyConnectorUrl: string): Promise<KeyConnectorUserKeyResponse> {\n    const authHeader = await this.getActiveBearerToken();\n\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/user-keys\", {\n        cache: \"no-store\",\n        method: \"GET\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + authHeader,\n        }),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n\n    return new KeyConnectorUserKeyResponse(await response.json());\n  }\n\n  async postUserKeyToKeyConnector(\n    keyConnectorUrl: string,\n    request: KeyConnectorUserKeyRequest\n  ): Promise<void> {\n    const authHeader = await this.getActiveBearerToken();\n\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/user-keys\", {\n        cache: \"no-store\",\n        method: \"POST\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          Authorization: \"Bearer \" + authHeader,\n          \"Content-Type\": \"application/json; charset=utf-8\",\n        }),\n        body: JSON.stringify(request),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async getKeyConnectorAlive(keyConnectorUrl: string) {\n    const response = await this.fetch(\n      new Request(keyConnectorUrl + \"/alive\", {\n        cache: \"no-store\",\n        method: \"GET\",\n        headers: new Headers({\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json; charset=utf-8\",\n        }),\n      })\n    );\n\n    if (response.status !== 200) {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async getOrganizationExport(organizationId: string): Promise<OrganizationExportResponse> {\n    const r = await this.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/export\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationExportResponse(r);\n  }\n\n  // Helpers\n\n  async getActiveBearerToken(): Promise<string> {\n    let accessToken = await this.tokenService.getToken();\n    if (await this.tokenService.tokenNeedsRefresh()) {\n      await this.doAuthRefresh();\n      accessToken = await this.tokenService.getToken();\n    }\n    return accessToken;\n  }\n\n  async fetch(request: Request): Promise<Response> {\n    if (request.method === \"GET\") {\n      request.headers.set(\"Cache-Control\", \"no-store\");\n      request.headers.set(\"Pragma\", \"no-cache\");\n    }\n    request.headers.set(\"Bitwarden-Client-Name\", this.platformUtilsService.getClientType());\n    request.headers.set(\n      \"Bitwarden-Client-Version\",\n      await this.platformUtilsService.getApplicationVersionNumber()\n    );\n    return this.nativeFetch(request);\n  }\n\n  nativeFetch(request: Request): Promise<Response> {\n    return fetch(request);\n  }\n\n  async preValidateSso(identifier: string): Promise<SsoPreValidateResponse> {\n    if (identifier == null || identifier === \"\") {\n      throw new Error(\"Organization Identifier was not provided.\");\n    }\n    const headers = new Headers({\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const path = `/account/prevalidate?domainHint=${encodeURIComponent(identifier)}`;\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + path, {\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        headers: headers,\n        method: \"GET\",\n      })\n    );\n\n    if (response.status === 200) {\n      const body = await response.json();\n      return new SsoPreValidateResponse(body);\n    } else {\n      const error = await this.handleError(response, false, true);\n      return Promise.reject(error);\n    }\n  }\n\n  async postCreateSponsorship(\n    sponsoredOrgId: string,\n    request: OrganizationSponsorshipCreateRequest\n  ): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/\" +\n        (this.platformUtilsService.isSelfHost() ? \"self-hosted/\" : \"\") +\n        sponsoredOrgId +\n        \"/families-for-enterprise\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async getSponsorshipSyncStatus(\n    sponsoredOrgId: string\n  ): Promise<OrganizationSponsorshipSyncStatusResponse> {\n    const response = await this.send(\n      \"GET\",\n      \"/organization/sponsorship/\" + sponsoredOrgId + \"/sync-status\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationSponsorshipSyncStatusResponse(response);\n  }\n\n  async deleteRevokeSponsorship(sponsoringOrganizationId: string): Promise<void> {\n    return await this.send(\n      \"DELETE\",\n      \"/organization/sponsorship/\" +\n        (this.platformUtilsService.isSelfHost() ? \"self-hosted/\" : \"\") +\n        sponsoringOrganizationId,\n      null,\n      true,\n      false\n    );\n  }\n\n  async deleteRemoveSponsorship(sponsoringOrgId: string): Promise<void> {\n    return await this.send(\n      \"DELETE\",\n      \"/organization/sponsorship/sponsored/\" + sponsoringOrgId,\n      null,\n      true,\n      false\n    );\n  }\n\n  async postPreValidateSponsorshipToken(sponsorshipToken: string): Promise<boolean> {\n    const r = await this.send(\n      \"POST\",\n      \"/organization/sponsorship/validate-token?sponsorshipToken=\" +\n        encodeURIComponent(sponsorshipToken),\n      null,\n      true,\n      true\n    );\n    return r as boolean;\n  }\n\n  async postRedeemSponsorship(\n    sponsorshipToken: string,\n    request: OrganizationSponsorshipRedeemRequest\n  ): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/redeem?sponsorshipToken=\" + encodeURIComponent(sponsorshipToken),\n      request,\n      true,\n      false\n    );\n  }\n\n  async postResendSponsorshipOffer(sponsoringOrgId: string): Promise<void> {\n    return await this.send(\n      \"POST\",\n      \"/organization/sponsorship/\" + sponsoringOrgId + \"/families-for-enterprise/resend\",\n      null,\n      true,\n      false\n    );\n  }\n\n  protected async doAuthRefresh(): Promise<void> {\n    const refreshToken = await this.tokenService.getRefreshToken();\n    if (refreshToken != null && refreshToken !== \"\") {\n      return this.doRefreshToken();\n    }\n\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n    if (!Utils.isNullOrWhitespace(clientId) && !Utils.isNullOrWhitespace(clientSecret)) {\n      return this.doApiTokenRefresh();\n    }\n\n    throw new Error(\"Cannot refresh token, no refresh token or api keys are stored\");\n  }\n\n  protected async doRefreshToken(): Promise<void> {\n    const refreshToken = await this.tokenService.getRefreshToken();\n    if (refreshToken == null || refreshToken === \"\") {\n      throw new Error();\n    }\n    const headers = new Headers({\n      \"Content-Type\": \"application/x-www-form-urlencoded; charset=utf-8\",\n      Accept: \"application/json\",\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const decodedToken = await this.tokenService.decodeToken();\n    const response = await this.fetch(\n      new Request(this.environmentService.getIdentityUrl() + \"/connect/token\", {\n        body: this.qsStringify({\n          grant_type: \"refresh_token\",\n          client_id: decodedToken.client_id,\n          refresh_token: refreshToken,\n        }),\n        cache: \"no-store\",\n        credentials: this.getCredentials(),\n        headers: headers,\n        method: \"POST\",\n      })\n    );\n\n    if (response.status === 200) {\n      const responseJson = await response.json();\n      const tokenResponse = new IdentityTokenResponse(responseJson);\n      await this.tokenService.setTokens(\n        tokenResponse.accessToken,\n        tokenResponse.refreshToken,\n        null\n      );\n    } else {\n      const error = await this.handleError(response, true, true);\n      return Promise.reject(error);\n    }\n  }\n\n  protected async doApiTokenRefresh(): Promise<void> {\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n\n    const appId = await this.appIdService.getAppId();\n    const deviceRequest = new DeviceRequest(appId, this.platformUtilsService);\n    const tokenRequest = new UserApiTokenRequest(\n      clientId,\n      clientSecret,\n      new TokenTwoFactorRequest(),\n      deviceRequest\n    );\n\n    const response = await this.postIdentityToken(tokenRequest);\n    if (!(response instanceof IdentityTokenResponse)) {\n      throw new Error(\"Invalid response received when refreshing api token\");\n    }\n\n    await this.tokenService.setToken(response.accessToken);\n  }\n\n  async send(\n    method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\",\n    path: string,\n    body: any,\n    authed: boolean,\n    hasResponse: boolean,\n    apiUrl?: string,\n    alterHeaders?: (headers: Headers) => void\n  ): Promise<any> {\n    apiUrl = Utils.isNullOrWhitespace(apiUrl) ? this.environmentService.getApiUrl() : apiUrl;\n\n    // Prevent directory traversal from malicious paths\n    const pathParts = path.split(\"?\");\n    const requestUrl =\n      apiUrl + Utils.normalizePath(pathParts[0]) + (pathParts.length > 1 ? `?${pathParts[1]}` : \"\");\n\n    const headers = new Headers({\n      \"Device-Type\": this.deviceType,\n    });\n    if (this.customUserAgent != null) {\n      headers.set(\"User-Agent\", this.customUserAgent);\n    }\n\n    const requestInit: RequestInit = {\n      cache: \"no-store\",\n      credentials: this.getCredentials(),\n      method: method,\n    };\n\n    if (authed) {\n      const authHeader = await this.getActiveBearerToken();\n      headers.set(\"Authorization\", \"Bearer \" + authHeader);\n    }\n    if (body != null) {\n      if (typeof body === \"string\") {\n        requestInit.body = body;\n        headers.set(\"Content-Type\", \"application/x-www-form-urlencoded; charset=utf-8\");\n      } else if (typeof body === \"object\") {\n        if (body instanceof FormData) {\n          requestInit.body = body;\n        } else {\n          headers.set(\"Content-Type\", \"application/json; charset=utf-8\");\n          requestInit.body = JSON.stringify(body);\n        }\n      }\n    }\n    if (hasResponse) {\n      headers.set(\"Accept\", \"application/json\");\n    }\n    if (alterHeaders != null) {\n      alterHeaders(headers);\n    }\n\n    requestInit.headers = headers;\n    const response = await this.fetch(new Request(requestUrl, requestInit));\n\n    const responseType = response.headers.get(\"content-type\");\n    const responseIsJson = responseType != null && responseType.indexOf(\"application/json\") !== -1;\n    if (hasResponse && response.status === 200 && responseIsJson) {\n      const responseJson = await response.json();\n      return responseJson;\n    } else if (response.status !== 200) {\n      const error = await this.handleError(response, false, authed);\n      return Promise.reject(error);\n    }\n  }\n\n  private async handleError(\n    response: Response,\n    tokenError: boolean,\n    authed: boolean\n  ): Promise<ErrorResponse> {\n    let responseJson: any = null;\n    if (this.isJsonResponse(response)) {\n      responseJson = await response.json();\n    } else if (this.isTextResponse(response)) {\n      responseJson = { Message: await response.text() };\n    }\n\n    if (authed) {\n      if (\n        response.status === 401 ||\n        response.status === 403 ||\n        (tokenError &&\n          response.status === 400 &&\n          responseJson != null &&\n          responseJson.error === \"invalid_grant\")\n      ) {\n        await this.logoutCallback(true);\n        return null;\n      }\n    }\n\n    return new ErrorResponse(responseJson, response.status, tokenError);\n  }\n\n  private qsStringify(params: any): string {\n    return Object.keys(params)\n      .map((key) => {\n        return encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key]);\n      })\n      .join(\"&\");\n  }\n\n  private getCredentials(): RequestCredentials {\n    if (!this.isWebClient || this.environmentService.hasBaseUrl()) {\n      return \"include\";\n    }\n    return undefined;\n  }\n\n  private addEventParameters(base: string, start: string, end: string, token: string) {\n    if (start != null) {\n      base += \"?start=\" + start;\n    }\n    if (end != null) {\n      base += base.indexOf(\"?\") > -1 ? \"&\" : \"?\";\n      base += \"end=\" + end;\n    }\n    if (token != null) {\n      base += base.indexOf(\"?\") > -1 ? \"&\" : \"?\";\n      base += \"continuationToken=\" + token;\n    }\n    return base;\n  }\n\n  private isJsonResponse(response: Response): boolean {\n    const typeHeader = response.headers.get(\"content-type\");\n    return typeHeader != null && typeHeader.indexOf(\"application/json\") > -1;\n  }\n\n  private isTextResponse(response: Response): boolean {\n    const typeHeader = response.headers.get(\"content-type\");\n    return typeHeader != null && typeHeader.indexOf(\"text\") > -1;\n  }\n}\n","import { AppIdService as AppIdServiceAbstraction } from \"../abstractions/appId.service\";\nimport { AbstractStorageService } from \"../abstractions/storage.service\";\nimport { HtmlStorageLocation } from \"../enums\";\nimport { Utils } from \"../misc/utils\";\n\nexport class AppIdService implements AppIdServiceAbstraction {\n  constructor(private storageService: AbstractStorageService) {}\n\n  getAppId(): Promise<string> {\n    return this.makeAndGetAppId(\"appId\");\n  }\n\n  getAnonymousAppId(): Promise<string> {\n    return this.makeAndGetAppId(\"anonymousAppId\");\n  }\n\n  private async makeAndGetAppId(key: string) {\n    const existingId = await this.storageService.get<string>(key, {\n      htmlStorageLocation: HtmlStorageLocation.Local,\n    });\n    if (existingId != null) {\n      return existingId;\n    }\n\n    const guid = Utils.newGuid();\n    await this.storageService.save(key, guid, {\n      htmlStorageLocation: HtmlStorageLocation.Local,\n    });\n    return guid;\n  }\n}\n","import { ApiService } from \"../abstractions/api.service\";\nimport { AuditService as AuditServiceAbstraction } from \"../abstractions/audit.service\";\nimport { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport { throttle } from \"../misc/throttle\";\nimport { Utils } from \"../misc/utils\";\nimport { BreachAccountResponse } from \"../models/response/breach-account.response\";\nimport { ErrorResponse } from \"../models/response/error.response\";\n\nconst PwnedPasswordsApi = \"https://api.pwnedpasswords.com/range/\";\n\nexport class AuditService implements AuditServiceAbstraction {\n  constructor(\n    private cryptoFunctionService: CryptoFunctionService,\n    private apiService: ApiService\n  ) {}\n\n  @throttle(100, () => \"passwordLeaked\")\n  async passwordLeaked(password: string): Promise<number> {\n    const hashBytes = await this.cryptoFunctionService.hash(password, \"sha1\");\n    const hash = Utils.fromBufferToHex(hashBytes).toUpperCase();\n    const hashStart = hash.substr(0, 5);\n    const hashEnding = hash.substr(5);\n\n    const response = await this.apiService.nativeFetch(new Request(PwnedPasswordsApi + hashStart));\n    const leakedHashes = await response.text();\n    const match = leakedHashes.split(/\\r?\\n/).find((v) => {\n      return v.split(\":\")[0] === hashEnding;\n    });\n\n    return match != null ? parseInt(match.split(\":\")[1], 10) : 0;\n  }\n\n  async breachedAccounts(username: string): Promise<BreachAccountResponse[]> {\n    try {\n      return await this.apiService.getHibpBreach(username);\n    } catch (e) {\n      const error = e as ErrorResponse;\n      if (error.statusCode === 404) {\n        return [];\n      }\n      throw new Error();\n    }\n  }\n}\n","/**\n * Use as a Decorator on async functions, it will limit how many times the function can be\n * in-flight at a time.\n *\n * Calls beyond the limit will be queued, and run when one of the active calls finishes\n */\nexport function throttle(limit: number, throttleKey: (args: any[]) => string) {\n  return <T>(\n    target: any,\n    propertyKey: string | symbol,\n    descriptor: TypedPropertyDescriptor<(...args: any[]) => Promise<T>>\n  ) => {\n    const originalMethod: () => Promise<T> = descriptor.value;\n    const allThrottles = new Map<any, Map<string, (() => void)[]>>();\n\n    const getThrottles = (obj: any) => {\n      let throttles = allThrottles.get(obj);\n      if (throttles != null) {\n        return throttles;\n      }\n      throttles = new Map<string, (() => void)[]>();\n      allThrottles.set(obj, throttles);\n      return throttles;\n    };\n\n    return {\n      value: function (...args: any[]) {\n        const throttles = getThrottles(this);\n        const argsThrottleKey = throttleKey(args);\n        let queue = throttles.get(argsThrottleKey);\n        if (queue == null) {\n          queue = [];\n          throttles.set(argsThrottleKey, queue);\n        }\n\n        return new Promise<T>((resolve, reject) => {\n          const exec = () => {\n            const onFinally = () => {\n              queue.splice(queue.indexOf(exec), 1);\n              if (queue.length >= limit) {\n                queue[limit - 1]();\n              } else if (queue.length === 0) {\n                throttles.delete(argsThrottleKey);\n                if (throttles.size === 0) {\n                  allThrottles.delete(this);\n                }\n              }\n            };\n            originalMethod\n              .apply(this, args)\n              .then((val: any) => {\n                onFinally();\n                return val;\n              })\n              .catch((err: any) => {\n                onFinally();\n                throw err;\n              })\n              .then(resolve, reject);\n          };\n          queue.push(exec);\n          if (queue.length <= limit) {\n            exec();\n          }\n        });\n      },\n    };\n  };\n}\n","import { BaseResponse } from \"./base.response\";\n\nexport class ServerConfigResponse extends BaseResponse {\n  version: string;\n  gitHash: string;\n  server: ThirdPartyServerConfigResponse;\n  environment: EnvironmentServerConfigResponse;\n\n  constructor(response: any) {\n    super(response);\n\n    if (response == null) {\n      return;\n    }\n\n    this.version = this.getResponseProperty(\"Version\");\n    this.gitHash = this.getResponseProperty(\"GitHash\");\n    this.server = new ThirdPartyServerConfigResponse(this.getResponseProperty(\"Server\"));\n    this.environment = new EnvironmentServerConfigResponse(this.getResponseProperty(\"Environment\"));\n  }\n}\n\nexport class EnvironmentServerConfigResponse extends BaseResponse {\n  vault: string;\n  api: string;\n  identity: string;\n  notifications: string;\n  sso: string;\n\n  constructor(data: any = null) {\n    super(data);\n\n    if (data == null) {\n      return;\n    }\n\n    this.vault = this.getResponseProperty(\"Vault\");\n    this.api = this.getResponseProperty(\"Api\");\n    this.identity = this.getResponseProperty(\"Identity\");\n    this.notifications = this.getResponseProperty(\"Notifications\");\n    this.sso = this.getResponseProperty(\"Sso\");\n  }\n}\n\nexport class ThirdPartyServerConfigResponse extends BaseResponse {\n  name: string;\n  url: string;\n\n  constructor(data: any = null) {\n    super(data);\n\n    if (data == null) {\n      return;\n    }\n\n    this.name = this.getResponseProperty(\"Name\");\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport {\n  ServerConfigData,\n  ThirdPartyServerConfigData,\n  EnvironmentServerConfigData,\n} from \"../../models/data/server-config.data\";\n\nconst dayInMilliseconds = 24 * 3600 * 1000;\nconst eighteenHoursInMilliseconds = 18 * 3600 * 1000;\n\nexport class ServerConfig {\n  version: string;\n  gitHash: string;\n  server?: ThirdPartyServerConfigData;\n  environment?: EnvironmentServerConfigData;\n  utcDate: Date;\n\n  constructor(serverConfigData: ServerConfigData) {\n    this.version = serverConfigData.version;\n    this.gitHash = serverConfigData.gitHash;\n    this.server = serverConfigData.server;\n    this.utcDate = new Date(serverConfigData.utcDate);\n    this.environment = serverConfigData.environment;\n\n    if (this.server?.name == null && this.server?.url == null) {\n      this.server = null;\n    }\n  }\n\n  private getAgeInMilliseconds(): number {\n    return new Date().getTime() - this.utcDate?.getTime();\n  }\n\n  isValid(): boolean {\n    return this.getAgeInMilliseconds() <= dayInMilliseconds;\n  }\n\n  expiresSoon(): boolean {\n    return this.getAgeInMilliseconds() >= eighteenHoursInMilliseconds;\n  }\n\n  static fromJSON(obj: Jsonify<ServerConfig>): ServerConfig {\n    if (obj == null) {\n      return null;\n    }\n\n    return new ServerConfig(obj);\n  }\n}\n","import { BehaviorSubject, concatMap, map, switchMap, timer, EMPTY } from \"rxjs\";\n\nimport { ConfigApiServiceAbstraction } from \"../../abstractions/config/config-api.service.abstraction\";\nimport { ConfigServiceAbstraction } from \"../../abstractions/config/config.service.abstraction\";\nimport { ServerConfig } from \"../../abstractions/config/server-config\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { ServerConfigData } from \"../../models/data/server-config.data\";\n\nexport class ConfigService implements ConfigServiceAbstraction {\n  protected _serverConfig = new BehaviorSubject<ServerConfig | null>(null);\n  serverConfig$ = this._serverConfig.asObservable();\n\n  constructor(\n    private stateService: StateService,\n    private configApiService: ConfigApiServiceAbstraction\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        switchMap((unlocked) => {\n          if (!unlocked) {\n            this._serverConfig.next(null);\n            return EMPTY;\n          }\n\n          // Re-fetch the server config every hour\n          return timer(0, 3600 * 1000).pipe(map(() => unlocked));\n        }),\n        concatMap(async (unlocked) => {\n          return unlocked ? await this.buildServerConfig() : null;\n        })\n      )\n      .subscribe((serverConfig) => {\n        this._serverConfig.next(serverConfig);\n      });\n  }\n\n  private async buildServerConfig(): Promise<ServerConfig> {\n    const data = await this.stateService.getServerConfig();\n    const domain = data ? new ServerConfig(data) : null;\n\n    if (domain == null || !domain.isValid() || domain.expiresSoon()) {\n      const value = await this.fetchServerConfig();\n      return value ?? domain;\n    }\n\n    return domain;\n  }\n\n  private async fetchServerConfig(): Promise<ServerConfig> {\n    try {\n      const response = await this.configApiService.get();\n\n      if (response != null) {\n        const data = new ServerConfigData(response);\n        await this.stateService.setServerConfig(data);\n        return new ServerConfig(data);\n      }\n    } catch {\n      return null;\n    }\n  }\n}\n","import { LogService as LogServiceAbstraction } from \"../abstractions/log.service\";\nimport { LogLevelType } from \"../enums\";\n\nexport class ConsoleLogService implements LogServiceAbstraction {\n  protected timersMap: Map<string, [number, number]> = new Map();\n\n  constructor(\n    protected isDev: boolean,\n    protected filter: (level: LogLevelType) => boolean = null\n  ) {}\n\n  debug(message: string) {\n    if (!this.isDev) {\n      return;\n    }\n    this.write(LogLevelType.Debug, message);\n  }\n\n  info(message: string) {\n    this.write(LogLevelType.Info, message);\n  }\n\n  warning(message: string) {\n    this.write(LogLevelType.Warning, message);\n  }\n\n  error(message: string) {\n    this.write(LogLevelType.Error, message);\n  }\n\n  write(level: LogLevelType, message: string) {\n    if (this.filter != null && this.filter(level)) {\n      return;\n    }\n\n    switch (level) {\n      case LogLevelType.Debug:\n        // eslint-disable-next-line\n        console.log(message);\n        break;\n      case LogLevelType.Info:\n        // eslint-disable-next-line\n        console.log(message);\n        break;\n      case LogLevelType.Warning:\n        // eslint-disable-next-line\n        console.warn(message);\n        break;\n      case LogLevelType.Error:\n        // eslint-disable-next-line\n        console.error(message);\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { CryptoService } from \"../../../abstractions/crypto.service\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { EncryptedOrganizationKeyData } from \"../data/encrypted-organization-key.data\";\n\nexport abstract class BaseEncryptedOrganizationKey {\n  decrypt: (cryptoService: CryptoService) => Promise<SymmetricCryptoKey>;\n\n  static fromData(data: EncryptedOrganizationKeyData) {\n    switch (data.type) {\n      case \"organization\":\n        return new EncryptedOrganizationKey(data.key);\n\n      case \"provider\":\n        return new ProviderEncryptedOrganizationKey(data.key, data.providerId);\n\n      default:\n        return null;\n    }\n  }\n}\n\nexport class EncryptedOrganizationKey implements BaseEncryptedOrganizationKey {\n  constructor(private key: string) {}\n\n  async decrypt(cryptoService: CryptoService) {\n    const decValue = await cryptoService.rsaDecrypt(this.key);\n    return new SymmetricCryptoKey(decValue);\n  }\n\n  toData(): EncryptedOrganizationKeyData {\n    return {\n      type: \"organization\",\n      key: this.key,\n    };\n  }\n}\n\nexport class ProviderEncryptedOrganizationKey implements BaseEncryptedOrganizationKey {\n  constructor(private key: string, private providerId: string) {}\n\n  async decrypt(cryptoService: CryptoService) {\n    const providerKey = await cryptoService.getProviderKey(this.providerId);\n    const decValue = await cryptoService.decryptToBytes(new EncString(this.key), providerKey);\n    return new SymmetricCryptoKey(decValue);\n  }\n\n  toData(): EncryptedOrganizationKeyData {\n    return {\n      type: \"provider\",\n      key: this.key,\n      providerId: this.providerId,\n    };\n  }\n}\n","/**\n * Use as a Decorator on async functions, it will prevent multiple 'active' calls as the same time\n *\n * If a promise was returned from a previous call to this function, that hasn't yet resolved it will\n * be returned, instead of calling the original function again\n *\n * Results are not cached, once the promise has returned, the next call will result in a fresh call\n *\n * Read more at https://github.com/bitwarden/jslib/pull/7\n */\nexport function sequentialize(cacheKey: (args: any[]) => string) {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod: () => Promise<any> = descriptor.value;\n    const caches = new Map<any, Map<string, Promise<any>>>();\n\n    const getCache = (obj: any) => {\n      let cache = caches.get(obj);\n      if (cache != null) {\n        return cache;\n      }\n      cache = new Map<string, Promise<any>>();\n      caches.set(obj, cache);\n      return cache;\n    };\n\n    return {\n      value: function (...args: any[]) {\n        const cache = getCache(this);\n        const argsCacheKey = cacheKey(args);\n        let response = cache.get(argsCacheKey);\n        if (response != null) {\n          return response;\n        }\n\n        const onFinally = () => {\n          cache.delete(argsCacheKey);\n          if (cache.size === 0) {\n            caches.delete(this);\n          }\n        };\n        response = originalMethod\n          .apply(this, args)\n          .then((val: any) => {\n            onFinally();\n            return val;\n          })\n          .catch((err: any) => {\n            onFinally();\n            throw err;\n          });\n\n        cache.set(argsCacheKey, response);\n        return response;\n      },\n    };\n  };\n}\n","import * as bigInt from \"big-integer\";\n\nimport { CryptoService as CryptoServiceAbstraction } from \"../abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { EncryptedOrganizationKeyData } from \"../admin-console/models/data/encrypted-organization-key.data\";\nimport { BaseEncryptedOrganizationKey } from \"../admin-console/models/domain/encrypted-organization-key\";\nimport { ProfileOrganizationResponse } from \"../admin-console/models/response/profile-organization.response\";\nimport { ProfileProviderOrganizationResponse } from \"../admin-console/models/response/profile-provider-organization.response\";\nimport { ProfileProviderResponse } from \"../admin-console/models/response/profile-provider.response\";\nimport { KdfConfig } from \"../auth/models/domain/kdf-config\";\nimport {\n  DEFAULT_ARGON2_ITERATIONS,\n  DEFAULT_ARGON2_MEMORY,\n  DEFAULT_ARGON2_PARALLELISM,\n  EncryptionType,\n  HashPurpose,\n  KdfType,\n  KeySuffixOptions,\n} from \"../enums\";\nimport { sequentialize } from \"../misc/sequentialize\";\nimport { Utils } from \"../misc/utils\";\nimport { EFFLongWordList } from \"../misc/wordlist\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\n\nexport class CryptoService implements CryptoServiceAbstraction {\n  constructor(\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected encryptService: EncryptService,\n    protected platformUtilService: PlatformUtilsService,\n    protected logService: LogService,\n    protected stateService: StateService\n  ) {}\n\n  async setKey(key: SymmetricCryptoKey, userId?: string): Promise<any> {\n    await this.stateService.setCryptoMasterKey(key, { userId: userId });\n    await this.storeKey(key, userId);\n  }\n\n  async setKeyHash(keyHash: string): Promise<void> {\n    await this.stateService.setKeyHash(keyHash);\n  }\n\n  async setEncKey(encKey: string): Promise<void> {\n    if (encKey == null) {\n      return;\n    }\n\n    await this.stateService.setDecryptedCryptoSymmetricKey(null);\n    await this.stateService.setEncryptedCryptoSymmetricKey(encKey);\n  }\n\n  async setEncPrivateKey(encPrivateKey: string): Promise<void> {\n    if (encPrivateKey == null) {\n      return;\n    }\n\n    await this.stateService.setDecryptedPrivateKey(null);\n    await this.stateService.setEncryptedPrivateKey(encPrivateKey);\n  }\n\n  async setOrgKeys(\n    orgs: ProfileOrganizationResponse[] = [],\n    providerOrgs: ProfileProviderOrganizationResponse[] = []\n  ): Promise<void> {\n    const encOrgKeyData: { [orgId: string]: EncryptedOrganizationKeyData } = {};\n\n    orgs.forEach((org) => {\n      encOrgKeyData[org.id] = {\n        type: \"organization\",\n        key: org.key,\n      };\n    });\n\n    providerOrgs.forEach((org) => {\n      encOrgKeyData[org.id] = {\n        type: \"provider\",\n        providerId: org.providerId,\n        key: org.key,\n      };\n    });\n\n    await this.stateService.setDecryptedOrganizationKeys(null);\n    return await this.stateService.setEncryptedOrganizationKeys(encOrgKeyData);\n  }\n\n  async setProviderKeys(providers: ProfileProviderResponse[]): Promise<void> {\n    const providerKeys: any = {};\n    providers.forEach((provider) => {\n      providerKeys[provider.id] = provider.key;\n    });\n\n    await this.stateService.setDecryptedProviderKeys(null);\n    return await this.stateService.setEncryptedProviderKeys(providerKeys);\n  }\n\n  async getKey(keySuffix?: KeySuffixOptions, userId?: string): Promise<SymmetricCryptoKey> {\n    const inMemoryKey = await this.stateService.getCryptoMasterKey({ userId: userId });\n\n    if (inMemoryKey != null) {\n      return inMemoryKey;\n    }\n\n    keySuffix ||= KeySuffixOptions.Auto;\n    const symmetricKey = await this.getKeyFromStorage(keySuffix, userId);\n\n    if (symmetricKey != null) {\n      // TODO: Refactor here so get key doesn't also set key\n      this.setKey(symmetricKey, userId);\n    }\n\n    return symmetricKey;\n  }\n\n  async getKeyFromStorage(\n    keySuffix: KeySuffixOptions,\n    userId?: string\n  ): Promise<SymmetricCryptoKey> {\n    const key = await this.retrieveKeyFromStorage(keySuffix, userId);\n    if (key != null) {\n      const symmetricKey = new SymmetricCryptoKey(Utils.fromB64ToArray(key).buffer);\n\n      if (!(await this.validateKey(symmetricKey))) {\n        this.logService.warning(\"Wrong key, throwing away stored key\");\n        await this.clearSecretKeyStore(userId);\n        return null;\n      }\n\n      return symmetricKey;\n    }\n    return null;\n  }\n\n  async getKeyHash(): Promise<string> {\n    return await this.stateService.getKeyHash();\n  }\n\n  async compareAndUpdateKeyHash(masterPassword: string, key: SymmetricCryptoKey): Promise<boolean> {\n    const storedKeyHash = await this.getKeyHash();\n    if (masterPassword != null && storedKeyHash != null) {\n      const localKeyHash = await this.hashPassword(\n        masterPassword,\n        key,\n        HashPurpose.LocalAuthorization\n      );\n      if (localKeyHash != null && storedKeyHash === localKeyHash) {\n        return true;\n      }\n\n      // TODO: remove serverKeyHash check in 1-2 releases after everyone's keyHash has been updated\n      const serverKeyHash = await this.hashPassword(\n        masterPassword,\n        key,\n        HashPurpose.ServerAuthorization\n      );\n      if (serverKeyHash != null && storedKeyHash === serverKeyHash) {\n        await this.setKeyHash(localKeyHash);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  @sequentialize(() => \"getEncKey\")\n  getEncKey(key: SymmetricCryptoKey = null): Promise<SymmetricCryptoKey> {\n    return this.getEncKeyHelper(key);\n  }\n\n  async getPublicKey(): Promise<ArrayBuffer> {\n    const inMemoryPublicKey = await this.stateService.getPublicKey();\n    if (inMemoryPublicKey != null) {\n      return inMemoryPublicKey;\n    }\n\n    const privateKey = await this.getPrivateKey();\n    if (privateKey == null) {\n      return null;\n    }\n\n    const publicKey = await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);\n    await this.stateService.setPublicKey(publicKey);\n    return publicKey;\n  }\n\n  async getPrivateKey(): Promise<ArrayBuffer> {\n    const decryptedPrivateKey = await this.stateService.getDecryptedPrivateKey();\n    if (decryptedPrivateKey != null) {\n      return decryptedPrivateKey;\n    }\n\n    const encPrivateKey = await this.stateService.getEncryptedPrivateKey();\n    if (encPrivateKey == null) {\n      return null;\n    }\n\n    const privateKey = await this.decryptToBytes(new EncString(encPrivateKey), null);\n    await this.stateService.setDecryptedPrivateKey(privateKey);\n    return privateKey;\n  }\n\n  async getFingerprint(userId: string, publicKey?: ArrayBuffer): Promise<string[]> {\n    if (publicKey == null) {\n      publicKey = await this.getPublicKey();\n    }\n    if (publicKey === null) {\n      throw new Error(\"No public key available.\");\n    }\n    const keyFingerprint = await this.cryptoFunctionService.hash(publicKey, \"sha256\");\n    const userFingerprint = await this.cryptoFunctionService.hkdfExpand(\n      keyFingerprint,\n      userId,\n      32,\n      \"sha256\"\n    );\n    return this.hashPhrase(userFingerprint);\n  }\n\n  @sequentialize(() => \"getOrgKeys\")\n  async getOrgKeys(): Promise<Map<string, SymmetricCryptoKey>> {\n    const result: Map<string, SymmetricCryptoKey> = new Map<string, SymmetricCryptoKey>();\n    const decryptedOrganizationKeys = await this.stateService.getDecryptedOrganizationKeys();\n    if (decryptedOrganizationKeys != null && decryptedOrganizationKeys.size > 0) {\n      return decryptedOrganizationKeys;\n    }\n\n    const encOrgKeyData = await this.stateService.getEncryptedOrganizationKeys();\n    if (encOrgKeyData == null) {\n      return null;\n    }\n\n    let setKey = false;\n\n    for (const orgId of Object.keys(encOrgKeyData)) {\n      if (result.has(orgId)) {\n        continue;\n      }\n\n      const encOrgKey = BaseEncryptedOrganizationKey.fromData(encOrgKeyData[orgId]);\n      const decOrgKey = await encOrgKey.decrypt(this);\n      result.set(orgId, decOrgKey);\n\n      setKey = true;\n    }\n\n    if (setKey) {\n      await this.stateService.setDecryptedOrganizationKeys(result);\n    }\n\n    return result;\n  }\n\n  async getOrgKey(orgId: string): Promise<SymmetricCryptoKey> {\n    if (orgId == null) {\n      return null;\n    }\n\n    const orgKeys = await this.getOrgKeys();\n    if (orgKeys == null || !orgKeys.has(orgId)) {\n      return null;\n    }\n\n    return orgKeys.get(orgId);\n  }\n\n  @sequentialize(() => \"getProviderKeys\")\n  async getProviderKeys(): Promise<Map<string, SymmetricCryptoKey>> {\n    const providerKeys: Map<string, SymmetricCryptoKey> = new Map<string, SymmetricCryptoKey>();\n    const decryptedProviderKeys = await this.stateService.getDecryptedProviderKeys();\n    if (decryptedProviderKeys != null && decryptedProviderKeys.size > 0) {\n      return decryptedProviderKeys;\n    }\n\n    const encProviderKeys = await this.stateService.getEncryptedProviderKeys();\n    if (encProviderKeys == null) {\n      return null;\n    }\n\n    let setKey = false;\n\n    for (const orgId in encProviderKeys) {\n      // eslint-disable-next-line\n      if (!encProviderKeys.hasOwnProperty(orgId)) {\n        continue;\n      }\n\n      const decValue = await this.rsaDecrypt(encProviderKeys[orgId]);\n      providerKeys.set(orgId, new SymmetricCryptoKey(decValue));\n      setKey = true;\n    }\n\n    if (setKey) {\n      await this.stateService.setDecryptedProviderKeys(providerKeys);\n    }\n\n    return providerKeys;\n  }\n\n  async getProviderKey(providerId: string): Promise<SymmetricCryptoKey> {\n    if (providerId == null) {\n      return null;\n    }\n\n    const providerKeys = await this.getProviderKeys();\n    if (providerKeys == null || !providerKeys.has(providerId)) {\n      return null;\n    }\n\n    return providerKeys.get(providerId);\n  }\n\n  async hasKey(): Promise<boolean> {\n    return (\n      (await this.hasKeyInMemory()) ||\n      (await this.hasKeyStored(KeySuffixOptions.Auto)) ||\n      (await this.hasKeyStored(KeySuffixOptions.Biometric))\n    );\n  }\n\n  async hasKeyInMemory(userId?: string): Promise<boolean> {\n    return (await this.stateService.getCryptoMasterKey({ userId: userId })) != null;\n  }\n\n  async hasKeyStored(keySuffix: KeySuffixOptions, userId?: string): Promise<boolean> {\n    switch (keySuffix) {\n      case KeySuffixOptions.Auto:\n        return (await this.stateService.getCryptoMasterKeyAuto({ userId: userId })) != null;\n      case KeySuffixOptions.Biometric:\n        return (await this.stateService.hasCryptoMasterKeyBiometric({ userId: userId })) === true;\n      default:\n        return false;\n    }\n  }\n\n  async hasEncKey(): Promise<boolean> {\n    return (await this.stateService.getEncryptedCryptoSymmetricKey()) != null;\n  }\n\n  async clearKey(clearSecretStorage = true, userId?: string): Promise<any> {\n    await this.stateService.setCryptoMasterKey(null, { userId: userId });\n    if (clearSecretStorage) {\n      await this.clearSecretKeyStore(userId);\n    }\n  }\n\n  async clearStoredKey(keySuffix: KeySuffixOptions) {\n    keySuffix === KeySuffixOptions.Auto\n      ? await this.stateService.setCryptoMasterKeyAuto(null)\n      : await this.stateService.setCryptoMasterKeyBiometric(null);\n  }\n\n  async clearKeyHash(userId?: string): Promise<any> {\n    return await this.stateService.setKeyHash(null, { userId: userId });\n  }\n\n  async clearEncKey(memoryOnly?: boolean, userId?: string): Promise<void> {\n    await this.stateService.setDecryptedCryptoSymmetricKey(null, { userId: userId });\n    if (!memoryOnly) {\n      await this.stateService.setEncryptedCryptoSymmetricKey(null, { userId: userId });\n    }\n  }\n\n  async clearKeyPair(memoryOnly?: boolean, userId?: string): Promise<any> {\n    const keysToClear: Promise<void>[] = [\n      this.stateService.setDecryptedPrivateKey(null, { userId: userId }),\n      this.stateService.setPublicKey(null, { userId: userId }),\n    ];\n    if (!memoryOnly) {\n      keysToClear.push(this.stateService.setEncryptedPrivateKey(null, { userId: userId }));\n    }\n    return Promise.all(keysToClear);\n  }\n\n  async clearOrgKeys(memoryOnly?: boolean, userId?: string): Promise<void> {\n    await this.stateService.setDecryptedOrganizationKeys(null, { userId: userId });\n    if (!memoryOnly) {\n      await this.stateService.setEncryptedOrganizationKeys(null, { userId: userId });\n    }\n  }\n\n  async clearProviderKeys(memoryOnly?: boolean, userId?: string): Promise<void> {\n    await this.stateService.setDecryptedProviderKeys(null, { userId: userId });\n    if (!memoryOnly) {\n      await this.stateService.setEncryptedProviderKeys(null, { userId: userId });\n    }\n  }\n\n  async clearPinProtectedKey(userId?: string): Promise<any> {\n    return await this.stateService.setEncryptedPinProtected(null, { userId: userId });\n  }\n\n  async clearKeys(userId?: string): Promise<any> {\n    await this.clearKey(true, userId);\n    await this.clearKeyHash(userId);\n    await this.clearOrgKeys(false, userId);\n    await this.clearProviderKeys(false, userId);\n    await this.clearEncKey(false, userId);\n    await this.clearKeyPair(false, userId);\n    await this.clearPinProtectedKey(userId);\n  }\n\n  async toggleKey(): Promise<any> {\n    const key = await this.getKey();\n\n    await this.setKey(key);\n  }\n\n  async makeKey(\n    password: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig\n  ): Promise<SymmetricCryptoKey> {\n    let key: ArrayBuffer = null;\n    if (kdf == null || kdf === KdfType.PBKDF2_SHA256) {\n      if (kdfConfig.iterations == null) {\n        kdfConfig.iterations = 5000;\n      } else if (kdfConfig.iterations < 5000) {\n        throw new Error(\"PBKDF2 iteration minimum is 5000.\");\n      }\n      key = await this.cryptoFunctionService.pbkdf2(password, salt, \"sha256\", kdfConfig.iterations);\n    } else if (kdf == KdfType.Argon2id) {\n      if (kdfConfig.iterations == null) {\n        kdfConfig.iterations = DEFAULT_ARGON2_ITERATIONS;\n      } else if (kdfConfig.iterations < 2) {\n        throw new Error(\"Argon2 iteration minimum is 2.\");\n      }\n\n      if (kdfConfig.memory == null) {\n        kdfConfig.memory = DEFAULT_ARGON2_MEMORY;\n      } else if (kdfConfig.memory < 16) {\n        throw new Error(\"Argon2 memory minimum is 16 MB\");\n      } else if (kdfConfig.memory > 1024) {\n        throw new Error(\"Argon2 memory maximum is 1024 MB\");\n      }\n\n      if (kdfConfig.parallelism == null) {\n        kdfConfig.parallelism = DEFAULT_ARGON2_PARALLELISM;\n      } else if (kdfConfig.parallelism < 1) {\n        throw new Error(\"Argon2 parallelism minimum is 1.\");\n      }\n\n      const saltHash = await this.cryptoFunctionService.hash(salt, \"sha256\");\n      key = await this.cryptoFunctionService.argon2(\n        password,\n        saltHash,\n        kdfConfig.iterations,\n        kdfConfig.memory * 1024, // convert to KiB from MiB\n        kdfConfig.parallelism\n      );\n    } else {\n      throw new Error(\"Unknown Kdf.\");\n    }\n    return new SymmetricCryptoKey(key);\n  }\n\n  async makeKeyFromPin(\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig,\n    protectedKeyCs: EncString = null\n  ): Promise<SymmetricCryptoKey> {\n    if (protectedKeyCs == null) {\n      const pinProtectedKey = await this.stateService.getEncryptedPinProtected();\n      if (pinProtectedKey == null) {\n        throw new Error(\"No PIN protected key found.\");\n      }\n      protectedKeyCs = new EncString(pinProtectedKey);\n    }\n    const pinKey = await this.makePinKey(pin, salt, kdf, kdfConfig);\n    const decKey = await this.decryptToBytes(protectedKeyCs, pinKey);\n    return new SymmetricCryptoKey(decKey);\n  }\n\n  async makeShareKey(): Promise<[EncString, SymmetricCryptoKey]> {\n    const shareKey = await this.cryptoFunctionService.randomBytes(64);\n    const publicKey = await this.getPublicKey();\n    const encShareKey = await this.rsaEncrypt(shareKey, publicKey);\n    return [encShareKey, new SymmetricCryptoKey(shareKey)];\n  }\n\n  async makeKeyPair(key?: SymmetricCryptoKey): Promise<[string, EncString]> {\n    const keyPair = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);\n    const publicB64 = Utils.fromBufferToB64(keyPair[0]);\n    const privateEnc = await this.encrypt(keyPair[1], key);\n    return [publicB64, privateEnc];\n  }\n\n  async makePinKey(\n    pin: string,\n    salt: string,\n    kdf: KdfType,\n    kdfConfig: KdfConfig\n  ): Promise<SymmetricCryptoKey> {\n    const pinKey = await this.makeKey(pin, salt, kdf, kdfConfig);\n    return await this.stretchKey(pinKey);\n  }\n\n  async makeSendKey(keyMaterial: ArrayBuffer): Promise<SymmetricCryptoKey> {\n    const sendKey = await this.cryptoFunctionService.hkdf(\n      keyMaterial,\n      \"bitwarden-send\",\n      \"send\",\n      64,\n      \"sha256\"\n    );\n    return new SymmetricCryptoKey(sendKey);\n  }\n\n  async hashPassword(\n    password: string,\n    key: SymmetricCryptoKey,\n    hashPurpose?: HashPurpose\n  ): Promise<string> {\n    if (key == null) {\n      key = await this.getKey();\n    }\n    if (password == null || key == null) {\n      throw new Error(\"Invalid parameters.\");\n    }\n\n    const iterations = hashPurpose === HashPurpose.LocalAuthorization ? 2 : 1;\n    const hash = await this.cryptoFunctionService.pbkdf2(key.key, password, \"sha256\", iterations);\n    return Utils.fromBufferToB64(hash);\n  }\n\n  async makeEncKey(key: SymmetricCryptoKey): Promise<[SymmetricCryptoKey, EncString]> {\n    const theKey = await this.getKeyForUserEncryption(key);\n    const encKey = await this.cryptoFunctionService.randomBytes(64);\n    return this.buildEncKey(theKey, encKey);\n  }\n\n  async remakeEncKey(\n    key: SymmetricCryptoKey,\n    encKey?: SymmetricCryptoKey\n  ): Promise<[SymmetricCryptoKey, EncString]> {\n    if (encKey == null) {\n      encKey = await this.getEncKey();\n    }\n    return this.buildEncKey(key, encKey.key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.encrypt\n   */\n  async encrypt(plainValue: string | ArrayBuffer, key?: SymmetricCryptoKey): Promise<EncString> {\n    key = await this.getKeyForUserEncryption(key);\n    return await this.encryptService.encrypt(plainValue, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.encryptToBytes\n   */\n  async encryptToBytes(plainValue: ArrayBuffer, key?: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    key = await this.getKeyForUserEncryption(key);\n    return this.encryptService.encryptToBytes(plainValue, key);\n  }\n\n  async rsaEncrypt(data: ArrayBuffer, publicKey?: ArrayBuffer): Promise<EncString> {\n    if (publicKey == null) {\n      publicKey = await this.getPublicKey();\n    }\n    if (publicKey == null) {\n      throw new Error(\"Public key unavailable.\");\n    }\n\n    const encBytes = await this.cryptoFunctionService.rsaEncrypt(data, publicKey, \"sha1\");\n    return new EncString(EncryptionType.Rsa2048_OaepSha1_B64, Utils.fromBufferToB64(encBytes));\n  }\n\n  async rsaDecrypt(encValue: string, privateKeyValue?: ArrayBuffer): Promise<ArrayBuffer> {\n    const headerPieces = encValue.split(\".\");\n    let encType: EncryptionType = null;\n    let encPieces: string[];\n\n    if (headerPieces.length === 1) {\n      encType = EncryptionType.Rsa2048_OaepSha256_B64;\n      encPieces = [headerPieces[0]];\n    } else if (headerPieces.length === 2) {\n      try {\n        encType = parseInt(headerPieces[0], null);\n        encPieces = headerPieces[1].split(\"|\");\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n\n    switch (encType) {\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n      case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64: // HmacSha256 types are deprecated\n      case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:\n        break;\n      default:\n        throw new Error(\"encType unavailable.\");\n    }\n\n    if (encPieces == null || encPieces.length <= 0) {\n      throw new Error(\"encPieces unavailable.\");\n    }\n\n    const data = Utils.fromB64ToArray(encPieces[0]).buffer;\n    const privateKey = privateKeyValue ?? (await this.getPrivateKey());\n    if (privateKey == null) {\n      throw new Error(\"No private key.\");\n    }\n\n    let alg: \"sha1\" | \"sha256\" = \"sha1\";\n    switch (encType) {\n      case EncryptionType.Rsa2048_OaepSha256_B64:\n      case EncryptionType.Rsa2048_OaepSha256_HmacSha256_B64:\n        alg = \"sha256\";\n        break;\n      case EncryptionType.Rsa2048_OaepSha1_B64:\n      case EncryptionType.Rsa2048_OaepSha1_HmacSha256_B64:\n        break;\n      default:\n        throw new Error(\"encType unavailable.\");\n    }\n\n    return this.cryptoFunctionService.rsaDecrypt(data, privateKey, alg);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToBytes\n   */\n  async decryptToBytes(encString: EncString, key?: SymmetricCryptoKey): Promise<ArrayBuffer> {\n    const keyForEnc = await this.getKeyForUserEncryption(key);\n    return this.encryptService.decryptToBytes(encString, keyForEnc);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToUtf8\n   */\n  async decryptToUtf8(encString: EncString, key?: SymmetricCryptoKey): Promise<string> {\n    key = await this.getKeyForUserEncryption(key);\n    return await this.encryptService.decryptToUtf8(encString, key);\n  }\n\n  /**\n   * @deprecated July 25 2022: Get the key you need from CryptoService (getKeyForUserEncryption or getOrgKey)\n   * and then call encryptService.decryptToBytes\n   */\n  async decryptFromBytes(encBuffer: EncArrayBuffer, key: SymmetricCryptoKey): Promise<ArrayBuffer> {\n    if (encBuffer == null) {\n      throw new Error(\"No buffer provided for decryption.\");\n    }\n\n    key = await this.getKeyForUserEncryption(key);\n\n    return this.encryptService.decryptToBytes(encBuffer, key);\n  }\n\n  // EFForg/OpenWireless\n  // ref https://github.com/EFForg/OpenWireless/blob/master/app/js/diceware.js\n  async randomNumber(min: number, max: number): Promise<number> {\n    let rval = 0;\n    const range = max - min + 1;\n    const bitsNeeded = Math.ceil(Math.log2(range));\n    if (bitsNeeded > 53) {\n      throw new Error(\"We cannot generate numbers larger than 53 bits.\");\n    }\n\n    const bytesNeeded = Math.ceil(bitsNeeded / 8);\n    const mask = Math.pow(2, bitsNeeded) - 1;\n    // 7776 -> (2^13 = 8192) -1 == 8191 or 0x00001111 11111111\n\n    // Fill a byte array with N random numbers\n    const byteArray = new Uint8Array(await this.cryptoFunctionService.randomBytes(bytesNeeded));\n\n    let p = (bytesNeeded - 1) * 8;\n    for (let i = 0; i < bytesNeeded; i++) {\n      rval += byteArray[i] * Math.pow(2, p);\n      p -= 8;\n    }\n\n    // Use & to apply the mask and reduce the number of recursive lookups\n    rval = rval & mask;\n\n    if (rval >= range) {\n      // Integer out of acceptable range\n      return this.randomNumber(min, max);\n    }\n\n    // Return an integer that falls within the range\n    return min + rval;\n  }\n\n  async validateKey(key: SymmetricCryptoKey) {\n    try {\n      const encPrivateKey = await this.stateService.getEncryptedPrivateKey();\n      const encKey = await this.getEncKeyHelper(key);\n      if (encPrivateKey == null || encKey == null) {\n        return false;\n      }\n\n      const privateKey = await this.decryptToBytes(new EncString(encPrivateKey), encKey);\n      await this.cryptoFunctionService.rsaExtractPublicKey(privateKey);\n    } catch (e) {\n      return false;\n    }\n\n    return true;\n  }\n\n  // ---HELPERS---\n\n  protected async storeKey(key: SymmetricCryptoKey, userId?: string) {\n    const storeAuto = await this.shouldStoreKey(KeySuffixOptions.Auto, userId);\n\n    if (storeAuto) {\n      await this.storeAutoKey(key, userId);\n    } else {\n      await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n    }\n  }\n\n  protected async storeAutoKey(key: SymmetricCryptoKey, userId?: string) {\n    await this.stateService.setCryptoMasterKeyAuto(key.keyB64, { userId: userId });\n  }\n\n  protected async shouldStoreKey(keySuffix: KeySuffixOptions, userId?: string) {\n    let shouldStoreKey = false;\n    if (keySuffix === KeySuffixOptions.Auto) {\n      const vaultTimeout = await this.stateService.getVaultTimeout({ userId: userId });\n      shouldStoreKey = vaultTimeout == null;\n    } else if (keySuffix === KeySuffixOptions.Biometric) {\n      const biometricUnlock = await this.stateService.getBiometricUnlock({ userId: userId });\n      shouldStoreKey = biometricUnlock && this.platformUtilService.supportsSecureStorage();\n    }\n    return shouldStoreKey;\n  }\n\n  protected async retrieveKeyFromStorage(keySuffix: KeySuffixOptions, userId?: string) {\n    return keySuffix === KeySuffixOptions.Auto\n      ? await this.stateService.getCryptoMasterKeyAuto({ userId: userId })\n      : await this.stateService.getCryptoMasterKeyBiometric({ userId: userId });\n  }\n\n  async getKeyForUserEncryption(key?: SymmetricCryptoKey): Promise<SymmetricCryptoKey> {\n    if (key != null) {\n      return key;\n    }\n\n    const encKey = await this.getEncKey();\n    if (encKey != null) {\n      return encKey;\n    }\n\n    // Legacy support: encryption used to be done with the user key (derived from master password).\n    // Users who have not migrated will have a null encKey and must use the user key instead.\n    return await this.getKey();\n  }\n\n  private async stretchKey(key: SymmetricCryptoKey): Promise<SymmetricCryptoKey> {\n    const newKey = new Uint8Array(64);\n    const encKey = await this.cryptoFunctionService.hkdfExpand(key.key, \"enc\", 32, \"sha256\");\n    const macKey = await this.cryptoFunctionService.hkdfExpand(key.key, \"mac\", 32, \"sha256\");\n    newKey.set(new Uint8Array(encKey));\n    newKey.set(new Uint8Array(macKey), 32);\n    return new SymmetricCryptoKey(newKey.buffer);\n  }\n\n  private async hashPhrase(hash: ArrayBuffer, minimumEntropy = 64) {\n    const entropyPerWord = Math.log(EFFLongWordList.length) / Math.log(2);\n    let numWords = Math.ceil(minimumEntropy / entropyPerWord);\n\n    const hashArr = Array.from(new Uint8Array(hash));\n    const entropyAvailable = hashArr.length * 4;\n    if (numWords * entropyPerWord > entropyAvailable) {\n      throw new Error(\"Output entropy of hash function is too small\");\n    }\n\n    const phrase: string[] = [];\n    let hashNumber = bigInt.fromArray(hashArr, 256);\n    while (numWords--) {\n      const remainder = hashNumber.mod(EFFLongWordList.length);\n      hashNumber = hashNumber.divide(EFFLongWordList.length);\n      phrase.push(EFFLongWordList[remainder as any]);\n    }\n    return phrase;\n  }\n\n  private async buildEncKey(\n    key: SymmetricCryptoKey,\n    encKey: ArrayBuffer\n  ): Promise<[SymmetricCryptoKey, EncString]> {\n    let encKeyEnc: EncString = null;\n    if (key.key.byteLength === 32) {\n      const newKey = await this.stretchKey(key);\n      encKeyEnc = await this.encrypt(encKey, newKey);\n    } else if (key.key.byteLength === 64) {\n      encKeyEnc = await this.encrypt(encKey, key);\n    } else {\n      throw new Error(\"Invalid key size.\");\n    }\n    return [new SymmetricCryptoKey(encKey), encKeyEnc];\n  }\n\n  private async clearSecretKeyStore(userId?: string): Promise<void> {\n    await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n    await this.stateService.setCryptoMasterKeyBiometric(null, { userId: userId });\n  }\n\n  private async getEncKeyHelper(key: SymmetricCryptoKey = null): Promise<SymmetricCryptoKey> {\n    const inMemoryKey = await this.stateService.getDecryptedCryptoSymmetricKey();\n    if (inMemoryKey != null) {\n      return inMemoryKey;\n    }\n\n    const encKey = await this.stateService.getEncryptedCryptoSymmetricKey();\n    if (encKey == null) {\n      return null;\n    }\n\n    if (key == null) {\n      key = await this.getKey();\n    }\n    if (key == null) {\n      return null;\n    }\n\n    let decEncKey: ArrayBuffer;\n    const encKeyCipher = new EncString(encKey);\n    if (encKeyCipher.encryptionType === EncryptionType.AesCbc256_B64) {\n      decEncKey = await this.decryptToBytes(encKeyCipher, key);\n    } else if (encKeyCipher.encryptionType === EncryptionType.AesCbc256_HmacSha256_B64) {\n      const newKey = await this.stretchKey(key);\n      decEncKey = await this.decryptToBytes(encKeyCipher, newKey);\n    } else {\n      throw new Error(\"Unsupported encKey type.\");\n    }\n    if (decEncKey == null) {\n      return null;\n    }\n    const symmetricCryptoKey = new SymmetricCryptoKey(decEncKey);\n    await this.stateService.setDecryptedCryptoSymmetricKey(symmetricCryptoKey);\n    return symmetricCryptoKey;\n  }\n}\n","import { SymmetricCryptoKey } from \"./symmetric-crypto-key\";\n\nexport class EncryptedObject {\n  iv: ArrayBuffer;\n  data: ArrayBuffer;\n  mac: ArrayBuffer;\n  key: SymmetricCryptoKey;\n}\n","import { CryptoFunctionService } from \"../../abstractions/cryptoFunction.service\";\nimport { EncryptService } from \"../../abstractions/encrypt.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { EncryptionType } from \"../../enums\";\nimport { IEncrypted } from \"../../interfaces/IEncrypted\";\nimport { Decryptable } from \"../../interfaces/decryptable.interface\";\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\nimport { Utils } from \"../../misc/utils\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../models/domain/enc-string\";\nimport { EncryptedObject } from \"../../models/domain/encrypted-object\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\n\nexport class EncryptServiceImplementation implements EncryptService {\n  constructor(\n    protected cryptoFunctionService: CryptoFunctionService,\n    protected logService: LogService,\n    protected logMacFailures: boolean\n  ) {}\n\n  async encrypt(plainValue: string | ArrayBuffer, key: SymmetricCryptoKey): Promise<EncString> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    if (plainValue == null) {\n      return Promise.resolve(null);\n    }\n\n    let plainBuf: ArrayBuffer;\n    if (typeof plainValue === \"string\") {\n      plainBuf = Utils.fromUtf8ToArray(plainValue).buffer;\n    } else {\n      plainBuf = plainValue;\n    }\n\n    const encObj = await this.aesEncrypt(plainBuf, key);\n    const iv = Utils.fromBufferToB64(encObj.iv);\n    const data = Utils.fromBufferToB64(encObj.data);\n    const mac = encObj.mac != null ? Utils.fromBufferToB64(encObj.mac) : null;\n    return new EncString(encObj.key.encType, data, iv, mac);\n  }\n\n  async encryptToBytes(plainValue: ArrayBuffer, key: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    const encValue = await this.aesEncrypt(plainValue, key);\n    let macLen = 0;\n    if (encValue.mac != null) {\n      macLen = encValue.mac.byteLength;\n    }\n\n    const encBytes = new Uint8Array(1 + encValue.iv.byteLength + macLen + encValue.data.byteLength);\n    encBytes.set([encValue.key.encType]);\n    encBytes.set(new Uint8Array(encValue.iv), 1);\n    if (encValue.mac != null) {\n      encBytes.set(new Uint8Array(encValue.mac), 1 + encValue.iv.byteLength);\n    }\n\n    encBytes.set(new Uint8Array(encValue.data), 1 + encValue.iv.byteLength + macLen);\n    return new EncArrayBuffer(encBytes.buffer);\n  }\n\n  async decryptToUtf8(encString: EncString, key: SymmetricCryptoKey): Promise<string> {\n    if (key == null) {\n      throw new Error(\"No key provided for decryption.\");\n    }\n\n    key = this.resolveLegacyKey(key, encString);\n\n    if (key.macKey != null && encString?.mac == null) {\n      this.logService.error(\"mac required.\");\n      return null;\n    }\n\n    if (key.encType !== encString.encryptionType) {\n      this.logService.error(\"encType unavailable.\");\n      return null;\n    }\n\n    const fastParams = this.cryptoFunctionService.aesDecryptFastParameters(\n      encString.data,\n      encString.iv,\n      encString.mac,\n      key\n    );\n    if (fastParams.macKey != null && fastParams.mac != null) {\n      const computedMac = await this.cryptoFunctionService.hmacFast(\n        fastParams.macData,\n        fastParams.macKey,\n        \"sha256\"\n      );\n      const macsEqual = await this.cryptoFunctionService.compareFast(fastParams.mac, computedMac);\n      if (!macsEqual) {\n        this.logMacFailed(\"mac failed.\");\n        return null;\n      }\n    }\n\n    return await this.cryptoFunctionService.aesDecryptFast(fastParams);\n  }\n\n  async decryptToBytes(encThing: IEncrypted, key: SymmetricCryptoKey): Promise<ArrayBuffer> {\n    if (key == null) {\n      throw new Error(\"No encryption key provided.\");\n    }\n\n    if (encThing == null) {\n      throw new Error(\"Nothing provided for decryption.\");\n    }\n\n    key = this.resolveLegacyKey(key, encThing);\n\n    if (key.macKey != null && encThing.macBytes == null) {\n      return null;\n    }\n\n    if (key.encType !== encThing.encryptionType) {\n      return null;\n    }\n\n    if (key.macKey != null && encThing.macBytes != null) {\n      const macData = new Uint8Array(encThing.ivBytes.byteLength + encThing.dataBytes.byteLength);\n      macData.set(new Uint8Array(encThing.ivBytes), 0);\n      macData.set(new Uint8Array(encThing.dataBytes), encThing.ivBytes.byteLength);\n      const computedMac = await this.cryptoFunctionService.hmac(\n        macData.buffer,\n        key.macKey,\n        \"sha256\"\n      );\n      if (computedMac === null) {\n        return null;\n      }\n\n      const macsMatch = await this.cryptoFunctionService.compare(encThing.macBytes, computedMac);\n      if (!macsMatch) {\n        this.logMacFailed(\"mac failed.\");\n        return null;\n      }\n    }\n\n    const result = await this.cryptoFunctionService.aesDecrypt(\n      encThing.dataBytes,\n      encThing.ivBytes,\n      key.encKey\n    );\n\n    return result ?? null;\n  }\n\n  async decryptItems<T extends InitializerMetadata>(\n    items: Decryptable<T>[],\n    key: SymmetricCryptoKey\n  ): Promise<T[]> {\n    if (items == null || items.length < 1) {\n      return [];\n    }\n\n    return await Promise.all(items.map((item) => item.decrypt(key)));\n  }\n\n  private async aesEncrypt(data: ArrayBuffer, key: SymmetricCryptoKey): Promise<EncryptedObject> {\n    const obj = new EncryptedObject();\n    obj.key = key;\n    obj.iv = await this.cryptoFunctionService.randomBytes(16);\n    obj.data = await this.cryptoFunctionService.aesEncrypt(data, obj.iv, obj.key.encKey);\n\n    if (obj.key.macKey != null) {\n      const macData = new Uint8Array(obj.iv.byteLength + obj.data.byteLength);\n      macData.set(new Uint8Array(obj.iv), 0);\n      macData.set(new Uint8Array(obj.data), obj.iv.byteLength);\n      obj.mac = await this.cryptoFunctionService.hmac(macData.buffer, obj.key.macKey, \"sha256\");\n    }\n\n    return obj;\n  }\n\n  private logMacFailed(msg: string) {\n    if (this.logMacFailures) {\n      this.logService.error(msg);\n    }\n  }\n\n  /**\n   * Transform into new key for the old encrypt-then-mac scheme if required, otherwise return the current key unchanged\n   * @param encThing The encrypted object (e.g. encString or encArrayBuffer) that you want to decrypt\n   */\n  resolveLegacyKey(key: SymmetricCryptoKey, encThing: IEncrypted): SymmetricCryptoKey {\n    if (\n      encThing.encryptionType === EncryptionType.AesCbc128_HmacSha256_B64 &&\n      key.encType === EncryptionType.AesCbc256_B64\n    ) {\n      return new SymmetricCryptoKey(key.key, EncryptionType.AesCbc128_HmacSha256_B64);\n    }\n\n    return key;\n  }\n}\n","import { AttachmentResponse } from \"../response/attachment.response\";\n\nexport class AttachmentData {\n  id: string;\n  url: string;\n  fileName: string;\n  key: string;\n  size: string;\n  sizeName: string;\n\n  constructor(response?: AttachmentResponse) {\n    if (response == null) {\n      return;\n    }\n    this.id = response.id;\n    this.url = response.url;\n    this.fileName = response.fileName;\n    this.key = response.key;\n    this.size = response.size;\n    this.sizeName = response.sizeName;\n  }\n}\n","import { CardApi } from \"../../../models/api/card.api\";\n\nexport class CardData {\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(data?: CardApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.cardholderName = data.cardholderName;\n    this.brand = data.brand;\n    this.number = data.number;\n    this.expMonth = data.expMonth;\n    this.expYear = data.expYear;\n    this.code = data.code;\n  }\n}\n","import { FieldType, LinkedIdType } from \"../../../enums\";\nimport { FieldApi } from \"../../../models/api/field.api\";\n\nexport class FieldData {\n  type: FieldType;\n  name: string;\n  value: string;\n  linkedId: LinkedIdType;\n\n  constructor(response?: FieldApi) {\n    if (response == null) {\n      return;\n    }\n    this.type = response.type;\n    this.name = response.name;\n    this.value = response.value;\n    this.linkedId = response.linkedId;\n  }\n}\n","import { IdentityApi } from \"../../../models/api/identity.api\";\n\nexport class IdentityData {\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(data?: IdentityApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.title = data.title;\n    this.firstName = data.firstName;\n    this.middleName = data.middleName;\n    this.lastName = data.lastName;\n    this.address1 = data.address1;\n    this.address2 = data.address2;\n    this.address3 = data.address3;\n    this.city = data.city;\n    this.state = data.state;\n    this.postalCode = data.postalCode;\n    this.country = data.country;\n    this.company = data.company;\n    this.email = data.email;\n    this.phone = data.phone;\n    this.ssn = data.ssn;\n    this.username = data.username;\n    this.passportNumber = data.passportNumber;\n    this.licenseNumber = data.licenseNumber;\n  }\n}\n","import { UriMatchType } from \"../../../enums\";\nimport { LoginUriApi } from \"../../../models/api/login-uri.api\";\n\nexport class LoginUriData {\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(data?: LoginUriApi) {\n    if (data == null) {\n      return;\n    }\n    this.uri = data.uri;\n    this.match = data.match;\n  }\n}\n","import { LoginApi } from \"../../../models/api/login.api\";\n\nimport { LoginUriData } from \"./login-uri.data\";\n\nexport class LoginData {\n  uris: LoginUriData[];\n  username: string;\n  password: string;\n  passwordRevisionDate: string;\n  totp: string;\n  autofillOnPageLoad: boolean;\n\n  constructor(data?: LoginApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.username = data.username;\n    this.password = data.password;\n    this.passwordRevisionDate = data.passwordRevisionDate;\n    this.totp = data.totp;\n    this.autofillOnPageLoad = data.autofillOnPageLoad;\n\n    if (data.uris) {\n      this.uris = data.uris.map((u) => new LoginUriData(u));\n    }\n  }\n}\n","import { PasswordHistoryResponse } from \"../response/password-history.response\";\n\nexport class PasswordHistoryData {\n  password: string;\n  lastUsedDate: string;\n\n  constructor(response?: PasswordHistoryResponse) {\n    if (response == null) {\n      return;\n    }\n\n    this.password = response.password;\n    this.lastUsedDate = response.lastUsedDate;\n  }\n}\n","import { SecureNoteType } from \"../../../enums\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\n\nexport class SecureNoteData {\n  type: SecureNoteType;\n\n  constructor(data?: SecureNoteApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.type = data.type;\n  }\n}\n","import { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { CipherResponse } from \"../response/cipher.response\";\n\nimport { AttachmentData } from \"./attachment.data\";\nimport { CardData } from \"./card.data\";\nimport { FieldData } from \"./field.data\";\nimport { IdentityData } from \"./identity.data\";\nimport { LoginData } from \"./login.data\";\nimport { PasswordHistoryData } from \"./password-history.data\";\nimport { SecureNoteData } from \"./secure-note.data\";\n\nexport class CipherData {\n  id: string;\n  organizationId: string;\n  folderId: string;\n  edit: boolean;\n  viewPassword: boolean;\n  organizationUseTotp: boolean;\n  favorite: boolean;\n  revisionDate: string;\n  type: CipherType;\n  name: string;\n  notes: string;\n  login?: LoginData;\n  secureNote?: SecureNoteData;\n  card?: CardData;\n  identity?: IdentityData;\n  fields?: FieldData[];\n  attachments?: AttachmentData[];\n  passwordHistory?: PasswordHistoryData[];\n  collectionIds?: string[];\n  creationDate: string;\n  deletedDate: string;\n  reprompt: CipherRepromptType;\n\n  constructor(response?: CipherResponse, collectionIds?: string[]) {\n    if (response == null) {\n      return;\n    }\n\n    this.id = response.id;\n    this.organizationId = response.organizationId;\n    this.folderId = response.folderId;\n    this.edit = response.edit;\n    this.viewPassword = response.viewPassword;\n    this.organizationUseTotp = response.organizationUseTotp;\n    this.favorite = response.favorite;\n    this.revisionDate = response.revisionDate;\n    this.type = response.type;\n    this.name = response.name;\n    this.notes = response.notes;\n    this.collectionIds = collectionIds != null ? collectionIds : response.collectionIds;\n    this.creationDate = response.creationDate;\n    this.deletedDate = response.deletedDate;\n    this.reprompt = response.reprompt;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new LoginData(response.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteData(response.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new CardData(response.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityData(response.identity);\n        break;\n      default:\n        break;\n    }\n\n    if (response.fields != null) {\n      this.fields = response.fields.map((f) => new FieldData(f));\n    }\n    if (response.attachments != null) {\n      this.attachments = response.attachments.map((a) => new AttachmentData(a));\n    }\n    if (response.passwordHistory != null) {\n      this.passwordHistory = response.passwordHistory.map((ph) => new PasswordHistoryData(ph));\n    }\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Utils } from \"../../../misc/utils\";\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { AttachmentData } from \"../data/attachment.data\";\nimport { AttachmentView } from \"../view/attachment.view\";\n\nexport class Attachment extends Domain {\n  id: string;\n  url: string;\n  size: string;\n  sizeName: string; // Readable size, ex: \"4.2 KB\" or \"1.43 GB\"\n  key: EncString;\n  fileName: EncString;\n\n  constructor(obj?: AttachmentData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.size = obj.size;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        url: null,\n        sizeName: null,\n        fileName: null,\n        key: null,\n      },\n      [\"id\", \"url\", \"sizeName\"]\n    );\n  }\n\n  async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<AttachmentView> {\n    const view = await this.decryptObj(\n      new AttachmentView(this),\n      {\n        fileName: null,\n      },\n      orgId,\n      encKey\n    );\n\n    if (this.key != null) {\n      view.key = await this.decryptAttachmentKey(orgId, encKey);\n    }\n\n    return view;\n  }\n\n  private async decryptAttachmentKey(orgId: string, encKey?: SymmetricCryptoKey) {\n    try {\n      if (encKey == null) {\n        encKey = await this.getKeyForDecryption(orgId);\n      }\n\n      const encryptService = Utils.getContainerService().getEncryptService();\n      const decValue = await encryptService.decryptToBytes(this.key, encKey);\n      return new SymmetricCryptoKey(decValue);\n    } catch (e) {\n      // TODO: error?\n    }\n  }\n\n  private async getKeyForDecryption(orgId: string) {\n    const cryptoService = Utils.getContainerService().getCryptoService();\n    return orgId != null\n      ? await cryptoService.getOrgKey(orgId)\n      : await cryptoService.getKeyForUserEncryption();\n  }\n\n  toAttachmentData(): AttachmentData {\n    const a = new AttachmentData();\n    a.size = this.size;\n    this.buildDataModel(\n      this,\n      a,\n      {\n        id: null,\n        url: null,\n        sizeName: null,\n        fileName: null,\n        key: null,\n      },\n      [\"id\", \"url\", \"sizeName\"]\n    );\n    return a;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Attachment>>): Attachment {\n    if (obj == null) {\n      return null;\n    }\n\n    const key = EncString.fromJSON(obj.key);\n    const fileName = EncString.fromJSON(obj.fileName);\n\n    return Object.assign(new Attachment(), obj, {\n      key,\n      fileName,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { CardData } from \"../data/card.data\";\nimport { CardView } from \"../view/card.view\";\n\nexport class Card extends Domain {\n  cardholderName: EncString;\n  brand: EncString;\n  number: EncString;\n  expMonth: EncString;\n  expYear: EncString;\n  code: EncString;\n\n  constructor(obj?: CardData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        cardholderName: null,\n        brand: null,\n        number: null,\n        expMonth: null,\n        expYear: null,\n        code: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<CardView> {\n    return this.decryptObj(\n      new CardView(),\n      {\n        cardholderName: null,\n        brand: null,\n        number: null,\n        expMonth: null,\n        expYear: null,\n        code: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toCardData(): CardData {\n    const c = new CardData();\n    this.buildDataModel(this, c, {\n      cardholderName: null,\n      brand: null,\n      number: null,\n      expMonth: null,\n      expYear: null,\n      code: null,\n    });\n    return c;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Card>>): Card {\n    if (obj == null) {\n      return null;\n    }\n\n    const cardholderName = EncString.fromJSON(obj.cardholderName);\n    const brand = EncString.fromJSON(obj.brand);\n    const number = EncString.fromJSON(obj.number);\n    const expMonth = EncString.fromJSON(obj.expMonth);\n    const expYear = EncString.fromJSON(obj.expYear);\n    const code = EncString.fromJSON(obj.code);\n    return Object.assign(new Card(), obj, {\n      cardholderName,\n      brand,\n      number,\n      expMonth,\n      expYear,\n      code,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { FieldType, LinkedIdType } from \"../../../enums\";\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { FieldData } from \"../data/field.data\";\nimport { FieldView } from \"../view/field.view\";\n\nexport class Field extends Domain {\n  name: EncString;\n  value: EncString;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(obj?: FieldData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.type = obj.type;\n    this.linkedId = obj.linkedId;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        name: null,\n        value: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<FieldView> {\n    return this.decryptObj(\n      new FieldView(this),\n      {\n        name: null,\n        value: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toFieldData(): FieldData {\n    const f = new FieldData();\n    this.buildDataModel(\n      this,\n      f,\n      {\n        name: null,\n        value: null,\n        type: null,\n        linkedId: null,\n      },\n      [\"type\", \"linkedId\"]\n    );\n    return f;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Field>>): Field {\n    if (obj == null) {\n      return null;\n    }\n\n    const name = EncString.fromJSON(obj.name);\n    const value = EncString.fromJSON(obj.value);\n\n    return Object.assign(new Field(), obj, {\n      name,\n      value,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { IdentityData } from \"../data/identity.data\";\nimport { IdentityView } from \"../view/identity.view\";\n\nexport class Identity extends Domain {\n  title: EncString;\n  firstName: EncString;\n  middleName: EncString;\n  lastName: EncString;\n  address1: EncString;\n  address2: EncString;\n  address3: EncString;\n  city: EncString;\n  state: EncString;\n  postalCode: EncString;\n  country: EncString;\n  company: EncString;\n  email: EncString;\n  phone: EncString;\n  ssn: EncString;\n  username: EncString;\n  passportNumber: EncString;\n  licenseNumber: EncString;\n\n  constructor(obj?: IdentityData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        title: null,\n        firstName: null,\n        middleName: null,\n        lastName: null,\n        address1: null,\n        address2: null,\n        address3: null,\n        city: null,\n        state: null,\n        postalCode: null,\n        country: null,\n        company: null,\n        email: null,\n        phone: null,\n        ssn: null,\n        username: null,\n        passportNumber: null,\n        licenseNumber: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<IdentityView> {\n    return this.decryptObj(\n      new IdentityView(),\n      {\n        title: null,\n        firstName: null,\n        middleName: null,\n        lastName: null,\n        address1: null,\n        address2: null,\n        address3: null,\n        city: null,\n        state: null,\n        postalCode: null,\n        country: null,\n        company: null,\n        email: null,\n        phone: null,\n        ssn: null,\n        username: null,\n        passportNumber: null,\n        licenseNumber: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toIdentityData(): IdentityData {\n    const i = new IdentityData();\n    this.buildDataModel(this, i, {\n      title: null,\n      firstName: null,\n      middleName: null,\n      lastName: null,\n      address1: null,\n      address2: null,\n      address3: null,\n      city: null,\n      state: null,\n      postalCode: null,\n      country: null,\n      company: null,\n      email: null,\n      phone: null,\n      ssn: null,\n      username: null,\n      passportNumber: null,\n      licenseNumber: null,\n    });\n    return i;\n  }\n\n  static fromJSON(obj: Jsonify<Identity>): Identity {\n    if (obj == null) {\n      return null;\n    }\n\n    const title = EncString.fromJSON(obj.title);\n    const firstName = EncString.fromJSON(obj.firstName);\n    const middleName = EncString.fromJSON(obj.middleName);\n    const lastName = EncString.fromJSON(obj.lastName);\n    const address1 = EncString.fromJSON(obj.address1);\n    const address2 = EncString.fromJSON(obj.address2);\n    const address3 = EncString.fromJSON(obj.address3);\n    const city = EncString.fromJSON(obj.city);\n    const state = EncString.fromJSON(obj.state);\n    const postalCode = EncString.fromJSON(obj.postalCode);\n    const country = EncString.fromJSON(obj.country);\n    const company = EncString.fromJSON(obj.company);\n    const email = EncString.fromJSON(obj.email);\n    const phone = EncString.fromJSON(obj.phone);\n    const ssn = EncString.fromJSON(obj.ssn);\n    const username = EncString.fromJSON(obj.username);\n    const passportNumber = EncString.fromJSON(obj.passportNumber);\n    const licenseNumber = EncString.fromJSON(obj.licenseNumber);\n\n    return Object.assign(new Identity(), obj, {\n      title,\n      firstName,\n      middleName,\n      lastName,\n      address1,\n      address2,\n      address3,\n      city,\n      state,\n      postalCode,\n      country,\n      company,\n      email,\n      phone,\n      ssn,\n      username,\n      passportNumber,\n      licenseNumber,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { UriMatchType } from \"../../../enums\";\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { LoginUriData } from \"../data/login-uri.data\";\nimport { LoginUriView } from \"../view/login-uri.view\";\n\nexport class LoginUri extends Domain {\n  uri: EncString;\n  match: UriMatchType;\n\n  constructor(obj?: LoginUriData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.match = obj.match;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        uri: null,\n      },\n      []\n    );\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginUriView> {\n    return this.decryptObj(\n      new LoginUriView(this),\n      {\n        uri: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toLoginUriData(): LoginUriData {\n    const u = new LoginUriData();\n    this.buildDataModel(\n      this,\n      u,\n      {\n        uri: null,\n        match: null,\n      },\n      [\"match\"]\n    );\n    return u;\n  }\n\n  static fromJSON(obj: Jsonify<LoginUri>): LoginUri {\n    if (obj == null) {\n      return null;\n    }\n\n    const uri = EncString.fromJSON(obj.uri);\n    return Object.assign(new LoginUri(), obj, {\n      uri,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { LoginData } from \"../data/login.data\";\nimport { LoginView } from \"../view/login.view\";\n\nimport { LoginUri } from \"./login-uri\";\n\nexport class Login extends Domain {\n  uris: LoginUri[];\n  username: EncString;\n  password: EncString;\n  passwordRevisionDate?: Date;\n  totp: EncString;\n  autofillOnPageLoad: boolean;\n\n  constructor(obj?: LoginData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.passwordRevisionDate =\n      obj.passwordRevisionDate != null ? new Date(obj.passwordRevisionDate) : null;\n    this.autofillOnPageLoad = obj.autofillOnPageLoad;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        username: null,\n        password: null,\n        totp: null,\n      },\n      []\n    );\n\n    if (obj.uris) {\n      this.uris = [];\n      obj.uris.forEach((u) => {\n        this.uris.push(new LoginUri(u));\n      });\n    }\n  }\n\n  async decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<LoginView> {\n    const view = await this.decryptObj(\n      new LoginView(this),\n      {\n        username: null,\n        password: null,\n        totp: null,\n      },\n      orgId,\n      encKey\n    );\n\n    if (this.uris != null) {\n      view.uris = [];\n      for (let i = 0; i < this.uris.length; i++) {\n        const uri = await this.uris[i].decrypt(orgId, encKey);\n        view.uris.push(uri);\n      }\n    }\n\n    return view;\n  }\n\n  toLoginData(): LoginData {\n    const l = new LoginData();\n    l.passwordRevisionDate =\n      this.passwordRevisionDate != null ? this.passwordRevisionDate.toISOString() : null;\n    l.autofillOnPageLoad = this.autofillOnPageLoad;\n    this.buildDataModel(this, l, {\n      username: null,\n      password: null,\n      totp: null,\n    });\n\n    if (this.uris != null && this.uris.length > 0) {\n      l.uris = [];\n      this.uris.forEach((u) => {\n        l.uris.push(u.toLoginUriData());\n      });\n    }\n\n    return l;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Login>>): Login {\n    if (obj == null) {\n      return null;\n    }\n\n    const username = EncString.fromJSON(obj.username);\n    const password = EncString.fromJSON(obj.password);\n    const totp = EncString.fromJSON(obj.totp);\n    const passwordRevisionDate =\n      obj.passwordRevisionDate == null ? null : new Date(obj.passwordRevisionDate);\n    const uris = obj.uris?.map((uri: any) => LoginUri.fromJSON(uri));\n\n    return Object.assign(new Login(), obj, {\n      username,\n      password,\n      totp,\n      passwordRevisionDate: passwordRevisionDate,\n      uris: uris,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { PasswordHistoryData } from \"../data/password-history.data\";\nimport { PasswordHistoryView } from \"../view/password-history.view\";\n\nexport class Password extends Domain {\n  password: EncString;\n  lastUsedDate: Date;\n\n  constructor(obj?: PasswordHistoryData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(this, obj, {\n      password: null,\n    });\n    this.lastUsedDate = new Date(obj.lastUsedDate);\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<PasswordHistoryView> {\n    return this.decryptObj(\n      new PasswordHistoryView(this),\n      {\n        password: null,\n      },\n      orgId,\n      encKey\n    );\n  }\n\n  toPasswordHistoryData(): PasswordHistoryData {\n    const ph = new PasswordHistoryData();\n    ph.lastUsedDate = this.lastUsedDate.toISOString();\n    this.buildDataModel(this, ph, {\n      password: null,\n    });\n    return ph;\n  }\n\n  static fromJSON(obj: Partial<Jsonify<Password>>): Password {\n    if (obj == null) {\n      return null;\n    }\n\n    const password = EncString.fromJSON(obj.password);\n    const lastUsedDate = obj.lastUsedDate == null ? null : new Date(obj.lastUsedDate);\n\n    return Object.assign(new Password(), obj, {\n      password,\n      lastUsedDate,\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SecureNoteType } from \"../../../enums\";\nimport Domain from \"../../../models/domain/domain-base\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { SecureNoteData } from \"../data/secure-note.data\";\nimport { SecureNoteView } from \"../view/secure-note.view\";\n\nexport class SecureNote extends Domain {\n  type: SecureNoteType;\n\n  constructor(obj?: SecureNoteData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.type = obj.type;\n  }\n\n  decrypt(orgId: string, encKey?: SymmetricCryptoKey): Promise<SecureNoteView> {\n    return Promise.resolve(new SecureNoteView(this));\n  }\n\n  toSecureNoteData(): SecureNoteData {\n    const n = new SecureNoteData();\n    n.type = this.type;\n    return n;\n  }\n\n  static fromJSON(obj: Jsonify<SecureNote>): SecureNote {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new SecureNote(), obj);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Decryptable } from \"../../../interfaces/decryptable.interface\";\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { InitializerKey } from \"../../../services/cryptography/initializer-key\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { CipherData } from \"../data/cipher.data\";\nimport { LocalData } from \"../data/local.data\";\nimport { CipherView } from \"../view/cipher.view\";\n\nimport { Attachment } from \"./attachment\";\nimport { Card } from \"./card\";\nimport { Field } from \"./field\";\nimport { Identity } from \"./identity\";\nimport { Login } from \"./login\";\nimport { Password } from \"./password\";\nimport { SecureNote } from \"./secure-note\";\n\nexport class Cipher extends Domain implements Decryptable<CipherView> {\n  readonly initializerKey = InitializerKey.Cipher;\n\n  id: string;\n  organizationId: string;\n  folderId: string;\n  name: EncString;\n  notes: EncString;\n  type: CipherType;\n  favorite: boolean;\n  organizationUseTotp: boolean;\n  edit: boolean;\n  viewPassword: boolean;\n  revisionDate: Date;\n  localData: LocalData;\n  login: Login;\n  identity: Identity;\n  card: Card;\n  secureNote: SecureNote;\n  attachments: Attachment[];\n  fields: Field[];\n  passwordHistory: Password[];\n  collectionIds: string[];\n  creationDate: Date;\n  deletedDate: Date;\n  reprompt: CipherRepromptType;\n\n  constructor(obj?: CipherData, localData: LocalData = null) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        organizationId: null,\n        folderId: null,\n        name: null,\n        notes: null,\n      },\n      [\"id\", \"organizationId\", \"folderId\"]\n    );\n\n    this.type = obj.type;\n    this.favorite = obj.favorite;\n    this.organizationUseTotp = obj.organizationUseTotp;\n    this.edit = obj.edit;\n    if (obj.viewPassword != null) {\n      this.viewPassword = obj.viewPassword;\n    } else {\n      this.viewPassword = true; // Default for already synced Ciphers without viewPassword\n    }\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n    this.collectionIds = obj.collectionIds;\n    this.localData = localData;\n    this.creationDate = obj.creationDate != null ? new Date(obj.creationDate) : null;\n    this.deletedDate = obj.deletedDate != null ? new Date(obj.deletedDate) : null;\n    this.reprompt = obj.reprompt;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new Login(obj.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNote(obj.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new Card(obj.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new Identity(obj.identity);\n        break;\n      default:\n        break;\n    }\n\n    if (obj.attachments != null) {\n      this.attachments = obj.attachments.map((a) => new Attachment(a));\n    } else {\n      this.attachments = null;\n    }\n\n    if (obj.fields != null) {\n      this.fields = obj.fields.map((f) => new Field(f));\n    } else {\n      this.fields = null;\n    }\n\n    if (obj.passwordHistory != null) {\n      this.passwordHistory = obj.passwordHistory.map((ph) => new Password(ph));\n    } else {\n      this.passwordHistory = null;\n    }\n  }\n\n  async decrypt(encKey?: SymmetricCryptoKey): Promise<CipherView> {\n    const model = new CipherView(this);\n\n    await this.decryptObj(\n      model,\n      {\n        name: null,\n        notes: null,\n      },\n      this.organizationId,\n      encKey\n    );\n\n    switch (this.type) {\n      case CipherType.Login:\n        model.login = await this.login.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.SecureNote:\n        model.secureNote = await this.secureNote.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.Card:\n        model.card = await this.card.decrypt(this.organizationId, encKey);\n        break;\n      case CipherType.Identity:\n        model.identity = await this.identity.decrypt(this.organizationId, encKey);\n        break;\n      default:\n        break;\n    }\n\n    const orgId = this.organizationId;\n\n    if (this.attachments != null && this.attachments.length > 0) {\n      const attachments: any[] = [];\n      await this.attachments.reduce((promise, attachment) => {\n        return promise\n          .then(() => {\n            return attachment.decrypt(orgId, encKey);\n          })\n          .then((decAttachment) => {\n            attachments.push(decAttachment);\n          });\n      }, Promise.resolve());\n      model.attachments = attachments;\n    }\n\n    if (this.fields != null && this.fields.length > 0) {\n      const fields: any[] = [];\n      await this.fields.reduce((promise, field) => {\n        return promise\n          .then(() => {\n            return field.decrypt(orgId, encKey);\n          })\n          .then((decField) => {\n            fields.push(decField);\n          });\n      }, Promise.resolve());\n      model.fields = fields;\n    }\n\n    if (this.passwordHistory != null && this.passwordHistory.length > 0) {\n      const passwordHistory: any[] = [];\n      await this.passwordHistory.reduce((promise, ph) => {\n        return promise\n          .then(() => {\n            return ph.decrypt(orgId, encKey);\n          })\n          .then((decPh) => {\n            passwordHistory.push(decPh);\n          });\n      }, Promise.resolve());\n      model.passwordHistory = passwordHistory;\n    }\n\n    return model;\n  }\n\n  toCipherData(): CipherData {\n    const c = new CipherData();\n    c.id = this.id;\n    c.organizationId = this.organizationId;\n    c.folderId = this.folderId;\n    c.edit = this.edit;\n    c.viewPassword = this.viewPassword;\n    c.organizationUseTotp = this.organizationUseTotp;\n    c.favorite = this.favorite;\n    c.revisionDate = this.revisionDate != null ? this.revisionDate.toISOString() : null;\n    c.type = this.type;\n    c.collectionIds = this.collectionIds;\n    c.creationDate = this.creationDate != null ? this.creationDate.toISOString() : null;\n    c.deletedDate = this.deletedDate != null ? this.deletedDate.toISOString() : null;\n    c.reprompt = this.reprompt;\n\n    this.buildDataModel(this, c, {\n      name: null,\n      notes: null,\n    });\n\n    switch (c.type) {\n      case CipherType.Login:\n        c.login = this.login.toLoginData();\n        break;\n      case CipherType.SecureNote:\n        c.secureNote = this.secureNote.toSecureNoteData();\n        break;\n      case CipherType.Card:\n        c.card = this.card.toCardData();\n        break;\n      case CipherType.Identity:\n        c.identity = this.identity.toIdentityData();\n        break;\n      default:\n        break;\n    }\n\n    if (this.fields != null) {\n      c.fields = this.fields.map((f) => f.toFieldData());\n    }\n    if (this.attachments != null) {\n      c.attachments = this.attachments.map((a) => a.toAttachmentData());\n    }\n    if (this.passwordHistory != null) {\n      c.passwordHistory = this.passwordHistory.map((ph) => ph.toPasswordHistoryData());\n    }\n    return c;\n  }\n\n  static fromJSON(obj: Jsonify<Cipher>) {\n    if (obj == null) {\n      return null;\n    }\n\n    const domain = new Cipher();\n    const name = EncString.fromJSON(obj.name);\n    const notes = EncString.fromJSON(obj.notes);\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    const deletedDate = obj.deletedDate == null ? null : new Date(obj.deletedDate);\n    const attachments = obj.attachments?.map((a: any) => Attachment.fromJSON(a));\n    const fields = obj.fields?.map((f: any) => Field.fromJSON(f));\n    const passwordHistory = obj.passwordHistory?.map((ph: any) => Password.fromJSON(ph));\n\n    Object.assign(domain, obj, {\n      name,\n      notes,\n      revisionDate,\n      deletedDate,\n      attachments,\n      fields,\n      passwordHistory,\n    });\n\n    switch (obj.type) {\n      case CipherType.Card:\n        domain.card = Card.fromJSON(obj.card);\n        break;\n      case CipherType.Identity:\n        domain.identity = Identity.fromJSON(obj.identity);\n        break;\n      case CipherType.Login:\n        domain.login = Login.fromJSON(obj.login);\n        break;\n      case CipherType.SecureNote:\n        domain.secureNote = SecureNote.fromJSON(obj.secureNote);\n        break;\n      default:\n        break;\n    }\n\n    return domain;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\nimport { Cipher } from \"../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\n\nimport { InitializerKey } from \"./initializer-key\";\n\n/**\n * Internal reference of classes so we can reconstruct objects properly.\n * Each entry should be keyed using the Decryptable.initializerKey property\n */\nconst classInitializers: Record<InitializerKey, (obj: any) => any> = {\n  [InitializerKey.Cipher]: Cipher.fromJSON,\n  [InitializerKey.CipherView]: CipherView.fromJSON,\n};\n\nexport function getClassInitializer<T extends InitializerMetadata>(\n  className: InitializerKey\n): (obj: Jsonify<T>) => T {\n  return classInitializers[className];\n}\n","import { defaultIfEmpty, filter, firstValueFrom, fromEvent, map, Subject, takeUntil } from \"rxjs\";\nimport { Jsonify } from \"type-fest\";\n\nimport { Decryptable } from \"../../interfaces/decryptable.interface\";\nimport { InitializerMetadata } from \"../../interfaces/initializer-metadata.interface\";\nimport { Utils } from \"../../misc/utils\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\n\nimport { EncryptServiceImplementation } from \"./encrypt.service.implementation\";\nimport { getClassInitializer } from \"./get-class-initializer\";\n\n// TTL (time to live) is not strictly required but avoids tying up memory resources if inactive\nconst workerTTL = 3 * 60000; // 3 minutes\n\nexport class MultithreadEncryptServiceImplementation extends EncryptServiceImplementation {\n  private worker: Worker;\n  private timeout: any;\n\n  private clear$ = new Subject<void>();\n\n  /**\n   * Sends items to a web worker to decrypt them.\n   * This utilises multithreading to decrypt items faster without interrupting other operations (e.g. updating UI).\n   */\n  async decryptItems<T extends InitializerMetadata>(\n    items: Decryptable<T>[],\n    key: SymmetricCryptoKey\n  ): Promise<T[]> {\n    if (items == null || items.length < 1) {\n      return [];\n    }\n\n    this.logService.info(\"Starting decryption using multithreading\");\n\n    this.worker ??= new Worker(\n      new URL(\n        /* webpackChunkName: 'encrypt-worker' */\n        \"@bitwarden/common/services/cryptography/encrypt.worker.ts\",\n        import.meta.url\n      )\n    );\n\n    this.restartTimeout();\n\n    const request = {\n      id: Utils.newGuid(),\n      items: items,\n      key: key,\n    };\n\n    this.worker.postMessage(JSON.stringify(request));\n\n    return await firstValueFrom(\n      fromEvent(this.worker, \"message\").pipe(\n        filter((response: MessageEvent) => response.data?.id === request.id),\n        map((response) => JSON.parse(response.data.items)),\n        map((items) =>\n          items.map((jsonItem: Jsonify<T>) => {\n            const initializer = getClassInitializer<T>(jsonItem.initializerKey);\n            return initializer(jsonItem);\n          })\n        ),\n        takeUntil(this.clear$),\n        defaultIfEmpty([])\n      )\n    );\n  }\n\n  private clear() {\n    this.clear$.next();\n    this.worker?.terminate();\n    this.worker = null;\n    this.clearTimeout();\n  }\n\n  private restartTimeout() {\n    this.clearTimeout();\n    this.timeout = setTimeout(() => this.clear(), workerTTL);\n  }\n\n  private clearTimeout() {\n    if (this.timeout != null) {\n      clearTimeout(this.timeout);\n    }\n  }\n}\n","import { EventType } from \"../../enums\";\n\nexport class EventData {\n  type: EventType;\n  cipherId: string;\n  date: string;\n  organizationId: string;\n}\n","import { EventCollectionService as EventCollectionServiceAbstraction } from \"../../abstractions/event/event-collection.service\";\nimport { EventUploadService } from \"../../abstractions/event/event-upload.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { OrganizationService } from \"../../admin-console/abstractions/organization/organization.service.abstraction\";\nimport { EventType } from \"../../enums\";\nimport { EventData } from \"../../models/data/event.data\";\nimport { CipherService } from \"../../vault/abstractions/cipher.service\";\n\nexport class EventCollectionService implements EventCollectionServiceAbstraction {\n  constructor(\n    private cipherService: CipherService,\n    private stateService: StateService,\n    private organizationService: OrganizationService,\n    private eventUploadService: EventUploadService\n  ) {}\n\n  async collect(\n    eventType: EventType,\n    cipherId: string = null,\n    uploadImmediately = false,\n    organizationId: string = null\n  ): Promise<any> {\n    const authed = await this.stateService.getIsAuthenticated();\n    if (!authed) {\n      return;\n    }\n    const organizations = await this.organizationService.getAll();\n    if (organizations == null) {\n      return;\n    }\n    const orgIds = new Set<string>(organizations.filter((o) => o.useEvents).map((o) => o.id));\n    if (orgIds.size === 0) {\n      return;\n    }\n    if (cipherId != null) {\n      const cipher = await this.cipherService.get(cipherId);\n      if (cipher == null || cipher.organizationId == null || !orgIds.has(cipher.organizationId)) {\n        return;\n      }\n    }\n    if (organizationId != null) {\n      if (!orgIds.has(organizationId)) {\n        return;\n      }\n    }\n    let eventCollection = await this.stateService.getEventCollection();\n    if (eventCollection == null) {\n      eventCollection = [];\n    }\n    const event = new EventData();\n    event.type = eventType;\n    event.cipherId = cipherId;\n    event.date = new Date().toISOString();\n    event.organizationId = organizationId;\n    eventCollection.push(event);\n    await this.stateService.setEventCollection(eventCollection);\n    if (uploadImmediately) {\n      await this.eventUploadService.uploadEvents();\n    }\n  }\n}\n","import { EventType } from \"../../enums\";\n\nexport class EventRequest {\n  type: EventType;\n  cipherId: string;\n  date: string;\n  organizationId: string;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { EventUploadService as EventUploadServiceAbstraction } from \"../../abstractions/event/event-upload.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { EventRequest } from \"../../models/request/event.request\";\n\nexport class EventUploadService implements EventUploadServiceAbstraction {\n  private inited = false;\n  constructor(\n    private apiService: ApiService,\n    private stateService: StateService,\n    private logService: LogService\n  ) {}\n\n  init(checkOnInterval: boolean) {\n    if (this.inited) {\n      return;\n    }\n\n    this.inited = true;\n    if (checkOnInterval) {\n      this.uploadEvents();\n      setInterval(() => this.uploadEvents(), 60 * 1000); // check every 60 seconds\n    }\n  }\n\n  async uploadEvents(userId?: string): Promise<void> {\n    const authed = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!authed) {\n      return;\n    }\n    const eventCollection = await this.stateService.getEventCollection({ userId: userId });\n    if (eventCollection == null || eventCollection.length === 0) {\n      return;\n    }\n    const request = eventCollection.map((e) => {\n      const req = new EventRequest();\n      req.type = e.type;\n      req.cipherId = e.cipherId;\n      req.date = e.date;\n      req.organizationId = e.organizationId;\n      return req;\n    });\n    try {\n      await this.apiService.postEventsCollect(request);\n      this.clearEvents(userId);\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  private async clearEvents(userId?: string): Promise<any> {\n    await this.stateService.setEventCollection(null, { userId: userId });\n  }\n}\n","import { Card as CardDomain } from \"../../vault/models/domain/card\";\nimport { CardView } from \"../../vault/models/view/card.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nexport class CardExport {\n  static template(): CardExport {\n    const req = new CardExport();\n    req.cardholderName = \"John Doe\";\n    req.brand = \"visa\";\n    req.number = \"4242424242424242\";\n    req.expMonth = \"04\";\n    req.expYear = \"2023\";\n    req.code = \"123\";\n    return req;\n  }\n\n  static toView(req: CardExport, view = new CardView()) {\n    view.cardholderName = req.cardholderName;\n    view.brand = req.brand;\n    view.number = req.number;\n    view.expMonth = req.expMonth;\n    view.expYear = req.expYear;\n    view.code = req.code;\n    return view;\n  }\n\n  static toDomain(req: CardExport, domain = new CardDomain()) {\n    domain.cardholderName = req.cardholderName != null ? new EncString(req.cardholderName) : null;\n    domain.brand = req.brand != null ? new EncString(req.brand) : null;\n    domain.number = req.number != null ? new EncString(req.number) : null;\n    domain.expMonth = req.expMonth != null ? new EncString(req.expMonth) : null;\n    domain.expYear = req.expYear != null ? new EncString(req.expYear) : null;\n    domain.code = req.code != null ? new EncString(req.code) : null;\n    return domain;\n  }\n\n  cardholderName: string;\n  brand: string;\n  number: string;\n  expMonth: string;\n  expYear: string;\n  code: string;\n\n  constructor(o?: CardView | CardDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof CardView) {\n      this.cardholderName = o.cardholderName;\n      this.brand = o.brand;\n      this.number = o.number;\n      this.expMonth = o.expMonth;\n      this.expYear = o.expYear;\n      this.code = o.code;\n    } else {\n      this.cardholderName = o.cardholderName?.encryptedString;\n      this.brand = o.brand?.encryptedString;\n      this.number = o.number?.encryptedString;\n      this.expMonth = o.expMonth?.encryptedString;\n      this.expYear = o.expYear?.encryptedString;\n      this.code = o.code?.encryptedString;\n    }\n  }\n}\n","import { FieldType, LinkedIdType } from \"../../enums\";\nimport { Field as FieldDomain } from \"../../vault/models/domain/field\";\nimport { FieldView } from \"../../vault/models/view/field.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nexport class FieldExport {\n  static template(): FieldExport {\n    const req = new FieldExport();\n    req.name = \"Field name\";\n    req.value = \"Some value\";\n    req.type = FieldType.Text;\n    return req;\n  }\n\n  static toView(req: FieldExport, view = new FieldView()) {\n    view.type = req.type;\n    view.value = req.value;\n    view.name = req.name;\n    view.linkedId = req.linkedId;\n    return view;\n  }\n\n  static toDomain(req: FieldExport, domain = new FieldDomain()) {\n    domain.type = req.type;\n    domain.value = req.value != null ? new EncString(req.value) : null;\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.linkedId = req.linkedId;\n    return domain;\n  }\n\n  name: string;\n  value: string;\n  type: FieldType;\n  linkedId: LinkedIdType;\n\n  constructor(o?: FieldView | FieldDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof FieldView) {\n      this.name = o.name;\n      this.value = o.value;\n    } else {\n      this.name = o.name?.encryptedString;\n      this.value = o.value?.encryptedString;\n    }\n    this.type = o.type;\n    this.linkedId = o.linkedId;\n  }\n}\n","import { Identity as IdentityDomain } from \"../../vault/models/domain/identity\";\nimport { IdentityView } from \"../../vault/models/view/identity.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nexport class IdentityExport {\n  static template(): IdentityExport {\n    const req = new IdentityExport();\n    req.title = \"Mr\";\n    req.firstName = \"John\";\n    req.middleName = \"William\";\n    req.lastName = \"Doe\";\n    req.address1 = \"123 Any St\";\n    req.address2 = \"Apt #123\";\n    req.address3 = null;\n    req.city = \"New York\";\n    req.state = \"NY\";\n    req.postalCode = \"10001\";\n    req.country = \"US\";\n    req.company = \"Acme Inc.\";\n    req.email = \"john@company.com\";\n    req.phone = \"5555551234\";\n    req.ssn = \"000-123-4567\";\n    req.username = \"jdoe\";\n    req.passportNumber = \"US-123456789\";\n    req.licenseNumber = \"D123-12-123-12333\";\n    return req;\n  }\n\n  static toView(req: IdentityExport, view = new IdentityView()) {\n    view.title = req.title;\n    view.firstName = req.firstName;\n    view.middleName = req.middleName;\n    view.lastName = req.lastName;\n    view.address1 = req.address1;\n    view.address2 = req.address2;\n    view.address3 = req.address3;\n    view.city = req.city;\n    view.state = req.state;\n    view.postalCode = req.postalCode;\n    view.country = req.country;\n    view.company = req.company;\n    view.email = req.email;\n    view.phone = req.phone;\n    view.ssn = req.ssn;\n    view.username = req.username;\n    view.passportNumber = req.passportNumber;\n    view.licenseNumber = req.licenseNumber;\n    return view;\n  }\n\n  static toDomain(req: IdentityExport, domain = new IdentityDomain()) {\n    domain.title = req.title != null ? new EncString(req.title) : null;\n    domain.firstName = req.firstName != null ? new EncString(req.firstName) : null;\n    domain.middleName = req.middleName != null ? new EncString(req.middleName) : null;\n    domain.lastName = req.lastName != null ? new EncString(req.lastName) : null;\n    domain.address1 = req.address1 != null ? new EncString(req.address1) : null;\n    domain.address2 = req.address2 != null ? new EncString(req.address2) : null;\n    domain.address3 = req.address3 != null ? new EncString(req.address3) : null;\n    domain.city = req.city != null ? new EncString(req.city) : null;\n    domain.state = req.state != null ? new EncString(req.state) : null;\n    domain.postalCode = req.postalCode != null ? new EncString(req.postalCode) : null;\n    domain.country = req.country != null ? new EncString(req.country) : null;\n    domain.company = req.company != null ? new EncString(req.company) : null;\n    domain.email = req.email != null ? new EncString(req.email) : null;\n    domain.phone = req.phone != null ? new EncString(req.phone) : null;\n    domain.ssn = req.ssn != null ? new EncString(req.ssn) : null;\n    domain.username = req.username != null ? new EncString(req.username) : null;\n    domain.passportNumber = req.passportNumber != null ? new EncString(req.passportNumber) : null;\n    domain.licenseNumber = req.licenseNumber != null ? new EncString(req.licenseNumber) : null;\n    return domain;\n  }\n\n  title: string;\n  firstName: string;\n  middleName: string;\n  lastName: string;\n  address1: string;\n  address2: string;\n  address3: string;\n  city: string;\n  state: string;\n  postalCode: string;\n  country: string;\n  company: string;\n  email: string;\n  phone: string;\n  ssn: string;\n  username: string;\n  passportNumber: string;\n  licenseNumber: string;\n\n  constructor(o?: IdentityView | IdentityDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof IdentityView) {\n      this.title = o.title;\n      this.firstName = o.firstName;\n      this.middleName = o.middleName;\n      this.lastName = o.lastName;\n      this.address1 = o.address1;\n      this.address2 = o.address2;\n      this.address3 = o.address3;\n      this.city = o.city;\n      this.state = o.state;\n      this.postalCode = o.postalCode;\n      this.country = o.country;\n      this.company = o.company;\n      this.email = o.email;\n      this.phone = o.phone;\n      this.ssn = o.ssn;\n      this.username = o.username;\n      this.passportNumber = o.passportNumber;\n      this.licenseNumber = o.licenseNumber;\n    } else {\n      this.title = o.title?.encryptedString;\n      this.firstName = o.firstName?.encryptedString;\n      this.middleName = o.middleName?.encryptedString;\n      this.lastName = o.lastName?.encryptedString;\n      this.address1 = o.address1?.encryptedString;\n      this.address2 = o.address2?.encryptedString;\n      this.address3 = o.address3?.encryptedString;\n      this.city = o.city?.encryptedString;\n      this.state = o.state?.encryptedString;\n      this.postalCode = o.postalCode?.encryptedString;\n      this.country = o.country?.encryptedString;\n      this.company = o.company?.encryptedString;\n      this.email = o.email?.encryptedString;\n      this.phone = o.phone?.encryptedString;\n      this.ssn = o.ssn?.encryptedString;\n      this.username = o.username?.encryptedString;\n      this.passportNumber = o.passportNumber?.encryptedString;\n      this.licenseNumber = o.licenseNumber?.encryptedString;\n    }\n  }\n}\n","import { UriMatchType } from \"../../enums\";\nimport { LoginUri as LoginUriDomain } from \"../../vault/models/domain/login-uri\";\nimport { LoginUriView } from \"../../vault/models/view/login-uri.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nexport class LoginUriExport {\n  static template(): LoginUriExport {\n    const req = new LoginUriExport();\n    req.uri = \"https://google.com\";\n    req.match = null;\n    return req;\n  }\n\n  static toView(req: LoginUriExport, view = new LoginUriView()) {\n    view.uri = req.uri;\n    view.match = req.match;\n    return view;\n  }\n\n  static toDomain(req: LoginUriExport, domain = new LoginUriDomain()) {\n    domain.uri = req.uri != null ? new EncString(req.uri) : null;\n    domain.match = req.match;\n    return domain;\n  }\n\n  uri: string;\n  match: UriMatchType = null;\n\n  constructor(o?: LoginUriView | LoginUriDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o instanceof LoginUriView) {\n      this.uri = o.uri;\n    } else {\n      this.uri = o.uri?.encryptedString;\n    }\n    this.match = o.match;\n  }\n}\n","import { Login as LoginDomain } from \"../../vault/models/domain/login\";\nimport { LoginView } from \"../../vault/models/view/login.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nimport { LoginUriExport } from \"./login-uri.export\";\n\nexport class LoginExport {\n  static template(): LoginExport {\n    const req = new LoginExport();\n    req.uris = [];\n    req.username = \"jdoe\";\n    req.password = \"myp@ssword123\";\n    req.totp = \"JBSWY3DPEHPK3PXP\";\n    return req;\n  }\n\n  static toView(req: LoginExport, view = new LoginView()) {\n    if (req.uris != null) {\n      view.uris = req.uris.map((u) => LoginUriExport.toView(u));\n    }\n    view.username = req.username;\n    view.password = req.password;\n    view.totp = req.totp;\n    return view;\n  }\n\n  static toDomain(req: LoginExport, domain = new LoginDomain()) {\n    if (req.uris != null) {\n      domain.uris = req.uris.map((u) => LoginUriExport.toDomain(u));\n    }\n    domain.username = req.username != null ? new EncString(req.username) : null;\n    domain.password = req.password != null ? new EncString(req.password) : null;\n    domain.totp = req.totp != null ? new EncString(req.totp) : null;\n    return domain;\n  }\n\n  uris: LoginUriExport[];\n  username: string;\n  password: string;\n  totp: string;\n\n  constructor(o?: LoginView | LoginDomain) {\n    if (o == null) {\n      return;\n    }\n\n    if (o.uris != null) {\n      if (o instanceof LoginView) {\n        this.uris = o.uris.map((u) => new LoginUriExport(u));\n      } else {\n        this.uris = o.uris.map((u) => new LoginUriExport(u));\n      }\n    }\n\n    if (o instanceof LoginView) {\n      this.username = o.username;\n      this.password = o.password;\n      this.totp = o.totp;\n    } else {\n      this.username = o.username?.encryptedString;\n      this.password = o.password?.encryptedString;\n      this.totp = o.totp?.encryptedString;\n    }\n  }\n}\n","import { SecureNoteType } from \"../../enums\";\nimport { SecureNote as SecureNoteDomain } from \"../../vault/models/domain/secure-note\";\nimport { SecureNoteView } from \"../../vault/models/view/secure-note.view\";\n\nexport class SecureNoteExport {\n  static template(): SecureNoteExport {\n    const req = new SecureNoteExport();\n    req.type = SecureNoteType.Generic;\n    return req;\n  }\n\n  static toView(req: SecureNoteExport, view = new SecureNoteView()) {\n    view.type = req.type;\n    return view;\n  }\n\n  static toDomain(req: SecureNoteExport, view = new SecureNoteDomain()) {\n    view.type = req.type;\n    return view;\n  }\n\n  type: SecureNoteType;\n\n  constructor(o?: SecureNoteView | SecureNoteDomain) {\n    if (o == null) {\n      return;\n    }\n\n    this.type = o.type;\n  }\n}\n","import { CipherRepromptType } from \"../../vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../vault/enums/cipher-type\";\nimport { Cipher as CipherDomain } from \"../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nimport { CardExport } from \"./card.export\";\nimport { FieldExport } from \"./field.export\";\nimport { IdentityExport } from \"./identity.export\";\nimport { LoginExport } from \"./login.export\";\nimport { SecureNoteExport } from \"./secure-note.export\";\n\nexport class CipherExport {\n  static template(): CipherExport {\n    const req = new CipherExport();\n    req.organizationId = null;\n    req.collectionIds = null;\n    req.folderId = null;\n    req.type = CipherType.Login;\n    req.name = \"Item name\";\n    req.notes = \"Some notes about this item.\";\n    req.favorite = false;\n    req.fields = [];\n    req.login = null;\n    req.secureNote = null;\n    req.card = null;\n    req.identity = null;\n    req.reprompt = CipherRepromptType.None;\n    return req;\n  }\n\n  static toView(req: CipherExport, view = new CipherView()) {\n    view.type = req.type;\n    view.folderId = req.folderId;\n    if (view.organizationId == null) {\n      view.organizationId = req.organizationId;\n    }\n    if (view.collectionIds || req.collectionIds) {\n      const set = new Set((view.collectionIds ?? []).concat(req.collectionIds ?? []));\n      view.collectionIds = Array.from(set.values());\n    }\n    view.name = req.name;\n    view.notes = req.notes;\n    view.favorite = req.favorite;\n    view.reprompt = req.reprompt ?? CipherRepromptType.None;\n\n    if (req.fields != null) {\n      view.fields = req.fields.map((f) => FieldExport.toView(f));\n    }\n\n    switch (req.type) {\n      case CipherType.Login:\n        view.login = LoginExport.toView(req.login);\n        break;\n      case CipherType.SecureNote:\n        view.secureNote = SecureNoteExport.toView(req.secureNote);\n        break;\n      case CipherType.Card:\n        view.card = CardExport.toView(req.card);\n        break;\n      case CipherType.Identity:\n        view.identity = IdentityExport.toView(req.identity);\n        break;\n    }\n\n    return view;\n  }\n\n  static toDomain(req: CipherExport, domain = new CipherDomain()) {\n    domain.type = req.type;\n    domain.folderId = req.folderId;\n    if (domain.organizationId == null) {\n      domain.organizationId = req.organizationId;\n    }\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.notes = req.notes != null ? new EncString(req.notes) : null;\n    domain.favorite = req.favorite;\n    domain.reprompt = req.reprompt ?? CipherRepromptType.None;\n\n    if (req.fields != null) {\n      domain.fields = req.fields.map((f) => FieldExport.toDomain(f));\n    }\n\n    switch (req.type) {\n      case CipherType.Login:\n        domain.login = LoginExport.toDomain(req.login);\n        break;\n      case CipherType.SecureNote:\n        domain.secureNote = SecureNoteExport.toDomain(req.secureNote);\n        break;\n      case CipherType.Card:\n        domain.card = CardExport.toDomain(req.card);\n        break;\n      case CipherType.Identity:\n        domain.identity = IdentityExport.toDomain(req.identity);\n        break;\n    }\n\n    return domain;\n  }\n\n  type: CipherType;\n  folderId: string;\n  organizationId: string;\n  collectionIds: string[];\n  name: string;\n  notes: string;\n  favorite: boolean;\n  fields: FieldExport[];\n  login: LoginExport;\n  secureNote: SecureNoteExport;\n  card: CardExport;\n  identity: IdentityExport;\n  reprompt: CipherRepromptType;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CipherView | CipherDomain) {\n    this.organizationId = o.organizationId;\n    this.folderId = o.folderId;\n    this.type = o.type;\n    this.reprompt = o.reprompt;\n\n    if (o instanceof CipherView) {\n      this.name = o.name;\n      this.notes = o.notes;\n    } else {\n      this.name = o.name?.encryptedString;\n      this.notes = o.notes?.encryptedString;\n    }\n\n    this.favorite = o.favorite;\n\n    if (o.fields != null) {\n      if (o instanceof CipherView) {\n        this.fields = o.fields.map((f) => new FieldExport(f));\n      } else {\n        this.fields = o.fields.map((f) => new FieldExport(f));\n      }\n    }\n\n    switch (o.type) {\n      case CipherType.Login:\n        this.login = new LoginExport(o.login);\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteExport(o.secureNote);\n        break;\n      case CipherType.Card:\n        this.card = new CardExport(o.card);\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityExport(o.identity);\n        break;\n    }\n  }\n}\n","import { Cipher as CipherDomain } from \"../../vault/models/domain/cipher\";\nimport { CipherView } from \"../../vault/models/view/cipher.view\";\n\nimport { CipherExport } from \"./cipher.export\";\n\nexport class CipherWithIdExport extends CipherExport {\n  id: string;\n  collectionIds: string[];\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CipherView | CipherDomain) {\n    this.id = o.id;\n    super.build(o);\n    this.collectionIds = o.collectionIds;\n  }\n}\n","import { Collection as CollectionDomain } from \"../../admin-console/models/domain/collection\";\nimport { CollectionView } from \"../../admin-console/models/view/collection.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nexport class CollectionExport {\n  static template(): CollectionExport {\n    const req = new CollectionExport();\n    req.organizationId = \"00000000-0000-0000-0000-000000000000\";\n    req.name = \"Collection name\";\n    req.externalId = null;\n    return req;\n  }\n\n  static toView(req: CollectionExport, view = new CollectionView()) {\n    view.name = req.name;\n    view.externalId = req.externalId;\n    if (view.organizationId == null) {\n      view.organizationId = req.organizationId;\n    }\n    return view;\n  }\n\n  static toDomain(req: CollectionExport, domain = new CollectionDomain()) {\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    domain.externalId = req.externalId;\n    if (domain.organizationId == null) {\n      domain.organizationId = req.organizationId;\n    }\n    return domain;\n  }\n\n  organizationId: string;\n  name: string;\n  externalId: string;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CollectionView | CollectionDomain) {\n    this.organizationId = o.organizationId;\n    if (o instanceof CollectionView) {\n      this.name = o.name;\n    } else {\n      this.name = o.name?.encryptedString;\n    }\n    this.externalId = o.externalId;\n  }\n}\n","import { Collection as CollectionDomain } from \"../../admin-console/models/domain/collection\";\nimport { CollectionView } from \"../../admin-console/models/view/collection.view\";\n\nimport { CollectionExport } from \"./collection.export\";\n\nexport class CollectionWithIdExport extends CollectionExport {\n  id: string;\n\n  static toView(req: CollectionWithIdExport, view = new CollectionView()) {\n    view.id = req.id;\n    return super.toView(req, view);\n  }\n\n  static toDomain(req: CollectionWithIdExport, domain = new CollectionDomain()) {\n    domain.id = req.id;\n    return super.toDomain(req, domain);\n  }\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: CollectionView | CollectionDomain) {\n    this.id = o.id;\n    super.build(o);\n  }\n}\n","import { EventType } from \"../../enums\";\nimport { EventView } from \"../view/event.view\";\n\nexport class EventExport {\n  message: string;\n  appIcon: string;\n  appName: string;\n  userId: string;\n  userName: string;\n  userEmail: string;\n  date: string;\n  ip: string;\n  type: string;\n  installationId: string;\n\n  constructor(event: EventView) {\n    this.message = event.humanReadableMessage;\n    this.appIcon = event.appIcon;\n    this.appName = event.appName;\n    this.userId = event.userId;\n    this.userName = event.userName;\n    this.userEmail = event.userEmail;\n    this.date = event.date;\n    this.ip = event.ip;\n    this.type = EventType[event.type];\n    this.installationId = event.installationId;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../models/domain/domain-base\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { FolderData } from \"../data/folder.data\";\nimport { FolderView } from \"../view/folder.view\";\n\nexport class Folder extends Domain {\n  id: string;\n  name: EncString;\n  revisionDate: Date;\n\n  constructor(obj?: FolderData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        name: null,\n      },\n      [\"id\"]\n    );\n\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n  }\n\n  decrypt(): Promise<FolderView> {\n    return this.decryptObj(\n      new FolderView(this),\n      {\n        name: null,\n      },\n      null\n    );\n  }\n\n  static fromJSON(obj: Jsonify<Folder>) {\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    return Object.assign(new Folder(), obj, { name: EncString.fromJSON(obj.name), revisionDate });\n  }\n}\n","import { Folder as FolderDomain } from \"../../vault/models/domain/folder\";\nimport { FolderView } from \"../../vault/models/view/folder.view\";\nimport { EncString } from \"../domain/enc-string\";\n\nexport class FolderExport {\n  static template(): FolderExport {\n    const req = new FolderExport();\n    req.name = \"Folder name\";\n    return req;\n  }\n\n  static toView(req: FolderExport, view = new FolderView()) {\n    view.name = req.name;\n    return view;\n  }\n\n  static toDomain(req: FolderExport, domain = new FolderDomain()) {\n    domain.name = req.name != null ? new EncString(req.name) : null;\n    return domain;\n  }\n\n  name: string;\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: FolderView | FolderDomain) {\n    if (o instanceof FolderView) {\n      this.name = o.name;\n    } else {\n      this.name = o.name?.encryptedString;\n    }\n  }\n}\n","import { Folder as FolderDomain } from \"../../vault/models/domain/folder\";\nimport { FolderView } from \"../../vault/models/view/folder.view\";\n\nimport { FolderExport } from \"./folder.export\";\n\nexport class FolderWithIdExport extends FolderExport {\n  id: string;\n\n  static toView(req: FolderWithIdExport, view = new FolderView()) {\n    view.id = req.id;\n    return super.toView(req, view);\n  }\n\n  static toDomain(req: FolderWithIdExport, domain = new FolderDomain()) {\n    domain.id = req.id;\n    return super.toDomain(req, domain);\n  }\n\n  // Use build method instead of ctor so that we can control order of JSON stringify for pretty print\n  build(o: FolderView | FolderDomain) {\n    this.id = o.id;\n    super.build(o);\n  }\n}\n","import * as papa from \"papaparse\";\n\nimport { BitwardenPasswordProtectedFileFormat } from \"@bitwarden/importer/src/importers/bitwarden/bitwarden-password-protected-types\";\n\nimport { ApiService } from \"../abstractions/api.service\";\nimport { CryptoService } from \"../abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport {\n  ExportFormat,\n  ExportService as ExportServiceAbstraction,\n} from \"../abstractions/export.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { CollectionData } from \"../admin-console/models/data/collection.data\";\nimport { Collection } from \"../admin-console/models/domain/collection\";\nimport { CollectionDetailsResponse } from \"../admin-console/models/response/collection.response\";\nimport { CollectionView } from \"../admin-console/models/view/collection.view\";\nimport { KdfConfig } from \"../auth/models/domain/kdf-config\";\nimport { KdfType } from \"../enums\";\nimport { Utils } from \"../misc/utils\";\nimport { CipherWithIdExport as CipherExport } from \"../models/export/cipher-with-ids.export\";\nimport { CollectionWithIdExport as CollectionExport } from \"../models/export/collection-with-id.export\";\nimport { EventExport } from \"../models/export/event.export\";\nimport { FolderWithIdExport as FolderExport } from \"../models/export/folder-with-id.export\";\nimport { EventView } from \"../models/view/event.view\";\nimport { CipherService } from \"../vault/abstractions/cipher.service\";\nimport { FolderService } from \"../vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherType } from \"../vault/enums/cipher-type\";\nimport { CipherData } from \"../vault/models/data/cipher.data\";\nimport { Cipher } from \"../vault/models/domain/cipher\";\nimport { Folder } from \"../vault/models/domain/folder\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\nimport { FolderView } from \"../vault/models/view/folder.view\";\n\nexport class ExportService implements ExportServiceAbstraction {\n  constructor(\n    private folderService: FolderService,\n    private cipherService: CipherService,\n    private apiService: ApiService,\n    private cryptoService: CryptoService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private stateService: StateService\n  ) {}\n\n  async getExport(format: ExportFormat = \"csv\", organizationId?: string): Promise<string> {\n    if (organizationId) {\n      return await this.getOrganizationExport(organizationId, format);\n    }\n\n    if (format === \"encrypted_json\") {\n      return this.getEncryptedExport();\n    } else {\n      return this.getDecryptedExport(format);\n    }\n  }\n\n  async getPasswordProtectedExport(password: string, organizationId?: string): Promise<string> {\n    const clearText = organizationId\n      ? await this.getOrganizationExport(organizationId, \"json\")\n      : await this.getExport(\"json\");\n\n    const kdfType: KdfType = await this.stateService.getKdfType();\n    const kdfConfig: KdfConfig = await this.stateService.getKdfConfig();\n\n    const salt = Utils.fromBufferToB64(await this.cryptoFunctionService.randomBytes(16));\n    const key = await this.cryptoService.makePinKey(password, salt, kdfType, kdfConfig);\n\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid(), key);\n    const encText = await this.cryptoService.encrypt(clearText, key);\n\n    const jsonDoc: BitwardenPasswordProtectedFileFormat = {\n      encrypted: true,\n      passwordProtected: true,\n      salt: salt,\n      kdfType: kdfType,\n      kdfIterations: kdfConfig.iterations,\n      kdfMemory: kdfConfig.memory,\n      kdfParallelism: kdfConfig.parallelism,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      data: encText.encryptedString,\n    };\n\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  async getOrganizationExport(\n    organizationId: string,\n    format: ExportFormat = \"csv\"\n  ): Promise<string> {\n    if (format === \"encrypted_json\") {\n      return this.getOrganizationEncryptedExport(organizationId);\n    } else {\n      return this.getOrganizationDecryptedExport(organizationId, format);\n    }\n  }\n\n  async getEventExport(events: EventView[]): Promise<string> {\n    return papa.unparse(events.map((e) => new EventExport(e)));\n  }\n\n  getFileName(prefix: string = null, extension = \"csv\"): string {\n    const now = new Date();\n    const dateString =\n      now.getFullYear() +\n      \"\" +\n      this.padNumber(now.getMonth() + 1, 2) +\n      \"\" +\n      this.padNumber(now.getDate(), 2) +\n      this.padNumber(now.getHours(), 2) +\n      \"\" +\n      this.padNumber(now.getMinutes(), 2) +\n      this.padNumber(now.getSeconds(), 2);\n\n    return \"bitwarden\" + (prefix ? \"_\" + prefix : \"\") + \"_export_\" + dateString + \".\" + extension;\n  }\n\n  private async getDecryptedExport(format: \"json\" | \"csv\"): Promise<string> {\n    let decFolders: FolderView[] = [];\n    let decCiphers: CipherView[] = [];\n    const promises = [];\n\n    promises.push(\n      this.folderService.getAllDecryptedFromState().then((folders) => {\n        decFolders = folders;\n      })\n    );\n\n    promises.push(\n      this.cipherService.getAllDecrypted().then((ciphers) => {\n        decCiphers = ciphers.filter((f) => f.deletedDate == null);\n      })\n    );\n\n    await Promise.all(promises);\n\n    if (format === \"csv\") {\n      const foldersMap = new Map<string, FolderView>();\n      decFolders.forEach((f) => {\n        if (f.id != null) {\n          foldersMap.set(f.id, f);\n        }\n      });\n\n      const exportCiphers: any[] = [];\n      decCiphers.forEach((c) => {\n        // only export logins and secure notes\n        if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {\n          return;\n        }\n        if (c.organizationId != null) {\n          return;\n        }\n\n        const cipher: any = {};\n        cipher.folder =\n          c.folderId != null && foldersMap.has(c.folderId) ? foldersMap.get(c.folderId).name : null;\n        cipher.favorite = c.favorite ? 1 : null;\n        this.buildCommonCipher(cipher, c);\n        exportCiphers.push(cipher);\n      });\n\n      return papa.unparse(exportCiphers);\n    } else {\n      const jsonDoc: any = {\n        encrypted: false,\n        folders: [],\n        items: [],\n      };\n\n      decFolders.forEach((f) => {\n        if (f.id == null) {\n          return;\n        }\n        const folder = new FolderExport();\n        folder.build(f);\n        jsonDoc.folders.push(folder);\n      });\n\n      decCiphers.forEach((c) => {\n        if (c.organizationId != null) {\n          return;\n        }\n        const cipher = new CipherExport();\n        cipher.build(c);\n        cipher.collectionIds = null;\n        jsonDoc.items.push(cipher);\n      });\n\n      return JSON.stringify(jsonDoc, null, \"  \");\n    }\n  }\n\n  private async getEncryptedExport(): Promise<string> {\n    let folders: Folder[] = [];\n    let ciphers: Cipher[] = [];\n    const promises = [];\n\n    promises.push(\n      this.folderService.getAllFromState().then((f) => {\n        folders = f;\n      })\n    );\n\n    promises.push(\n      this.cipherService.getAll().then((c) => {\n        ciphers = c.filter((f) => f.deletedDate == null);\n      })\n    );\n\n    await Promise.all(promises);\n\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid());\n\n    const jsonDoc: any = {\n      encrypted: true,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      folders: [],\n      items: [],\n    };\n\n    folders.forEach((f) => {\n      if (f.id == null) {\n        return;\n      }\n      const folder = new FolderExport();\n      folder.build(f);\n      jsonDoc.folders.push(folder);\n    });\n\n    ciphers.forEach((c) => {\n      if (c.organizationId != null) {\n        return;\n      }\n      const cipher = new CipherExport();\n      cipher.build(c);\n      cipher.collectionIds = null;\n      jsonDoc.items.push(cipher);\n    });\n\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  private async getOrganizationDecryptedExport(\n    organizationId: string,\n    format: \"json\" | \"csv\"\n  ): Promise<string> {\n    const decCollections: CollectionView[] = [];\n    const decCiphers: CipherView[] = [];\n    const promises = [];\n\n    promises.push(\n      this.apiService.getOrganizationExport(organizationId).then((exportData) => {\n        const exportPromises: any = [];\n        if (exportData != null) {\n          if (exportData.collections != null && exportData.collections.length > 0) {\n            exportData.collections.forEach((c) => {\n              const collection = new Collection(new CollectionData(c as CollectionDetailsResponse));\n              exportPromises.push(\n                collection.decrypt().then((decCol) => {\n                  decCollections.push(decCol);\n                })\n              );\n            });\n          }\n          if (exportData.ciphers != null && exportData.ciphers.length > 0) {\n            exportData.ciphers\n              .filter((c) => c.deletedDate === null)\n              .forEach((c) => {\n                const cipher = new Cipher(new CipherData(c));\n                exportPromises.push(\n                  cipher.decrypt().then((decCipher) => {\n                    decCiphers.push(decCipher);\n                  })\n                );\n              });\n          }\n        }\n        return Promise.all(exportPromises);\n      })\n    );\n\n    await Promise.all(promises);\n\n    if (format === \"csv\") {\n      const collectionsMap = new Map<string, CollectionView>();\n      decCollections.forEach((c) => {\n        collectionsMap.set(c.id, c);\n      });\n\n      const exportCiphers: any[] = [];\n      decCiphers.forEach((c) => {\n        // only export logins and secure notes\n        if (c.type !== CipherType.Login && c.type !== CipherType.SecureNote) {\n          return;\n        }\n\n        const cipher: any = {};\n        cipher.collections = [];\n        if (c.collectionIds != null) {\n          cipher.collections = c.collectionIds\n            .filter((id) => collectionsMap.has(id))\n            .map((id) => collectionsMap.get(id).name);\n        }\n        this.buildCommonCipher(cipher, c);\n        exportCiphers.push(cipher);\n      });\n\n      return papa.unparse(exportCiphers);\n    } else {\n      const jsonDoc: any = {\n        encrypted: false,\n        collections: [],\n        items: [],\n      };\n\n      decCollections.forEach((c) => {\n        const collection = new CollectionExport();\n        collection.build(c);\n        jsonDoc.collections.push(collection);\n      });\n\n      decCiphers.forEach((c) => {\n        const cipher = new CipherExport();\n        cipher.build(c);\n        jsonDoc.items.push(cipher);\n      });\n      return JSON.stringify(jsonDoc, null, \"  \");\n    }\n  }\n\n  private async getOrganizationEncryptedExport(organizationId: string): Promise<string> {\n    const collections: Collection[] = [];\n    const ciphers: Cipher[] = [];\n    const promises = [];\n\n    promises.push(\n      this.apiService.getCollections(organizationId).then((c) => {\n        const collectionPromises: any = [];\n        if (c != null && c.data != null && c.data.length > 0) {\n          c.data.forEach((r) => {\n            const collection = new Collection(new CollectionData(r as CollectionDetailsResponse));\n            collections.push(collection);\n          });\n        }\n        return Promise.all(collectionPromises);\n      })\n    );\n\n    promises.push(\n      this.apiService.getCiphersOrganization(organizationId).then((c) => {\n        const cipherPromises: any = [];\n        if (c != null && c.data != null && c.data.length > 0) {\n          c.data\n            .filter((item) => item.deletedDate === null)\n            .forEach((item) => {\n              const cipher = new Cipher(new CipherData(item));\n              ciphers.push(cipher);\n            });\n        }\n        return Promise.all(cipherPromises);\n      })\n    );\n\n    await Promise.all(promises);\n\n    const orgKey = await this.cryptoService.getOrgKey(organizationId);\n    const encKeyValidation = await this.cryptoService.encrypt(Utils.newGuid(), orgKey);\n\n    const jsonDoc: any = {\n      encrypted: true,\n      encKeyValidation_DO_NOT_EDIT: encKeyValidation.encryptedString,\n      collections: [],\n      items: [],\n    };\n\n    collections.forEach((c) => {\n      const collection = new CollectionExport();\n      collection.build(c);\n      jsonDoc.collections.push(collection);\n    });\n\n    ciphers.forEach((c) => {\n      const cipher = new CipherExport();\n      cipher.build(c);\n      jsonDoc.items.push(cipher);\n    });\n    return JSON.stringify(jsonDoc, null, \"  \");\n  }\n\n  private padNumber(num: number, width: number, padCharacter = \"0\"): string {\n    const numString = num.toString();\n    return numString.length >= width\n      ? numString\n      : new Array(width - numString.length + 1).join(padCharacter) + numString;\n  }\n\n  private buildCommonCipher(cipher: any, c: CipherView) {\n    cipher.type = null;\n    cipher.name = c.name;\n    cipher.notes = c.notes;\n    cipher.fields = null;\n    cipher.reprompt = c.reprompt;\n    // Login props\n    cipher.login_uri = null;\n    cipher.login_username = null;\n    cipher.login_password = null;\n    cipher.login_totp = null;\n\n    if (c.fields) {\n      c.fields.forEach((f: any) => {\n        if (!cipher.fields) {\n          cipher.fields = \"\";\n        } else {\n          cipher.fields += \"\\n\";\n        }\n\n        cipher.fields += (f.name || \"\") + \": \" + f.value;\n      });\n    }\n\n    switch (c.type) {\n      case CipherType.Login:\n        cipher.type = \"login\";\n        cipher.login_username = c.login.username;\n        cipher.login_password = c.login.password;\n        cipher.login_totp = c.login.totp;\n\n        if (c.login.uris) {\n          cipher.login_uri = [];\n          c.login.uris.forEach((u) => {\n            cipher.login_uri.push(u.uri);\n          });\n        }\n        break;\n      case CipherType.SecureNote:\n        cipher.type = \"note\";\n        break;\n      default:\n        return;\n    }\n\n    return cipher;\n  }\n}\n","import { LogService } from \"../abstractions/log.service\";\nimport { Utils } from \"../misc/utils\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\n\nconst MAX_SINGLE_BLOB_UPLOAD_SIZE = 256 * 1024 * 1024; // 256 MiB\nconst MAX_BLOCKS_PER_BLOB = 50000;\n\nexport class AzureFileUploadService {\n  constructor(private logService: LogService) {}\n\n  async upload(url: string, data: EncArrayBuffer, renewalCallback: () => Promise<string>) {\n    if (data.buffer.byteLength <= MAX_SINGLE_BLOB_UPLOAD_SIZE) {\n      return await this.azureUploadBlob(url, data);\n    } else {\n      return await this.azureUploadBlocks(url, data, renewalCallback);\n    }\n  }\n  private async azureUploadBlob(url: string, data: EncArrayBuffer) {\n    const urlObject = Utils.getUrl(url);\n    const headers = new Headers({\n      \"x-ms-date\": new Date().toUTCString(),\n      \"x-ms-version\": urlObject.searchParams.get(\"sv\"),\n      \"Content-Length\": data.buffer.byteLength.toString(),\n      \"x-ms-blob-type\": \"BlockBlob\",\n    });\n\n    const request = new Request(url, {\n      body: data.buffer,\n      cache: \"no-store\",\n      method: \"PUT\",\n      headers: headers,\n    });\n\n    const blobResponse = await fetch(request);\n\n    if (blobResponse.status !== 201) {\n      throw new Error(`Failed to create Azure blob: ${blobResponse.status}`);\n    }\n  }\n  private async azureUploadBlocks(\n    url: string,\n    data: EncArrayBuffer,\n    renewalCallback: () => Promise<string>\n  ) {\n    const baseUrl = Utils.getUrl(url);\n    const blockSize = this.getMaxBlockSize(baseUrl.searchParams.get(\"sv\"));\n    let blockIndex = 0;\n    const numBlocks = Math.ceil(data.buffer.byteLength / blockSize);\n    const blocksStaged: string[] = [];\n\n    if (numBlocks > MAX_BLOCKS_PER_BLOB) {\n      throw new Error(\n        `Cannot upload file, exceeds maximum size of ${blockSize * MAX_BLOCKS_PER_BLOB}`\n      );\n    }\n\n    // eslint-disable-next-line\n    try {\n      while (blockIndex < numBlocks) {\n        url = await this.renewUrlIfNecessary(url, renewalCallback);\n        const blockUrl = Utils.getUrl(url);\n        const blockId = this.encodedBlockId(blockIndex);\n        blockUrl.searchParams.append(\"comp\", \"block\");\n        blockUrl.searchParams.append(\"blockid\", blockId);\n        const start = blockIndex * blockSize;\n        const blockData = data.buffer.slice(start, start + blockSize);\n        const blockHeaders = new Headers({\n          \"x-ms-date\": new Date().toUTCString(),\n          \"x-ms-version\": blockUrl.searchParams.get(\"sv\"),\n          \"Content-Length\": blockData.byteLength.toString(),\n        });\n\n        const blockRequest = new Request(blockUrl.toString(), {\n          body: blockData,\n          cache: \"no-store\",\n          method: \"PUT\",\n          headers: blockHeaders,\n        });\n\n        const blockResponse = await fetch(blockRequest);\n\n        if (blockResponse.status !== 201) {\n          const message = `Unsuccessful block PUT. Received status ${blockResponse.status}`;\n          this.logService.error(message + \"\\n\" + (await blockResponse.json()));\n          throw new Error(message);\n        }\n\n        blocksStaged.push(blockId);\n        blockIndex++;\n      }\n\n      url = await this.renewUrlIfNecessary(url, renewalCallback);\n      const blockListUrl = Utils.getUrl(url);\n      const blockListXml = this.blockListXml(blocksStaged);\n      blockListUrl.searchParams.append(\"comp\", \"blocklist\");\n      const headers = new Headers({\n        \"x-ms-date\": new Date().toUTCString(),\n        \"x-ms-version\": blockListUrl.searchParams.get(\"sv\"),\n        \"Content-Length\": blockListXml.length.toString(),\n      });\n\n      const request = new Request(blockListUrl.toString(), {\n        body: blockListXml,\n        cache: \"no-store\",\n        method: \"PUT\",\n        headers: headers,\n      });\n\n      const response = await fetch(request);\n\n      if (response.status !== 201) {\n        const message = `Unsuccessful block list PUT. Received status ${response.status}`;\n        this.logService.error(message + \"\\n\" + (await response.json()));\n        throw new Error(message);\n      }\n    } catch (e) {\n      throw e;\n    }\n  }\n\n  private async renewUrlIfNecessary(\n    url: string,\n    renewalCallback: () => Promise<string>\n  ): Promise<string> {\n    const urlObject = Utils.getUrl(url);\n    const expiry = new Date(urlObject.searchParams.get(\"se\") ?? \"\");\n\n    if (isNaN(expiry.getTime())) {\n      expiry.setTime(Date.now() + 3600000);\n    }\n\n    if (expiry.getTime() < Date.now() + 1000) {\n      return await renewalCallback();\n    }\n    return url;\n  }\n\n  private encodedBlockId(blockIndex: number) {\n    // Encoded blockId max size is 64, so pre-encoding max size is 48\n    const utfBlockId = (\n      \"000000000000000000000000000000000000000000000000\" + blockIndex.toString()\n    ).slice(-48);\n    return Utils.fromUtf8ToB64(utfBlockId);\n  }\n\n  private blockListXml(blockIdList: string[]) {\n    let xml = '<?xml version=\"1.0\" encoding=\"utf-8\"?><BlockList>';\n    blockIdList.forEach((blockId) => {\n      xml += `<Latest>${blockId}</Latest>`;\n    });\n    xml += \"</BlockList>\";\n    return xml;\n  }\n\n  private getMaxBlockSize(version: string) {\n    if (Version.compare(version, \"2019-12-12\") >= 0) {\n      return 4000 * 1024 * 1024; // 4000 MiB\n    } else if (Version.compare(version, \"2016-05-31\") >= 0) {\n      return 100 * 1024 * 1024; // 100 MiB\n    } else {\n      return 4 * 1024 * 1024; // 4 MiB\n    }\n  }\n}\n\nclass Version {\n  /**\n   * Compares two Azure Versions against each other\n   * @param a Version to compare\n   * @param b Version to compare\n   * @returns a number less than zero if b is newer than a, 0 if equal,\n   * and greater than zero if a is newer than b\n   */\n  static compare(a: Required<Version> | string, b: Required<Version> | string) {\n    if (typeof a === \"string\") {\n      a = new Version(a);\n    }\n\n    if (typeof b === \"string\") {\n      b = new Version(b);\n    }\n\n    return a.year !== b.year\n      ? a.year - b.year\n      : a.month !== b.month\n      ? a.month - b.month\n      : a.day !== b.day\n      ? a.day - b.day\n      : 0;\n  }\n  year = 0;\n  month = 0;\n  day = 0;\n\n  constructor(version: string) {\n    try {\n      const parts = version.split(\"-\").map((v) => Number.parseInt(v, 10));\n      this.year = parts[0];\n      this.month = parts[1];\n      this.day = parts[2];\n    } catch {\n      // Ignore error\n    }\n  }\n  /**\n   * Compares two Azure Versions against each other\n   * @param compareTo Version to compare against\n   * @returns a number less than zero if compareTo is newer, 0 if equal,\n   * and greater than zero if this is greater than compareTo\n   */\n  compare(compareTo: Required<Version> | string) {\n    return Version.compare(this, compareTo);\n  }\n}\n","import { Utils } from \"../misc/utils\";\nimport { EncArrayBuffer } from \"../models/domain/enc-array-buffer\";\n\nexport class BitwardenFileUploadService {\n  async upload(\n    encryptedFileName: string,\n    encryptedFileData: EncArrayBuffer,\n    apiCall: (fd: FormData) => Promise<any>\n  ) {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encryptedFileData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"data\", blob, encryptedFileName);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\n          \"data\",\n          Buffer.from(encryptedFileData.buffer) as any,\n          {\n            filepath: encryptedFileName,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    await apiCall(fd);\n  }\n}\n","import {\n  FileUploadApiMethods,\n  FileUploadService as FileUploadServiceAbstraction,\n} from \"../../abstractions/file-upload/file-upload.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { FileUploadType } from \"../../enums\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../models/domain/enc-string\";\nimport { AzureFileUploadService } from \"../azureFileUpload.service\";\nimport { BitwardenFileUploadService } from \"../bitwardenFileUpload.service\";\n\nexport class FileUploadService implements FileUploadServiceAbstraction {\n  private azureFileUploadService: AzureFileUploadService;\n  private bitwardenFileUploadService: BitwardenFileUploadService;\n\n  constructor(protected logService: LogService) {\n    this.azureFileUploadService = new AzureFileUploadService(logService);\n    this.bitwardenFileUploadService = new BitwardenFileUploadService();\n  }\n\n  async upload(\n    uploadData: { url: string; fileUploadType: FileUploadType },\n    fileName: EncString,\n    encryptedFileData: EncArrayBuffer,\n    fileUploadMethods: FileUploadApiMethods\n  ) {\n    try {\n      switch (uploadData.fileUploadType) {\n        case FileUploadType.Direct:\n          await this.bitwardenFileUploadService.upload(\n            fileName.encryptedString,\n            encryptedFileData,\n            (fd) => fileUploadMethods.postDirect(fd)\n          );\n          break;\n        case FileUploadType.Azure: {\n          await this.azureFileUploadService.upload(\n            uploadData.url,\n            encryptedFileData,\n            fileUploadMethods.renewFileUploadUrl\n          );\n          break;\n        }\n        default:\n          throw new Error(\"Unknown file upload type\");\n      }\n    } catch (e) {\n      await fileUploadMethods.rollback();\n      throw e;\n    }\n  }\n}\n","import * as signalR from \"@microsoft/signalr\";\nimport * as signalRMsgPack from \"@microsoft/signalr-protocol-msgpack\";\n\nimport { ApiService } from \"../abstractions/api.service\";\nimport { AppIdService } from \"../abstractions/appId.service\";\nimport { EnvironmentService } from \"../abstractions/environment.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { MessagingService } from \"../abstractions/messaging.service\";\nimport { NotificationsService as NotificationsServiceAbstraction } from \"../abstractions/notifications.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { AuthService } from \"../auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"../auth/enums/authentication-status\";\nimport { NotificationType } from \"../enums\";\nimport {\n  NotificationResponse,\n  SyncCipherNotification,\n  SyncFolderNotification,\n  SyncSendNotification,\n} from \"../models/response/notification.response\";\nimport { SyncService } from \"../vault/abstractions/sync/sync.service.abstraction\";\n\nexport class NotificationsService implements NotificationsServiceAbstraction {\n  private signalrConnection: signalR.HubConnection;\n  private url: string;\n  private connected = false;\n  private inited = false;\n  private inactive = false;\n  private reconnectTimer: any = null;\n\n  constructor(\n    private syncService: SyncService,\n    private appIdService: AppIdService,\n    private apiService: ApiService,\n    private environmentService: EnvironmentService,\n    private logoutCallback: (expired: boolean) => Promise<void>,\n    private logService: LogService,\n    private stateService: StateService,\n    private authService: AuthService,\n    private messagingService: MessagingService\n  ) {\n    this.environmentService.urls.subscribe(() => {\n      if (!this.inited) {\n        return;\n      }\n\n      this.init();\n    });\n  }\n\n  async init(): Promise<void> {\n    this.inited = false;\n    this.url = this.environmentService.getNotificationsUrl();\n\n    // Set notifications server URL to `https://-` to effectively disable communication\n    // with the notifications server from the client app\n    if (this.url === \"https://-\") {\n      return;\n    }\n\n    if (this.signalrConnection != null) {\n      this.signalrConnection.off(\"ReceiveMessage\");\n      this.signalrConnection.off(\"Heartbeat\");\n      await this.signalrConnection.stop();\n      this.connected = false;\n      this.signalrConnection = null;\n    }\n\n    this.signalrConnection = new signalR.HubConnectionBuilder()\n      .withUrl(this.url + \"/hub\", {\n        accessTokenFactory: () => this.apiService.getActiveBearerToken(),\n        skipNegotiation: true,\n        transport: signalR.HttpTransportType.WebSockets,\n      })\n      .withHubProtocol(new signalRMsgPack.MessagePackHubProtocol() as signalR.IHubProtocol)\n      // .configureLogging(signalR.LogLevel.Trace)\n      .build();\n\n    this.signalrConnection.on(\"ReceiveMessage\", (data: any) =>\n      this.processNotification(new NotificationResponse(data))\n    );\n    // eslint-disable-next-line\n    this.signalrConnection.on(\"Heartbeat\", (data: any) => {\n      /*console.log('Heartbeat!');*/\n    });\n    this.signalrConnection.onclose(() => {\n      this.connected = false;\n      this.reconnect(true);\n    });\n    this.inited = true;\n    if (await this.isAuthedAndUnlocked()) {\n      await this.reconnect(false);\n    }\n  }\n\n  async updateConnection(sync = false): Promise<void> {\n    if (!this.inited) {\n      return;\n    }\n    try {\n      if (await this.isAuthedAndUnlocked()) {\n        await this.reconnect(sync);\n      } else {\n        await this.signalrConnection.stop();\n      }\n    } catch (e) {\n      this.logService.error(e.toString());\n    }\n  }\n\n  async reconnectFromActivity(): Promise<void> {\n    this.inactive = false;\n    if (this.inited && !this.connected) {\n      await this.reconnect(true);\n    }\n  }\n\n  async disconnectFromInactivity(): Promise<void> {\n    this.inactive = true;\n    if (this.inited && this.connected) {\n      await this.signalrConnection.stop();\n    }\n  }\n\n  private async processNotification(notification: NotificationResponse) {\n    const appId = await this.appIdService.getAppId();\n    if (notification == null || notification.contextId === appId) {\n      return;\n    }\n\n    const isAuthenticated = await this.stateService.getIsAuthenticated();\n    const payloadUserId = notification.payload.userId || notification.payload.UserId;\n    const myUserId = await this.stateService.getUserId();\n    if (isAuthenticated && payloadUserId != null && payloadUserId !== myUserId) {\n      return;\n    }\n\n    switch (notification.type) {\n      case NotificationType.SyncCipherCreate:\n      case NotificationType.SyncCipherUpdate:\n        await this.syncService.syncUpsertCipher(\n          notification.payload as SyncCipherNotification,\n          notification.type === NotificationType.SyncCipherUpdate\n        );\n        break;\n      case NotificationType.SyncCipherDelete:\n      case NotificationType.SyncLoginDelete:\n        await this.syncService.syncDeleteCipher(notification.payload as SyncCipherNotification);\n        break;\n      case NotificationType.SyncFolderCreate:\n      case NotificationType.SyncFolderUpdate:\n        await this.syncService.syncUpsertFolder(\n          notification.payload as SyncFolderNotification,\n          notification.type === NotificationType.SyncFolderUpdate\n        );\n        break;\n      case NotificationType.SyncFolderDelete:\n        await this.syncService.syncDeleteFolder(notification.payload as SyncFolderNotification);\n        break;\n      case NotificationType.SyncVault:\n      case NotificationType.SyncCiphers:\n      case NotificationType.SyncSettings:\n        if (isAuthenticated) {\n          await this.syncService.fullSync(false);\n        }\n        break;\n      case NotificationType.SyncOrgKeys:\n        if (isAuthenticated) {\n          await this.syncService.fullSync(true);\n          // Stop so a reconnect can be made\n          await this.signalrConnection.stop();\n        }\n        break;\n      case NotificationType.LogOut:\n        if (isAuthenticated) {\n          this.logoutCallback(true);\n        }\n        break;\n      case NotificationType.SyncSendCreate:\n      case NotificationType.SyncSendUpdate:\n        await this.syncService.syncUpsertSend(\n          notification.payload as SyncSendNotification,\n          notification.type === NotificationType.SyncSendUpdate\n        );\n        break;\n      case NotificationType.SyncSendDelete:\n        await this.syncService.syncDeleteSend(notification.payload as SyncSendNotification);\n        break;\n      case NotificationType.AuthRequest:\n        if (await this.stateService.getApproveLoginRequests()) {\n          this.messagingService.send(\"openLoginApproval\", {\n            notificationId: notification.payload.id,\n          });\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async reconnect(sync: boolean) {\n    if (this.reconnectTimer != null) {\n      clearTimeout(this.reconnectTimer);\n      this.reconnectTimer = null;\n    }\n    if (this.connected || !this.inited || this.inactive) {\n      return;\n    }\n    const authedAndUnlocked = await this.isAuthedAndUnlocked();\n    if (!authedAndUnlocked) {\n      return;\n    }\n\n    try {\n      await this.signalrConnection.start();\n      this.connected = true;\n      if (sync) {\n        await this.syncService.fullSync(false);\n      }\n    } catch (e) {\n      this.logService.error(e);\n    }\n\n    if (!this.connected) {\n      this.reconnectTimer = setTimeout(() => this.reconnect(sync), this.random(120000, 300000));\n    }\n  }\n\n  private async isAuthedAndUnlocked() {\n    const authStatus = await this.authService.getAuthStatus();\n    return authStatus >= AuthenticationStatus.Unlocked;\n  }\n\n  private random(min: number, max: number) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationDomainSsoDetailsResponse extends BaseResponse {\n  id: string;\n  organizationIdentifier: string;\n  ssoAvailable: boolean;\n  domainName: string;\n  verifiedDate?: Date;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"id\");\n    this.organizationIdentifier = this.getResponseProperty(\"organizationIdentifier\");\n    this.ssoAvailable = this.getResponseProperty(\"ssoAvailable\");\n    this.domainName = this.getResponseProperty(\"domainName\");\n    this.verifiedDate = this.getResponseProperty(\"verifiedDate\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationDomainResponse extends BaseResponse {\n  id: string;\n  organizationId: string;\n  txt: string;\n  domainName: string;\n  creationDate: string;\n  nextRunDate: string;\n  jobRunCount: number;\n  verifiedDate?: string;\n  lastCheckedDate?: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"id\");\n    this.organizationId = this.getResponseProperty(\"organizationId\");\n    this.txt = this.getResponseProperty(\"txt\");\n    this.domainName = this.getResponseProperty(\"domainName\");\n    this.creationDate = this.getResponseProperty(\"creationDate\");\n    this.nextRunDate = this.getResponseProperty(\"nextRunDate\");\n    this.jobRunCount = this.getResponseProperty(\"jobRunCount\");\n    this.verifiedDate = this.getResponseProperty(\"verifiedDate\");\n    this.lastCheckedDate = this.getResponseProperty(\"lastCheckedDate\");\n  }\n}\n","export class OrganizationDomainSsoDetailsRequest {\n  constructor(public email: string) {}\n}\n","import { OrganizationUserStatusType, OrganizationUserType } from \"../../../admin-console/enums\";\nimport { PermissionsApi } from \"../../../admin-console/models/api/permissions.api\";\nimport { SelectionReadOnlyResponse } from \"../../../admin-console/models/response/selection-read-only.response\";\nimport { KdfType } from \"../../../enums\";\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationUserResponse extends BaseResponse {\n  id: string;\n  userId: string;\n  type: OrganizationUserType;\n  status: OrganizationUserStatusType;\n  externalId: string;\n  accessAll: boolean;\n  accessSecretsManager: boolean;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  collections: SelectionReadOnlyResponse[] = [];\n  groups: string[] = [];\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.userId = this.getResponseProperty(\"UserId\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.status = this.getResponseProperty(\"Status\");\n    this.permissions = new PermissionsApi(this.getResponseProperty(\"Permissions\"));\n    this.externalId = this.getResponseProperty(\"ExternalId\");\n    this.accessAll = this.getResponseProperty(\"AccessAll\");\n    this.accessSecretsManager = this.getResponseProperty(\"AccessSecretsManager\");\n    this.resetPasswordEnrolled = this.getResponseProperty(\"ResetPasswordEnrolled\");\n\n    const collections = this.getResponseProperty(\"Collections\");\n    if (collections != null) {\n      this.collections = collections.map((c: any) => new SelectionReadOnlyResponse(c));\n    }\n    const groups = this.getResponseProperty(\"Groups\");\n    if (groups != null) {\n      this.groups = groups;\n    }\n  }\n}\n\nexport class OrganizationUserUserDetailsResponse extends OrganizationUserResponse {\n  name: string;\n  email: string;\n  avatarColor: string;\n  twoFactorEnabled: boolean;\n  usesKeyConnector: boolean;\n\n  constructor(response: any) {\n    super(response);\n    this.name = this.getResponseProperty(\"Name\");\n    this.email = this.getResponseProperty(\"Email\");\n    this.avatarColor = this.getResponseProperty(\"AvatarColor\");\n    this.twoFactorEnabled = this.getResponseProperty(\"TwoFactorEnabled\");\n    this.usesKeyConnector = this.getResponseProperty(\"UsesKeyConnector\") ?? false;\n  }\n}\n\nexport class OrganizationUserDetailsResponse extends OrganizationUserResponse {\n  constructor(response: any) {\n    super(response);\n  }\n}\n\nexport class OrganizationUserResetPasswordDetailsReponse extends BaseResponse {\n  kdf: KdfType;\n  kdfIterations: number;\n  kdfMemory?: number;\n  kdfParallelism?: number;\n  resetPasswordKey: string;\n  encryptedPrivateKey: string;\n\n  constructor(response: any) {\n    super(response);\n    this.kdf = this.getResponseProperty(\"Kdf\");\n    this.kdfIterations = this.getResponseProperty(\"KdfIterations\");\n    this.kdfMemory = this.getResponseProperty(\"KdfMemory\");\n    this.kdfParallelism = this.getResponseProperty(\"KdfParallelism\");\n    this.resetPasswordKey = this.getResponseProperty(\"ResetPasswordKey\");\n    this.encryptedPrivateKey = this.getResponseProperty(\"EncryptedPrivateKey\");\n  }\n}\n","import { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class OrganizationUserBulkResponse extends BaseResponse {\n  id: string;\n  error: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.error = this.getResponseProperty(\"Error\");\n  }\n}\n","export class OrganizationUserBulkRequest {\n  ids: string[];\n\n  constructor(ids: string[]) {\n    this.ids = ids == null ? [] : ids;\n  }\n}\n","import * as lunr from \"lunr\";\n\nimport { I18nService } from \"../abstractions/i18n.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { SearchService as SearchServiceAbstraction } from \"../abstractions/search.service\";\nimport { FieldType, UriMatchType } from \"../enums\";\nimport { SendView } from \"../tools/send/models/view/send.view\";\nimport { CipherType } from \"../vault/enums/cipher-type\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\n\nexport class SearchService implements SearchServiceAbstraction {\n  private static registeredPipeline = false;\n\n  indexedEntityId?: string = null;\n  private indexing = false;\n  private index: lunr.Index = null;\n  private readonly immediateSearchLocales: string[] = [\"zh-CN\", \"zh-TW\", \"ja\", \"ko\", \"vi\"];\n  private readonly defaultSearchableMinLength: number = 2;\n  private searchableMinLength: number = this.defaultSearchableMinLength;\n\n  constructor(private logService: LogService, private i18nService: I18nService) {\n    this.i18nService.locale$.subscribe((locale) => {\n      if (this.immediateSearchLocales.indexOf(locale) !== -1) {\n        this.searchableMinLength = 1;\n      } else {\n        this.searchableMinLength = this.defaultSearchableMinLength;\n      }\n    });\n\n    // Currently have to ensure this is only done a single time. Lunr allows you to register a function\n    // multiple times but they will add a warning message to the console. The way they do that breaks when ran on a service worker.\n    if (!SearchService.registeredPipeline) {\n      SearchService.registeredPipeline = true;\n      //register lunr pipeline function\n      lunr.Pipeline.registerFunction(this.normalizeAccentsPipelineFunction, \"normalizeAccents\");\n    }\n  }\n\n  clearIndex(): void {\n    this.indexedEntityId = null;\n    this.index = null;\n  }\n\n  isSearchable(query: string): boolean {\n    query = SearchService.normalizeSearchQuery(query);\n    const notSearchable =\n      query == null ||\n      (this.index == null && query.length < this.searchableMinLength) ||\n      (this.index != null && query.length < this.searchableMinLength && query.indexOf(\">\") !== 0);\n    return !notSearchable;\n  }\n\n  indexCiphers(ciphers: CipherView[], indexedEntityId?: string): void {\n    if (this.indexing) {\n      return;\n    }\n\n    this.indexing = true;\n    this.indexedEntityId = indexedEntityId;\n    this.index = null;\n    const builder = new lunr.Builder();\n    builder.pipeline.add(this.normalizeAccentsPipelineFunction);\n    builder.ref(\"id\");\n    builder.field(\"shortid\", { boost: 100, extractor: (c: CipherView) => c.id.substr(0, 8) });\n    builder.field(\"name\", {\n      boost: 10,\n    });\n    builder.field(\"subtitle\", {\n      boost: 5,\n      extractor: (c: CipherView) => {\n        if (c.subTitle != null && c.type === CipherType.Card) {\n          return c.subTitle.replace(/\\*/g, \"\");\n        }\n        return c.subTitle;\n      },\n    });\n    builder.field(\"notes\");\n    builder.field(\"login.username\", {\n      extractor: (c: CipherView) =>\n        c.type === CipherType.Login && c.login != null ? c.login.username : null,\n    });\n    builder.field(\"login.uris\", { boost: 2, extractor: (c: CipherView) => this.uriExtractor(c) });\n    builder.field(\"fields\", { extractor: (c: CipherView) => this.fieldExtractor(c, false) });\n    builder.field(\"fields_joined\", { extractor: (c: CipherView) => this.fieldExtractor(c, true) });\n    builder.field(\"attachments\", {\n      extractor: (c: CipherView) => this.attachmentExtractor(c, false),\n    });\n    builder.field(\"attachments_joined\", {\n      extractor: (c: CipherView) => this.attachmentExtractor(c, true),\n    });\n    builder.field(\"organizationid\", { extractor: (c: CipherView) => c.organizationId });\n    ciphers = ciphers || [];\n    ciphers.forEach((c) => builder.add(c));\n    this.index = builder.build();\n\n    this.indexing = false;\n\n    this.logService.info(\"Finished search indexing\");\n  }\n\n  async searchCiphers(\n    query: string,\n    filter: ((cipher: CipherView) => boolean) | ((cipher: CipherView) => boolean)[] = null,\n    ciphers: CipherView[]\n  ): Promise<CipherView[]> {\n    const results: CipherView[] = [];\n    if (query != null) {\n      query = SearchService.normalizeSearchQuery(query.trim().toLowerCase());\n    }\n    if (query === \"\") {\n      query = null;\n    }\n\n    if (ciphers == null) {\n      ciphers = [];\n    }\n\n    if (filter != null && Array.isArray(filter) && filter.length > 0) {\n      ciphers = ciphers.filter((c) => filter.every((f) => f == null || f(c)));\n    } else if (filter != null) {\n      ciphers = ciphers.filter(filter as (cipher: CipherView) => boolean);\n    }\n\n    if (!this.isSearchable(query)) {\n      return ciphers;\n    }\n\n    if (this.indexing) {\n      await new Promise((r) => setTimeout(r, 250));\n      if (this.indexing) {\n        await new Promise((r) => setTimeout(r, 500));\n      }\n    }\n\n    const index = this.getIndexForSearch();\n    if (index == null) {\n      // Fall back to basic search if index is not available\n      return this.searchCiphersBasic(ciphers, query);\n    }\n\n    const ciphersMap = new Map<string, CipherView>();\n    ciphers.forEach((c) => ciphersMap.set(c.id, c));\n\n    let searchResults: lunr.Index.Result[] = null;\n    const isQueryString = query != null && query.length > 1 && query.indexOf(\">\") === 0;\n    if (isQueryString) {\n      try {\n        searchResults = index.search(query.substr(1).trim());\n      } catch (e) {\n        this.logService.error(e);\n      }\n    } else {\n      const soWild = lunr.Query.wildcard.LEADING | lunr.Query.wildcard.TRAILING;\n      searchResults = index.query((q) => {\n        lunr.tokenizer(query).forEach((token) => {\n          const t = token.toString();\n          q.term(t, { fields: [\"name\"], wildcard: soWild });\n          q.term(t, { fields: [\"subtitle\"], wildcard: soWild });\n          q.term(t, { fields: [\"login.uris\"], wildcard: soWild });\n          q.term(t, {});\n        });\n      });\n    }\n\n    if (searchResults != null) {\n      searchResults.forEach((r) => {\n        if (ciphersMap.has(r.ref)) {\n          results.push(ciphersMap.get(r.ref));\n        }\n      });\n    }\n    return results;\n  }\n\n  searchCiphersBasic(ciphers: CipherView[], query: string, deleted = false) {\n    query = SearchService.normalizeSearchQuery(query.trim().toLowerCase());\n    return ciphers.filter((c) => {\n      if (deleted !== c.isDeleted) {\n        return false;\n      }\n      if (c.name != null && c.name.toLowerCase().indexOf(query) > -1) {\n        return true;\n      }\n      if (query.length >= 8 && c.id.startsWith(query)) {\n        return true;\n      }\n      if (c.subTitle != null && c.subTitle.toLowerCase().indexOf(query) > -1) {\n        return true;\n      }\n      if (\n        c.login &&\n        c.login.hasUris &&\n        c.login.uris.some((loginUri) => loginUri?.uri?.toLowerCase().indexOf(query) > -1)\n      ) {\n        return true;\n      }\n      return false;\n    });\n  }\n\n  searchSends(sends: SendView[], query: string) {\n    query = SearchService.normalizeSearchQuery(query.trim().toLocaleLowerCase());\n    if (query === null) {\n      return sends;\n    }\n    const sendsMatched: SendView[] = [];\n    const lowPriorityMatched: SendView[] = [];\n    sends.forEach((s) => {\n      if (s.name != null && s.name.toLowerCase().indexOf(query) > -1) {\n        sendsMatched.push(s);\n      } else if (\n        query.length >= 8 &&\n        (s.id.startsWith(query) ||\n          s.accessId.toLocaleLowerCase().startsWith(query) ||\n          (s.file?.id != null && s.file.id.startsWith(query)))\n      ) {\n        lowPriorityMatched.push(s);\n      } else if (s.notes != null && s.notes.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      } else if (s.text?.text != null && s.text.text.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      } else if (s.file?.fileName != null && s.file.fileName.toLowerCase().indexOf(query) > -1) {\n        lowPriorityMatched.push(s);\n      }\n    });\n    return sendsMatched.concat(lowPriorityMatched);\n  }\n\n  getIndexForSearch(): lunr.Index {\n    return this.index;\n  }\n\n  private fieldExtractor(c: CipherView, joined: boolean) {\n    if (!c.hasFields) {\n      return null;\n    }\n    let fields: string[] = [];\n    c.fields.forEach((f) => {\n      if (f.name != null) {\n        fields.push(f.name);\n      }\n      if (f.type === FieldType.Text && f.value != null) {\n        fields.push(f.value);\n      }\n    });\n    fields = fields.filter((f) => f.trim() !== \"\");\n    if (fields.length === 0) {\n      return null;\n    }\n    return joined ? fields.join(\" \") : fields;\n  }\n\n  private attachmentExtractor(c: CipherView, joined: boolean) {\n    if (!c.hasAttachments) {\n      return null;\n    }\n    let attachments: string[] = [];\n    c.attachments.forEach((a) => {\n      if (a != null && a.fileName != null) {\n        if (joined && a.fileName.indexOf(\".\") > -1) {\n          attachments.push(a.fileName.substr(0, a.fileName.lastIndexOf(\".\")));\n        } else {\n          attachments.push(a.fileName);\n        }\n      }\n    });\n    attachments = attachments.filter((f) => f.trim() !== \"\");\n    if (attachments.length === 0) {\n      return null;\n    }\n    return joined ? attachments.join(\" \") : attachments;\n  }\n\n  private uriExtractor(c: CipherView) {\n    if (c.type !== CipherType.Login || c.login == null || !c.login.hasUris) {\n      return null;\n    }\n    const uris: string[] = [];\n    c.login.uris.forEach((u) => {\n      if (u.uri == null || u.uri === \"\") {\n        return;\n      }\n      if (u.hostname != null) {\n        uris.push(u.hostname);\n        return;\n      }\n      let uri = u.uri;\n      if (u.match !== UriMatchType.RegularExpression) {\n        const protocolIndex = uri.indexOf(\"://\");\n        if (protocolIndex > -1) {\n          uri = uri.substr(protocolIndex + 3);\n        }\n        const queryIndex = uri.search(/\\?|&|#/);\n        if (queryIndex > -1) {\n          uri = uri.substring(0, queryIndex);\n        }\n      }\n      uris.push(uri);\n    });\n    return uris.length > 0 ? uris : null;\n  }\n\n  private normalizeAccentsPipelineFunction(token: lunr.Token): any {\n    const searchableFields = [\"name\", \"login.username\", \"subtitle\", \"notes\"];\n    const fields = (token as any).metadata[\"fields\"];\n    const checkFields = fields.every((i: any) => searchableFields.includes(i));\n\n    if (checkFields) {\n      return SearchService.normalizeSearchQuery(token.toString());\n    }\n\n    return token;\n  }\n\n  // Remove accents/diacritics characters from text. This regex is equivalent to the Diacritic unicode property escape, i.e. it will match all diacritic characters.\n  static normalizeSearchQuery(query: string): string {\n    return query?.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { SettingsService as SettingsServiceAbstraction } from \"../abstractions/settings.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { Utils } from \"../misc/utils\";\nimport { AccountSettingsSettings } from \"../models/domain/account\";\n\nexport class SettingsService implements SettingsServiceAbstraction {\n  protected _settings: BehaviorSubject<AccountSettingsSettings> = new BehaviorSubject({});\n\n  settings$ = this._settings.asObservable();\n\n  constructor(private stateService: StateService) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._settings.next({});\n            return;\n          }\n\n          const data = await this.stateService.getSettings();\n\n          this._settings.next(data);\n        })\n      )\n      .subscribe();\n  }\n\n  async setEquivalentDomains(equivalentDomains: string[][]): Promise<void> {\n    const settings = this._settings.getValue() ?? {};\n\n    settings.equivalentDomains = equivalentDomains;\n\n    this._settings.next(settings);\n    await this.stateService.setSettings(settings);\n  }\n\n  getEquivalentDomains(url: string): Set<string> {\n    const domain = Utils.getDomain(url);\n    if (domain == null) {\n      return new Set();\n    }\n\n    const settings = this._settings.getValue();\n\n    let result: string[] = [];\n\n    if (settings?.equivalentDomains != null) {\n      settings.equivalentDomains\n        .filter((ed) => ed.length > 0 && ed.includes(domain))\n        .forEach((ed) => {\n          result = result.concat(ed);\n        });\n    }\n\n    return new Set(result);\n  }\n\n  async clear(userId?: string): Promise<void> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._settings.next({});\n    }\n\n    await this.stateService.setSettings(null, { userId: userId });\n  }\n}\n","import { ProviderUserStatusType, ProviderUserType } from \"../../enums\";\nimport { ProfileProviderResponse } from \"../response/profile-provider.response\";\n\nexport class ProviderData {\n  id: string;\n  name: string;\n  status: ProviderUserStatusType;\n  type: ProviderUserType;\n  enabled: boolean;\n  userId: string;\n  useEvents: boolean;\n\n  constructor(response: ProfileProviderResponse) {\n    this.id = response.id;\n    this.name = response.name;\n    this.status = response.status;\n    this.type = response.type;\n    this.enabled = response.enabled;\n    this.userId = response.userId;\n    this.useEvents = response.useEvents;\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Account } from \"./account\";\nimport { GlobalState } from \"./global-state\";\n\nexport class State<\n  TGlobalState extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> {\n  accounts: { [userId: string]: TAccount } = {};\n  globals: TGlobalState;\n  activeUserId: string;\n  authenticatedAccounts: string[] = [];\n  accountActivity: { [userId: string]: number } = {};\n\n  constructor(globals: TGlobalState) {\n    this.globals = globals;\n  }\n\n  // TODO, make Jsonify<State,TGlobalState,TAccount> work. It currently doesn't because Globals doesn't implement Jsonify.\n  static fromJSON<TGlobalState extends GlobalState, TAccount extends Account>(\n    obj: any,\n    accountDeserializer: (json: Jsonify<TAccount>) => TAccount\n  ): State<TGlobalState, TAccount> {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new State(null), obj, {\n      accounts: State.buildAccountMapFromJSON(obj?.accounts, accountDeserializer),\n    });\n  }\n\n  private static buildAccountMapFromJSON<TAccount extends Account>(\n    jsonAccounts: { [userId: string]: Jsonify<TAccount> },\n    accountDeserializer: (json: Jsonify<TAccount>) => TAccount\n  ) {\n    if (!jsonAccounts) {\n      return {};\n    }\n    const accounts: { [userId: string]: TAccount } = {};\n    for (const userId in jsonAccounts) {\n      accounts[userId] = accountDeserializer(jsonAccounts[userId]);\n    }\n    return accounts;\n  }\n}\n","import { SendFileApi } from \"../api/send-file.api\";\n\nexport class SendFileData {\n  id: string;\n  fileName: string;\n  size: string;\n  sizeName: string;\n\n  constructor(data?: SendFileApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.id = data.id;\n    this.fileName = data.fileName;\n    this.size = data.size;\n    this.sizeName = data.sizeName;\n  }\n}\n","import { SendTextApi } from \"../api/send-text.api\";\n\nexport class SendTextData {\n  text: string;\n  hidden: boolean;\n\n  constructor(data?: SendTextApi) {\n    if (data == null) {\n      return;\n    }\n\n    this.text = data.text;\n    this.hidden = data.hidden;\n  }\n}\n","import { SendType } from \"../../enums/send-type\";\nimport { SendResponse } from \"../response/send.response\";\n\nimport { SendFileData } from \"./send-file.data\";\nimport { SendTextData } from \"./send-text.data\";\n\nexport class SendData {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: string;\n  notes: string;\n  file: SendFileData;\n  text: SendTextData;\n  key: string;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: string;\n  expirationDate: string;\n  deletionDate: string;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(response?: SendResponse) {\n    if (response == null) {\n      return;\n    }\n\n    this.id = response.id;\n    this.accessId = response.accessId;\n    this.type = response.type;\n    this.name = response.name;\n    this.notes = response.notes;\n    this.key = response.key;\n    this.maxAccessCount = response.maxAccessCount;\n    this.accessCount = response.accessCount;\n    this.revisionDate = response.revisionDate;\n    this.expirationDate = response.expirationDate;\n    this.deletionDate = response.deletionDate;\n    this.password = response.password;\n    this.disabled = response.disable;\n    this.hideEmail = response.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendTextData(response.text);\n        break;\n      case SendType.File:\n        this.file = new SendFileData(response.file);\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { FolderResponse } from \"../response/folder.response\";\n\nexport class FolderData {\n  id: string;\n  name: string;\n  revisionDate: string;\n\n  constructor(response: FolderResponse) {\n    this.name = response.name;\n    this.id = response.id;\n    this.revisionDate = response.revisionDate;\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\nimport { Jsonify, JsonValue } from \"type-fest\";\n\nimport { LogService } from \"../abstractions/log.service\";\nimport { StateService as StateServiceAbstraction } from \"../abstractions/state.service\";\nimport { StateMigrationService } from \"../abstractions/stateMigration.service\";\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"../abstractions/storage.service\";\nimport { CollectionData } from \"../admin-console/models/data/collection.data\";\nimport { EncryptedOrganizationKeyData } from \"../admin-console/models/data/encrypted-organization-key.data\";\nimport { OrganizationData } from \"../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../admin-console/models/data/provider.data\";\nimport { Policy } from \"../admin-console/models/domain/policy\";\nimport { CollectionView } from \"../admin-console/models/view/collection.view\";\nimport { EnvironmentUrls } from \"../auth/models/domain/environment-urls\";\nimport { ForceResetPasswordReason } from \"../auth/models/domain/force-reset-password-reason\";\nimport { KdfConfig } from \"../auth/models/domain/kdf-config\";\nimport { BiometricKey } from \"../auth/types/biometric-key\";\nimport { HtmlStorageLocation, KdfType, StorageLocation, ThemeType, UriMatchType } from \"../enums\";\nimport { VaultTimeoutAction } from \"../enums/vault-timeout-action.enum\";\nimport { StateFactory } from \"../factories/stateFactory\";\nimport { Utils } from \"../misc/utils\";\nimport { EventData } from \"../models/data/event.data\";\nimport { ServerConfigData } from \"../models/data/server-config.data\";\nimport {\n  Account,\n  AccountData,\n  AccountSettings,\n  AccountSettingsSettings,\n} from \"../models/domain/account\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { GlobalState } from \"../models/domain/global-state\";\nimport { State } from \"../models/domain/state\";\nimport { StorageOptions } from \"../models/domain/storage-options\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { WindowState } from \"../models/domain/window-state\";\nimport { GeneratedPasswordHistory } from \"../tools/generator/password\";\nimport { SendData } from \"../tools/send/models/data/send.data\";\nimport { SendView } from \"../tools/send/models/view/send.view\";\nimport { CipherData } from \"../vault/models/data/cipher.data\";\nimport { FolderData } from \"../vault/models/data/folder.data\";\nimport { LocalData } from \"../vault/models/data/local.data\";\nimport { CipherView } from \"../vault/models/view/cipher.view\";\nimport { AddEditCipherInfo } from \"../vault/types/add-edit-cipher-info\";\n\nconst keys = {\n  state: \"state\",\n  global: \"global\",\n  authenticatedAccounts: \"authenticatedAccounts\",\n  activeUserId: \"activeUserId\",\n  tempAccountSettings: \"tempAccountSettings\", // used to hold account specific settings (i.e clear clipboard) between initial migration and first account authentication\n  accountActivity: \"accountActivity\",\n};\n\nconst partialKeys = {\n  autoKey: \"_masterkey_auto\",\n  biometricKey: \"_masterkey_biometric\",\n  masterKey: \"_masterkey\",\n};\n\nconst DDG_SHARED_KEY = \"DuckDuckGoSharedKey\";\n\nexport class StateService<\n  TGlobalState extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> implements StateServiceAbstraction<TAccount>\n{\n  protected accountsSubject = new BehaviorSubject<{ [userId: string]: TAccount }>({});\n  accounts$ = this.accountsSubject.asObservable();\n\n  protected activeAccountSubject = new BehaviorSubject<string | null>(null);\n  activeAccount$ = this.activeAccountSubject.asObservable();\n\n  protected activeAccountUnlockedSubject = new BehaviorSubject<boolean>(false);\n  activeAccountUnlocked$ = this.activeAccountUnlockedSubject.asObservable();\n\n  private hasBeenInited = false;\n  private isRecoveredSession = false;\n\n  protected accountDiskCache = new BehaviorSubject<Record<string, TAccount>>({});\n\n  // default account serializer, must be overridden by child class\n  protected accountDeserializer = Account.fromJSON as (json: Jsonify<TAccount>) => TAccount;\n\n  constructor(\n    protected storageService: AbstractStorageService,\n    protected secureStorageService: AbstractStorageService,\n    protected memoryStorageService: AbstractMemoryStorageService,\n    protected logService: LogService,\n    protected stateMigrationService: StateMigrationService,\n    protected stateFactory: StateFactory<TGlobalState, TAccount>,\n    protected useAccountCache: boolean = true\n  ) {\n    // If the account gets changed, verify the new account is unlocked\n    this.activeAccountSubject\n      .pipe(\n        concatMap(async (userId) => {\n          if (userId == null && this.activeAccountUnlockedSubject.getValue() == false) {\n            return;\n          } else if (userId == null) {\n            this.activeAccountUnlockedSubject.next(false);\n          }\n\n          // FIXME: This should be refactored into AuthService or a similar service,\n          //  as checking for the existance of the crypto key is a low level\n          //  implementation detail.\n          this.activeAccountUnlockedSubject.next((await this.getCryptoMasterKey()) != null);\n        })\n      )\n      .subscribe();\n  }\n\n  async init(): Promise<void> {\n    if (this.hasBeenInited) {\n      return;\n    }\n\n    if (await this.stateMigrationService.needsMigration()) {\n      await this.stateMigrationService.migrate();\n    }\n\n    await this.state().then(async (state) => {\n      if (state == null) {\n        await this.setState(new State<TGlobalState, TAccount>(this.createGlobals()));\n      } else {\n        this.isRecoveredSession = true;\n      }\n    });\n    await this.initAccountState();\n    this.hasBeenInited = true;\n  }\n\n  async initAccountState() {\n    if (this.isRecoveredSession) {\n      return;\n    }\n\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts =\n        (await this.storageService.get<string[]>(keys.authenticatedAccounts)) ?? [];\n      for (const i in state.authenticatedAccounts) {\n        if (i != null) {\n          await this.syncAccountFromDisk(state.authenticatedAccounts[i]);\n        }\n      }\n      const storedActiveUser = await this.storageService.get<string>(keys.activeUserId);\n      if (storedActiveUser != null) {\n        state.activeUserId = storedActiveUser;\n      }\n      await this.pushAccounts();\n      this.activeAccountSubject.next(state.activeUserId);\n\n      return state;\n    });\n  }\n\n  async syncAccountFromDisk(userId: string) {\n    if (userId == null) {\n      return;\n    }\n    await this.updateState(async (state) => {\n      if (state.accounts == null) {\n        state.accounts = {};\n      }\n      state.accounts[userId] = this.createAccount();\n      const diskAccount = await this.getAccountFromDisk({ userId: userId });\n      state.accounts[userId].profile = diskAccount.profile;\n      return state;\n    });\n  }\n\n  async addAccount(account: TAccount) {\n    account = await this.setAccountEnvironmentUrls(account);\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts.push(account.profile.userId);\n      await this.storageService.save(keys.authenticatedAccounts, state.authenticatedAccounts);\n      state.accounts[account.profile.userId] = account;\n      return state;\n    });\n    await this.scaffoldNewAccountStorage(account);\n    await this.setLastActive(new Date().getTime(), { userId: account.profile.userId });\n    await this.setActiveUser(account.profile.userId);\n    this.activeAccountSubject.next(account.profile.userId);\n  }\n\n  async setActiveUser(userId: string): Promise<void> {\n    this.clearDecryptedDataForActiveUser();\n    await this.updateState(async (state) => {\n      state.activeUserId = userId;\n      await this.storageService.save(keys.activeUserId, userId);\n      this.activeAccountSubject.next(state.activeUserId);\n      return state;\n    });\n\n    await this.pushAccounts();\n  }\n\n  async clean(options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultInMemoryOptions());\n    await this.deAuthenticateAccount(options.userId);\n    if (options.userId === (await this.state())?.activeUserId) {\n      await this.dynamicallySetActiveUser();\n    }\n\n    await this.removeAccountFromDisk(options?.userId);\n    this.removeAccountFromMemory(options?.userId);\n    await this.pushAccounts();\n  }\n\n  async getAccessToken(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.tokens?.accessToken;\n  }\n\n  async setAccessToken(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.tokens.accessToken = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getAddEditCipherInfo(options?: StorageOptions): Promise<AddEditCipherInfo> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.addEditCipherInfo;\n  }\n\n  async setAddEditCipherInfo(value: AddEditCipherInfo, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.addEditCipherInfo = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getAlwaysShowDock(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.alwaysShowDock ?? false\n    );\n  }\n\n  async setAlwaysShowDock(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.alwaysShowDock = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getApiKeyClientId(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.profile?.apiKeyClientId;\n  }\n\n  async setApiKeyClientId(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.profile.apiKeyClientId = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getApiKeyClientSecret(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.keys?.apiKeyClientSecret;\n  }\n\n  async setApiKeyClientSecret(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.keys.apiKeyClientSecret = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getAutoConfirmFingerPrints(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.autoConfirmFingerPrints ?? false\n    );\n  }\n\n  async setAutoConfirmFingerprints(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.autoConfirmFingerPrints = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getAutoFillOnPageLoadDefault(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.autoFillOnPageLoadDefault ?? true\n    );\n  }\n\n  async setAutoFillOnPageLoadDefault(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.autoFillOnPageLoadDefault = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricAwaitingAcceptance(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.biometricAwaitingAcceptance ?? false\n    );\n  }\n\n  async setBiometricAwaitingAcceptance(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricAwaitingAcceptance = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricFingerprintValidated(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.biometricFingerprintValidated ?? false\n    );\n  }\n\n  async setBiometricFingerprintValidated(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricFingerprintValidated = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricText(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.biometricText;\n  }\n\n  async setBiometricText(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.biometricText = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getBiometricUnlock(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.biometricUnlock ?? false\n    );\n  }\n\n  async setBiometricUnlock(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.biometricUnlock = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getCanAccessPremium(options?: StorageOptions): Promise<boolean> {\n    if (!(await this.getIsAuthenticated(options))) {\n      return false;\n    }\n\n    return (\n      (await this.getHasPremiumPersonally(options)) ||\n      (await this.getHasPremiumFromOrganization(options))\n    );\n  }\n\n  async getHasPremiumPersonally(options?: StorageOptions): Promise<boolean> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    return account?.profile?.hasPremiumPersonally;\n  }\n\n  async setHasPremiumPersonally(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.hasPremiumPersonally = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getHasPremiumFromOrganization(options?: StorageOptions): Promise<boolean> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n\n    if (account.profile?.hasPremiumFromOrganization) {\n      return true;\n    }\n\n    // TODO: older server versions won't send the hasPremiumFromOrganization flag, so we're keeping the old logic\n    // for backwards compatibility. It can be removed after everyone has upgraded.\n    const organizations = await this.getOrganizations(options);\n    if (organizations == null) {\n      return false;\n    }\n\n    for (const id of Object.keys(organizations)) {\n      const o = organizations[id];\n      if (o.enabled && o.usersGetPremium && !o.isProviderUser) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  async setHasPremiumFromOrganization(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.hasPremiumFromOrganization = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getClearClipboard(options?: StorageOptions): Promise<number> {\n    return (\n      (\n        await this.getAccount(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.settings?.clearClipboard ?? null\n    );\n  }\n\n  async setClearClipboard(value: number, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.clearClipboard = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getCollapsedGroupings(options?: StorageOptions): Promise<string[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.collapsedGroupings;\n  }\n\n  async setCollapsedGroupings(value: string[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.collapsedGroupings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getConvertAccountToKeyConnector(options?: StorageOptions): Promise<boolean> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.convertAccountToKeyConnector;\n  }\n\n  async setConvertAccountToKeyConnector(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.convertAccountToKeyConnector = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getCryptoMasterKey(options?: StorageOptions): Promise<SymmetricCryptoKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.cryptoMasterKey;\n  }\n\n  async setCryptoMasterKey(value: SymmetricCryptoKey, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.cryptoMasterKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n\n    if (options.userId == this.activeAccountSubject.getValue()) {\n      const nextValue = value != null;\n\n      // Avoid emitting if we are already unlocked\n      if (this.activeAccountUnlockedSubject.getValue() != nextValue) {\n        this.activeAccountUnlockedSubject.next(nextValue);\n      }\n    }\n  }\n\n  async getCryptoMasterKeyAuto(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.autoKey}`,\n      options\n    );\n  }\n\n  async setCryptoMasterKeyAuto(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"auto\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.autoKey, value, options);\n  }\n\n  async getCryptoMasterKeyB64(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options?.userId}${partialKeys.masterKey}`,\n      options\n    );\n  }\n\n  async setCryptoMasterKeyB64(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.masterKey, value, options);\n  }\n\n  async getCryptoMasterKeyBiometric(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(\n      `${options.userId}${partialKeys.biometricKey}`,\n      options\n    );\n  }\n\n  async hasCryptoMasterKeyBiometric(options?: StorageOptions): Promise<boolean> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return false;\n    }\n    return await this.secureStorageService.has(\n      `${options.userId}${partialKeys.biometricKey}`,\n      options\n    );\n  }\n\n  async setCryptoMasterKeyBiometric(value: BiometricKey, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(\n      this.reconcileOptions(options, { keySuffix: \"biometric\" }),\n      await this.defaultSecureStorageOptions()\n    );\n    if (options?.userId == null) {\n      return;\n    }\n    await this.saveSecureStorageKey(partialKeys.biometricKey, value, options);\n  }\n\n  @withPrototypeForArrayMembers(CipherView, CipherView.fromJSON)\n  async getDecryptedCiphers(options?: StorageOptions): Promise<CipherView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.ciphers?.decrypted;\n  }\n\n  async setDecryptedCiphers(value: CipherView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.ciphers.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(CollectionView)\n  async getDecryptedCollections(options?: StorageOptions): Promise<CollectionView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.collections?.decrypted;\n  }\n\n  async setDecryptedCollections(value: CollectionView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.collections.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedCryptoSymmetricKey(options?: StorageOptions): Promise<SymmetricCryptoKey> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return account?.keys?.cryptoSymmetricKey?.decrypted;\n  }\n\n  async setDecryptedCryptoSymmetricKey(\n    value: SymmetricCryptoKey,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.cryptoSymmetricKey.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedOrganizationKeys(\n    options?: StorageOptions\n  ): Promise<Map<string, SymmetricCryptoKey>> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return Utils.recordToMap(account?.keys?.organizationKeys?.decrypted);\n  }\n\n  async setDecryptedOrganizationKeys(\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.organizationKeys.decrypted = Utils.mapToRecord(value);\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(GeneratedPasswordHistory)\n  async getDecryptedPasswordGenerationHistory(\n    options?: StorageOptions\n  ): Promise<GeneratedPasswordHistory[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.passwordGenerationHistory?.decrypted;\n  }\n\n  async setDecryptedPasswordGenerationHistory(\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.passwordGenerationHistory.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedPinProtected(options?: StorageOptions): Promise<EncString> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.settings?.pinProtected?.decrypted;\n  }\n\n  async setDecryptedPinProtected(value: EncString, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.settings.pinProtected.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(Policy)\n  async getDecryptedPolicies(options?: StorageOptions): Promise<Policy[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.policies?.decrypted;\n  }\n\n  async setDecryptedPolicies(value: Policy[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.policies.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedPrivateKey(options?: StorageOptions): Promise<ArrayBuffer> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.keys?.privateKey.decrypted;\n  }\n\n  async setDecryptedPrivateKey(value: ArrayBuffer, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.privateKey.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDecryptedProviderKeys(\n    options?: StorageOptions\n  ): Promise<Map<string, SymmetricCryptoKey>> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    return Utils.recordToMap(account?.keys?.providerKeys?.decrypted);\n  }\n\n  async setDecryptedProviderKeys(\n    value: Map<string, SymmetricCryptoKey>,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.providerKeys.decrypted = Utils.mapToRecord(value);\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(SendView)\n  async getDecryptedSends(options?: StorageOptions): Promise<SendView[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.data?.sends?.decrypted;\n  }\n\n  async setDecryptedSends(value: SendView[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.data.sends.decrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getDefaultUriMatch(options?: StorageOptions): Promise<UriMatchType> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.defaultUriMatch;\n  }\n\n  async setDefaultUriMatch(value: UriMatchType, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.defaultUriMatch = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAddLoginNotification(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAddLoginNotification ?? false\n    );\n  }\n\n  async setDisableAddLoginNotification(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAddLoginNotification = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAutoBiometricsPrompt(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAutoBiometricsPrompt ?? false\n    );\n  }\n\n  async setDisableAutoBiometricsPrompt(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAutoBiometricsPrompt = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableAutoTotpCopy(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableAutoTotpCopy ?? false\n    );\n  }\n\n  async setDisableAutoTotpCopy(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableAutoTotpCopy = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableBadgeCounter(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableBadgeCounter ?? false\n    );\n  }\n\n  async setDisableBadgeCounter(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableBadgeCounter = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableChangedPasswordNotification(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableChangedPasswordNotification ?? false\n    );\n  }\n\n  async setDisableChangedPasswordNotification(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableChangedPasswordNotification = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableContextMenuItem(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableContextMenuItem ?? false\n    );\n  }\n\n  async setDisableContextMenuItem(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableContextMenuItem = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDisableFavicon(options?: StorageOptions): Promise<boolean> {\n    return (\n      (\n        await this.getGlobals(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.disableFavicon ?? false\n    );\n  }\n\n  async setDisableFavicon(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.disableFavicon = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getDisableGa(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.disableGa ?? false\n    );\n  }\n\n  async setDisableGa(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.disableGa = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDismissedAutofillCallout(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.dismissedAutoFillOnPageLoadCallout ?? false\n    );\n  }\n\n  async setDismissedAutofillCallout(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.dismissedAutoFillOnPageLoadCallout = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDontShowCardsCurrentTab(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.dontShowCardsCurrentTab ?? false\n    );\n  }\n\n  async setDontShowCardsCurrentTab(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.dontShowCardsCurrentTab = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDontShowIdentitiesCurrentTab(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.dontShowIdentitiesCurrentTab ?? false\n    );\n  }\n\n  async setDontShowIdentitiesCurrentTab(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.dontShowIdentitiesCurrentTab = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getDuckDuckGoSharedKey(options?: StorageOptions): Promise<string> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return null;\n    }\n    return await this.secureStorageService.get<string>(DDG_SHARED_KEY, options);\n  }\n\n  async setDuckDuckGoSharedKey(value: string, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultSecureStorageOptions());\n    if (options?.userId == null) {\n      return;\n    }\n    value == null\n      ? await this.secureStorageService.remove(DDG_SHARED_KEY, options)\n      : await this.secureStorageService.save(DDG_SHARED_KEY, value, options);\n  }\n\n  async getEmail(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.profile?.email;\n  }\n\n  async setEmail(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.profile.email = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getEmailVerified(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.profile.emailVerified ?? false\n    );\n  }\n\n  async setEmailVerified(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.emailVerified = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableAlwaysOnTop(options?: StorageOptions): Promise<boolean> {\n    const accountPreference = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.enableAlwaysOnTop;\n    const globalPreference = (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.enableAlwaysOnTop;\n    return accountPreference ?? globalPreference ?? false;\n  }\n\n  async setEnableAlwaysOnTop(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.enableAlwaysOnTop = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableAlwaysOnTop = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableAutoFillOnPageLoad(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.enableAutoFillOnPageLoad ?? false\n    );\n  }\n\n  async setEnableAutoFillOnPageLoad(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.enableAutoFillOnPageLoad = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableBrowserIntegration(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableBrowserIntegration ?? false\n    );\n  }\n\n  async setEnableBrowserIntegration(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableBrowserIntegration = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableBrowserIntegrationFingerprint(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableBrowserIntegrationFingerprint ?? false\n    );\n  }\n\n  async setEnableBrowserIntegrationFingerprint(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableBrowserIntegrationFingerprint = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableCloseToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableCloseToTray ?? false\n    );\n  }\n\n  async setEnableCloseToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableCloseToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableDuckDuckGoBrowserIntegration(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableDuckDuckGoBrowserIntegration ?? false\n    );\n  }\n\n  async setEnableDuckDuckGoBrowserIntegration(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableDuckDuckGoBrowserIntegration = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableFullWidth(options?: StorageOptions): Promise<boolean> {\n    return (\n      (\n        await this.getAccount(\n          this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n        )\n      )?.settings?.enableFullWidth ?? false\n    );\n  }\n\n  async setEnableFullWidth(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.enableFullWidth = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEnableMinimizeToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableMinimizeToTray ?? false\n    );\n  }\n\n  async setEnableMinimizeToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableMinimizeToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableStartToTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableStartToTray ?? false\n    );\n  }\n\n  async setEnableStartToTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableStartToTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEnableTray(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.enableTray ?? false\n    );\n  }\n\n  async setEnableTray(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.enableTray = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(CipherData)\n  async getEncryptedCiphers(options?: StorageOptions): Promise<{ [id: string]: CipherData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.ciphers?.encrypted;\n  }\n\n  async setEncryptedCiphers(\n    value: { [id: string]: CipherData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.ciphers.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(CollectionData)\n  async getEncryptedCollections(\n    options?: StorageOptions\n  ): Promise<{ [id: string]: CollectionData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.collections?.encrypted;\n  }\n\n  async setEncryptedCollections(\n    value: { [id: string]: CollectionData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.collections.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getEncryptedCryptoSymmetricKey(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys.cryptoSymmetricKey.encrypted;\n  }\n\n  async setEncryptedCryptoSymmetricKey(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.cryptoSymmetricKey.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(FolderData)\n  async getEncryptedFolders(options?: StorageOptions): Promise<{ [id: string]: FolderData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.folders?.encrypted;\n  }\n\n  async setEncryptedFolders(\n    value: { [id: string]: FolderData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.folders.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getEncryptedOrganizationKeys(\n    options?: StorageOptions\n  ): Promise<{ [orgId: string]: EncryptedOrganizationKeyData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys?.organizationKeys.encrypted;\n  }\n\n  async setEncryptedOrganizationKeys(\n    value: { [orgId: string]: EncryptedOrganizationKeyData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.organizationKeys.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(GeneratedPasswordHistory)\n  async getEncryptedPasswordGenerationHistory(\n    options?: StorageOptions\n  ): Promise<GeneratedPasswordHistory[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.passwordGenerationHistory?.encrypted;\n  }\n\n  async setEncryptedPasswordGenerationHistory(\n    value: GeneratedPasswordHistory[],\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.passwordGenerationHistory.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedPinProtected(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.pinProtected?.encrypted;\n  }\n\n  async setEncryptedPinProtected(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.pinProtected.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(PolicyData)\n  async getEncryptedPolicies(options?: StorageOptions): Promise<{ [id: string]: PolicyData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.policies?.encrypted;\n  }\n\n  async setEncryptedPolicies(\n    value: { [id: string]: PolicyData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.policies.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedPrivateKey(options?: StorageOptions): Promise<string> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    return account?.keys?.privateKey?.encrypted;\n  }\n\n  async setEncryptedPrivateKey(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.privateKey.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEncryptedProviderKeys(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.keys?.providerKeys?.encrypted;\n  }\n\n  async setEncryptedProviderKeys(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.keys.providerKeys.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(SendData)\n  async getEncryptedSends(options?: StorageOptions): Promise<{ [id: string]: SendData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.data?.sends.encrypted;\n  }\n\n  async setEncryptedSends(\n    value: { [id: string]: SendData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.data.sends.encrypted = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getEntityId(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.profile?.entityId;\n  }\n\n  async setEntityId(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.profile.entityId = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEntityType(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.profile?.entityType;\n  }\n\n  async setEntityType(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.profile.entityType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getEnvironmentUrls(options?: StorageOptions): Promise<EnvironmentUrls> {\n    if ((await this.state())?.activeUserId == null) {\n      return await this.getGlobalEnvironmentUrls(options);\n    }\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getAccount(options))?.settings?.environmentUrls ?? new EnvironmentUrls();\n  }\n\n  async setEnvironmentUrls(value: EnvironmentUrls, options?: StorageOptions): Promise<void> {\n    // Global values are set on each change and the current global settings are passed to any newly authed accounts.\n    // This is to allow setting environement values before an account is active, while still allowing individual accounts to have their own environments.\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.environmentUrls = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEquivalentDomains(options?: StorageOptions): Promise<string[][]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.equivalentDomains;\n  }\n\n  async setEquivalentDomains(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.equivalentDomains = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForArrayMembers(EventData)\n  async getEventCollection(options?: StorageOptions): Promise<EventData[]> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.eventCollection;\n  }\n\n  async setEventCollection(value: EventData[], options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.eventCollection = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getEverBeenUnlocked(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions())))\n        ?.profile?.everBeenUnlocked ?? false\n    );\n  }\n\n  async setEverBeenUnlocked(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.profile.everBeenUnlocked = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getForcePasswordResetReason(options?: StorageOptions): Promise<ForceResetPasswordReason> {\n    return (\n      (\n        await this.getAccount(\n          this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n        )\n      )?.profile?.forcePasswordResetReason ?? ForceResetPasswordReason.None\n    );\n  }\n\n  async setForcePasswordResetReason(\n    value: ForceResetPasswordReason,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.profile.forcePasswordResetReason = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getInstalledVersion(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.installedVersion;\n  }\n\n  async setInstalledVersion(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.installedVersion = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getIsAuthenticated(options?: StorageOptions): Promise<boolean> {\n    return (await this.getAccessToken(options)) != null && (await this.getUserId(options)) != null;\n  }\n\n  async getKdfConfig(options?: StorageOptions): Promise<KdfConfig> {\n    const iterations = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfIterations;\n    const memory = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfMemory;\n    const parallelism = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfParallelism;\n    return new KdfConfig(iterations, memory, parallelism);\n  }\n\n  async setKdfConfig(config: KdfConfig, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.kdfIterations = config.iterations;\n    account.profile.kdfMemory = config.memory;\n    account.profile.kdfParallelism = config.parallelism;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getKdfType(options?: StorageOptions): Promise<KdfType> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.kdfType;\n  }\n\n  async setKdfType(value: KdfType, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.kdfType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getKeyHash(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.keyHash;\n  }\n\n  async setKeyHash(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.keyHash = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getLastActive(options?: StorageOptions): Promise<number> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n\n    const accountActivity = await this.storageService.get<{ [userId: string]: number }>(\n      keys.accountActivity,\n      options\n    );\n\n    if (accountActivity == null || Object.keys(accountActivity).length < 1) {\n      return null;\n    }\n\n    return accountActivity[options.userId];\n  }\n\n  async setLastActive(value: number, options?: StorageOptions): Promise<void> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    if (options.userId == null) {\n      return;\n    }\n    const accountActivity =\n      (await this.storageService.get<{ [userId: string]: number }>(\n        keys.accountActivity,\n        options\n      )) ?? {};\n    accountActivity[options.userId] = value;\n    await this.storageService.save(keys.accountActivity, accountActivity, options);\n  }\n\n  async getLastSync(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.profile?.lastSync;\n  }\n\n  async setLastSync(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.profile.lastSync = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getLocalData(options?: StorageOptions): Promise<{ [cipherId: string]: LocalData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.data?.localData;\n  }\n\n  async setLocalData(\n    value: { [cipherId: string]: LocalData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.data.localData = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getLocale(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.locale;\n  }\n\n  async setLocale(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.locale = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getMainWindowSize(options?: StorageOptions): Promise<number> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.mainWindowSize;\n  }\n\n  async setMainWindowSize(value: number, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    globals.mainWindowSize = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getMinimizeOnCopyToClipboard(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.settings?.minimizeOnCopyToClipboard ?? false\n    );\n  }\n\n  async setMinimizeOnCopyToClipboard(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.minimizeOnCopyToClipboard = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getNeverDomains(options?: StorageOptions): Promise<{ [id: string]: any }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.neverDomains;\n  }\n\n  async setNeverDomains(value: { [id: string]: any }, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.neverDomains = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getNoAutoPromptBiometricsText(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.noAutoPromptBiometricsText;\n  }\n\n  async setNoAutoPromptBiometricsText(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.noAutoPromptBiometricsText = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getOpenAtLogin(options?: StorageOptions): Promise<boolean> {\n    return (\n      (await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions())))\n        ?.openAtLogin ?? false\n    );\n  }\n\n  async setOpenAtLogin(value: boolean, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.openAtLogin = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getOrganizationInvitation(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.organizationInvitation;\n  }\n\n  async setOrganizationInvitation(value: any, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    globals.organizationInvitation = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  async getOrganizations(options?: StorageOptions): Promise<{ [id: string]: OrganizationData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.organizations;\n  }\n\n  /**\n   * @deprecated Do not call this directly, use OrganizationService\n   */\n  async setOrganizations(\n    value: { [id: string]: OrganizationData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.organizations = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getPasswordGenerationOptions(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.passwordGenerationOptions;\n  }\n\n  async setPasswordGenerationOptions(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.passwordGenerationOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getUsernameGenerationOptions(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.usernameGenerationOptions;\n  }\n\n  async setUsernameGenerationOptions(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.usernameGenerationOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getGeneratorOptions(options?: StorageOptions): Promise<any> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.generatorOptions;\n  }\n\n  async setGeneratorOptions(value: any, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.generatorOptions = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getProtectedPin(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.settings?.protectedPin;\n  }\n\n  async setProtectedPin(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.settings.protectedPin = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  @withPrototypeForObjectValues(ProviderData)\n  async getProviders(options?: StorageOptions): Promise<{ [id: string]: ProviderData }> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.data?.providers;\n  }\n\n  async setProviders(\n    value: { [id: string]: ProviderData },\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.data.providers = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getPublicKey(options?: StorageOptions): Promise<ArrayBuffer> {\n    const keys = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.keys;\n    return keys?.publicKey;\n  }\n\n  async setPublicKey(value: ArrayBuffer, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.keys.publicKey = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getRefreshToken(options?: StorageOptions): Promise<string> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    return (await this.getAccount(options))?.tokens?.refreshToken;\n  }\n\n  async setRefreshToken(value: string, options?: StorageOptions): Promise<void> {\n    options = await this.getTimeoutBasedStorageOptions(options);\n    const account = await this.getAccount(options);\n    account.tokens.refreshToken = value;\n    await this.saveAccount(account, options);\n  }\n\n  async getRememberedEmail(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.rememberedEmail;\n  }\n\n  async setRememberedEmail(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.rememberedEmail = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getSecurityStamp(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.tokens?.securityStamp;\n  }\n\n  async setSecurityStamp(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.tokens.securityStamp = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getSettings(options?: StorageOptions): Promise<AccountSettingsSettings> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions()))\n    )?.settings?.settings;\n  }\n\n  async setSettings(value: AccountSettingsSettings, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n    account.settings.settings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskMemoryOptions())\n    );\n  }\n\n  async getSsoCodeVerifier(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.ssoCodeVerifier;\n  }\n\n  async setSsoCodeVerifier(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.ssoCodeVerifier = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getSsoOrgIdentifier(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.ssoOrganizationIdentifier;\n  }\n\n  async setSsoOrganizationIdentifier(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.ssoOrganizationIdentifier = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getSsoState(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.ssoState;\n  }\n\n  async setSsoState(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.ssoState = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getTheme(options?: StorageOptions): Promise<ThemeType> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.theme;\n  }\n\n  async setTheme(value: ThemeType, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.theme = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getTwoFactorToken(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.twoFactorToken;\n  }\n\n  async setTwoFactorToken(value: string, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    globals.twoFactorToken = value;\n    await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getUserId(options?: StorageOptions): Promise<string> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.userId;\n  }\n\n  async getUsesKeyConnector(options?: StorageOptions): Promise<boolean> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskOptions()))\n    )?.profile?.usesKeyConnector;\n  }\n\n  async setUsesKeyConnector(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    account.profile.usesKeyConnector = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async getVaultTimeout(options?: StorageOptions): Promise<number> {\n    const accountVaultTimeout = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.vaultTimeout;\n    return accountVaultTimeout;\n  }\n\n  async setVaultTimeout(value: number, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.vaultTimeout = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getVaultTimeoutAction(options?: StorageOptions): Promise<string> {\n    const accountVaultTimeoutAction = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.vaultTimeoutAction;\n    const globalVaultTimeoutAction = (\n      await this.getGlobals(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.vaultTimeoutAction;\n    return accountVaultTimeoutAction ?? globalVaultTimeoutAction;\n  }\n\n  async setVaultTimeoutAction(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.vaultTimeoutAction = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getApproveLoginRequests(options?: StorageOptions): Promise<boolean> {\n    const approveLoginRequests = (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.approveLoginRequests;\n    return approveLoginRequests;\n  }\n\n  async setApproveLoginRequests(value: boolean, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.approveLoginRequests = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getStateVersion(): Promise<number> {\n    return (await this.getGlobals(await this.defaultOnDiskLocalOptions())).stateVersion ?? 1;\n  }\n\n  async setStateVersion(value: number): Promise<void> {\n    const globals = await this.getGlobals(await this.defaultOnDiskOptions());\n    globals.stateVersion = value;\n    await this.saveGlobals(globals, await this.defaultOnDiskOptions());\n  }\n\n  async getWindow(): Promise<WindowState> {\n    const globals = await this.getGlobals(await this.defaultOnDiskOptions());\n    return globals?.window != null && Object.keys(globals.window).length > 0\n      ? globals.window\n      : new WindowState();\n  }\n\n  async setWindow(value: WindowState, options?: StorageOptions): Promise<void> {\n    const globals = await this.getGlobals(\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n    globals.window = value;\n    return await this.saveGlobals(\n      globals,\n      this.reconcileOptions(options, await this.defaultOnDiskOptions())\n    );\n  }\n\n  async setServerConfig(value: ServerConfigData, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.serverConfig = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getServerConfig(options: StorageOptions): Promise<ServerConfigData> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.serverConfig;\n  }\n\n  async getAvatarColor(options?: StorageOptions): Promise<string | null | undefined> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.avatarColor;\n  }\n\n  async setAvatarColor(value: string, options?: StorageOptions): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.avatarColor = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getActivateAutoFillOnPageLoadFromPolicy(options?: StorageOptions): Promise<boolean> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.activateAutoFillOnPageLoadFromPolicy;\n  }\n\n  async setActivateAutoFillOnPageLoadFromPolicy(\n    value: boolean,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.activateAutoFillOnPageLoadFromPolicy = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  async getSMOnboardingTasks(\n    options?: StorageOptions\n  ): Promise<Record<string, Record<string, boolean>>> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultOnDiskLocalOptions()))\n    )?.settings?.smOnboardingTasks;\n  }\n\n  async setSMOnboardingTasks(\n    value: Record<string, Record<string, boolean>>,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n    account.settings.smOnboardingTasks = value;\n    return await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  protected async getGlobals(options: StorageOptions): Promise<TGlobalState> {\n    let globals: TGlobalState;\n    if (this.useMemory(options.storageLocation)) {\n      globals = await this.getGlobalsFromMemory();\n    }\n\n    if (this.useDisk && globals == null) {\n      globals = await this.getGlobalsFromDisk(options);\n    }\n\n    return globals ?? this.createGlobals();\n  }\n\n  protected async saveGlobals(globals: TGlobalState, options: StorageOptions) {\n    return this.useMemory(options.storageLocation)\n      ? this.saveGlobalsToMemory(globals)\n      : await this.saveGlobalsToDisk(globals, options);\n  }\n\n  protected async getGlobalsFromMemory(): Promise<TGlobalState> {\n    return (await this.state()).globals;\n  }\n\n  protected async getGlobalsFromDisk(options: StorageOptions): Promise<TGlobalState> {\n    return await this.storageService.get<TGlobalState>(keys.global, options);\n  }\n\n  protected async saveGlobalsToMemory(globals: TGlobalState): Promise<void> {\n    await this.updateState(async (state) => {\n      state.globals = globals;\n      return state;\n    });\n  }\n\n  protected async saveGlobalsToDisk(globals: TGlobalState, options: StorageOptions): Promise<void> {\n    if (options.useSecureStorage) {\n      await this.secureStorageService.save(keys.global, globals, options);\n    } else {\n      await this.storageService.save(keys.global, globals, options);\n    }\n  }\n\n  protected async getAccount(options: StorageOptions): Promise<TAccount> {\n    try {\n      let account: TAccount;\n      if (this.useMemory(options.storageLocation)) {\n        account = await this.getAccountFromMemory(options);\n      }\n\n      if (this.useDisk(options.storageLocation) && account == null) {\n        account = await this.getAccountFromDisk(options);\n      }\n\n      return account;\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  protected async getAccountFromMemory(options: StorageOptions): Promise<TAccount> {\n    return await this.state().then(async (state) => {\n      if (state.accounts == null) {\n        return null;\n      }\n      return state.accounts[await this.getUserIdFromMemory(options)];\n    });\n  }\n\n  protected async getUserIdFromMemory(options: StorageOptions): Promise<string> {\n    return await this.state().then((state) => {\n      return options?.userId != null\n        ? state.accounts[options.userId]?.profile?.userId\n        : state.activeUserId;\n    });\n  }\n\n  protected async getAccountFromDisk(options: StorageOptions): Promise<TAccount> {\n    if (options?.userId == null && (await this.state())?.activeUserId == null) {\n      return null;\n    }\n\n    if (this.useAccountCache) {\n      const cachedAccount = this.accountDiskCache.value[options.userId];\n      if (cachedAccount != null) {\n        return cachedAccount;\n      }\n    }\n\n    const account = options?.useSecureStorage\n      ? (await this.secureStorageService.get<TAccount>(options.userId, options)) ??\n        (await this.storageService.get<TAccount>(\n          options.userId,\n          this.reconcileOptions(options, { htmlStorageLocation: HtmlStorageLocation.Local })\n        ))\n      : await this.storageService.get<TAccount>(options.userId, options);\n\n    this.setDiskCache(options.userId, account);\n    return account;\n  }\n\n  protected useMemory(storageLocation: StorageLocation) {\n    return storageLocation === StorageLocation.Memory || storageLocation === StorageLocation.Both;\n  }\n\n  protected useDisk(storageLocation: StorageLocation) {\n    return storageLocation === StorageLocation.Disk || storageLocation === StorageLocation.Both;\n  }\n\n  protected async saveAccount(\n    account: TAccount,\n    options: StorageOptions = {\n      storageLocation: StorageLocation.Both,\n      useSecureStorage: false,\n    }\n  ) {\n    return this.useMemory(options.storageLocation)\n      ? await this.saveAccountToMemory(account)\n      : await this.saveAccountToDisk(account, options);\n  }\n\n  protected async saveAccountToDisk(account: TAccount, options: StorageOptions): Promise<void> {\n    const storageLocation = options.useSecureStorage\n      ? this.secureStorageService\n      : this.storageService;\n\n    await storageLocation.save(`${options.userId}`, account, options);\n\n    this.deleteDiskCache(options.userId);\n  }\n\n  protected async saveAccountToMemory(account: TAccount): Promise<void> {\n    if (this.getAccountFromMemory({ userId: account.profile.userId }) !== null) {\n      await this.updateState((state) => {\n        return new Promise((resolve) => {\n          state.accounts[account.profile.userId] = account;\n          resolve(state);\n        });\n      });\n    }\n    await this.pushAccounts();\n  }\n\n  protected async scaffoldNewAccountStorage(account: TAccount): Promise<void> {\n    // We don't want to manipulate the referenced in memory account\n    const deepClone = JSON.parse(JSON.stringify(account));\n    await this.scaffoldNewAccountLocalStorage(deepClone);\n    await this.scaffoldNewAccountSessionStorage(deepClone);\n    await this.scaffoldNewAccountMemoryStorage(deepClone);\n  }\n\n  // TODO: There is a tech debt item for splitting up these methods - only Web uses multiple storage locations in its storageService.\n  // For now these methods exist with some redundancy to facilitate this special web requirement.\n  protected async scaffoldNewAccountLocalStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskLocalOptions()\n      )\n    );\n    // EnvironmentUrls are set before authenticating and should override whatever is stored from any previous session\n    const environmentUrls = account.settings.environmentUrls;\n    if (storedAccount?.settings != null) {\n      account.settings = storedAccount.settings;\n    } else if (await this.storageService.has(keys.tempAccountSettings)) {\n      account.settings = await this.storageService.get<AccountSettings>(keys.tempAccountSettings);\n      await this.storageService.remove(keys.tempAccountSettings);\n    }\n    account.settings.environmentUrls = environmentUrls;\n    if (\n      account.settings.vaultTimeoutAction === VaultTimeoutAction.LogOut &&\n      account.settings.vaultTimeout != null\n    ) {\n      account.tokens.accessToken = null;\n      account.tokens.refreshToken = null;\n      account.profile.apiKeyClientId = null;\n      account.keys.apiKeyClientSecret = null;\n    }\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskLocalOptions()\n      )\n    );\n  }\n\n  protected async scaffoldNewAccountMemoryStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskMemoryOptions()\n      )\n    );\n    if (storedAccount?.settings != null) {\n      storedAccount.settings.environmentUrls = account.settings.environmentUrls;\n      account.settings = storedAccount.settings;\n    }\n    await this.storageService.save(\n      account.profile.userId,\n      account,\n      await this.defaultOnDiskMemoryOptions()\n    );\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(\n        { userId: account.profile.userId },\n        await this.defaultOnDiskMemoryOptions()\n      )\n    );\n  }\n\n  protected async scaffoldNewAccountSessionStorage(account: TAccount): Promise<void> {\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: account.profile.userId }, await this.defaultOnDiskOptions())\n    );\n    if (storedAccount?.settings != null) {\n      storedAccount.settings.environmentUrls = account.settings.environmentUrls;\n      account.settings = storedAccount.settings;\n    }\n    await this.storageService.save(\n      account.profile.userId,\n      account,\n      await this.defaultOnDiskMemoryOptions()\n    );\n    await this.saveAccount(\n      account,\n      this.reconcileOptions({ userId: account.profile.userId }, await this.defaultOnDiskOptions())\n    );\n  }\n  //\n\n  protected async pushAccounts(): Promise<void> {\n    await this.pruneInMemoryAccounts();\n    await this.state().then((state) => {\n      if (state.accounts == null || Object.keys(state.accounts).length < 1) {\n        this.accountsSubject.next({});\n        return;\n      }\n\n      this.accountsSubject.next(state.accounts);\n    });\n  }\n\n  protected reconcileOptions(\n    requestedOptions: StorageOptions,\n    defaultOptions: StorageOptions\n  ): StorageOptions {\n    if (requestedOptions == null) {\n      return defaultOptions;\n    }\n    requestedOptions.userId = requestedOptions?.userId ?? defaultOptions.userId;\n    requestedOptions.storageLocation =\n      requestedOptions?.storageLocation ?? defaultOptions.storageLocation;\n    requestedOptions.useSecureStorage =\n      requestedOptions?.useSecureStorage ?? defaultOptions.useSecureStorage;\n    requestedOptions.htmlStorageLocation =\n      requestedOptions?.htmlStorageLocation ?? defaultOptions.htmlStorageLocation;\n    requestedOptions.keySuffix = requestedOptions?.keySuffix ?? defaultOptions.keySuffix;\n    return requestedOptions;\n  }\n\n  protected async defaultInMemoryOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Memory,\n      userId: (await this.state()).activeUserId,\n    };\n  }\n\n  protected async defaultOnDiskOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Session,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultOnDiskLocalOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Local,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultOnDiskMemoryOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      htmlStorageLocation: HtmlStorageLocation.Memory,\n      userId: (await this.state())?.activeUserId ?? (await this.getUserId()),\n      useSecureStorage: false,\n    };\n  }\n\n  protected async defaultSecureStorageOptions(): Promise<StorageOptions> {\n    return {\n      storageLocation: StorageLocation.Disk,\n      useSecureStorage: true,\n      userId: (await this.state())?.activeUserId ?? (await this.getActiveUserIdFromStorage()),\n    };\n  }\n\n  protected async getActiveUserIdFromStorage(): Promise<string> {\n    return await this.storageService.get<string>(keys.activeUserId);\n  }\n\n  protected async removeAccountFromLocalStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskLocalOptions())\n    );\n    await this.saveAccount(\n      this.resetAccount(storedAccount),\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskLocalOptions())\n    );\n  }\n\n  protected async removeAccountFromSessionStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    const storedAccount = await this.getAccount(\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskOptions())\n    );\n    await this.saveAccount(\n      this.resetAccount(storedAccount),\n      this.reconcileOptions({ userId: userId }, await this.defaultOnDiskOptions())\n    );\n  }\n\n  protected async removeAccountFromSecureStorage(userId: string = null): Promise<void> {\n    userId = userId ?? (await this.state())?.activeUserId;\n    await this.setCryptoMasterKeyAuto(null, { userId: userId });\n    await this.setCryptoMasterKeyBiometric(null, { userId: userId });\n    await this.setCryptoMasterKeyB64(null, { userId: userId });\n  }\n\n  protected async removeAccountFromMemory(userId: string = null): Promise<void> {\n    await this.updateState(async (state) => {\n      userId = userId ?? state.activeUserId;\n      delete state.accounts[userId];\n\n      this.deleteDiskCache(userId);\n\n      return state;\n    });\n  }\n\n  protected async pruneInMemoryAccounts() {\n    // We preserve settings for logged out accounts, but we don't want to consider them when thinking about active account state\n    for (const userId in (await this.state())?.accounts) {\n      if (!(await this.getIsAuthenticated({ userId: userId }))) {\n        await this.removeAccountFromMemory(userId);\n      }\n    }\n  }\n\n  // settings persist even on reset, and are not effected by this method\n  protected resetAccount(account: TAccount) {\n    const persistentAccountInformation = { settings: account.settings };\n    return Object.assign(this.createAccount(), persistentAccountInformation);\n  }\n\n  protected async setAccountEnvironmentUrls(account: TAccount): Promise<TAccount> {\n    account.settings.environmentUrls = await this.getGlobalEnvironmentUrls();\n    return account;\n  }\n\n  protected async getGlobalEnvironmentUrls(options?: StorageOptions): Promise<EnvironmentUrls> {\n    options = this.reconcileOptions(options, await this.defaultOnDiskOptions());\n    return (await this.getGlobals(options)).environmentUrls ?? new EnvironmentUrls();\n  }\n\n  protected async clearDecryptedDataForActiveUser(): Promise<void> {\n    await this.updateState(async (state) => {\n      const userId = state?.activeUserId;\n      if (userId != null && state?.accounts[userId]?.data != null) {\n        state.accounts[userId].data = new AccountData();\n      }\n\n      return state;\n    });\n  }\n\n  protected createAccount(init: Partial<TAccount> = null): TAccount {\n    return this.stateFactory.createAccount(init);\n  }\n\n  protected createGlobals(init: Partial<TGlobalState> = null): TGlobalState {\n    return this.stateFactory.createGlobal(init);\n  }\n\n  protected async deAuthenticateAccount(userId: string): Promise<void> {\n    await this.setAccessToken(null, { userId: userId });\n    await this.setLastActive(null, { userId: userId });\n    await this.updateState(async (state) => {\n      state.authenticatedAccounts = state.authenticatedAccounts.filter((id) => id !== userId);\n\n      await this.storageService.save(keys.authenticatedAccounts, state.authenticatedAccounts);\n\n      return state;\n    });\n  }\n\n  protected async removeAccountFromDisk(userId: string) {\n    await this.removeAccountFromSessionStorage(userId);\n    await this.removeAccountFromLocalStorage(userId);\n    await this.removeAccountFromSecureStorage(userId);\n  }\n\n  protected async dynamicallySetActiveUser() {\n    const accounts = (await this.state())?.accounts;\n    if (accounts == null || Object.keys(accounts).length < 1) {\n      await this.setActiveUser(null);\n      return;\n    }\n    for (const userId in accounts) {\n      if (userId == null) {\n        continue;\n      }\n      if (await this.getIsAuthenticated({ userId: userId })) {\n        await this.setActiveUser(userId);\n        break;\n      }\n      await this.setActiveUser(null);\n    }\n  }\n\n  private async getTimeoutBasedStorageOptions(options?: StorageOptions): Promise<StorageOptions> {\n    const timeoutAction = await this.getVaultTimeoutAction({ userId: options?.userId });\n    const timeout = await this.getVaultTimeout({ userId: options?.userId });\n    const defaultOptions =\n      timeoutAction === VaultTimeoutAction.LogOut && timeout != null\n        ? await this.defaultInMemoryOptions()\n        : await this.defaultOnDiskOptions();\n    return this.reconcileOptions(options, defaultOptions);\n  }\n\n  private async saveSecureStorageKey<T extends JsonValue>(\n    key: string,\n    value: T,\n    options?: StorageOptions\n  ) {\n    return value == null\n      ? await this.secureStorageService.remove(`${options.userId}${key}`, options)\n      : await this.secureStorageService.save(`${options.userId}${key}`, value, options);\n  }\n\n  protected async state(): Promise<State<TGlobalState, TAccount>> {\n    const state = await this.memoryStorageService.get<State<TGlobalState, TAccount>>(keys.state, {\n      deserializer: (s) => State.fromJSON(s, this.accountDeserializer),\n    });\n    return state;\n  }\n\n  private async setState(state: State<TGlobalState, TAccount>): Promise<void> {\n    await this.memoryStorageService.save(keys.state, state);\n  }\n\n  protected async updateState(\n    stateUpdater: (state: State<TGlobalState, TAccount>) => Promise<State<TGlobalState, TAccount>>\n  ) {\n    await this.state().then(async (state) => {\n      const updatedState = await stateUpdater(state);\n      if (updatedState == null) {\n        throw new Error(\"Attempted to update state to null value\");\n      }\n\n      await this.setState(updatedState);\n    });\n  }\n\n  private setDiskCache(key: string, value: TAccount, options?: StorageOptions) {\n    if (this.useAccountCache) {\n      this.accountDiskCache.value[key] = value;\n      this.accountDiskCache.next(this.accountDiskCache.value);\n    }\n  }\n\n  private deleteDiskCache(key: string) {\n    if (this.useAccountCache) {\n      delete this.accountDiskCache.value[key];\n      this.accountDiskCache.next(this.accountDiskCache.value);\n    }\n  }\n}\n\nfunction withPrototypeForArrayMembers<T>(\n  memberConstructor: new (...args: any[]) => T,\n  memberConverter: (input: any) => T = (i) => i\n): (\n  target: any,\n  propertyKey: string | symbol,\n  descriptor: PropertyDescriptor\n) => { value: (...args: any[]) => Promise<T[]> } {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod = descriptor.value;\n\n    return {\n      value: function (...args: any[]) {\n        const originalResult: Promise<any[]> = originalMethod.apply(this, args);\n\n        if (!Utils.isPromise(originalResult)) {\n          throw new Error(\n            `Error applying prototype to stored value -- result is not a promise for method ${String(\n              propertyKey\n            )}`\n          );\n        }\n\n        return originalResult.then((result) => {\n          if (result == null) {\n            return null;\n          } else if (!(result instanceof Array)) {\n            throw new Error(\n              `Attempted to retrieve non array type from state as an array for method ${String(\n                propertyKey\n              )}`\n            );\n          } else {\n            return result.map((r) => {\n              return r == null ||\n                r.constructor.name === memberConstructor.prototype.constructor.name\n                ? r\n                : memberConverter(\n                    Object.create(memberConstructor.prototype, Object.getOwnPropertyDescriptors(r))\n                  );\n            });\n          }\n        });\n      },\n    };\n  };\n}\n\nfunction withPrototypeForObjectValues<T>(\n  valuesConstructor: new (...args: any[]) => T,\n  valuesConverter: (input: any) => T = (i) => i\n): (\n  target: any,\n  propertyKey: string | symbol,\n  descriptor: PropertyDescriptor\n) => { value: (...args: any[]) => Promise<{ [key: string]: T }> } {\n  return (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) => {\n    const originalMethod = descriptor.value;\n\n    return {\n      value: function (...args: any[]) {\n        const originalResult: Promise<{ [key: string]: T }> = originalMethod.apply(this, args);\n\n        if (!Utils.isPromise(originalResult)) {\n          throw new Error(\n            `Error applying prototype to stored value -- result is not a promise for method ${String(\n              propertyKey\n            )}`\n          );\n        }\n\n        return originalResult.then((result) => {\n          if (result == null) {\n            return null;\n          } else {\n            for (const [key, val] of Object.entries(result)) {\n              result[key] =\n                val == null || val.constructor.name === valuesConstructor.prototype.constructor.name\n                  ? valuesConverter(val)\n                  : valuesConverter(\n                      Object.create(\n                        valuesConstructor.prototype,\n                        Object.getOwnPropertyDescriptors(val)\n                      )\n                    );\n            }\n\n            return result as { [key: string]: T };\n          }\n        });\n      },\n    };\n  };\n}\n","import { AbstractStorageService } from \"../abstractions/storage.service\";\nimport { CollectionData } from \"../admin-console/models/data/collection.data\";\nimport { OrganizationData } from \"../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../admin-console/models/data/provider.data\";\nimport { EnvironmentUrls } from \"../auth/models/domain/environment-urls\";\nimport { TokenService } from \"../auth/services/token.service\";\nimport { HtmlStorageLocation, KdfType, StateVersion, ThemeType } from \"../enums\";\nimport { StateFactory } from \"../factories/stateFactory\";\nimport { EventData } from \"../models/data/event.data\";\nimport {\n  Account,\n  AccountSettings,\n  AccountSettingsSettings,\n  EncryptionPair,\n} from \"../models/domain/account\";\nimport { EncString } from \"../models/domain/enc-string\";\nimport { GlobalState } from \"../models/domain/global-state\";\nimport { StorageOptions } from \"../models/domain/storage-options\";\nimport { GeneratedPasswordHistory } from \"../tools/generator/password\";\nimport { SendData } from \"../tools/send/models/data/send.data\";\nimport { CipherData } from \"../vault/models/data/cipher.data\";\nimport { FolderData } from \"../vault/models/data/folder.data\";\n\n// Originally (before January 2022) storage was handled as a flat key/value pair store.\n// With the move to a typed object for state storage these keys should no longer be in use anywhere outside of this migration.\nconst v1Keys: { [key: string]: string } = {\n  accessToken: \"accessToken\",\n  alwaysShowDock: \"alwaysShowDock\",\n  autoConfirmFingerprints: \"autoConfirmFingerprints\",\n  autoFillOnPageLoadDefault: \"autoFillOnPageLoadDefault\",\n  biometricAwaitingAcceptance: \"biometricAwaitingAcceptance\",\n  biometricFingerprintValidated: \"biometricFingerprintValidated\",\n  biometricText: \"biometricText\",\n  biometricUnlock: \"biometric\",\n  clearClipboard: \"clearClipboardKey\",\n  clientId: \"apikey_clientId\",\n  clientSecret: \"apikey_clientSecret\",\n  collapsedGroupings: \"collapsedGroupings\",\n  convertAccountToKeyConnector: \"convertAccountToKeyConnector\",\n  defaultUriMatch: \"defaultUriMatch\",\n  disableAddLoginNotification: \"disableAddLoginNotification\",\n  disableAutoBiometricsPrompt: \"noAutoPromptBiometrics\",\n  disableAutoTotpCopy: \"disableAutoTotpCopy\",\n  disableBadgeCounter: \"disableBadgeCounter\",\n  disableChangedPasswordNotification: \"disableChangedPasswordNotification\",\n  disableContextMenuItem: \"disableContextMenuItem\",\n  disableFavicon: \"disableFavicon\",\n  disableGa: \"disableGa\",\n  dontShowCardsCurrentTab: \"dontShowCardsCurrentTab\",\n  dontShowIdentitiesCurrentTab: \"dontShowIdentitiesCurrentTab\",\n  emailVerified: \"emailVerified\",\n  enableAlwaysOnTop: \"enableAlwaysOnTopKey\",\n  enableAutoFillOnPageLoad: \"enableAutoFillOnPageLoad\",\n  enableBiometric: \"enabledBiometric\",\n  enableBrowserIntegration: \"enableBrowserIntegration\",\n  enableBrowserIntegrationFingerprint: \"enableBrowserIntegrationFingerprint\",\n  enableCloseToTray: \"enableCloseToTray\",\n  enableFullWidth: \"enableFullWidth\",\n  enableMinimizeToTray: \"enableMinimizeToTray\",\n  enableStartToTray: \"enableStartToTrayKey\",\n  enableTray: \"enableTray\",\n  encKey: \"encKey\", // Generated Symmetric Key\n  encOrgKeys: \"encOrgKeys\",\n  encPrivate: \"encPrivateKey\",\n  encProviderKeys: \"encProviderKeys\",\n  entityId: \"entityId\",\n  entityType: \"entityType\",\n  environmentUrls: \"environmentUrls\",\n  equivalentDomains: \"equivalentDomains\",\n  eventCollection: \"eventCollection\",\n  forcePasswordReset: \"forcePasswordReset\",\n  history: \"generatedPasswordHistory\",\n  installedVersion: \"installedVersion\",\n  kdf: \"kdf\",\n  kdfIterations: \"kdfIterations\",\n  key: \"key\", // Master Key\n  keyHash: \"keyHash\",\n  lastActive: \"lastActive\",\n  localData: \"sitesLocalData\",\n  locale: \"locale\",\n  mainWindowSize: \"mainWindowSize\",\n  minimizeOnCopyToClipboard: \"minimizeOnCopyToClipboardKey\",\n  neverDomains: \"neverDomains\",\n  noAutoPromptBiometricsText: \"noAutoPromptBiometricsText\",\n  openAtLogin: \"openAtLogin\",\n  passwordGenerationOptions: \"passwordGenerationOptions\",\n  pinProtected: \"pinProtectedKey\",\n  protectedPin: \"protectedPin\",\n  refreshToken: \"refreshToken\",\n  ssoCodeVerifier: \"ssoCodeVerifier\",\n  ssoIdentifier: \"ssoOrgIdentifier\",\n  ssoState: \"ssoState\",\n  stamp: \"securityStamp\",\n  theme: \"theme\",\n  userEmail: \"userEmail\",\n  userId: \"userId\",\n  usesConnector: \"usesKeyConnector\",\n  vaultTimeoutAction: \"vaultTimeoutAction\",\n  vaultTimeout: \"lockOption\",\n  rememberedEmail: \"rememberedEmail\",\n};\n\nconst v1KeyPrefixes: { [key: string]: string } = {\n  ciphers: \"ciphers_\",\n  collections: \"collections_\",\n  folders: \"folders_\",\n  lastSync: \"lastSync_\",\n  policies: \"policies_\",\n  twoFactorToken: \"twoFactorToken_\",\n  organizations: \"organizations_\",\n  providers: \"providers_\",\n  sends: \"sends_\",\n  settings: \"settings_\",\n};\n\nconst keys = {\n  global: \"global\",\n  authenticatedAccounts: \"authenticatedAccounts\",\n  activeUserId: \"activeUserId\",\n  tempAccountSettings: \"tempAccountSettings\", // used to hold account specific settings (i.e clear clipboard) between initial migration and first account authentication\n  accountActivity: \"accountActivity\",\n};\n\nconst partialKeys = {\n  autoKey: \"_masterkey_auto\",\n  biometricKey: \"_masterkey_biometric\",\n  masterKey: \"_masterkey\",\n};\n\nexport class StateMigrationService<\n  TGlobalState extends GlobalState = GlobalState,\n  TAccount extends Account = Account\n> {\n  constructor(\n    protected storageService: AbstractStorageService,\n    protected secureStorageService: AbstractStorageService,\n    protected stateFactory: StateFactory<TGlobalState, TAccount>\n  ) {}\n\n  async needsMigration(): Promise<boolean> {\n    const currentStateVersion = await this.getCurrentStateVersion();\n    return currentStateVersion == null || currentStateVersion < StateVersion.Latest;\n  }\n\n  async migrate(): Promise<void> {\n    let currentStateVersion = await this.getCurrentStateVersion();\n    while (currentStateVersion < StateVersion.Latest) {\n      switch (currentStateVersion) {\n        case StateVersion.One:\n          await this.migrateStateFrom1To2();\n          break;\n        case StateVersion.Two:\n          await this.migrateStateFrom2To3();\n          break;\n        case StateVersion.Three:\n          await this.migrateStateFrom3To4();\n          break;\n        case StateVersion.Four: {\n          const authenticatedAccounts = await this.getAuthenticatedAccounts();\n          for (const account of authenticatedAccounts) {\n            const migratedAccount = await this.migrateAccountFrom4To5(account);\n            await this.set(account.profile.userId, migratedAccount);\n          }\n          await this.setCurrentStateVersion(StateVersion.Five);\n          break;\n        }\n        case StateVersion.Five: {\n          const authenticatedAccounts = await this.getAuthenticatedAccounts();\n          for (const account of authenticatedAccounts) {\n            const migratedAccount = await this.migrateAccountFrom5To6(account);\n            await this.set(account.profile.userId, migratedAccount);\n          }\n          await this.setCurrentStateVersion(StateVersion.Six);\n          break;\n        }\n        case StateVersion.Six: {\n          const authenticatedAccounts = await this.getAuthenticatedAccounts();\n          const globals = (await this.getGlobals()) as any;\n          for (const account of authenticatedAccounts) {\n            const migratedAccount = await this.migrateAccountFrom6To7(\n              globals?.noAutoPromptBiometrics,\n              account\n            );\n            await this.set(account.profile.userId, migratedAccount);\n          }\n          if (globals) {\n            delete globals.noAutoPromptBiometrics;\n          }\n          await this.set(keys.global, globals);\n          await this.setCurrentStateVersion(StateVersion.Seven);\n        }\n      }\n\n      currentStateVersion += 1;\n    }\n  }\n\n  protected async migrateStateFrom1To2(): Promise<void> {\n    const clearV1Keys = async (clearingUserId?: string) => {\n      for (const key in v1Keys) {\n        if (key == null) {\n          continue;\n        }\n        await this.set(v1Keys[key], null);\n      }\n      if (clearingUserId != null) {\n        for (const keyPrefix in v1KeyPrefixes) {\n          if (keyPrefix == null) {\n            continue;\n          }\n          await this.set(v1KeyPrefixes[keyPrefix] + userId, null);\n        }\n      }\n    };\n\n    // Some processes, like biometrics, may have already defined a value before migrations are run.\n    // We don't want to null out those values if they don't exist in the old storage scheme (like for new installs)\n    // So, the OOO for migration is that we:\n    // 1. Check for an existing storage value from the old storage structure OR\n    // 2. Check for a value already set by processes that run before migration OR\n    // 3. Assign the default value\n    const globals: any =\n      (await this.get<GlobalState>(keys.global)) ?? this.stateFactory.createGlobal(null);\n    globals.stateVersion = StateVersion.Two;\n    globals.environmentUrls =\n      (await this.get<EnvironmentUrls>(v1Keys.environmentUrls)) ?? globals.environmentUrls;\n    globals.locale = (await this.get<string>(v1Keys.locale)) ?? globals.locale;\n    globals.noAutoPromptBiometrics =\n      (await this.get<boolean>(v1Keys.disableAutoBiometricsPrompt)) ??\n      globals.noAutoPromptBiometrics;\n    globals.noAutoPromptBiometricsText =\n      (await this.get<string>(v1Keys.noAutoPromptBiometricsText)) ??\n      globals.noAutoPromptBiometricsText;\n    globals.ssoCodeVerifier =\n      (await this.get<string>(v1Keys.ssoCodeVerifier)) ?? globals.ssoCodeVerifier;\n    globals.ssoOrganizationIdentifier =\n      (await this.get<string>(v1Keys.ssoIdentifier)) ?? globals.ssoOrganizationIdentifier;\n    globals.ssoState = (await this.get<any>(v1Keys.ssoState)) ?? globals.ssoState;\n    globals.rememberedEmail =\n      (await this.get<string>(v1Keys.rememberedEmail)) ?? globals.rememberedEmail;\n    globals.theme = (await this.get<ThemeType>(v1Keys.theme)) ?? globals.theme;\n    globals.vaultTimeout = (await this.get<number>(v1Keys.vaultTimeout)) ?? globals.vaultTimeout;\n    globals.vaultTimeoutAction =\n      (await this.get<string>(v1Keys.vaultTimeoutAction)) ?? globals.vaultTimeoutAction;\n    globals.window = (await this.get<any>(v1Keys.mainWindowSize)) ?? globals.window;\n    globals.enableTray = (await this.get<boolean>(v1Keys.enableTray)) ?? globals.enableTray;\n    globals.enableMinimizeToTray =\n      (await this.get<boolean>(v1Keys.enableMinimizeToTray)) ?? globals.enableMinimizeToTray;\n    globals.enableCloseToTray =\n      (await this.get<boolean>(v1Keys.enableCloseToTray)) ?? globals.enableCloseToTray;\n    globals.enableStartToTray =\n      (await this.get<boolean>(v1Keys.enableStartToTray)) ?? globals.enableStartToTray;\n    globals.openAtLogin = (await this.get<boolean>(v1Keys.openAtLogin)) ?? globals.openAtLogin;\n    globals.alwaysShowDock =\n      (await this.get<boolean>(v1Keys.alwaysShowDock)) ?? globals.alwaysShowDock;\n    globals.enableBrowserIntegration =\n      (await this.get<boolean>(v1Keys.enableBrowserIntegration)) ??\n      globals.enableBrowserIntegration;\n    globals.enableBrowserIntegrationFingerprint =\n      (await this.get<boolean>(v1Keys.enableBrowserIntegrationFingerprint)) ??\n      globals.enableBrowserIntegrationFingerprint;\n\n    const userId =\n      (await this.get<string>(v1Keys.userId)) ?? (await this.get<string>(v1Keys.entityId));\n\n    const defaultAccount = this.stateFactory.createAccount(null);\n    const accountSettings: AccountSettings = {\n      autoConfirmFingerPrints:\n        (await this.get<boolean>(v1Keys.autoConfirmFingerprints)) ??\n        defaultAccount.settings.autoConfirmFingerPrints,\n      autoFillOnPageLoadDefault:\n        (await this.get<boolean>(v1Keys.autoFillOnPageLoadDefault)) ??\n        defaultAccount.settings.autoFillOnPageLoadDefault,\n      biometricUnlock:\n        (await this.get<boolean>(v1Keys.biometricUnlock)) ??\n        defaultAccount.settings.biometricUnlock,\n      clearClipboard:\n        (await this.get<number>(v1Keys.clearClipboard)) ?? defaultAccount.settings.clearClipboard,\n      defaultUriMatch:\n        (await this.get<any>(v1Keys.defaultUriMatch)) ?? defaultAccount.settings.defaultUriMatch,\n      disableAddLoginNotification:\n        (await this.get<boolean>(v1Keys.disableAddLoginNotification)) ??\n        defaultAccount.settings.disableAddLoginNotification,\n      disableAutoBiometricsPrompt:\n        (await this.get<boolean>(v1Keys.disableAutoBiometricsPrompt)) ??\n        defaultAccount.settings.disableAutoBiometricsPrompt,\n      disableAutoTotpCopy:\n        (await this.get<boolean>(v1Keys.disableAutoTotpCopy)) ??\n        defaultAccount.settings.disableAutoTotpCopy,\n      disableBadgeCounter:\n        (await this.get<boolean>(v1Keys.disableBadgeCounter)) ??\n        defaultAccount.settings.disableBadgeCounter,\n      disableChangedPasswordNotification:\n        (await this.get<boolean>(v1Keys.disableChangedPasswordNotification)) ??\n        defaultAccount.settings.disableChangedPasswordNotification,\n      disableContextMenuItem:\n        (await this.get<boolean>(v1Keys.disableContextMenuItem)) ??\n        defaultAccount.settings.disableContextMenuItem,\n      disableGa: (await this.get<boolean>(v1Keys.disableGa)) ?? defaultAccount.settings.disableGa,\n      dontShowCardsCurrentTab:\n        (await this.get<boolean>(v1Keys.dontShowCardsCurrentTab)) ??\n        defaultAccount.settings.dontShowCardsCurrentTab,\n      dontShowIdentitiesCurrentTab:\n        (await this.get<boolean>(v1Keys.dontShowIdentitiesCurrentTab)) ??\n        defaultAccount.settings.dontShowIdentitiesCurrentTab,\n      enableAlwaysOnTop:\n        (await this.get<boolean>(v1Keys.enableAlwaysOnTop)) ??\n        defaultAccount.settings.enableAlwaysOnTop,\n      enableAutoFillOnPageLoad:\n        (await this.get<boolean>(v1Keys.enableAutoFillOnPageLoad)) ??\n        defaultAccount.settings.enableAutoFillOnPageLoad,\n      enableBiometric:\n        (await this.get<boolean>(v1Keys.enableBiometric)) ??\n        defaultAccount.settings.enableBiometric,\n      enableFullWidth:\n        (await this.get<boolean>(v1Keys.enableFullWidth)) ??\n        defaultAccount.settings.enableFullWidth,\n      environmentUrls: globals.environmentUrls ?? defaultAccount.settings.environmentUrls,\n      equivalentDomains:\n        (await this.get<any>(v1Keys.equivalentDomains)) ??\n        defaultAccount.settings.equivalentDomains,\n      minimizeOnCopyToClipboard:\n        (await this.get<boolean>(v1Keys.minimizeOnCopyToClipboard)) ??\n        defaultAccount.settings.minimizeOnCopyToClipboard,\n      neverDomains:\n        (await this.get<any>(v1Keys.neverDomains)) ?? defaultAccount.settings.neverDomains,\n      passwordGenerationOptions:\n        (await this.get<any>(v1Keys.passwordGenerationOptions)) ??\n        defaultAccount.settings.passwordGenerationOptions,\n      pinProtected: Object.assign(new EncryptionPair<string, EncString>(), {\n        decrypted: null,\n        encrypted: await this.get<string>(v1Keys.pinProtected),\n      }),\n      protectedPin: await this.get<string>(v1Keys.protectedPin),\n      settings:\n        userId == null\n          ? null\n          : await this.get<AccountSettingsSettings>(v1KeyPrefixes.settings + userId),\n      vaultTimeout:\n        (await this.get<number>(v1Keys.vaultTimeout)) ?? defaultAccount.settings.vaultTimeout,\n      vaultTimeoutAction:\n        (await this.get<string>(v1Keys.vaultTimeoutAction)) ??\n        defaultAccount.settings.vaultTimeoutAction,\n    };\n\n    // (userId == null) = no logged in user (so no known userId) and we need to temporarily store account specific settings in state to migrate on first auth\n    // (userId != null) = we have a currently authed user (so known userId) with encrypted data and other key settings we can move, no need to temporarily store account settings\n    if (userId == null) {\n      await this.set(keys.tempAccountSettings, accountSettings);\n      await this.set(keys.global, globals);\n      await this.set(keys.authenticatedAccounts, []);\n      await this.set(keys.activeUserId, null);\n      await clearV1Keys();\n      return;\n    }\n\n    globals.twoFactorToken = await this.get<string>(v1KeyPrefixes.twoFactorToken + userId);\n    await this.set(keys.global, globals);\n    await this.set(userId, {\n      data: {\n        addEditCipherInfo: null,\n        ciphers: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: CipherData }>(v1KeyPrefixes.ciphers + userId),\n        },\n        collapsedGroupings: null,\n        collections: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: CollectionData }>(\n            v1KeyPrefixes.collections + userId\n          ),\n        },\n        eventCollection: await this.get<EventData[]>(v1Keys.eventCollection),\n        folders: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: FolderData }>(v1KeyPrefixes.folders + userId),\n        },\n        localData: null,\n        organizations: await this.get<{ [id: string]: OrganizationData }>(\n          v1KeyPrefixes.organizations + userId\n        ),\n        passwordGenerationHistory: {\n          decrypted: null,\n          encrypted: await this.get<GeneratedPasswordHistory[]>(v1Keys.history),\n        },\n        policies: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: PolicyData }>(v1KeyPrefixes.policies + userId),\n        },\n        providers: await this.get<{ [id: string]: ProviderData }>(v1KeyPrefixes.providers + userId),\n        sends: {\n          decrypted: null,\n          encrypted: await this.get<{ [id: string]: SendData }>(v1KeyPrefixes.sends + userId),\n        },\n      },\n      keys: {\n        apiKeyClientSecret: await this.get<string>(v1Keys.clientSecret),\n        cryptoMasterKey: null,\n        cryptoMasterKeyAuto: null,\n        cryptoMasterKeyB64: null,\n        cryptoMasterKeyBiometric: null,\n        cryptoSymmetricKey: {\n          encrypted: await this.get<string>(v1Keys.encKey),\n          decrypted: null,\n        },\n        legacyEtmKey: null,\n        organizationKeys: {\n          decrypted: null,\n          encrypted: await this.get<any>(v1Keys.encOrgKeys),\n        },\n        privateKey: {\n          decrypted: null,\n          encrypted: await this.get<string>(v1Keys.encPrivate),\n        },\n        providerKeys: {\n          decrypted: null,\n          encrypted: await this.get<any>(v1Keys.encProviderKeys),\n        },\n        publicKey: null,\n      },\n      profile: {\n        apiKeyClientId: await this.get<string>(v1Keys.clientId),\n        authenticationStatus: null,\n        convertAccountToKeyConnector: await this.get<boolean>(v1Keys.convertAccountToKeyConnector),\n        email: await this.get<string>(v1Keys.userEmail),\n        emailVerified: await this.get<boolean>(v1Keys.emailVerified),\n        entityId: null,\n        entityType: null,\n        everBeenUnlocked: null,\n        forcePasswordReset: null,\n        hasPremiumPersonally: null,\n        kdfIterations: await this.get<number>(v1Keys.kdfIterations),\n        kdfType: await this.get<KdfType>(v1Keys.kdf),\n        keyHash: await this.get<string>(v1Keys.keyHash),\n        lastSync: null,\n        userId: userId,\n        usesKeyConnector: null,\n      },\n      settings: accountSettings,\n      tokens: {\n        accessToken: await this.get<string>(v1Keys.accessToken),\n        decodedToken: null,\n        refreshToken: await this.get<string>(v1Keys.refreshToken),\n        securityStamp: null,\n      },\n    });\n\n    await this.set(keys.authenticatedAccounts, [userId]);\n    await this.set(keys.activeUserId, userId);\n\n    const accountActivity: { [userId: string]: number } = {\n      [userId]: await this.get<number>(v1Keys.lastActive),\n    };\n    accountActivity[userId] = await this.get<number>(v1Keys.lastActive);\n    await this.set(keys.accountActivity, accountActivity);\n\n    await clearV1Keys(userId);\n\n    if (await this.secureStorageService.has(v1Keys.key, { keySuffix: \"biometric\" })) {\n      await this.secureStorageService.save(\n        `${userId}${partialKeys.biometricKey}`,\n        await this.secureStorageService.get(v1Keys.key, { keySuffix: \"biometric\" }),\n        { keySuffix: \"biometric\" }\n      );\n      await this.secureStorageService.remove(v1Keys.key, { keySuffix: \"biometric\" });\n    }\n\n    if (await this.secureStorageService.has(v1Keys.key, { keySuffix: \"auto\" })) {\n      await this.secureStorageService.save(\n        `${userId}${partialKeys.autoKey}`,\n        await this.secureStorageService.get(v1Keys.key, { keySuffix: \"auto\" }),\n        { keySuffix: \"auto\" }\n      );\n      await this.secureStorageService.remove(v1Keys.key, { keySuffix: \"auto\" });\n    }\n\n    if (await this.secureStorageService.has(v1Keys.key)) {\n      await this.secureStorageService.save(\n        `${userId}${partialKeys.masterKey}`,\n        await this.secureStorageService.get(v1Keys.key)\n      );\n      await this.secureStorageService.remove(v1Keys.key);\n    }\n  }\n\n  protected async migrateStateFrom2To3(): Promise<void> {\n    const authenticatedUserIds = await this.get<string[]>(keys.authenticatedAccounts);\n    await Promise.all(\n      authenticatedUserIds.map(async (userId) => {\n        const account = await this.get<TAccount>(userId);\n        if (\n          account?.profile?.hasPremiumPersonally === null &&\n          account.tokens?.accessToken != null\n        ) {\n          const decodedToken = await TokenService.decodeToken(account.tokens.accessToken);\n          account.profile.hasPremiumPersonally = decodedToken.premium;\n          await this.set(userId, account);\n        }\n      })\n    );\n\n    const globals = await this.getGlobals();\n    globals.stateVersion = StateVersion.Three;\n    await this.set(keys.global, globals);\n  }\n\n  protected async migrateStateFrom3To4(): Promise<void> {\n    const authenticatedUserIds = await this.get<string[]>(keys.authenticatedAccounts);\n    await Promise.all(\n      authenticatedUserIds.map(async (userId) => {\n        const account = await this.get<TAccount>(userId);\n        if (account?.profile?.everBeenUnlocked != null) {\n          delete account.profile.everBeenUnlocked;\n          return this.set(userId, account);\n        }\n      })\n    );\n\n    const globals = await this.getGlobals();\n    globals.stateVersion = StateVersion.Four;\n    await this.set(keys.global, globals);\n  }\n\n  protected async migrateAccountFrom4To5(account: TAccount): Promise<TAccount> {\n    const encryptedOrgKeys = account.keys?.organizationKeys?.encrypted;\n    if (encryptedOrgKeys != null) {\n      for (const [orgId, encKey] of Object.entries(encryptedOrgKeys)) {\n        encryptedOrgKeys[orgId] = {\n          type: \"organization\",\n          key: encKey as unknown as string, // Account v4 does not reflect the current account model so we have to cast\n        };\n      }\n    }\n\n    return account;\n  }\n\n  protected async migrateAccountFrom5To6(account: TAccount): Promise<TAccount> {\n    delete (account as any).keys?.legacyEtmKey;\n    return account;\n  }\n\n  protected async migrateAccountFrom6To7(\n    globalSetting: boolean,\n    account: TAccount\n  ): Promise<TAccount> {\n    if (globalSetting) {\n      account.settings = Object.assign({}, account.settings, { disableAutoBiometricsPrompt: true });\n    }\n    return account;\n  }\n\n  protected get options(): StorageOptions {\n    return { htmlStorageLocation: HtmlStorageLocation.Local };\n  }\n\n  protected get<T>(key: string): Promise<T> {\n    return this.storageService.get<T>(key, this.options);\n  }\n\n  protected set(key: string, value: any): Promise<any> {\n    if (value == null) {\n      return this.storageService.remove(key, this.options);\n    }\n    return this.storageService.save(key, value, this.options);\n  }\n\n  protected async getGlobals(): Promise<TGlobalState> {\n    return await this.get<TGlobalState>(keys.global);\n  }\n\n  protected async getCurrentStateVersion(): Promise<StateVersion> {\n    return (await this.getGlobals())?.stateVersion ?? StateVersion.One;\n  }\n\n  protected async setCurrentStateVersion(newVersion: StateVersion): Promise<void> {\n    const globals = await this.getGlobals();\n    globals.stateVersion = newVersion;\n    await this.set(keys.global, globals);\n  }\n\n  protected async getAuthenticatedAccounts(): Promise<TAccount[]> {\n    const authenticatedUserIds = await this.get<string[]>(keys.authenticatedAccounts);\n    return Promise.all(authenticatedUserIds.map((id) => this.get<TAccount>(id)));\n  }\n}\n","import { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport { LogService } from \"../abstractions/log.service\";\nimport { TotpService as TotpServiceAbstraction } from \"../abstractions/totp.service\";\nimport { Utils } from \"../misc/utils\";\n\nconst B32Chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\";\nconst SteamChars = \"23456789BCDFGHJKMNPQRTVWXY\";\n\nexport class TotpService implements TotpServiceAbstraction {\n  constructor(\n    private cryptoFunctionService: CryptoFunctionService,\n    private logService: LogService\n  ) {}\n\n  async getCode(key: string): Promise<string> {\n    if (key == null) {\n      return null;\n    }\n    let period = 30;\n    let alg: \"sha1\" | \"sha256\" | \"sha512\" = \"sha1\";\n    let digits = 6;\n    let keyB32 = key;\n    const isOtpAuth = key.toLowerCase().indexOf(\"otpauth://\") === 0;\n    const isSteamAuth = !isOtpAuth && key.toLowerCase().indexOf(\"steam://\") === 0;\n    if (isOtpAuth) {\n      const params = Utils.getQueryParams(key);\n      if (params.has(\"digits\") && params.get(\"digits\") != null) {\n        try {\n          const digitParams = parseInt(params.get(\"digits\").trim(), null);\n          if (digitParams > 10) {\n            digits = 10;\n          } else if (digitParams > 0) {\n            digits = digitParams;\n          }\n        } catch {\n          this.logService.error(\"Invalid digits param.\");\n        }\n      }\n      if (params.has(\"period\") && params.get(\"period\") != null) {\n        try {\n          const periodParam = parseInt(params.get(\"period\").trim(), null);\n          if (periodParam > 0) {\n            period = periodParam;\n          }\n        } catch {\n          this.logService.error(\"Invalid period param.\");\n        }\n      }\n      if (params.has(\"secret\") && params.get(\"secret\") != null) {\n        keyB32 = params.get(\"secret\");\n      }\n      if (params.has(\"algorithm\") && params.get(\"algorithm\") != null) {\n        const algParam = params.get(\"algorithm\").toLowerCase();\n        if (algParam === \"sha1\" || algParam === \"sha256\" || algParam === \"sha512\") {\n          alg = algParam;\n        }\n      }\n    } else if (isSteamAuth) {\n      keyB32 = key.substr(\"steam://\".length);\n      digits = 5;\n    }\n\n    const epoch = Math.round(new Date().getTime() / 1000.0);\n    const timeHex = this.leftPad(this.decToHex(Math.floor(epoch / period)), 16, \"0\");\n    const timeBytes = Utils.fromHexToArray(timeHex);\n    const keyBytes = this.b32ToBytes(keyB32);\n\n    if (!keyBytes.length || !timeBytes.length) {\n      return null;\n    }\n\n    const hash = await this.sign(keyBytes, timeBytes, alg);\n    if (hash.length === 0) {\n      return null;\n    }\n\n    const offset = hash[hash.length - 1] & 0xf;\n    const binary =\n      ((hash[offset] & 0x7f) << 24) |\n      ((hash[offset + 1] & 0xff) << 16) |\n      ((hash[offset + 2] & 0xff) << 8) |\n      (hash[offset + 3] & 0xff);\n\n    let otp = \"\";\n    if (isSteamAuth) {\n      let fullCode = binary & 0x7fffffff;\n      for (let i = 0; i < digits; i++) {\n        otp += SteamChars[fullCode % SteamChars.length];\n        fullCode = Math.trunc(fullCode / SteamChars.length);\n      }\n    } else {\n      otp = (binary % Math.pow(10, digits)).toString();\n      otp = this.leftPad(otp, digits, \"0\");\n    }\n\n    return otp;\n  }\n\n  getTimeInterval(key: string): number {\n    let period = 30;\n    if (key != null && key.toLowerCase().indexOf(\"otpauth://\") === 0) {\n      const params = Utils.getQueryParams(key);\n      if (params.has(\"period\") && params.get(\"period\") != null) {\n        try {\n          period = parseInt(params.get(\"period\").trim(), null);\n        } catch {\n          this.logService.error(\"Invalid period param.\");\n        }\n      }\n    }\n    return period;\n  }\n\n  // Helpers\n\n  private leftPad(s: string, l: number, p: string): string {\n    if (l + 1 >= s.length) {\n      s = Array(l + 1 - s.length).join(p) + s;\n    }\n    return s;\n  }\n\n  private decToHex(d: number): string {\n    return (d < 15.5 ? \"0\" : \"\") + Math.round(d).toString(16);\n  }\n\n  private b32ToHex(s: string): string {\n    s = s.toUpperCase();\n    let cleanedInput = \"\";\n\n    for (let i = 0; i < s.length; i++) {\n      if (B32Chars.indexOf(s[i]) < 0) {\n        continue;\n      }\n\n      cleanedInput += s[i];\n    }\n    s = cleanedInput;\n\n    let bits = \"\";\n    let hex = \"\";\n    for (let i = 0; i < s.length; i++) {\n      const byteIndex = B32Chars.indexOf(s.charAt(i));\n      if (byteIndex < 0) {\n        continue;\n      }\n      bits += this.leftPad(byteIndex.toString(2), 5, \"0\");\n    }\n    for (let i = 0; i + 4 <= bits.length; i += 4) {\n      const chunk = bits.substr(i, 4);\n      hex = hex + parseInt(chunk, 2).toString(16);\n    }\n    return hex;\n  }\n\n  private b32ToBytes(s: string): Uint8Array {\n    return Utils.fromHexToArray(this.b32ToHex(s));\n  }\n\n  private async sign(\n    keyBytes: Uint8Array,\n    timeBytes: Uint8Array,\n    alg: \"sha1\" | \"sha256\" | \"sha512\"\n  ) {\n    const signature = await this.cryptoFunctionService.hmac(timeBytes.buffer, keyBytes.buffer, alg);\n    return new Uint8Array(signature);\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\nimport { SearchService } from \"../../abstractions/search.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { VaultTimeoutService as VaultTimeoutServiceAbstraction } from \"../../abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"../../abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { CollectionService } from \"../../admin-console/abstractions/collection.service\";\nimport { AuthService } from \"../../auth/abstractions/auth.service\";\nimport { KeyConnectorService } from \"../../auth/abstractions/key-connector.service\";\nimport { AuthenticationStatus } from \"../../auth/enums/authentication-status\";\nimport { VaultTimeoutAction } from \"../../enums/vault-timeout-action.enum\";\nimport { CipherService } from \"../../vault/abstractions/cipher.service\";\nimport { FolderService } from \"../../vault/abstractions/folder/folder.service.abstraction\";\n\nexport class VaultTimeoutService implements VaultTimeoutServiceAbstraction {\n  private inited = false;\n\n  constructor(\n    private cipherService: CipherService,\n    private folderService: FolderService,\n    private collectionService: CollectionService,\n    private cryptoService: CryptoService,\n    protected platformUtilsService: PlatformUtilsService,\n    private messagingService: MessagingService,\n    private searchService: SearchService,\n    private keyConnectorService: KeyConnectorService,\n    private stateService: StateService,\n    private authService: AuthService,\n    private vaultTimeoutSettingsService: VaultTimeoutSettingsService,\n    private lockedCallback: (userId?: string) => Promise<void> = null,\n    private loggedOutCallback: (expired: boolean, userId?: string) => Promise<void> = null\n  ) {}\n\n  init(checkOnInterval: boolean) {\n    if (this.inited) {\n      return;\n    }\n\n    this.inited = true;\n    if (checkOnInterval) {\n      this.startCheck();\n    }\n  }\n\n  startCheck() {\n    this.checkVaultTimeout();\n    setInterval(() => this.checkVaultTimeout(), 10 * 1000); // check every 10 seconds\n  }\n\n  async checkVaultTimeout(): Promise<void> {\n    if (await this.platformUtilsService.isViewOpen()) {\n      return;\n    }\n\n    const accounts = await firstValueFrom(this.stateService.accounts$);\n    for (const userId in accounts) {\n      if (userId != null && (await this.shouldLock(userId))) {\n        await this.executeTimeoutAction(userId);\n      }\n    }\n  }\n\n  async lock(userId?: string): Promise<void> {\n    const authed = await this.stateService.getIsAuthenticated({ userId: userId });\n    if (!authed) {\n      return;\n    }\n\n    if (await this.keyConnectorService.getUsesKeyConnector()) {\n      const pinSet = await this.vaultTimeoutSettingsService.isPinLockSet();\n      const pinLock =\n        (pinSet[0] && (await this.stateService.getDecryptedPinProtected()) != null) || pinSet[1];\n\n      if (!pinLock && !(await this.vaultTimeoutSettingsService.isBiometricLockSet())) {\n        await this.logOut(userId);\n      }\n    }\n\n    if (userId == null || userId === (await this.stateService.getUserId())) {\n      this.searchService.clearIndex();\n      await this.folderService.clearCache();\n    }\n\n    await this.stateService.setEverBeenUnlocked(true, { userId: userId });\n    await this.stateService.setCryptoMasterKeyAuto(null, { userId: userId });\n\n    await this.cryptoService.clearKey(false, userId);\n    await this.cryptoService.clearOrgKeys(true, userId);\n    await this.cryptoService.clearKeyPair(true, userId);\n    await this.cryptoService.clearEncKey(true, userId);\n\n    await this.cipherService.clearCache(userId);\n    await this.collectionService.clearCache(userId);\n\n    this.messagingService.send(\"locked\", { userId: userId });\n\n    if (this.lockedCallback != null) {\n      await this.lockedCallback(userId);\n    }\n  }\n\n  async logOut(userId?: string): Promise<void> {\n    if (this.loggedOutCallback != null) {\n      await this.loggedOutCallback(false, userId);\n    }\n  }\n\n  private async shouldLock(userId: string): Promise<boolean> {\n    const authStatus = await this.authService.getAuthStatus(userId);\n    if (\n      authStatus === AuthenticationStatus.Locked ||\n      authStatus === AuthenticationStatus.LoggedOut\n    ) {\n      return false;\n    }\n\n    const vaultTimeout = await this.vaultTimeoutSettingsService.getVaultTimeout(userId);\n    if (vaultTimeout == null || vaultTimeout < 0) {\n      return false;\n    }\n\n    const lastActive = await this.stateService.getLastActive({ userId: userId });\n    if (lastActive == null) {\n      return false;\n    }\n\n    const vaultTimeoutSeconds = vaultTimeout * 60;\n    const diffSeconds = (new Date().getTime() - lastActive) / 1000;\n    return diffSeconds >= vaultTimeoutSeconds;\n  }\n\n  private async executeTimeoutAction(userId: string): Promise<void> {\n    const timeoutAction = await this.vaultTimeoutSettingsService.getVaultTimeoutAction(userId);\n    timeoutAction === VaultTimeoutAction.LogOut\n      ? await this.logOut(userId)\n      : await this.lock(userId);\n  }\n}\n","import { CryptoService } from \"../../abstractions/crypto.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { VaultTimeoutSettingsService as VaultTimeoutSettingsServiceAbstraction } from \"../../abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { PolicyService } from \"../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"../../admin-console/enums\";\nimport { TokenService } from \"../../auth/abstractions/token.service\";\nimport { VaultTimeoutAction } from \"../../enums/vault-timeout-action.enum\";\n\nexport class VaultTimeoutSettingsService implements VaultTimeoutSettingsServiceAbstraction {\n  constructor(\n    private cryptoService: CryptoService,\n    private tokenService: TokenService,\n    private policyService: PolicyService,\n    private stateService: StateService\n  ) {}\n\n  async setVaultTimeoutOptions(timeout: number, action: VaultTimeoutAction): Promise<void> {\n    await this.stateService.setVaultTimeout(timeout);\n\n    // We swap these tokens from being on disk for lock actions, and in memory for logout actions\n    // Get them here to set them to their new location after changing the timeout action and clearing if needed\n    const token = await this.tokenService.getToken();\n    const refreshToken = await this.tokenService.getRefreshToken();\n    const clientId = await this.tokenService.getClientId();\n    const clientSecret = await this.tokenService.getClientSecret();\n\n    const currentAction = await this.stateService.getVaultTimeoutAction();\n    if (\n      (timeout != null || timeout === 0) &&\n      action === VaultTimeoutAction.LogOut &&\n      action !== currentAction\n    ) {\n      // if we have a vault timeout and the action is log out, reset tokens\n      await this.tokenService.clearToken();\n    }\n\n    await this.stateService.setVaultTimeoutAction(action);\n\n    await this.tokenService.setToken(token);\n    await this.tokenService.setRefreshToken(refreshToken);\n    await this.tokenService.setClientId(clientId);\n    await this.tokenService.setClientSecret(clientSecret);\n\n    await this.cryptoService.toggleKey();\n  }\n\n  async isPinLockSet(): Promise<[boolean, boolean]> {\n    const protectedPin = await this.stateService.getProtectedPin();\n    const pinProtectedKey = await this.stateService.getEncryptedPinProtected();\n    return [protectedPin != null, pinProtectedKey != null];\n  }\n\n  async isBiometricLockSet(): Promise<boolean> {\n    return await this.stateService.getBiometricUnlock();\n  }\n\n  async getVaultTimeout(userId?: string): Promise<number> {\n    const vaultTimeout = await this.stateService.getVaultTimeout({ userId: userId });\n\n    if (\n      await this.policyService.policyAppliesToUser(PolicyType.MaximumVaultTimeout, null, userId)\n    ) {\n      const policy = await this.policyService.getAll(PolicyType.MaximumVaultTimeout, userId);\n      // Remove negative values, and ensure it's smaller than maximum allowed value according to policy\n      let timeout = Math.min(vaultTimeout, policy[0].data.minutes);\n\n      if (vaultTimeout == null || timeout < 0) {\n        timeout = policy[0].data.minutes;\n      }\n\n      // We really shouldn't need to set the value here, but multiple services relies on this value being correct.\n      if (vaultTimeout !== timeout) {\n        await this.stateService.setVaultTimeout(timeout, { userId: userId });\n      }\n\n      return timeout;\n    }\n\n    return vaultTimeout;\n  }\n\n  async getVaultTimeoutAction(userId?: string): Promise<VaultTimeoutAction> {\n    let vaultTimeoutAction = await this.stateService.getVaultTimeoutAction({ userId: userId });\n\n    if (\n      await this.policyService.policyAppliesToUser(PolicyType.MaximumVaultTimeout, null, userId)\n    ) {\n      const policy = await this.policyService.getAll(PolicyType.MaximumVaultTimeout, userId);\n      const action = policy[0].data.action;\n\n      if (action) {\n        // We really shouldn't need to set the value here, but multiple services relies on this value being correct.\n        if (action && vaultTimeoutAction !== action) {\n          await this.stateService.setVaultTimeoutAction(action, { userId: userId });\n        }\n        vaultTimeoutAction = action;\n      }\n    }\n\n    return vaultTimeoutAction === VaultTimeoutAction.LogOut\n      ? VaultTimeoutAction.LogOut\n      : VaultTimeoutAction.Lock;\n  }\n\n  async clear(userId?: string): Promise<void> {\n    await this.stateService.setEverBeenUnlocked(false, { userId: userId });\n    await this.stateService.setDecryptedPinProtected(null, { userId: userId });\n    await this.stateService.setProtectedPin(null, { userId: userId });\n  }\n}\n","export class DecryptParameters<T> {\n  encKey: T;\n  data: T;\n  iv: T;\n  macKey: T;\n  mac: T;\n  macData: T;\n}\n","import * as argon2 from \"argon2-browser\";\nimport * as forge from \"node-forge\";\n\nimport { CryptoFunctionService } from \"../abstractions/cryptoFunction.service\";\nimport { Utils } from \"../misc/utils\";\nimport { DecryptParameters } from \"../models/domain/decrypt-parameters\";\nimport { SymmetricCryptoKey } from \"../models/domain/symmetric-crypto-key\";\nimport { CsprngArray } from \"../types/csprng\";\n\nexport class WebCryptoFunctionService implements CryptoFunctionService {\n  private crypto: Crypto;\n  private subtle: SubtleCrypto;\n  private wasmSupported: boolean;\n\n  constructor(win: Window | typeof global) {\n    this.crypto = typeof win.crypto !== \"undefined\" ? win.crypto : null;\n    this.subtle =\n      !!this.crypto && typeof win.crypto.subtle !== \"undefined\" ? win.crypto.subtle : null;\n    this.wasmSupported = this.checkIfWasmSupported();\n  }\n\n  async pbkdf2(\n    password: string | ArrayBuffer,\n    salt: string | ArrayBuffer,\n    algorithm: \"sha256\" | \"sha512\",\n    iterations: number\n  ): Promise<ArrayBuffer> {\n    const wcLen = algorithm === \"sha256\" ? 256 : 512;\n    const passwordBuf = this.toBuf(password);\n    const saltBuf = this.toBuf(salt);\n\n    const pbkdf2Params: Pbkdf2Params = {\n      name: \"PBKDF2\",\n      salt: saltBuf,\n      iterations: iterations,\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\n      \"raw\",\n      passwordBuf,\n      { name: \"PBKDF2\" } as any,\n      false,\n      [\"deriveBits\"]\n    );\n    return await this.subtle.deriveBits(pbkdf2Params, impKey, wcLen);\n  }\n\n  async argon2(\n    password: string | ArrayBuffer,\n    salt: string | ArrayBuffer,\n    iterations: number,\n    memory: number,\n    parallelism: number\n  ): Promise<ArrayBuffer> {\n    if (!this.wasmSupported) {\n      throw \"Webassembly support is required for the Argon2 KDF feature.\";\n    }\n\n    const passwordArr = new Uint8Array(this.toBuf(password));\n    const saltArr = new Uint8Array(this.toBuf(salt));\n\n    const result = await argon2.hash({\n      pass: passwordArr,\n      salt: saltArr,\n      time: iterations,\n      mem: memory,\n      parallelism: parallelism,\n      hashLen: 32,\n      type: argon2.ArgonType.Argon2id,\n    });\n    return result.hash;\n  }\n\n  async hkdf(\n    ikm: ArrayBuffer,\n    salt: string | ArrayBuffer,\n    info: string | ArrayBuffer,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ): Promise<ArrayBuffer> {\n    const saltBuf = this.toBuf(salt);\n    const infoBuf = this.toBuf(info);\n\n    const hkdfParams: HkdfParams = {\n      name: \"HKDF\",\n      salt: saltBuf,\n      info: infoBuf,\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\"raw\", ikm, { name: \"HKDF\" } as any, false, [\n      \"deriveBits\",\n    ]);\n    return await this.subtle.deriveBits(hkdfParams as any, impKey, outputByteSize * 8);\n  }\n\n  // ref: https://tools.ietf.org/html/rfc5869\n  async hkdfExpand(\n    prk: ArrayBuffer,\n    info: string | ArrayBuffer,\n    outputByteSize: number,\n    algorithm: \"sha256\" | \"sha512\"\n  ): Promise<ArrayBuffer> {\n    const hashLen = algorithm === \"sha256\" ? 32 : 64;\n    if (outputByteSize > 255 * hashLen) {\n      throw new Error(\"outputByteSize is too large.\");\n    }\n    const prkArr = new Uint8Array(prk);\n    if (prkArr.length < hashLen) {\n      throw new Error(\"prk is too small.\");\n    }\n    const infoBuf = this.toBuf(info);\n    const infoArr = new Uint8Array(infoBuf);\n    let runningOkmLength = 0;\n    let previousT = new Uint8Array(0);\n    const n = Math.ceil(outputByteSize / hashLen);\n    const okm = new Uint8Array(n * hashLen);\n    for (let i = 0; i < n; i++) {\n      const t = new Uint8Array(previousT.length + infoArr.length + 1);\n      t.set(previousT);\n      t.set(infoArr, previousT.length);\n      t.set([i + 1], t.length - 1);\n      previousT = new Uint8Array(await this.hmac(t.buffer, prk, algorithm));\n      okm.set(previousT, runningOkmLength);\n      runningOkmLength += previousT.length;\n      if (runningOkmLength >= outputByteSize) {\n        break;\n      }\n    }\n    return okm.slice(0, outputByteSize).buffer;\n  }\n\n  async hash(\n    value: string | ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\" | \"md5\"\n  ): Promise<ArrayBuffer> {\n    if (algorithm === \"md5\") {\n      const md = algorithm === \"md5\" ? forge.md.md5.create() : forge.md.sha1.create();\n      const valueBytes = this.toByteString(value);\n      md.update(valueBytes, \"raw\");\n      return Utils.fromByteStringToArray(md.digest().data).buffer;\n    }\n\n    const valueBuf = this.toBuf(value);\n    return await this.subtle.digest({ name: this.toWebCryptoAlgorithm(algorithm) }, valueBuf);\n  }\n\n  async hmac(\n    value: ArrayBuffer,\n    key: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\" | \"sha512\"\n  ): Promise<ArrayBuffer> {\n    const signingAlgorithm = {\n      name: \"HMAC\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n\n    const impKey = await this.subtle.importKey(\"raw\", key, signingAlgorithm, false, [\"sign\"]);\n    return await this.subtle.sign(signingAlgorithm, impKey, value);\n  }\n\n  // Safely compare two values in a way that protects against timing attacks (Double HMAC Verification).\n  // ref: https://www.nccgroup.trust/us/about-us/newsroom-and-events/blog/2011/february/double-hmac-verification/\n  // ref: https://paragonie.com/blog/2015/11/preventing-timing-attacks-on-string-comparison-with-double-hmac-strategy\n  async compare(a: ArrayBuffer, b: ArrayBuffer): Promise<boolean> {\n    const macKey = await this.randomBytes(32);\n    const signingAlgorithm = {\n      name: \"HMAC\",\n      hash: { name: \"SHA-256\" },\n    };\n    const impKey = await this.subtle.importKey(\"raw\", macKey, signingAlgorithm, false, [\"sign\"]);\n    const mac1 = await this.subtle.sign(signingAlgorithm, impKey, a);\n    const mac2 = await this.subtle.sign(signingAlgorithm, impKey, b);\n\n    if (mac1.byteLength !== mac2.byteLength) {\n      return false;\n    }\n\n    const arr1 = new Uint8Array(mac1);\n    const arr2 = new Uint8Array(mac2);\n    for (let i = 0; i < arr2.length; i++) {\n      if (arr1[i] !== arr2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  hmacFast(value: string, key: string, algorithm: \"sha1\" | \"sha256\" | \"sha512\"): Promise<string> {\n    const hmac = forge.hmac.create();\n    hmac.start(algorithm, key);\n    hmac.update(value);\n    const bytes = hmac.digest().getBytes();\n    return Promise.resolve(bytes);\n  }\n\n  async compareFast(a: string, b: string): Promise<boolean> {\n    const rand = await this.randomBytes(32);\n    const bytes = new Uint32Array(rand);\n    const buffer = forge.util.createBuffer();\n    for (let i = 0; i < bytes.length; i++) {\n      buffer.putInt32(bytes[i]);\n    }\n    const macKey = buffer.getBytes();\n\n    const hmac = forge.hmac.create();\n    hmac.start(\"sha256\", macKey);\n    hmac.update(a);\n    const mac1 = hmac.digest().getBytes();\n\n    hmac.start(null, null);\n    hmac.update(b);\n    const mac2 = hmac.digest().getBytes();\n\n    const equals = mac1 === mac2;\n    return equals;\n  }\n\n  async aesEncrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {\n    const impKey = await this.subtle.importKey(\"raw\", key, { name: \"AES-CBC\" } as any, false, [\n      \"encrypt\",\n    ]);\n    return await this.subtle.encrypt({ name: \"AES-CBC\", iv: iv }, impKey, data);\n  }\n\n  aesDecryptFastParameters(\n    data: string,\n    iv: string,\n    mac: string,\n    key: SymmetricCryptoKey\n  ): DecryptParameters<string> {\n    const p = new DecryptParameters<string>();\n    if (key.meta != null) {\n      p.encKey = key.meta.encKeyByteString;\n      p.macKey = key.meta.macKeyByteString;\n    }\n\n    if (p.encKey == null) {\n      p.encKey = forge.util.decode64(key.encKeyB64);\n    }\n    p.data = forge.util.decode64(data);\n    p.iv = forge.util.decode64(iv);\n    p.macData = p.iv + p.data;\n    if (p.macKey == null && key.macKeyB64 != null) {\n      p.macKey = forge.util.decode64(key.macKeyB64);\n    }\n    if (mac != null) {\n      p.mac = forge.util.decode64(mac);\n    }\n\n    // cache byte string keys for later\n    if (key.meta == null) {\n      key.meta = {};\n    }\n    if (key.meta.encKeyByteString == null) {\n      key.meta.encKeyByteString = p.encKey;\n    }\n    if (p.macKey != null && key.meta.macKeyByteString == null) {\n      key.meta.macKeyByteString = p.macKey;\n    }\n\n    return p;\n  }\n\n  aesDecryptFast(parameters: DecryptParameters<string>): Promise<string> {\n    const dataBuffer = forge.util.createBuffer(parameters.data);\n    const decipher = forge.cipher.createDecipher(\"AES-CBC\", parameters.encKey);\n    decipher.start({ iv: parameters.iv });\n    decipher.update(dataBuffer);\n    decipher.finish();\n    const val = decipher.output.toString();\n    return Promise.resolve(val);\n  }\n\n  async aesDecrypt(data: ArrayBuffer, iv: ArrayBuffer, key: ArrayBuffer): Promise<ArrayBuffer> {\n    const impKey = await this.subtle.importKey(\"raw\", key, { name: \"AES-CBC\" } as any, false, [\n      \"decrypt\",\n    ]);\n    return await this.subtle.decrypt({ name: \"AES-CBC\", iv: iv }, impKey, data);\n  }\n\n  async rsaEncrypt(\n    data: ArrayBuffer,\n    publicKey: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\"\n  ): Promise<ArrayBuffer> {\n    // Note: Edge browser requires that we specify name and hash for both key import and decrypt.\n    // We cannot use the proper types here.\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n    const impKey = await this.subtle.importKey(\"spki\", publicKey, rsaParams, false, [\"encrypt\"]);\n    return await this.subtle.encrypt(rsaParams, impKey, data);\n  }\n\n  async rsaDecrypt(\n    data: ArrayBuffer,\n    privateKey: ArrayBuffer,\n    algorithm: \"sha1\" | \"sha256\"\n  ): Promise<ArrayBuffer> {\n    // Note: Edge browser requires that we specify name and hash for both key import and decrypt.\n    // We cannot use the proper types here.\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      hash: { name: this.toWebCryptoAlgorithm(algorithm) },\n    };\n    const impKey = await this.subtle.importKey(\"pkcs8\", privateKey, rsaParams, false, [\"decrypt\"]);\n    return await this.subtle.decrypt(rsaParams, impKey, data);\n  }\n\n  async rsaExtractPublicKey(privateKey: ArrayBuffer): Promise<ArrayBuffer> {\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      // Have to specify some algorithm\n      hash: { name: this.toWebCryptoAlgorithm(\"sha1\") },\n    };\n    const impPrivateKey = await this.subtle.importKey(\"pkcs8\", privateKey, rsaParams, true, [\n      \"decrypt\",\n    ]);\n    const jwkPrivateKey = await this.subtle.exportKey(\"jwk\", impPrivateKey);\n    const jwkPublicKeyParams = {\n      kty: \"RSA\",\n      e: jwkPrivateKey.e,\n      n: jwkPrivateKey.n,\n      alg: \"RSA-OAEP\",\n      ext: true,\n    };\n    const impPublicKey = await this.subtle.importKey(\"jwk\", jwkPublicKeyParams, rsaParams, true, [\n      \"encrypt\",\n    ]);\n    return await this.subtle.exportKey(\"spki\", impPublicKey);\n  }\n\n  async rsaGenerateKeyPair(length: 1024 | 2048 | 4096): Promise<[ArrayBuffer, ArrayBuffer]> {\n    const rsaParams = {\n      name: \"RSA-OAEP\",\n      modulusLength: length,\n      publicExponent: new Uint8Array([0x01, 0x00, 0x01]), // 65537\n      // Have to specify some algorithm\n      hash: { name: this.toWebCryptoAlgorithm(\"sha1\") },\n    };\n    const keyPair = (await this.subtle.generateKey(rsaParams, true, [\n      \"encrypt\",\n      \"decrypt\",\n    ])) as CryptoKeyPair;\n    const publicKey = await this.subtle.exportKey(\"spki\", keyPair.publicKey);\n    const privateKey = await this.subtle.exportKey(\"pkcs8\", keyPair.privateKey);\n    return [publicKey, privateKey];\n  }\n\n  randomBytes(length: number): Promise<CsprngArray> {\n    const arr = new Uint8Array(length);\n    this.crypto.getRandomValues(arr);\n    return Promise.resolve(arr.buffer as CsprngArray);\n  }\n\n  private toBuf(value: string | ArrayBuffer): ArrayBuffer {\n    let buf: ArrayBuffer;\n    if (typeof value === \"string\") {\n      buf = Utils.fromUtf8ToArray(value).buffer;\n    } else {\n      buf = value;\n    }\n    return buf;\n  }\n\n  private toByteString(value: string | ArrayBuffer): string {\n    let bytes: string;\n    if (typeof value === \"string\") {\n      bytes = forge.util.encodeUtf8(value);\n    } else {\n      bytes = Utils.fromBufferToByteString(value);\n    }\n    return bytes;\n  }\n\n  private toWebCryptoAlgorithm(algorithm: \"sha1\" | \"sha256\" | \"sha512\" | \"md5\"): string {\n    if (algorithm === \"md5\") {\n      throw new Error(\"MD5 is not supported in WebCrypto.\");\n    }\n    return algorithm === \"sha1\" ? \"SHA-1\" : algorithm === \"sha256\" ? \"SHA-256\" : \"SHA-512\";\n  }\n\n  // ref: https://stackoverflow.com/a/47880734/1090359\n  private checkIfWasmSupported(): boolean {\n    try {\n      if (typeof WebAssembly === \"object\" && typeof WebAssembly.instantiate === \"function\") {\n        const module = new WebAssembly.Module(\n          Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00)\n        );\n        if (module instanceof WebAssembly.Module) {\n          return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n        }\n      }\n    } catch {\n      return false;\n    }\n    return false;\n  }\n}\n","import { SendType } from \"../../enums/send-type\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\nimport { Send } from \"../domain/send\";\n\nexport class SendRequest {\n  type: SendType;\n  fileLength?: number;\n  name: string;\n  notes: string;\n  key: string;\n  maxAccessCount?: number;\n  expirationDate: string;\n  deletionDate: string;\n  text: SendTextApi;\n  file: SendFileApi;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(send: Send, fileLength?: number) {\n    this.type = send.type;\n    this.fileLength = fileLength;\n    this.name = send.name ? send.name.encryptedString : null;\n    this.notes = send.notes ? send.notes.encryptedString : null;\n    this.maxAccessCount = send.maxAccessCount;\n    this.expirationDate = send.expirationDate != null ? send.expirationDate.toISOString() : null;\n    this.deletionDate = send.deletionDate != null ? send.deletionDate.toISOString() : null;\n    this.key = send.key != null ? send.key.encryptedString : null;\n    this.password = send.password;\n    this.disabled = send.disabled;\n    this.hideEmail = send.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendTextApi();\n        this.text.text = send.text.text != null ? send.text.text.encryptedString : null;\n        this.text.hidden = send.text.hidden;\n        break;\n      case SendType.File:\n        this.file = new SendFileApi();\n        this.file.fileName = send.file.fileName != null ? send.file.fileName.encryptedString : null;\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\nimport { SendType } from \"../../enums/send-type\";\nimport { SendFileApi } from \"../api/send-file.api\";\nimport { SendTextApi } from \"../api/send-text.api\";\n\nexport class SendAccessResponse extends BaseResponse {\n  id: string;\n  type: SendType;\n  name: string;\n  file: SendFileApi;\n  text: SendTextApi;\n  expirationDate: Date;\n  creatorIdentifier: string;\n\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.type = this.getResponseProperty(\"Type\");\n    this.name = this.getResponseProperty(\"Name\");\n\n    const text = this.getResponseProperty(\"Text\");\n    if (text != null) {\n      this.text = new SendTextApi(text);\n    }\n\n    const file = this.getResponseProperty(\"File\");\n    if (file != null) {\n      this.file = new SendFileApi(file);\n    }\n\n    this.expirationDate = this.getResponseProperty(\"ExpirationDate\");\n    this.creatorIdentifier = this.getResponseProperty(\"CreatorIdentifier\");\n  }\n}\n","import { BaseResponse } from \"../../../../models/response/base.response\";\n\nexport class SendFileDownloadDataResponse extends BaseResponse {\n  id: string = null;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.id = this.getResponseProperty(\"Id\");\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { FileUploadType } from \"../../../../enums\";\nimport { BaseResponse } from \"../../../../models/response/base.response\";\n\nimport { SendResponse } from \"./send.response\";\n\nexport class SendFileUploadDataResponse extends BaseResponse {\n  fileUploadType: FileUploadType;\n  sendResponse: SendResponse;\n  url: string = null;\n  constructor(response: any) {\n    super(response);\n    this.fileUploadType = this.getResponseProperty(\"FileUploadType\");\n    const sendResponse = this.getResponseProperty(\"SendResponse\");\n    this.sendResponse = sendResponse == null ? null : new SendResponse(sendResponse);\n    this.url = this.getResponseProperty(\"Url\");\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport {\n  FileUploadApiMethods,\n  FileUploadService,\n} from \"../../../abstractions/file-upload/file-upload.service\";\nimport { Utils } from \"../../../misc/utils\";\nimport { EncArrayBuffer } from \"../../../models/domain/enc-array-buffer\";\nimport { ErrorResponse } from \"../../../models/response/error.response\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { SendType } from \"../enums/send-type\";\nimport { SendData } from \"../models/data/send.data\";\nimport { Send } from \"../models/domain/send\";\nimport { SendAccessRequest } from \"../models/request/send-access.request\";\nimport { SendRequest } from \"../models/request/send.request\";\nimport { SendAccessResponse } from \"../models/response/send-access.response\";\nimport { SendFileDownloadDataResponse } from \"../models/response/send-file-download-data.response\";\nimport { SendFileUploadDataResponse } from \"../models/response/send-file-upload-data.response\";\nimport { SendResponse } from \"../models/response/send.response\";\nimport { SendAccessView } from \"../models/view/send-access.view\";\n\nimport { SendApiService as SendApiServiceAbstraction } from \"./send-api.service.abstraction\";\nimport { InternalSendService } from \"./send.service.abstraction\";\n\nexport class SendApiService implements SendApiServiceAbstraction {\n  constructor(\n    private apiService: ApiService,\n    private fileUploadService: FileUploadService,\n    private sendService: InternalSendService\n  ) {}\n\n  async getSend(id: string): Promise<SendResponse> {\n    const r = await this.apiService.send(\"GET\", \"/sends/\" + id, null, true, true);\n    return new SendResponse(r);\n  }\n\n  async postSendAccess(\n    id: string,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ): Promise<SendAccessResponse> {\n    const addSendIdHeader = (headers: Headers) => {\n      headers.set(\"Send-Id\", id);\n    };\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/sends/access/\" + id,\n      request,\n      false,\n      true,\n      apiUrl,\n      addSendIdHeader\n    );\n    return new SendAccessResponse(r);\n  }\n\n  async getSendFileDownloadData(\n    send: SendAccessView,\n    request: SendAccessRequest,\n    apiUrl?: string\n  ): Promise<SendFileDownloadDataResponse> {\n    const addSendIdHeader = (headers: Headers) => {\n      headers.set(\"Send-Id\", send.id);\n    };\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/sends/\" + send.id + \"/access/file/\" + send.file.id,\n      request,\n      false,\n      true,\n      apiUrl,\n      addSendIdHeader\n    );\n    return new SendFileDownloadDataResponse(r);\n  }\n\n  async getSends(): Promise<ListResponse<SendResponse>> {\n    const r = await this.apiService.send(\"GET\", \"/sends\", null, true, true);\n    return new ListResponse(r, SendResponse);\n  }\n\n  async postSend(request: SendRequest): Promise<SendResponse> {\n    const r = await this.apiService.send(\"POST\", \"/sends\", request, true, true);\n    return new SendResponse(r);\n  }\n\n  async postFileTypeSend(request: SendRequest): Promise<SendFileUploadDataResponse> {\n    const r = await this.apiService.send(\"POST\", \"/sends/file/v2\", request, true, true);\n    return new SendFileUploadDataResponse(r);\n  }\n\n  async renewSendFileUploadUrl(\n    sendId: string,\n    fileId: string\n  ): Promise<SendFileUploadDataResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/sends/\" + sendId + \"/file/\" + fileId,\n      null,\n      true,\n      true\n    );\n    return new SendFileUploadDataResponse(r);\n  }\n\n  postSendFile(sendId: string, fileId: string, data: FormData): Promise<any> {\n    return this.apiService.send(\"POST\", \"/sends/\" + sendId + \"/file/\" + fileId, data, true, false);\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async postSendFileLegacy(data: FormData): Promise<SendResponse> {\n    const r = await this.apiService.send(\"POST\", \"/sends/file\", data, true, true);\n    return new SendResponse(r);\n  }\n\n  async putSend(id: string, request: SendRequest): Promise<SendResponse> {\n    const r = await this.apiService.send(\"PUT\", \"/sends/\" + id, request, true, true);\n    return new SendResponse(r);\n  }\n\n  async putSendRemovePassword(id: string): Promise<SendResponse> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/sends/\" + id + \"/remove-password\",\n      null,\n      true,\n      true\n    );\n    return new SendResponse(r);\n  }\n\n  deleteSend(id: string): Promise<any> {\n    return this.apiService.send(\"DELETE\", \"/sends/\" + id, null, true, false);\n  }\n\n  async save(sendData: [Send, EncArrayBuffer]): Promise<any> {\n    const response = await this.upload(sendData);\n\n    const data = new SendData(response);\n    await this.sendService.upsert(data);\n  }\n\n  async delete(id: string): Promise<any> {\n    await this.deleteSend(id);\n    await this.sendService.delete(id);\n  }\n\n  async removePassword(id: string): Promise<any> {\n    const response = await this.putSendRemovePassword(id);\n    const data = new SendData(response);\n    await this.sendService.upsert(data);\n  }\n\n  // Send File Upload methoids\n\n  private async upload(sendData: [Send, EncArrayBuffer]): Promise<SendResponse> {\n    const request = new SendRequest(sendData[0], sendData[1]?.buffer.byteLength);\n    let response: SendResponse;\n    if (sendData[0].id == null) {\n      if (sendData[0].type === SendType.Text) {\n        response = await this.postSend(request);\n      } else {\n        try {\n          const uploadDataResponse = await this.postFileTypeSend(request);\n          response = uploadDataResponse.sendResponse;\n          await this.fileUploadService.upload(\n            uploadDataResponse,\n            sendData[0].file.fileName,\n            sendData[1],\n            this.generateMethods(uploadDataResponse, response)\n          );\n        } catch (e) {\n          if (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) {\n            response = await this.legacyServerSendFileUpload(sendData, request);\n          } else if (e instanceof ErrorResponse) {\n            throw new Error((e as ErrorResponse).getSingleMessage());\n          } else {\n            throw e;\n          }\n        }\n      }\n      sendData[0].id = response.id;\n      sendData[0].accessId = response.accessId;\n    } else {\n      response = await this.putSend(sendData[0].id, request);\n    }\n    return response;\n  }\n\n  private generateMethods(\n    uploadData: SendFileUploadDataResponse,\n    response: SendResponse\n  ): FileUploadApiMethods {\n    return {\n      postDirect: this.generatePostDirectCallback(response),\n      renewFileUploadUrl: this.generateRenewFileUploadUrlCallback(response.id, response.file.id),\n      rollback: this.generateRollbackCallback(response.id),\n    };\n  }\n\n  private generatePostDirectCallback(sendResponse: SendResponse) {\n    return (data: FormData) => {\n      return this.postSendFile(sendResponse.id, sendResponse.file.id, data);\n    };\n  }\n\n  private generateRenewFileUploadUrlCallback(sendId: string, fileId: string) {\n    return async () => {\n      const renewResponse = await this.renewSendFileUploadUrl(sendId, fileId);\n      return renewResponse?.url;\n    };\n  }\n\n  private generateRollbackCallback(sendId: string) {\n    return () => {\n      return this.deleteSend(sendId);\n    };\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async legacyServerSendFileUpload(\n    sendData: [Send, EncArrayBuffer],\n    request: SendRequest\n  ): Promise<SendResponse> {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([sendData[1].buffer], { type: \"application/octet-stream\" });\n      fd.append(\"model\", JSON.stringify(request));\n      fd.append(\"data\", blob, sendData[0].file.fileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"model\", JSON.stringify(request));\n        fd.append(\n          \"data\",\n          Buffer.from(sendData[1].buffer) as any,\n          {\n            filepath: sendData[0].file.fileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n    return await this.postSendFileLegacy(fd);\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../../models/domain/domain-base\";\nimport { EncString } from \"../../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../../models/domain/symmetric-crypto-key\";\nimport { SendFileData } from \"../data/send-file.data\";\nimport { SendFileView } from \"../view/send-file.view\";\n\nexport class SendFile extends Domain {\n  id: string;\n  size: string;\n  sizeName: string;\n  fileName: EncString;\n\n  constructor(obj?: SendFileData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.size = obj.size;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        sizeName: null,\n        fileName: null,\n      },\n      [\"id\", \"sizeName\"]\n    );\n  }\n\n  async decrypt(key: SymmetricCryptoKey): Promise<SendFileView> {\n    const view = await this.decryptObj(\n      new SendFileView(this),\n      {\n        fileName: null,\n      },\n      null,\n      key\n    );\n    return view;\n  }\n\n  static fromJSON(obj: Jsonify<SendFile>) {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new SendFile(), obj, {\n      fileName: EncString.fromJSON(obj.fileName),\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport Domain from \"../../../../models/domain/domain-base\";\nimport { EncString } from \"../../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../../models/domain/symmetric-crypto-key\";\nimport { SendTextData } from \"../data/send-text.data\";\nimport { SendTextView } from \"../view/send-text.view\";\n\nexport class SendText extends Domain {\n  text: EncString;\n  hidden: boolean;\n\n  constructor(obj?: SendTextData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.hidden = obj.hidden;\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        text: null,\n      },\n      []\n    );\n  }\n\n  decrypt(key: SymmetricCryptoKey): Promise<SendTextView> {\n    return this.decryptObj(\n      new SendTextView(this),\n      {\n        text: null,\n      },\n      null,\n      key\n    );\n  }\n\n  static fromJSON(obj: Jsonify<SendText>) {\n    if (obj == null) {\n      return null;\n    }\n\n    return Object.assign(new SendText(), obj, {\n      text: EncString.fromJSON(obj.text),\n    });\n  }\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { Utils } from \"../../../../misc/utils\";\nimport Domain from \"../../../../models/domain/domain-base\";\nimport { EncString } from \"../../../../models/domain/enc-string\";\nimport { SendType } from \"../../enums/send-type\";\nimport { SendData } from \"../data/send.data\";\nimport { SendView } from \"../view/send.view\";\n\nimport { SendFile } from \"./send-file\";\nimport { SendText } from \"./send-text\";\n\nexport class Send extends Domain {\n  id: string;\n  accessId: string;\n  type: SendType;\n  name: EncString;\n  notes: EncString;\n  file: SendFile;\n  text: SendText;\n  key: EncString;\n  maxAccessCount?: number;\n  accessCount: number;\n  revisionDate: Date;\n  expirationDate: Date;\n  deletionDate: Date;\n  password: string;\n  disabled: boolean;\n  hideEmail: boolean;\n\n  constructor(obj?: SendData) {\n    super();\n    if (obj == null) {\n      return;\n    }\n\n    this.buildDomainModel(\n      this,\n      obj,\n      {\n        id: null,\n        accessId: null,\n        name: null,\n        notes: null,\n        key: null,\n      },\n      [\"id\", \"accessId\"]\n    );\n\n    this.type = obj.type;\n    this.maxAccessCount = obj.maxAccessCount;\n    this.accessCount = obj.accessCount;\n    this.password = obj.password;\n    this.disabled = obj.disabled;\n    this.revisionDate = obj.revisionDate != null ? new Date(obj.revisionDate) : null;\n    this.deletionDate = obj.deletionDate != null ? new Date(obj.deletionDate) : null;\n    this.expirationDate = obj.expirationDate != null ? new Date(obj.expirationDate) : null;\n    this.hideEmail = obj.hideEmail;\n\n    switch (this.type) {\n      case SendType.Text:\n        this.text = new SendText(obj.text);\n        break;\n      case SendType.File:\n        this.file = new SendFile(obj.file);\n        break;\n      default:\n        break;\n    }\n  }\n\n  async decrypt(): Promise<SendView> {\n    const model = new SendView(this);\n\n    const cryptoService = Utils.getContainerService().getCryptoService();\n\n    try {\n      model.key = await cryptoService.decryptToBytes(this.key, null);\n      model.cryptoKey = await cryptoService.makeSendKey(model.key);\n    } catch (e) {\n      // TODO: error?\n    }\n\n    await this.decryptObj(\n      model,\n      {\n        name: null,\n        notes: null,\n      },\n      null,\n      model.cryptoKey\n    );\n\n    switch (this.type) {\n      case SendType.File:\n        model.file = await this.file.decrypt(model.cryptoKey);\n        break;\n      case SendType.Text:\n        model.text = await this.text.decrypt(model.cryptoKey);\n        break;\n      default:\n        break;\n    }\n\n    return model;\n  }\n\n  static fromJSON(obj: Jsonify<Send>) {\n    if (obj == null) {\n      return null;\n    }\n\n    const revisionDate = obj.revisionDate == null ? null : new Date(obj.revisionDate);\n    const expirationDate = obj.expirationDate == null ? null : new Date(obj.expirationDate);\n    const deletionDate = obj.deletionDate == null ? null : new Date(obj.deletionDate);\n\n    return Object.assign(new Send(), obj, {\n      key: EncString.fromJSON(obj.key),\n      name: EncString.fromJSON(obj.name),\n      notes: EncString.fromJSON(obj.notes),\n      text: SendText.fromJSON(obj.text),\n      file: SendFile.fromJSON(obj.file),\n      revisionDate,\n      expirationDate,\n      deletionDate,\n    });\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { CryptoService } from \"../../../abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"../../../abstractions/cryptoFunction.service\";\nimport { I18nService } from \"../../../abstractions/i18n.service\";\nimport { StateService } from \"../../../abstractions/state.service\";\nimport { SEND_KDF_ITERATIONS } from \"../../../enums\";\nimport { Utils } from \"../../../misc/utils\";\nimport { EncArrayBuffer } from \"../../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { SendType } from \"../enums/send-type\";\nimport { SendData } from \"../models/data/send.data\";\nimport { Send } from \"../models/domain/send\";\nimport { SendFile } from \"../models/domain/send-file\";\nimport { SendText } from \"../models/domain/send-text\";\nimport { SendView } from \"../models/view/send.view\";\n\nimport { InternalSendService as InternalSendServiceAbstraction } from \"./send.service.abstraction\";\n\nexport class SendService implements InternalSendServiceAbstraction {\n  protected _sends: BehaviorSubject<Send[]> = new BehaviorSubject([]);\n  protected _sendViews: BehaviorSubject<SendView[]> = new BehaviorSubject([]);\n\n  sends$ = this._sends.asObservable();\n  sendViews$ = this._sendViews.asObservable();\n\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private stateService: StateService\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._sends.next([]);\n            this._sendViews.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getEncryptedSends();\n\n          await this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  async clearCache(): Promise<void> {\n    await this._sendViews.next([]);\n  }\n\n  async encrypt(\n    model: SendView,\n    file: File | ArrayBuffer,\n    password: string,\n    key?: SymmetricCryptoKey\n  ): Promise<[Send, EncArrayBuffer]> {\n    let fileData: EncArrayBuffer = null;\n    const send = new Send();\n    send.id = model.id;\n    send.type = model.type;\n    send.disabled = model.disabled;\n    send.hideEmail = model.hideEmail;\n    send.maxAccessCount = model.maxAccessCount;\n    if (model.key == null) {\n      model.key = await this.cryptoFunctionService.randomBytes(16);\n      model.cryptoKey = await this.cryptoService.makeSendKey(model.key);\n    }\n    if (password != null) {\n      const passwordHash = await this.cryptoFunctionService.pbkdf2(\n        password,\n        model.key,\n        \"sha256\",\n        SEND_KDF_ITERATIONS\n      );\n      send.password = Utils.fromBufferToB64(passwordHash);\n    }\n    send.key = await this.cryptoService.encrypt(model.key, key);\n    send.name = await this.cryptoService.encrypt(model.name, model.cryptoKey);\n    send.notes = await this.cryptoService.encrypt(model.notes, model.cryptoKey);\n    if (send.type === SendType.Text) {\n      send.text = new SendText();\n      send.text.text = await this.cryptoService.encrypt(model.text.text, model.cryptoKey);\n      send.text.hidden = model.text.hidden;\n    } else if (send.type === SendType.File) {\n      send.file = new SendFile();\n      if (file != null) {\n        if (file instanceof ArrayBuffer) {\n          const [name, data] = await this.encryptFileData(\n            model.file.fileName,\n            file,\n            model.cryptoKey\n          );\n          send.file.fileName = name;\n          fileData = data;\n        } else {\n          fileData = await this.parseFile(send, file, model.cryptoKey);\n        }\n      }\n    }\n\n    return [send, fileData];\n  }\n\n  get(id: string): Send {\n    const sends = this._sends.getValue();\n    return sends.find((send) => send.id === id);\n  }\n\n  async getFromState(id: string): Promise<Send> {\n    const sends = await this.stateService.getEncryptedSends();\n    // eslint-disable-next-line\n    if (sends == null || !sends.hasOwnProperty(id)) {\n      return null;\n    }\n\n    return new Send(sends[id]);\n  }\n\n  async getAll(): Promise<Send[]> {\n    const sends = await this.stateService.getEncryptedSends();\n    const response: Send[] = [];\n    for (const id in sends) {\n      // eslint-disable-next-line\n      if (sends.hasOwnProperty(id)) {\n        response.push(new Send(sends[id]));\n      }\n    }\n    return response;\n  }\n\n  async getAllDecryptedFromState(): Promise<SendView[]> {\n    let decSends = await this.stateService.getDecryptedSends();\n    if (decSends != null) {\n      return decSends;\n    }\n\n    decSends = [];\n    const hasKey = await this.cryptoService.hasKey();\n    if (!hasKey) {\n      throw new Error(\"No key.\");\n    }\n\n    const promises: Promise<any>[] = [];\n    const sends = await this.getAll();\n    sends.forEach((send) => {\n      promises.push(send.decrypt().then((f) => decSends.push(f)));\n    });\n\n    await Promise.all(promises);\n    decSends.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n\n    await this.stateService.setDecryptedSends(decSends);\n    return decSends;\n  }\n\n  async upsert(send: SendData | SendData[]): Promise<any> {\n    let sends = await this.stateService.getEncryptedSends();\n    if (sends == null) {\n      sends = {};\n    }\n    if (send instanceof SendData) {\n      const s = send as SendData;\n      sends[s.id] = s;\n    } else {\n      (send as SendData[]).forEach((s) => {\n        sends[s.id] = s;\n      });\n    }\n\n    await this.replace(sends);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._sends.next([]);\n      this._sendViews.next([]);\n    }\n    await this.stateService.setDecryptedSends(null, { userId: userId });\n    await this.stateService.setEncryptedSends(null, { userId: userId });\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const sends = await this.stateService.getEncryptedSends();\n    if (sends == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (sends[id] == null) {\n        return;\n      }\n      delete sends[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete sends[i];\n      });\n    }\n\n    await this.replace(sends);\n  }\n\n  async replace(sends: { [id: string]: SendData }): Promise<any> {\n    await this.updateObservables(sends);\n    await this.stateService.setEncryptedSends(sends);\n  }\n\n  private parseFile(send: Send, file: File, key: SymmetricCryptoKey): Promise<EncArrayBuffer> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n      reader.onload = async (evt) => {\n        try {\n          const [name, data] = await this.encryptFileData(\n            file.name,\n            evt.target.result as ArrayBuffer,\n            key\n          );\n          send.file.fileName = name;\n          resolve(data);\n        } catch (e) {\n          reject(e);\n        }\n      };\n      reader.onerror = () => {\n        reject(\"Error reading file.\");\n      };\n    });\n  }\n\n  private async encryptFileData(\n    fileName: string,\n    data: ArrayBuffer,\n    key: SymmetricCryptoKey\n  ): Promise<[EncString, EncArrayBuffer]> {\n    const encFileName = await this.cryptoService.encrypt(fileName, key);\n    const encFileData = await this.cryptoService.encryptToBytes(data, key);\n    return [encFileName, encFileData];\n  }\n\n  private async updateObservables(sendsMap: { [id: string]: SendData }) {\n    const sends = Object.values(sendsMap || {}).map((f) => new Send(f));\n    this._sends.next(sends);\n\n    if (await this.cryptoService.hasKey()) {\n      this._sendViews.next(await this.decryptSends(sends));\n    }\n  }\n\n  private async decryptSends(sends: Send[]) {\n    const decryptSendPromises = sends.map((s) => s.decrypt());\n    const decryptedSends = await Promise.all(decryptSendPromises);\n\n    decryptedSends.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n    return decryptedSends;\n  }\n}\n","import { EncArrayBuffer } from \"../../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { Cipher } from \"../../models/domain/cipher\";\nimport { CipherResponse } from \"../../models/response/cipher.response\";\n\nexport abstract class CipherFileUploadService {\n  upload: (\n    cipher: Cipher,\n    encFileName: EncString,\n    encData: EncArrayBuffer,\n    admin: boolean,\n    dataEncKey: [SymmetricCryptoKey, EncString]\n  ) => Promise<CipherResponse>;\n}\n","import { Observable } from \"rxjs\";\n\nimport { SyncEventArgs } from \"../../types/sync-event-args\";\n\nexport abstract class SyncNotifierService {\n  sync$: Observable<SyncEventArgs>;\n  next: (event: SyncEventArgs) => void;\n}\n","import { CipherView } from \"../view/cipher.view\";\n\nconst CacheTTL = 3000;\n\nexport class SortedCiphersCache {\n  private readonly sortedCiphersByUrl: Map<string, Ciphers> = new Map<string, Ciphers>();\n  private readonly timeouts: Map<string, any> = new Map<string, any>();\n\n  constructor(private readonly comparator: (a: CipherView, b: CipherView) => number) {}\n\n  isCached(url: string) {\n    return this.sortedCiphersByUrl.has(url);\n  }\n\n  addCiphers(url: string, ciphers: CipherView[]) {\n    ciphers.sort(this.comparator);\n    this.sortedCiphersByUrl.set(url, new Ciphers(ciphers));\n    this.resetTimer(url);\n  }\n\n  getLastUsed(url: string) {\n    this.resetTimer(url);\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastUsed() : null;\n  }\n\n  getLastLaunched(url: string) {\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getLastLaunched() : null;\n  }\n\n  getNext(url: string) {\n    this.resetTimer(url);\n    return this.isCached(url) ? this.sortedCiphersByUrl.get(url).getNext() : null;\n  }\n\n  updateLastUsedIndex(url: string) {\n    if (this.isCached(url)) {\n      this.sortedCiphersByUrl.get(url).updateLastUsedIndex();\n    }\n  }\n\n  clear() {\n    this.sortedCiphersByUrl.clear();\n    this.timeouts.clear();\n  }\n\n  private resetTimer(url: string) {\n    clearTimeout(this.timeouts.get(url));\n    this.timeouts.set(\n      url,\n      setTimeout(() => {\n        this.sortedCiphersByUrl.delete(url);\n        this.timeouts.delete(url);\n      }, CacheTTL)\n    );\n  }\n}\n\nclass Ciphers {\n  lastUsedIndex = -1;\n\n  constructor(private readonly ciphers: CipherView[]) {}\n\n  getLastUsed() {\n    this.lastUsedIndex = Math.max(this.lastUsedIndex, 0);\n    return this.ciphers[this.lastUsedIndex];\n  }\n\n  getLastLaunched() {\n    const usedCiphers = this.ciphers.filter((cipher) => cipher.localData?.lastLaunched);\n    const sortedCiphers = usedCiphers.sort(\n      (x, y) => y.localData.lastLaunched.valueOf() - x.localData.lastLaunched.valueOf()\n    );\n    return sortedCiphers[0];\n  }\n\n  getNextIndex() {\n    return (this.lastUsedIndex + 1) % this.ciphers.length;\n  }\n\n  getNext() {\n    return this.ciphers[this.getNextIndex()];\n  }\n\n  updateLastUsedIndex() {\n    this.lastUsedIndex = this.getNextIndex();\n  }\n}\n","export class CipherBulkDeleteRequest {\n  ids: string[];\n  organizationId: string;\n\n  constructor(ids: string[], organizationId?: string) {\n    this.ids = ids == null ? [] : ids;\n    this.organizationId = organizationId;\n  }\n}\n","export class CipherBulkMoveRequest {\n  ids: string[];\n  folderId: string;\n\n  constructor(ids: string[], folderId: string) {\n    this.ids = ids == null ? [] : ids;\n    this.folderId = folderId;\n  }\n}\n","export class CipherBulkRestoreRequest {\n  ids: string[];\n\n  constructor(ids: string[]) {\n    this.ids = ids == null ? [] : ids;\n  }\n}\n","export class AttachmentRequest {\n  fileName: string;\n  key: string;\n  fileSize: number;\n  adminRequest: boolean;\n}\n","import { CardApi } from \"../../../models/api/card.api\";\nimport { FieldApi } from \"../../../models/api/field.api\";\nimport { IdentityApi } from \"../../../models/api/identity.api\";\nimport { LoginUriApi } from \"../../../models/api/login-uri.api\";\nimport { LoginApi } from \"../../../models/api/login.api\";\nimport { SecureNoteApi } from \"../../../models/api/secure-note.api\";\nimport { CipherRepromptType } from \"../../enums/cipher-reprompt-type\";\nimport { CipherType } from \"../../enums/cipher-type\";\nimport { Cipher } from \"../domain/cipher\";\n\nimport { AttachmentRequest } from \"./attachment.request\";\nimport { PasswordHistoryRequest } from \"./password-history.request\";\n\nexport class CipherRequest {\n  type: CipherType;\n  folderId: string;\n  organizationId: string;\n  name: string;\n  notes: string;\n  favorite: boolean;\n  login: LoginApi;\n  secureNote: SecureNoteApi;\n  card: CardApi;\n  identity: IdentityApi;\n  fields: FieldApi[];\n  passwordHistory: PasswordHistoryRequest[];\n  // Deprecated, remove at some point and rename attachments2 to attachments\n  attachments: { [id: string]: string };\n  attachments2: { [id: string]: AttachmentRequest };\n  lastKnownRevisionDate: Date;\n  reprompt: CipherRepromptType;\n\n  constructor(cipher: Cipher) {\n    this.type = cipher.type;\n    this.folderId = cipher.folderId;\n    this.organizationId = cipher.organizationId;\n    this.name = cipher.name ? cipher.name.encryptedString : null;\n    this.notes = cipher.notes ? cipher.notes.encryptedString : null;\n    this.favorite = cipher.favorite;\n    this.lastKnownRevisionDate = cipher.revisionDate;\n    this.reprompt = cipher.reprompt;\n\n    switch (this.type) {\n      case CipherType.Login:\n        this.login = new LoginApi();\n        this.login.uris = null;\n        this.login.username = cipher.login.username ? cipher.login.username.encryptedString : null;\n        this.login.password = cipher.login.password ? cipher.login.password.encryptedString : null;\n        this.login.passwordRevisionDate =\n          cipher.login.passwordRevisionDate != null\n            ? cipher.login.passwordRevisionDate.toISOString()\n            : null;\n        this.login.totp = cipher.login.totp ? cipher.login.totp.encryptedString : null;\n        this.login.autofillOnPageLoad = cipher.login.autofillOnPageLoad;\n\n        if (cipher.login.uris != null) {\n          this.login.uris = cipher.login.uris.map((u) => {\n            const uri = new LoginUriApi();\n            uri.uri = u.uri != null ? u.uri.encryptedString : null;\n            uri.match = u.match != null ? u.match : null;\n            return uri;\n          });\n        }\n        break;\n      case CipherType.SecureNote:\n        this.secureNote = new SecureNoteApi();\n        this.secureNote.type = cipher.secureNote.type;\n        break;\n      case CipherType.Card:\n        this.card = new CardApi();\n        this.card.cardholderName =\n          cipher.card.cardholderName != null ? cipher.card.cardholderName.encryptedString : null;\n        this.card.brand = cipher.card.brand != null ? cipher.card.brand.encryptedString : null;\n        this.card.number = cipher.card.number != null ? cipher.card.number.encryptedString : null;\n        this.card.expMonth =\n          cipher.card.expMonth != null ? cipher.card.expMonth.encryptedString : null;\n        this.card.expYear =\n          cipher.card.expYear != null ? cipher.card.expYear.encryptedString : null;\n        this.card.code = cipher.card.code != null ? cipher.card.code.encryptedString : null;\n        break;\n      case CipherType.Identity:\n        this.identity = new IdentityApi();\n        this.identity.title =\n          cipher.identity.title != null ? cipher.identity.title.encryptedString : null;\n        this.identity.firstName =\n          cipher.identity.firstName != null ? cipher.identity.firstName.encryptedString : null;\n        this.identity.middleName =\n          cipher.identity.middleName != null ? cipher.identity.middleName.encryptedString : null;\n        this.identity.lastName =\n          cipher.identity.lastName != null ? cipher.identity.lastName.encryptedString : null;\n        this.identity.address1 =\n          cipher.identity.address1 != null ? cipher.identity.address1.encryptedString : null;\n        this.identity.address2 =\n          cipher.identity.address2 != null ? cipher.identity.address2.encryptedString : null;\n        this.identity.address3 =\n          cipher.identity.address3 != null ? cipher.identity.address3.encryptedString : null;\n        this.identity.city =\n          cipher.identity.city != null ? cipher.identity.city.encryptedString : null;\n        this.identity.state =\n          cipher.identity.state != null ? cipher.identity.state.encryptedString : null;\n        this.identity.postalCode =\n          cipher.identity.postalCode != null ? cipher.identity.postalCode.encryptedString : null;\n        this.identity.country =\n          cipher.identity.country != null ? cipher.identity.country.encryptedString : null;\n        this.identity.company =\n          cipher.identity.company != null ? cipher.identity.company.encryptedString : null;\n        this.identity.email =\n          cipher.identity.email != null ? cipher.identity.email.encryptedString : null;\n        this.identity.phone =\n          cipher.identity.phone != null ? cipher.identity.phone.encryptedString : null;\n        this.identity.ssn =\n          cipher.identity.ssn != null ? cipher.identity.ssn.encryptedString : null;\n        this.identity.username =\n          cipher.identity.username != null ? cipher.identity.username.encryptedString : null;\n        this.identity.passportNumber =\n          cipher.identity.passportNumber != null\n            ? cipher.identity.passportNumber.encryptedString\n            : null;\n        this.identity.licenseNumber =\n          cipher.identity.licenseNumber != null\n            ? cipher.identity.licenseNumber.encryptedString\n            : null;\n        break;\n      default:\n        break;\n    }\n\n    if (cipher.fields != null) {\n      this.fields = cipher.fields.map((f) => {\n        const field = new FieldApi();\n        field.type = f.type;\n        field.name = f.name ? f.name.encryptedString : null;\n        field.value = f.value ? f.value.encryptedString : null;\n        field.linkedId = f.linkedId;\n        return field;\n      });\n    }\n\n    if (cipher.passwordHistory != null) {\n      this.passwordHistory = [];\n      cipher.passwordHistory.forEach((ph) => {\n        this.passwordHistory.push({\n          lastUsedDate: ph.lastUsedDate,\n          password: ph.password ? ph.password.encryptedString : null,\n        });\n      });\n    }\n\n    if (cipher.attachments != null) {\n      this.attachments = {};\n      this.attachments2 = {};\n      cipher.attachments.forEach((attachment) => {\n        const fileName = attachment.fileName ? attachment.fileName.encryptedString : null;\n        this.attachments[attachment.id] = fileName;\n        const attachmentRequest = new AttachmentRequest();\n        attachmentRequest.fileName = fileName;\n        if (attachment.key != null) {\n          attachmentRequest.key = attachment.key.encryptedString;\n        }\n        this.attachments2[attachment.id] = attachmentRequest;\n      });\n    }\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherWithIdRequest extends CipherRequest {\n  id: string;\n\n  constructor(cipher: Cipher) {\n    super(cipher);\n    this.id = cipher.id;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherWithIdRequest } from \"./cipher-with-id.request\";\n\nexport class CipherBulkShareRequest {\n  ciphers: CipherWithIdRequest[];\n  collectionIds: string[];\n\n  constructor(ciphers: Cipher[], collectionIds: string[]) {\n    if (ciphers != null) {\n      this.ciphers = [];\n      ciphers.forEach((c) => {\n        this.ciphers.push(new CipherWithIdRequest(c));\n      });\n    }\n    this.collectionIds = collectionIds;\n  }\n}\n","export class CipherCollectionsRequest {\n  collectionIds: string[];\n\n  constructor(collectionIds: string[]) {\n    this.collectionIds = collectionIds == null ? [] : collectionIds;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherCreateRequest {\n  cipher: CipherRequest;\n  collectionIds: string[];\n\n  constructor(cipher: Cipher) {\n    this.cipher = new CipherRequest(cipher);\n    this.collectionIds = cipher.collectionIds;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nexport class CipherPartialRequest {\n  folderId: string;\n  favorite: boolean;\n\n  constructor(cipher: Cipher) {\n    this.folderId = cipher.folderId;\n    this.favorite = cipher.favorite;\n  }\n}\n","import { Cipher } from \"../domain/cipher\";\n\nimport { CipherRequest } from \"./cipher.request\";\n\nexport class CipherShareRequest {\n  cipher: CipherRequest;\n  collectionIds: string[];\n\n  constructor(cipher: Cipher) {\n    this.cipher = new CipherRequest(cipher);\n    this.collectionIds = cipher.collectionIds;\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { CryptoService } from \"../../abstractions/crypto.service\";\nimport { EncryptService } from \"../../abstractions/encrypt.service\";\nimport { I18nService } from \"../../abstractions/i18n.service\";\nimport { SearchService } from \"../../abstractions/search.service\";\nimport { SettingsService } from \"../../abstractions/settings.service\";\nimport { StateService } from \"../../abstractions/state.service\";\nimport { FieldType, UriMatchType } from \"../../enums\";\nimport { sequentialize } from \"../../misc/sequentialize\";\nimport { Utils } from \"../../misc/utils\";\nimport Domain from \"../../models/domain/domain-base\";\nimport { EncArrayBuffer } from \"../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../models/domain/symmetric-crypto-key\";\nimport { ErrorResponse } from \"../../models/response/error.response\";\nimport { View } from \"../../models/view/view\";\nimport { CipherService as CipherServiceAbstraction } from \"../abstractions/cipher.service\";\nimport { CipherFileUploadService } from \"../abstractions/file-upload/cipher-file-upload.service\";\nimport { CipherType } from \"../enums/cipher-type\";\nimport { CipherData } from \"../models/data/cipher.data\";\nimport { Attachment } from \"../models/domain/attachment\";\nimport { Card } from \"../models/domain/card\";\nimport { Cipher } from \"../models/domain/cipher\";\nimport { Field } from \"../models/domain/field\";\nimport { Identity } from \"../models/domain/identity\";\nimport { Login } from \"../models/domain/login\";\nimport { LoginUri } from \"../models/domain/login-uri\";\nimport { Password } from \"../models/domain/password\";\nimport { SecureNote } from \"../models/domain/secure-note\";\nimport { SortedCiphersCache } from \"../models/domain/sorted-ciphers-cache\";\nimport { CipherBulkDeleteRequest } from \"../models/request/cipher-bulk-delete.request\";\nimport { CipherBulkMoveRequest } from \"../models/request/cipher-bulk-move.request\";\nimport { CipherBulkRestoreRequest } from \"../models/request/cipher-bulk-restore.request\";\nimport { CipherBulkShareRequest } from \"../models/request/cipher-bulk-share.request\";\nimport { CipherCollectionsRequest } from \"../models/request/cipher-collections.request\";\nimport { CipherCreateRequest } from \"../models/request/cipher-create.request\";\nimport { CipherPartialRequest } from \"../models/request/cipher-partial.request\";\nimport { CipherShareRequest } from \"../models/request/cipher-share.request\";\nimport { CipherRequest } from \"../models/request/cipher.request\";\nimport { CipherResponse } from \"../models/response/cipher.response\";\nimport { AttachmentView } from \"../models/view/attachment.view\";\nimport { CipherView } from \"../models/view/cipher.view\";\nimport { FieldView } from \"../models/view/field.view\";\nimport { PasswordHistoryView } from \"../models/view/password-history.view\";\n\nexport class CipherService implements CipherServiceAbstraction {\n  private sortedCiphersCache: SortedCiphersCache = new SortedCiphersCache(\n    this.sortCiphersByLastUsed\n  );\n\n  constructor(\n    private cryptoService: CryptoService,\n    private settingsService: SettingsService,\n    private apiService: ApiService,\n    private i18nService: I18nService,\n    private searchService: SearchService,\n    private stateService: StateService,\n    private encryptService: EncryptService,\n    private cipherFileUploadService: CipherFileUploadService\n  ) {}\n\n  async getDecryptedCipherCache(): Promise<CipherView[]> {\n    const decryptedCiphers = await this.stateService.getDecryptedCiphers();\n    return decryptedCiphers;\n  }\n\n  async setDecryptedCipherCache(value: CipherView[]) {\n    await this.stateService.setDecryptedCiphers(value);\n    if (this.searchService != null) {\n      if (value == null) {\n        this.searchService.clearIndex();\n      } else {\n        this.searchService.indexCiphers(value);\n      }\n    }\n  }\n\n  async clearCache(userId?: string): Promise<void> {\n    await this.clearDecryptedCiphersState(userId);\n  }\n\n  async encrypt(\n    model: CipherView,\n    key?: SymmetricCryptoKey,\n    originalCipher: Cipher = null\n  ): Promise<Cipher> {\n    // Adjust password history\n    if (model.id != null) {\n      if (originalCipher == null) {\n        originalCipher = await this.get(model.id);\n      }\n      if (originalCipher != null) {\n        const existingCipher = await originalCipher.decrypt();\n        model.passwordHistory = existingCipher.passwordHistory || [];\n        if (model.type === CipherType.Login && existingCipher.type === CipherType.Login) {\n          if (\n            existingCipher.login.password != null &&\n            existingCipher.login.password !== \"\" &&\n            existingCipher.login.password !== model.login.password\n          ) {\n            const ph = new PasswordHistoryView();\n            ph.password = existingCipher.login.password;\n            ph.lastUsedDate = model.login.passwordRevisionDate = new Date();\n            model.passwordHistory.splice(0, 0, ph);\n          } else {\n            model.login.passwordRevisionDate = existingCipher.login.passwordRevisionDate;\n          }\n        }\n        if (existingCipher.hasFields) {\n          const existingHiddenFields = existingCipher.fields.filter(\n            (f) =>\n              f.type === FieldType.Hidden &&\n              f.name != null &&\n              f.name !== \"\" &&\n              f.value != null &&\n              f.value !== \"\"\n          );\n          const hiddenFields =\n            model.fields == null\n              ? []\n              : model.fields.filter(\n                  (f) => f.type === FieldType.Hidden && f.name != null && f.name !== \"\"\n                );\n          existingHiddenFields.forEach((ef) => {\n            const matchedField = hiddenFields.find((f) => f.name === ef.name);\n            if (matchedField == null || matchedField.value !== ef.value) {\n              const ph = new PasswordHistoryView();\n              ph.password = ef.name + \": \" + ef.value;\n              ph.lastUsedDate = new Date();\n              model.passwordHistory.splice(0, 0, ph);\n            }\n          });\n        }\n      }\n      if (model.passwordHistory != null && model.passwordHistory.length === 0) {\n        model.passwordHistory = null;\n      } else if (model.passwordHistory != null && model.passwordHistory.length > 5) {\n        // only save last 5 history\n        model.passwordHistory = model.passwordHistory.slice(0, 5);\n      }\n    }\n\n    const cipher = new Cipher();\n    cipher.id = model.id;\n    cipher.folderId = model.folderId;\n    cipher.favorite = model.favorite;\n    cipher.organizationId = model.organizationId;\n    cipher.type = model.type;\n    cipher.collectionIds = model.collectionIds;\n    cipher.revisionDate = model.revisionDate;\n    cipher.reprompt = model.reprompt;\n    cipher.edit = model.edit;\n\n    if (key == null && cipher.organizationId != null) {\n      key = await this.cryptoService.getOrgKey(cipher.organizationId);\n      if (key == null) {\n        throw new Error(\"Cannot encrypt cipher for organization. No key.\");\n      }\n    }\n    await Promise.all([\n      this.encryptObjProperty(\n        model,\n        cipher,\n        {\n          name: null,\n          notes: null,\n        },\n        key\n      ),\n      this.encryptCipherData(cipher, model, key),\n      this.encryptFields(model.fields, key).then((fields) => {\n        cipher.fields = fields;\n      }),\n      this.encryptPasswordHistories(model.passwordHistory, key).then((ph) => {\n        cipher.passwordHistory = ph;\n      }),\n      this.encryptAttachments(model.attachments, key).then((attachments) => {\n        cipher.attachments = attachments;\n      }),\n    ]);\n\n    return cipher;\n  }\n\n  async encryptAttachments(\n    attachmentsModel: AttachmentView[],\n    key: SymmetricCryptoKey\n  ): Promise<Attachment[]> {\n    if (attachmentsModel == null || attachmentsModel.length === 0) {\n      return null;\n    }\n\n    const promises: Promise<any>[] = [];\n    const encAttachments: Attachment[] = [];\n    attachmentsModel.forEach(async (model) => {\n      const attachment = new Attachment();\n      attachment.id = model.id;\n      attachment.size = model.size;\n      attachment.sizeName = model.sizeName;\n      attachment.url = model.url;\n      const promise = this.encryptObjProperty(\n        model,\n        attachment,\n        {\n          fileName: null,\n        },\n        key\n      ).then(async () => {\n        if (model.key != null) {\n          attachment.key = await this.cryptoService.encrypt(model.key.key, key);\n        }\n        encAttachments.push(attachment);\n      });\n      promises.push(promise);\n    });\n\n    await Promise.all(promises);\n    return encAttachments;\n  }\n\n  async encryptFields(fieldsModel: FieldView[], key: SymmetricCryptoKey): Promise<Field[]> {\n    if (!fieldsModel || !fieldsModel.length) {\n      return null;\n    }\n\n    const self = this;\n    const encFields: Field[] = [];\n    await fieldsModel.reduce(async (promise, field) => {\n      await promise;\n      const encField = await self.encryptField(field, key);\n      encFields.push(encField);\n    }, Promise.resolve());\n\n    return encFields;\n  }\n\n  async encryptField(fieldModel: FieldView, key: SymmetricCryptoKey): Promise<Field> {\n    const field = new Field();\n    field.type = fieldModel.type;\n    field.linkedId = fieldModel.linkedId;\n    // normalize boolean type field values\n    if (fieldModel.type === FieldType.Boolean && fieldModel.value !== \"true\") {\n      fieldModel.value = \"false\";\n    }\n\n    await this.encryptObjProperty(\n      fieldModel,\n      field,\n      {\n        name: null,\n        value: null,\n      },\n      key\n    );\n\n    return field;\n  }\n\n  async encryptPasswordHistories(\n    phModels: PasswordHistoryView[],\n    key: SymmetricCryptoKey\n  ): Promise<Password[]> {\n    if (!phModels || !phModels.length) {\n      return null;\n    }\n\n    const self = this;\n    const encPhs: Password[] = [];\n    await phModels.reduce(async (promise, ph) => {\n      await promise;\n      const encPh = await self.encryptPasswordHistory(ph, key);\n      encPhs.push(encPh);\n    }, Promise.resolve());\n\n    return encPhs;\n  }\n\n  async encryptPasswordHistory(\n    phModel: PasswordHistoryView,\n    key: SymmetricCryptoKey\n  ): Promise<Password> {\n    const ph = new Password();\n    ph.lastUsedDate = phModel.lastUsedDate;\n\n    await this.encryptObjProperty(\n      phModel,\n      ph,\n      {\n        password: null,\n      },\n      key\n    );\n\n    return ph;\n  }\n\n  async get(id: string): Promise<Cipher> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    // eslint-disable-next-line\n    if (ciphers == null || !ciphers.hasOwnProperty(id)) {\n      return null;\n    }\n\n    const localData = await this.stateService.getLocalData();\n    return new Cipher(ciphers[id], localData ? localData[id] : null);\n  }\n\n  async getAll(): Promise<Cipher[]> {\n    const localData = await this.stateService.getLocalData();\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    const response: Cipher[] = [];\n    for (const id in ciphers) {\n      // eslint-disable-next-line\n      if (ciphers.hasOwnProperty(id)) {\n        response.push(new Cipher(ciphers[id], localData ? localData[id] : null));\n      }\n    }\n    return response;\n  }\n\n  @sequentialize(() => \"getAllDecrypted\")\n  async getAllDecrypted(): Promise<CipherView[]> {\n    if ((await this.getDecryptedCipherCache()) != null) {\n      await this.reindexCiphers();\n      return await this.getDecryptedCipherCache();\n    }\n\n    const hasKey = await this.cryptoService.hasKey();\n    if (!hasKey) {\n      throw new Error(\"No key.\");\n    }\n\n    const ciphers = await this.getAll();\n    const orgKeys = await this.cryptoService.getOrgKeys();\n    const userKey = await this.cryptoService.getKeyForUserEncryption();\n\n    // Group ciphers by orgId or under 'null' for the user's ciphers\n    const grouped = ciphers.reduce((agg, c) => {\n      agg[c.organizationId] ??= [];\n      agg[c.organizationId].push(c);\n      return agg;\n    }, {} as Record<string, Cipher[]>);\n\n    const decCiphers = (\n      await Promise.all(\n        Object.entries(grouped).map(([orgId, groupedCiphers]) =>\n          this.encryptService.decryptItems(groupedCiphers, orgKeys.get(orgId) ?? userKey)\n        )\n      )\n    )\n      .flat()\n      .sort(this.getLocaleSortingFunction());\n\n    await this.setDecryptedCipherCache(decCiphers);\n    return decCiphers;\n  }\n\n  private async reindexCiphers() {\n    const userId = await this.stateService.getUserId();\n    const reindexRequired =\n      this.searchService != null && (this.searchService.indexedEntityId ?? userId) !== userId;\n    if (reindexRequired) {\n      this.searchService.indexCiphers(await this.getDecryptedCipherCache(), userId);\n    }\n  }\n\n  async getAllDecryptedForGrouping(groupingId: string, folder = true): Promise<CipherView[]> {\n    const ciphers = await this.getAllDecrypted();\n\n    return ciphers.filter((cipher) => {\n      if (cipher.isDeleted) {\n        return false;\n      }\n      if (folder && cipher.folderId === groupingId) {\n        return true;\n      } else if (\n        !folder &&\n        cipher.collectionIds != null &&\n        cipher.collectionIds.indexOf(groupingId) > -1\n      ) {\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  async getAllDecryptedForUrl(\n    url: string,\n    includeOtherTypes?: CipherType[],\n    defaultMatch: UriMatchType = null\n  ): Promise<CipherView[]> {\n    if (url == null && includeOtherTypes == null) {\n      return Promise.resolve([]);\n    }\n\n    const equivalentDomains = this.settingsService.getEquivalentDomains(url);\n    const ciphers = await this.getAllDecrypted();\n    defaultMatch ??= await this.stateService.getDefaultUriMatch();\n\n    return ciphers.filter((cipher) => {\n      if (cipher.deletedDate != null) {\n        return false;\n      }\n      if (includeOtherTypes != null && includeOtherTypes.indexOf(cipher.type) > -1) {\n        return true;\n      }\n\n      if (cipher.type === CipherType.Login && cipher.login !== null) {\n        return cipher.login.matchesUri(url, equivalentDomains, defaultMatch);\n      }\n\n      return false;\n    });\n  }\n\n  async getAllFromApiForOrganization(organizationId: string): Promise<CipherView[]> {\n    const response = await this.apiService.getCiphersOrganization(organizationId);\n    if (response?.data == null || response.data.length < 1) {\n      return [];\n    }\n\n    const ciphers = response.data.map((cr) => new Cipher(new CipherData(cr)));\n    const key = await this.cryptoService.getOrgKey(organizationId);\n    const decCiphers = await this.encryptService.decryptItems(ciphers, key);\n\n    decCiphers.sort(this.getLocaleSortingFunction());\n    return decCiphers;\n  }\n\n  async getLastUsedForUrl(url: string, autofillOnPageLoad = false): Promise<CipherView> {\n    return this.getCipherForUrl(url, true, false, autofillOnPageLoad);\n  }\n\n  async getLastLaunchedForUrl(url: string, autofillOnPageLoad = false): Promise<CipherView> {\n    return this.getCipherForUrl(url, false, true, autofillOnPageLoad);\n  }\n\n  async getNextCipherForUrl(url: string): Promise<CipherView> {\n    return this.getCipherForUrl(url, false, false, false);\n  }\n\n  updateLastUsedIndexForUrl(url: string) {\n    this.sortedCiphersCache.updateLastUsedIndex(url);\n  }\n\n  async updateLastUsedDate(id: string): Promise<void> {\n    let ciphersLocalData = await this.stateService.getLocalData();\n    if (!ciphersLocalData) {\n      ciphersLocalData = {};\n    }\n\n    if (ciphersLocalData[id]) {\n      ciphersLocalData[id].lastUsedDate = new Date().getTime();\n    } else {\n      ciphersLocalData[id] = {\n        lastUsedDate: new Date().getTime(),\n      };\n    }\n\n    await this.stateService.setLocalData(ciphersLocalData);\n\n    const decryptedCipherCache = await this.stateService.getDecryptedCiphers();\n    if (!decryptedCipherCache) {\n      return;\n    }\n\n    for (let i = 0; i < decryptedCipherCache.length; i++) {\n      const cached = decryptedCipherCache[i];\n      if (cached.id === id) {\n        cached.localData = ciphersLocalData[id];\n        break;\n      }\n    }\n    await this.stateService.setDecryptedCiphers(decryptedCipherCache);\n  }\n\n  async updateLastLaunchedDate(id: string): Promise<void> {\n    let ciphersLocalData = await this.stateService.getLocalData();\n    if (!ciphersLocalData) {\n      ciphersLocalData = {};\n    }\n\n    if (ciphersLocalData[id]) {\n      ciphersLocalData[id].lastLaunched = new Date().getTime();\n    } else {\n      ciphersLocalData[id] = {\n        lastUsedDate: new Date().getTime(),\n      };\n    }\n\n    await this.stateService.setLocalData(ciphersLocalData);\n\n    const decryptedCipherCache = await this.stateService.getDecryptedCiphers();\n    if (!decryptedCipherCache) {\n      return;\n    }\n\n    for (let i = 0; i < decryptedCipherCache.length; i++) {\n      const cached = decryptedCipherCache[i];\n      if (cached.id === id) {\n        cached.localData = ciphersLocalData[id];\n        break;\n      }\n    }\n    await this.stateService.setDecryptedCiphers(decryptedCipherCache);\n  }\n\n  async saveNeverDomain(domain: string): Promise<void> {\n    if (domain == null) {\n      return;\n    }\n\n    let domains = await this.stateService.getNeverDomains();\n    if (!domains) {\n      domains = {};\n    }\n    domains[domain] = null;\n    await this.stateService.setNeverDomains(domains);\n  }\n\n  async createWithServer(cipher: Cipher): Promise<any> {\n    let response: CipherResponse;\n    if (cipher.collectionIds != null) {\n      const request = new CipherCreateRequest(cipher);\n      response = await this.apiService.postCipherCreate(request);\n    } else {\n      const request = new CipherRequest(cipher);\n      response = await this.apiService.postCipher(request);\n    }\n    cipher.id = response.id;\n\n    const data = new CipherData(response, cipher.collectionIds);\n    await this.upsert(data);\n  }\n\n  async updateWithServer(cipher: Cipher): Promise<any> {\n    let response: CipherResponse;\n    if (cipher.edit) {\n      const request = new CipherRequest(cipher);\n      response = await this.apiService.putCipher(cipher.id, request);\n    } else {\n      const request = new CipherPartialRequest(cipher);\n      response = await this.apiService.putPartialCipher(cipher.id, request);\n    }\n\n    const data = new CipherData(response, cipher.collectionIds);\n    await this.upsert(data);\n  }\n\n  async shareWithServer(\n    cipher: CipherView,\n    organizationId: string,\n    collectionIds: string[]\n  ): Promise<any> {\n    const attachmentPromises: Promise<any>[] = [];\n    if (cipher.attachments != null) {\n      cipher.attachments.forEach((attachment) => {\n        if (attachment.key == null) {\n          attachmentPromises.push(\n            this.shareAttachmentWithServer(attachment, cipher.id, organizationId)\n          );\n        }\n      });\n    }\n    await Promise.all(attachmentPromises);\n\n    cipher.organizationId = organizationId;\n    cipher.collectionIds = collectionIds;\n    const encCipher = await this.encrypt(cipher);\n    const request = new CipherShareRequest(encCipher);\n    const response = await this.apiService.putShareCipher(cipher.id, request);\n    const data = new CipherData(response, collectionIds);\n    await this.upsert(data);\n  }\n\n  async shareManyWithServer(\n    ciphers: CipherView[],\n    organizationId: string,\n    collectionIds: string[]\n  ): Promise<any> {\n    const promises: Promise<any>[] = [];\n    const encCiphers: Cipher[] = [];\n    for (const cipher of ciphers) {\n      cipher.organizationId = organizationId;\n      cipher.collectionIds = collectionIds;\n      promises.push(\n        this.encrypt(cipher).then((c) => {\n          encCiphers.push(c);\n        })\n      );\n    }\n    await Promise.all(promises);\n    const request = new CipherBulkShareRequest(encCiphers, collectionIds);\n    try {\n      await this.apiService.putShareCiphers(request);\n    } catch (e) {\n      for (const cipher of ciphers) {\n        cipher.organizationId = null;\n        cipher.collectionIds = null;\n      }\n      throw e;\n    }\n    await this.upsert(encCiphers.map((c) => c.toCipherData()));\n  }\n\n  saveAttachmentWithServer(cipher: Cipher, unencryptedFile: any, admin = false): Promise<Cipher> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(unencryptedFile);\n      reader.onload = async (evt: any) => {\n        try {\n          const cData = await this.saveAttachmentRawWithServer(\n            cipher,\n            unencryptedFile.name,\n            evt.target.result,\n            admin\n          );\n          resolve(cData);\n        } catch (e) {\n          reject(e);\n        }\n      };\n      reader.onerror = () => {\n        reject(\"Error reading file.\");\n      };\n    });\n  }\n\n  async saveAttachmentRawWithServer(\n    cipher: Cipher,\n    filename: string,\n    data: ArrayBuffer,\n    admin = false\n  ): Promise<Cipher> {\n    const key = await this.cryptoService.getOrgKey(cipher.organizationId);\n    const encFileName = await this.cryptoService.encrypt(filename, key);\n\n    const dataEncKey = await this.cryptoService.makeEncKey(key);\n    const encData = await this.cryptoService.encryptToBytes(data, dataEncKey[0]);\n\n    const response = await this.cipherFileUploadService.upload(\n      cipher,\n      encFileName,\n      encData,\n      admin,\n      dataEncKey\n    );\n\n    const cData = new CipherData(response, cipher.collectionIds);\n    if (!admin) {\n      await this.upsert(cData);\n    }\n    return new Cipher(cData);\n  }\n\n  async saveCollectionsWithServer(cipher: Cipher): Promise<any> {\n    const request = new CipherCollectionsRequest(cipher.collectionIds);\n    await this.apiService.putCipherCollections(cipher.id, request);\n    const data = cipher.toCipherData();\n    await this.upsert(data);\n  }\n\n  async upsert(cipher: CipherData | CipherData[]): Promise<any> {\n    let ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      ciphers = {};\n    }\n\n    if (cipher instanceof CipherData) {\n      const c = cipher as CipherData;\n      ciphers[c.id] = c;\n    } else {\n      (cipher as CipherData[]).forEach((c) => {\n        ciphers[c.id] = c;\n      });\n    }\n\n    await this.replace(ciphers);\n  }\n\n  async replace(ciphers: { [id: string]: CipherData }): Promise<any> {\n    await this.clearDecryptedCiphersState();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    await this.clearEncryptedCiphersState(userId);\n    await this.clearCache(userId);\n  }\n\n  async moveManyWithServer(ids: string[], folderId: string): Promise<any> {\n    await this.apiService.putMoveCiphers(new CipherBulkMoveRequest(ids, folderId));\n\n    let ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      ciphers = {};\n    }\n\n    ids.forEach((id) => {\n      // eslint-disable-next-line\n      if (ciphers.hasOwnProperty(id)) {\n        ciphers[id].folderId = folderId;\n      }\n    });\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (ciphers[id] == null) {\n        return;\n      }\n      delete ciphers[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete ciphers[i];\n      });\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async deleteWithServer(id: string, asAdmin = false): Promise<any> {\n    if (asAdmin) {\n      await this.apiService.deleteCipherAdmin(id);\n    } else {\n      await this.apiService.deleteCipher(id);\n    }\n\n    await this.delete(id);\n  }\n\n  async deleteManyWithServer(ids: string[], asAdmin = false): Promise<any> {\n    if (asAdmin) {\n      await this.apiService.deleteManyCiphersAdmin(new CipherBulkDeleteRequest(ids));\n    } else {\n      await this.apiService.deleteManyCiphers(new CipherBulkDeleteRequest(ids));\n    }\n    await this.delete(ids);\n  }\n\n  async deleteAttachment(id: string, attachmentId: string): Promise<void> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n\n    // eslint-disable-next-line\n    if (ciphers == null || !ciphers.hasOwnProperty(id) || ciphers[id].attachments == null) {\n      return;\n    }\n\n    for (let i = 0; i < ciphers[id].attachments.length; i++) {\n      if (ciphers[id].attachments[i].id === attachmentId) {\n        ciphers[id].attachments.splice(i, 1);\n      }\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async deleteAttachmentWithServer(id: string, attachmentId: string): Promise<void> {\n    try {\n      await this.apiService.deleteCipherAttachment(id, attachmentId);\n    } catch (e) {\n      return Promise.reject((e as ErrorResponse).getSingleMessage());\n    }\n    await this.deleteAttachment(id, attachmentId);\n  }\n\n  sortCiphersByLastUsed(a: CipherView, b: CipherView): number {\n    const aLastUsed =\n      a.localData && a.localData.lastUsedDate ? (a.localData.lastUsedDate as number) : null;\n    const bLastUsed =\n      b.localData && b.localData.lastUsedDate ? (b.localData.lastUsedDate as number) : null;\n\n    const bothNotNull = aLastUsed != null && bLastUsed != null;\n    if (bothNotNull && aLastUsed < bLastUsed) {\n      return 1;\n    }\n    if (aLastUsed != null && bLastUsed == null) {\n      return -1;\n    }\n\n    if (bothNotNull && aLastUsed > bLastUsed) {\n      return -1;\n    }\n    if (bLastUsed != null && aLastUsed == null) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  sortCiphersByLastUsedThenName(a: CipherView, b: CipherView): number {\n    const result = this.sortCiphersByLastUsed(a, b);\n    if (result !== 0) {\n      return result;\n    }\n\n    return this.getLocaleSortingFunction()(a, b);\n  }\n\n  getLocaleSortingFunction(): (a: CipherView, b: CipherView) => number {\n    return (a, b) => {\n      let aName = a.name;\n      let bName = b.name;\n\n      if (aName == null && bName != null) {\n        return -1;\n      }\n      if (aName != null && bName == null) {\n        return 1;\n      }\n      if (aName == null && bName == null) {\n        return 0;\n      }\n\n      const result = this.i18nService.collator\n        ? this.i18nService.collator.compare(aName, bName)\n        : aName.localeCompare(bName);\n\n      if (result !== 0 || a.type !== CipherType.Login || b.type !== CipherType.Login) {\n        return result;\n      }\n\n      if (a.login.username != null) {\n        aName += a.login.username;\n      }\n\n      if (b.login.username != null) {\n        bName += b.login.username;\n      }\n\n      return this.i18nService.collator\n        ? this.i18nService.collator.compare(aName, bName)\n        : aName.localeCompare(bName);\n    };\n  }\n\n  async softDelete(id: string | string[]): Promise<any> {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    const setDeletedDate = (cipherId: string) => {\n      if (ciphers[cipherId] == null) {\n        return;\n      }\n      ciphers[cipherId].deletedDate = new Date().toISOString();\n    };\n\n    if (typeof id === \"string\") {\n      setDeletedDate(id);\n    } else {\n      (id as string[]).forEach(setDeletedDate);\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async softDeleteWithServer(id: string, asAdmin = false): Promise<any> {\n    if (asAdmin) {\n      await this.apiService.putDeleteCipherAdmin(id);\n    } else {\n      await this.apiService.putDeleteCipher(id);\n    }\n\n    await this.softDelete(id);\n  }\n\n  async softDeleteManyWithServer(ids: string[], asAdmin = false): Promise<any> {\n    if (asAdmin) {\n      await this.apiService.putDeleteManyCiphersAdmin(new CipherBulkDeleteRequest(ids));\n    } else {\n      await this.apiService.putDeleteManyCiphers(new CipherBulkDeleteRequest(ids));\n    }\n\n    await this.softDelete(ids);\n  }\n\n  async restore(\n    cipher: { id: string; revisionDate: string } | { id: string; revisionDate: string }[]\n  ) {\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers == null) {\n      return;\n    }\n\n    const clearDeletedDate = (c: { id: string; revisionDate: string }) => {\n      if (ciphers[c.id] == null) {\n        return;\n      }\n      ciphers[c.id].deletedDate = null;\n      ciphers[c.id].revisionDate = c.revisionDate;\n    };\n\n    if (cipher.constructor.name === Array.name) {\n      (cipher as { id: string; revisionDate: string }[]).forEach(clearDeletedDate);\n    } else {\n      clearDeletedDate(cipher as { id: string; revisionDate: string });\n    }\n\n    await this.clearCache();\n    await this.stateService.setEncryptedCiphers(ciphers);\n  }\n\n  async restoreWithServer(id: string, asAdmin = false): Promise<any> {\n    const response = asAdmin\n      ? await this.apiService.putRestoreCipherAdmin(id)\n      : await this.apiService.putRestoreCipher(id);\n    await this.restore({ id: id, revisionDate: response.revisionDate });\n  }\n\n  async restoreManyWithServer(ids: string[]): Promise<any> {\n    const response = await this.apiService.putRestoreManyCiphers(new CipherBulkRestoreRequest(ids));\n    const restores: { id: string; revisionDate: string }[] = [];\n    for (const cipher of response.data) {\n      restores.push({ id: cipher.id, revisionDate: cipher.revisionDate });\n    }\n    await this.restore(restores);\n  }\n\n  // Helpers\n\n  private async shareAttachmentWithServer(\n    attachmentView: AttachmentView,\n    cipherId: string,\n    organizationId: string\n  ): Promise<any> {\n    const attachmentResponse = await this.apiService.nativeFetch(\n      new Request(attachmentView.url, { cache: \"no-store\" })\n    );\n    if (attachmentResponse.status !== 200) {\n      throw Error(\"Failed to download attachment: \" + attachmentResponse.status.toString());\n    }\n\n    const encBuf = await EncArrayBuffer.fromResponse(attachmentResponse);\n    const decBuf = await this.cryptoService.decryptFromBytes(encBuf, null);\n    const key = await this.cryptoService.getOrgKey(organizationId);\n    const encFileName = await this.cryptoService.encrypt(attachmentView.fileName, key);\n\n    const dataEncKey = await this.cryptoService.makeEncKey(key);\n    const encData = await this.cryptoService.encryptToBytes(decBuf, dataEncKey[0]);\n\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"key\", dataEncKey[1].encryptedString);\n      fd.append(\"data\", blob, encFileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"key\", dataEncKey[1].encryptedString);\n        fd.append(\n          \"data\",\n          Buffer.from(encData.buffer) as any,\n          {\n            filepath: encFileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    try {\n      await this.apiService.postShareCipherAttachment(\n        cipherId,\n        attachmentView.id,\n        fd,\n        organizationId\n      );\n    } catch (e) {\n      throw new Error((e as ErrorResponse).getSingleMessage());\n    }\n  }\n\n  private async encryptObjProperty<V extends View, D extends Domain>(\n    model: V,\n    obj: D,\n    map: any,\n    key: SymmetricCryptoKey\n  ): Promise<void> {\n    const promises = [];\n    const self = this;\n\n    for (const prop in map) {\n      // eslint-disable-next-line\n      if (!map.hasOwnProperty(prop)) {\n        continue;\n      }\n\n      (function (theProp, theObj) {\n        const p = Promise.resolve()\n          .then(() => {\n            const modelProp = (model as any)[map[theProp] || theProp];\n            if (modelProp && modelProp !== \"\") {\n              return self.cryptoService.encrypt(modelProp, key);\n            }\n            return null;\n          })\n          .then((val: EncString) => {\n            (theObj as any)[theProp] = val;\n          });\n        promises.push(p);\n      })(prop, obj);\n    }\n\n    await Promise.all(promises);\n  }\n\n  private async encryptCipherData(cipher: Cipher, model: CipherView, key: SymmetricCryptoKey) {\n    switch (cipher.type) {\n      case CipherType.Login:\n        cipher.login = new Login();\n        cipher.login.passwordRevisionDate = model.login.passwordRevisionDate;\n        cipher.login.autofillOnPageLoad = model.login.autofillOnPageLoad;\n        await this.encryptObjProperty(\n          model.login,\n          cipher.login,\n          {\n            username: null,\n            password: null,\n            totp: null,\n          },\n          key\n        );\n\n        if (model.login.uris != null) {\n          cipher.login.uris = [];\n          for (let i = 0; i < model.login.uris.length; i++) {\n            const loginUri = new LoginUri();\n            loginUri.match = model.login.uris[i].match;\n            await this.encryptObjProperty(\n              model.login.uris[i],\n              loginUri,\n              {\n                uri: null,\n              },\n              key\n            );\n            cipher.login.uris.push(loginUri);\n          }\n        }\n        return;\n      case CipherType.SecureNote:\n        cipher.secureNote = new SecureNote();\n        cipher.secureNote.type = model.secureNote.type;\n        return;\n      case CipherType.Card:\n        cipher.card = new Card();\n        await this.encryptObjProperty(\n          model.card,\n          cipher.card,\n          {\n            cardholderName: null,\n            brand: null,\n            number: null,\n            expMonth: null,\n            expYear: null,\n            code: null,\n          },\n          key\n        );\n        return;\n      case CipherType.Identity:\n        cipher.identity = new Identity();\n        await this.encryptObjProperty(\n          model.identity,\n          cipher.identity,\n          {\n            title: null,\n            firstName: null,\n            middleName: null,\n            lastName: null,\n            address1: null,\n            address2: null,\n            address3: null,\n            city: null,\n            state: null,\n            postalCode: null,\n            country: null,\n            company: null,\n            email: null,\n            phone: null,\n            ssn: null,\n            username: null,\n            passportNumber: null,\n            licenseNumber: null,\n          },\n          key\n        );\n        return;\n      default:\n        throw new Error(\"Unknown cipher type.\");\n    }\n  }\n\n  private async getCipherForUrl(\n    url: string,\n    lastUsed: boolean,\n    lastLaunched: boolean,\n    autofillOnPageLoad: boolean\n  ): Promise<CipherView> {\n    const cacheKey = autofillOnPageLoad ? \"autofillOnPageLoad-\" + url : url;\n\n    if (!this.sortedCiphersCache.isCached(cacheKey)) {\n      let ciphers = await this.getAllDecryptedForUrl(url);\n      if (!ciphers) {\n        return null;\n      }\n\n      if (autofillOnPageLoad) {\n        const autofillOnPageLoadDefault = await this.stateService.getAutoFillOnPageLoadDefault();\n        ciphers = ciphers.filter(\n          (cipher) =>\n            cipher.login.autofillOnPageLoad ||\n            (cipher.login.autofillOnPageLoad == null && autofillOnPageLoadDefault !== false)\n        );\n        if (ciphers.length === 0) {\n          return null;\n        }\n      }\n\n      this.sortedCiphersCache.addCiphers(cacheKey, ciphers);\n    }\n\n    if (lastLaunched) {\n      return this.sortedCiphersCache.getLastLaunched(cacheKey);\n    } else if (lastUsed) {\n      return this.sortedCiphersCache.getLastUsed(cacheKey);\n    } else {\n      return this.sortedCiphersCache.getNext(cacheKey);\n    }\n  }\n\n  private async clearEncryptedCiphersState(userId?: string) {\n    await this.stateService.setEncryptedCiphers(null, { userId: userId });\n  }\n\n  private async clearDecryptedCiphersState(userId?: string) {\n    await this.stateService.setDecryptedCiphers(null, { userId: userId });\n    this.clearSortedCiphers();\n  }\n\n  private clearSortedCiphers() {\n    this.sortedCiphersCache.clear();\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport {\n  FileUploadApiMethods,\n  FileUploadService,\n} from \"../../../abstractions/file-upload/file-upload.service\";\nimport { Utils } from \"../../../misc/utils\";\nimport { EncArrayBuffer } from \"../../../models/domain/enc-array-buffer\";\nimport { EncString } from \"../../../models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { ErrorResponse } from \"../../../models/response/error.response\";\nimport { CipherFileUploadService as CipherFileUploadServiceAbstraction } from \"../../abstractions/file-upload/cipher-file-upload.service\";\nimport { Cipher } from \"../../models/domain/cipher\";\nimport { AttachmentRequest } from \"../../models/request/attachment.request\";\nimport { AttachmentUploadDataResponse } from \"../../models/response/attachment-upload-data.response\";\nimport { CipherResponse } from \"../../models/response/cipher.response\";\n\nexport class CipherFileUploadService implements CipherFileUploadServiceAbstraction {\n  constructor(private apiService: ApiService, private fileUploadService: FileUploadService) {}\n\n  async upload(\n    cipher: Cipher,\n    encFileName: EncString,\n    encData: EncArrayBuffer,\n    admin: boolean,\n    dataEncKey: [SymmetricCryptoKey, EncString]\n  ): Promise<CipherResponse> {\n    const request: AttachmentRequest = {\n      key: dataEncKey[1].encryptedString,\n      fileName: encFileName.encryptedString,\n      fileSize: encData.buffer.byteLength,\n      adminRequest: admin,\n    };\n\n    let response: CipherResponse;\n    try {\n      const uploadDataResponse = await this.apiService.postCipherAttachment(cipher.id, request);\n      response = admin ? uploadDataResponse.cipherMiniResponse : uploadDataResponse.cipherResponse;\n      await this.fileUploadService.upload(\n        uploadDataResponse,\n        encFileName,\n        encData,\n        this.generateMethods(uploadDataResponse, response, request.adminRequest)\n      );\n    } catch (e) {\n      if (\n        (e instanceof ErrorResponse && (e as ErrorResponse).statusCode === 404) ||\n        (e as ErrorResponse).statusCode === 405\n      ) {\n        response = await this.legacyServerAttachmentFileUpload(\n          request.adminRequest,\n          cipher.id,\n          encFileName,\n          encData,\n          dataEncKey[1]\n        );\n      } else if (e instanceof ErrorResponse) {\n        throw new Error((e as ErrorResponse).getSingleMessage());\n      } else {\n        throw e;\n      }\n    }\n    return response;\n  }\n\n  private generateMethods(\n    uploadData: AttachmentUploadDataResponse,\n    response: CipherResponse,\n    isAdmin: boolean\n  ): FileUploadApiMethods {\n    return {\n      postDirect: this.generatePostDirectCallback(uploadData, isAdmin),\n      renewFileUploadUrl: this.generateRenewFileUploadUrlCallback(uploadData, response, isAdmin),\n      rollback: this.generateRollbackCallback(response, uploadData, isAdmin),\n    };\n  }\n\n  private generatePostDirectCallback(uploadData: AttachmentUploadDataResponse, isAdmin: boolean) {\n    return (data: FormData) => {\n      const response = isAdmin ? uploadData.cipherMiniResponse : uploadData.cipherResponse;\n      return this.apiService.postAttachmentFile(response.id, uploadData.attachmentId, data);\n    };\n  }\n\n  private generateRenewFileUploadUrlCallback(\n    uploadData: AttachmentUploadDataResponse,\n    response: CipherResponse,\n    isAdmin: boolean\n  ) {\n    return async () => {\n      const renewResponse = await this.apiService.renewAttachmentUploadUrl(\n        response.id,\n        uploadData.attachmentId\n      );\n      return renewResponse?.url;\n    };\n  }\n\n  private generateRollbackCallback(\n    response: CipherResponse,\n    uploadData: AttachmentUploadDataResponse,\n    isAdmin: boolean\n  ) {\n    return () => {\n      if (isAdmin) {\n        return this.apiService.deleteCipherAttachmentAdmin(response.id, uploadData.attachmentId);\n      } else {\n        return this.apiService.deleteCipherAttachment(response.id, uploadData.attachmentId);\n      }\n    };\n  }\n\n  /**\n   * @deprecated Mar 25 2021: This method has been deprecated in favor of direct uploads.\n   * This method still exists for backward compatibility with old server versions.\n   */\n  async legacyServerAttachmentFileUpload(\n    admin: boolean,\n    cipherId: string,\n    encFileName: EncString,\n    encData: EncArrayBuffer,\n    key: EncString\n  ) {\n    const fd = new FormData();\n    try {\n      const blob = new Blob([encData.buffer], { type: \"application/octet-stream\" });\n      fd.append(\"key\", key.encryptedString);\n      fd.append(\"data\", blob, encFileName.encryptedString);\n    } catch (e) {\n      if (Utils.isNode && !Utils.isBrowser) {\n        fd.append(\"key\", key.encryptedString);\n        fd.append(\n          \"data\",\n          Buffer.from(encData.buffer) as any,\n          {\n            filepath: encFileName.encryptedString,\n            contentType: \"application/octet-stream\",\n          } as any\n        );\n      } else {\n        throw e;\n      }\n    }\n\n    let response: CipherResponse;\n    try {\n      if (admin) {\n        response = await this.apiService.postCipherAttachmentAdminLegacy(cipherId, fd);\n      } else {\n        response = await this.apiService.postCipherAttachmentLegacy(cipherId, fd);\n      }\n    } catch (e) {\n      throw new Error((e as ErrorResponse).getSingleMessage());\n    }\n\n    return response;\n  }\n}\n","import { Folder } from \"../domain/folder\";\n\nexport class FolderRequest {\n  name: string;\n\n  constructor(folder: Folder) {\n    this.name = folder.name ? folder.name.encryptedString : null;\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { FolderApiServiceAbstraction } from \"../../../vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { Folder } from \"../../../vault/models/domain/folder\";\nimport { FolderRequest } from \"../../../vault/models/request/folder.request\";\nimport { FolderResponse } from \"../../../vault/models/response/folder.response\";\n\nexport class FolderApiService implements FolderApiServiceAbstraction {\n  constructor(private folderService: InternalFolderService, private apiService: ApiService) {}\n\n  async save(folder: Folder): Promise<any> {\n    const request = new FolderRequest(folder);\n\n    let response: FolderResponse;\n    if (folder.id == null) {\n      response = await this.postFolder(request);\n      folder.id = response.id;\n    } else {\n      response = await this.putFolder(folder.id, request);\n    }\n\n    const data = new FolderData(response);\n    await this.folderService.upsert(data);\n  }\n\n  async delete(id: string): Promise<any> {\n    await this.deleteFolder(id);\n    await this.folderService.delete(id);\n  }\n\n  async get(id: string): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"GET\", \"/folders/\" + id, null, true, true);\n    return new FolderResponse(r);\n  }\n\n  private async postFolder(request: FolderRequest): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"POST\", \"/folders\", request, true, true);\n    return new FolderResponse(r);\n  }\n\n  async putFolder(id: string, request: FolderRequest): Promise<FolderResponse> {\n    const r = await this.apiService.send(\"PUT\", \"/folders/\" + id, request, true, true);\n    return new FolderResponse(r);\n  }\n\n  private deleteFolder(id: string): Promise<any> {\n    return this.apiService.send(\"DELETE\", \"/folders/\" + id, null, true, false);\n  }\n}\n","import { BehaviorSubject, concatMap } from \"rxjs\";\n\nimport { CryptoService } from \"../../../abstractions/crypto.service\";\nimport { I18nService } from \"../../../abstractions/i18n.service\";\nimport { StateService } from \"../../../abstractions/state.service\";\nimport { Utils } from \"../../../misc/utils\";\nimport { SymmetricCryptoKey } from \"../../../models/domain/symmetric-crypto-key\";\nimport { CipherService } from \"../../../vault/abstractions/cipher.service\";\nimport { InternalFolderService as InternalFolderServiceAbstraction } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherData } from \"../../../vault/models/data/cipher.data\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { Folder } from \"../../../vault/models/domain/folder\";\nimport { FolderView } from \"../../../vault/models/view/folder.view\";\n\nexport class FolderService implements InternalFolderServiceAbstraction {\n  protected _folders: BehaviorSubject<Folder[]> = new BehaviorSubject([]);\n  protected _folderViews: BehaviorSubject<FolderView[]> = new BehaviorSubject([]);\n\n  folders$ = this._folders.asObservable();\n  folderViews$ = this._folderViews.asObservable();\n\n  constructor(\n    private cryptoService: CryptoService,\n    private i18nService: I18nService,\n    private cipherService: CipherService,\n    private stateService: StateService\n  ) {\n    this.stateService.activeAccountUnlocked$\n      .pipe(\n        concatMap(async (unlocked) => {\n          if (Utils.global.bitwardenContainerService == null) {\n            return;\n          }\n\n          if (!unlocked) {\n            this._folders.next([]);\n            this._folderViews.next([]);\n            return;\n          }\n\n          const data = await this.stateService.getEncryptedFolders();\n\n          await this.updateObservables(data);\n        })\n      )\n      .subscribe();\n  }\n\n  async clearCache(): Promise<void> {\n    this._folderViews.next([]);\n  }\n\n  // TODO: This should be moved to EncryptService or something\n  async encrypt(model: FolderView, key?: SymmetricCryptoKey): Promise<Folder> {\n    const folder = new Folder();\n    folder.id = model.id;\n    folder.name = await this.cryptoService.encrypt(model.name, key);\n    return folder;\n  }\n\n  async get(id: string): Promise<Folder> {\n    const folders = this._folders.getValue();\n\n    return folders.find((folder) => folder.id === id);\n  }\n\n  async getAllFromState(): Promise<Folder[]> {\n    const folders = await this.stateService.getEncryptedFolders();\n    const response: Folder[] = [];\n    for (const id in folders) {\n      // eslint-disable-next-line\n      if (folders.hasOwnProperty(id)) {\n        response.push(new Folder(folders[id]));\n      }\n    }\n    return response;\n  }\n\n  /**\n   * @deprecated For the CLI only\n   * @param id id of the folder\n   */\n  async getFromState(id: string): Promise<Folder> {\n    const foldersMap = await this.stateService.getEncryptedFolders();\n    const folder = foldersMap[id];\n    if (folder == null) {\n      return null;\n    }\n\n    return new Folder(folder);\n  }\n\n  /**\n   * @deprecated Only use in CLI!\n   */\n  async getAllDecryptedFromState(): Promise<FolderView[]> {\n    const data = await this.stateService.getEncryptedFolders();\n    const folders = Object.values(data || {}).map((f) => new Folder(f));\n\n    return this.decryptFolders(folders);\n  }\n\n  async upsert(folder: FolderData | FolderData[]): Promise<void> {\n    let folders = await this.stateService.getEncryptedFolders();\n    if (folders == null) {\n      folders = {};\n    }\n\n    if (folder instanceof FolderData) {\n      const f = folder as FolderData;\n      folders[f.id] = f;\n    } else {\n      (folder as FolderData[]).forEach((f) => {\n        folders[f.id] = f;\n      });\n    }\n\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n  }\n\n  async replace(folders: { [id: string]: FolderData }): Promise<void> {\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n  }\n\n  async clear(userId?: string): Promise<any> {\n    if (userId == null || userId == (await this.stateService.getUserId())) {\n      this._folders.next([]);\n      this._folderViews.next([]);\n    }\n    await this.stateService.setEncryptedFolders(null, { userId: userId });\n  }\n\n  async delete(id: string | string[]): Promise<any> {\n    const folders = await this.stateService.getEncryptedFolders();\n    if (folders == null) {\n      return;\n    }\n\n    if (typeof id === \"string\") {\n      if (folders[id] == null) {\n        return;\n      }\n      delete folders[id];\n    } else {\n      (id as string[]).forEach((i) => {\n        delete folders[i];\n      });\n    }\n\n    await this.updateObservables(folders);\n    await this.stateService.setEncryptedFolders(folders);\n\n    // Items in a deleted folder are re-assigned to \"No Folder\"\n    const ciphers = await this.stateService.getEncryptedCiphers();\n    if (ciphers != null) {\n      const updates: CipherData[] = [];\n      for (const cId in ciphers) {\n        if (ciphers[cId].folderId === id) {\n          ciphers[cId].folderId = null;\n          updates.push(ciphers[cId]);\n        }\n      }\n      if (updates.length > 0) {\n        this.cipherService.upsert(updates);\n      }\n    }\n  }\n\n  private async updateObservables(foldersMap: { [id: string]: FolderData }) {\n    const folders = Object.values(foldersMap || {}).map((f) => new Folder(f));\n\n    this._folders.next(folders);\n\n    if (await this.cryptoService.hasKey()) {\n      this._folderViews.next(await this.decryptFolders(folders));\n    }\n  }\n\n  private async decryptFolders(folders: Folder[]) {\n    const decryptFolderPromises = folders.map((f) => f.decrypt());\n    const decryptedFolders = await Promise.all(decryptFolderPromises);\n\n    decryptedFolders.sort(Utils.getSortFunction(this.i18nService, \"name\"));\n\n    const noneFolder = new FolderView();\n    noneFolder.name = this.i18nService.t(\"noneFolder\");\n    decryptedFolders.push(noneFolder);\n\n    return decryptedFolders;\n  }\n}\n","import { Subject } from \"rxjs\";\n\nimport { SyncNotifierService as SyncNotifierServiceAbstraction } from \"../../abstractions/sync/sync-notifier.service.abstraction\";\nimport { SyncEventArgs } from \"../../types/sync-event-args\";\n\n/**\n * This class should most likely have 0 dependencies because it will hopefully\n * be rolled into SyncService once upon a time.\n */\nexport class SyncNotifierService implements SyncNotifierServiceAbstraction {\n  private _sync = new Subject<SyncEventArgs>();\n\n  sync$ = this._sync.asObservable();\n\n  next(event: SyncEventArgs): void {\n    this._sync.next(event);\n  }\n}\n","import { ProductType, ProviderType } from \"../../../enums\";\nimport { OrganizationUserStatusType, OrganizationUserType } from \"../../enums\";\nimport { PermissionsApi } from \"../api/permissions.api\";\nimport { ProfileOrganizationResponse } from \"../response/profile-organization.response\";\n\nexport class OrganizationData {\n  id: string;\n  name: string;\n  status: OrganizationUserStatusType;\n  type: OrganizationUserType;\n  enabled: boolean;\n  usePolicies: boolean;\n  useGroups: boolean;\n  useDirectory: boolean;\n  useEvents: boolean;\n  useTotp: boolean;\n  use2fa: boolean;\n  useApi: boolean;\n  useSso: boolean;\n  useKeyConnector: boolean;\n  useScim: boolean;\n  useCustomPermissions: boolean;\n  useResetPassword: boolean;\n  useSecretsManager: boolean;\n  useActivateAutofillPolicy: boolean;\n  selfHost: boolean;\n  usersGetPremium: boolean;\n  seats: number;\n  maxCollections: number;\n  maxStorageGb?: number;\n  ssoBound: boolean;\n  identifier: string;\n  permissions: PermissionsApi;\n  resetPasswordEnrolled: boolean;\n  userId: string;\n  hasPublicAndPrivateKeys: boolean;\n  providerId: string;\n  providerName: string;\n  providerType?: ProviderType;\n  isProviderUser: boolean;\n  isMember: boolean;\n  familySponsorshipFriendlyName: string;\n  familySponsorshipAvailable: boolean;\n  planProductType: ProductType;\n  keyConnectorEnabled: boolean;\n  keyConnectorUrl: string;\n  familySponsorshipLastSyncDate?: Date;\n  familySponsorshipValidUntil?: Date;\n  familySponsorshipToDelete?: boolean;\n  accessSecretsManager: boolean;\n\n  constructor(\n    response: ProfileOrganizationResponse,\n    options: {\n      isMember: boolean;\n      isProviderUser: boolean;\n    }\n  ) {\n    this.id = response.id;\n    this.name = response.name;\n    this.status = response.status;\n    this.type = response.type;\n    this.enabled = response.enabled;\n    this.usePolicies = response.usePolicies;\n    this.useGroups = response.useGroups;\n    this.useDirectory = response.useDirectory;\n    this.useEvents = response.useEvents;\n    this.useTotp = response.useTotp;\n    this.use2fa = response.use2fa;\n    this.useApi = response.useApi;\n    this.useSso = response.useSso;\n    this.useKeyConnector = response.useKeyConnector;\n    this.useScim = response.useScim;\n    this.useCustomPermissions = response.useCustomPermissions;\n    this.useResetPassword = response.useResetPassword;\n    this.useSecretsManager = response.useSecretsManager;\n    this.useActivateAutofillPolicy = response.useActivateAutofillPolicy;\n    this.selfHost = response.selfHost;\n    this.usersGetPremium = response.usersGetPremium;\n    this.seats = response.seats;\n    this.maxCollections = response.maxCollections;\n    this.maxStorageGb = response.maxStorageGb;\n    this.ssoBound = response.ssoBound;\n    this.identifier = response.identifier;\n    this.permissions = response.permissions;\n    this.resetPasswordEnrolled = response.resetPasswordEnrolled;\n    this.userId = response.userId;\n    this.hasPublicAndPrivateKeys = response.hasPublicAndPrivateKeys;\n    this.providerId = response.providerId;\n    this.providerName = response.providerName;\n    this.providerType = response.providerType;\n    this.familySponsorshipFriendlyName = response.familySponsorshipFriendlyName;\n    this.familySponsorshipAvailable = response.familySponsorshipAvailable;\n    this.planProductType = response.planProductType;\n    this.keyConnectorEnabled = response.keyConnectorEnabled;\n    this.keyConnectorUrl = response.keyConnectorUrl;\n    this.familySponsorshipLastSyncDate = response.familySponsorshipLastSyncDate;\n    this.familySponsorshipValidUntil = response.familySponsorshipValidUntil;\n    this.familySponsorshipToDelete = response.familySponsorshipToDelete;\n    this.accessSecretsManager = response.accessSecretsManager;\n\n    this.isMember = options.isMember;\n    this.isProviderUser = options.isProviderUser;\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { CryptoService } from \"../../../abstractions/crypto.service\";\nimport { LogService } from \"../../../abstractions/log.service\";\nimport { MessagingService } from \"../../../abstractions/messaging.service\";\nimport { SettingsService } from \"../../../abstractions/settings.service\";\nimport { StateService } from \"../../../abstractions/state.service\";\nimport { CollectionService } from \"../../../admin-console/abstractions/collection.service\";\nimport { InternalOrganizationService } from \"../../../admin-console/abstractions/organization/organization.service.abstraction\";\nimport { InternalPolicyService } from \"../../../admin-console/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService } from \"../../../admin-console/abstractions/provider.service\";\nimport { CollectionData } from \"../../../admin-console/models/data/collection.data\";\nimport { OrganizationData } from \"../../../admin-console/models/data/organization.data\";\nimport { PolicyData } from \"../../../admin-console/models/data/policy.data\";\nimport { ProviderData } from \"../../../admin-console/models/data/provider.data\";\nimport { CollectionDetailsResponse } from \"../../../admin-console/models/response/collection.response\";\nimport { PolicyResponse } from \"../../../admin-console/models/response/policy.response\";\nimport { KeyConnectorService } from \"../../../auth/abstractions/key-connector.service\";\nimport { ForceResetPasswordReason } from \"../../../auth/models/domain/force-reset-password-reason\";\nimport { sequentialize } from \"../../../misc/sequentialize\";\nimport { DomainsResponse } from \"../../../models/response/domains.response\";\nimport {\n  SyncCipherNotification,\n  SyncFolderNotification,\n  SyncSendNotification,\n} from \"../../../models/response/notification.response\";\nimport { ProfileResponse } from \"../../../models/response/profile.response\";\nimport { SendData } from \"../../../tools/send/models/data/send.data\";\nimport { SendResponse } from \"../../../tools/send/models/response/send.response\";\nimport { SendApiService } from \"../../../tools/send/services/send-api.service.abstraction\";\nimport { InternalSendService } from \"../../../tools/send/services/send.service.abstraction\";\nimport { CipherService } from \"../../../vault/abstractions/cipher.service\";\nimport { FolderApiServiceAbstraction } from \"../../../vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService } from \"../../../vault/abstractions/folder/folder.service.abstraction\";\nimport { SyncService as SyncServiceAbstraction } from \"../../../vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherData } from \"../../../vault/models/data/cipher.data\";\nimport { FolderData } from \"../../../vault/models/data/folder.data\";\nimport { CipherResponse } from \"../../../vault/models/response/cipher.response\";\nimport { FolderResponse } from \"../../../vault/models/response/folder.response\";\n\nexport class SyncService implements SyncServiceAbstraction {\n  syncInProgress = false;\n\n  constructor(\n    private apiService: ApiService,\n    private settingsService: SettingsService,\n    private folderService: InternalFolderService,\n    private cipherService: CipherService,\n    private cryptoService: CryptoService,\n    private collectionService: CollectionService,\n    private messagingService: MessagingService,\n    private policyService: InternalPolicyService,\n    private sendService: InternalSendService,\n    private logService: LogService,\n    private keyConnectorService: KeyConnectorService,\n    private stateService: StateService,\n    private providerService: ProviderService,\n    private folderApiService: FolderApiServiceAbstraction,\n    private organizationService: InternalOrganizationService,\n    private sendApiService: SendApiService,\n    private logoutCallback: (expired: boolean) => Promise<void>\n  ) {}\n\n  async getLastSync(): Promise<Date> {\n    if ((await this.stateService.getUserId()) == null) {\n      return null;\n    }\n\n    const lastSync = await this.stateService.getLastSync();\n    if (lastSync) {\n      return new Date(lastSync);\n    }\n\n    return null;\n  }\n\n  async setLastSync(date: Date, userId?: string): Promise<any> {\n    await this.stateService.setLastSync(date.toJSON(), { userId: userId });\n  }\n\n  @sequentialize(() => \"fullSync\")\n  async fullSync(forceSync: boolean, allowThrowOnError = false): Promise<boolean> {\n    this.syncStarted();\n    const isAuthenticated = await this.stateService.getIsAuthenticated();\n    if (!isAuthenticated) {\n      return this.syncCompleted(false);\n    }\n\n    const now = new Date();\n    let needsSync = false;\n    try {\n      needsSync = await this.needsSyncing(forceSync);\n    } catch (e) {\n      if (allowThrowOnError) {\n        throw e;\n      }\n    }\n\n    if (!needsSync) {\n      await this.setLastSync(now);\n      return this.syncCompleted(false);\n    }\n\n    try {\n      await this.apiService.refreshIdentityToken();\n      const response = await this.apiService.getSync();\n\n      await this.syncProfile(response.profile);\n      await this.syncFolders(response.folders);\n      await this.syncCollections(response.collections);\n      await this.syncCiphers(response.ciphers);\n      await this.syncSends(response.sends);\n      await this.syncSettings(response.domains);\n      await this.syncPolicies(response.policies);\n\n      await this.setLastSync(now);\n      return this.syncCompleted(true);\n    } catch (e) {\n      if (allowThrowOnError) {\n        throw e;\n      } else {\n        return this.syncCompleted(false);\n      }\n    }\n  }\n\n  async syncUpsertFolder(notification: SyncFolderNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        const localFolder = await this.folderService.get(notification.id);\n        if (\n          (!isEdit && localFolder == null) ||\n          (isEdit && localFolder != null && localFolder.revisionDate < notification.revisionDate)\n        ) {\n          const remoteFolder = await this.folderApiService.get(notification.id);\n          if (remoteFolder != null) {\n            await this.folderService.upsert(new FolderData(remoteFolder));\n            this.messagingService.send(\"syncedUpsertedFolder\", { folderId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteFolder(notification: SyncFolderNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.folderService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedFolder\", { folderId: notification.id });\n      this.syncCompleted(true);\n      return true;\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncUpsertCipher(notification: SyncCipherNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        let shouldUpdate = true;\n        const localCipher = await this.cipherService.get(notification.id);\n        if (localCipher != null && localCipher.revisionDate >= notification.revisionDate) {\n          shouldUpdate = false;\n        }\n\n        let checkCollections = false;\n        if (shouldUpdate) {\n          if (isEdit) {\n            shouldUpdate = localCipher != null;\n            checkCollections = true;\n          } else {\n            if (notification.collectionIds == null || notification.organizationId == null) {\n              shouldUpdate = localCipher == null;\n            } else {\n              shouldUpdate = false;\n              checkCollections = true;\n            }\n          }\n        }\n\n        if (\n          !shouldUpdate &&\n          checkCollections &&\n          notification.organizationId != null &&\n          notification.collectionIds != null &&\n          notification.collectionIds.length > 0\n        ) {\n          const collections = await this.collectionService.getAll();\n          if (collections != null) {\n            for (let i = 0; i < collections.length; i++) {\n              if (notification.collectionIds.indexOf(collections[i].id) > -1) {\n                shouldUpdate = true;\n                break;\n              }\n            }\n          }\n        }\n\n        if (shouldUpdate) {\n          const remoteCipher = await this.apiService.getFullCipherDetails(notification.id);\n          if (remoteCipher != null) {\n            await this.cipherService.upsert(new CipherData(remoteCipher));\n            this.messagingService.send(\"syncedUpsertedCipher\", { cipherId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        if (e != null && e.statusCode === 404 && isEdit) {\n          await this.cipherService.delete(notification.id);\n          this.messagingService.send(\"syncedDeletedCipher\", { cipherId: notification.id });\n          return this.syncCompleted(true);\n        }\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteCipher(notification: SyncCipherNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.cipherService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedCipher\", { cipherId: notification.id });\n      return this.syncCompleted(true);\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncUpsertSend(notification: SyncSendNotification, isEdit: boolean): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      try {\n        const localSend = this.sendService.get(notification.id);\n        if (\n          (!isEdit && localSend == null) ||\n          (isEdit && localSend != null && localSend.revisionDate < notification.revisionDate)\n        ) {\n          const remoteSend = await this.sendApiService.getSend(notification.id);\n          if (remoteSend != null) {\n            await this.sendService.upsert(new SendData(remoteSend));\n            this.messagingService.send(\"syncedUpsertedSend\", { sendId: notification.id });\n            return this.syncCompleted(true);\n          }\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    }\n    return this.syncCompleted(false);\n  }\n\n  async syncDeleteSend(notification: SyncSendNotification): Promise<boolean> {\n    this.syncStarted();\n    if (await this.stateService.getIsAuthenticated()) {\n      await this.sendService.delete(notification.id);\n      this.messagingService.send(\"syncedDeletedSend\", { sendId: notification.id });\n      this.syncCompleted(true);\n      return true;\n    }\n    return this.syncCompleted(false);\n  }\n\n  // Helpers\n\n  private syncStarted() {\n    this.syncInProgress = true;\n    this.messagingService.send(\"syncStarted\");\n  }\n\n  private syncCompleted(successfully: boolean): boolean {\n    this.syncInProgress = false;\n    this.messagingService.send(\"syncCompleted\", { successfully: successfully });\n    return successfully;\n  }\n\n  private async needsSyncing(forceSync: boolean) {\n    if (forceSync) {\n      return true;\n    }\n\n    const lastSync = await this.getLastSync();\n    if (lastSync == null || lastSync.getTime() === 0) {\n      return true;\n    }\n\n    const response = await this.apiService.getAccountRevisionDate();\n    if (new Date(response) <= lastSync) {\n      return false;\n    }\n    return true;\n  }\n\n  private async syncProfile(response: ProfileResponse) {\n    const stamp = await this.stateService.getSecurityStamp();\n    if (stamp != null && stamp !== response.securityStamp) {\n      if (this.logoutCallback != null) {\n        await this.logoutCallback(true);\n      }\n\n      throw new Error(\"Stamp has changed\");\n    }\n\n    await this.cryptoService.setEncKey(response.key);\n    await this.cryptoService.setEncPrivateKey(response.privateKey);\n    await this.cryptoService.setProviderKeys(response.providers);\n    await this.cryptoService.setOrgKeys(response.organizations, response.providerOrganizations);\n    await this.stateService.setAvatarColor(response.avatarColor);\n    await this.stateService.setSecurityStamp(response.securityStamp);\n    await this.stateService.setEmailVerified(response.emailVerified);\n    await this.stateService.setHasPremiumPersonally(response.premiumPersonally);\n    await this.stateService.setHasPremiumFromOrganization(response.premiumFromOrganization);\n    await this.keyConnectorService.setUsesKeyConnector(response.usesKeyConnector);\n\n    // The `forcePasswordReset` flag indicates an admin has reset the user's password and must be updated\n    if (response.forcePasswordReset) {\n      await this.stateService.setForcePasswordResetReason(\n        ForceResetPasswordReason.AdminForcePasswordReset\n      );\n    }\n\n    await this.syncProfileOrganizations(response);\n\n    const providers: { [id: string]: ProviderData } = {};\n    response.providers.forEach((p) => {\n      providers[p.id] = new ProviderData(p);\n    });\n\n    await this.providerService.save(providers);\n\n    if (await this.keyConnectorService.userNeedsMigration()) {\n      await this.keyConnectorService.setConvertAccountRequired(true);\n      this.messagingService.send(\"convertAccountToKeyConnector\");\n    } else {\n      this.keyConnectorService.removeConvertAccountRequired();\n    }\n  }\n\n  private async syncProfileOrganizations(response: ProfileResponse) {\n    const organizations: { [id: string]: OrganizationData } = {};\n    response.organizations.forEach((o) => {\n      organizations[o.id] = new OrganizationData(o, {\n        isMember: true,\n        isProviderUser: false,\n      });\n    });\n\n    response.providerOrganizations.forEach((o) => {\n      if (organizations[o.id] == null) {\n        organizations[o.id] = new OrganizationData(o, {\n          isMember: false,\n          isProviderUser: true,\n        });\n      } else {\n        organizations[o.id].isProviderUser = true;\n      }\n    });\n\n    await this.organizationService.replace(organizations);\n  }\n\n  private async syncFolders(response: FolderResponse[]) {\n    const folders: { [id: string]: FolderData } = {};\n    response.forEach((f) => {\n      folders[f.id] = new FolderData(f);\n    });\n    return await this.folderService.replace(folders);\n  }\n\n  private async syncCollections(response: CollectionDetailsResponse[]) {\n    const collections: { [id: string]: CollectionData } = {};\n    response.forEach((c) => {\n      collections[c.id] = new CollectionData(c);\n    });\n    return await this.collectionService.replace(collections);\n  }\n\n  private async syncCiphers(response: CipherResponse[]) {\n    const ciphers: { [id: string]: CipherData } = {};\n    response.forEach((c) => {\n      ciphers[c.id] = new CipherData(c);\n    });\n    return await this.cipherService.replace(ciphers);\n  }\n\n  private async syncSends(response: SendResponse[]) {\n    const sends: { [id: string]: SendData } = {};\n    response.forEach((s) => {\n      sends[s.id] = new SendData(s);\n    });\n    return await this.sendService.replace(sends);\n  }\n\n  private async syncSettings(response: DomainsResponse) {\n    let eqDomains: string[][] = [];\n    if (response != null && response.equivalentDomains != null) {\n      eqDomains = eqDomains.concat(response.equivalentDomains);\n    }\n\n    if (response != null && response.globalEquivalentDomains != null) {\n      response.globalEquivalentDomains.forEach((global) => {\n        if (global.domains.length > 0) {\n          eqDomains.push(global.domains);\n        }\n      });\n    }\n\n    return this.settingsService.setEquivalentDomains(eqDomains);\n  }\n\n  private async syncPolicies(response: PolicyResponse[]) {\n    const policies: { [id: string]: PolicyData } = {};\n    if (response != null) {\n      response.forEach((p) => {\n        policies[p.id] = new PolicyData(p);\n      });\n    }\n    return await this.policyService.replace(policies);\n  }\n}\n","import { Directive } from \"@angular/core\";\n\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\nimport { ModalRef } from \"../../components/modal/modal.ref\";\n\n/**\n * Used to verify the user's Master Password for the \"Master Password Re-prompt\" feature only.\n * See UserVerificationComponent for any other situation where you need to verify the user's identity.\n */\n@Directive()\nexport class PasswordRepromptComponent {\n  showPassword = false;\n  masterPassword = \"\";\n\n  constructor(\n    private modalRef: ModalRef,\n    private cryptoService: CryptoService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService\n  ) {}\n\n  togglePassword() {\n    this.showPassword = !this.showPassword;\n  }\n\n  async submit() {\n    if (!(await this.cryptoService.compareAndUpdateKeyHash(this.masterPassword, null))) {\n      this.platformUtilsService.showToast(\n        \"error\",\n        this.i18nService.t(\"errorOccurred\"),\n        this.i18nService.t(\"invalidMasterPassword\")\n      );\n      return;\n    }\n\n    this.modalRef.close(true);\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { PasswordRepromptService as PasswordRepromptServiceAbstraction } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\n\nimport { ModalService } from \"../../services/modal.service\";\nimport { PasswordRepromptComponent } from \"../components/password-reprompt.component\";\n\n/**\n * Used to verify the user's Master Password for the \"Master Password Re-prompt\" feature only.\n * See UserVerificationService for any other situation where you need to verify the user's identity.\n */\n@Injectable()\nexport class PasswordRepromptService implements PasswordRepromptServiceAbstraction {\n  protected component = PasswordRepromptComponent;\n\n  constructor(\n    private modalService: ModalService,\n    private keyConnectorService: KeyConnectorService\n  ) {}\n\n  protectedFields() {\n    return [\"TOTP\", \"Password\", \"H_Field\", \"Card Number\", \"Security Code\"];\n  }\n\n  async showPasswordPrompt() {\n    if (!(await this.enabled())) {\n      return true;\n    }\n\n    const ref = this.modalService.open(this.component, { allowMultipleModals: true });\n\n    if (ref == null) {\n      return false;\n    }\n\n    const result = await ref.onClosedPromise();\n    return result === true;\n  }\n\n  async enabled() {\n    return !(await this.keyConnectorService.getUsesKeyConnector());\n  }\n}\n","import {\n  BroadcasterService as BroadcasterServiceAbstraction,\n  MessageBase,\n} from \"../abstractions/broadcaster.service\";\n\nexport class BroadcasterService implements BroadcasterServiceAbstraction {\n  subscribers: Map<string, (message: MessageBase) => void> = new Map<\n    string,\n    (message: MessageBase) => void\n  >();\n\n  send(message: MessageBase, id?: string) {\n    if (id != null) {\n      if (this.subscribers.has(id)) {\n        this.subscribers.get(id)(message);\n      }\n      return;\n    }\n\n    this.subscribers.forEach((value) => {\n      value(message);\n    });\n  }\n\n  subscribe(id: string, messageCallback: (message: MessageBase) => void) {\n    this.subscribers.set(id, messageCallback);\n  }\n\n  unsubscribe(id: string) {\n    if (this.subscribers.has(id)) {\n      this.subscribers.delete(id);\n    }\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { BroadcasterService as BaseBroadcasterService } from \"@bitwarden/common/services/broadcaster.service\";\n\n@Injectable()\nexport class BroadcasterService extends BaseBroadcasterService {}\n","import { ThemeType } from \"@bitwarden/common/enums\";\n\nimport { Theme } from \"./theme\";\n\nexport class ThemeBuilder implements Theme {\n  get effectiveTheme(): ThemeType {\n    return this.configuredTheme != ThemeType.System ? this.configuredTheme : this.systemTheme;\n  }\n\n  constructor(readonly configuredTheme: ThemeType, readonly systemTheme: ThemeType) {}\n\n  updateSystemTheme(systemTheme: ThemeType): ThemeBuilder {\n    return new ThemeBuilder(this.configuredTheme, systemTheme);\n  }\n\n  updateConfiguredTheme(configuredTheme: ThemeType): ThemeBuilder {\n    return new ThemeBuilder(configuredTheme, this.systemTheme);\n  }\n}\n","import { DOCUMENT } from \"@angular/common\";\nimport { Inject, Injectable } from \"@angular/core\";\nimport { BehaviorSubject, filter, fromEvent, Observable } from \"rxjs\";\n\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { ThemeType } from \"@bitwarden/common/enums\";\n\nimport { WINDOW } from \"../injection-tokens\";\n\nimport { Theme } from \"./theme\";\nimport { ThemeBuilder } from \"./themeBuilder\";\nimport { AbstractThemingService } from \"./theming.service.abstraction\";\n\n@Injectable()\nexport class ThemingService implements AbstractThemingService {\n  private _theme = new BehaviorSubject<ThemeBuilder | null>(null);\n  theme$: Observable<Theme> = this._theme.pipe(filter((x) => x !== null));\n\n  constructor(\n    private stateService: StateService,\n    @Inject(WINDOW) private window: Window,\n    @Inject(DOCUMENT) private document: Document\n  ) {\n    this.monitorThemeChanges();\n  }\n\n  async monitorThemeChanges(): Promise<void> {\n    this._theme.next(\n      new ThemeBuilder(await this.stateService.getTheme(), await this.getSystemTheme())\n    );\n    this.monitorConfiguredThemeChanges();\n    this.monitorSystemThemeChanges();\n  }\n\n  updateSystemTheme(systemTheme: ThemeType): void {\n    this._theme.next(this._theme.getValue().updateSystemTheme(systemTheme));\n  }\n\n  async updateConfiguredTheme(theme: ThemeType): Promise<void> {\n    await this.stateService.setTheme(theme);\n    this._theme.next(this._theme.getValue().updateConfiguredTheme(theme));\n  }\n\n  protected monitorConfiguredThemeChanges(): void {\n    this.theme$.subscribe((theme: Theme) => {\n      this.document.documentElement.classList.remove(\n        \"theme_\" + ThemeType.Light,\n        \"theme_\" + ThemeType.Dark,\n        \"theme_\" + ThemeType.Nord,\n        \"theme_\" + ThemeType.SolarizedDark\n      );\n      this.document.documentElement.classList.add(\"theme_\" + theme.effectiveTheme);\n    });\n  }\n\n  // We use a media match query for monitoring the system theme on web and browser, but this doesn't work for electron apps on Linux.\n  // In desktop we override these methods to track systemTheme with the electron renderer instead, which works for all OSs.\n  protected async getSystemTheme(): Promise<ThemeType> {\n    return this.window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n      ? ThemeType.Dark\n      : ThemeType.Light;\n  }\n\n  protected monitorSystemThemeChanges(): void {\n    fromEvent<MediaQueryListEvent>(\n      this.window.matchMedia(\"(prefers-color-scheme: dark)\"),\n      \"change\"\n    ).subscribe((event) => {\n      this.updateSystemTheme(event.matches ? ThemeType.Dark : ThemeType.Light);\n    });\n  }\n}\n","import { LOCALE_ID, NgModule } from \"@angular/core\";\n\nimport { AvatarUpdateService as AccountUpdateServiceAbstraction } from \"@bitwarden/common/abstractions/account/avatar-update.service\";\nimport { AnonymousHubService as AnonymousHubServiceAbstraction } from \"@bitwarden/common/abstractions/anonymousHub.service\";\nimport { ApiService as ApiServiceAbstraction } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService as AppIdServiceAbstraction } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuditService as AuditServiceAbstraction } from \"@bitwarden/common/abstractions/audit.service\";\nimport { BroadcasterService as BroadcasterServiceAbstraction } from \"@bitwarden/common/abstractions/broadcaster.service\";\nimport { ConfigApiServiceAbstraction } from \"@bitwarden/common/abstractions/config/config-api.service.abstraction\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/abstractions/config/config.service.abstraction\";\nimport { CryptoService as CryptoServiceAbstraction } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService as CryptoFunctionServiceAbstraction } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EncryptService } from \"@bitwarden/common/abstractions/encrypt.service\";\nimport { EnvironmentService as EnvironmentServiceAbstraction } from \"@bitwarden/common/abstractions/environment.service\";\nimport { EventCollectionService as EventCollectionServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventUploadService as EventUploadServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { ExportService as ExportServiceAbstraction } from \"@bitwarden/common/abstractions/export.service\";\nimport { FileUploadService as FileUploadServiceAbstraction } from \"@bitwarden/common/abstractions/file-upload/file-upload.service\";\nimport { FormValidationErrorsService as FormValidationErrorsServiceAbstraction } from \"@bitwarden/common/abstractions/formValidationErrors.service\";\nimport { I18nService as I18nServiceAbstraction } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService as MessagingServiceAbstraction } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { NotificationsService as NotificationsServiceAbstraction } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { OrgDomainApiServiceAbstraction } from \"@bitwarden/common/abstractions/organization-domain/org-domain-api.service.abstraction\";\nimport {\n  OrgDomainInternalServiceAbstraction,\n  OrgDomainServiceAbstraction,\n} from \"@bitwarden/common/abstractions/organization-domain/org-domain.service.abstraction\";\nimport { OrganizationUserService } from \"@bitwarden/common/abstractions/organization-user/organization-user.service\";\nimport { PlatformUtilsService as PlatformUtilsServiceAbstraction } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService as SearchServiceAbstraction } from \"@bitwarden/common/abstractions/search.service\";\nimport { SettingsService as SettingsServiceAbstraction } from \"@bitwarden/common/abstractions/settings.service\";\nimport { StateService as StateServiceAbstraction } from \"@bitwarden/common/abstractions/state.service\";\nimport { StateMigrationService as StateMigrationServiceAbstraction } from \"@bitwarden/common/abstractions/stateMigration.service\";\nimport { AbstractStorageService } from \"@bitwarden/common/abstractions/storage.service\";\nimport { TotpService as TotpServiceAbstraction } from \"@bitwarden/common/abstractions/totp.service\";\nimport { UserVerificationApiServiceAbstraction } from \"@bitwarden/common/abstractions/userVerification/userVerification-api.service.abstraction\";\nimport { UserVerificationService as UserVerificationServiceAbstraction } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { ValidationService as ValidationServiceAbstraction } from \"@bitwarden/common/abstractions/validation.service\";\nimport { VaultTimeoutService as VaultTimeoutServiceAbstraction } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService as VaultTimeoutSettingsServiceAbstraction } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { CollectionService as CollectionServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport {\n  InternalOrganizationService,\n  OrganizationService as OrganizationServiceAbstraction,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport {\n  InternalPolicyService,\n  PolicyService as PolicyServiceAbstraction,\n} from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService as ProviderServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/provider.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/services/collection.service\";\nimport { OrganizationApiService } from \"@bitwarden/common/admin-console/services/organization/organization-api.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/services/organization/organization.service\";\nimport { PolicyApiService } from \"@bitwarden/common/admin-console/services/policy/policy-api.service\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/services/policy/policy.service\";\nimport { ProviderService } from \"@bitwarden/common/admin-console/services/provider.service\";\nimport { AccountApiService as AccountApiServiceAbstraction } from \"@bitwarden/common/auth/abstractions/account-api.service\";\nimport {\n  AccountService as AccountServiceAbstraction,\n  InternalAccountService,\n} from \"@bitwarden/common/auth/abstractions/account.service\";\nimport { AuthService as AuthServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { KeyConnectorService as KeyConnectorServiceAbstraction } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { LoginService as LoginServiceAbstraction } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { TokenService as TokenServiceAbstraction } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { TwoFactorService as TwoFactorServiceAbstraction } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { AccountApiServiceImplementation } from \"@bitwarden/common/auth/services/account-api.service\";\nimport { AccountServiceImplementation } from \"@bitwarden/common/auth/services/account.service\";\nimport { AuthService } from \"@bitwarden/common/auth/services/auth.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/services/key-connector.service\";\nimport { LoginService } from \"@bitwarden/common/auth/services/login.service\";\nimport { TokenService } from \"@bitwarden/common/auth/services/token.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/services/two-factor.service\";\nimport { UserVerificationApiService } from \"@bitwarden/common/auth/services/user-verification/user-verification-api.service\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/services/user-verification/user-verification.service\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { flagEnabled } from \"@bitwarden/common/misc/flags\";\nimport { Account } from \"@bitwarden/common/models/domain/account\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { AvatarUpdateService } from \"@bitwarden/common/services/account/avatar-update.service\";\nimport { AnonymousHubService } from \"@bitwarden/common/services/anonymousHub.service\";\nimport { ApiService } from \"@bitwarden/common/services/api.service\";\nimport { AppIdService } from \"@bitwarden/common/services/appId.service\";\nimport { AuditService } from \"@bitwarden/common/services/audit.service\";\nimport { ConfigApiService } from \"@bitwarden/common/services/config/config-api.service\";\nimport { ConfigService } from \"@bitwarden/common/services/config/config.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/services/consoleLog.service\";\nimport { CryptoService } from \"@bitwarden/common/services/crypto.service\";\nimport { EncryptServiceImplementation } from \"@bitwarden/common/services/cryptography/encrypt.service.implementation\";\nimport { MultithreadEncryptServiceImplementation } from \"@bitwarden/common/services/cryptography/multithread-encrypt.service.implementation\";\nimport { EnvironmentService } from \"@bitwarden/common/services/environment.service\";\nimport { EventCollectionService } from \"@bitwarden/common/services/event/event-collection.service\";\nimport { EventUploadService } from \"@bitwarden/common/services/event/event-upload.service\";\nimport { ExportService } from \"@bitwarden/common/services/export.service\";\nimport { FileUploadService } from \"@bitwarden/common/services/file-upload/file-upload.service\";\nimport { FormValidationErrorsService } from \"@bitwarden/common/services/formValidationErrors.service\";\nimport { NotificationsService } from \"@bitwarden/common/services/notifications.service\";\nimport { OrgDomainApiService } from \"@bitwarden/common/services/organization-domain/org-domain-api.service\";\nimport { OrgDomainService } from \"@bitwarden/common/services/organization-domain/org-domain.service\";\nimport { OrganizationUserServiceImplementation } from \"@bitwarden/common/services/organization-user/organization-user.service.implementation\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\nimport { SettingsService } from \"@bitwarden/common/services/settings.service\";\nimport { StateService } from \"@bitwarden/common/services/state.service\";\nimport { StateMigrationService } from \"@bitwarden/common/services/stateMigration.service\";\nimport { TotpService } from \"@bitwarden/common/services/totp.service\";\nimport { ValidationService } from \"@bitwarden/common/services/validation.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/services/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/services/vaultTimeout/vaultTimeoutSettings.service\";\nimport { WebCryptoFunctionService } from \"@bitwarden/common/services/webCryptoFunction.service\";\nimport {\n  PasswordGenerationService,\n  PasswordGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/password\";\nimport {\n  UsernameGenerationService,\n  UsernameGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/username\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service\";\nimport { SendApiService as SendApiServiceAbstraction } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service\";\nimport { SendService as SendServiceAbstraction } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { CipherService as CipherServiceAbstraction } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherFileUploadService as CipherFileUploadServiceAbstraction } from \"@bitwarden/common/vault/abstractions/file-upload/cipher-file-upload.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport {\n  FolderService as FolderServiceAbstraction,\n  InternalFolderService,\n} from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService as PasswordRepromptServiceAbstraction } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { SyncNotifierService as SyncNotifierServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync-notifier.service.abstraction\";\nimport { SyncService as SyncServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherService } from \"@bitwarden/common/vault/services/cipher.service\";\nimport { CipherFileUploadService } from \"@bitwarden/common/vault/services/file-upload/cipher-file-upload.service\";\nimport { FolderApiService } from \"@bitwarden/common/vault/services/folder/folder-api.service\";\nimport { FolderService } from \"@bitwarden/common/vault/services/folder/folder.service\";\nimport { SyncNotifierService } from \"@bitwarden/common/vault/services/sync/sync-notifier.service\";\nimport { SyncService } from \"@bitwarden/common/vault/services/sync/sync.service\";\n\nimport { AuthGuard } from \"../auth/guards/auth.guard\";\nimport { LockGuard } from \"../auth/guards/lock.guard\";\nimport { UnauthGuard } from \"../auth/guards/unauth.guard\";\nimport { PasswordRepromptService } from \"../vault/services/password-reprompt.service\";\n\nimport { BroadcasterService } from \"./broadcaster.service\";\nimport {\n  LOCALES_DIRECTORY,\n  LOCKED_CALLBACK,\n  LOG_MAC_FAILURES,\n  LOGOUT_CALLBACK,\n  MEMORY_STORAGE,\n  SECURE_STORAGE,\n  STATE_FACTORY,\n  STATE_SERVICE_USE_CACHE,\n  SYSTEM_LANGUAGE,\n  WINDOW,\n} from \"./injection-tokens\";\nimport { ModalService } from \"./modal.service\";\nimport { ThemingService } from \"./theming/theming.service\";\nimport { AbstractThemingService } from \"./theming/theming.service.abstraction\";\n\n@NgModule({\n  declarations: [],\n  providers: [\n    AuthGuard,\n    UnauthGuard,\n    LockGuard,\n    ModalService,\n    { provide: WINDOW, useValue: window },\n    {\n      provide: LOCALE_ID,\n      useFactory: (i18nService: I18nServiceAbstraction) => i18nService.translationLocale,\n      deps: [I18nServiceAbstraction],\n    },\n    {\n      provide: LOCALES_DIRECTORY,\n      useValue: \"./locales\",\n    },\n    {\n      provide: SYSTEM_LANGUAGE,\n      useFactory: (window: Window) => window.navigator.language,\n      deps: [WINDOW],\n    },\n    {\n      provide: STATE_FACTORY,\n      useValue: new StateFactory(GlobalState, Account),\n    },\n    {\n      provide: STATE_SERVICE_USE_CACHE,\n      useValue: true,\n    },\n    {\n      provide: LOGOUT_CALLBACK,\n      useFactory:\n        (messagingService: MessagingServiceAbstraction) => (expired: boolean, userId?: string) =>\n          messagingService.send(\"logout\", { expired: expired, userId: userId }),\n      deps: [MessagingServiceAbstraction],\n    },\n    {\n      provide: LOCKED_CALLBACK,\n      useValue: null,\n    },\n    {\n      provide: LOG_MAC_FAILURES,\n      useValue: true,\n    },\n    {\n      provide: AppIdServiceAbstraction,\n      useClass: AppIdService,\n      deps: [AbstractStorageService],\n    },\n    {\n      provide: AuditServiceAbstraction,\n      useClass: AuditService,\n      deps: [CryptoFunctionServiceAbstraction, ApiServiceAbstraction],\n    },\n    {\n      provide: AuthServiceAbstraction,\n      useClass: AuthService,\n      deps: [\n        CryptoServiceAbstraction,\n        ApiServiceAbstraction,\n        TokenServiceAbstraction,\n        AppIdServiceAbstraction,\n        PlatformUtilsServiceAbstraction,\n        MessagingServiceAbstraction,\n        LogService,\n        KeyConnectorServiceAbstraction,\n        EnvironmentServiceAbstraction,\n        StateServiceAbstraction,\n        TwoFactorServiceAbstraction,\n        I18nServiceAbstraction,\n        EncryptService,\n        PasswordGenerationServiceAbstraction,\n        PolicyServiceAbstraction,\n      ],\n    },\n    {\n      provide: FileUploadServiceAbstraction,\n      useClass: FileUploadService,\n      deps: [LoginServiceAbstraction],\n    },\n    {\n      provide: CipherFileUploadServiceAbstraction,\n      useClass: CipherFileUploadService,\n      deps: [ApiServiceAbstraction, FileUploadServiceAbstraction],\n    },\n    {\n      provide: CipherServiceAbstraction,\n      useFactory: (\n        cryptoService: CryptoServiceAbstraction,\n        settingsService: SettingsServiceAbstraction,\n        apiService: ApiServiceAbstraction,\n        i18nService: I18nServiceAbstraction,\n        searchService: SearchServiceAbstraction,\n        stateService: StateServiceAbstraction,\n        encryptService: EncryptService,\n        fileUploadService: CipherFileUploadServiceAbstraction\n      ) =>\n        new CipherService(\n          cryptoService,\n          settingsService,\n          apiService,\n          i18nService,\n          searchService,\n          stateService,\n          encryptService,\n          fileUploadService\n        ),\n      deps: [\n        CryptoServiceAbstraction,\n        SettingsServiceAbstraction,\n        ApiServiceAbstraction,\n        I18nServiceAbstraction,\n        SearchServiceAbstraction,\n        StateServiceAbstraction,\n        EncryptService,\n        CipherFileUploadServiceAbstraction,\n      ],\n    },\n    {\n      provide: FolderServiceAbstraction,\n      useClass: FolderService,\n      deps: [\n        CryptoServiceAbstraction,\n        I18nServiceAbstraction,\n        CipherServiceAbstraction,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: InternalFolderService,\n      useExisting: FolderServiceAbstraction,\n    },\n    {\n      provide: FolderApiServiceAbstraction,\n      useClass: FolderApiService,\n      deps: [FolderServiceAbstraction, ApiServiceAbstraction],\n    },\n    {\n      provide: AccountApiServiceAbstraction,\n      useClass: AccountApiServiceImplementation,\n      deps: [\n        ApiServiceAbstraction,\n        UserVerificationServiceAbstraction,\n        LogService,\n        InternalAccountService,\n      ],\n    },\n    {\n      provide: AccountServiceAbstraction,\n      useClass: AccountServiceImplementation,\n      deps: [MessagingServiceAbstraction, LogService],\n    },\n    {\n      provide: InternalAccountService,\n      useExisting: AccountServiceAbstraction,\n    },\n    {\n      provide: AccountUpdateServiceAbstraction,\n      useClass: AvatarUpdateService,\n      deps: [ApiServiceAbstraction, StateServiceAbstraction],\n    },\n    { provide: LogService, useFactory: () => new ConsoleLogService(false) },\n    {\n      provide: CollectionServiceAbstraction,\n      useClass: CollectionService,\n      deps: [CryptoServiceAbstraction, I18nServiceAbstraction, StateServiceAbstraction],\n    },\n    {\n      provide: EnvironmentServiceAbstraction,\n      useClass: EnvironmentService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: TotpServiceAbstraction,\n      useClass: TotpService,\n      deps: [CryptoFunctionServiceAbstraction, LogService, StateServiceAbstraction],\n    },\n    { provide: TokenServiceAbstraction, useClass: TokenService, deps: [StateServiceAbstraction] },\n    {\n      provide: CryptoServiceAbstraction,\n      useClass: CryptoService,\n      deps: [\n        CryptoFunctionServiceAbstraction,\n        EncryptService,\n        PlatformUtilsServiceAbstraction,\n        LogService,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: PasswordGenerationServiceAbstraction,\n      useClass: PasswordGenerationService,\n      deps: [CryptoServiceAbstraction, PolicyServiceAbstraction, StateServiceAbstraction],\n    },\n    {\n      provide: UsernameGenerationServiceAbstraction,\n      useClass: UsernameGenerationService,\n      deps: [CryptoServiceAbstraction, StateServiceAbstraction, ApiServiceAbstraction],\n    },\n    {\n      provide: ApiServiceAbstraction,\n      useClass: ApiService,\n      deps: [\n        TokenServiceAbstraction,\n        PlatformUtilsServiceAbstraction,\n        EnvironmentServiceAbstraction,\n        AppIdServiceAbstraction,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    {\n      provide: SendServiceAbstraction,\n      useClass: SendService,\n      deps: [\n        CryptoServiceAbstraction,\n        I18nServiceAbstraction,\n        CryptoFunctionServiceAbstraction,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: SendApiServiceAbstraction,\n      useClass: SendApiService,\n      deps: [ApiServiceAbstraction, FileUploadServiceAbstraction, SendServiceAbstraction],\n    },\n    {\n      provide: SyncServiceAbstraction,\n      useClass: SyncService,\n      deps: [\n        ApiServiceAbstraction,\n        SettingsServiceAbstraction,\n        FolderServiceAbstraction,\n        CipherServiceAbstraction,\n        CryptoServiceAbstraction,\n        CollectionServiceAbstraction,\n        MessagingServiceAbstraction,\n        PolicyServiceAbstraction,\n        SendServiceAbstraction,\n        LogService,\n        KeyConnectorServiceAbstraction,\n        StateServiceAbstraction,\n        ProviderServiceAbstraction,\n        FolderApiServiceAbstraction,\n        OrganizationServiceAbstraction,\n        SendApiServiceAbstraction,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    { provide: BroadcasterServiceAbstraction, useClass: BroadcasterService },\n    {\n      provide: SettingsServiceAbstraction,\n      useClass: SettingsService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: VaultTimeoutSettingsServiceAbstraction,\n      useClass: VaultTimeoutSettingsService,\n      deps: [\n        CryptoServiceAbstraction,\n        TokenServiceAbstraction,\n        PolicyServiceAbstraction,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: VaultTimeoutServiceAbstraction,\n      useClass: VaultTimeoutService,\n      deps: [\n        CipherServiceAbstraction,\n        FolderServiceAbstraction,\n        CollectionServiceAbstraction,\n        CryptoServiceAbstraction,\n        PlatformUtilsServiceAbstraction,\n        MessagingServiceAbstraction,\n        SearchServiceAbstraction,\n        KeyConnectorServiceAbstraction,\n        StateServiceAbstraction,\n        AuthServiceAbstraction,\n        VaultTimeoutSettingsServiceAbstraction,\n        LOCKED_CALLBACK,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    {\n      provide: StateServiceAbstraction,\n      useClass: StateService,\n      deps: [\n        AbstractStorageService,\n        SECURE_STORAGE,\n        MEMORY_STORAGE,\n        LogService,\n        StateMigrationServiceAbstraction,\n        STATE_FACTORY,\n        STATE_SERVICE_USE_CACHE,\n      ],\n    },\n    {\n      provide: StateMigrationServiceAbstraction,\n      useClass: StateMigrationService,\n      deps: [AbstractStorageService, SECURE_STORAGE, STATE_FACTORY],\n    },\n    {\n      provide: ExportServiceAbstraction,\n      useClass: ExportService,\n      deps: [\n        FolderServiceAbstraction,\n        CipherServiceAbstraction,\n        ApiServiceAbstraction,\n        CryptoServiceAbstraction,\n        CryptoFunctionServiceAbstraction,\n        StateServiceAbstraction,\n      ],\n    },\n    {\n      provide: SearchServiceAbstraction,\n      useClass: SearchService,\n      deps: [LogService, I18nServiceAbstraction],\n    },\n    {\n      provide: NotificationsServiceAbstraction,\n      useClass: NotificationsService,\n      deps: [\n        SyncServiceAbstraction,\n        AppIdServiceAbstraction,\n        ApiServiceAbstraction,\n        EnvironmentServiceAbstraction,\n        LOGOUT_CALLBACK,\n        LogService,\n        StateServiceAbstraction,\n        AuthServiceAbstraction,\n        MessagingServiceAbstraction,\n      ],\n    },\n    {\n      provide: CryptoFunctionServiceAbstraction,\n      useClass: WebCryptoFunctionService,\n      deps: [WINDOW],\n    },\n    {\n      provide: EncryptService,\n      useFactory: encryptServiceFactory,\n      deps: [CryptoFunctionServiceAbstraction, LogService, LOG_MAC_FAILURES],\n    },\n    {\n      provide: EventUploadServiceAbstraction,\n      useClass: EventUploadService,\n      deps: [ApiServiceAbstraction, StateServiceAbstraction, LogService],\n    },\n    {\n      provide: EventCollectionServiceAbstraction,\n      useClass: EventCollectionService,\n      deps: [\n        CipherServiceAbstraction,\n        StateServiceAbstraction,\n        OrganizationServiceAbstraction,\n        EventUploadServiceAbstraction,\n      ],\n    },\n    {\n      provide: PolicyServiceAbstraction,\n      useClass: PolicyService,\n      deps: [StateServiceAbstraction, OrganizationServiceAbstraction],\n    },\n    {\n      provide: InternalPolicyService,\n      useExisting: PolicyServiceAbstraction,\n    },\n    {\n      provide: PolicyApiServiceAbstraction,\n      useClass: PolicyApiService,\n      deps: [PolicyServiceAbstraction, ApiServiceAbstraction, StateServiceAbstraction],\n    },\n    {\n      provide: KeyConnectorServiceAbstraction,\n      useClass: KeyConnectorService,\n      deps: [\n        StateServiceAbstraction,\n        CryptoServiceAbstraction,\n        ApiServiceAbstraction,\n        TokenServiceAbstraction,\n        LogService,\n        OrganizationServiceAbstraction,\n        CryptoFunctionServiceAbstraction,\n        SyncNotifierServiceAbstraction,\n        MessagingServiceAbstraction,\n        LOGOUT_CALLBACK,\n      ],\n    },\n    {\n      provide: UserVerificationServiceAbstraction,\n      useClass: UserVerificationService,\n      deps: [\n        CryptoServiceAbstraction,\n        I18nServiceAbstraction,\n        UserVerificationApiServiceAbstraction,\n      ],\n    },\n    { provide: PasswordRepromptServiceAbstraction, useClass: PasswordRepromptService },\n    {\n      provide: OrganizationServiceAbstraction,\n      useClass: OrganizationService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: InternalOrganizationService,\n      useExisting: OrganizationServiceAbstraction,\n    },\n    {\n      provide: OrganizationUserService,\n      useClass: OrganizationUserServiceImplementation,\n      deps: [ApiServiceAbstraction],\n    },\n    {\n      provide: ProviderServiceAbstraction,\n      useClass: ProviderService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: TwoFactorServiceAbstraction,\n      useClass: TwoFactorService,\n      deps: [I18nServiceAbstraction, PlatformUtilsServiceAbstraction],\n    },\n    {\n      provide: AbstractThemingService,\n      useClass: ThemingService,\n    },\n    {\n      provide: FormValidationErrorsServiceAbstraction,\n      useClass: FormValidationErrorsService,\n    },\n    {\n      provide: UserVerificationApiServiceAbstraction,\n      useClass: UserVerificationApiService,\n      deps: [ApiServiceAbstraction],\n    },\n    {\n      provide: OrganizationApiServiceAbstraction,\n      useClass: OrganizationApiService,\n      // This is a slightly odd dependency tree for a specialized api service\n      // it depends on SyncService so that new data can be retrieved through the sync\n      // rather than updating the OrganizationService directly. Instead OrganizationService\n      // subscribes to sync notifications and will update itself based on that.\n      deps: [ApiServiceAbstraction, SyncServiceAbstraction],\n    },\n    {\n      provide: SyncNotifierServiceAbstraction,\n      useClass: SyncNotifierService,\n    },\n    {\n      provide: ConfigServiceAbstraction,\n      useClass: ConfigService,\n      deps: [StateServiceAbstraction, ConfigApiServiceAbstraction],\n    },\n    {\n      provide: ConfigApiServiceAbstraction,\n      useClass: ConfigApiService,\n      deps: [ApiServiceAbstraction],\n    },\n    {\n      provide: AnonymousHubServiceAbstraction,\n      useClass: AnonymousHubService,\n      deps: [EnvironmentServiceAbstraction, AuthServiceAbstraction, LogService],\n    },\n    {\n      provide: ValidationServiceAbstraction,\n      useClass: ValidationService,\n      deps: [I18nServiceAbstraction, PlatformUtilsServiceAbstraction],\n    },\n    {\n      provide: LoginServiceAbstraction,\n      useClass: LoginService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: OrgDomainServiceAbstraction,\n      useClass: OrgDomainService,\n      deps: [PlatformUtilsServiceAbstraction, I18nServiceAbstraction],\n    },\n    {\n      provide: OrgDomainInternalServiceAbstraction,\n      useExisting: OrgDomainServiceAbstraction,\n    },\n    {\n      provide: OrgDomainApiServiceAbstraction,\n      useClass: OrgDomainApiService,\n      deps: [OrgDomainServiceAbstraction, ApiServiceAbstraction],\n    },\n  ],\n})\nexport class JslibServicesModule {}\n\nfunction encryptServiceFactory(\n  cryptoFunctionservice: CryptoFunctionServiceAbstraction,\n  logService: LogService,\n  logMacFailures: boolean\n): EncryptService {\n  return flagEnabled(\"multithreadDecryption\")\n    ? new MultithreadEncryptServiceImplementation(cryptoFunctionservice, logService, logMacFailures)\n    : new EncryptServiceImplementation(cryptoFunctionservice, logService, logMacFailures);\n}\n","import { Verification } from \"../../types/verification\";\n\nexport abstract class AccountApiService {\n  abstract deleteAccount(verification: Verification): Promise<void>;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { LogService } from \"../../abstractions/log.service\";\nimport { UserVerificationService } from \"../../abstractions/userVerification/userVerification.service.abstraction\";\nimport { Verification } from \"../../types/verification\";\nimport { AccountApiService } from \"../abstractions/account-api.service\";\nimport { InternalAccountService } from \"../abstractions/account.service\";\n\nexport class AccountApiServiceImplementation implements AccountApiService {\n  constructor(\n    private apiService: ApiService,\n    private userVerificationService: UserVerificationService,\n    private logService: LogService,\n    private accountService: InternalAccountService\n  ) {}\n\n  async deleteAccount(verification: Verification): Promise<void> {\n    try {\n      const verificationRequest = await this.userVerificationService.buildRequest(verification);\n      await this.apiService.send(\"DELETE\", \"/accounts\", verificationRequest, true, false);\n      this.accountService.delete();\n    } catch (e) {\n      this.logService.error(e);\n      throw e;\n    }\n  }\n}\n","import { LogService } from \"../../abstractions/log.service\";\nimport { MessagingService } from \"../../abstractions/messaging.service\";\nimport { InternalAccountService } from \"../../auth/abstractions/account.service\";\n\nexport class AccountServiceImplementation implements InternalAccountService {\n  constructor(private messagingService: MessagingService, private logService: LogService) {}\n\n  async delete(): Promise<void> {\n    try {\n      this.messagingService.send(\"logout\");\n    } catch (e) {\n      this.logService.error(e);\n      throw e;\n    }\n  }\n}\n","import { Observable } from \"rxjs\";\n\nimport { ProfileResponse } from \"../../models/response/profile.response\";\nexport abstract class AvatarUpdateService {\n  avatarUpdate$ = new Observable<string | null>();\n  abstract pushUpdate(color: string): Promise<ProfileResponse | void>;\n  abstract loadColorFromState(): Promise<string | null>;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { OrganizationUserService } from \"../../abstractions/organization-user/organization-user.service\";\nimport {\n  OrganizationUserAcceptInitRequest,\n  OrganizationUserAcceptRequest,\n  OrganizationUserBulkConfirmRequest,\n  OrganizationUserConfirmRequest,\n  OrganizationUserInviteRequest,\n  OrganizationUserResetPasswordEnrollmentRequest,\n  OrganizationUserResetPasswordRequest,\n  OrganizationUserUpdateGroupsRequest,\n  OrganizationUserUpdateRequest,\n} from \"../../abstractions/organization-user/requests\";\nimport {\n  OrganizationUserBulkPublicKeyResponse,\n  OrganizationUserBulkResponse,\n  OrganizationUserDetailsResponse,\n  OrganizationUserResetPasswordDetailsReponse,\n  OrganizationUserUserDetailsResponse,\n} from \"../../abstractions/organization-user/responses\";\nimport { ListResponse } from \"../../models/response/list.response\";\n\nimport { OrganizationUserBulkRequest } from \"./requests\";\n\nexport class OrganizationUserServiceImplementation implements OrganizationUserService {\n  constructor(private apiService: ApiService) {}\n\n  async getOrganizationUser(\n    organizationId: string,\n    id: string,\n    options?: {\n      includeGroups?: boolean;\n    }\n  ): Promise<OrganizationUserDetailsResponse> {\n    const params = new URLSearchParams();\n\n    if (options?.includeGroups) {\n      params.set(\"includeGroups\", \"true\");\n    }\n\n    const r = await this.apiService.send(\n      \"GET\",\n      `/organizations/${organizationId}/users/${id}?${params.toString()}`,\n      null,\n      true,\n      true\n    );\n    return new OrganizationUserDetailsResponse(r);\n  }\n\n  async getOrganizationUserGroups(organizationId: string, id: string): Promise<string[]> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/groups\",\n      null,\n      true,\n      true\n    );\n    return r;\n  }\n\n  async getAllUsers(\n    organizationId: string,\n    options?: {\n      includeCollections?: boolean;\n      includeGroups?: boolean;\n    }\n  ): Promise<ListResponse<OrganizationUserUserDetailsResponse>> {\n    const params = new URLSearchParams();\n\n    if (options?.includeCollections) {\n      params.set(\"includeCollections\", \"true\");\n    }\n    if (options?.includeGroups) {\n      params.set(\"includeGroups\", \"true\");\n    }\n\n    const r = await this.apiService.send(\n      \"GET\",\n      `/organizations/${organizationId}/users?${params.toString()}`,\n      null,\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserUserDetailsResponse);\n  }\n\n  async getOrganizationUserResetPasswordDetails(\n    organizationId: string,\n    id: string\n  ): Promise<OrganizationUserResetPasswordDetailsReponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/reset-password-details\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationUserResetPasswordDetailsReponse(r);\n  }\n\n  postOrganizationUserInvite(\n    organizationId: string,\n    request: OrganizationUserInviteRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/invite\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postOrganizationUserReinvite(organizationId: string, id: string): Promise<any> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/reinvite\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async postManyOrganizationUserReinvite(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/reinvite\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  postOrganizationUserAcceptInit(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserAcceptInitRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/accept-init\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postOrganizationUserAccept(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserAcceptRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/accept\",\n      request,\n      true,\n      false\n    );\n  }\n\n  postOrganizationUserConfirm(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserConfirmRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/confirm\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async postOrganizationUsersPublicKey(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkPublicKeyResponse>> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/public-keys\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkPublicKeyResponse);\n  }\n\n  async postOrganizationUserBulkConfirm(\n    organizationId: string,\n    request: OrganizationUserBulkConfirmRequest\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/users/confirm\",\n      request,\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  putOrganizationUser(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserUpdateRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id,\n      request,\n      true,\n      false\n    );\n  }\n\n  putOrganizationUserGroups(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserUpdateGroupsRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/groups\",\n      request,\n      true,\n      false\n    );\n  }\n\n  putOrganizationUserResetPasswordEnrollment(\n    organizationId: string,\n    userId: string,\n    request: OrganizationUserResetPasswordEnrollmentRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + userId + \"/reset-password-enrollment\",\n      request,\n      true,\n      false\n    );\n  }\n\n  putOrganizationUserResetPassword(\n    organizationId: string,\n    id: string,\n    request: OrganizationUserResetPasswordRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/reset-password\",\n      request,\n      true,\n      false\n    );\n  }\n\n  deleteOrganizationUser(organizationId: string, id: string): Promise<any> {\n    return this.apiService.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/users/\" + id,\n      null,\n      true,\n      false\n    );\n  }\n\n  async deleteManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"DELETE\",\n      \"/organizations/\" + organizationId + \"/users\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  revokeOrganizationUser(organizationId: string, id: string): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/revoke\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async revokeManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/revoke\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n\n  restoreOrganizationUser(organizationId: string, id: string): Promise<void> {\n    return this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/\" + id + \"/restore\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async restoreManyOrganizationUsers(\n    organizationId: string,\n    ids: string[]\n  ): Promise<ListResponse<OrganizationUserBulkResponse>> {\n    const r = await this.apiService.send(\n      \"PUT\",\n      \"/organizations/\" + organizationId + \"/users/restore\",\n      new OrganizationUserBulkRequest(ids),\n      true,\n      true\n    );\n    return new ListResponse(r, OrganizationUserBulkResponse);\n  }\n}\n","import { UntypedFormGroup, ValidationErrors } from \"@angular/forms\";\n\nimport {\n  FormGroupControls,\n  FormValidationErrorsService as FormValidationErrorsAbstraction,\n  AllValidationErrors,\n} from \"../abstractions/formValidationErrors.service\";\n\nexport class FormValidationErrorsService implements FormValidationErrorsAbstraction {\n  getFormValidationErrors(controls: FormGroupControls): AllValidationErrors[] {\n    let errors: AllValidationErrors[] = [];\n    Object.keys(controls).forEach((key) => {\n      const control = controls[key];\n      if (control instanceof UntypedFormGroup) {\n        errors = errors.concat(this.getFormValidationErrors(control.controls));\n      }\n\n      const controlErrors: ValidationErrors = controls[key].errors;\n      if (controlErrors !== null) {\n        Object.keys(controlErrors).forEach((keyError) => {\n          errors.push({\n            controlName: key,\n            errorName: keyError,\n          });\n        });\n      }\n    });\n\n    return errors;\n  }\n}\n","import { ApiService } from \"../../../abstractions/api.service\";\nimport { OrganizationApiKeyRequest } from \"../../../admin-console/models/request/organization-api-key.request\";\nimport { OrganizationSsoRequest } from \"../../../auth/models/request/organization-sso.request\";\nimport { SecretVerificationRequest } from \"../../../auth/models/request/secret-verification.request\";\nimport { ApiKeyResponse } from \"../../../auth/models/response/api-key.response\";\nimport { OrganizationSsoResponse } from \"../../../auth/models/response/organization-sso.response\";\nimport { OrganizationSubscriptionUpdateRequest } from \"../../../billing/models/request/organization-subscription-update.request\";\nimport { OrganizationTaxInfoUpdateRequest } from \"../../../billing/models/request/organization-tax-info-update.request\";\nimport { PaymentRequest } from \"../../../billing/models/request/payment.request\";\nimport { BillingResponse } from \"../../../billing/models/response/billing.response\";\nimport { OrganizationSubscriptionResponse } from \"../../../billing/models/response/organization-subscription.response\";\nimport { PaymentResponse } from \"../../../billing/models/response/payment.response\";\nimport { TaxInfoResponse } from \"../../../billing/models/response/tax-info.response\";\nimport { ImportDirectoryRequest } from \"../../../models/request/import-directory.request\";\nimport { SeatRequest } from \"../../../models/request/seat.request\";\nimport { StorageRequest } from \"../../../models/request/storage.request\";\nimport { VerifyBankRequest } from \"../../../models/request/verify-bank.request\";\nimport { ListResponse } from \"../../../models/response/list.response\";\nimport { SyncService } from \"../../../vault/abstractions/sync/sync.service.abstraction\";\nimport { OrganizationApiServiceAbstraction } from \"../../abstractions/organization/organization-api.service.abstraction\";\nimport { OrganizationApiKeyType } from \"../../enums\";\nimport { OrganizationCreateRequest } from \"../../models/request/organization-create.request\";\nimport { OrganizationKeysRequest } from \"../../models/request/organization-keys.request\";\nimport { OrganizationUpdateRequest } from \"../../models/request/organization-update.request\";\nimport { OrganizationUpgradeRequest } from \"../../models/request/organization-upgrade.request\";\nimport { OrganizationEnrollSecretsManagerRequest } from \"../../models/request/organization/organization-enroll-secrets-manager.request\";\nimport { OrganizationApiKeyInformationResponse } from \"../../models/response/organization-api-key-information.response\";\nimport { OrganizationAutoEnrollStatusResponse } from \"../../models/response/organization-auto-enroll-status.response\";\nimport { OrganizationKeysResponse } from \"../../models/response/organization-keys.response\";\nimport { OrganizationResponse } from \"../../models/response/organization.response\";\n\nexport class OrganizationApiService implements OrganizationApiServiceAbstraction {\n  constructor(private apiService: ApiService, private syncService: SyncService) {}\n\n  async get(id: string): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id, null, true, true);\n    return new OrganizationResponse(r);\n  }\n\n  async getBilling(id: string): Promise<BillingResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + id + \"/billing\",\n      null,\n      true,\n      true\n    );\n    return new BillingResponse(r);\n  }\n\n  async getSubscription(id: string): Promise<OrganizationSubscriptionResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + id + \"/subscription\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationSubscriptionResponse(r);\n  }\n\n  async getLicense(id: string, installationId: string): Promise<unknown> {\n    return this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + id + \"/license?installationId=\" + installationId,\n      null,\n      true,\n      true\n    );\n  }\n\n  async getAutoEnrollStatus(identifier: string): Promise<OrganizationAutoEnrollStatusResponse> {\n    const r = await this.apiService.send(\n      \"GET\",\n      \"/organizations/\" + identifier + \"/auto-enroll-status\",\n      null,\n      true,\n      true\n    );\n    return new OrganizationAutoEnrollStatusResponse(r);\n  }\n\n  async create(request: OrganizationCreateRequest): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\"POST\", \"/organizations\", request, true, true);\n    // Forcing a sync will notify organization service that they need to repull\n    await this.syncService.fullSync(true);\n    return new OrganizationResponse(r);\n  }\n\n  async createLicense(data: FormData): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/licenses/self-hosted\",\n      data,\n      true,\n      true\n    );\n    return new OrganizationResponse(r);\n  }\n\n  async save(id: string, request: OrganizationUpdateRequest): Promise<OrganizationResponse> {\n    const r = await this.apiService.send(\"PUT\", \"/organizations/\" + id, request, true, true);\n    const data = new OrganizationResponse(r);\n    await this.syncService.fullSync(true);\n    return data;\n  }\n\n  async updatePayment(id: string, request: PaymentRequest): Promise<void> {\n    return this.apiService.send(\"POST\", \"/organizations/\" + id + \"/payment\", request, true, false);\n  }\n\n  async upgrade(id: string, request: OrganizationUpgradeRequest): Promise<PaymentResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/upgrade\",\n      request,\n      true,\n      true\n    );\n    return new PaymentResponse(r);\n  }\n\n  async updateSubscription(\n    id: string,\n    request: OrganizationSubscriptionUpdateRequest\n  ): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/subscription\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async updateSeats(id: string, request: SeatRequest): Promise<PaymentResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/seat\",\n      request,\n      true,\n      true\n    );\n    return new PaymentResponse(r);\n  }\n\n  async updateStorage(id: string, request: StorageRequest): Promise<PaymentResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/storage\",\n      request,\n      true,\n      true\n    );\n    return new PaymentResponse(r);\n  }\n\n  async verifyBank(id: string, request: VerifyBankRequest): Promise<void> {\n    await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/verify-bank\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async cancel(id: string): Promise<void> {\n    return this.apiService.send(\"POST\", \"/organizations/\" + id + \"/cancel\", null, true, false);\n  }\n\n  async reinstate(id: string): Promise<void> {\n    return this.apiService.send(\"POST\", \"/organizations/\" + id + \"/reinstate\", null, true, false);\n  }\n\n  async leave(id: string): Promise<void> {\n    await this.apiService.send(\"POST\", \"/organizations/\" + id + \"/leave\", null, true, false);\n    await this.syncService.fullSync(true);\n  }\n\n  async delete(id: string, request: SecretVerificationRequest): Promise<void> {\n    await this.apiService.send(\"DELETE\", \"/organizations/\" + id, request, true, false);\n    await this.syncService.fullSync(true);\n  }\n\n  async updateLicense(id: string, data: FormData): Promise<void> {\n    await this.apiService.send(\n      \"POST\",\n      \"/organizations/licenses/self-hosted/\" + id,\n      data,\n      true,\n      false\n    );\n  }\n\n  async importDirectory(organizationId: string, request: ImportDirectoryRequest): Promise<void> {\n    return this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + organizationId + \"/import\",\n      request,\n      true,\n      false\n    );\n  }\n\n  async getOrCreateApiKey(id: string, request: OrganizationApiKeyRequest): Promise<ApiKeyResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/api-key\",\n      request,\n      true,\n      true\n    );\n    return new ApiKeyResponse(r);\n  }\n\n  async getApiKeyInformation(\n    id: string,\n    organizationApiKeyType: OrganizationApiKeyType = null\n  ): Promise<ListResponse<OrganizationApiKeyInformationResponse>> {\n    const uri =\n      organizationApiKeyType === null\n        ? \"/organizations/\" + id + \"/api-key-information\"\n        : \"/organizations/\" + id + \"/api-key-information/\" + organizationApiKeyType;\n    const r = await this.apiService.send(\"GET\", uri, null, true, true);\n    return new ListResponse(r, OrganizationApiKeyInformationResponse);\n  }\n\n  async rotateApiKey(id: string, request: OrganizationApiKeyRequest): Promise<ApiKeyResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/rotate-api-key\",\n      request,\n      true,\n      true\n    );\n    return new ApiKeyResponse(r);\n  }\n\n  async getTaxInfo(id: string): Promise<TaxInfoResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id + \"/tax\", null, true, true);\n    return new TaxInfoResponse(r);\n  }\n\n  async updateTaxInfo(id: string, request: OrganizationTaxInfoUpdateRequest): Promise<void> {\n    // Can't broadcast anything because the response doesn't have content\n    return this.apiService.send(\"PUT\", \"/organizations/\" + id + \"/tax\", request, true, false);\n  }\n\n  async getKeys(id: string): Promise<OrganizationKeysResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id + \"/keys\", null, true, true);\n    return new OrganizationKeysResponse(r);\n  }\n\n  async updateKeys(\n    id: string,\n    request: OrganizationKeysRequest\n  ): Promise<OrganizationKeysResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/keys\",\n      request,\n      true,\n      true\n    );\n    // Not broadcasting anything because data on this response doesn't correspond to `Organization`\n    return new OrganizationKeysResponse(r);\n  }\n\n  async getSso(id: string): Promise<OrganizationSsoResponse> {\n    const r = await this.apiService.send(\"GET\", \"/organizations/\" + id + \"/sso\", null, true, true);\n    return new OrganizationSsoResponse(r);\n  }\n\n  async updateSso(id: string, request: OrganizationSsoRequest): Promise<OrganizationSsoResponse> {\n    const r = await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/sso\",\n      request,\n      true,\n      true\n    );\n    // Not broadcasting anything because data on this response doesn't correspond to `Organization`\n    return new OrganizationSsoResponse(r);\n  }\n\n  async selfHostedSyncLicense(id: string) {\n    await this.apiService.send(\n      \"POST\",\n      \"/organizations/licenses/self-hosted/\" + id + \"/sync/\",\n      null,\n      true,\n      false\n    );\n  }\n\n  async updateEnrollSecretsManager(id: string, request: OrganizationEnrollSecretsManagerRequest) {\n    await this.apiService.send(\n      \"POST\",\n      \"/organizations/\" + id + \"/enroll-secrets-manager\",\n      request,\n      true,\n      true\n    );\n  }\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { ConfigApiServiceAbstraction as ConfigApiServiceAbstraction } from \"../../abstractions/config/config-api.service.abstraction\";\nimport { ServerConfigResponse } from \"../../models/response/server-config.response\";\n\nexport class ConfigApiService implements ConfigApiServiceAbstraction {\n  constructor(private apiService: ApiService) {}\n\n  async get(): Promise<ServerConfigResponse> {\n    const r = await this.apiService.send(\"GET\", \"/config\", null, true, true);\n    return new ServerConfigResponse(r);\n  }\n}\n","import { I18nService } from \"../abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\nimport { ValidationService as ValidationServiceAbstraction } from \"../abstractions/validation.service\";\nimport { ErrorResponse } from \"../models/response/error.response\";\n\nexport class ValidationService implements ValidationServiceAbstraction {\n  constructor(\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService\n  ) {}\n\n  showError(data: any): string[] {\n    const defaultErrorMessage = this.i18nService.t(\"unexpectedError\");\n    let errors: string[] = [];\n\n    if (data != null && typeof data === \"string\") {\n      errors.push(data);\n    } else if (data == null || typeof data !== \"object\") {\n      errors.push(defaultErrorMessage);\n    } else if (data.validationErrors != null) {\n      errors = errors.concat((data as ErrorResponse).getAllMessages());\n    } else {\n      errors.push(data.message ? data.message : defaultErrorMessage);\n    }\n\n    if (errors.length === 1) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errors[0]);\n    } else if (errors.length > 1) {\n      this.platformUtilsService.showToast(\"error\", this.i18nService.t(\"errorOccurred\"), errors, {\n        timeout: 5000 * errors.length,\n      });\n    }\n\n    return errors;\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { I18nService } from \"../../abstractions/i18n.service\";\nimport { OrgDomainInternalServiceAbstraction } from \"../../abstractions/organization-domain/org-domain.service.abstraction\";\nimport { OrganizationDomainResponse } from \"../../abstractions/organization-domain/responses/organization-domain.response\";\nimport { PlatformUtilsService } from \"../../abstractions/platformUtils.service\";\n\nexport class OrgDomainService implements OrgDomainInternalServiceAbstraction {\n  protected _orgDomains$: BehaviorSubject<OrganizationDomainResponse[]> = new BehaviorSubject([]);\n\n  orgDomains$ = this._orgDomains$.asObservable();\n\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService\n  ) {}\n\n  get(orgDomainId: string): OrganizationDomainResponse {\n    const orgDomains: OrganizationDomainResponse[] = this._orgDomains$.getValue();\n\n    return orgDomains.find((orgDomain) => orgDomain.id === orgDomainId);\n  }\n\n  copyDnsTxt(dnsTxt: string): void {\n    this.platformUtilsService.copyToClipboard(dnsTxt);\n    this.platformUtilsService.showToast(\n      \"success\",\n      null,\n      this.i18nService.t(\"valueCopied\", this.i18nService.t(\"dnsTxtRecord\"))\n    );\n  }\n\n  upsert(orgDomains: OrganizationDomainResponse[]): void {\n    const existingOrgDomains: OrganizationDomainResponse[] = this._orgDomains$.getValue();\n\n    orgDomains.forEach((orgDomain: OrganizationDomainResponse) => {\n      // Determine if passed in orgDomain exists in existing array:\n      const index = existingOrgDomains.findIndex(\n        (existingOrgDomain) => existingOrgDomain.id === orgDomain.id\n      );\n      if (index !== -1) {\n        existingOrgDomains[index] = orgDomain;\n      } else {\n        existingOrgDomains.push(orgDomain);\n      }\n    });\n\n    this._orgDomains$.next(existingOrgDomains);\n  }\n\n  replace(orgDomains: OrganizationDomainResponse[]): void {\n    this._orgDomains$.next(orgDomains);\n  }\n\n  clearCache(): void {\n    this._orgDomains$.next([]);\n  }\n\n  delete(orgDomainIds: string[]): void {\n    const existingOrgDomains: OrganizationDomainResponse[] = this._orgDomains$.getValue();\n\n    orgDomainIds.forEach((orgDomainId: string) => {\n      const index = existingOrgDomains.findIndex(\n        (existingOrgDomain) => existingOrgDomain.id === orgDomainId\n      );\n      if (index !== -1) {\n        existingOrgDomains.splice(index, 1);\n      }\n    });\n\n    this._orgDomains$.next(existingOrgDomains);\n  }\n}\n","import { OrganizationDomainRequest } from \"../../services/organization-domain/requests/organization-domain.request\";\n\nimport { OrganizationDomainSsoDetailsResponse } from \"./responses/organization-domain-sso-details.response\";\nimport { OrganizationDomainResponse } from \"./responses/organization-domain.response\";\n\nexport abstract class OrgDomainApiServiceAbstraction {\n  getAllByOrgId: (orgId: string) => Promise<Array<OrganizationDomainResponse>>;\n  getByOrgIdAndOrgDomainId: (\n    orgId: string,\n    orgDomainId: string\n  ) => Promise<OrganizationDomainResponse>;\n  post: (\n    orgId: string,\n    orgDomain: OrganizationDomainRequest\n  ) => Promise<OrganizationDomainResponse>;\n  verify: (orgId: string, orgDomainId: string) => Promise<OrganizationDomainResponse>;\n  delete: (orgId: string, orgDomainId: string) => Promise<any>;\n  getClaimedOrgDomainByEmail: (email: string) => Promise<OrganizationDomainSsoDetailsResponse>;\n}\n","import { ApiService } from \"../../abstractions/api.service\";\nimport { OrgDomainApiServiceAbstraction } from \"../../abstractions/organization-domain/org-domain-api.service.abstraction\";\nimport { OrgDomainInternalServiceAbstraction } from \"../../abstractions/organization-domain/org-domain.service.abstraction\";\nimport { OrganizationDomainSsoDetailsResponse } from \"../../abstractions/organization-domain/responses/organization-domain-sso-details.response\";\nimport { OrganizationDomainResponse } from \"../../abstractions/organization-domain/responses/organization-domain.response\";\nimport { ListResponse } from \"../../models/response/list.response\";\n\nimport { OrganizationDomainSsoDetailsRequest } from \"./requests/organization-domain-sso-details.request\";\nimport { OrganizationDomainRequest } from \"./requests/organization-domain.request\";\n\nexport class OrgDomainApiService implements OrgDomainApiServiceAbstraction {\n  constructor(\n    private orgDomainService: OrgDomainInternalServiceAbstraction,\n    private apiService: ApiService\n  ) {}\n\n  async getAllByOrgId(orgId: string): Promise<Array<OrganizationDomainResponse>> {\n    const listResponse: ListResponse<any> = await this.apiService.send(\n      \"GET\",\n      `/organizations/${orgId}/domain`,\n      null,\n      true,\n      true\n    );\n\n    const orgDomains = listResponse.data.map(\n      (resultOrgDomain: any) => new OrganizationDomainResponse(resultOrgDomain)\n    );\n\n    this.orgDomainService.replace(orgDomains);\n\n    return orgDomains;\n  }\n\n  async getByOrgIdAndOrgDomainId(\n    orgId: string,\n    orgDomainId: string\n  ): Promise<OrganizationDomainResponse> {\n    const result = await this.apiService.send(\n      \"GET\",\n      `/organizations/${orgId}/domain/${orgDomainId}`,\n      null,\n      true,\n      true\n    );\n\n    const response = new OrganizationDomainResponse(result);\n\n    this.orgDomainService.upsert([response]);\n\n    return response;\n  }\n\n  async post(\n    orgId: string,\n    orgDomainReq: OrganizationDomainRequest\n  ): Promise<OrganizationDomainResponse> {\n    const result = await this.apiService.send(\n      \"POST\",\n      `/organizations/${orgId}/domain`,\n      orgDomainReq,\n      true,\n      true\n    );\n\n    const response = new OrganizationDomainResponse(result);\n\n    this.orgDomainService.upsert([response]);\n\n    return response;\n  }\n\n  async verify(orgId: string, orgDomainId: string): Promise<OrganizationDomainResponse> {\n    const result = await this.apiService.send(\n      \"POST\",\n      `/organizations/${orgId}/domain/${orgDomainId}/verify`,\n      null,\n      true,\n      true\n    );\n\n    const response = new OrganizationDomainResponse(result);\n\n    this.orgDomainService.upsert([response]);\n\n    return response;\n  }\n\n  async delete(orgId: string, orgDomainId: string): Promise<any> {\n    await this.apiService.send(\n      \"DELETE\",\n      `/organizations/${orgId}/domain/${orgDomainId}`,\n      null,\n      true,\n      false\n    );\n    this.orgDomainService.delete([orgDomainId]);\n  }\n\n  async getClaimedOrgDomainByEmail(email: string): Promise<OrganizationDomainSsoDetailsResponse> {\n    const result = await this.apiService.send(\n      \"POST\",\n      `/organizations/domain/sso/details`,\n      new OrganizationDomainSsoDetailsRequest(email),\n      false, // anonymous\n      true\n    );\n    const response = new OrganizationDomainSsoDetailsResponse(result);\n\n    return response;\n  }\n}\n","import { CryptoService } from \"../abstractions/crypto.service\";\nimport { EncryptService } from \"../abstractions/encrypt.service\";\n\nexport class ContainerService {\n  constructor(private cryptoService: CryptoService, private encryptService: EncryptService) {}\n\n  attachToGlobal(global: any) {\n    if (!global.bitwardenContainerService) {\n      global.bitwardenContainerService = this;\n    }\n  }\n\n  /**\n   * @throws Will throw if CryptoService was not instantiated and provided to the ContainerService constructor\n   */\n  getCryptoService(): CryptoService {\n    if (this.cryptoService == null) {\n      throw new Error(\"ContainerService.cryptoService not initialized.\");\n    }\n    return this.cryptoService;\n  }\n\n  /**\n   * @throws Will throw if EncryptService was not instantiated and provided to the ContainerService constructor\n   */\n  getEncryptService(): EncryptService {\n    if (this.encryptService == null) {\n      throw new Error(\"ContainerService.encryptService not initialized.\");\n    }\n    return this.encryptService;\n  }\n}\n","export type InitializeOptions = \"array\" | \"record\" | \"object\";\n\nexport class SyncedItemMetadata {\n  propertyKey: string;\n  sessionKey: string;\n  initializer: (keyValuePair: any) => any;\n  initializeAs: InitializeOptions;\n\n  static builder(metadata: SyncedItemMetadata): (o: any) => any {\n    const itemBuilder = metadata.initializer;\n    if (metadata.initializeAs === \"array\") {\n      return (keyValuePair: any) => keyValuePair.map((o: any) => itemBuilder(o));\n    } else if (metadata.initializeAs === \"record\") {\n      return (keyValuePair: any) => {\n        const record: Record<any, any> = {};\n        for (const key in keyValuePair) {\n          record[key] = itemBuilder(keyValuePair[key]);\n        }\n        return record;\n      };\n    } else {\n      return (keyValuePair: any) => itemBuilder(keyValuePair);\n    }\n  }\n}\n","import { BehaviorSubject, concatMap, ReplaySubject, skip, Subject, Subscription } from \"rxjs\";\n\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/abstractions/storage.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\n\nimport { SyncedItemMetadata } from \"./sync-item-metadata\";\n\nexport class SessionSyncer {\n  subscription: Subscription;\n  id = Utils.newGuid();\n\n  // ignore initial values\n  private ignoreNUpdates = 0;\n\n  constructor(\n    private subject: Subject<any>,\n    private memoryStorageService: AbstractMemoryStorageService,\n    private metaData: SyncedItemMetadata\n  ) {\n    if (!(subject instanceof Subject)) {\n      throw new Error(\"subject must inherit from Subject\");\n    }\n\n    if (metaData.initializer == null) {\n      throw new Error(\"initializer must be provided\");\n    }\n  }\n\n  async init() {\n    switch (this.subject.constructor) {\n      case ReplaySubject:\n        // ignore all updates currently in the buffer\n        this.ignoreNUpdates = (this.subject as any)._buffer.length;\n        break;\n      case BehaviorSubject:\n        this.ignoreNUpdates = 1;\n        break;\n      default:\n        break;\n    }\n\n    await this.observe();\n    // must be synchronous\n    const hasInSessionMemory = await this.memoryStorageService.has(this.metaData.sessionKey);\n    if (hasInSessionMemory) {\n      await this.updateFromMemory();\n    }\n\n    this.listenForUpdates();\n  }\n\n  private async observe() {\n    const stream = this.subject.pipe(skip(this.ignoreNUpdates));\n    this.ignoreNUpdates = 0;\n\n    // This may be a memory leak.\n    // There is no good time to unsubscribe from this observable. Hopefully Manifest V3 clears memory from temporary\n    // contexts. If so, this is handled by destruction of the context.\n    this.subscription = stream\n      .pipe(\n        concatMap(async (next) => {\n          if (this.ignoreNUpdates > 0) {\n            this.ignoreNUpdates -= 1;\n            return;\n          }\n          await this.updateSession(next);\n        })\n      )\n      .subscribe();\n  }\n\n  private listenForUpdates() {\n    // This is an unawaited promise, but it will be executed asynchronously in the background.\n    BrowserApi.messageListener(\n      this.updateMessageCommand,\n      async (message) => await this.updateFromMessage(message)\n    );\n  }\n\n  async updateFromMessage(message: any) {\n    if (message.command != this.updateMessageCommand || message.id === this.id) {\n      return;\n    }\n    await this.update(message.serializedValue);\n  }\n\n  async updateFromMemory() {\n    const value = await this.memoryStorageService.getBypassCache(this.metaData.sessionKey);\n    await this.update(value);\n  }\n\n  async update(serializedValue: any) {\n    const unBuiltValue = JSON.parse(serializedValue);\n    if (BrowserApi.manifestVersion !== 3 && BrowserApi.isBackgroundPage(self)) {\n      await this.memoryStorageService.save(this.metaData.sessionKey, serializedValue);\n    }\n    const builder = SyncedItemMetadata.builder(this.metaData);\n    const value = builder(unBuiltValue);\n    this.ignoreNUpdates = 1;\n    this.subject.next(value);\n  }\n\n  private async updateSession(value: any) {\n    const serializedValue = JSON.stringify(value);\n    if (BrowserApi.manifestVersion === 3 || BrowserApi.isBackgroundPage(self)) {\n      await this.memoryStorageService.save(this.metaData.sessionKey, serializedValue);\n    }\n    await BrowserApi.sendMessage(this.updateMessageCommand, { id: this.id, serializedValue });\n  }\n\n  private get updateMessageCommand() {\n    return `${this.metaData.sessionKey}_update`;\n  }\n}\n","import { Constructor } from \"type-fest\";\n\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/abstractions/storage.service\";\n\nimport { SessionStorable } from \"./session-storable\";\nimport { SessionSyncer } from \"./session-syncer\";\nimport { SyncedItemMetadata } from \"./sync-item-metadata\";\n\n/**\n * Mark the class as syncing state across the browser session. This decorator finds rxjs BehaviorSubject properties\n * marked with @sessionSync and syncs these values across the browser session.\n *\n * @param constructor\n * @returns A new constructor that extends the original one to add session syncing.\n */\nexport function browserSession<TCtor extends Constructor<any>>(constructor: TCtor) {\n  return class extends constructor implements SessionStorable {\n    __syncedItemMetadata: SyncedItemMetadata[];\n    __sessionSyncers: SessionSyncer[];\n\n    constructor(...args: any[]) {\n      super(...args);\n\n      // Require state service to be injected\n      const storageService: AbstractMemoryStorageService = this.findStorageService(\n        [this as any].concat(args)\n      );\n\n      if (this.__syncedItemMetadata == null || !(this.__syncedItemMetadata instanceof Array)) {\n        return;\n      }\n\n      this.__sessionSyncers = this.__syncedItemMetadata.map((metadata) =>\n        this.buildSyncer(metadata, storageService)\n      );\n    }\n\n    buildSyncer(metadata: SyncedItemMetadata, storageSerice: AbstractMemoryStorageService) {\n      const syncer = new SessionSyncer(\n        (this as any)[metadata.propertyKey],\n        storageSerice,\n        metadata\n      );\n      syncer.init();\n      return syncer;\n    }\n\n    findStorageService(args: any[]): AbstractMemoryStorageService {\n      const storageService = args.find(this.isMemoryStorageService);\n\n      if (storageService) {\n        return storageService;\n      }\n\n      const stateService = args.find(\n        (arg) =>\n          arg?.memoryStorageService != null && this.isMemoryStorageService(arg.memoryStorageService)\n      );\n      if (stateService) {\n        return stateService.memoryStorageService;\n      }\n\n      throw new Error(\n        `Cannot decorate ${constructor.name} with browserSession, Browser's AbstractMemoryStorageService must be accessible through the observed classes parameters`\n      );\n    }\n\n    isMemoryStorageService(arg: any): arg is AbstractMemoryStorageService {\n      return arg.type != null && arg.type === AbstractMemoryStorageService.TYPE;\n    }\n  };\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { SessionStorable } from \"./session-storable\";\nimport { InitializeOptions } from \"./sync-item-metadata\";\n\nclass BuildOptions<T, TJson = Jsonify<T>> {\n  initializer?: (keyValuePair: TJson) => T;\n  initializeAs?: InitializeOptions;\n}\n\n// Used to ensure uniqueness for each synced observable\nlet index = 0;\n\n/**\n * A decorator used to indicate the BehaviorSubject should be synced for this browser session across all contexts.\n *\n * >**Note** This decorator does nothing if the enclosing class is not decorated with @browserSession.\n *\n * >**Note** The Behavior subject must be initialized with a default or in the constructor of the class. If it is not, an error will be thrown.\n *\n * >**!!Warning!!** If the property is overwritten at any time, the new value will not be synced across the browser session.\n *\n * @param buildOptions\n * Builders for the value, requires either a constructor (ctor) for your BehaviorSubject type or an\n * initializer function that takes a key value pair representation of the BehaviorSubject data\n * and returns your instantiated BehaviorSubject value. `initializeAs can optionally be used to indicate\n * the provided initializer function should be used to build an array of values. For example,\n * ```ts\n * \\@sessionSync({ initializer: Foo.fromJSON, initializeAs: 'array' })\n * ```\n * is equivalent to\n * ```\n * \\@sessionSync({ initializer: (obj: any[]) => obj.map((f) => Foo.fromJSON })\n * ```\n *\n * @returns decorator function\n */\nexport function sessionSync<T>(buildOptions: BuildOptions<T>) {\n  return (prototype: unknown, propertyKey: string) => {\n    // Force prototype into SessionStorable and implement it.\n    const p = prototype as SessionStorable;\n\n    if (p.__syncedItemMetadata == null) {\n      p.__syncedItemMetadata = [];\n    }\n\n    p.__syncedItemMetadata.push({\n      propertyKey,\n      sessionKey: `${propertyKey}_${index++}`,\n      initializer: buildOptions.initializer,\n      initializeAs: buildOptions.initializeAs ?? \"object\",\n    });\n  };\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/services/organization/organization.service\";\n\nimport { browserSession, sessionSync } from \"../../decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserOrganizationService extends OrganizationService {\n  @sessionSync({ initializer: Organization.fromJSON, initializeAs: \"array\" })\n  protected _organizations: BehaviorSubject<Organization[]>;\n}\n","import { BehaviorSubject, filter, map, Observable, switchMap, tap } from \"rxjs\";\nimport { Jsonify } from \"type-fest\";\n\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { Policy } from \"@bitwarden/common/admin-console/models/domain/policy\";\nimport { PolicyService } from \"@bitwarden/common/admin-console/services/policy/policy.service\";\n\nimport { browserSession, sessionSync } from \"../../decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserPolicyService extends PolicyService {\n  @sessionSync({\n    initializer: (obj: Jsonify<Policy>) => Object.assign(new Policy(), obj),\n    initializeAs: \"array\",\n  })\n  protected _policies: BehaviorSubject<Policy[]>;\n\n  constructor(stateService: StateService, organizationService: OrganizationService) {\n    super(stateService, organizationService);\n    this._policies.pipe(this.handleActivateAutofillPolicy.bind(this)).subscribe();\n  }\n\n  /**\n   * If the ActivateAutofill policy is enabled, save a flag indicating if we need to\n   * enable Autofill on page load.\n   */\n  private handleActivateAutofillPolicy(policies$: Observable<Policy[]>) {\n    return policies$.pipe(\n      map((policies) => policies.find((p) => p.type == PolicyType.ActivateAutofill && p.enabled)),\n      filter((p) => p != null),\n      switchMap(async (_) => [\n        await this.stateService.getActivateAutoFillOnPageLoadFromPolicy(),\n        await this.stateService.getEnableAutoFillOnPageLoad(),\n      ]),\n      tap(([activated, autofillEnabled]) => {\n        if (activated === undefined) {\n          this.stateService.setActivateAutoFillOnPageLoadFromPolicy(!autofillEnabled);\n        }\n      })\n    );\n  }\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { LockGuard as BaseLockGuardService } from \"@bitwarden/angular/auth/guards/lock.guard\";\n\n@Injectable()\nexport class LockGuardService extends BaseLockGuardService {\n  protected homepage = \"tabs/current\";\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { UnauthGuard as BaseUnauthGuardService } from \"@bitwarden/angular/auth/guards/unauth.guard\";\n\n@Injectable()\nexport class UnauthGuardService extends BaseUnauthGuardService {\n  protected homepage = \"tabs/current\";\n}\n","import { AbstractMemoryStorageService } from \"../abstractions/storage.service\";\n\nexport class MemoryStorageService extends AbstractMemoryStorageService {\n  private store = new Map<string, any>();\n\n  get<T>(key: string): Promise<T> {\n    if (this.store.has(key)) {\n      const obj = this.store.get(key);\n      return Promise.resolve(obj as T);\n    }\n    return Promise.resolve(null);\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  save(key: string, obj: any): Promise<any> {\n    if (obj == null) {\n      return this.remove(key);\n    }\n    this.store.set(key, obj);\n    return Promise.resolve();\n  }\n\n  remove(key: string): Promise<any> {\n    this.store.delete(key);\n    return Promise.resolve();\n  }\n\n  getBypassCache<T>(key: string): Promise<T> {\n    return this.get<T>(key);\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { MessagingService } from \"../abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"../abstractions/platformUtils.service\";\nimport { StateService } from \"../abstractions/state.service\";\nimport { SystemService as SystemServiceAbstraction } from \"../abstractions/system.service\";\nimport { AuthService } from \"../auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"../auth/enums/authentication-status\";\nimport { Utils } from \"../misc/utils\";\n\nexport class SystemService implements SystemServiceAbstraction {\n  private reloadInterval: any = null;\n  private clearClipboardTimeout: any = null;\n  private clearClipboardTimeoutFunction: () => Promise<any> = null;\n\n  constructor(\n    private messagingService: MessagingService,\n    private platformUtilsService: PlatformUtilsService,\n    private reloadCallback: () => Promise<void> = null,\n    private stateService: StateService\n  ) {}\n\n  async startProcessReload(authService: AuthService): Promise<void> {\n    const accounts = await firstValueFrom(this.stateService.accounts$);\n    if (accounts != null) {\n      const keys = Object.keys(accounts);\n      if (keys.length > 0) {\n        for (const userId of keys) {\n          if ((await authService.getAuthStatus(userId)) === AuthenticationStatus.Unlocked) {\n            return;\n          }\n        }\n      }\n    }\n\n    // A reloadInterval has already been set and is executing\n    if (this.reloadInterval != null) {\n      return;\n    }\n\n    // User has set a PIN, with ask for master password on restart, to protect their vault\n    const decryptedPinProtected = await this.stateService.getDecryptedPinProtected();\n    if (decryptedPinProtected != null) {\n      return;\n    }\n\n    this.cancelProcessReload();\n    await this.executeProcessReload();\n  }\n\n  private async executeProcessReload() {\n    const biometricLockedFingerprintValidated =\n      await this.stateService.getBiometricFingerprintValidated();\n    if (!biometricLockedFingerprintValidated) {\n      clearInterval(this.reloadInterval);\n      this.reloadInterval = null;\n      this.messagingService.send(\"reloadProcess\");\n      if (this.reloadCallback != null) {\n        await this.reloadCallback();\n      }\n      return;\n    }\n    if (this.reloadInterval == null) {\n      this.reloadInterval = setInterval(async () => await this.executeProcessReload(), 1000);\n    }\n  }\n\n  cancelProcessReload(): void {\n    if (this.reloadInterval != null) {\n      clearInterval(this.reloadInterval);\n      this.reloadInterval = null;\n    }\n  }\n\n  async clearClipboard(clipboardValue: string, timeoutMs: number = null): Promise<void> {\n    if (this.clearClipboardTimeout != null) {\n      clearTimeout(this.clearClipboardTimeout);\n      this.clearClipboardTimeout = null;\n    }\n    if (Utils.isNullOrWhitespace(clipboardValue)) {\n      return;\n    }\n    await this.stateService.getClearClipboard().then((clearSeconds) => {\n      if (clearSeconds == null) {\n        return;\n      }\n      if (timeoutMs == null) {\n        timeoutMs = clearSeconds * 1000;\n      }\n      this.clearClipboardTimeoutFunction = async () => {\n        const clipboardValueNow = await this.platformUtilsService.readFromClipboard();\n        if (clipboardValue === clipboardValueNow) {\n          this.platformUtilsService.copyToClipboard(\"\", { clearing: true });\n        }\n      };\n      this.clearClipboardTimeout = setTimeout(async () => {\n        await this.clearPendingClipboard();\n      }, timeoutMs);\n    });\n  }\n\n  async clearPendingClipboard() {\n    if (this.clearClipboardTimeoutFunction != null) {\n      await this.clearClipboardTimeoutFunction();\n      this.clearClipboardTimeoutFunction = null;\n    }\n  }\n}\n","export enum NotificationQueueMessageType {\n  AddLogin = 0,\n  ChangePassword = 1,\n}\n","import LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { ContextMenuClickedHandler } from \"../browser/context-menu-clicked-handler\";\n\nexport default class ContextMenusBackground {\n  private contextMenus: typeof chrome.contextMenus;\n\n  constructor(private contextMenuClickedHandler: ContextMenuClickedHandler) {\n    this.contextMenus = chrome.contextMenus;\n  }\n\n  init() {\n    if (!this.contextMenus) {\n      return;\n    }\n\n    this.contextMenus.onClicked.addListener((info, tab) =>\n      this.contextMenuClickedHandler.run(info, tab)\n    );\n\n    BrowserApi.messageListener(\n      \"contextmenus.background\",\n      async (\n        msg: { command: string; data: LockedVaultPendingNotificationsItem },\n        sender: chrome.runtime.MessageSender,\n        sendResponse: any\n      ) => {\n        if (msg.command === \"unlockCompleted\" && msg.data.target === \"contextmenus.background\") {\n          await this.contextMenuClickedHandler.cipherAction(\n            msg.data.commandToRetry.msg.data,\n            msg.data.commandToRetry.sender.tab\n          );\n        }\n      }\n    );\n  }\n}\n","import { NotificationQueueMessageType } from \"./notificationQueueMessageType\";\n\nexport default class NotificationQueueMessage {\n  type: NotificationQueueMessageType;\n  domain: string;\n  tabId: number;\n  expires: Date;\n  wasVaultLocked: boolean;\n}\n","import { Utils } from \"@bitwarden/common/misc/utils\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { LoginUriView } from \"@bitwarden/common/vault/models/view/login-uri.view\";\nimport { LoginView } from \"@bitwarden/common/vault/models/view/login.view\";\n\nimport NotificationQueueMessage from \"./notificationQueueMessage\";\nimport { NotificationQueueMessageType } from \"./notificationQueueMessageType\";\n\nexport default class AddLoginQueueMessage extends NotificationQueueMessage {\n  type: NotificationQueueMessageType.AddLogin;\n  username: string;\n  password: string;\n  uri: string;\n\n  static toCipherView(message: AddLoginQueueMessage, folderId?: string): CipherView {\n    const uriView = new LoginUriView();\n    uriView.uri = message.uri;\n\n    const loginView = new LoginView();\n    loginView.uris = [uriView];\n    loginView.username = message.username;\n    loginView.password = message.password;\n\n    const cipherView = new CipherView();\n    cipherView.name = (Utils.getHostname(message.uri) || message.domain).replace(/^www\\./, \"\");\n    cipherView.folderId = folderId;\n    cipherView.type = CipherType.Login;\n    cipherView.login = loginView;\n\n    return cipherView;\n  }\n}\n","import { firstValueFrom } from \"rxjs\";\n\nimport { PolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { PolicyType } from \"@bitwarden/common/admin-console/enums\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { ThemeType } from \"@bitwarden/common/enums\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { FolderService } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport AddChangePasswordQueueMessage from \"../../background/models/addChangePasswordQueueMessage\";\nimport AddLoginQueueMessage from \"../../background/models/addLoginQueueMessage\";\nimport AddLoginRuntimeMessage from \"../../background/models/addLoginRuntimeMessage\";\nimport ChangePasswordRuntimeMessage from \"../../background/models/changePasswordRuntimeMessage\";\nimport LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport { NotificationQueueMessageType } from \"../../background/models/notificationQueueMessageType\";\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { BrowserStateService } from \"../../services/abstractions/browser-state.service\";\nimport { AutofillService } from \"../services/abstractions/autofill.service\";\n\nexport default class NotificationBackground {\n  private notificationQueue: (AddLoginQueueMessage | AddChangePasswordQueueMessage)[] = [];\n\n  constructor(\n    private autofillService: AutofillService,\n    private cipherService: CipherService,\n    private authService: AuthService,\n    private policyService: PolicyService,\n    private folderService: FolderService,\n    private stateService: BrowserStateService\n  ) {}\n\n  async init() {\n    if (chrome.runtime == null) {\n      return;\n    }\n\n    BrowserApi.messageListener(\n      \"notification.background\",\n      async (msg: any, sender: chrome.runtime.MessageSender) => {\n        await this.processMessage(msg, sender);\n      }\n    );\n\n    this.cleanupNotificationQueue();\n  }\n\n  async processMessage(msg: any, sender: chrome.runtime.MessageSender) {\n    switch (msg.command) {\n      case \"unlockCompleted\":\n        if (msg.data.target !== \"notification.background\") {\n          return;\n        }\n        await this.processMessage(msg.data.commandToRetry.msg, msg.data.commandToRetry.sender);\n        break;\n      case \"bgGetDataForTab\":\n        await this.getDataForTab(sender.tab, msg.responseCommand);\n        break;\n      case \"bgCloseNotificationBar\":\n        await BrowserApi.tabSendMessageData(sender.tab, \"closeNotificationBar\");\n        break;\n      case \"bgAdjustNotificationBar\":\n        await BrowserApi.tabSendMessageData(sender.tab, \"adjustNotificationBar\", msg.data);\n        break;\n      case \"bgAddLogin\":\n        await this.addLogin(msg.login, sender.tab);\n        break;\n      case \"bgChangedPassword\":\n        await this.changedPassword(msg.data, sender.tab);\n        break;\n      case \"bgAddClose\":\n      case \"bgChangeClose\":\n        this.removeTabFromNotificationQueue(sender.tab);\n        break;\n      case \"bgAddSave\":\n      case \"bgChangeSave\":\n        if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n          const retryMessage: LockedVaultPendingNotificationsItem = {\n            commandToRetry: {\n              msg: msg,\n              sender: sender,\n            },\n            target: \"notification.background\",\n          };\n          await BrowserApi.tabSendMessageData(\n            sender.tab,\n            \"addToLockedVaultPendingNotifications\",\n            retryMessage\n          );\n          await BrowserApi.tabSendMessageData(sender.tab, \"promptForLogin\");\n          return;\n        }\n        await this.saveOrUpdateCredentials(sender.tab, msg.edit, msg.folder);\n        break;\n      case \"bgNeverSave\":\n        await this.saveNever(sender.tab);\n        break;\n      case \"collectPageDetailsResponse\":\n        switch (msg.sender) {\n          case \"notificationBar\": {\n            const forms = this.autofillService.getFormsWithPasswordFields(msg.details);\n            await BrowserApi.tabSendMessageData(msg.tab, \"notificationBarPageDetails\", {\n              details: msg.details,\n              forms: forms,\n            });\n            break;\n          }\n          default:\n            break;\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  async checkNotificationQueue(tab: chrome.tabs.Tab = null): Promise<void> {\n    if (this.notificationQueue.length === 0) {\n      return;\n    }\n\n    if (tab != null) {\n      await this.doNotificationQueueCheck(tab);\n      return;\n    }\n\n    const currentTab = await BrowserApi.getTabFromCurrentWindow();\n    if (currentTab != null) {\n      await this.doNotificationQueueCheck(currentTab);\n    }\n  }\n\n  private cleanupNotificationQueue() {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      if (this.notificationQueue[i].expires < new Date()) {\n        this.notificationQueue.splice(i, 1);\n      }\n    }\n    setTimeout(() => this.cleanupNotificationQueue(), 2 * 60 * 1000); // check every 2 minutes\n  }\n\n  private async doNotificationQueueCheck(tab: chrome.tabs.Tab): Promise<void> {\n    if (tab == null) {\n      return;\n    }\n\n    const tabDomain = Utils.getDomain(tab.url);\n    if (tabDomain == null) {\n      return;\n    }\n\n    for (let i = 0; i < this.notificationQueue.length; i++) {\n      if (\n        this.notificationQueue[i].tabId !== tab.id ||\n        this.notificationQueue[i].domain !== tabDomain\n      ) {\n        continue;\n      }\n\n      if (this.notificationQueue[i].type === NotificationQueueMessageType.AddLogin) {\n        BrowserApi.tabSendMessageData(tab, \"openNotificationBar\", {\n          type: \"add\",\n          typeData: {\n            isVaultLocked: this.notificationQueue[i].wasVaultLocked,\n            theme: await this.getCurrentTheme(),\n            removeIndividualVault: await this.removeIndividualVault(),\n          },\n        });\n      } else if (this.notificationQueue[i].type === NotificationQueueMessageType.ChangePassword) {\n        BrowserApi.tabSendMessageData(tab, \"openNotificationBar\", {\n          type: \"change\",\n          typeData: {\n            isVaultLocked: this.notificationQueue[i].wasVaultLocked,\n            theme: await this.getCurrentTheme(),\n          },\n        });\n      }\n      break;\n    }\n  }\n\n  private async getCurrentTheme() {\n    const theme = await this.stateService.getTheme();\n\n    if (theme !== ThemeType.System) {\n      return theme;\n    }\n\n    return window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n      ? ThemeType.Dark\n      : ThemeType.Light;\n  }\n\n  private removeTabFromNotificationQueue(tab: chrome.tabs.Tab) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      if (this.notificationQueue[i].tabId === tab.id) {\n        this.notificationQueue.splice(i, 1);\n      }\n    }\n  }\n\n  private async addLogin(loginInfo: AddLoginRuntimeMessage, tab: chrome.tabs.Tab) {\n    const authStatus = await this.authService.getAuthStatus();\n    if (authStatus === AuthenticationStatus.LoggedOut) {\n      return;\n    }\n\n    const loginDomain = Utils.getDomain(loginInfo.url);\n    if (loginDomain == null) {\n      return;\n    }\n\n    let normalizedUsername = loginInfo.username;\n    if (normalizedUsername != null) {\n      normalizedUsername = normalizedUsername.toLowerCase();\n    }\n\n    const disabledAddLogin = await this.stateService.getDisableAddLoginNotification();\n    if (authStatus === AuthenticationStatus.Locked) {\n      if (disabledAddLogin) {\n        return;\n      }\n\n      this.pushAddLoginToQueue(loginDomain, loginInfo, tab, true);\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(loginInfo.url);\n    const usernameMatches = ciphers.filter(\n      (c) => c.login.username != null && c.login.username.toLowerCase() === normalizedUsername\n    );\n    if (usernameMatches.length === 0) {\n      if (disabledAddLogin) {\n        return;\n      }\n\n      this.pushAddLoginToQueue(loginDomain, loginInfo, tab);\n    } else if (\n      usernameMatches.length === 1 &&\n      usernameMatches[0].login.password !== loginInfo.password\n    ) {\n      const disabledChangePassword =\n        await this.stateService.getDisableChangedPasswordNotification();\n      if (disabledChangePassword) {\n        return;\n      }\n      this.pushChangePasswordToQueue(usernameMatches[0].id, loginDomain, loginInfo.password, tab);\n    }\n  }\n\n  private async pushAddLoginToQueue(\n    loginDomain: string,\n    loginInfo: AddLoginRuntimeMessage,\n    tab: chrome.tabs.Tab,\n    isVaultLocked = false\n  ) {\n    // remove any old messages for this tab\n    this.removeTabFromNotificationQueue(tab);\n    const message: AddLoginQueueMessage = {\n      type: NotificationQueueMessageType.AddLogin,\n      username: loginInfo.username,\n      password: loginInfo.password,\n      domain: loginDomain,\n      uri: loginInfo.url,\n      tabId: tab.id,\n      expires: new Date(new Date().getTime() + 5 * 60000), // 5 minutes\n      wasVaultLocked: isVaultLocked,\n    };\n    this.notificationQueue.push(message);\n    await this.checkNotificationQueue(tab);\n  }\n\n  private async changedPassword(changeData: ChangePasswordRuntimeMessage, tab: chrome.tabs.Tab) {\n    const loginDomain = Utils.getDomain(changeData.url);\n    if (loginDomain == null) {\n      return;\n    }\n\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      this.pushChangePasswordToQueue(null, loginDomain, changeData.newPassword, tab, true);\n      return;\n    }\n\n    let id: string = null;\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(changeData.url);\n    if (changeData.currentPassword != null) {\n      const passwordMatches = ciphers.filter(\n        (c) => c.login.password === changeData.currentPassword\n      );\n      if (passwordMatches.length === 1) {\n        id = passwordMatches[0].id;\n      }\n    } else if (ciphers.length === 1) {\n      id = ciphers[0].id;\n    }\n    if (id != null) {\n      this.pushChangePasswordToQueue(id, loginDomain, changeData.newPassword, tab);\n    }\n  }\n\n  private async pushChangePasswordToQueue(\n    cipherId: string,\n    loginDomain: string,\n    newPassword: string,\n    tab: chrome.tabs.Tab,\n    isVaultLocked = false\n  ) {\n    // remove any old messages for this tab\n    this.removeTabFromNotificationQueue(tab);\n    const message: AddChangePasswordQueueMessage = {\n      type: NotificationQueueMessageType.ChangePassword,\n      cipherId: cipherId,\n      newPassword: newPassword,\n      domain: loginDomain,\n      tabId: tab.id,\n      expires: new Date(new Date().getTime() + 5 * 60000), // 5 minutes\n      wasVaultLocked: isVaultLocked,\n    };\n    this.notificationQueue.push(message);\n    await this.checkNotificationQueue(tab);\n  }\n\n  private async saveOrUpdateCredentials(tab: chrome.tabs.Tab, edit: boolean, folderId?: string) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      const queueMessage = this.notificationQueue[i];\n      if (queueMessage.tabId !== tab.id || !(queueMessage.type in NotificationQueueMessageType)) {\n        continue;\n      }\n\n      const tabDomain = Utils.getDomain(tab.url);\n      if (tabDomain != null && tabDomain !== queueMessage.domain) {\n        continue;\n      }\n\n      this.notificationQueue.splice(i, 1);\n      BrowserApi.tabSendMessageData(tab, \"closeNotificationBar\");\n\n      if (queueMessage.type === NotificationQueueMessageType.ChangePassword) {\n        const cipherView = await this.getDecryptedCipherById(queueMessage.cipherId);\n        await this.updatePassword(cipherView, queueMessage.newPassword, edit, tab);\n        return;\n      }\n\n      if (queueMessage.type === NotificationQueueMessageType.AddLogin) {\n        // If the vault was locked, check if a cipher needs updating instead of creating a new one\n        if (queueMessage.wasVaultLocked) {\n          const allCiphers = await this.cipherService.getAllDecryptedForUrl(queueMessage.uri);\n          const existingCipher = allCiphers.find(\n            (c) =>\n              c.login.username != null && c.login.username.toLowerCase() === queueMessage.username\n          );\n\n          if (existingCipher != null) {\n            await this.updatePassword(existingCipher, queueMessage.password, edit, tab);\n            return;\n          }\n        }\n\n        folderId = (await this.folderExists(folderId)) ? folderId : null;\n        const newCipher = AddLoginQueueMessage.toCipherView(queueMessage, folderId);\n\n        if (edit) {\n          await this.editItem(newCipher, tab);\n          return;\n        }\n\n        const cipher = await this.cipherService.encrypt(newCipher);\n        await this.cipherService.createWithServer(cipher);\n        BrowserApi.tabSendMessageData(tab, \"addedCipher\");\n      }\n    }\n  }\n\n  private async updatePassword(\n    cipherView: CipherView,\n    newPassword: string,\n    edit: boolean,\n    tab: chrome.tabs.Tab\n  ) {\n    cipherView.login.password = newPassword;\n\n    if (edit) {\n      await this.editItem(cipherView, tab);\n      BrowserApi.tabSendMessage(tab, \"editedCipher\");\n      return;\n    }\n\n    const cipher = await this.cipherService.encrypt(cipherView);\n    await this.cipherService.updateWithServer(cipher);\n    // We've only updated the password, no need to broadcast editedCipher message\n    return;\n  }\n\n  private async editItem(cipherView: CipherView, senderTab: chrome.tabs.Tab) {\n    await this.stateService.setAddEditCipherInfo({\n      cipher: cipherView,\n      collectionIds: cipherView.collectionIds,\n    });\n\n    await BrowserApi.tabSendMessageData(senderTab, \"openAddEditCipher\", {\n      cipherId: cipherView.id,\n    });\n  }\n\n  private async folderExists(folderId: string) {\n    if (Utils.isNullOrWhitespace(folderId) || folderId === \"null\") {\n      return false;\n    }\n\n    const folders = await firstValueFrom(this.folderService.folderViews$);\n    return folders.some((x) => x.id === folderId);\n  }\n\n  private async getDecryptedCipherById(cipherId: string) {\n    const cipher = await this.cipherService.get(cipherId);\n    if (cipher != null && cipher.type === CipherType.Login) {\n      return await cipher.decrypt();\n    }\n    return null;\n  }\n\n  private async saveNever(tab: chrome.tabs.Tab) {\n    for (let i = this.notificationQueue.length - 1; i >= 0; i--) {\n      const queueMessage = this.notificationQueue[i];\n      if (\n        queueMessage.tabId !== tab.id ||\n        queueMessage.type !== NotificationQueueMessageType.AddLogin\n      ) {\n        continue;\n      }\n\n      const tabDomain = Utils.getDomain(tab.url);\n      if (tabDomain != null && tabDomain !== queueMessage.domain) {\n        continue;\n      }\n\n      this.notificationQueue.splice(i, 1);\n      BrowserApi.tabSendMessageData(tab, \"closeNotificationBar\");\n\n      const hostname = Utils.getHostname(tab.url);\n      await this.cipherService.saveNeverDomain(hostname);\n    }\n  }\n\n  private async getDataForTab(tab: chrome.tabs.Tab, responseCommand: string) {\n    const responseData: any = {};\n    if (responseCommand === \"notificationBarGetFoldersList\") {\n      responseData.folders = await firstValueFrom(this.folderService.folderViews$);\n    }\n\n    await BrowserApi.tabSendMessageData(tab, responseCommand, responseData);\n  }\n\n  private async removeIndividualVault(): Promise<boolean> {\n    return await firstValueFrom(\n      this.policyService.policyAppliesToActiveUser$(PolicyType.PersonalOwnership)\n    );\n  }\n}\n","import MainBackground from \"../../background/main.background\";\n\nimport NotificationBackground from \"./notification.background\";\n\nexport default class TabsBackground {\n  constructor(\n    private main: MainBackground,\n    private notificationBackground: NotificationBackground\n  ) {}\n\n  private focusedWindowId: number;\n\n  async init() {\n    if (!chrome.tabs || !chrome.windows) {\n      return;\n    }\n\n    chrome.windows.onFocusChanged.addListener(async (windowId: number) => {\n      if (windowId === null || windowId < 0) {\n        return;\n      }\n\n      this.focusedWindowId = windowId;\n      this.main.messagingService.send(\"windowChanged\");\n    });\n\n    chrome.tabs.onActivated.addListener(async (activeInfo: chrome.tabs.TabActiveInfo) => {\n      await this.main.refreshBadge();\n      await this.main.refreshMenu();\n      this.main.messagingService.send(\"tabChanged\");\n    });\n\n    chrome.tabs.onReplaced.addListener(async (addedTabId: number, removedTabId: number) => {\n      if (this.main.onReplacedRan) {\n        return;\n      }\n      this.main.onReplacedRan = true;\n\n      await this.notificationBackground.checkNotificationQueue();\n      await this.main.refreshBadge();\n      await this.main.refreshMenu();\n      this.main.messagingService.send(\"tabChanged\");\n    });\n\n    chrome.tabs.onUpdated.addListener(\n      async (tabId: number, changeInfo: chrome.tabs.TabChangeInfo, tab: chrome.tabs.Tab) => {\n        if (this.focusedWindowId > 0 && tab.windowId != this.focusedWindowId) {\n          return;\n        }\n\n        if (!tab.active) {\n          return;\n        }\n\n        if (this.main.onUpdatedRan) {\n          return;\n        }\n        this.main.onUpdatedRan = true;\n\n        await this.notificationBackground.checkNotificationQueue(tab);\n        await this.main.refreshBadge();\n        await this.main.refreshMenu();\n        this.main.messagingService.send(\"tabChanged\");\n      }\n    );\n  }\n}\n","export type CachedServices = Record<string, unknown>;\n\nexport type FactoryOptions = {\n  alwaysInitializeNewService?: boolean;\n  doNotStoreInitializedService?: boolean;\n  [optionsKey: string]: unknown;\n};\n\nexport async function factory<\n  TCache extends CachedServices,\n  TName extends keyof TCache,\n  TOpts extends FactoryOptions\n>(\n  cachedServices: TCache,\n  name: TName,\n  opts: TOpts,\n  factory: () => TCache[TName] | Promise<TCache[TName]>\n): Promise<TCache[TName]> {\n  let instance = cachedServices[name];\n  if (opts.alwaysInitializeNewService || !instance) {\n    const instanceOrPromise = factory();\n    instance = instanceOrPromise instanceof Promise ? await instanceOrPromise : instanceOrPromise;\n  }\n\n  if (!opts.doNotStoreInitializedService) {\n    cachedServices[name] = instance;\n  }\n\n  return instance as TCache[TName];\n}\n","import { Jsonify } from \"type-fest\";\n\nimport {\n  Account as BaseAccount,\n  AccountSettings as BaseAccountSettings,\n} from \"@bitwarden/common/models/domain/account\";\n\nimport { BrowserComponentState } from \"./browserComponentState\";\nimport { BrowserGroupingsComponentState } from \"./browserGroupingsComponentState\";\nimport { BrowserSendComponentState } from \"./browserSendComponentState\";\n\nexport class AccountSettings extends BaseAccountSettings {\n  vaultTimeout = -1; // On Restart\n\n  static fromJSON(json: Jsonify<AccountSettings>): AccountSettings {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new AccountSettings(), json, super.fromJSON(json));\n  }\n}\n\nexport class Account extends BaseAccount {\n  settings?: AccountSettings = new AccountSettings();\n  groupings?: BrowserGroupingsComponentState;\n  send?: BrowserSendComponentState;\n  ciphers?: BrowserComponentState;\n  sendType?: BrowserComponentState;\n\n  constructor(init: Partial<Account>) {\n    super(init);\n    Object.assign(this.settings, {\n      ...new AccountSettings(),\n      ...this.settings,\n    });\n    this.groupings = init?.groupings ?? new BrowserGroupingsComponentState();\n    this.send = init?.send ?? new BrowserSendComponentState();\n    this.ciphers = init?.ciphers ?? new BrowserComponentState();\n    this.sendType = init?.sendType ?? new BrowserComponentState();\n  }\n\n  static fromJSON(json: Jsonify<Account>): Account {\n    if (json == null) {\n      return null;\n    }\n\n    return Object.assign(new Account({}), json, super.fromJSON(json), {\n      settings: AccountSettings.fromJSON(json.settings),\n      groupings: BrowserGroupingsComponentState.fromJSON(json.groupings),\n      send: BrowserSendComponentState.fromJSON(json.send),\n      ciphers: BrowserComponentState.fromJSON(json.ciphers),\n      sendType: BrowserComponentState.fromJSON(json.sendType),\n    });\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { StorageOptions } from \"@bitwarden/common/models/domain/storage-options\";\nimport { StateService as BaseStateService } from \"@bitwarden/common/services/state.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\nimport { Account } from \"../models/account\";\nimport { BrowserComponentState } from \"../models/browserComponentState\";\nimport { BrowserGroupingsComponentState } from \"../models/browserGroupingsComponentState\";\nimport { BrowserSendComponentState } from \"../models/browserSendComponentState\";\n\nimport { BrowserStateService as StateServiceAbstraction } from \"./abstractions/browser-state.service\";\n\n@browserSession\nexport class BrowserStateService\n  extends BaseStateService<GlobalState, Account>\n  implements StateServiceAbstraction\n{\n  @sessionSync({\n    initializer: Account.fromJSON as any, // TODO: Remove this any when all any types are removed from Account\n    initializeAs: \"record\",\n  })\n  protected accountsSubject: BehaviorSubject<{ [userId: string]: Account }>;\n  @sessionSync({ initializer: (s: string) => s })\n  protected activeAccountSubject: BehaviorSubject<string>;\n  @sessionSync({ initializer: (b: boolean) => b })\n  protected activeAccountUnlockedSubject: BehaviorSubject<boolean>;\n  @sessionSync({\n    initializer: Account.fromJSON as any, // TODO: Remove this any when all any types are removed from Account\n    initializeAs: \"record\",\n  })\n  protected accountDiskCache: BehaviorSubject<Record<string, Account>>;\n\n  protected accountDeserializer = Account.fromJSON;\n\n  async addAccount(account: Account) {\n    // Apply browser overrides to default account values\n    account = new Account(account);\n    await super.addAccount(account);\n  }\n\n  async getIsAuthenticated(options?: StorageOptions): Promise<boolean> {\n    // Firefox Private Mode can clash with non-Private Mode because they both read from the same onDiskOptions\n    // Check that there is an account in memory before considering the user authenticated\n    return (\n      (await super.getIsAuthenticated(options)) &&\n      (await this.getAccount(await this.defaultInMemoryOptions())) != null\n    );\n  }\n\n  async getBrowserGroupingComponentState(\n    options?: StorageOptions\n  ): Promise<BrowserGroupingsComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.groupings;\n  }\n\n  async setBrowserGroupingComponentState(\n    value: BrowserGroupingsComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.groupings = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserVaultItemsComponentState(\n    options?: StorageOptions\n  ): Promise<BrowserComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.ciphers;\n  }\n\n  async setBrowserVaultItemsComponentState(\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.ciphers = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserSendComponentState(options?: StorageOptions): Promise<BrowserSendComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.send;\n  }\n\n  async setBrowserSendComponentState(\n    value: BrowserSendComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.send = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n\n  async getBrowserSendTypeComponentState(options?: StorageOptions): Promise<BrowserComponentState> {\n    return (\n      await this.getAccount(this.reconcileOptions(options, await this.defaultInMemoryOptions()))\n    )?.sendType;\n  }\n\n  async setBrowserSendTypeComponentState(\n    value: BrowserComponentState,\n    options?: StorageOptions\n  ): Promise<void> {\n    const account = await this.getAccount(\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n    account.sendType = value;\n    await this.saveAccount(\n      account,\n      this.reconcileOptions(options, await this.defaultInMemoryOptions())\n    );\n  }\n}\n","import { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { LogLevelType } from \"@bitwarden/common/enums\";\nimport { ConsoleLogService } from \"@bitwarden/common/services/consoleLog.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\n\ntype LogServiceFactoryOptions = FactoryOptions & {\n  logServiceOptions: {\n    isDev: boolean;\n    filter?: (level: LogLevelType) => boolean;\n  };\n};\n\nexport type LogServiceInitOptions = LogServiceFactoryOptions;\n\nexport function logServiceFactory(\n  cache: { logService?: LogService } & CachedServices,\n  opts: LogServiceInitOptions\n): Promise<LogService> {\n  return factory(\n    cache,\n    \"logService\",\n    opts,\n    () => new ConsoleLogService(opts.logServiceOptions.isDev, opts.logServiceOptions.filter)\n  );\n}\n","import { AbstractStorageService } from \"@bitwarden/common/abstractions/storage.service\";\n\nexport default abstract class AbstractChromeStorageService implements AbstractStorageService {\n  protected abstract chromeStorageApi: chrome.storage.StorageArea;\n\n  async get<T>(key: string): Promise<T> {\n    return new Promise((resolve) => {\n      this.chromeStorageApi.get(key, (obj: any) => {\n        if (obj != null && obj[key] != null) {\n          resolve(obj[key] as T);\n          return;\n        }\n        resolve(null);\n      });\n    });\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  async save(key: string, obj: any): Promise<void> {\n    if (obj == null) {\n      // Fix safari not liking null in set\n      return new Promise<void>((resolve) => {\n        this.chromeStorageApi.remove(key, () => {\n          resolve();\n        });\n      });\n    }\n\n    if (obj instanceof Set) {\n      obj = Array.from(obj);\n    }\n\n    const keyedObj = { [key]: obj };\n    return new Promise<void>((resolve) => {\n      this.chromeStorageApi.set(keyedObj, () => {\n        resolve();\n      });\n    });\n  }\n\n  async remove(key: string): Promise<void> {\n    return new Promise<void>((resolve) => {\n      this.chromeStorageApi.remove(key, () => {\n        resolve();\n      });\n    });\n  }\n}\n","import AbstractChromeStorageService from \"./abstractChromeStorageApi.service\";\n\nexport default class BrowserLocalStorageService extends AbstractChromeStorageService {\n  protected chromeStorageApi = chrome.storage.local;\n}\n","import AbstractChromeStorageService from \"./abstractChromeStorageApi.service\";\n\nexport default class BrowserMemoryStorageService extends AbstractChromeStorageService {\n  protected chromeStorageApi = chrome.storage.session;\n}\n","import { Jsonify } from \"type-fest\";\n\nimport { EncryptService } from \"@bitwarden/common/abstractions/encrypt.service\";\nimport { AbstractMemoryStorageService } from \"@bitwarden/common/abstractions/storage.service\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { MemoryStorageOptions } from \"@bitwarden/common/models/domain/storage-options\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\n\nimport { devFlag } from \"../decorators/dev-flag.decorator\";\nimport { devFlagEnabled } from \"../flags\";\n\nimport { AbstractKeyGenerationService } from \"./abstractions/abstractKeyGeneration.service\";\nimport BrowserLocalStorageService from \"./browserLocalStorage.service\";\nimport BrowserMemoryStorageService from \"./browserMemoryStorage.service\";\n\nconst keys = {\n  encKey: \"localEncryptionKey\",\n  sessionKey: \"session\",\n};\n\nexport class LocalBackedSessionStorageService extends AbstractMemoryStorageService {\n  private cache = new Map<string, unknown>();\n  private localStorage = new BrowserLocalStorageService();\n  private sessionStorage = new BrowserMemoryStorageService();\n\n  constructor(\n    private encryptService: EncryptService,\n    private keyGenerationService: AbstractKeyGenerationService\n  ) {\n    super();\n  }\n\n  async get<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T> {\n    if (this.cache.has(key)) {\n      return this.cache.get(key) as T;\n    }\n\n    return await this.getBypassCache(key, options);\n  }\n\n  async getBypassCache<T>(key: string, options?: MemoryStorageOptions<T>): Promise<T> {\n    const session = await this.getLocalSession(await this.getSessionEncKey());\n    if (session == null || !Object.keys(session).includes(key)) {\n      return null;\n    }\n\n    let value = session[key];\n    if (options?.deserializer != null) {\n      value = options.deserializer(value as Jsonify<T>);\n    }\n\n    this.cache.set(key, value);\n    return this.cache.get(key) as T;\n  }\n\n  async has(key: string): Promise<boolean> {\n    return (await this.get(key)) != null;\n  }\n\n  async save<T>(key: string, obj: T): Promise<void> {\n    if (obj == null) {\n      this.cache.delete(key);\n    } else {\n      this.cache.set(key, obj);\n    }\n\n    const sessionEncKey = await this.getSessionEncKey();\n    const localSession = (await this.getLocalSession(sessionEncKey)) ?? {};\n    localSession[key] = obj;\n    await this.setLocalSession(localSession, sessionEncKey);\n  }\n\n  async remove(key: string): Promise<void> {\n    await this.save(key, null);\n  }\n\n  async getLocalSession(encKey: SymmetricCryptoKey): Promise<Record<string, unknown>> {\n    const local = await this.localStorage.get<string>(keys.sessionKey);\n\n    if (local == null) {\n      return null;\n    }\n\n    if (devFlagEnabled(\"storeSessionDecrypted\")) {\n      return local as any as Record<string, unknown>;\n    }\n\n    const sessionJson = await this.encryptService.decryptToUtf8(new EncString(local), encKey);\n    if (sessionJson == null) {\n      // Error with decryption -- session is lost, delete state and key and start over\n      await this.setSessionEncKey(null);\n      await this.localStorage.remove(keys.sessionKey);\n      return null;\n    }\n    return JSON.parse(sessionJson);\n  }\n\n  async setLocalSession(session: Record<string, unknown>, key: SymmetricCryptoKey) {\n    if (devFlagEnabled(\"storeSessionDecrypted\")) {\n      await this.setDecryptedLocalSession(session);\n    } else {\n      await this.setEncryptedLocalSession(session, key);\n    }\n  }\n\n  @devFlag(\"storeSessionDecrypted\")\n  async setDecryptedLocalSession(session: Record<string, unknown>): Promise<void> {\n    // Make sure we're storing the jsonified version of the session\n    const jsonSession = JSON.parse(JSON.stringify(session));\n    if (session == null) {\n      await this.localStorage.remove(keys.sessionKey);\n    } else {\n      await this.localStorage.save(keys.sessionKey, jsonSession);\n    }\n  }\n\n  async setEncryptedLocalSession(session: Record<string, unknown>, key: SymmetricCryptoKey) {\n    const jsonSession = JSON.stringify(session);\n    const encSession = await this.encryptService.encrypt(jsonSession, key);\n\n    if (encSession == null) {\n      return await this.localStorage.remove(keys.sessionKey);\n    }\n    await this.localStorage.save(keys.sessionKey, encSession.encryptedString);\n  }\n\n  async getSessionEncKey(): Promise<SymmetricCryptoKey> {\n    let storedKey = await this.sessionStorage.get<SymmetricCryptoKey>(keys.encKey);\n    if (storedKey == null || Object.keys(storedKey).length == 0) {\n      storedKey = await this.keyGenerationService.makeEphemeralKey();\n      await this.setSessionEncKey(storedKey);\n    }\n    return SymmetricCryptoKey.fromJSON(storedKey);\n  }\n\n  async setSessionEncKey(input: SymmetricCryptoKey): Promise<void> {\n    if (input == null) {\n      await this.sessionStorage.remove(keys.encKey);\n    } else {\n      await this.sessionStorage.save(keys.encKey, input);\n    }\n  }\n}\n","import { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { WebCryptoFunctionService } from \"@bitwarden/common/services/webCryptoFunction.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\n\ntype CryptoFunctionServiceFactoryOptions = FactoryOptions & {\n  cryptoFunctionServiceOptions: {\n    win: Window | typeof globalThis;\n  };\n};\n\nexport type CryptoFunctionServiceInitOptions = CryptoFunctionServiceFactoryOptions;\n\nexport function cryptoFunctionServiceFactory(\n  cache: { cryptoFunctionService?: CryptoFunctionService } & CachedServices,\n  opts: CryptoFunctionServiceFactoryOptions\n): Promise<CryptoFunctionService> {\n  return factory(\n    cache,\n    \"cryptoFunctionService\",\n    opts,\n    () => new WebCryptoFunctionService(opts.cryptoFunctionServiceOptions.win)\n  );\n}\n","import { devFlagEnabled, DevFlags } from \"../flags\";\n\nexport function devFlag(flag: keyof DevFlags) {\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n    descriptor.value = function (...args: any[]) {\n      if (!devFlagEnabled(flag)) {\n        throw new Error(\n          `This method should not be called, it is protected by a disabled dev flag.`\n        );\n      }\n      return originalMethod.apply(this, args);\n    };\n  };\n}\n","import { EncryptServiceImplementation } from \"@bitwarden/common/services/cryptography/encrypt.service.implementation\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { LogServiceInitOptions, logServiceFactory } from \"./log-service.factory\";\n\ntype EncryptServiceFactoryOptions = FactoryOptions & {\n  encryptServiceOptions: {\n    logMacFailures: boolean;\n  };\n};\n\nexport type EncryptServiceInitOptions = EncryptServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function encryptServiceFactory(\n  cache: { encryptService?: EncryptServiceImplementation } & CachedServices,\n  opts: EncryptServiceInitOptions\n): Promise<EncryptServiceImplementation> {\n  return factory(\n    cache,\n    \"encryptService\",\n    opts,\n    async () =>\n      new EncryptServiceImplementation(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        opts.encryptServiceOptions.logMacFailures\n      )\n  );\n}\n","import { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\n\nimport { AbstractKeyGenerationService } from \"./abstractions/abstractKeyGeneration.service\";\n\nexport class KeyGenerationService implements AbstractKeyGenerationService {\n  constructor(private cryptoFunctionService: CryptoFunctionService) {}\n\n  async makeEphemeralKey(numBytes = 16): Promise<SymmetricCryptoKey> {\n    const keyMaterial = await this.cryptoFunctionService.randomBytes(numBytes);\n    const key = await this.cryptoFunctionService.hkdf(\n      keyMaterial,\n      \"bitwarden-ephemeral\",\n      \"ephemeral\",\n      64,\n      \"sha256\"\n    );\n    return new SymmetricCryptoKey(key);\n  }\n}\n","import {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/abstractions/storage.service\";\nimport { MemoryStorageService } from \"@bitwarden/common/services/memoryStorage.service\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport BrowserLocalStorageService from \"../../services/browserLocalStorage.service\";\nimport { LocalBackedSessionStorageService } from \"../../services/localBackedSessionStorage.service\";\n\nimport { encryptServiceFactory, EncryptServiceInitOptions } from \"./encrypt-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport {\n  keyGenerationServiceFactory,\n  KeyGenerationServiceInitOptions,\n} from \"./key-generation-service.factory\";\n\ntype StorageServiceFactoryOptions = FactoryOptions;\n\nexport type DiskStorageServiceInitOptions = StorageServiceFactoryOptions;\nexport type SecureStorageServiceInitOptions = StorageServiceFactoryOptions;\nexport type MemoryStorageServiceInitOptions = StorageServiceFactoryOptions &\n  EncryptServiceInitOptions &\n  KeyGenerationServiceInitOptions;\n\nexport function diskStorageServiceFactory(\n  cache: { diskStorageService?: AbstractStorageService } & CachedServices,\n  opts: DiskStorageServiceInitOptions\n): Promise<AbstractStorageService> {\n  return factory(cache, \"diskStorageService\", opts, () => new BrowserLocalStorageService());\n}\n\nexport function secureStorageServiceFactory(\n  cache: { secureStorageService?: AbstractStorageService } & CachedServices,\n  opts: SecureStorageServiceInitOptions\n): Promise<AbstractStorageService> {\n  return factory(cache, \"secureStorageService\", opts, () => new BrowserLocalStorageService());\n}\n\nexport function memoryStorageServiceFactory(\n  cache: { memoryStorageService?: AbstractMemoryStorageService } & CachedServices,\n  opts: MemoryStorageServiceInitOptions\n): Promise<AbstractMemoryStorageService> {\n  return factory(cache, \"memoryStorageService\", opts, async () => {\n    if (BrowserApi.manifestVersion === 3) {\n      return new LocalBackedSessionStorageService(\n        await encryptServiceFactory(cache, opts),\n        await keyGenerationServiceFactory(cache, opts)\n      );\n    }\n    return new MemoryStorageService();\n  });\n}\n","import { KeyGenerationService } from \"../../services/keyGeneration.service\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\n\ntype KeyGenerationServiceFactoryOptions = FactoryOptions;\n\nexport type KeyGenerationServiceInitOptions = KeyGenerationServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions;\n\nexport function keyGenerationServiceFactory(\n  cache: { keyGenerationService?: KeyGenerationService } & CachedServices,\n  opts: KeyGenerationServiceInitOptions\n): Promise<KeyGenerationService> {\n  return factory(\n    cache,\n    \"keyGenerationService\",\n    opts,\n    async () => new KeyGenerationService(await cryptoFunctionServiceFactory(cache, opts))\n  );\n}\n","import { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\n\nimport { Account } from \"../../models/account\";\nimport { BrowserStateService } from \"../../services/browser-state.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport {\n  stateMigrationServiceFactory,\n  StateMigrationServiceInitOptions,\n} from \"./state-migration-service.factory\";\nimport {\n  diskStorageServiceFactory,\n  secureStorageServiceFactory,\n  memoryStorageServiceFactory,\n  DiskStorageServiceInitOptions,\n  SecureStorageServiceInitOptions,\n  MemoryStorageServiceInitOptions,\n} from \"./storage-service.factory\";\n\ntype StateServiceFactoryOptions = FactoryOptions & {\n  stateServiceOptions: {\n    useAccountCache?: boolean;\n    stateFactory: StateFactory<GlobalState, Account>;\n  };\n};\n\nexport type StateServiceInitOptions = StateServiceFactoryOptions &\n  DiskStorageServiceInitOptions &\n  SecureStorageServiceInitOptions &\n  MemoryStorageServiceInitOptions &\n  LogServiceInitOptions &\n  StateMigrationServiceInitOptions;\n\nexport async function stateServiceFactory(\n  cache: { stateService?: BrowserStateService } & CachedServices,\n  opts: StateServiceInitOptions\n): Promise<BrowserStateService> {\n  const service = await factory(\n    cache,\n    \"stateService\",\n    opts,\n    async () =>\n      await new BrowserStateService(\n        await diskStorageServiceFactory(cache, opts),\n        await secureStorageServiceFactory(cache, opts),\n        await memoryStorageServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await stateMigrationServiceFactory(cache, opts),\n        opts.stateServiceOptions.stateFactory,\n        opts.stateServiceOptions.useAccountCache\n      )\n  );\n  service.init();\n  return service;\n}\n","import { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { StateMigrationService } from \"@bitwarden/common/services/stateMigration.service\";\n\nimport { Account } from \"../../models/account\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport {\n  diskStorageServiceFactory,\n  DiskStorageServiceInitOptions,\n  secureStorageServiceFactory,\n  SecureStorageServiceInitOptions,\n} from \"./storage-service.factory\";\n\ntype StateMigrationServiceFactoryOptions = FactoryOptions & {\n  stateMigrationServiceOptions: {\n    stateFactory: StateFactory<GlobalState, Account>;\n  };\n};\n\nexport type StateMigrationServiceInitOptions = StateMigrationServiceFactoryOptions &\n  DiskStorageServiceInitOptions &\n  SecureStorageServiceInitOptions;\n\nexport function stateMigrationServiceFactory(\n  cache: { stateMigrationService?: StateMigrationService } & CachedServices,\n  opts: StateMigrationServiceInitOptions\n): Promise<StateMigrationService> {\n  return factory(\n    cache,\n    \"stateMigrationService\",\n    opts,\n    async () =>\n      new StateMigrationService(\n        await diskStorageServiceFactory(cache, opts),\n        await secureStorageServiceFactory(cache, opts),\n        opts.stateMigrationServiceOptions.stateFactory\n      )\n  );\n}\n","import { OrganizationService as AbstractOrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\n\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../background/service_factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../background/service_factories/state-service.factory\";\nimport { BrowserOrganizationService } from \"../../services/browser-organization.service\";\n\ntype OrganizationServiceFactoryOptions = FactoryOptions;\n\nexport type OrganizationServiceInitOptions = OrganizationServiceFactoryOptions &\n  StateServiceInitOptions;\n\nexport function organizationServiceFactory(\n  cache: { organizationService?: AbstractOrganizationService } & CachedServices,\n  opts: OrganizationServiceInitOptions\n): Promise<AbstractOrganizationService> {\n  return factory(\n    cache,\n    \"organizationService\",\n    opts,\n    async () => new BrowserOrganizationService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { PolicyService as AbstractPolicyService } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\n\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../background/service_factories/factory-options\";\nimport {\n  stateServiceFactory as stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../background/service_factories/state-service.factory\";\nimport { BrowserPolicyService } from \"../../services/browser-policy.service\";\n\nimport {\n  organizationServiceFactory,\n  OrganizationServiceInitOptions,\n} from \"./organization-service.factory\";\n\ntype PolicyServiceFactoryOptions = FactoryOptions;\n\nexport type PolicyServiceInitOptions = PolicyServiceFactoryOptions &\n  StateServiceInitOptions &\n  OrganizationServiceInitOptions;\n\nexport function policyServiceFactory(\n  cache: { policyService?: AbstractPolicyService } & CachedServices,\n  opts: PolicyServiceInitOptions\n): Promise<AbstractPolicyService> {\n  return factory(\n    cache,\n    \"policyService\",\n    opts,\n    async () =>\n      new BrowserPolicyService(\n        await stateServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts)\n      )\n  );\n}\n","import { TokenService as AbstractTokenService } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { TokenService } from \"@bitwarden/common/auth/services/token.service\";\n\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../background/service_factories/factory-options\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../background/service_factories/state-service.factory\";\n\ntype TokenServiceFactoryOptions = FactoryOptions;\n\nexport type TokenServiceInitOptions = TokenServiceFactoryOptions & StateServiceInitOptions;\n\nexport function tokenServiceFactory(\n  cache: { tokenService?: AbstractTokenService } & CachedServices,\n  opts: TokenServiceInitOptions\n): Promise<AbstractTokenService> {\n  return factory(\n    cache,\n    \"tokenService\",\n    opts,\n    async () => new TokenService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { DiskStorageOptions } from \"@koa/multer\";\n\nimport { AppIdService as AbstractAppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AppIdService } from \"@bitwarden/common/services/appId.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { diskStorageServiceFactory } from \"./storage-service.factory\";\n\ntype AppIdServiceFactoryOptions = FactoryOptions;\n\nexport type AppIdServiceInitOptions = AppIdServiceFactoryOptions & DiskStorageOptions;\n\nexport function appIdServiceFactory(\n  cache: { appIdService?: AbstractAppIdService } & CachedServices,\n  opts: AppIdServiceInitOptions\n): Promise<AbstractAppIdService> {\n  return factory(\n    cache,\n    \"appIdService\",\n    opts,\n    async () => new AppIdService(await diskStorageServiceFactory(cache, opts))\n  );\n}\n","import { BrowserEnvironmentService } from \"../../services/browser-environment.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport {\n  stateServiceFactory as stateServiceFactory,\n  StateServiceInitOptions,\n} from \"./state-service.factory\";\n\ntype EnvironmentServiceFactoryOptions = FactoryOptions;\n\nexport type EnvironmentServiceInitOptions = EnvironmentServiceFactoryOptions &\n  StateServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function environmentServiceFactory(\n  cache: { environmentService?: BrowserEnvironmentService } & CachedServices,\n  opts: EnvironmentServiceInitOptions\n): Promise<BrowserEnvironmentService> {\n  return factory(\n    cache,\n    \"environmentService\",\n    opts,\n    async () =>\n      new BrowserEnvironmentService(\n        await stateServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","import { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\n\nexport default class BrowserMessagingService implements MessagingService {\n  send(subscriber: string, arg: any = {}) {\n    return BrowserApi.sendMessage(subscriber, arg);\n  }\n}\n","import { MessagingService as AbstractMessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\n\nimport BrowserMessagingService from \"../../services/browserMessaging.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\n\ntype MessagingServiceFactoryOptions = FactoryOptions;\n\nexport type MessagingServiceInitOptions = MessagingServiceFactoryOptions;\n\nexport function messagingServiceFactory(\n  cache: { messagingService?: AbstractMessagingService } & CachedServices,\n  opts: MessagingServiceInitOptions\n): Promise<AbstractMessagingService> {\n  return factory(cache, \"messagingService\", opts, () => new BrowserMessagingService());\n}\n","import { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\nimport BrowserPlatformUtilsService from \"../../services/browserPlatformUtils.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { MessagingServiceInitOptions, messagingServiceFactory } from \"./messaging-service.factory\";\n\ntype PlatformUtilsServiceFactoryOptions = FactoryOptions & {\n  platformUtilsServiceOptions: {\n    clipboardWriteCallback: (clipboardValue: string, clearMs: number) => Promise<void>;\n    biometricCallback: () => Promise<boolean>;\n    win: Window & typeof globalThis;\n  };\n};\n\nexport type PlatformUtilsServiceInitOptions = PlatformUtilsServiceFactoryOptions &\n  MessagingServiceInitOptions;\n\nexport function platformUtilsServiceFactory(\n  cache: { platformUtilsService?: PlatformUtilsService } & CachedServices,\n  opts: PlatformUtilsServiceInitOptions\n): Promise<PlatformUtilsService> {\n  return factory(\n    cache,\n    \"platformUtilsService\",\n    opts,\n    async () =>\n      new BrowserPlatformUtilsService(\n        await messagingServiceFactory(cache, opts),\n        opts.platformUtilsServiceOptions.clipboardWriteCallback,\n        opts.platformUtilsServiceOptions.biometricCallback,\n        opts.platformUtilsServiceOptions.win\n      )\n  );\n}\n","import { ApiService as AbstractApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { ApiService } from \"@bitwarden/common/services/api.service\";\n\nimport {\n  tokenServiceFactory,\n  TokenServiceInitOptions,\n} from \"../../auth/background/service-factories/token-service.factory\";\n\nimport { AppIdServiceInitOptions, appIdServiceFactory } from \"./app-id-service.factory\";\nimport {\n  environmentServiceFactory,\n  EnvironmentServiceInitOptions,\n} from \"./environment-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"./platform-utils-service.factory\";\n\ntype ApiServiceFactoryOptions = FactoryOptions & {\n  apiServiceOptions: {\n    logoutCallback: (expired: boolean) => Promise<void>;\n    customUserAgent?: string;\n  };\n};\n\nexport type ApiServiceInitOptions = ApiServiceFactoryOptions &\n  TokenServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  EnvironmentServiceInitOptions &\n  AppIdServiceInitOptions;\n\nexport function apiServiceFactory(\n  cache: { apiService?: AbstractApiService } & CachedServices,\n  opts: ApiServiceInitOptions\n): Promise<AbstractApiService> {\n  return factory(\n    cache,\n    \"apiService\",\n    opts,\n    async () =>\n      new ApiService(\n        await tokenServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await environmentServiceFactory(cache, opts),\n        await appIdServiceFactory(cache, opts),\n        opts.apiServiceOptions.logoutCallback,\n        opts.apiServiceOptions.customUserAgent\n      )\n  );\n}\n","import { KeySuffixOptions } from \"@bitwarden/common/enums\";\nimport { CryptoService } from \"@bitwarden/common/services/crypto.service\";\n\nexport class BrowserCryptoService extends CryptoService {\n  protected async retrieveKeyFromStorage(keySuffix: KeySuffixOptions) {\n    if (keySuffix === \"biometric\") {\n      await this.platformUtilService.authenticateBiometric();\n      return (await this.getKey())?.keyB64;\n    }\n\n    return await super.retrieveKeyFromStorage(keySuffix);\n  }\n}\n","import { CryptoService as AbstractCryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\n\nimport { BrowserCryptoService } from \"../../services/browserCrypto.service\";\n\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"./crypto-function-service.factory\";\nimport { encryptServiceFactory, EncryptServiceInitOptions } from \"./encrypt-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport {\n  platformUtilsServiceFactory,\n  PlatformUtilsServiceInitOptions,\n} from \"./platform-utils-service.factory\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype CryptoServiceFactoryOptions = FactoryOptions;\n\nexport type CryptoServiceInitOptions = CryptoServiceFactoryOptions &\n  CryptoFunctionServiceInitOptions &\n  EncryptServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  LogServiceInitOptions &\n  StateServiceInitOptions;\n\nexport function cryptoServiceFactory(\n  cache: { cryptoService?: AbstractCryptoService } & CachedServices,\n  opts: CryptoServiceInitOptions\n): Promise<AbstractCryptoService> {\n  return factory(\n    cache,\n    \"cryptoService\",\n    opts,\n    async () =>\n      new BrowserCryptoService(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts)\n      )\n  );\n}\n","import { TranslationService as TranslationServiceAbstraction } from \"../abstractions/translation.service\";\n\nexport abstract class TranslationService implements TranslationServiceAbstraction {\n  // First locale is the default (English)\n  supportedTranslationLocales: string[] = [\"en\"];\n  defaultLocale = \"en\";\n  abstract translationLocale: string;\n  collator: Intl.Collator;\n  localeNames = new Map<string, string>([\n    [\"af\", \"Afrikaans\"],\n    [\"ar\", \"العربية الفصحى\"],\n    [\"az\", \"Azərbaycanca\"],\n    [\"be\", \"Беларуская\"],\n    [\"bg\", \"български\"],\n    [\"bn\", \"বাংলা\"],\n    [\"bs\", \"bosanski jezik\"],\n    [\"ca\", \"català\"],\n    [\"cs\", \"čeština\"],\n    [\"da\", \"dansk\"],\n    [\"de\", \"Deutsch\"],\n    [\"el\", \"Ελληνικά\"],\n    [\"en\", \"English\"],\n    [\"en-GB\", \"English (British)\"],\n    [\"en-IN\", \"English (India)\"],\n    [\"eo\", \"Esperanto\"],\n    [\"es\", \"español\"],\n    [\"et\", \"eesti\"],\n    [\"eu\", \"euskara\"],\n    [\"fa\", \"فارسی\"],\n    [\"fi\", \"suomi\"],\n    [\"fil\", \"Wikang Filipino\"],\n    [\"fr\", \"français\"],\n    [\"he\", \"עברית\"],\n    [\"hi\", \"हिन्दी\"],\n    [\"hr\", \"hrvatski\"],\n    [\"hu\", \"magyar\"],\n    [\"id\", \"Bahasa Indonesia\"],\n    [\"it\", \"italiano\"],\n    [\"ja\", \"日本語\"],\n    [\"ka\", \"ქართული\"],\n    [\"km\", \"ខ្មែរ, ខេមរភាសា, ភាសាខ្មែរ\"],\n    [\"kn\", \"ಕನ್ನಡ\"],\n    [\"ko\", \"한국어\"],\n    [\"lt\", \"lietuvių kalba\"],\n    [\"lv\", \"Latvietis\"],\n    [\"me\", \"црногорски\"],\n    [\"ml\", \"മലയാളം\"],\n    [\"nb\", \"norsk (bokmål)\"],\n    [\"nl\", \"Nederlands\"],\n    [\"nn\", \"Norsk Nynorsk\"],\n    [\"pl\", \"polski\"],\n    [\"pt-BR\", \"português do Brasil\"],\n    [\"pt-PT\", \"português\"],\n    [\"ro\", \"română\"],\n    [\"ru\", \"русский\"],\n    [\"si\", \"සිංහල\"],\n    [\"sk\", \"slovenčina\"],\n    [\"sl\", \"Slovenski jezik, Slovenščina\"],\n    [\"sr\", \"Српски\"],\n    [\"sv\", \"svenska\"],\n    [\"th\", \"ไทย\"],\n    [\"tr\", \"Türkçe\"],\n    [\"uk\", \"українська\"],\n    [\"vi\", \"Tiếng Việt\"],\n    [\"zh-CN\", \"中文（中国大陆）\"],\n    [\"zh-TW\", \"中文（台灣）\"],\n  ]);\n\n  protected inited: boolean;\n  protected defaultMessages: any = {};\n  protected localeMessages: any = {};\n\n  constructor(\n    protected systemLanguage: string,\n    protected localesDirectory: string,\n    protected getLocalesJson: (formattedLocale: string) => Promise<any>\n  ) {\n    this.systemLanguage = systemLanguage.replace(\"_\", \"-\");\n  }\n\n  async init(locale?: string) {\n    if (this.inited) {\n      throw new Error(\"i18n already initialized.\");\n    }\n    if (this.supportedTranslationLocales == null || this.supportedTranslationLocales.length === 0) {\n      throw new Error(\"supportedTranslationLocales not set.\");\n    }\n\n    this.inited = true;\n    this.translationLocale = locale != null ? locale : this.systemLanguage;\n\n    try {\n      this.collator = new Intl.Collator(this.translationLocale, {\n        numeric: true,\n        sensitivity: \"base\",\n      });\n    } catch {\n      this.collator = null;\n    }\n\n    if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {\n      this.translationLocale = this.translationLocale.slice(0, 2);\n\n      if (this.supportedTranslationLocales.indexOf(this.translationLocale) === -1) {\n        this.translationLocale = this.defaultLocale;\n      }\n    }\n\n    if (this.localesDirectory != null) {\n      await this.loadMessages(this.translationLocale, this.localeMessages);\n      if (this.translationLocale !== this.defaultLocale) {\n        await this.loadMessages(this.defaultLocale, this.defaultMessages);\n      }\n    }\n  }\n\n  t(id: string, p1?: string, p2?: string, p3?: string): string {\n    return this.translate(id, p1, p2, p3);\n  }\n\n  translate(id: string, p1?: string | number, p2?: string | number, p3?: string | number): string {\n    let result: string;\n    // eslint-disable-next-line\n    if (this.localeMessages.hasOwnProperty(id) && this.localeMessages[id]) {\n      result = this.localeMessages[id];\n      // eslint-disable-next-line\n    } else if (this.defaultMessages.hasOwnProperty(id) && this.defaultMessages[id]) {\n      result = this.defaultMessages[id];\n    } else {\n      result = \"\";\n    }\n\n    if (result !== \"\") {\n      if (p1 != null) {\n        result = result.split(\"__$1__\").join(p1.toString());\n      }\n      if (p2 != null) {\n        result = result.split(\"__$2__\").join(p2.toString());\n      }\n      if (p3 != null) {\n        result = result.split(\"__$3__\").join(p3.toString());\n      }\n    }\n\n    return result;\n  }\n\n  protected async loadMessages(locale: string, messagesObj: any): Promise<any> {\n    const formattedLocale = locale.replace(\"-\", \"_\");\n    const locales = await this.getLocalesJson(formattedLocale);\n    for (const prop in locales) {\n      // eslint-disable-next-line\n      if (!locales.hasOwnProperty(prop)) {\n        continue;\n      }\n      messagesObj[prop] = locales[prop].message;\n\n      if (locales[prop].placeholders) {\n        for (const placeProp in locales[prop].placeholders) {\n          if (\n            !locales[prop].placeholders.hasOwnProperty(placeProp) || // eslint-disable-line\n            !locales[prop].placeholders[placeProp].content\n          ) {\n            continue;\n          }\n\n          const replaceToken = \"\\\\$\" + placeProp.toUpperCase() + \"\\\\$\";\n          let replaceContent = locales[prop].placeholders[placeProp].content;\n          if (replaceContent === \"$1\" || replaceContent === \"$2\" || replaceContent === \"$3\") {\n            replaceContent = \"__$\" + replaceContent + \"__\";\n          }\n          messagesObj[prop] = messagesObj[prop].replace(\n            new RegExp(replaceToken, \"g\"),\n            replaceContent\n          );\n        }\n      }\n    }\n  }\n}\n","import { Observable, ReplaySubject } from \"rxjs\";\n\nimport { I18nService as I18nServiceAbstraction } from \"../abstractions/i18n.service\";\n\nimport { TranslationService } from \"./translation.service\";\n\nexport class I18nService extends TranslationService implements I18nServiceAbstraction {\n  protected _locale = new ReplaySubject<string>(1);\n  private _translationLocale: string;\n  locale$: Observable<string> = this._locale.asObservable();\n\n  constructor(\n    protected systemLanguage: string,\n    protected localesDirectory: string,\n    protected getLocalesJson: (formattedLocale: string) => Promise<any>\n  ) {\n    super(systemLanguage, localesDirectory, getLocalesJson);\n  }\n\n  get translationLocale(): string {\n    return this._translationLocale;\n  }\n\n  set translationLocale(locale: string) {\n    this._translationLocale = locale;\n    this._locale.next(locale);\n  }\n}\n","import { I18nService as BaseI18nService } from \"@bitwarden/common/services/i18n.service\";\n\nexport default class I18nService extends BaseI18nService {\n  constructor(systemLanguage: string) {\n    super(systemLanguage, null, async (formattedLocale: string) => {\n      // Deprecated\n      const file = await fetch(this.localesDirectory + formattedLocale + \"/messages.json\");\n      return await file.json();\n    });\n\n    // Please leave 'en' where it is, as it's our fallback language in case no translation can be found\n    this.supportedTranslationLocales = [\n      \"en\",\n      \"ar\",\n      \"az\",\n      \"be\",\n      \"bg\",\n      \"bn\",\n      \"bs\",\n      \"ca\",\n      \"cs\",\n      \"da\",\n      \"de\",\n      \"el\",\n      \"en-GB\",\n      \"en-IN\",\n      \"es\",\n      \"et\",\n      \"eu\",\n      \"fa\",\n      \"fi\",\n      \"fil\",\n      \"fr\",\n      \"he\",\n      \"hi\",\n      \"hr\",\n      \"hu\",\n      \"id\",\n      \"it\",\n      \"ja\",\n      \"ka\",\n      \"km\",\n      \"kn\",\n      \"ko\",\n      \"lt\",\n      \"lv\",\n      \"ml\",\n      \"nb\",\n      \"nl\",\n      \"nn\",\n      \"pl\",\n      \"pt-BR\",\n      \"pt-PT\",\n      \"ro\",\n      \"ru\",\n      \"si\",\n      \"sk\",\n      \"sl\",\n      \"sr\",\n      \"sv\",\n      \"th\",\n      \"tr\",\n      \"uk\",\n      \"vi\",\n      \"zh-CN\",\n      \"zh-TW\",\n    ];\n  }\n\n  t(id: string, p1?: string, p2?: string, p3?: string): string {\n    return this.translate(id, p1, p2, p3);\n  }\n\n  translate(id: string, p1?: string, p2?: string, p3?: string): string {\n    if (this.localesDirectory == null) {\n      const placeholders: string[] = [];\n      if (p1 != null) {\n        placeholders.push(p1);\n      }\n      if (p2 != null) {\n        placeholders.push(p2);\n      }\n      if (p3 != null) {\n        placeholders.push(p3);\n      }\n\n      if (placeholders.length) {\n        return chrome.i18n.getMessage(id, placeholders);\n      } else {\n        return chrome.i18n.getMessage(id);\n      }\n    }\n\n    return super.translate(id, p1, p2, p3);\n  }\n}\n","import { I18nService as AbstractI18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { I18nService as BaseI18nService } from \"@bitwarden/common/services/i18n.service\";\n\nimport I18nService from \"../../services/i18n.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\n\ntype I18nServiceFactoryOptions = FactoryOptions & {\n  i18nServiceOptions: {\n    systemLanguage: string;\n  };\n};\n\nexport type I18nServiceInitOptions = I18nServiceFactoryOptions;\n\nexport async function i18nServiceFactory(\n  cache: { i18nService?: AbstractI18nService } & CachedServices,\n  opts: I18nServiceInitOptions\n): Promise<AbstractI18nService> {\n  const service = await factory(\n    cache,\n    \"i18nService\",\n    opts,\n    () => new I18nService(opts.i18nServiceOptions.systemLanguage)\n  );\n  if (!(service as BaseI18nService as any).inited) {\n    await (service as BaseI18nService).init();\n  }\n  return service;\n}\n","import {\n  PasswordGenerationService,\n  PasswordGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/password\";\n\nimport {\n  policyServiceFactory,\n  PolicyServiceInitOptions,\n} from \"../../admin-console/background/service-factories/policy-service.factory\";\n\nimport { cryptoServiceFactory, CryptoServiceInitOptions } from \"./crypto-service.factory\";\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype PasswordGenerationServiceFactoryOptions = FactoryOptions;\n\nexport type PasswordGenerationServiceInitOptions = PasswordGenerationServiceFactoryOptions &\n  CryptoServiceInitOptions &\n  PolicyServiceInitOptions &\n  StateServiceInitOptions;\n\nexport function passwordGenerationServiceFactory(\n  cache: { passwordGenerationService?: PasswordGenerationServiceAbstraction } & CachedServices,\n  opts: PasswordGenerationServiceInitOptions\n): Promise<PasswordGenerationServiceAbstraction> {\n  return factory(\n    cache,\n    \"passwordGenerationService\",\n    opts,\n    async () =>\n      new PasswordGenerationService(\n        await cryptoServiceFactory(cache, opts),\n        await policyServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts)\n      )\n  );\n}\n","import { AuthService as AbstractAuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthService } from \"@bitwarden/common/auth/services/auth.service\";\n\nimport {\n  policyServiceFactory,\n  PolicyServiceInitOptions,\n} from \"../../../admin-console/background/service-factories/policy-service.factory\";\nimport {\n  apiServiceFactory,\n  ApiServiceInitOptions,\n} from \"../../../background/service_factories/api-service.factory\";\nimport { appIdServiceFactory } from \"../../../background/service_factories/app-id-service.factory\";\nimport {\n  cryptoServiceFactory,\n  CryptoServiceInitOptions,\n} from \"../../../background/service_factories/crypto-service.factory\";\nimport {\n  encryptServiceFactory,\n  EncryptServiceInitOptions,\n} from \"../../../background/service_factories/encrypt-service.factory\";\nimport {\n  environmentServiceFactory,\n  EnvironmentServiceInitOptions,\n} from \"../../../background/service_factories/environment-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../background/service_factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../../background/service_factories/i18n-service.factory\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../../background/service_factories/log-service.factory\";\nimport {\n  messagingServiceFactory,\n  MessagingServiceInitOptions,\n} from \"../../../background/service_factories/messaging-service.factory\";\nimport {\n  passwordGenerationServiceFactory,\n  PasswordGenerationServiceInitOptions,\n} from \"../../../background/service_factories/password-generation-service.factory\";\nimport {\n  platformUtilsServiceFactory,\n  PlatformUtilsServiceInitOptions,\n} from \"../../../background/service_factories/platform-utils-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../background/service_factories/state-service.factory\";\n\nimport {\n  keyConnectorServiceFactory,\n  KeyConnectorServiceInitOptions,\n} from \"./key-connector-service.factory\";\nimport { tokenServiceFactory, TokenServiceInitOptions } from \"./token-service.factory\";\nimport { twoFactorServiceFactory, TwoFactorServiceInitOptions } from \"./two-factor-service.factory\";\n\ntype AuthServiceFactoyOptions = FactoryOptions;\n\nexport type AuthServiceInitOptions = AuthServiceFactoyOptions &\n  CryptoServiceInitOptions &\n  ApiServiceInitOptions &\n  TokenServiceInitOptions &\n  PlatformUtilsServiceInitOptions &\n  MessagingServiceInitOptions &\n  LogServiceInitOptions &\n  KeyConnectorServiceInitOptions &\n  EnvironmentServiceInitOptions &\n  StateServiceInitOptions &\n  TwoFactorServiceInitOptions &\n  I18nServiceInitOptions &\n  EncryptServiceInitOptions &\n  PolicyServiceInitOptions &\n  PasswordGenerationServiceInitOptions;\n\nexport function authServiceFactory(\n  cache: { authService?: AbstractAuthService } & CachedServices,\n  opts: AuthServiceInitOptions\n): Promise<AbstractAuthService> {\n  return factory(\n    cache,\n    \"authService\",\n    opts,\n    async () =>\n      new AuthService(\n        await cryptoServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await tokenServiceFactory(cache, opts),\n        await appIdServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts),\n        await messagingServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await keyConnectorServiceFactory(cache, opts),\n        await environmentServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await twoFactorServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await passwordGenerationServiceFactory(cache, opts),\n        await policyServiceFactory(cache, opts)\n      )\n  );\n}\n","import { KeyConnectorService as AbstractKeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/services/key-connector.service\";\n\nimport {\n  OrganizationServiceInitOptions,\n  organizationServiceFactory,\n} from \"../../../admin-console/background/service-factories/organization-service.factory\";\nimport {\n  apiServiceFactory,\n  ApiServiceInitOptions,\n} from \"../../../background/service_factories/api-service.factory\";\nimport {\n  cryptoFunctionServiceFactory,\n  CryptoFunctionServiceInitOptions,\n} from \"../../../background/service_factories/crypto-function-service.factory\";\nimport {\n  CryptoServiceInitOptions,\n  cryptoServiceFactory,\n} from \"../../../background/service_factories/crypto-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../background/service_factories/factory-options\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../../background/service_factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../background/service_factories/state-service.factory\";\n\nimport { TokenServiceInitOptions, tokenServiceFactory } from \"./token-service.factory\";\n\ntype KeyConnectorServiceFactoryOptions = FactoryOptions & {\n  keyConnectorServiceOptions: {\n    logoutCallback: (expired: boolean, userId?: string) => Promise<void>;\n  };\n};\n\nexport type KeyConnectorServiceInitOptions = KeyConnectorServiceFactoryOptions &\n  StateServiceInitOptions &\n  CryptoServiceInitOptions &\n  ApiServiceInitOptions &\n  TokenServiceInitOptions &\n  LogServiceInitOptions &\n  OrganizationServiceInitOptions &\n  CryptoFunctionServiceInitOptions;\n\nexport function keyConnectorServiceFactory(\n  cache: { keyConnectorService?: AbstractKeyConnectorService } & CachedServices,\n  opts: KeyConnectorServiceInitOptions\n): Promise<AbstractKeyConnectorService> {\n  return factory(\n    cache,\n    \"keyConnectorService\",\n    opts,\n    async () =>\n      new KeyConnectorService(\n        await stateServiceFactory(cache, opts),\n        await cryptoServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await tokenServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts),\n        await cryptoFunctionServiceFactory(cache, opts),\n        opts.keyConnectorServiceOptions.logoutCallback\n      )\n  );\n}\n","import { TwoFactorService as AbstractTwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/services/two-factor.service\";\n\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../background/service_factories/factory-options\";\nimport {\n  I18nServiceInitOptions,\n  i18nServiceFactory,\n} from \"../../../background/service_factories/i18n-service.factory\";\nimport {\n  PlatformUtilsServiceInitOptions,\n  platformUtilsServiceFactory,\n} from \"../../../background/service_factories/platform-utils-service.factory\";\n\ntype TwoFactorServiceFactoryOptions = FactoryOptions;\n\nexport type TwoFactorServiceInitOptions = TwoFactorServiceFactoryOptions &\n  I18nServiceInitOptions &\n  PlatformUtilsServiceInitOptions;\n\nexport async function twoFactorServiceFactory(\n  cache: { twoFactorService?: AbstractTwoFactorService } & CachedServices,\n  opts: TwoFactorServiceInitOptions\n): Promise<AbstractTwoFactorService> {\n  const service = await factory(\n    cache,\n    \"twoFactorService\",\n    opts,\n    async () =>\n      new TwoFactorService(\n        await i18nServiceFactory(cache, opts),\n        await platformUtilsServiceFactory(cache, opts)\n      )\n  );\n  service.init();\n  return service;\n}\n","import { CipherFileUploadService as CipherFileUploadServiceAbstraction } from \"@bitwarden/common/vault/abstractions/file-upload/cipher-file-upload.service\";\nimport { CipherFileUploadService } from \"@bitwarden/common/vault/services/file-upload/cipher-file-upload.service\";\n\nimport { apiServiceFactory, ApiServiceInitOptions } from \"./api-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport {\n  fileUploadServiceFactory,\n  FileUploadServiceInitOptions,\n} from \"./file-upload-service.factory\";\n\ntype CipherFileUploadServiceFactoyOptions = FactoryOptions;\n\nexport type CipherFileUploadServiceInitOptions = CipherFileUploadServiceFactoyOptions &\n  ApiServiceInitOptions &\n  FileUploadServiceInitOptions;\n\nexport function cipherFileUploadServiceFactory(\n  cache: { cipherFileUploadService?: CipherFileUploadServiceAbstraction } & CachedServices,\n  opts: CipherFileUploadServiceInitOptions\n): Promise<CipherFileUploadServiceAbstraction> {\n  return factory(\n    cache,\n    \"cipherFileUploadService\",\n    opts,\n    async () =>\n      new CipherFileUploadService(\n        await apiServiceFactory(cache, opts),\n        await fileUploadServiceFactory(cache, opts)\n      )\n  );\n}\n","import { FileUploadService as FileUploadServiceAbstraction } from \"@bitwarden/common/abstractions/file-upload/file-upload.service\";\nimport { FileUploadService } from \"@bitwarden/common/services/file-upload/file-upload.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\n\ntype FileUploadServiceFactoryOptions = FactoryOptions;\n\nexport type FileUploadServiceInitOptions = FileUploadServiceFactoryOptions & LogServiceInitOptions;\n\nexport function fileUploadServiceFactory(\n  cache: { fileUploadService?: FileUploadServiceAbstraction } & CachedServices,\n  opts: FileUploadServiceInitOptions\n): Promise<FileUploadServiceAbstraction> {\n  return factory(\n    cache,\n    \"fileUploadService\",\n    opts,\n    async () => new FileUploadService(await logServiceFactory(cache, opts))\n  );\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { AccountSettingsSettings } from \"@bitwarden/common/models/domain/account\";\nimport { SettingsService } from \"@bitwarden/common/services/settings.service\";\n\nimport { sessionSync } from \"../decorators/session-sync-observable\";\n\nexport class BrowserSettingsService extends SettingsService {\n  @sessionSync({ initializer: (obj: string[][]) => obj })\n  protected _settings: BehaviorSubject<AccountSettingsSettings>;\n}\n","import { SettingsService as AbstractSettingsService } from \"@bitwarden/common/abstractions/settings.service\";\n\nimport { BrowserSettingsService } from \"../../services/browser-settings.service\";\n\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype SettingsServiceFactoryOptions = FactoryOptions;\n\nexport type SettingsServiceInitOptions = SettingsServiceFactoryOptions & StateServiceInitOptions;\n\nexport function settingsServiceFactory(\n  cache: { settingsService?: AbstractSettingsService } & CachedServices,\n  opts: SettingsServiceInitOptions\n): Promise<AbstractSettingsService> {\n  return factory(\n    cache,\n    \"settingsService\",\n    opts,\n    async () => new BrowserSettingsService(await stateServiceFactory(cache, opts))\n  );\n}\n","import { CipherService as AbstractCipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherService } from \"@bitwarden/common/vault/services/cipher.service\";\n\nimport {\n  apiServiceFactory,\n  ApiServiceInitOptions,\n} from \"../../../background/service_factories/api-service.factory\";\nimport {\n  CipherFileUploadServiceInitOptions,\n  cipherFileUploadServiceFactory,\n} from \"../../../background/service_factories/cipher-file-upload-service.factory\";\nimport {\n  cryptoServiceFactory,\n  CryptoServiceInitOptions,\n} from \"../../../background/service_factories/crypto-service.factory\";\nimport {\n  encryptServiceFactory,\n  EncryptServiceInitOptions,\n} from \"../../../background/service_factories/encrypt-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../background/service_factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../../background/service_factories/i18n-service.factory\";\nimport {\n  searchServiceFactory,\n  SearchServiceInitOptions,\n} from \"../../../background/service_factories/search-service.factory\";\nimport {\n  SettingsServiceInitOptions,\n  settingsServiceFactory,\n} from \"../../../background/service_factories/settings-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../background/service_factories/state-service.factory\";\n\ntype CipherServiceFactoryOptions = FactoryOptions;\n\nexport type CipherServiceInitOptions = CipherServiceFactoryOptions &\n  CryptoServiceInitOptions &\n  SettingsServiceInitOptions &\n  ApiServiceInitOptions &\n  CipherFileUploadServiceInitOptions &\n  I18nServiceInitOptions &\n  SearchServiceInitOptions &\n  StateServiceInitOptions &\n  EncryptServiceInitOptions;\n\nexport function cipherServiceFactory(\n  cache: { cipherService?: AbstractCipherService } & CachedServices,\n  opts: CipherServiceInitOptions\n): Promise<AbstractCipherService> {\n  return factory(\n    cache,\n    \"cipherService\",\n    opts,\n    async () =>\n      new CipherService(\n        await cryptoServiceFactory(cache, opts),\n        await settingsServiceFactory(cache, opts),\n        await apiServiceFactory(cache, opts),\n        await i18nServiceFactory(cache, opts),\n        await searchServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await encryptServiceFactory(cache, opts),\n        await cipherFileUploadServiceFactory(cache, opts)\n      )\n  );\n}\n","import { SearchService as AbstractSearchService } from \"@bitwarden/common/abstractions/search.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\n\nimport { CachedServices, factory, FactoryOptions } from \"./factory-options\";\nimport { i18nServiceFactory, I18nServiceInitOptions } from \"./i18n-service.factory\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\n\ntype SearchServiceFactoryOptions = FactoryOptions;\n\nexport type SearchServiceInitOptions = SearchServiceFactoryOptions &\n  LogServiceInitOptions &\n  I18nServiceInitOptions;\n\nexport function searchServiceFactory(\n  cache: { searchService?: AbstractSearchService } & CachedServices,\n  opts: SearchServiceInitOptions\n): Promise<AbstractSearchService> {\n  return factory(\n    cache,\n    \"searchService\",\n    opts,\n    async () =>\n      new SearchService(await logServiceFactory(cache, opts), await i18nServiceFactory(cache, opts))\n  );\n}\n","import { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport { CachedServices } from \"../../background/service_factories/factory-options\";\nimport {\n  i18nServiceFactory,\n  I18nServiceInitOptions,\n} from \"../../background/service_factories/i18n-service.factory\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../background/service_factories/log-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../background/service_factories/state-service.factory\";\nimport { Account } from \"../../models/account\";\nimport { BrowserStateService } from \"../../services/abstractions/browser-state.service\";\n\nexport const ROOT_ID = \"root\";\n\nexport const AUTOFILL_ID = \"autofill\";\nexport const COPY_USERNAME_ID = \"copy-username\";\nexport const COPY_PASSWORD_ID = \"copy-password\";\nexport const COPY_VERIFICATIONCODE_ID = \"copy-totp\";\nexport const COPY_IDENTIFIER_ID = \"copy-identifier\";\n\nconst SEPARATOR_ID = \"separator\";\nexport const GENERATE_PASSWORD_ID = \"generate-password\";\n\nexport const NOOP_COMMAND_SUFFIX = \"noop\";\n\nexport class MainContextMenuHandler {\n  //\n  private initRunning = false;\n\n  create: (options: chrome.contextMenus.CreateProperties) => Promise<void>;\n\n  constructor(\n    private stateService: BrowserStateService,\n    private i18nService: I18nService,\n    private logService: LogService\n  ) {\n    if (chrome.contextMenus) {\n      this.create = (options) => {\n        return new Promise<void>((resolve, reject) => {\n          chrome.contextMenus.create(options, () => {\n            if (chrome.runtime.lastError) {\n              reject(chrome.runtime.lastError);\n              return;\n            }\n            resolve();\n          });\n        });\n      };\n    } else {\n      this.create = (_options) => Promise.resolve();\n    }\n  }\n\n  static async mv3Create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    const serviceOptions: StateServiceInitOptions & I18nServiceInitOptions & LogServiceInitOptions =\n      {\n        cryptoFunctionServiceOptions: {\n          win: self,\n        },\n        encryptServiceOptions: {\n          logMacFailures: false,\n        },\n        i18nServiceOptions: {\n          systemLanguage: chrome.i18n.getUILanguage(),\n        },\n        logServiceOptions: {\n          isDev: false,\n        },\n        stateMigrationServiceOptions: {\n          stateFactory: stateFactory,\n        },\n        stateServiceOptions: {\n          stateFactory: stateFactory,\n        },\n      };\n\n    return new MainContextMenuHandler(\n      await stateServiceFactory(cachedServices, serviceOptions),\n      await i18nServiceFactory(cachedServices, serviceOptions),\n      await logServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  /**\n   *\n   * @returns a boolean showing whether or not items were created\n   */\n  async init(): Promise<boolean> {\n    const menuDisabled = await this.stateService.getDisableContextMenuItem();\n    if (menuDisabled) {\n      await MainContextMenuHandler.removeAll();\n      return false;\n    }\n\n    if (this.initRunning) {\n      return true;\n    }\n    this.initRunning = true;\n\n    try {\n      const create = async (options: Omit<chrome.contextMenus.CreateProperties, \"contexts\">) => {\n        await this.create({ ...options, contexts: [\"all\"] });\n      };\n\n      await create({\n        id: ROOT_ID,\n        title: \"Bitwarden\",\n      });\n\n      await create({\n        id: AUTOFILL_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"autoFill\"),\n      });\n\n      await create({\n        id: COPY_USERNAME_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyUsername\"),\n      });\n\n      await create({\n        id: COPY_PASSWORD_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyPassword\"),\n      });\n\n      if (await this.stateService.getCanAccessPremium()) {\n        await create({\n          id: COPY_VERIFICATIONCODE_ID,\n          parentId: ROOT_ID,\n          title: this.i18nService.t(\"copyVerificationCode\"),\n        });\n      }\n\n      await create({\n        id: SEPARATOR_ID,\n        type: \"separator\",\n        parentId: ROOT_ID,\n      });\n\n      await create({\n        id: GENERATE_PASSWORD_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"generatePasswordCopied\"),\n      });\n\n      await create({\n        id: COPY_IDENTIFIER_ID,\n        parentId: ROOT_ID,\n        title: this.i18nService.t(\"copyElementIdentifier\"),\n      });\n    } catch (error) {\n      this.logService.warning(error.message);\n    } finally {\n      this.initRunning = false;\n    }\n    return true;\n  }\n\n  static async removeAll() {\n    return new Promise<void>((resolve, reject) => {\n      chrome.contextMenus.removeAll(() => {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n\n        resolve();\n      });\n    });\n  }\n\n  static remove(menuItemId: string) {\n    return new Promise<void>((resolve, reject) => {\n      chrome.contextMenus.remove(menuItemId, () => {\n        if (chrome.runtime.lastError) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n\n        resolve();\n      });\n    });\n  }\n\n  async loadOptions(title: string, id: string, url: string, cipher?: CipherView | undefined) {\n    if (cipher != null && cipher.type !== CipherType.Login) {\n      return;\n    }\n\n    try {\n      const sanitizedTitle = MainContextMenuHandler.sanitizeContextMenuTitle(title);\n\n      const createChildItem = async (parent: string) => {\n        const menuItemId = `${parent}_${id}`;\n        return await this.create({\n          type: \"normal\",\n          id: menuItemId,\n          parentId: parent,\n          title: sanitizedTitle,\n          contexts: [\"all\"],\n        });\n      };\n\n      if (cipher == null || !Utils.isNullOrEmpty(cipher.login.password)) {\n        await createChildItem(AUTOFILL_ID);\n        if (cipher?.viewPassword ?? true) {\n          await createChildItem(COPY_PASSWORD_ID);\n        }\n      }\n\n      if (cipher == null || !Utils.isNullOrEmpty(cipher.login.username)) {\n        await createChildItem(COPY_USERNAME_ID);\n      }\n\n      const canAccessPremium = await this.stateService.getCanAccessPremium();\n      if (canAccessPremium && (cipher == null || !Utils.isNullOrEmpty(cipher.login.totp))) {\n        await createChildItem(COPY_VERIFICATIONCODE_ID);\n      }\n    } catch (error) {\n      this.logService.warning(error.message);\n    }\n  }\n\n  static sanitizeContextMenuTitle(title: string): string {\n    return title.replace(/&/g, \"&&\");\n  }\n\n  async noAccess() {\n    if (await this.init()) {\n      const authed = await this.stateService.getIsAuthenticated();\n      await this.loadOptions(\n        this.i18nService.t(authed ? \"unlockVaultMenu\" : \"loginToVaultMenu\"),\n        NOOP_COMMAND_SUFFIX,\n        \"<all_urls>\"\n      );\n    }\n  }\n\n  async noLogins(url: string) {\n    await this.loadOptions(this.i18nService.t(\"noMatchingLogins\"), NOOP_COMMAND_SUFFIX, url);\n  }\n}\n","import { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport {\n  authServiceFactory,\n  AuthServiceInitOptions,\n} from \"../../auth/background/service-factories/auth-service.factory\";\nimport { CachedServices } from \"../../background/service_factories/factory-options\";\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { Account } from \"../../models/account\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\n\nimport { MainContextMenuHandler } from \"./main-context-menu-handler\";\n\nconst NOT_IMPLEMENTED = (..._args: unknown[]) => Promise.resolve();\n\nconst LISTENED_TO_COMMANDS = [\n  \"loggedIn\",\n  \"unlocked\",\n  \"syncCompleted\",\n  \"bgUpdateContextMenu\",\n  \"editedCipher\",\n  \"addedCipher\",\n  \"deletedCipher\",\n];\n\nexport class CipherContextMenuHandler {\n  constructor(\n    private mainContextMenuHandler: MainContextMenuHandler,\n    private authService: AuthService,\n    private cipherService: CipherService\n  ) {}\n\n  static async create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    const serviceOptions: AuthServiceInitOptions & CipherServiceInitOptions = {\n      apiServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      cryptoFunctionServiceOptions: {\n        win: self,\n      },\n      encryptServiceOptions: {\n        logMacFailures: false,\n      },\n      i18nServiceOptions: {\n        systemLanguage: chrome.i18n.getUILanguage(),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      logServiceOptions: {\n        isDev: false,\n      },\n      platformUtilsServiceOptions: {\n        biometricCallback: () => Promise.resolve(false),\n        clipboardWriteCallback: NOT_IMPLEMENTED,\n        win: self,\n      },\n      stateMigrationServiceOptions: {\n        stateFactory: stateFactory,\n      },\n      stateServiceOptions: {\n        stateFactory: stateFactory,\n      },\n    };\n    return new CipherContextMenuHandler(\n      await MainContextMenuHandler.mv3Create(cachedServices),\n      await authServiceFactory(cachedServices, serviceOptions),\n      await cipherServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  static async tabsOnActivatedListener(\n    activeInfo: chrome.tabs.TabActiveInfo,\n    serviceCache: CachedServices\n  ) {\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    const tab = await BrowserApi.getTab(activeInfo.tabId);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async tabsOnReplacedListener(\n    addedTabId: number,\n    removedTabId: number,\n    serviceCache: CachedServices\n  ) {\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    const tab = await BrowserApi.getTab(addedTabId);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async tabsOnUpdatedListener(\n    tabId: number,\n    changeInfo: chrome.tabs.TabChangeInfo,\n    tab: chrome.tabs.Tab,\n    serviceCache: CachedServices\n  ) {\n    if (changeInfo.status !== \"complete\") {\n      return;\n    }\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(serviceCache);\n    await cipherContextMenuHandler.update(tab.url);\n  }\n\n  static async messageListener(\n    message: { command: string },\n    sender: chrome.runtime.MessageSender,\n    cachedServices: CachedServices\n  ) {\n    if (!CipherContextMenuHandler.shouldListen(message)) {\n      return;\n    }\n    const cipherContextMenuHandler = await CipherContextMenuHandler.create(cachedServices);\n    await cipherContextMenuHandler.messageListener(message);\n  }\n\n  private static shouldListen(message: { command: string }) {\n    return LISTENED_TO_COMMANDS.includes(message.command);\n  }\n\n  async messageListener(message: { command: string }, sender?: chrome.runtime.MessageSender) {\n    if (!CipherContextMenuHandler.shouldListen(message)) {\n      return;\n    }\n\n    const activeTabs = await BrowserApi.getActiveTabs();\n    if (!activeTabs || activeTabs.length === 0) {\n      return;\n    }\n\n    await this.update(activeTabs[0].url);\n  }\n\n  async update(url: string) {\n    const authStatus = await this.authService.getAuthStatus();\n    await MainContextMenuHandler.removeAll();\n    if (authStatus !== AuthenticationStatus.Unlocked) {\n      // Should I pass in the auth status or even have two seperate methods for this\n      // on MainContextMenuHandler\n      await this.mainContextMenuHandler.noAccess();\n      return;\n    }\n\n    const menuEnabled = await this.mainContextMenuHandler.init();\n    if (!menuEnabled) {\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(url);\n    ciphers.sort((a, b) => this.cipherService.sortCiphersByLastUsedThenName(a, b));\n\n    if (ciphers.length === 0) {\n      await this.mainContextMenuHandler.noLogins(url);\n      return;\n    }\n\n    for (const cipher of ciphers) {\n      await this.updateForCipher(url, cipher);\n    }\n  }\n\n  private async updateForCipher(url: string, cipher: CipherView) {\n    if (\n      cipher == null ||\n      cipher.type !== CipherType.Login ||\n      cipher.reprompt !== CipherRepromptType.None\n    ) {\n      return;\n    }\n\n    let title = cipher.name;\n    if (!Utils.isNullOrEmpty(title)) {\n      title += ` (${cipher.login.username})`;\n    }\n\n    await this.mainContextMenuHandler.loadOptions(title, cipher.id, url, cipher);\n  }\n}\n","import { TotpService as AbstractTotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { TotpService } from \"@bitwarden/common/services/totp.service\";\n\nimport {\n  CryptoFunctionServiceInitOptions,\n  cryptoFunctionServiceFactory,\n} from \"../../../background/service_factories/crypto-function-service.factory\";\nimport {\n  FactoryOptions,\n  CachedServices,\n  factory,\n} from \"../../../background/service_factories/factory-options\";\nimport {\n  LogServiceInitOptions,\n  logServiceFactory,\n} from \"../../../background/service_factories/log-service.factory\";\n\ntype TotpServiceOptions = FactoryOptions;\n\nexport type TotpServiceInitOptions = TotpServiceOptions &\n  CryptoFunctionServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function totpServiceFactory(\n  cache: { totpService?: AbstractTotpService } & CachedServices,\n  opts: TotpServiceInitOptions\n): Promise<AbstractTotpService> {\n  return factory(\n    cache,\n    \"totpService\",\n    opts,\n    async () =>\n      new TotpService(\n        await cryptoFunctionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","import { EventCollectionService as AbstractEventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventCollectionService } from \"@bitwarden/common/services/event/event-collection.service\";\n\nimport {\n  organizationServiceFactory,\n  OrganizationServiceInitOptions,\n} from \"../../admin-console/background/service-factories/organization-service.factory\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\n\nimport {\n  eventUploadServiceFactory,\n  EventUploadServiceInitOptions,\n} from \"./event-upload-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype EventCollectionServiceOptions = FactoryOptions;\n\nexport type EventCollectionServiceInitOptions = EventCollectionServiceOptions &\n  CipherServiceInitOptions &\n  StateServiceInitOptions &\n  OrganizationServiceInitOptions &\n  EventUploadServiceInitOptions;\n\nexport function eventCollectionServiceFactory(\n  cache: { eventCollectionService?: AbstractEventCollectionService } & CachedServices,\n  opts: EventCollectionServiceInitOptions\n): Promise<AbstractEventCollectionService> {\n  return factory(\n    cache,\n    \"eventCollectionService\",\n    opts,\n    async () =>\n      new EventCollectionService(\n        await cipherServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await organizationServiceFactory(cache, opts),\n        await eventUploadServiceFactory(cache, opts)\n      )\n  );\n}\n","import { EventUploadService as AbstractEventUploadService } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { EventUploadService } from \"@bitwarden/common/services/event/event-upload.service\";\n\nimport { apiServiceFactory, ApiServiceInitOptions } from \"./api-service.factory\";\nimport { FactoryOptions, CachedServices, factory } from \"./factory-options\";\nimport { logServiceFactory, LogServiceInitOptions } from \"./log-service.factory\";\nimport { stateServiceFactory, StateServiceInitOptions } from \"./state-service.factory\";\n\ntype EventUploadServiceOptions = FactoryOptions;\n\nexport type EventUploadServiceInitOptions = EventUploadServiceOptions &\n  ApiServiceInitOptions &\n  StateServiceInitOptions &\n  LogServiceInitOptions;\n\nexport function eventUploadServiceFactory(\n  cache: { eventUploadService?: AbstractEventUploadService } & CachedServices,\n  opts: EventUploadServiceInitOptions\n): Promise<AbstractEventUploadService> {\n  return factory(\n    cache,\n    \"eventUploadService\",\n    opts,\n    async () =>\n      new EventUploadService(\n        await apiServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts)\n      )\n  );\n}\n","export default class AutofillScript {\n  script: string[][] = [];\n  documentUUID: any = {};\n  properties: any = {};\n  options: any = {};\n  metadata: any = {};\n  autosubmit: any = null;\n  savedUrls: string[];\n  untrustedIframe: boolean;\n\n  constructor(documentUUID: string) {\n    this.documentUUID = documentUUID;\n  }\n}\n","export class AutoFillConstants {\n  static readonly UsernameFieldNames: string[] = [\n    // English\n    \"username\",\n    \"user name\",\n    \"email\",\n    \"email address\",\n    \"e-mail\",\n    \"e-mail address\",\n    \"userid\",\n    \"user id\",\n    \"customer id\",\n    \"login id\",\n    // German\n    \"benutzername\",\n    \"benutzer name\",\n    \"email adresse\",\n    \"e-mail adresse\",\n    \"benutzerid\",\n    \"benutzer id\",\n  ];\n\n  static readonly PasswordFieldIgnoreList: string[] = [\n    \"onetimepassword\",\n    \"captcha\",\n    \"findanything\",\n    \"forgot\",\n  ];\n\n  static readonly ExcludedAutofillTypes: string[] = [\n    \"radio\",\n    \"checkbox\",\n    \"hidden\",\n    \"file\",\n    \"button\",\n    \"image\",\n    \"reset\",\n    \"search\",\n  ];\n}\n\nexport class CreditCardAutoFillConstants {\n  static readonly CardAttributes: string[] = [\n    \"autoCompleteType\",\n    \"data-stripe\",\n    \"htmlName\",\n    \"htmlID\",\n    \"label-tag\",\n    \"placeholder\",\n    \"label-left\",\n    \"label-top\",\n    \"data-recurly\",\n  ];\n\n  static readonly CardAttributesExtended: string[] = [\n    ...CreditCardAutoFillConstants.CardAttributes,\n    \"label-right\",\n  ];\n\n  static readonly CardHolderFieldNames: string[] = [\n    \"cc-name\",\n    \"card-name\",\n    \"cardholder-name\",\n    \"cardholder\",\n    \"name\",\n    \"nom\",\n  ];\n\n  static readonly CardHolderFieldNameValues: string[] = [\n    \"cc-name\",\n    \"card-name\",\n    \"cardholder-name\",\n    \"cardholder\",\n    \"tbName\",\n  ];\n\n  static readonly CardNumberFieldNames: string[] = [\n    \"cc-number\",\n    \"cc-num\",\n    \"card-number\",\n    \"card-num\",\n    \"number\",\n    \"cc\",\n    \"cc-no\",\n    \"card-no\",\n    \"credit-card\",\n    \"numero-carte\",\n    \"carte\",\n    \"carte-credit\",\n    \"num-carte\",\n    \"cb-num\",\n  ];\n\n  static readonly CardNumberFieldNameValues: string[] = [\n    \"cc-number\",\n    \"cc-num\",\n    \"card-number\",\n    \"card-num\",\n    \"cc-no\",\n    \"card-no\",\n    \"numero-carte\",\n    \"num-carte\",\n    \"cb-num\",\n  ];\n\n  static readonly CardExpiryFieldNames: string[] = [\n    \"cc-exp\",\n    \"card-exp\",\n    \"cc-expiration\",\n    \"card-expiration\",\n    \"cc-ex\",\n    \"card-ex\",\n    \"card-expire\",\n    \"card-expiry\",\n    \"validite\",\n    \"expiration\",\n    \"expiry\",\n    \"mm-yy\",\n    \"mm-yyyy\",\n    \"yy-mm\",\n    \"yyyy-mm\",\n    \"expiration-date\",\n    \"payment-card-expiration\",\n    \"payment-cc-date\",\n  ];\n\n  static readonly CardExpiryFieldNameValues: string[] = [\n    \"mm-yy\",\n    \"mm-yyyy\",\n    \"yy-mm\",\n    \"yyyy-mm\",\n    \"expiration-date\",\n    \"payment-card-expiration\",\n  ];\n\n  static readonly ExpiryMonthFieldNames: string[] = [\n    \"exp-month\",\n    \"cc-exp-month\",\n    \"cc-month\",\n    \"card-month\",\n    \"cc-mo\",\n    \"card-mo\",\n    \"exp-mo\",\n    \"card-exp-mo\",\n    \"cc-exp-mo\",\n    \"card-expiration-month\",\n    \"expiration-month\",\n    \"cc-mm\",\n    \"cc-m\",\n    \"card-mm\",\n    \"card-m\",\n    \"card-exp-mm\",\n    \"cc-exp-mm\",\n    \"exp-mm\",\n    \"exp-m\",\n    \"expire-month\",\n    \"expire-mo\",\n    \"expiry-month\",\n    \"expiry-mo\",\n    \"card-expire-month\",\n    \"card-expire-mo\",\n    \"card-expiry-month\",\n    \"card-expiry-mo\",\n    \"mois-validite\",\n    \"mois-expiration\",\n    \"m-validite\",\n    \"m-expiration\",\n    \"expiry-date-field-month\",\n    \"expiration-date-month\",\n    \"expiration-date-mm\",\n    \"exp-mon\",\n    \"validity-mo\",\n    \"exp-date-mo\",\n    \"cb-date-mois\",\n    \"date-m\",\n  ];\n\n  static readonly ExpiryYearFieldNames: string[] = [\n    \"exp-year\",\n    \"cc-exp-year\",\n    \"cc-year\",\n    \"card-year\",\n    \"cc-yr\",\n    \"card-yr\",\n    \"exp-yr\",\n    \"card-exp-yr\",\n    \"cc-exp-yr\",\n    \"card-expiration-year\",\n    \"expiration-year\",\n    \"cc-yy\",\n    \"cc-y\",\n    \"card-yy\",\n    \"card-y\",\n    \"card-exp-yy\",\n    \"cc-exp-yy\",\n    \"exp-yy\",\n    \"exp-y\",\n    \"cc-yyyy\",\n    \"card-yyyy\",\n    \"card-exp-yyyy\",\n    \"cc-exp-yyyy\",\n    \"expire-year\",\n    \"expire-yr\",\n    \"expiry-year\",\n    \"expiry-yr\",\n    \"card-expire-year\",\n    \"card-expire-yr\",\n    \"card-expiry-year\",\n    \"card-expiry-yr\",\n    \"an-validite\",\n    \"an-expiration\",\n    \"annee-validite\",\n    \"annee-expiration\",\n    \"expiry-date-field-year\",\n    \"expiration-date-year\",\n    \"cb-date-ann\",\n    \"expiration-date-yy\",\n    \"expiration-date-yyyy\",\n    \"validity-year\",\n    \"exp-date-year\",\n    \"date-y\",\n  ];\n\n  static readonly CVVFieldNames: string[] = [\n    \"cvv\",\n    \"cvc\",\n    \"cvv2\",\n    \"cc-csc\",\n    \"cc-cvv\",\n    \"card-csc\",\n    \"card-cvv\",\n    \"cvd\",\n    \"cid\",\n    \"cvc2\",\n    \"cnv\",\n    \"cvn2\",\n    \"cc-code\",\n    \"card-code\",\n    \"code-securite\",\n    \"security-code\",\n    \"crypto\",\n    \"card-verif\",\n    \"verification-code\",\n    \"csc\",\n    \"ccv\",\n  ];\n\n  static readonly CardBrandFieldNames: string[] = [\n    \"cc-type\",\n    \"card-type\",\n    \"card-brand\",\n    \"cc-brand\",\n    \"cb-type\",\n  ];\n\n  // Each index represents a language. These three arrays should all be the same length.\n  // 0: English, 1: Danish, 2: German/Dutch, 3: French/Spanish/Italian, 4: Russian, 5: Portuguese\n  static readonly MonthAbbr = [\"mm\", \"mm\", \"mm\", \"mm\", \"мм\", \"mm\"];\n  static readonly YearAbbrShort = [\"yy\", \"åå\", \"jj\", \"aa\", \"гг\", \"rr\"];\n  static readonly YearAbbrLong = [\"yyyy\", \"åååå\", \"jjjj\", \"aa\", \"гггг\", \"rrrr\"];\n}\n\nexport class IdentityAutoFillConstants {\n  static readonly IdentityAttributes: string[] = [\n    \"autoCompleteType\",\n    \"data-stripe\",\n    \"htmlName\",\n    \"htmlID\",\n    \"label-tag\",\n    \"placeholder\",\n    \"label-left\",\n    \"label-top\",\n    \"data-recurly\",\n  ];\n\n  static readonly FullNameFieldNames: string[] = [\"name\", \"full-name\", \"your-name\"];\n\n  static readonly FullNameFieldNameValues: string[] = [\"full-name\", \"your-name\"];\n\n  static readonly TitleFieldNames: string[] = [\"honorific-prefix\", \"prefix\", \"title\"];\n\n  static readonly FirstnameFieldNames: string[] = [\n    // English\n    \"f-name\",\n    \"first-name\",\n    \"given-name\",\n    \"first-n\",\n    // German\n    \"vorname\",\n  ];\n\n  static readonly MiddlenameFieldNames: string[] = [\n    \"m-name\",\n    \"middle-name\",\n    \"additional-name\",\n    \"middle-initial\",\n    \"middle-n\",\n    \"middle-i\",\n  ];\n\n  static readonly LastnameFieldNames: string[] = [\n    // English\n    \"l-name\",\n    \"last-name\",\n    \"s-name\",\n    \"surname\",\n    \"family-name\",\n    \"family-n\",\n    \"last-n\",\n    // German\n    \"nachname\",\n    \"familienname\",\n  ];\n\n  static readonly EmailFieldNames: string[] = [\"e-mail\", \"email-address\"];\n\n  static readonly AddressFieldNames: string[] = [\n    \"address\",\n    \"street-address\",\n    \"addr\",\n    \"street\",\n    \"mailing-addr\",\n    \"billing-addr\",\n    \"mail-addr\",\n    \"bill-addr\",\n  ];\n\n  static readonly AddressFieldNameValues: string[] = [\n    \"mailing-addr\",\n    \"billing-addr\",\n    \"mail-addr\",\n    \"bill-addr\",\n  ];\n\n  static readonly Address1FieldNames: string[] = [\n    \"address-1\",\n    \"address-line-1\",\n    \"addr-1\",\n    \"street-1\",\n  ];\n\n  static readonly Address2FieldNames: string[] = [\n    \"address-2\",\n    \"address-line-2\",\n    \"addr-2\",\n    \"street-2\",\n  ];\n\n  static readonly Address3FieldNames: string[] = [\n    \"address-3\",\n    \"address-line-3\",\n    \"addr-3\",\n    \"street-3\",\n  ];\n\n  static readonly PostalCodeFieldNames: string[] = [\n    \"postal\",\n    \"zip\",\n    \"zip2\",\n    \"zip-code\",\n    \"postal-code\",\n    \"post-code\",\n    \"address-zip\",\n    \"address-postal\",\n    \"address-code\",\n    \"address-postal-code\",\n    \"address-zip-code\",\n  ];\n\n  static readonly CityFieldNames: string[] = [\n    \"city\",\n    \"town\",\n    \"address-level-2\",\n    \"address-city\",\n    \"address-town\",\n  ];\n\n  static readonly StateFieldNames: string[] = [\n    \"state\",\n    \"province\",\n    \"provence\",\n    \"address-level-1\",\n    \"address-state\",\n    \"address-province\",\n  ];\n\n  static readonly CountryFieldNames: string[] = [\n    \"country\",\n    \"country-code\",\n    \"country-name\",\n    \"address-country\",\n    \"address-country-name\",\n    \"address-country-code\",\n  ];\n\n  static readonly PhoneFieldNames: string[] = [\n    \"phone\",\n    \"mobile\",\n    \"mobile-phone\",\n    \"tel\",\n    \"telephone\",\n    \"phone-number\",\n  ];\n\n  static readonly UserNameFieldNames: string[] = [\"user-name\", \"user-id\", \"screen-name\"];\n\n  static readonly CompanyFieldNames: string[] = [\n    \"company\",\n    \"company-name\",\n    \"organization\",\n    \"organization-name\",\n  ];\n\n  static readonly IsoCountries: { [id: string]: string } = {\n    afghanistan: \"AF\",\n    \"aland islands\": \"AX\",\n    albania: \"AL\",\n    algeria: \"DZ\",\n    \"american samoa\": \"AS\",\n    andorra: \"AD\",\n    angola: \"AO\",\n    anguilla: \"AI\",\n    antarctica: \"AQ\",\n    \"antigua and barbuda\": \"AG\",\n    argentina: \"AR\",\n    armenia: \"AM\",\n    aruba: \"AW\",\n    australia: \"AU\",\n    austria: \"AT\",\n    azerbaijan: \"AZ\",\n    bahamas: \"BS\",\n    bahrain: \"BH\",\n    bangladesh: \"BD\",\n    barbados: \"BB\",\n    belarus: \"BY\",\n    belgium: \"BE\",\n    belize: \"BZ\",\n    benin: \"BJ\",\n    bermuda: \"BM\",\n    bhutan: \"BT\",\n    bolivia: \"BO\",\n    \"bosnia and herzegovina\": \"BA\",\n    botswana: \"BW\",\n    \"bouvet island\": \"BV\",\n    brazil: \"BR\",\n    \"british indian ocean territory\": \"IO\",\n    \"brunei darussalam\": \"BN\",\n    bulgaria: \"BG\",\n    \"burkina faso\": \"BF\",\n    burundi: \"BI\",\n    cambodia: \"KH\",\n    cameroon: \"CM\",\n    canada: \"CA\",\n    \"cape verde\": \"CV\",\n    \"cayman islands\": \"KY\",\n    \"central african republic\": \"CF\",\n    chad: \"TD\",\n    chile: \"CL\",\n    china: \"CN\",\n    \"christmas island\": \"CX\",\n    \"cocos (keeling) islands\": \"CC\",\n    colombia: \"CO\",\n    comoros: \"KM\",\n    congo: \"CG\",\n    \"congo, democratic republic\": \"CD\",\n    \"cook islands\": \"CK\",\n    \"costa rica\": \"CR\",\n    \"cote d'ivoire\": \"CI\",\n    croatia: \"HR\",\n    cuba: \"CU\",\n    cyprus: \"CY\",\n    \"czech republic\": \"CZ\",\n    denmark: \"DK\",\n    djibouti: \"DJ\",\n    dominica: \"DM\",\n    \"dominican republic\": \"DO\",\n    ecuador: \"EC\",\n    egypt: \"EG\",\n    \"el salvador\": \"SV\",\n    \"equatorial guinea\": \"GQ\",\n    eritrea: \"ER\",\n    estonia: \"EE\",\n    ethiopia: \"ET\",\n    \"falkland islands\": \"FK\",\n    \"faroe islands\": \"FO\",\n    fiji: \"FJ\",\n    finland: \"FI\",\n    france: \"FR\",\n    \"french guiana\": \"GF\",\n    \"french polynesia\": \"PF\",\n    \"french southern territories\": \"TF\",\n    gabon: \"GA\",\n    gambia: \"GM\",\n    georgia: \"GE\",\n    germany: \"DE\",\n    ghana: \"GH\",\n    gibraltar: \"GI\",\n    greece: \"GR\",\n    greenland: \"GL\",\n    grenada: \"GD\",\n    guadeloupe: \"GP\",\n    guam: \"GU\",\n    guatemala: \"GT\",\n    guernsey: \"GG\",\n    guinea: \"GN\",\n    \"guinea-bissau\": \"GW\",\n    guyana: \"GY\",\n    haiti: \"HT\",\n    \"heard island & mcdonald islands\": \"HM\",\n    \"holy see (vatican city state)\": \"VA\",\n    honduras: \"HN\",\n    \"hong kong\": \"HK\",\n    hungary: \"HU\",\n    iceland: \"IS\",\n    india: \"IN\",\n    indonesia: \"ID\",\n    \"iran, islamic republic of\": \"IR\",\n    iraq: \"IQ\",\n    ireland: \"IE\",\n    \"isle of man\": \"IM\",\n    israel: \"IL\",\n    italy: \"IT\",\n    jamaica: \"JM\",\n    japan: \"JP\",\n    jersey: \"JE\",\n    jordan: \"JO\",\n    kazakhstan: \"KZ\",\n    kenya: \"KE\",\n    kiribati: \"KI\",\n    \"republic of korea\": \"KR\",\n    \"south korea\": \"KR\",\n    \"democratic people's republic of korea\": \"KP\",\n    \"north korea\": \"KP\",\n    kuwait: \"KW\",\n    kyrgyzstan: \"KG\",\n    \"lao people's democratic republic\": \"LA\",\n    latvia: \"LV\",\n    lebanon: \"LB\",\n    lesotho: \"LS\",\n    liberia: \"LR\",\n    \"libyan arab jamahiriya\": \"LY\",\n    liechtenstein: \"LI\",\n    lithuania: \"LT\",\n    luxembourg: \"LU\",\n    macao: \"MO\",\n    macedonia: \"MK\",\n    madagascar: \"MG\",\n    malawi: \"MW\",\n    malaysia: \"MY\",\n    maldives: \"MV\",\n    mali: \"ML\",\n    malta: \"MT\",\n    \"marshall islands\": \"MH\",\n    martinique: \"MQ\",\n    mauritania: \"MR\",\n    mauritius: \"MU\",\n    mayotte: \"YT\",\n    mexico: \"MX\",\n    \"micronesia, federated states of\": \"FM\",\n    moldova: \"MD\",\n    monaco: \"MC\",\n    mongolia: \"MN\",\n    montenegro: \"ME\",\n    montserrat: \"MS\",\n    morocco: \"MA\",\n    mozambique: \"MZ\",\n    myanmar: \"MM\",\n    namibia: \"NA\",\n    nauru: \"NR\",\n    nepal: \"NP\",\n    netherlands: \"NL\",\n    \"netherlands antilles\": \"AN\",\n    \"new caledonia\": \"NC\",\n    \"new zealand\": \"NZ\",\n    nicaragua: \"NI\",\n    niger: \"NE\",\n    nigeria: \"NG\",\n    niue: \"NU\",\n    \"norfolk island\": \"NF\",\n    \"northern mariana islands\": \"MP\",\n    norway: \"NO\",\n    oman: \"OM\",\n    pakistan: \"PK\",\n    palau: \"PW\",\n    \"palestinian territory, occupied\": \"PS\",\n    panama: \"PA\",\n    \"papua new guinea\": \"PG\",\n    paraguay: \"PY\",\n    peru: \"PE\",\n    philippines: \"PH\",\n    pitcairn: \"PN\",\n    poland: \"PL\",\n    portugal: \"PT\",\n    \"puerto rico\": \"PR\",\n    qatar: \"QA\",\n    reunion: \"RE\",\n    romania: \"RO\",\n    \"russian federation\": \"RU\",\n    rwanda: \"RW\",\n    \"saint barthelemy\": \"BL\",\n    \"saint helena\": \"SH\",\n    \"saint kitts and nevis\": \"KN\",\n    \"saint lucia\": \"LC\",\n    \"saint martin\": \"MF\",\n    \"saint pierre and miquelon\": \"PM\",\n    \"saint vincent and grenadines\": \"VC\",\n    samoa: \"WS\",\n    \"san marino\": \"SM\",\n    \"sao tome and principe\": \"ST\",\n    \"saudi arabia\": \"SA\",\n    senegal: \"SN\",\n    serbia: \"RS\",\n    seychelles: \"SC\",\n    \"sierra leone\": \"SL\",\n    singapore: \"SG\",\n    slovakia: \"SK\",\n    slovenia: \"SI\",\n    \"solomon islands\": \"SB\",\n    somalia: \"SO\",\n    \"south africa\": \"ZA\",\n    \"south georgia and sandwich isl.\": \"GS\",\n    spain: \"ES\",\n    \"sri lanka\": \"LK\",\n    sudan: \"SD\",\n    suriname: \"SR\",\n    \"svalbard and jan mayen\": \"SJ\",\n    swaziland: \"SZ\",\n    sweden: \"SE\",\n    switzerland: \"CH\",\n    \"syrian arab republic\": \"SY\",\n    taiwan: \"TW\",\n    tajikistan: \"TJ\",\n    tanzania: \"TZ\",\n    thailand: \"TH\",\n    \"timor-leste\": \"TL\",\n    togo: \"TG\",\n    tokelau: \"TK\",\n    tonga: \"TO\",\n    \"trinidad and tobago\": \"TT\",\n    tunisia: \"TN\",\n    turkey: \"TR\",\n    turkmenistan: \"TM\",\n    \"turks and caicos islands\": \"TC\",\n    tuvalu: \"TV\",\n    uganda: \"UG\",\n    ukraine: \"UA\",\n    \"united arab emirates\": \"AE\",\n    \"united kingdom\": \"GB\",\n    \"united states\": \"US\",\n    \"united states outlying islands\": \"UM\",\n    uruguay: \"UY\",\n    uzbekistan: \"UZ\",\n    vanuatu: \"VU\",\n    venezuela: \"VE\",\n    vietnam: \"VN\",\n    \"virgin islands, british\": \"VG\",\n    \"virgin islands, u.s.\": \"VI\",\n    \"wallis and futuna\": \"WF\",\n    \"western sahara\": \"EH\",\n    yemen: \"YE\",\n    zambia: \"ZM\",\n    zimbabwe: \"ZW\",\n  };\n\n  static readonly IsoStates: { [id: string]: string } = {\n    alabama: \"AL\",\n    alaska: \"AK\",\n    \"american samoa\": \"AS\",\n    arizona: \"AZ\",\n    arkansas: \"AR\",\n    california: \"CA\",\n    colorado: \"CO\",\n    connecticut: \"CT\",\n    delaware: \"DE\",\n    \"district of columbia\": \"DC\",\n    \"federated states of micronesia\": \"FM\",\n    florida: \"FL\",\n    georgia: \"GA\",\n    guam: \"GU\",\n    hawaii: \"HI\",\n    idaho: \"ID\",\n    illinois: \"IL\",\n    indiana: \"IN\",\n    iowa: \"IA\",\n    kansas: \"KS\",\n    kentucky: \"KY\",\n    louisiana: \"LA\",\n    maine: \"ME\",\n    \"marshall islands\": \"MH\",\n    maryland: \"MD\",\n    massachusetts: \"MA\",\n    michigan: \"MI\",\n    minnesota: \"MN\",\n    mississippi: \"MS\",\n    missouri: \"MO\",\n    montana: \"MT\",\n    nebraska: \"NE\",\n    nevada: \"NV\",\n    \"new hampshire\": \"NH\",\n    \"new jersey\": \"NJ\",\n    \"new mexico\": \"NM\",\n    \"new york\": \"NY\",\n    \"north carolina\": \"NC\",\n    \"north dakota\": \"ND\",\n    \"northern mariana islands\": \"MP\",\n    ohio: \"OH\",\n    oklahoma: \"OK\",\n    oregon: \"OR\",\n    palau: \"PW\",\n    pennsylvania: \"PA\",\n    \"puerto rico\": \"PR\",\n    \"rhode island\": \"RI\",\n    \"south carolina\": \"SC\",\n    \"south dakota\": \"SD\",\n    tennessee: \"TN\",\n    texas: \"TX\",\n    utah: \"UT\",\n    vermont: \"VT\",\n    \"virgin islands\": \"VI\",\n    virginia: \"VA\",\n    washington: \"WA\",\n    \"west virginia\": \"WV\",\n    wisconsin: \"WI\",\n    wyoming: \"WY\",\n  };\n\n  static readonly IsoProvinces: { [id: string]: string } = {\n    alberta: \"AB\",\n    \"british columbia\": \"BC\",\n    manitoba: \"MB\",\n    \"new brunswick\": \"NB\",\n    \"newfoundland and labrador\": \"NL\",\n    \"nova scotia\": \"NS\",\n    ontario: \"ON\",\n    \"prince edward island\": \"PE\",\n    quebec: \"QC\",\n    saskatchewan: \"SK\",\n  };\n}\n","import { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { SettingsService } from \"@bitwarden/common/abstractions/settings.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { EventType, FieldType, UriMatchType } from \"@bitwarden/common/enums\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherType } from \"@bitwarden/common/vault/enums/cipher-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { FieldView } from \"@bitwarden/common/vault/models/view/field.view\";\n\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { BrowserStateService } from \"../../services/abstractions/browser-state.service\";\nimport AutofillField from \"../models/autofill-field\";\nimport AutofillPageDetails from \"../models/autofill-page-details\";\nimport AutofillScript from \"../models/autofill-script\";\n\nimport {\n  AutoFillOptions,\n  AutofillService as AutofillServiceInterface,\n  PageDetail,\n  FormData,\n} from \"./abstractions/autofill.service\";\nimport {\n  AutoFillConstants,\n  CreditCardAutoFillConstants,\n  IdentityAutoFillConstants,\n} from \"./autofill-constants\";\n\nexport interface GenerateFillScriptOptions {\n  skipUsernameOnlyFill: boolean;\n  onlyEmptyFields: boolean;\n  onlyVisibleFields: boolean;\n  fillNewPassword: boolean;\n  cipher: CipherView;\n  tabUrl: string;\n  defaultUriMatch: UriMatchType;\n}\n\nexport default class AutofillService implements AutofillServiceInterface {\n  constructor(\n    private cipherService: CipherService,\n    private stateService: BrowserStateService,\n    private totpService: TotpService,\n    private eventCollectionService: EventCollectionService,\n    private logService: LogService,\n    private settingsService: SettingsService\n  ) {}\n\n  getFormsWithPasswordFields(pageDetails: AutofillPageDetails): FormData[] {\n    const formData: FormData[] = [];\n\n    const passwordFields = AutofillService.loadPasswordFields(pageDetails, true, true, false, true);\n\n    // TODO: this logic prevents multi-step account creation forms (that just start with email)\n    // from being passed on to the notification bar content script - even if autofill.js found the form and email field.\n    // ex: https://signup.live.com/\n    if (passwordFields.length === 0) {\n      return formData;\n    }\n\n    // Back up check for cases where there are several password fields detected,\n    // but they are not all part of the form b/c of bad HTML\n\n    // gather password fields that don't have an enclosing form\n    const passwordFieldsWithoutForm = passwordFields.filter((pf) => pf.form === undefined);\n    const formKeys = Object.keys(pageDetails.forms);\n    const formCount = formKeys.length;\n\n    // if we have 3 password fields and only 1 form, and there are password fields that are not within a form\n    // but there is at least one password field within the form, then most likely this is a poorly built password change form\n    if (passwordFields.length === 3 && formCount == 1 && passwordFieldsWithoutForm.length > 0) {\n      // Only one form so get the singular form key\n      const soloFormKey = formKeys[0];\n\n      const atLeastOnePasswordFieldWithinSoloForm =\n        passwordFields.filter((pf) => pf.form !== null && pf.form === soloFormKey).length > 0;\n\n      if (atLeastOnePasswordFieldWithinSoloForm) {\n        // We have a form with at least one password field,\n        // so let's make an assumption that the password fields without a form are actually part of this form\n        passwordFieldsWithoutForm.forEach((pf) => {\n          pf.form = soloFormKey;\n        });\n      }\n    }\n\n    for (const formKey in pageDetails.forms) {\n      // eslint-disable-next-line\n      if (!pageDetails.forms.hasOwnProperty(formKey)) {\n        continue;\n      }\n\n      const formPasswordFields = passwordFields.filter((pf) => formKey === pf.form);\n      if (formPasswordFields.length > 0) {\n        let uf = this.findUsernameField(pageDetails, formPasswordFields[0], false, false, false);\n        if (uf == null) {\n          // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n          uf = this.findUsernameField(pageDetails, formPasswordFields[0], true, true, false);\n        }\n        formData.push({\n          form: pageDetails.forms[formKey],\n          password: formPasswordFields[0],\n          username: uf,\n          passwords: formPasswordFields,\n        });\n      }\n    }\n\n    return formData;\n  }\n\n  /**\n   * Autofills a given tab with a given login item\n   * @param options Instructions about the autofill operation, including tab and login item\n   * @returns The TOTP code of the successfully autofilled login, if any\n   */\n  async doAutoFill(options: AutoFillOptions): Promise<string> {\n    const tab = options.tab;\n    if (!tab || !options.cipher || !options.pageDetails || !options.pageDetails.length) {\n      throw new Error(\"Nothing to auto-fill.\");\n    }\n\n    let totpPromise: Promise<string> = null;\n\n    const canAccessPremium = await this.stateService.getCanAccessPremium();\n    const defaultUriMatch = (await this.stateService.getDefaultUriMatch()) ?? UriMatchType.Domain;\n\n    let didAutofill = false;\n    options.pageDetails.forEach((pd) => {\n      // make sure we're still on correct tab\n      if (pd.tab.id !== tab.id || pd.tab.url !== tab.url) {\n        return;\n      }\n\n      const fillScript = this.generateFillScript(pd.details, {\n        skipUsernameOnlyFill: options.skipUsernameOnlyFill || false,\n        onlyEmptyFields: options.onlyEmptyFields || false,\n        onlyVisibleFields: options.onlyVisibleFields || false,\n        fillNewPassword: options.fillNewPassword || false,\n        cipher: options.cipher,\n        tabUrl: tab.url,\n        defaultUriMatch: defaultUriMatch,\n      });\n\n      if (!fillScript || !fillScript.script || !fillScript.script.length) {\n        return;\n      }\n\n      if (\n        fillScript.untrustedIframe &&\n        options.allowUntrustedIframe != undefined &&\n        !options.allowUntrustedIframe\n      ) {\n        this.logService.info(\"Auto-fill on page load was blocked due to an untrusted iframe.\");\n        return;\n      }\n\n      // Add a small delay between operations\n      fillScript.properties.delay_between_operations = 20;\n\n      didAutofill = true;\n      if (!options.skipLastUsed) {\n        this.cipherService.updateLastUsedDate(options.cipher.id);\n      }\n\n      BrowserApi.tabSendMessage(\n        tab,\n        {\n          command: \"fillForm\",\n          fillScript: fillScript,\n          url: tab.url,\n        },\n        { frameId: pd.frameId }\n      );\n\n      if (\n        options.cipher.type !== CipherType.Login ||\n        totpPromise ||\n        !options.cipher.login.totp ||\n        (!canAccessPremium && !options.cipher.organizationUseTotp)\n      ) {\n        return;\n      }\n\n      totpPromise = this.stateService.getDisableAutoTotpCopy().then((disabled) => {\n        if (!disabled) {\n          return this.totpService.getCode(options.cipher.login.totp);\n        }\n        return null;\n      });\n    });\n\n    if (didAutofill) {\n      this.eventCollectionService.collect(EventType.Cipher_ClientAutofilled, options.cipher.id);\n      if (totpPromise != null) {\n        return await totpPromise;\n      } else {\n        return null;\n      }\n    } else {\n      throw new Error(\"Did not auto-fill.\");\n    }\n  }\n\n  /**\n   * Autofills the specified tab with the next login item from the cache\n   * @param pageDetails The data scraped from the page\n   * @param tab The tab to be autofilled\n   * @param fromCommand Whether the autofill is triggered by a keyboard shortcut (`true`) or autofill on page load (`false`)\n   * @returns The TOTP code of the successfully autofilled login, if any\n   */\n  async doAutoFillOnTab(\n    pageDetails: PageDetail[],\n    tab: chrome.tabs.Tab,\n    fromCommand: boolean\n  ): Promise<string> {\n    let cipher: CipherView;\n    if (fromCommand) {\n      cipher = await this.cipherService.getNextCipherForUrl(tab.url);\n    } else {\n      const lastLaunchedCipher = await this.cipherService.getLastLaunchedForUrl(tab.url, true);\n      if (\n        lastLaunchedCipher &&\n        Date.now().valueOf() - lastLaunchedCipher.localData?.lastLaunched?.valueOf() < 30000\n      ) {\n        cipher = lastLaunchedCipher;\n      } else {\n        cipher = await this.cipherService.getLastUsedForUrl(tab.url, true);\n      }\n    }\n\n    if (cipher == null || cipher.reprompt !== CipherRepromptType.None) {\n      return null;\n    }\n\n    const totpCode = await this.doAutoFill({\n      tab: tab,\n      cipher: cipher,\n      pageDetails: pageDetails,\n      skipLastUsed: !fromCommand,\n      skipUsernameOnlyFill: !fromCommand,\n      onlyEmptyFields: !fromCommand,\n      onlyVisibleFields: !fromCommand,\n      fillNewPassword: fromCommand,\n      allowUntrustedIframe: fromCommand,\n    });\n\n    // Update last used index as autofill has succeed\n    if (fromCommand) {\n      this.cipherService.updateLastUsedIndexForUrl(tab.url);\n    }\n\n    return totpCode;\n  }\n\n  /**\n   * Autofills the active tab with the next login item from the cache\n   * @param pageDetails The data scraped from the page\n   * @param fromCommand Whether the autofill is triggered by a keyboard shortcut (`true`) or autofill on page load (`false`)\n   * @returns The TOTP code of the successfully autofilled login, if any\n   */\n  async doAutoFillActiveTab(pageDetails: PageDetail[], fromCommand: boolean): Promise<string> {\n    const tab = await this.getActiveTab();\n    if (!tab || !tab.url) {\n      return;\n    }\n\n    return await this.doAutoFillOnTab(pageDetails, tab, fromCommand);\n  }\n\n  // Helpers\n\n  private async getActiveTab(): Promise<chrome.tabs.Tab> {\n    const tab = await BrowserApi.getTabFromCurrentWindow();\n    if (!tab) {\n      throw new Error(\"No tab found.\");\n    }\n\n    return tab;\n  }\n\n  private generateFillScript(\n    pageDetails: AutofillPageDetails,\n    options: GenerateFillScriptOptions\n  ): AutofillScript {\n    if (!pageDetails || !options.cipher) {\n      return null;\n    }\n\n    let fillScript = new AutofillScript(pageDetails.documentUUID);\n    const filledFields: { [id: string]: AutofillField } = {};\n    const fields = options.cipher.fields;\n\n    if (fields && fields.length) {\n      const fieldNames: string[] = [];\n\n      fields.forEach((f) => {\n        if (AutofillService.hasValue(f.name)) {\n          fieldNames.push(f.name.toLowerCase());\n        }\n      });\n\n      pageDetails.fields.forEach((field) => {\n        // eslint-disable-next-line\n        if (filledFields.hasOwnProperty(field.opid)) {\n          return;\n        }\n\n        if (!field.viewable && field.tagName !== \"span\") {\n          return;\n        }\n\n        const matchingIndex = this.findMatchingFieldIndex(field, fieldNames);\n        if (matchingIndex > -1) {\n          const matchingField: FieldView = fields[matchingIndex];\n          let val: string;\n          if (matchingField.type === FieldType.Linked) {\n            // Assumption: Linked Field is not being used to autofill a boolean value\n            val = options.cipher.linkedFieldValue(matchingField.linkedId) as string;\n          } else {\n            val = matchingField.value;\n            if (val == null && matchingField.type === FieldType.Boolean) {\n              val = \"false\";\n            }\n          }\n\n          filledFields[field.opid] = field;\n          AutofillService.fillByOpid(fillScript, field, val);\n        }\n      });\n    }\n\n    switch (options.cipher.type) {\n      case CipherType.Login:\n        fillScript = this.generateLoginFillScript(fillScript, pageDetails, filledFields, options);\n        break;\n      case CipherType.Card:\n        fillScript = this.generateCardFillScript(fillScript, pageDetails, filledFields, options);\n        break;\n      case CipherType.Identity:\n        fillScript = this.generateIdentityFillScript(\n          fillScript,\n          pageDetails,\n          filledFields,\n          options\n        );\n        break;\n      default:\n        return null;\n    }\n\n    return fillScript;\n  }\n\n  private generateLoginFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): AutofillScript {\n    if (!options.cipher.login) {\n      return null;\n    }\n\n    const passwords: AutofillField[] = [];\n    const usernames: AutofillField[] = [];\n    let pf: AutofillField = null;\n    let username: AutofillField = null;\n    const login = options.cipher.login;\n    fillScript.savedUrls =\n      login?.uris?.filter((u) => u.match != UriMatchType.Never).map((u) => u.uri) ?? [];\n\n    fillScript.untrustedIframe = this.inUntrustedIframe(pageDetails.url, options);\n\n    if (!login.password || login.password === \"\") {\n      // No password for this login. Maybe they just wanted to auto-fill some custom fields?\n      fillScript = AutofillService.setFillScriptForFocus(filledFields, fillScript);\n      return fillScript;\n    }\n\n    let passwordFields = AutofillService.loadPasswordFields(\n      pageDetails,\n      false,\n      false,\n      options.onlyEmptyFields,\n      options.fillNewPassword\n    );\n    if (!passwordFields.length && !options.onlyVisibleFields) {\n      // not able to find any viewable password fields. maybe there are some \"hidden\" ones?\n      passwordFields = AutofillService.loadPasswordFields(\n        pageDetails,\n        true,\n        true,\n        options.onlyEmptyFields,\n        options.fillNewPassword\n      );\n    }\n\n    for (const formKey in pageDetails.forms) {\n      // eslint-disable-next-line\n      if (!pageDetails.forms.hasOwnProperty(formKey)) {\n        continue;\n      }\n\n      const passwordFieldsForForm: AutofillField[] = [];\n      passwordFields.forEach((passField) => {\n        if (formKey === passField.form) {\n          passwordFieldsForForm.push(passField);\n        }\n      });\n\n      passwordFields.forEach((passField) => {\n        pf = passField;\n        passwords.push(pf);\n\n        if (login.username) {\n          username = this.findUsernameField(pageDetails, pf, false, false, false);\n\n          if (!username && !options.onlyVisibleFields) {\n            // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n            username = this.findUsernameField(pageDetails, pf, true, true, false);\n          }\n\n          if (username) {\n            usernames.push(username);\n          }\n        }\n      });\n    }\n\n    if (passwordFields.length && !passwords.length) {\n      // The page does not have any forms with password fields. Use the first password field on the page and the\n      // input field just before it as the username.\n\n      pf = passwordFields[0];\n      passwords.push(pf);\n\n      if (login.username && pf.elementNumber > 0) {\n        username = this.findUsernameField(pageDetails, pf, false, false, true);\n\n        if (!username && !options.onlyVisibleFields) {\n          // not able to find any viewable username fields. maybe there are some \"hidden\" ones?\n          username = this.findUsernameField(pageDetails, pf, true, true, true);\n        }\n\n        if (username) {\n          usernames.push(username);\n        }\n      }\n    }\n\n    if (!passwordFields.length && !options.skipUsernameOnlyFill) {\n      // No password fields on this page. Let's try to just fuzzy fill the username.\n      pageDetails.fields.forEach((f) => {\n        if (\n          f.viewable &&\n          (f.type === \"text\" || f.type === \"email\" || f.type === \"tel\") &&\n          AutofillService.fieldIsFuzzyMatch(f, AutoFillConstants.UsernameFieldNames)\n        ) {\n          usernames.push(f);\n        }\n      });\n    }\n\n    usernames.forEach((u) => {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(u.opid)) {\n        return;\n      }\n\n      filledFields[u.opid] = u;\n      AutofillService.fillByOpid(fillScript, u, login.username);\n    });\n\n    passwords.forEach((p) => {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(p.opid)) {\n        return;\n      }\n\n      filledFields[p.opid] = p;\n      AutofillService.fillByOpid(fillScript, p, login.password);\n    });\n\n    fillScript = AutofillService.setFillScriptForFocus(filledFields, fillScript);\n    return fillScript;\n  }\n\n  private generateCardFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): AutofillScript {\n    if (!options.cipher.card) {\n      return null;\n    }\n\n    const fillFields: { [id: string]: AutofillField } = {};\n\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      if (this.isExcludedType(f.type, AutoFillConstants.ExcludedAutofillTypes)) {\n        return;\n      }\n\n      for (let i = 0; i < CreditCardAutoFillConstants.CardAttributes.length; i++) {\n        const attr = CreditCardAutoFillConstants.CardAttributes[i];\n        // eslint-disable-next-line\n        if (!f.hasOwnProperty(attr) || !f[attr] || !f.viewable) {\n          continue;\n        }\n\n        // ref https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofill\n        // ref https://developers.google.com/web/fundamentals/design-and-ux/input/forms/\n        if (\n          !fillFields.cardholderName &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardHolderFieldNames,\n            CreditCardAutoFillConstants.CardHolderFieldNameValues\n          )\n        ) {\n          fillFields.cardholderName = f;\n          break;\n        } else if (\n          !fillFields.number &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardNumberFieldNames,\n            CreditCardAutoFillConstants.CardNumberFieldNameValues\n          )\n        ) {\n          fillFields.number = f;\n          break;\n        } else if (\n          !fillFields.exp &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            CreditCardAutoFillConstants.CardExpiryFieldNames,\n            CreditCardAutoFillConstants.CardExpiryFieldNameValues\n          )\n        ) {\n          fillFields.exp = f;\n          break;\n        } else if (\n          !fillFields.expMonth &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.ExpiryMonthFieldNames)\n        ) {\n          fillFields.expMonth = f;\n          break;\n        } else if (\n          !fillFields.expYear &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.ExpiryYearFieldNames)\n        ) {\n          fillFields.expYear = f;\n          break;\n        } else if (\n          !fillFields.code &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.CVVFieldNames)\n        ) {\n          fillFields.code = f;\n          break;\n        } else if (\n          !fillFields.brand &&\n          AutofillService.isFieldMatch(f[attr], CreditCardAutoFillConstants.CardBrandFieldNames)\n        ) {\n          fillFields.brand = f;\n          break;\n        }\n      }\n    });\n\n    const card = options.cipher.card;\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"cardholderName\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"number\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"code\");\n    this.makeScriptAction(fillScript, card, fillFields, filledFields, \"brand\");\n\n    if (fillFields.expMonth && AutofillService.hasValue(card.expMonth)) {\n      let expMonth: string = card.expMonth;\n\n      if (fillFields.expMonth.selectInfo && fillFields.expMonth.selectInfo.options) {\n        let index: number = null;\n        const siOptions = fillFields.expMonth.selectInfo.options;\n        if (siOptions.length === 12) {\n          index = parseInt(card.expMonth, null) - 1;\n        } else if (siOptions.length === 13) {\n          if (\n            siOptions[0][0] != null &&\n            siOptions[0][0] !== \"\" &&\n            (siOptions[12][0] == null || siOptions[12][0] === \"\")\n          ) {\n            index = parseInt(card.expMonth, null) - 1;\n          } else {\n            index = parseInt(card.expMonth, null);\n          }\n        }\n\n        if (index != null) {\n          const option = siOptions[index];\n          if (option.length > 1) {\n            expMonth = option[1];\n          }\n        }\n      } else if (\n        (this.fieldAttrsContain(fillFields.expMonth, \"mm\") ||\n          fillFields.expMonth.maxLength === 2) &&\n        expMonth.length === 1\n      ) {\n        expMonth = \"0\" + expMonth;\n      }\n\n      filledFields[fillFields.expMonth.opid] = fillFields.expMonth;\n      AutofillService.fillByOpid(fillScript, fillFields.expMonth, expMonth);\n    }\n\n    if (fillFields.expYear && AutofillService.hasValue(card.expYear)) {\n      let expYear: string = card.expYear;\n      if (fillFields.expYear.selectInfo && fillFields.expYear.selectInfo.options) {\n        for (let i = 0; i < fillFields.expYear.selectInfo.options.length; i++) {\n          const o: [string, string] = fillFields.expYear.selectInfo.options[i];\n          if (o[0] === card.expYear || o[1] === card.expYear) {\n            expYear = o[1];\n            break;\n          }\n          if (\n            o[1].length === 2 &&\n            card.expYear.length === 4 &&\n            o[1] === card.expYear.substring(2)\n          ) {\n            expYear = o[1];\n            break;\n          }\n          const colonIndex = o[1].indexOf(\":\");\n          if (colonIndex > -1 && o[1].length > colonIndex + 1) {\n            const val = o[1].substring(colonIndex + 2);\n            if (val != null && val.trim() !== \"\" && val === card.expYear) {\n              expYear = o[1];\n              break;\n            }\n          }\n        }\n      } else if (\n        this.fieldAttrsContain(fillFields.expYear, \"yyyy\") ||\n        fillFields.expYear.maxLength === 4\n      ) {\n        if (expYear.length === 2) {\n          expYear = \"20\" + expYear;\n        }\n      } else if (\n        this.fieldAttrsContain(fillFields.expYear, \"yy\") ||\n        fillFields.expYear.maxLength === 2\n      ) {\n        if (expYear.length === 4) {\n          expYear = expYear.substr(2);\n        }\n      }\n\n      filledFields[fillFields.expYear.opid] = fillFields.expYear;\n      AutofillService.fillByOpid(fillScript, fillFields.expYear, expYear);\n    }\n\n    if (\n      fillFields.exp &&\n      AutofillService.hasValue(card.expMonth) &&\n      AutofillService.hasValue(card.expYear)\n    ) {\n      const fullMonth = (\"0\" + card.expMonth).slice(-2);\n\n      let fullYear: string = card.expYear;\n      let partYear: string = null;\n      if (fullYear.length === 2) {\n        partYear = fullYear;\n        fullYear = \"20\" + fullYear;\n      } else if (fullYear.length === 4) {\n        partYear = fullYear.substr(2, 2);\n      }\n\n      let exp: string = null;\n      for (let i = 0; i < CreditCardAutoFillConstants.MonthAbbr.length; i++) {\n        if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + \"/\" + partYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + \"/\" + fullYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + \"/\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] +\n              \"/\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + \"/\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + \"-\" + partYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + \"-\" + fullYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + \"-\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] +\n              \"-\" +\n              CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + \"-\" + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrShort[i] + CreditCardAutoFillConstants.MonthAbbr[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = partYear + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.YearAbbrLong[i] + CreditCardAutoFillConstants.MonthAbbr[i]\n          )\n        ) {\n          exp = fullYear + fullMonth;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] + CreditCardAutoFillConstants.YearAbbrShort[i]\n          ) &&\n          partYear != null\n        ) {\n          exp = fullMonth + partYear;\n        } else if (\n          this.fieldAttrsContain(\n            fillFields.exp,\n            CreditCardAutoFillConstants.MonthAbbr[i] + CreditCardAutoFillConstants.YearAbbrLong[i]\n          )\n        ) {\n          exp = fullMonth + fullYear;\n        }\n\n        if (exp != null) {\n          break;\n        }\n      }\n\n      if (exp == null) {\n        exp = fullYear + \"-\" + fullMonth;\n      }\n\n      this.makeScriptActionWithValue(fillScript, exp, fillFields.exp, filledFields);\n    }\n\n    return fillScript;\n  }\n\n  /**\n   * Determines whether an iframe is potentially dangerous (\"untrusted\") to autofill\n   * @param pageUrl The url of the page/iframe, usually from AutofillPageDetails\n   * @param options The GenerateFillScript options\n   * @returns `true` if the iframe is untrusted and a warning should be shown, `false` otherwise\n   */\n  private inUntrustedIframe(pageUrl: string, options: GenerateFillScriptOptions): boolean {\n    // If the pageUrl (from the content script) matches the tabUrl (from the sender tab), we are not in an iframe\n    // This also avoids a false positive if no URI is saved and the user triggers auto-fill anyway\n    if (pageUrl === options.tabUrl) {\n      return false;\n    }\n\n    // Check the pageUrl against cipher URIs using the configured match detection.\n    // Remember: if we are in this function, the tabUrl already matches a saved URI for the login.\n    // We need to verify the pageUrl also matches.\n    const equivalentDomains = this.settingsService.getEquivalentDomains(pageUrl);\n    const matchesUri = options.cipher.login.matchesUri(\n      pageUrl,\n      equivalentDomains,\n      options.defaultUriMatch\n    );\n    return !matchesUri;\n  }\n\n  private fieldAttrsContain(field: AutofillField, containsVal: string) {\n    if (!field) {\n      return false;\n    }\n\n    let doesContain = false;\n    CreditCardAutoFillConstants.CardAttributesExtended.forEach((attr) => {\n      // eslint-disable-next-line\n      if (doesContain || !field.hasOwnProperty(attr) || !field[attr]) {\n        return;\n      }\n\n      let val = field[attr];\n      val = val.replace(/ /g, \"\").toLowerCase();\n      doesContain = val.indexOf(containsVal) > -1;\n    });\n\n    return doesContain;\n  }\n\n  private generateIdentityFillScript(\n    fillScript: AutofillScript,\n    pageDetails: AutofillPageDetails,\n    filledFields: { [id: string]: AutofillField },\n    options: GenerateFillScriptOptions\n  ): AutofillScript {\n    if (!options.cipher.identity) {\n      return null;\n    }\n\n    const fillFields: { [id: string]: AutofillField } = {};\n\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      if (this.isExcludedType(f.type, AutoFillConstants.ExcludedAutofillTypes)) {\n        return;\n      }\n\n      for (let i = 0; i < IdentityAutoFillConstants.IdentityAttributes.length; i++) {\n        const attr = IdentityAutoFillConstants.IdentityAttributes[i];\n        // eslint-disable-next-line\n        if (!f.hasOwnProperty(attr) || !f[attr] || !f.viewable) {\n          continue;\n        }\n\n        // ref https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofill\n        // ref https://developers.google.com/web/fundamentals/design-and-ux/input/forms/\n        if (\n          !fillFields.name &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            IdentityAutoFillConstants.FullNameFieldNames,\n            IdentityAutoFillConstants.FullNameFieldNameValues\n          )\n        ) {\n          fillFields.name = f;\n          break;\n        } else if (\n          !fillFields.firstName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.FirstnameFieldNames)\n        ) {\n          fillFields.firstName = f;\n          break;\n        } else if (\n          !fillFields.middleName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.MiddlenameFieldNames)\n        ) {\n          fillFields.middleName = f;\n          break;\n        } else if (\n          !fillFields.lastName &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.LastnameFieldNames)\n        ) {\n          fillFields.lastName = f;\n          break;\n        } else if (\n          !fillFields.title &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.TitleFieldNames)\n        ) {\n          fillFields.title = f;\n          break;\n        } else if (\n          !fillFields.email &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.EmailFieldNames)\n        ) {\n          fillFields.email = f;\n          break;\n        } else if (\n          !fillFields.address &&\n          AutofillService.isFieldMatch(\n            f[attr],\n            IdentityAutoFillConstants.AddressFieldNames,\n            IdentityAutoFillConstants.AddressFieldNameValues\n          )\n        ) {\n          fillFields.address = f;\n          break;\n        } else if (\n          !fillFields.address1 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address1FieldNames)\n        ) {\n          fillFields.address1 = f;\n          break;\n        } else if (\n          !fillFields.address2 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address2FieldNames)\n        ) {\n          fillFields.address2 = f;\n          break;\n        } else if (\n          !fillFields.address3 &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.Address3FieldNames)\n        ) {\n          fillFields.address3 = f;\n          break;\n        } else if (\n          !fillFields.postalCode &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.PostalCodeFieldNames)\n        ) {\n          fillFields.postalCode = f;\n          break;\n        } else if (\n          !fillFields.city &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CityFieldNames)\n        ) {\n          fillFields.city = f;\n          break;\n        } else if (\n          !fillFields.state &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.StateFieldNames)\n        ) {\n          fillFields.state = f;\n          break;\n        } else if (\n          !fillFields.country &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CountryFieldNames)\n        ) {\n          fillFields.country = f;\n          break;\n        } else if (\n          !fillFields.phone &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.PhoneFieldNames)\n        ) {\n          fillFields.phone = f;\n          break;\n        } else if (\n          !fillFields.username &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.UserNameFieldNames)\n        ) {\n          fillFields.username = f;\n          break;\n        } else if (\n          !fillFields.company &&\n          AutofillService.isFieldMatch(f[attr], IdentityAutoFillConstants.CompanyFieldNames)\n        ) {\n          fillFields.company = f;\n          break;\n        }\n      }\n    });\n\n    const identity = options.cipher.identity;\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"title\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"firstName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"middleName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"lastName\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address1\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address2\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"address3\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"city\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"postalCode\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"company\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"email\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"phone\");\n    this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"username\");\n\n    let filledState = false;\n    if (fillFields.state && identity.state && identity.state.length > 2) {\n      const stateLower = identity.state.toLowerCase();\n      const isoState =\n        IdentityAutoFillConstants.IsoStates[stateLower] ||\n        IdentityAutoFillConstants.IsoProvinces[stateLower];\n      if (isoState) {\n        filledState = true;\n        this.makeScriptActionWithValue(fillScript, isoState, fillFields.state, filledFields);\n      }\n    }\n\n    if (!filledState) {\n      this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"state\");\n    }\n\n    let filledCountry = false;\n    if (fillFields.country && identity.country && identity.country.length > 2) {\n      const countryLower = identity.country.toLowerCase();\n      const isoCountry = IdentityAutoFillConstants.IsoCountries[countryLower];\n      if (isoCountry) {\n        filledCountry = true;\n        this.makeScriptActionWithValue(fillScript, isoCountry, fillFields.country, filledFields);\n      }\n    }\n\n    if (!filledCountry) {\n      this.makeScriptAction(fillScript, identity, fillFields, filledFields, \"country\");\n    }\n\n    if (fillFields.name && (identity.firstName || identity.lastName)) {\n      let fullName = \"\";\n      if (AutofillService.hasValue(identity.firstName)) {\n        fullName = identity.firstName;\n      }\n      if (AutofillService.hasValue(identity.middleName)) {\n        if (fullName !== \"\") {\n          fullName += \" \";\n        }\n        fullName += identity.middleName;\n      }\n      if (AutofillService.hasValue(identity.lastName)) {\n        if (fullName !== \"\") {\n          fullName += \" \";\n        }\n        fullName += identity.lastName;\n      }\n\n      this.makeScriptActionWithValue(fillScript, fullName, fillFields.name, filledFields);\n    }\n\n    if (fillFields.address && AutofillService.hasValue(identity.address1)) {\n      let address = \"\";\n      if (AutofillService.hasValue(identity.address1)) {\n        address = identity.address1;\n      }\n      if (AutofillService.hasValue(identity.address2)) {\n        if (address !== \"\") {\n          address += \", \";\n        }\n        address += identity.address2;\n      }\n      if (AutofillService.hasValue(identity.address3)) {\n        if (address !== \"\") {\n          address += \", \";\n        }\n        address += identity.address3;\n      }\n\n      this.makeScriptActionWithValue(fillScript, address, fillFields.address, filledFields);\n    }\n\n    return fillScript;\n  }\n\n  private isExcludedType(type: string, excludedTypes: string[]) {\n    return excludedTypes.indexOf(type) > -1;\n  }\n\n  private static isFieldMatch(\n    value: string,\n    options: string[],\n    containsOptions?: string[]\n  ): boolean {\n    value = value\n      .trim()\n      .toLowerCase()\n      .replace(/[^a-zA-Z0-9]+/g, \"\");\n    for (let i = 0; i < options.length; i++) {\n      let option = options[i];\n      const checkValueContains = containsOptions == null || containsOptions.indexOf(option) > -1;\n      option = option.toLowerCase().replace(/-/g, \"\");\n      if (value === option || (checkValueContains && value.indexOf(option) > -1)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  private makeScriptAction(\n    fillScript: AutofillScript,\n    cipherData: any,\n    fillFields: { [id: string]: AutofillField },\n    filledFields: { [id: string]: AutofillField },\n    dataProp: string,\n    fieldProp?: string\n  ) {\n    fieldProp = fieldProp || dataProp;\n    this.makeScriptActionWithValue(\n      fillScript,\n      cipherData[dataProp],\n      fillFields[fieldProp],\n      filledFields\n    );\n  }\n\n  private makeScriptActionWithValue(\n    fillScript: AutofillScript,\n    dataValue: any,\n    field: AutofillField,\n    filledFields: { [id: string]: AutofillField }\n  ) {\n    let doFill = false;\n    if (AutofillService.hasValue(dataValue) && field) {\n      if (field.type === \"select-one\" && field.selectInfo && field.selectInfo.options) {\n        for (let i = 0; i < field.selectInfo.options.length; i++) {\n          const option = field.selectInfo.options[i];\n          for (let j = 0; j < option.length; j++) {\n            if (\n              AutofillService.hasValue(option[j]) &&\n              option[j].toLowerCase() === dataValue.toLowerCase()\n            ) {\n              doFill = true;\n              if (option.length > 1) {\n                dataValue = option[1];\n              }\n              break;\n            }\n          }\n\n          if (doFill) {\n            break;\n          }\n        }\n      } else {\n        doFill = true;\n      }\n    }\n\n    if (doFill) {\n      filledFields[field.opid] = field;\n      AutofillService.fillByOpid(fillScript, field, dataValue);\n    }\n  }\n\n  static loadPasswordFields(\n    pageDetails: AutofillPageDetails,\n    canBeHidden: boolean,\n    canBeReadOnly: boolean,\n    mustBeEmpty: boolean,\n    fillNewPassword: boolean\n  ) {\n    const arr: AutofillField[] = [];\n    pageDetails.fields.forEach((f) => {\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        return;\n      }\n\n      const isPassword = f.type === \"password\";\n      const valueIsLikePassword = (value: string) => {\n        if (value == null) {\n          return false;\n        }\n        // Removes all whitespace, _ and - characters\n        // eslint-disable-next-line\n        const cleanedValue = value.toLowerCase().replace(/[\\s_\\-]/g, \"\");\n\n        if (cleanedValue.indexOf(\"password\") < 0) {\n          return false;\n        }\n\n        if (AutoFillConstants.PasswordFieldIgnoreList.some((i) => cleanedValue.indexOf(i) > -1)) {\n          return false;\n        }\n\n        return true;\n      };\n      const isLikePassword = () => {\n        if (f.type !== \"text\") {\n          return false;\n        }\n        if (valueIsLikePassword(f.htmlID)) {\n          return true;\n        }\n        if (valueIsLikePassword(f.htmlName)) {\n          return true;\n        }\n        if (valueIsLikePassword(f.placeholder)) {\n          return true;\n        }\n        return false;\n      };\n      if (\n        !f.disabled &&\n        (canBeReadOnly || !f.readonly) &&\n        (isPassword || isLikePassword()) &&\n        (canBeHidden || f.viewable) &&\n        (!mustBeEmpty || f.value == null || f.value.trim() === \"\") &&\n        (fillNewPassword || f.autoCompleteType !== \"new-password\")\n      ) {\n        arr.push(f);\n      }\n    });\n    return arr;\n  }\n\n  private findUsernameField(\n    pageDetails: AutofillPageDetails,\n    passwordField: AutofillField,\n    canBeHidden: boolean,\n    canBeReadOnly: boolean,\n    withoutForm: boolean\n  ) {\n    let usernameField: AutofillField = null;\n    for (let i = 0; i < pageDetails.fields.length; i++) {\n      const f = pageDetails.fields[i];\n      if (AutofillService.forCustomFieldsOnly(f)) {\n        continue;\n      }\n\n      if (f.elementNumber >= passwordField.elementNumber) {\n        break;\n      }\n\n      if (\n        !f.disabled &&\n        (canBeReadOnly || !f.readonly) &&\n        (withoutForm || f.form === passwordField.form) &&\n        (canBeHidden || f.viewable) &&\n        (f.type === \"text\" || f.type === \"email\" || f.type === \"tel\")\n      ) {\n        usernameField = f;\n\n        if (this.findMatchingFieldIndex(f, AutoFillConstants.UsernameFieldNames) > -1) {\n          // We found an exact match. No need to keep looking.\n          break;\n        }\n      }\n    }\n\n    return usernameField;\n  }\n\n  private findMatchingFieldIndex(field: AutofillField, names: string[]): number {\n    for (let i = 0; i < names.length; i++) {\n      if (names[i].indexOf(\"=\") > -1) {\n        if (this.fieldPropertyIsPrefixMatch(field, \"htmlID\", names[i], \"id\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"htmlName\", names[i], \"name\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-tag\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"label-aria\", names[i], \"label\")) {\n          return i;\n        }\n        if (this.fieldPropertyIsPrefixMatch(field, \"placeholder\", names[i], \"placeholder\")) {\n          return i;\n        }\n      }\n\n      if (this.fieldPropertyIsMatch(field, \"htmlID\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"htmlName\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-tag\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"label-aria\", names[i])) {\n        return i;\n      }\n      if (this.fieldPropertyIsMatch(field, \"placeholder\", names[i])) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  private fieldPropertyIsPrefixMatch(\n    field: any,\n    property: string,\n    name: string,\n    prefix: string,\n    separator = \"=\"\n  ): boolean {\n    if (name.indexOf(prefix + separator) === 0) {\n      const sepIndex = name.indexOf(separator);\n      const val = name.substring(sepIndex + 1);\n      return val != null && this.fieldPropertyIsMatch(field, property, val);\n    }\n    return false;\n  }\n\n  private fieldPropertyIsMatch(field: any, property: string, name: string): boolean {\n    let fieldVal = field[property] as string;\n    if (!AutofillService.hasValue(fieldVal)) {\n      return false;\n    }\n\n    fieldVal = fieldVal.trim().replace(/(?:\\r\\n|\\r|\\n)/g, \"\");\n    if (name.startsWith(\"regex=\")) {\n      try {\n        const regexParts = name.split(\"=\", 2);\n        if (regexParts.length === 2) {\n          const regex = new RegExp(regexParts[1], \"i\");\n          return regex.test(fieldVal);\n        }\n      } catch (e) {\n        this.logService.error(e);\n      }\n    } else if (name.startsWith(\"csv=\")) {\n      const csvParts = name.split(\"=\", 2);\n      if (csvParts.length === 2) {\n        const csvVals = csvParts[1].split(\",\");\n        for (let i = 0; i < csvVals.length; i++) {\n          const val = csvVals[i];\n          if (val != null && val.trim().toLowerCase() === fieldVal.toLowerCase()) {\n            return true;\n          }\n        }\n        return false;\n      }\n    }\n\n    return fieldVal.toLowerCase() === name;\n  }\n\n  static fieldIsFuzzyMatch(field: AutofillField, names: string[]): boolean {\n    if (AutofillService.hasValue(field.htmlID) && this.fuzzyMatch(names, field.htmlID)) {\n      return true;\n    }\n    if (AutofillService.hasValue(field.htmlName) && this.fuzzyMatch(names, field.htmlName)) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-tag\"]) &&\n      this.fuzzyMatch(names, field[\"label-tag\"])\n    ) {\n      return true;\n    }\n    if (AutofillService.hasValue(field.placeholder) && this.fuzzyMatch(names, field.placeholder)) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-left\"]) &&\n      this.fuzzyMatch(names, field[\"label-left\"])\n    ) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-top\"]) &&\n      this.fuzzyMatch(names, field[\"label-top\"])\n    ) {\n      return true;\n    }\n    if (\n      AutofillService.hasValue(field[\"label-aria\"]) &&\n      this.fuzzyMatch(names, field[\"label-aria\"])\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private static fuzzyMatch(options: string[], value: string): boolean {\n    if (options == null || options.length === 0 || value == null || value === \"\") {\n      return false;\n    }\n\n    value = value\n      .replace(/(?:\\r\\n|\\r|\\n)/g, \"\")\n      .trim()\n      .toLowerCase();\n\n    for (let i = 0; i < options.length; i++) {\n      if (value.indexOf(options[i]) > -1) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  static hasValue(str: string): boolean {\n    return str && str !== \"\";\n  }\n\n  static setFillScriptForFocus(\n    filledFields: { [id: string]: AutofillField },\n    fillScript: AutofillScript\n  ): AutofillScript {\n    let lastField: AutofillField = null;\n    let lastPasswordField: AutofillField = null;\n\n    for (const opid in filledFields) {\n      // eslint-disable-next-line\n      if (filledFields.hasOwnProperty(opid) && filledFields[opid].viewable) {\n        lastField = filledFields[opid];\n\n        if (filledFields[opid].type === \"password\") {\n          lastPasswordField = filledFields[opid];\n        }\n      }\n    }\n\n    // Prioritize password field over others.\n    if (lastPasswordField) {\n      fillScript.script.push([\"focus_by_opid\", lastPasswordField.opid]);\n    } else if (lastField) {\n      fillScript.script.push([\"focus_by_opid\", lastField.opid]);\n    }\n\n    return fillScript;\n  }\n\n  static fillByOpid(fillScript: AutofillScript, field: AutofillField, value: string): void {\n    if (field.maxLength && value && value.length > field.maxLength) {\n      value = value.substr(0, value.length);\n    }\n    if (field.tagName !== \"span\") {\n      fillScript.script.push([\"click_on_opid\", field.opid]);\n      fillScript.script.push([\"focus_by_opid\", field.opid]);\n    }\n    fillScript.script.push([\"fill_by_opid\", field.opid, value]);\n  }\n\n  static forCustomFieldsOnly(field: AutofillField): boolean {\n    return field.tagName === \"span\";\n  }\n}\n","import { BrowserApi } from \"../../browser/browserApi\";\n\nexport const clearClipboardAlarmName = \"clearClipboard\";\n\nexport class ClearClipboard {\n  /**\n    We currently rely on an active tab with an injected content script (`../content/misc-utils.ts`) to clear the clipboard via `window.navigator.clipboard.writeText(text)`\n    \n    With https://bugs.chromium.org/p/chromium/issues/detail?id=1160302 it was said that service workers,\n    would have access to the clipboard api and then we could migrate to a simpler solution\n    */\n  static async run() {\n    const activeTabs = await BrowserApi.getActiveTabs();\n    if (!activeTabs || activeTabs.length === 0) {\n      return;\n    }\n\n    BrowserApi.sendTabsMessage(activeTabs[0].id, {\n      command: \"clearClipboard\",\n    });\n  }\n}\n","import { BrowserApi } from \"../../browser/browserApi\";\n\n/**\n * Copies text to the clipboard in a MV3 safe way.\n * @param tab - The tab that the text will be sent to so that it can be copied to the users clipboard this needs to be an active tab or the DOM won't be able to be used to do the action. The tab sent in here should be from a user started action or queried for active tabs.\n * @param text - The text that you want added to the users clipboard.\n */\nexport const copyToClipboard = async (tab: chrome.tabs.Tab, text: string) => {\n  if (tab.id == null) {\n    throw new Error(\"Cannot copy text to clipboard with a tab that does not have an id.\");\n  }\n\n  BrowserApi.sendTabsMessage(tab.id, {\n    command: \"copyText\",\n    text: text,\n  });\n};\n","import { clearClipboardAlarmName } from \"../autofill/clipboard\";\nimport { BrowserApi } from \"../browser/browserApi\";\n\nexport const alarmKeys = [clearClipboardAlarmName] as const;\nexport type AlarmKeys = (typeof alarmKeys)[number];\n\ntype AlarmState = { [T in AlarmKeys]: number | undefined };\n\nconst alarmState: AlarmState = {\n  clearClipboard: null,\n  //TODO once implemented vaultTimeout: null;\n  //TODO once implemented checkNotifications: null;\n  //TODO once implemented (if necessary) processReload: null;\n};\n\n/**\n * Retrieves the set alarm time (planned execution) for a give an commandName {@link AlarmState}\n * @param commandName A command that has been previously registered with {@link AlarmState}\n * @returns {Promise<number>} null or Unix epoch timestamp when the alarm action is supposed to execute\n * @example\n * // getAlarmTime(clearClipboard)\n */\nexport async function getAlarmTime(commandName: AlarmKeys): Promise<number> {\n  let alarmTime: number;\n  if (BrowserApi.manifestVersion == 3) {\n    const fromSessionStore = await chrome.storage.session.get(commandName);\n    alarmTime = fromSessionStore[commandName];\n  } else {\n    alarmTime = alarmState[commandName];\n  }\n\n  return alarmTime;\n}\n\n/**\n * Registers an action that should execute after the given time has passed\n * @param commandName A command that has been previously registered with {@link AlarmState}\n * @param delay_ms The number of ms from now in which the command should execute from\n * @example\n * // setAlarmTime(clearClipboard, 5000) register the clearClipboard action which will execute when at least 5 seconds from now have passed\n */\nexport async function setAlarmTime(commandName: AlarmKeys, delay_ms: number): Promise<void> {\n  if (!delay_ms || delay_ms === 0) {\n    await this.clearAlarmTime(commandName);\n    return;\n  }\n\n  const time = Date.now() + delay_ms;\n  await setAlarmTimeInternal(commandName, time);\n}\n\n/**\n * Clears the time currently set for a given command\n * @param commandName A command that has been previously registered with {@link AlarmState}\n */\nexport async function clearAlarmTime(commandName: AlarmKeys): Promise<void> {\n  await setAlarmTimeInternal(commandName, null);\n}\n\nasync function setAlarmTimeInternal(commandName: AlarmKeys, time: number): Promise<void> {\n  if (BrowserApi.manifestVersion == 3) {\n    await chrome.storage.session.set({ [commandName]: time });\n  } else {\n    alarmState[commandName] = time;\n  }\n}\n","import { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { setAlarmTime } from \"../../alarms/alarm-state\";\nimport { BrowserStateService } from \"../../services/abstractions/browser-state.service\";\n\nimport { clearClipboardAlarmName } from \"./clear-clipboard\";\nimport { copyToClipboard } from \"./copy-to-clipboard-command\";\n\nexport class GeneratePasswordToClipboardCommand {\n  constructor(\n    private passwordGenerationService: PasswordGenerationServiceAbstraction,\n    private stateService: BrowserStateService\n  ) {}\n\n  async generatePasswordToClipboard(tab: chrome.tabs.Tab) {\n    const [options] = await this.passwordGenerationService.getOptions();\n    const password = await this.passwordGenerationService.generatePassword(options);\n\n    copyToClipboard(tab, password);\n\n    const clearClipboard = await this.stateService.getClearClipboard();\n\n    if (clearClipboard != null) {\n      await setAlarmTime(clearClipboardAlarmName, clearClipboard * 1000);\n    }\n  }\n}\n","import { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport AutofillPageDetails from \"../models/autofill-page-details\";\nimport { AutofillService } from \"../services/abstractions/autofill.service\";\n\nexport class AutofillTabCommand {\n  constructor(private autofillService: AutofillService) {}\n\n  async doAutofillTabCommand(tab: chrome.tabs.Tab) {\n    if (!tab.id) {\n      throw new Error(\"Tab does not have an id, cannot complete autofill.\");\n    }\n\n    const details = await this.collectPageDetails(tab.id);\n    await this.autofillService.doAutoFillOnTab(\n      [\n        {\n          frameId: 0,\n          tab: tab,\n          details: details,\n        },\n      ],\n      tab,\n      true\n    );\n  }\n\n  async doAutofillTabWithCipherCommand(tab: chrome.tabs.Tab, cipher: CipherView) {\n    if (!tab.id) {\n      throw new Error(\"Tab does not have an id, cannot complete autofill.\");\n    }\n\n    const details = await this.collectPageDetails(tab.id);\n    await this.autofillService.doAutoFill({\n      tab: tab,\n      cipher: cipher,\n      pageDetails: [\n        {\n          frameId: 0,\n          tab: tab,\n          details: details,\n        },\n      ],\n      skipLastUsed: false,\n      skipUsernameOnlyFill: false,\n      onlyEmptyFields: false,\n      onlyVisibleFields: false,\n      fillNewPassword: true,\n    });\n  }\n\n  private async collectPageDetails(tabId: number): Promise<AutofillPageDetails> {\n    return new Promise((resolve, reject) => {\n      chrome.tabs.sendMessage(\n        tabId,\n        {\n          command: \"collectPageDetailsImmediately\",\n        },\n        (response: AutofillPageDetails) => {\n          if (chrome.runtime.lastError) {\n            reject(chrome.runtime.lastError);\n            return;\n          }\n\n          resolve(response);\n        }\n      );\n    });\n  }\n}\n","import { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { EventType } from \"@bitwarden/common/enums\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherRepromptType } from \"@bitwarden/common/vault/enums/cipher-reprompt-type\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\n\nimport {\n  authServiceFactory,\n  AuthServiceInitOptions,\n} from \"../../auth/background/service-factories/auth-service.factory\";\nimport { totpServiceFactory } from \"../../auth/background/service-factories/totp-service.factory\";\nimport LockedVaultPendingNotificationsItem from \"../../background/models/lockedVaultPendingNotificationsItem\";\nimport { eventCollectionServiceFactory } from \"../../background/service_factories/event-collection-service.factory\";\nimport { CachedServices } from \"../../background/service_factories/factory-options\";\nimport { passwordGenerationServiceFactory } from \"../../background/service_factories/password-generation-service.factory\";\nimport { stateServiceFactory } from \"../../background/service_factories/state-service.factory\";\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { Account } from \"../../models/account\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../vault/background/service_factories/cipher-service.factory\";\nimport { autofillServiceFactory } from \"../background/service_factories/autofill-service.factory\";\nimport { copyToClipboard, GeneratePasswordToClipboardCommand } from \"../clipboard\";\nimport { AutofillTabCommand } from \"../commands/autofill-tab-command\";\n\nimport {\n  AUTOFILL_ID,\n  COPY_IDENTIFIER_ID,\n  COPY_PASSWORD_ID,\n  COPY_USERNAME_ID,\n  COPY_VERIFICATIONCODE_ID,\n  GENERATE_PASSWORD_ID,\n  NOOP_COMMAND_SUFFIX,\n} from \"./main-context-menu-handler\";\n\nexport type CopyToClipboardOptions = { text: string; tab: chrome.tabs.Tab };\nexport type CopyToClipboardAction = (options: CopyToClipboardOptions) => void;\nexport type AutofillAction = (tab: chrome.tabs.Tab, cipher: CipherView) => Promise<void>;\n\nexport type GeneratePasswordToClipboardAction = (tab: chrome.tabs.Tab) => Promise<void>;\n\nconst NOT_IMPLEMENTED = (..._args: unknown[]) =>\n  Promise.reject<never>(\"This action is not implemented inside of a service worker context.\");\n\nexport class ContextMenuClickedHandler {\n  constructor(\n    private copyToClipboard: CopyToClipboardAction,\n    private generatePasswordToClipboard: GeneratePasswordToClipboardAction,\n    private autofillAction: AutofillAction,\n    private authService: AuthService,\n    private cipherService: CipherService,\n    private totpService: TotpService,\n    private eventCollectionService: EventCollectionService\n  ) {}\n\n  static async mv3Create(cachedServices: CachedServices) {\n    const stateFactory = new StateFactory(GlobalState, Account);\n    const serviceOptions: AuthServiceInitOptions & CipherServiceInitOptions = {\n      apiServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      cryptoFunctionServiceOptions: {\n        win: self,\n      },\n      encryptServiceOptions: {\n        logMacFailures: false,\n      },\n      i18nServiceOptions: {\n        systemLanguage: chrome.i18n.getUILanguage(),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: NOT_IMPLEMENTED,\n      },\n      logServiceOptions: {\n        isDev: false,\n      },\n      platformUtilsServiceOptions: {\n        biometricCallback: NOT_IMPLEMENTED,\n        clipboardWriteCallback: NOT_IMPLEMENTED,\n        win: self,\n      },\n      stateMigrationServiceOptions: {\n        stateFactory: stateFactory,\n      },\n      stateServiceOptions: {\n        stateFactory: stateFactory,\n      },\n    };\n\n    const generatePasswordToClipboardCommand = new GeneratePasswordToClipboardCommand(\n      await passwordGenerationServiceFactory(cachedServices, serviceOptions),\n      await stateServiceFactory(cachedServices, serviceOptions)\n    );\n\n    const autofillCommand = new AutofillTabCommand(\n      await autofillServiceFactory(cachedServices, serviceOptions)\n    );\n\n    return new ContextMenuClickedHandler(\n      (options) => copyToClipboard(options.tab, options.text),\n      (tab) => generatePasswordToClipboardCommand.generatePasswordToClipboard(tab),\n      (tab, cipher) => autofillCommand.doAutofillTabWithCipherCommand(tab, cipher),\n      await authServiceFactory(cachedServices, serviceOptions),\n      await cipherServiceFactory(cachedServices, serviceOptions),\n      await totpServiceFactory(cachedServices, serviceOptions),\n      await eventCollectionServiceFactory(cachedServices, serviceOptions)\n    );\n  }\n\n  static async onClickedListener(\n    info: chrome.contextMenus.OnClickData,\n    tab?: chrome.tabs.Tab,\n    cachedServices: CachedServices = {}\n  ) {\n    const contextMenuClickedHandler = await ContextMenuClickedHandler.mv3Create(cachedServices);\n    await contextMenuClickedHandler.run(info, tab);\n  }\n\n  static async messageListener(\n    message: { command: string; data: LockedVaultPendingNotificationsItem },\n    sender: chrome.runtime.MessageSender,\n    cachedServices: CachedServices\n  ) {\n    if (\n      message.command !== \"unlockCompleted\" ||\n      message.data.target !== \"contextmenus.background\"\n    ) {\n      return;\n    }\n\n    const contextMenuClickedHandler = await ContextMenuClickedHandler.mv3Create(cachedServices);\n    await contextMenuClickedHandler.run(\n      message.data.commandToRetry.msg.data,\n      message.data.commandToRetry.sender.tab\n    );\n  }\n\n  async run(info: chrome.contextMenus.OnClickData, tab?: chrome.tabs.Tab) {\n    switch (info.menuItemId) {\n      case GENERATE_PASSWORD_ID:\n        if (!tab) {\n          return;\n        }\n        await this.generatePasswordToClipboard(tab);\n        break;\n      case COPY_IDENTIFIER_ID:\n        if (!tab) {\n          return;\n        }\n        this.copyToClipboard({ text: await this.getIdentifier(tab, info), tab: tab });\n        break;\n      default:\n        await this.cipherAction(info, tab);\n    }\n  }\n\n  async cipherAction(info: chrome.contextMenus.OnClickData, tab?: chrome.tabs.Tab) {\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      const retryMessage: LockedVaultPendingNotificationsItem = {\n        commandToRetry: {\n          msg: { command: NOOP_COMMAND_SUFFIX, data: info },\n          sender: { tab: tab },\n        },\n        target: \"contextmenus.background\",\n      };\n      await BrowserApi.tabSendMessageData(\n        tab,\n        \"addToLockedVaultPendingNotifications\",\n        retryMessage\n      );\n\n      await BrowserApi.tabSendMessageData(tab, \"promptForLogin\");\n      return;\n    }\n\n    // NOTE: We don't actually use the first part of this ID, we further switch based on the parentMenuItemId\n    // I would really love to not add it but that is a departure from how it currently works.\n    const id = (info.menuItemId as string).split(\"_\")[1]; // We create all the ids, we can guarantee they are strings\n    let cipher: CipherView | undefined;\n    if (id === NOOP_COMMAND_SUFFIX) {\n      // This NOOP item has come through which is generally only for no access state but since we got here\n      // we are actually unlocked we will do our best to find a good match of an item to autofill this is useful\n      // in scenarios like unlock on autofill\n      const ciphers = await this.cipherService.getAllDecryptedForUrl(tab.url);\n      cipher = ciphers.find((c) => c.reprompt === CipherRepromptType.None);\n    } else {\n      const ciphers = await this.cipherService.getAllDecrypted();\n      cipher = ciphers.find((c) => c.id === id);\n    }\n\n    if (cipher == null) {\n      return;\n    }\n\n    switch (info.parentMenuItemId) {\n      case AUTOFILL_ID:\n        if (tab == null) {\n          return;\n        }\n        await this.autofillAction(tab, cipher);\n        break;\n      case COPY_USERNAME_ID:\n        this.copyToClipboard({ text: cipher.login.username, tab: tab });\n        break;\n      case COPY_PASSWORD_ID:\n        this.copyToClipboard({ text: cipher.login.password, tab: tab });\n        this.eventCollectionService.collect(EventType.Cipher_ClientCopiedPassword, cipher.id);\n        break;\n      case COPY_VERIFICATIONCODE_ID:\n        this.copyToClipboard({ text: await this.totpService.getCode(cipher.login.totp), tab: tab });\n        break;\n    }\n  }\n\n  private async getIdentifier(tab: chrome.tabs.Tab, info: chrome.contextMenus.OnClickData) {\n    return new Promise<string>((resolve, reject) => {\n      BrowserApi.sendTabsMessage(\n        tab.id,\n        { command: \"getClickedElement\" },\n        { frameId: info.frameId },\n        (identifier: string) => {\n          if (chrome.runtime.lastError) {\n            reject(chrome.runtime.lastError);\n            return;\n          }\n\n          resolve(identifier);\n        }\n      );\n    });\n  }\n}\n","import {\n  TotpServiceInitOptions,\n  totpServiceFactory,\n} from \"../../../auth/background/service-factories/totp-service.factory\";\nimport {\n  EventCollectionServiceInitOptions,\n  eventCollectionServiceFactory,\n} from \"../../../background/service_factories/event-collection-service.factory\";\nimport {\n  CachedServices,\n  factory,\n  FactoryOptions,\n} from \"../../../background/service_factories/factory-options\";\nimport {\n  logServiceFactory,\n  LogServiceInitOptions,\n} from \"../../../background/service_factories/log-service.factory\";\nimport {\n  settingsServiceFactory,\n  SettingsServiceInitOptions,\n} from \"../../../background/service_factories/settings-service.factory\";\nimport {\n  stateServiceFactory,\n  StateServiceInitOptions,\n} from \"../../../background/service_factories/state-service.factory\";\nimport {\n  cipherServiceFactory,\n  CipherServiceInitOptions,\n} from \"../../../vault/background/service_factories/cipher-service.factory\";\nimport { AutofillService as AbstractAutoFillService } from \"../../services/abstractions/autofill.service\";\nimport AutofillService from \"../../services/autofill.service\";\n\ntype AutoFillServiceOptions = FactoryOptions;\n\nexport type AutoFillServiceInitOptions = AutoFillServiceOptions &\n  CipherServiceInitOptions &\n  StateServiceInitOptions &\n  TotpServiceInitOptions &\n  EventCollectionServiceInitOptions &\n  LogServiceInitOptions &\n  SettingsServiceInitOptions;\n\nexport function autofillServiceFactory(\n  cache: { autofillService?: AbstractAutoFillService } & CachedServices,\n  opts: AutoFillServiceInitOptions\n): Promise<AbstractAutoFillService> {\n  return factory(\n    cache,\n    \"autofillService\",\n    opts,\n    async () =>\n      new AutofillService(\n        await cipherServiceFactory(cache, opts),\n        await stateServiceFactory(cache, opts),\n        await totpServiceFactory(cache, opts),\n        await eventCollectionServiceFactory(cache, opts),\n        await logServiceFactory(cache, opts),\n        await settingsServiceFactory(cache, opts)\n      )\n  );\n}\n","import { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { EncryptService } from \"@bitwarden/common/abstractions/encrypt.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { ContainerService } from \"@bitwarden/common/services/container.service\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\nimport { authServiceFactory } from \"../auth/background/service-factories/auth-service.factory\";\nimport { stateServiceFactory } from \"../background/service_factories/state-service.factory\";\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { Account } from \"../models/account\";\nimport { BrowserStateService } from \"../services/abstractions/browser-state.service\";\nimport BrowserPlatformUtilsService from \"../services/browserPlatformUtils.service\";\nimport IconDetails from \"../vault/background/models/icon-details\";\nimport { cipherServiceFactory } from \"../vault/background/service_factories/cipher-service.factory\";\n\nexport type BadgeOptions = {\n  tab?: chrome.tabs.Tab;\n  windowId?: number;\n};\n\nexport class UpdateBadge {\n  private authService: AuthService;\n  private stateService: BrowserStateService;\n  private cipherService: CipherService;\n  private badgeAction: typeof chrome.action;\n  private sidebarAction: OperaSidebarAction | FirefoxSidebarAction;\n  private inited = false;\n  private win: Window & typeof globalThis;\n\n  private static readonly listenedToCommands = [\n    \"updateBadge\",\n    \"loggedIn\",\n    \"unlocked\",\n    \"syncCompleted\",\n    \"bgUpdateContextMenu\",\n    \"editedCipher\",\n    \"addedCipher\",\n    \"deletedCipher\",\n  ];\n\n  static async tabsOnActivatedListener(\n    activeInfo: chrome.tabs.TabActiveInfo,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({\n      tabId: activeInfo.tabId,\n      existingServices: serviceCache,\n      windowId: activeInfo.windowId,\n    });\n  }\n\n  static async tabsOnReplacedListener(\n    addedTabId: number,\n    removedTabId: number,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({ tabId: addedTabId, existingServices: serviceCache });\n  }\n\n  static async tabsOnUpdatedListener(\n    tabId: number,\n    changeInfo: chrome.tabs.TabChangeInfo,\n    tab: chrome.tabs.Tab,\n    serviceCache: Record<string, unknown>\n  ) {\n    await new UpdateBadge(self).run({\n      tabId,\n      existingServices: serviceCache,\n      windowId: tab.windowId,\n    });\n  }\n\n  static async messageListener(\n    message: { command: string; tabId: number },\n    serviceCache: Record<string, unknown>\n  ) {\n    if (!UpdateBadge.listenedToCommands.includes(message.command)) {\n      return;\n    }\n\n    await new UpdateBadge(self).run({ existingServices: serviceCache });\n  }\n\n  constructor(win: Window & typeof globalThis) {\n    this.badgeAction = BrowserApi.getBrowserAction();\n    this.sidebarAction = BrowserApi.getSidebarAction(self);\n    this.win = win;\n  }\n\n  async run(opts?: {\n    tabId?: number;\n    windowId?: number;\n    existingServices?: Record<string, unknown>;\n  }): Promise<void> {\n    await this.initServices(opts?.existingServices);\n\n    const authStatus = await this.authService.getAuthStatus();\n\n    await this.setBadgeBackgroundColor();\n\n    switch (authStatus) {\n      case AuthenticationStatus.LoggedOut: {\n        await this.setLoggedOut();\n        break;\n      }\n      case AuthenticationStatus.Locked: {\n        await this.setLocked();\n        break;\n      }\n      case AuthenticationStatus.Unlocked: {\n        const tab = await this.getTab(opts?.tabId, opts?.windowId);\n        await this.setUnlocked({ tab, windowId: tab?.windowId });\n        break;\n      }\n    }\n  }\n\n  async setLoggedOut(): Promise<void> {\n    await this.setBadgeIcon(\"_gray\");\n    await this.clearBadgeText();\n  }\n\n  async setLocked() {\n    await this.setBadgeIcon(\"_locked\");\n    await this.clearBadgeText();\n  }\n\n  private async clearBadgeText() {\n    const tabs = await BrowserApi.getActiveTabs();\n    if (tabs != null) {\n      tabs.forEach(async (tab) => {\n        if (tab.id != null) {\n          await this.setBadgeText(\"\", tab.id);\n        }\n      });\n    }\n  }\n\n  async setUnlocked(opts: BadgeOptions) {\n    await this.initServices();\n\n    await this.setBadgeIcon(\"\");\n\n    const disableBadgeCounter = await this.stateService.getDisableBadgeCounter();\n    if (disableBadgeCounter) {\n      return;\n    }\n\n    const ciphers = await this.cipherService.getAllDecryptedForUrl(opts?.tab?.url);\n    let countText = ciphers.length == 0 ? \"\" : ciphers.length.toString();\n    if (ciphers.length > 9) {\n      countText = \"9+\";\n    }\n    await this.setBadgeText(countText, opts?.tab?.id);\n  }\n\n  setBadgeBackgroundColor(color = \"#294e5f\") {\n    if (this.badgeAction?.setBadgeBackgroundColor) {\n      this.badgeAction.setBadgeBackgroundColor({ color });\n    }\n    if (this.isOperaSidebar(this.sidebarAction)) {\n      this.sidebarAction.setBadgeBackgroundColor({ color });\n    }\n  }\n\n  setBadgeText(text: string, tabId?: number) {\n    this.setActionText(text, tabId);\n    this.setSideBarText(text, tabId);\n  }\n\n  async setBadgeIcon(iconSuffix: string, windowId?: number) {\n    const options: IconDetails = {\n      path: {\n        19: \"/images/icon19\" + iconSuffix + \".png\",\n        38: \"/images/icon38\" + iconSuffix + \".png\",\n      },\n    };\n    if (windowId && BrowserPlatformUtilsService.isFirefox()) {\n      options.windowId = windowId;\n    }\n\n    await this.setActionIcon(options);\n    await this.setSidebarActionIcon(options);\n  }\n\n  private setActionText(text: string, tabId?: number) {\n    if (this.badgeAction?.setBadgeText) {\n      this.badgeAction.setBadgeText({ text, tabId });\n    }\n  }\n\n  private setSideBarText(text: string, tabId?: number) {\n    if (this.isOperaSidebar(this.sidebarAction)) {\n      this.sidebarAction.setBadgeText({ text, tabId });\n    } else if (this.sidebarAction) {\n      // Firefox\n      const title = `Bitwarden${Utils.isNullOrEmpty(text) ? \"\" : ` [${text}]`}`;\n      this.sidebarAction.setTitle({ title, tabId });\n    }\n  }\n\n  private async setActionIcon(options: IconDetails) {\n    if (!this.badgeAction?.setIcon) {\n      return;\n    }\n\n    if (this.useSyncApiCalls) {\n      this.badgeAction.setIcon(options);\n    } else {\n      await new Promise<void>((resolve) => this.badgeAction.setIcon(options, () => resolve()));\n    }\n  }\n\n  private async setSidebarActionIcon(options: IconDetails) {\n    if (!this.sidebarAction?.setIcon) {\n      return;\n    }\n\n    if (this.useSyncApiCalls) {\n      this.sidebarAction.setIcon(options);\n    } else {\n      await new Promise<void>((resolve) => this.sidebarAction.setIcon(options, () => resolve()));\n    }\n  }\n\n  private async getTab(tabId?: number, windowId?: number) {\n    return (\n      (await BrowserApi.getTab(tabId)) ??\n      (windowId\n        ? await BrowserApi.tabsQueryFirst({ active: true, windowId })\n        : await BrowserApi.tabsQueryFirst({ active: true, currentWindow: true })) ??\n      (await BrowserApi.tabsQueryFirst({ active: true, lastFocusedWindow: true })) ??\n      (await BrowserApi.tabsQueryFirst({ active: true }))\n    );\n  }\n\n  private get useSyncApiCalls() {\n    return (\n      BrowserPlatformUtilsService.isFirefox() || BrowserPlatformUtilsService.isSafari(this.win)\n    );\n  }\n\n  private async initServices(existingServiceCache?: Record<string, unknown>): Promise<UpdateBadge> {\n    if (this.inited) {\n      return this;\n    }\n\n    const serviceCache: Record<string, unknown> = existingServiceCache || {};\n    const opts = {\n      cryptoFunctionServiceOptions: { win: self },\n      encryptServiceOptions: { logMacFailures: false },\n      logServiceOptions: { isDev: false },\n      platformUtilsServiceOptions: {\n        clipboardWriteCallback: (clipboardValue: string, clearMs: number) =>\n          Promise.reject(\"not implemented\"),\n        biometricCallback: () => Promise.reject(\"not implemented\"),\n        win: self,\n      },\n      stateServiceOptions: {\n        stateFactory: new StateFactory(GlobalState, Account),\n      },\n      stateMigrationServiceOptions: {\n        stateFactory: new StateFactory(GlobalState, Account),\n      },\n      apiServiceOptions: {\n        logoutCallback: () => Promise.reject(\"not implemented\"),\n      },\n      keyConnectorServiceOptions: {\n        logoutCallback: () => Promise.reject(\"not implemented\"),\n      },\n      i18nServiceOptions: {\n        systemLanguage: BrowserApi.getUILanguage(self),\n      },\n    };\n    this.stateService = await stateServiceFactory(serviceCache, opts);\n    this.authService = await authServiceFactory(serviceCache, opts);\n    this.cipherService = await cipherServiceFactory(serviceCache, opts);\n\n    // Needed for cipher decryption\n    if (!self.bitwardenContainerService) {\n      new ContainerService(\n        serviceCache.cryptoService as CryptoService,\n        serviceCache.encryptService as EncryptService\n      ).attachToGlobal(self);\n    }\n\n    this.inited = true;\n\n    return this;\n  }\n\n  private isOperaSidebar(\n    action: OperaSidebarAction | FirefoxSidebarAction\n  ): action is OperaSidebarAction {\n    return action != null && (action as OperaSidebarAction).setBadgeText != null;\n  }\n}\n","import { ReplaySubject } from \"rxjs\";\n\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\nimport I18nService from \"./i18n.service\";\n\n@browserSession\nexport class BrowserI18nService extends I18nService {\n  @sessionSync({ initializer: (s: string) => s })\n  protected _locale: ReplaySubject<string>;\n\n  constructor(systemLanguage: string, private stateService: StateService) {\n    super(systemLanguage);\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Send } from \"@bitwarden/common/tools/send/models/domain/send\";\nimport { SendView } from \"@bitwarden/common/tools/send/models/view/send.view\";\nimport { SendService } from \"@bitwarden/common/tools/send/services/send.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserSendService extends SendService {\n  @sessionSync({ initializer: Send.fromJSON, initializeAs: \"array\" })\n  protected _sends: BehaviorSubject<Send[]>;\n  @sessionSync({ initializer: SendView.fromJSON, initializeAs: \"array\" })\n  protected _sendViews: BehaviorSubject<SendView[]>;\n}\n","import { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\n\nexport default class BrowserMessagingPrivateModeBackgroundService implements MessagingService {\n  send(subscriber: string, arg: any = {}) {\n    const message = Object.assign({}, { command: subscriber }, arg);\n    (window as any).bitwardenPopupMainMessageListener(message);\n  }\n}\n","import { VaultTimeoutService as BaseVaultTimeoutService } from \"@bitwarden/common/services/vaultTimeout/vaultTimeout.service\";\n\nimport { SafariApp } from \"../../browser/safariApp\";\n\nexport default class VaultTimeoutService extends BaseVaultTimeoutService {\n  startCheck() {\n    this.checkVaultTimeout();\n    if (this.platformUtilsService.isSafari()) {\n      this.checkSafari();\n    } else {\n      setInterval(() => this.checkVaultTimeout(), 10 * 1000); // check every 10 seconds\n    }\n  }\n\n  // This is a work-around to safari adding an arbitary delay to setTimeout and\n  //  setIntervals. It works by calling the native extension which sleeps for 10s,\n  //  efficiently replicating setInterval.\n  async checkSafari() {\n    // eslint-disable-next-line\n    while (true) {\n      try {\n        await SafariApp.sendMessageToApp(\"sleep\");\n        this.checkVaultTimeout();\n      } catch (e) {\n        // eslint-disable-next-line\n        console.log(\"Exception Safari VaultTimeout\", e);\n      }\n    }\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { Folder } from \"@bitwarden/common/vault/models/domain/folder\";\nimport { FolderView } from \"@bitwarden/common/vault/models/view/folder.view\";\nimport { FolderService as BaseFolderService } from \"@bitwarden/common/vault/services/folder/folder.service\";\n\nimport { browserSession, sessionSync } from \"../../decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserFolderService extends BaseFolderService {\n  @sessionSync({ initializer: Folder.fromJSON, initializeAs: \"array\" })\n  protected _folders: BehaviorSubject<Folder[]>;\n  @sessionSync({ initializer: FolderView.fromJSON, initializeAs: \"array\" })\n  protected _folderViews: BehaviorSubject<FolderView[]>;\n}\n","import { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\n\nimport MainBackground from \"./main.background\";\nimport LockedVaultPendingNotificationsItem from \"./models/lockedVaultPendingNotificationsItem\";\n\nexport default class CommandsBackground {\n  private isSafari: boolean;\n  private isVivaldi: boolean;\n\n  constructor(\n    private main: MainBackground,\n    private passwordGenerationService: PasswordGenerationServiceAbstraction,\n    private platformUtilsService: PlatformUtilsService,\n    private vaultTimeoutService: VaultTimeoutService,\n    private authService: AuthService\n  ) {\n    this.isSafari = this.platformUtilsService.isSafari();\n    this.isVivaldi = this.platformUtilsService.isVivaldi();\n  }\n\n  async init() {\n    BrowserApi.messageListener(\n      \"commands.background\",\n      async (msg: any, sender: chrome.runtime.MessageSender, sendResponse: any) => {\n        if (msg.command === \"unlockCompleted\" && msg.data.target === \"commands.background\") {\n          await this.processCommand(\n            msg.data.commandToRetry.msg.command,\n            msg.data.commandToRetry.sender\n          );\n        }\n      }\n    );\n\n    if (chrome && chrome.commands) {\n      chrome.commands.onCommand.addListener(async (command: string) => {\n        await this.processCommand(command);\n      });\n    }\n  }\n\n  private async processCommand(command: string, sender?: chrome.runtime.MessageSender) {\n    switch (command) {\n      case \"generate_password\":\n        await this.generatePasswordToClipboard();\n        break;\n      case \"autofill_login\":\n        await this.autoFillLogin(sender ? sender.tab : null);\n        break;\n      case \"open_popup\":\n        await this.openPopup();\n        break;\n      case \"lock_vault\":\n        await this.vaultTimeoutService.lock();\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async generatePasswordToClipboard() {\n    const options = (await this.passwordGenerationService.getOptions())?.[0] ?? {};\n    const password = await this.passwordGenerationService.generatePassword(options);\n    this.platformUtilsService.copyToClipboard(password, { window: window });\n    this.passwordGenerationService.addHistory(password);\n  }\n\n  private async autoFillLogin(tab?: chrome.tabs.Tab) {\n    if (!tab) {\n      tab = await BrowserApi.getTabFromCurrentWindowId();\n    }\n\n    if (tab == null) {\n      return;\n    }\n\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      const retryMessage: LockedVaultPendingNotificationsItem = {\n        commandToRetry: {\n          msg: { command: \"autofill_login\" },\n          sender: { tab: tab },\n        },\n        target: \"commands.background\",\n      };\n      await BrowserApi.tabSendMessageData(\n        tab,\n        \"addToLockedVaultPendingNotifications\",\n        retryMessage\n      );\n\n      BrowserApi.tabSendMessageData(tab, \"promptForLogin\");\n      return;\n    }\n\n    await this.main.collectPageDetailsForContentScript(tab, \"autofill_cmd\");\n  }\n\n  private async openPopup() {\n    // Chrome APIs cannot open popup\n    if (!this.isSafari) {\n      return;\n    }\n\n    this.main.openPopup();\n  }\n}\n","import { NotificationsService } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutAction } from \"@bitwarden/common/enums/vault-timeout-action.enum\";\n\nimport { BrowserStateService } from \"../services/abstractions/browser-state.service\";\n\nconst IdleInterval = 60 * 5; // 5 minutes\n\nexport default class IdleBackground {\n  private idle: any;\n  private idleTimer: number = null;\n  private idleState = \"active\";\n\n  constructor(\n    private vaultTimeoutService: VaultTimeoutService,\n    private stateService: BrowserStateService,\n    private notificationsService: NotificationsService\n  ) {\n    this.idle = chrome.idle || (browser != null ? browser.idle : null);\n  }\n\n  async init() {\n    if (!this.idle) {\n      return;\n    }\n\n    const idleHandler = (newState: string) => {\n      if (newState === \"active\") {\n        this.notificationsService.reconnectFromActivity();\n      } else {\n        this.notificationsService.disconnectFromInactivity();\n      }\n    };\n    if (this.idle.onStateChanged && this.idle.setDetectionInterval) {\n      this.idle.setDetectionInterval(IdleInterval);\n      this.idle.onStateChanged.addListener(idleHandler);\n    } else {\n      this.pollIdle(idleHandler);\n    }\n\n    if (this.idle.onStateChanged) {\n      this.idle.onStateChanged.addListener(async (newState: string) => {\n        if (newState === \"locked\") {\n          // If the screen is locked or the screensaver activates\n          const timeout = await this.stateService.getVaultTimeout();\n          if (timeout === -2) {\n            // On System Lock vault timeout option\n            const action = await this.stateService.getVaultTimeoutAction();\n            if (action === VaultTimeoutAction.LogOut) {\n              await this.vaultTimeoutService.logOut();\n            } else {\n              await this.vaultTimeoutService.lock();\n            }\n          }\n        }\n      });\n    }\n  }\n\n  private pollIdle(handler: (newState: string) => void) {\n    if (this.idleTimer != null) {\n      window.clearTimeout(this.idleTimer);\n      this.idleTimer = null;\n    }\n    this.idle.queryState(IdleInterval, (state: string) => {\n      if (state !== this.idleState) {\n        this.idleState = state;\n        handler(state);\n      }\n      this.idleTimer = window.setTimeout(() => this.pollIdle(handler), 5000);\n    });\n  }\n}\n","import { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { StateService } from \"@bitwarden/common/abstractions/state.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\nimport { EncString } from \"@bitwarden/common/models/domain/enc-string\";\nimport { SymmetricCryptoKey } from \"@bitwarden/common/models/domain/symmetric-crypto-key\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\n\nimport RuntimeBackground from \"./runtime.background\";\n\nconst MessageValidTimeout = 10 * 1000;\nconst EncryptionAlgorithm = \"sha1\";\n\ntype Message = {\n  command: string;\n\n  // Filled in by this service\n  userId?: string;\n  timestamp?: number;\n\n  // Used for sharing secret\n  publicKey?: string;\n};\n\ntype OuterMessage = {\n  message: Message | EncString;\n  appId: string;\n};\n\ntype ReceiveMessage = {\n  timestamp: number;\n  command: string;\n  response?: any;\n\n  // Unlock key\n  keyB64?: string;\n};\n\ntype ReceiveMessageOuter = {\n  command: string;\n  appId: string;\n\n  // Should only have one of these.\n  message?: EncString;\n  sharedSecret?: string;\n};\n\nexport class NativeMessagingBackground {\n  private connected = false;\n  private connecting: boolean;\n  private port: browser.runtime.Port | chrome.runtime.Port;\n\n  private resolver: any = null;\n  private privateKey: ArrayBuffer = null;\n  private publicKey: ArrayBuffer = null;\n  private secureSetupResolve: any = null;\n  private sharedSecret: SymmetricCryptoKey;\n  private appId: string;\n  private validatingFingerprint: boolean;\n\n  constructor(\n    private cryptoService: CryptoService,\n    private cryptoFunctionService: CryptoFunctionService,\n    private runtimeBackground: RuntimeBackground,\n    private i18nService: I18nService,\n    private messagingService: MessagingService,\n    private appIdService: AppIdService,\n    private platformUtilsService: PlatformUtilsService,\n    private stateService: StateService,\n    private logService: LogService,\n    private authService: AuthService\n  ) {\n    this.stateService.setBiometricFingerprintValidated(false);\n\n    if (chrome?.permissions?.onAdded) {\n      // Reload extension to activate nativeMessaging\n      chrome.permissions.onAdded.addListener((permissions) => {\n        BrowserApi.reloadExtension(null);\n      });\n    }\n  }\n\n  async connect() {\n    this.appId = await this.appIdService.getAppId();\n    this.stateService.setBiometricFingerprintValidated(false);\n\n    return new Promise<void>((resolve, reject) => {\n      this.port = BrowserApi.connectNative(\"com.8bit.bitwarden\");\n\n      this.connecting = true;\n\n      const connectedCallback = () => {\n        this.connected = true;\n        this.connecting = false;\n        resolve();\n      };\n\n      // Safari has a bundled native component which is always available, no need to\n      // check if the desktop app is running.\n      if (this.platformUtilsService.isSafari()) {\n        connectedCallback();\n      }\n\n      this.port.onMessage.addListener(async (message: ReceiveMessageOuter) => {\n        switch (message.command) {\n          case \"connected\":\n            connectedCallback();\n            break;\n          case \"disconnected\":\n            if (this.connecting) {\n              reject(\"startDesktop\");\n            }\n            this.connected = false;\n            this.port.disconnect();\n            break;\n          case \"setupEncryption\": {\n            // Ignore since it belongs to another device\n            if (message.appId !== this.appId) {\n              return;\n            }\n\n            const encrypted = Utils.fromB64ToArray(message.sharedSecret);\n            const decrypted = await this.cryptoFunctionService.rsaDecrypt(\n              encrypted.buffer,\n              this.privateKey,\n              EncryptionAlgorithm\n            );\n\n            if (this.validatingFingerprint) {\n              this.validatingFingerprint = false;\n              this.stateService.setBiometricFingerprintValidated(true);\n            }\n            this.sharedSecret = new SymmetricCryptoKey(decrypted);\n            this.secureSetupResolve();\n            break;\n          }\n          case \"invalidateEncryption\":\n            // Ignore since it belongs to another device\n            if (message.appId !== this.appId) {\n              return;\n            }\n\n            this.sharedSecret = null;\n            this.privateKey = null;\n            this.connected = false;\n\n            this.messagingService.send(\"showDialog\", {\n              text: this.i18nService.t(\"nativeMessagingInvalidEncryptionDesc\"),\n              title: this.i18nService.t(\"nativeMessagingInvalidEncryptionTitle\"),\n              confirmText: this.i18nService.t(\"ok\"),\n              type: \"error\",\n            });\n            break;\n          case \"verifyFingerprint\": {\n            if (this.sharedSecret == null) {\n              this.validatingFingerprint = true;\n              this.showFingerprintDialog();\n            }\n            break;\n          }\n          case \"wrongUserId\":\n            this.showWrongUserDialog();\n            break;\n          default:\n            // Ignore since it belongs to another device\n            if (!this.platformUtilsService.isSafari() && message.appId !== this.appId) {\n              return;\n            }\n\n            this.onMessage(message.message);\n        }\n      });\n\n      this.port.onDisconnect.addListener((p: any) => {\n        let error;\n        if (BrowserApi.isWebExtensionsApi) {\n          error = p.error.message;\n        } else {\n          error = chrome.runtime.lastError.message;\n        }\n\n        this.sharedSecret = null;\n        this.privateKey = null;\n        this.connected = false;\n\n        const reason = error != null ? \"desktopIntegrationDisabled\" : null;\n        reject(reason);\n      });\n    });\n  }\n\n  showWrongUserDialog() {\n    this.messagingService.send(\"showDialog\", {\n      text: this.i18nService.t(\"nativeMessagingWrongUserDesc\"),\n      title: this.i18nService.t(\"nativeMessagingWrongUserTitle\"),\n      confirmText: this.i18nService.t(\"ok\"),\n      type: \"error\",\n    });\n  }\n\n  async send(message: Message) {\n    if (!this.connected) {\n      await this.connect();\n    }\n\n    message.userId = await this.stateService.getUserId();\n    message.timestamp = Date.now();\n\n    if (this.platformUtilsService.isSafari()) {\n      this.postMessage(message as any);\n    } else {\n      this.postMessage({ appId: this.appId, message: await this.encryptMessage(message) });\n    }\n  }\n\n  async encryptMessage(message: Message) {\n    if (this.sharedSecret == null) {\n      await this.secureCommunication();\n    }\n\n    return await this.cryptoService.encrypt(JSON.stringify(message), this.sharedSecret);\n  }\n\n  getResponse(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.resolver = resolve;\n    });\n  }\n\n  private postMessage(message: OuterMessage) {\n    // Wrap in try-catch to when the port disconnected without triggering `onDisconnect`.\n    try {\n      const msg: any = message;\n      if (message.message instanceof EncString) {\n        // Alternative, backwards-compatible serialization of EncString\n        msg.message = {\n          encryptedString: message.message.encryptedString,\n          encryptionType: message.message.encryptionType,\n          data: message.message.data,\n          iv: message.message.iv,\n          mac: message.message.mac,\n        };\n      }\n      this.port.postMessage(msg);\n    } catch (e) {\n      this.logService.error(\"NativeMessaging port disconnected, disconnecting.\");\n\n      this.sharedSecret = null;\n      this.privateKey = null;\n      this.connected = false;\n\n      this.messagingService.send(\"showDialog\", {\n        text: this.i18nService.t(\"nativeMessagingInvalidEncryptionDesc\"),\n        title: this.i18nService.t(\"nativeMessagingInvalidEncryptionTitle\"),\n        confirmText: this.i18nService.t(\"ok\"),\n        type: \"error\",\n      });\n    }\n  }\n\n  private async onMessage(rawMessage: ReceiveMessage | EncString) {\n    let message = rawMessage as ReceiveMessage;\n    if (!this.platformUtilsService.isSafari()) {\n      message = JSON.parse(\n        await this.cryptoService.decryptToUtf8(rawMessage as EncString, this.sharedSecret)\n      );\n    }\n\n    if (Math.abs(message.timestamp - Date.now()) > MessageValidTimeout) {\n      this.logService.error(\"NativeMessage is to old, ignoring.\");\n      return;\n    }\n\n    switch (message.command) {\n      case \"biometricUnlock\": {\n        await this.stateService.setBiometricAwaitingAcceptance(null);\n\n        if (message.response === \"not enabled\") {\n          this.messagingService.send(\"showDialog\", {\n            text: this.i18nService.t(\"biometricsNotEnabledDesc\"),\n            title: this.i18nService.t(\"biometricsNotEnabledTitle\"),\n            confirmText: this.i18nService.t(\"ok\"),\n            type: \"error\",\n          });\n          break;\n        } else if (message.response === \"not supported\") {\n          this.messagingService.send(\"showDialog\", {\n            text: this.i18nService.t(\"biometricsNotSupportedDesc\"),\n            title: this.i18nService.t(\"biometricsNotSupportedTitle\"),\n            confirmText: this.i18nService.t(\"ok\"),\n            type: \"error\",\n          });\n          break;\n        }\n\n        const enabled = await this.stateService.getBiometricUnlock();\n        if (enabled === null || enabled === false) {\n          if (message.response === \"unlocked\") {\n            await this.stateService.setBiometricUnlock(true);\n          }\n          break;\n        }\n\n        // Ignore unlock if already unlocked\n        if ((await this.authService.getAuthStatus()) === AuthenticationStatus.Unlocked) {\n          break;\n        }\n\n        if (message.response === \"unlocked\") {\n          await this.cryptoService.setKey(\n            new SymmetricCryptoKey(Utils.fromB64ToArray(message.keyB64).buffer)\n          );\n\n          // Verify key is correct by attempting to decrypt a secret\n          try {\n            await this.cryptoService.getFingerprint(await this.stateService.getUserId());\n          } catch (e) {\n            this.logService.error(\"Unable to verify key: \" + e);\n            await this.cryptoService.clearKey();\n            this.showWrongUserDialog();\n\n            // Exit early\n            if (this.resolver) {\n              this.resolver(message);\n            }\n            return;\n          }\n\n          this.runtimeBackground.processMessage({ command: \"unlocked\" }, null, null);\n        }\n        break;\n      }\n      default:\n        this.logService.error(\"NativeMessage, got unknown command: \" + message.command);\n        break;\n    }\n\n    if (this.resolver) {\n      this.resolver(message);\n    }\n  }\n\n  private async secureCommunication() {\n    const [publicKey, privateKey] = await this.cryptoFunctionService.rsaGenerateKeyPair(2048);\n    this.publicKey = publicKey;\n    this.privateKey = privateKey;\n\n    this.sendUnencrypted({\n      command: \"setupEncryption\",\n      publicKey: Utils.fromBufferToB64(publicKey),\n      userId: await this.stateService.getUserId(),\n    });\n\n    return new Promise((resolve, reject) => (this.secureSetupResolve = resolve));\n  }\n\n  private async sendUnencrypted(message: Message) {\n    if (!this.connected) {\n      await this.connect();\n    }\n\n    message.timestamp = Date.now();\n\n    this.postMessage({ appId: this.appId, message: message });\n  }\n\n  private async showFingerprintDialog() {\n    const fingerprint = (\n      await this.cryptoService.getFingerprint(await this.stateService.getUserId(), this.publicKey)\n    ).join(\" \");\n\n    this.messagingService.send(\"showDialog\", {\n      html: `${this.i18nService.t(\n        \"desktopIntegrationVerificationText\"\n      )}<br><br><strong>${fingerprint}</strong>`,\n      title: this.i18nService.t(\"desktopSyncVerificationTitle\"),\n      confirmText: this.i18nService.t(\"ok\"),\n      type: \"warning\",\n    });\n  }\n}\n","import { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { NotificationsService } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { SystemService } from \"@bitwarden/common/abstractions/system.service\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\nimport { AutofillService } from \"../autofill/services/abstractions/autofill.service\";\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { BrowserEnvironmentService } from \"../services/browser-environment.service\";\nimport BrowserPlatformUtilsService from \"../services/browserPlatformUtils.service\";\n\nimport MainBackground from \"./main.background\";\nimport LockedVaultPendingNotificationsItem from \"./models/lockedVaultPendingNotificationsItem\";\n\nexport default class RuntimeBackground {\n  private autofillTimeout: any;\n  private pageDetailsToAutoFill: any[] = [];\n  private onInstalledReason: string = null;\n  private lockedVaultPendingNotifications: LockedVaultPendingNotificationsItem[] = [];\n\n  constructor(\n    private main: MainBackground,\n    private autofillService: AutofillService,\n    private platformUtilsService: BrowserPlatformUtilsService,\n    private i18nService: I18nService,\n    private notificationsService: NotificationsService,\n    private systemService: SystemService,\n    private environmentService: BrowserEnvironmentService,\n    private messagingService: MessagingService,\n    private logService: LogService\n  ) {\n    // onInstalled listener must be wired up before anything else, so we do it in the ctor\n    chrome.runtime.onInstalled.addListener((details: any) => {\n      this.onInstalledReason = details.reason;\n    });\n  }\n\n  async init() {\n    if (!chrome.runtime) {\n      return;\n    }\n\n    await this.checkOnInstalled();\n    const backgroundMessageListener = async (\n      msg: any,\n      sender: chrome.runtime.MessageSender,\n      sendResponse: any\n    ) => {\n      await this.processMessage(msg, sender, sendResponse);\n    };\n\n    BrowserApi.messageListener(\"runtime.background\", backgroundMessageListener);\n    if (this.main.popupOnlyContext) {\n      (window as any).bitwardenBackgroundMessageListener = backgroundMessageListener;\n    }\n  }\n\n  async processMessage(msg: any, sender: chrome.runtime.MessageSender, sendResponse: any) {\n    switch (msg.command) {\n      case \"loggedIn\":\n      case \"unlocked\": {\n        let item: LockedVaultPendingNotificationsItem;\n\n        if (this.lockedVaultPendingNotifications?.length > 0) {\n          item = this.lockedVaultPendingNotifications.pop();\n          BrowserApi.closeBitwardenExtensionTab();\n        }\n\n        await this.main.refreshBadge();\n        await this.main.refreshMenu(false);\n        this.notificationsService.updateConnection(msg.command === \"unlocked\");\n        this.systemService.cancelProcessReload();\n\n        if (item) {\n          await BrowserApi.tabSendMessageData(\n            item.commandToRetry.sender.tab,\n            \"unlockCompleted\",\n            item\n          );\n        }\n        break;\n      }\n      case \"addToLockedVaultPendingNotifications\":\n        this.lockedVaultPendingNotifications.push(msg.data);\n        break;\n      case \"logout\":\n        await this.main.logout(msg.expired, msg.userId);\n        break;\n      case \"syncCompleted\":\n        if (msg.successfully) {\n          setTimeout(async () => {\n            await this.main.refreshBadge();\n            await this.main.refreshMenu();\n          }, 2000);\n          this.main.avatarUpdateService.loadColorFromState();\n        }\n        break;\n      case \"openPopup\":\n        await this.main.openPopup();\n        break;\n      case \"promptForLogin\":\n        BrowserApi.openBitwardenExtensionTab(\"popup/index.html\", true, sender.tab);\n        break;\n      case \"openAddEditCipher\": {\n        const addEditCipherUrl =\n          msg.data?.cipherId == null\n            ? \"popup/index.html#/edit-cipher\"\n            : \"popup/index.html#/edit-cipher?cipherId=\" + msg.data.cipherId;\n\n        BrowserApi.openBitwardenExtensionTab(addEditCipherUrl, true, sender.tab);\n        break;\n      }\n      case \"closeTab\":\n        setTimeout(() => {\n          BrowserApi.closeBitwardenExtensionTab();\n        }, msg.delay ?? 0);\n        break;\n      case \"showDialogResolve\":\n        this.platformUtilsService.resolveDialogPromise(msg.dialogId, msg.confirmed);\n        break;\n      case \"bgCollectPageDetails\":\n        await this.main.collectPageDetailsForContentScript(sender.tab, msg.sender, sender.frameId);\n        break;\n      case \"bgUpdateContextMenu\":\n      case \"editedCipher\":\n      case \"addedCipher\":\n      case \"deletedCipher\":\n        await this.main.refreshBadge();\n        await this.main.refreshMenu();\n        break;\n      case \"bgReseedStorage\":\n        await this.main.reseedStorage();\n        break;\n      case \"collectPageDetailsResponse\":\n        switch (msg.sender) {\n          case \"autofiller\":\n          case \"autofill_cmd\": {\n            const totpCode = await this.autofillService.doAutoFillActiveTab(\n              [\n                {\n                  frameId: sender.frameId,\n                  tab: msg.tab,\n                  details: msg.details,\n                },\n              ],\n              msg.sender === \"autofill_cmd\"\n            );\n            if (totpCode != null) {\n              this.platformUtilsService.copyToClipboard(totpCode, { window: window });\n            }\n            break;\n          }\n          case \"contextMenu\":\n            clearTimeout(this.autofillTimeout);\n            this.pageDetailsToAutoFill.push({\n              frameId: sender.frameId,\n              tab: msg.tab,\n              details: msg.details,\n            });\n            this.autofillTimeout = setTimeout(async () => await this.autofillPage(msg.tab), 300);\n            break;\n          default:\n            break;\n        }\n        break;\n      case \"authResult\": {\n        const vaultUrl = this.environmentService.getWebVaultUrl();\n\n        if (msg.referrer == null || Utils.getHostname(vaultUrl) !== msg.referrer) {\n          return;\n        }\n\n        try {\n          BrowserApi.createNewTab(\n            \"popup/index.html?uilocation=popout#/sso?code=\" +\n              encodeURIComponent(msg.code) +\n              \"&state=\" +\n              encodeURIComponent(msg.state)\n          );\n        } catch {\n          this.logService.error(\"Unable to open sso popout tab\");\n        }\n        break;\n      }\n      case \"webAuthnResult\": {\n        const vaultUrl = this.environmentService.getWebVaultUrl();\n\n        if (msg.referrer == null || Utils.getHostname(vaultUrl) !== msg.referrer) {\n          return;\n        }\n\n        const params =\n          `webAuthnResponse=${encodeURIComponent(msg.data)};` +\n          `remember=${encodeURIComponent(msg.remember)}`;\n        BrowserApi.openBitwardenExtensionTab(`popup/index.html#/2fa;${params}`, false);\n        break;\n      }\n      case \"reloadPopup\":\n        this.messagingService.send(\"reloadPopup\");\n        break;\n      case \"emailVerificationRequired\":\n        this.messagingService.send(\"showDialog\", {\n          dialogId: \"emailVerificationRequired\",\n          title: this.i18nService.t(\"emailVerificationRequired\"),\n          text: this.i18nService.t(\"emailVerificationRequiredDesc\"),\n          confirmText: this.i18nService.t(\"ok\"),\n          type: \"info\",\n        });\n        break;\n      case \"getClickedElementResponse\":\n        this.platformUtilsService.copyToClipboard(msg.identifier, { window: window });\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async autofillPage(tabToAutoFill: chrome.tabs.Tab) {\n    const totpCode = await this.autofillService.doAutoFill({\n      tab: tabToAutoFill,\n      cipher: this.main.loginToAutoFill,\n      pageDetails: this.pageDetailsToAutoFill,\n      fillNewPassword: true,\n    });\n\n    if (totpCode != null) {\n      this.platformUtilsService.copyToClipboard(totpCode, { window: window });\n    }\n\n    // reset\n    this.main.loginToAutoFill = null;\n    this.pageDetailsToAutoFill = [];\n  }\n\n  private async checkOnInstalled() {\n    setTimeout(async () => {\n      if (this.onInstalledReason != null) {\n        if (this.onInstalledReason === \"install\") {\n          BrowserApi.createNewTab(\"https://bitwarden.com/browser-start/\");\n\n          if (await this.environmentService.hasManagedEnvironment()) {\n            await this.environmentService.setUrlsToManagedEnvironment();\n          }\n        }\n\n        this.onInstalledReason = null;\n      }\n    }, 100);\n  }\n}\n","import { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { AuthenticationStatus } from \"@bitwarden/common/auth/enums/authentication-status\";\nimport { UriMatchType } from \"@bitwarden/common/enums\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\n\nexport default class WebRequestBackground {\n  private pendingAuthRequests: any[] = [];\n  private webRequest: any;\n  private isFirefox: boolean;\n\n  constructor(\n    platformUtilsService: PlatformUtilsService,\n    private cipherService: CipherService,\n    private authService: AuthService\n  ) {\n    if (BrowserApi.manifestVersion === 2) {\n      this.webRequest = (window as any).chrome.webRequest;\n    }\n    this.isFirefox = platformUtilsService.isFirefox();\n  }\n\n  async init() {\n    if (!this.webRequest || !this.webRequest.onAuthRequired) {\n      return;\n    }\n\n    this.webRequest.onAuthRequired.addListener(\n      async (details: any, callback: any) => {\n        if (!details.url || this.pendingAuthRequests.indexOf(details.requestId) !== -1) {\n          if (callback) {\n            callback();\n          }\n          return;\n        }\n\n        this.pendingAuthRequests.push(details.requestId);\n\n        if (this.isFirefox) {\n          // eslint-disable-next-line\n          return new Promise(async (resolve, reject) => {\n            await this.resolveAuthCredentials(details.url, resolve, reject);\n          });\n        } else {\n          await this.resolveAuthCredentials(details.url, callback, callback);\n        }\n      },\n      { urls: [\"http://*/*\", \"https://*/*\"] },\n      [this.isFirefox ? \"blocking\" : \"asyncBlocking\"]\n    );\n\n    this.webRequest.onCompleted.addListener((details: any) => this.completeAuthRequest(details), {\n      urls: [\"http://*/*\"],\n    });\n    this.webRequest.onErrorOccurred.addListener(\n      (details: any) => this.completeAuthRequest(details),\n      {\n        urls: [\"http://*/*\"],\n      }\n    );\n  }\n\n  // eslint-disable-next-line\n  private async resolveAuthCredentials(domain: string, success: Function, error: Function) {\n    if ((await this.authService.getAuthStatus()) < AuthenticationStatus.Unlocked) {\n      error();\n      return;\n    }\n\n    try {\n      const ciphers = await this.cipherService.getAllDecryptedForUrl(\n        domain,\n        null,\n        UriMatchType.Host\n      );\n      if (ciphers == null || ciphers.length !== 1) {\n        error();\n        return;\n      }\n\n      success({\n        authCredentials: {\n          username: ciphers[0].login.username,\n          password: ciphers[0].login.password,\n        },\n      });\n    } catch {\n      error();\n    }\n  }\n\n  private completeAuthRequest(details: any) {\n    const i = this.pendingAuthRequests.indexOf(details.requestId);\n    if (i > -1) {\n      this.pendingAuthRequests.splice(i, 1);\n    }\n  }\n}\n","import { AvatarUpdateService as AvatarUpdateServiceAbstraction } from \"@bitwarden/common/abstractions/account/avatar-update.service\";\nimport { ApiService as ApiServiceAbstraction } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService as AppIdServiceAbstraction } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuditService as AuditServiceAbstraction } from \"@bitwarden/common/abstractions/audit.service\";\nimport { CryptoService as CryptoServiceAbstraction } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService as CryptoFunctionServiceAbstraction } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EncryptService } from \"@bitwarden/common/abstractions/encrypt.service\";\nimport { EventCollectionService as EventCollectionServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventUploadService as EventUploadServiceAbstraction } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { ExportService as ExportServiceAbstraction } from \"@bitwarden/common/abstractions/export.service\";\nimport { FileUploadService as FileUploadServiceAbstraction } from \"@bitwarden/common/abstractions/file-upload/file-upload.service\";\nimport { I18nService as I18nServiceAbstraction } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService as LogServiceAbstraction } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService as MessagingServiceAbstraction } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { NotificationsService as NotificationsServiceAbstraction } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { PlatformUtilsService as PlatformUtilsServiceAbstraction } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService as SearchServiceAbstraction } from \"@bitwarden/common/abstractions/search.service\";\nimport { SettingsService as SettingsServiceAbstraction } from \"@bitwarden/common/abstractions/settings.service\";\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/abstractions/storage.service\";\nimport { SystemService as SystemServiceAbstraction } from \"@bitwarden/common/abstractions/system.service\";\nimport { TotpService as TotpServiceAbstraction } from \"@bitwarden/common/abstractions/totp.service\";\nimport { UserVerificationApiServiceAbstraction } from \"@bitwarden/common/abstractions/userVerification/userVerification-api.service.abstraction\";\nimport { UserVerificationService as UserVerificationServiceAbstraction } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { VaultTimeoutService as VaultTimeoutServiceAbstraction } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService as VaultTimeoutSettingsServiceAbstraction } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { CollectionService as CollectionServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport { InternalOrganizationService as InternalOrganizationServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport { InternalPolicyService as InternalPolicyServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService as ProviderServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/provider.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/services/collection.service\";\nimport { PolicyApiService } from \"@bitwarden/common/admin-console/services/policy/policy-api.service\";\nimport { ProviderService } from \"@bitwarden/common/admin-console/services/provider.service\";\nimport { AuthService as AuthServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { KeyConnectorService as KeyConnectorServiceAbstraction } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { TokenService as TokenServiceAbstraction } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { TwoFactorService as TwoFactorServiceAbstraction } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { AuthService } from \"@bitwarden/common/auth/services/auth.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/services/key-connector.service\";\nimport { TokenService } from \"@bitwarden/common/auth/services/token.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/services/two-factor.service\";\nimport { UserVerificationApiService } from \"@bitwarden/common/auth/services/user-verification/user-verification-api.service\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/services/user-verification/user-verification.service\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { AvatarUpdateService } from \"@bitwarden/common/services/account/avatar-update.service\";\nimport { ApiService } from \"@bitwarden/common/services/api.service\";\nimport { AppIdService } from \"@bitwarden/common/services/appId.service\";\nimport { AuditService } from \"@bitwarden/common/services/audit.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/services/consoleLog.service\";\nimport { ContainerService } from \"@bitwarden/common/services/container.service\";\nimport { EncryptServiceImplementation } from \"@bitwarden/common/services/cryptography/encrypt.service.implementation\";\nimport { MultithreadEncryptServiceImplementation } from \"@bitwarden/common/services/cryptography/multithread-encrypt.service.implementation\";\nimport { EventCollectionService } from \"@bitwarden/common/services/event/event-collection.service\";\nimport { EventUploadService } from \"@bitwarden/common/services/event/event-upload.service\";\nimport { ExportService } from \"@bitwarden/common/services/export.service\";\nimport { FileUploadService } from \"@bitwarden/common/services/file-upload/file-upload.service\";\nimport { MemoryStorageService } from \"@bitwarden/common/services/memoryStorage.service\";\nimport { NotificationsService } from \"@bitwarden/common/services/notifications.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\nimport { StateMigrationService } from \"@bitwarden/common/services/stateMigration.service\";\nimport { SystemService } from \"@bitwarden/common/services/system.service\";\nimport { TotpService } from \"@bitwarden/common/services/totp.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/services/vaultTimeout/vaultTimeoutSettings.service\";\nimport { WebCryptoFunctionService } from \"@bitwarden/common/services/webCryptoFunction.service\";\nimport {\n  PasswordGenerationService,\n  PasswordGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/password\";\nimport {\n  UsernameGenerationService,\n  UsernameGenerationServiceAbstraction,\n} from \"@bitwarden/common/tools/generator/username\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service\";\nimport { SendApiService as SendApiServiceAbstraction } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport { InternalSendService as InternalSendServiceAbstraction } from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { CipherService as CipherServiceAbstraction } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherFileUploadService as CipherFileUploadServiceAbstraction } from \"@bitwarden/common/vault/abstractions/file-upload/cipher-file-upload.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport { InternalFolderService as InternalFolderServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { SyncNotifierService as SyncNotifierServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync-notifier.service.abstraction\";\nimport { SyncService as SyncServiceAbstraction } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { CipherView } from \"@bitwarden/common/vault/models/view/cipher.view\";\nimport { CipherService } from \"@bitwarden/common/vault/services/cipher.service\";\nimport { CipherFileUploadService } from \"@bitwarden/common/vault/services/file-upload/cipher-file-upload.service\";\nimport { FolderApiService } from \"@bitwarden/common/vault/services/folder/folder-api.service\";\nimport { SyncNotifierService } from \"@bitwarden/common/vault/services/sync/sync-notifier.service\";\nimport { SyncService } from \"@bitwarden/common/vault/services/sync/sync.service\";\n\nimport { BrowserOrganizationService } from \"../admin-console/services/browser-organization.service\";\nimport { BrowserPolicyService } from \"../admin-console/services/browser-policy.service\";\nimport ContextMenusBackground from \"../autofill/background/context-menus.background\";\nimport NotificationBackground from \"../autofill/background/notification.background\";\nimport TabsBackground from \"../autofill/background/tabs.background\";\nimport { CipherContextMenuHandler } from \"../autofill/browser/cipher-context-menu-handler\";\nimport { ContextMenuClickedHandler } from \"../autofill/browser/context-menu-clicked-handler\";\nimport { MainContextMenuHandler } from \"../autofill/browser/main-context-menu-handler\";\nimport { AutofillService as AutofillServiceAbstraction } from \"../autofill/services/abstractions/autofill.service\";\nimport AutofillService from \"../autofill/services/autofill.service\";\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { SafariApp } from \"../browser/safariApp\";\nimport { flagEnabled } from \"../flags\";\nimport { UpdateBadge } from \"../listeners/update-badge\";\nimport { Account } from \"../models/account\";\nimport { BrowserStateService as StateServiceAbstraction } from \"../services/abstractions/browser-state.service\";\nimport { BrowserEnvironmentService } from \"../services/browser-environment.service\";\nimport { BrowserI18nService } from \"../services/browser-i18n.service\";\nimport { BrowserSendService } from \"../services/browser-send.service\";\nimport { BrowserSettingsService } from \"../services/browser-settings.service\";\nimport { BrowserStateService } from \"../services/browser-state.service\";\nimport { BrowserCryptoService } from \"../services/browserCrypto.service\";\nimport BrowserLocalStorageService from \"../services/browserLocalStorage.service\";\nimport BrowserMessagingService from \"../services/browserMessaging.service\";\nimport BrowserMessagingPrivateModeBackgroundService from \"../services/browserMessagingPrivateModeBackground.service\";\nimport BrowserPlatformUtilsService from \"../services/browserPlatformUtils.service\";\nimport { KeyGenerationService } from \"../services/keyGeneration.service\";\nimport { LocalBackedSessionStorageService } from \"../services/localBackedSessionStorage.service\";\nimport VaultTimeoutService from \"../services/vaultTimeout/vaultTimeout.service\";\nimport { BrowserFolderService } from \"../vault/services/browser-folder.service\";\nimport { VaultFilterService } from \"../vault/services/vault-filter.service\";\n\nimport CommandsBackground from \"./commands.background\";\nimport IdleBackground from \"./idle.background\";\nimport { NativeMessagingBackground } from \"./nativeMessaging.background\";\nimport RuntimeBackground from \"./runtime.background\";\nimport WebRequestBackground from \"./webRequest.background\";\n\nexport default class MainBackground {\n  messagingService: MessagingServiceAbstraction;\n  storageService: AbstractStorageService;\n  secureStorageService: AbstractStorageService;\n  memoryStorageService: AbstractMemoryStorageService;\n  i18nService: I18nServiceAbstraction;\n  platformUtilsService: PlatformUtilsServiceAbstraction;\n  logService: LogServiceAbstraction;\n  cryptoService: CryptoServiceAbstraction;\n  cryptoFunctionService: CryptoFunctionServiceAbstraction;\n  tokenService: TokenServiceAbstraction;\n  appIdService: AppIdServiceAbstraction;\n  apiService: ApiServiceAbstraction;\n  environmentService: BrowserEnvironmentService;\n  settingsService: SettingsServiceAbstraction;\n  cipherService: CipherServiceAbstraction;\n  folderService: InternalFolderServiceAbstraction;\n  collectionService: CollectionServiceAbstraction;\n  vaultTimeoutService: VaultTimeoutServiceAbstraction;\n  vaultTimeoutSettingsService: VaultTimeoutSettingsServiceAbstraction;\n  syncService: SyncServiceAbstraction;\n  passwordGenerationService: PasswordGenerationServiceAbstraction;\n  totpService: TotpServiceAbstraction;\n  autofillService: AutofillServiceAbstraction;\n  containerService: ContainerService;\n  auditService: AuditServiceAbstraction;\n  authService: AuthServiceAbstraction;\n  exportService: ExportServiceAbstraction;\n  searchService: SearchServiceAbstraction;\n  notificationsService: NotificationsServiceAbstraction;\n  stateService: StateServiceAbstraction;\n  stateMigrationService: StateMigrationService;\n  systemService: SystemServiceAbstraction;\n  eventCollectionService: EventCollectionServiceAbstraction;\n  eventUploadService: EventUploadServiceAbstraction;\n  policyService: InternalPolicyServiceAbstraction;\n  sendService: InternalSendServiceAbstraction;\n  fileUploadService: FileUploadServiceAbstraction;\n  cipherFileUploadService: CipherFileUploadServiceAbstraction;\n  organizationService: InternalOrganizationServiceAbstraction;\n  providerService: ProviderServiceAbstraction;\n  keyConnectorService: KeyConnectorServiceAbstraction;\n  userVerificationService: UserVerificationServiceAbstraction;\n  twoFactorService: TwoFactorServiceAbstraction;\n  vaultFilterService: VaultFilterService;\n  usernameGenerationService: UsernameGenerationServiceAbstraction;\n  encryptService: EncryptService;\n  folderApiService: FolderApiServiceAbstraction;\n  policyApiService: PolicyApiServiceAbstraction;\n  sendApiService: SendApiServiceAbstraction;\n  userVerificationApiService: UserVerificationApiServiceAbstraction;\n  syncNotifierService: SyncNotifierServiceAbstraction;\n  avatarUpdateService: AvatarUpdateServiceAbstraction;\n  mainContextMenuHandler: MainContextMenuHandler;\n  cipherContextMenuHandler: CipherContextMenuHandler;\n\n  // Passed to the popup for Safari to workaround issues with theming, downloading, etc.\n  backgroundWindow = window;\n\n  onUpdatedRan: boolean;\n  onReplacedRan: boolean;\n  loginToAutoFill: CipherView = null;\n\n  private commandsBackground: CommandsBackground;\n  private contextMenusBackground: ContextMenusBackground;\n  private idleBackground: IdleBackground;\n  private notificationBackground: NotificationBackground;\n  private runtimeBackground: RuntimeBackground;\n  private tabsBackground: TabsBackground;\n  private webRequestBackground: WebRequestBackground;\n\n  private syncTimeout: any;\n  private isSafari: boolean;\n  private nativeMessagingBackground: NativeMessagingBackground;\n  popupOnlyContext: boolean;\n\n  constructor(public isPrivateMode: boolean = false) {\n    this.popupOnlyContext = isPrivateMode || BrowserApi.manifestVersion === 3;\n\n    // Services\n    const lockedCallback = async (userId?: string) => {\n      if (this.notificationsService != null) {\n        this.notificationsService.updateConnection(false);\n      }\n      await this.refreshBadge();\n      await this.refreshMenu(true);\n      if (this.systemService != null) {\n        await this.systemService.clearPendingClipboard();\n        await this.systemService.startProcessReload(this.authService);\n      }\n    };\n\n    const logoutCallback = async (expired: boolean, userId?: string) =>\n      await this.logout(expired, userId);\n\n    this.messagingService = this.popupOnlyContext\n      ? new BrowserMessagingPrivateModeBackgroundService()\n      : new BrowserMessagingService();\n    this.logService = new ConsoleLogService(false);\n    this.cryptoFunctionService = new WebCryptoFunctionService(window);\n    this.storageService = new BrowserLocalStorageService();\n    this.secureStorageService = new BrowserLocalStorageService();\n    this.memoryStorageService =\n      BrowserApi.manifestVersion === 3\n        ? new LocalBackedSessionStorageService(\n            new EncryptServiceImplementation(this.cryptoFunctionService, this.logService, false),\n            new KeyGenerationService(this.cryptoFunctionService)\n          )\n        : new MemoryStorageService();\n    this.stateMigrationService = new StateMigrationService(\n      this.storageService,\n      this.secureStorageService,\n      new StateFactory(GlobalState, Account)\n    );\n    this.stateService = new BrowserStateService(\n      this.storageService,\n      this.secureStorageService,\n      this.memoryStorageService,\n      this.logService,\n      this.stateMigrationService,\n      new StateFactory(GlobalState, Account)\n    );\n    this.platformUtilsService = new BrowserPlatformUtilsService(\n      this.messagingService,\n      (clipboardValue, clearMs) => {\n        if (this.systemService != null) {\n          this.systemService.clearClipboard(clipboardValue, clearMs);\n        }\n      },\n      async () => {\n        if (this.nativeMessagingBackground != null) {\n          const promise = this.nativeMessagingBackground.getResponse();\n\n          try {\n            await this.nativeMessagingBackground.send({ command: \"biometricUnlock\" });\n          } catch (e) {\n            return Promise.reject(e);\n          }\n\n          return promise.then((result) => result.response === \"unlocked\");\n        }\n      },\n      window\n    );\n    this.i18nService = new BrowserI18nService(BrowserApi.getUILanguage(window), this.stateService);\n    this.encryptService = flagEnabled(\"multithreadDecryption\")\n      ? new MultithreadEncryptServiceImplementation(\n          this.cryptoFunctionService,\n          this.logService,\n          true\n        )\n      : new EncryptServiceImplementation(this.cryptoFunctionService, this.logService, true);\n    this.cryptoService = new BrowserCryptoService(\n      this.cryptoFunctionService,\n      this.encryptService,\n      this.platformUtilsService,\n      this.logService,\n      this.stateService\n    );\n    this.tokenService = new TokenService(this.stateService);\n    this.appIdService = new AppIdService(this.storageService);\n    this.environmentService = new BrowserEnvironmentService(this.stateService, this.logService);\n    this.apiService = new ApiService(\n      this.tokenService,\n      this.platformUtilsService,\n      this.environmentService,\n      this.appIdService,\n      (expired: boolean) => this.logout(expired)\n    );\n    this.settingsService = new BrowserSettingsService(this.stateService);\n    this.fileUploadService = new FileUploadService(this.logService);\n    this.cipherFileUploadService = new CipherFileUploadService(\n      this.apiService,\n      this.fileUploadService\n    );\n    this.searchService = new SearchService(this.logService, this.i18nService);\n\n    this.cipherService = new CipherService(\n      this.cryptoService,\n      this.settingsService,\n      this.apiService,\n      this.i18nService,\n      this.searchService,\n      this.stateService,\n      this.encryptService,\n      this.cipherFileUploadService\n    );\n    this.folderService = new BrowserFolderService(\n      this.cryptoService,\n      this.i18nService,\n      this.cipherService,\n      this.stateService\n    );\n    this.folderApiService = new FolderApiService(this.folderService, this.apiService);\n    this.collectionService = new CollectionService(\n      this.cryptoService,\n      this.i18nService,\n      this.stateService\n    );\n    this.syncNotifierService = new SyncNotifierService();\n    this.organizationService = new BrowserOrganizationService(this.stateService);\n    this.policyService = new BrowserPolicyService(this.stateService, this.organizationService);\n    this.policyApiService = new PolicyApiService(\n      this.policyService,\n      this.apiService,\n      this.stateService\n    );\n    this.keyConnectorService = new KeyConnectorService(\n      this.stateService,\n      this.cryptoService,\n      this.apiService,\n      this.tokenService,\n      this.logService,\n      this.organizationService,\n      this.cryptoFunctionService,\n      logoutCallback\n    );\n    this.vaultFilterService = new VaultFilterService(\n      this.stateService,\n      this.organizationService,\n      this.folderService,\n      this.cipherService,\n      this.collectionService,\n      this.policyService\n    );\n    this.passwordGenerationService = new PasswordGenerationService(\n      this.cryptoService,\n      this.policyService,\n      this.stateService\n    );\n\n    this.twoFactorService = new TwoFactorService(this.i18nService, this.platformUtilsService);\n\n    // eslint-disable-next-line\n    const that = this;\n    const backgroundMessagingService = new (class extends MessagingServiceAbstraction {\n      // AuthService should send the messages to the background not popup.\n      send = (subscriber: string, arg: any = {}) => {\n        const message = Object.assign({}, { command: subscriber }, arg);\n        that.runtimeBackground.processMessage(message, that as any, null);\n      };\n    })();\n    this.authService = new AuthService(\n      this.cryptoService,\n      this.apiService,\n      this.tokenService,\n      this.appIdService,\n      this.platformUtilsService,\n      backgroundMessagingService,\n      this.logService,\n      this.keyConnectorService,\n      this.environmentService,\n      this.stateService,\n      this.twoFactorService,\n      this.i18nService,\n      this.encryptService,\n      this.passwordGenerationService,\n      this.policyService\n    );\n\n    this.vaultTimeoutSettingsService = new VaultTimeoutSettingsService(\n      this.cryptoService,\n      this.tokenService,\n      this.policyService,\n      this.stateService\n    );\n\n    this.vaultTimeoutService = new VaultTimeoutService(\n      this.cipherService,\n      this.folderService,\n      this.collectionService,\n      this.cryptoService,\n      this.platformUtilsService,\n      this.messagingService,\n      this.searchService,\n      this.keyConnectorService,\n      this.stateService,\n      this.authService,\n      this.vaultTimeoutSettingsService,\n      lockedCallback,\n      logoutCallback\n    );\n    this.containerService = new ContainerService(this.cryptoService, this.encryptService);\n    this.sendService = new BrowserSendService(\n      this.cryptoService,\n      this.i18nService,\n      this.cryptoFunctionService,\n      this.stateService\n    );\n    this.sendApiService = new SendApiService(\n      this.apiService,\n      this.fileUploadService,\n      this.sendService\n    );\n    this.providerService = new ProviderService(this.stateService);\n    this.syncService = new SyncService(\n      this.apiService,\n      this.settingsService,\n      this.folderService,\n      this.cipherService,\n      this.cryptoService,\n      this.collectionService,\n      this.messagingService,\n      this.policyService,\n      this.sendService,\n      this.logService,\n      this.keyConnectorService,\n      this.stateService,\n      this.providerService,\n      this.folderApiService,\n      this.organizationService,\n      this.sendApiService,\n      logoutCallback\n    );\n    this.eventUploadService = new EventUploadService(\n      this.apiService,\n      this.stateService,\n      this.logService\n    );\n    this.eventCollectionService = new EventCollectionService(\n      this.cipherService,\n      this.stateService,\n      this.organizationService,\n      this.eventUploadService\n    );\n    this.totpService = new TotpService(this.cryptoFunctionService, this.logService);\n    this.autofillService = new AutofillService(\n      this.cipherService,\n      this.stateService,\n      this.totpService,\n      this.eventCollectionService,\n      this.logService,\n      this.settingsService\n    );\n    this.auditService = new AuditService(this.cryptoFunctionService, this.apiService);\n    this.exportService = new ExportService(\n      this.folderService,\n      this.cipherService,\n      this.apiService,\n      this.cryptoService,\n      this.cryptoFunctionService,\n      this.stateService\n    );\n    this.notificationsService = new NotificationsService(\n      this.syncService,\n      this.appIdService,\n      this.apiService,\n      this.environmentService,\n      logoutCallback,\n      this.logService,\n      this.stateService,\n      this.authService,\n      this.messagingService\n    );\n\n    this.userVerificationApiService = new UserVerificationApiService(this.apiService);\n\n    this.userVerificationService = new UserVerificationService(\n      this.cryptoService,\n      this.i18nService,\n      this.userVerificationApiService\n    );\n\n    const systemUtilsServiceReloadCallback = () => {\n      const forceWindowReload =\n        this.platformUtilsService.isSafari() ||\n        this.platformUtilsService.isFirefox() ||\n        this.platformUtilsService.isOpera();\n      BrowserApi.reloadExtension(forceWindowReload ? window : null);\n      return Promise.resolve();\n    };\n\n    this.systemService = new SystemService(\n      this.messagingService,\n      this.platformUtilsService,\n      systemUtilsServiceReloadCallback,\n      this.stateService\n    );\n\n    // Other fields\n    this.isSafari = this.platformUtilsService.isSafari();\n\n    // Background\n    this.runtimeBackground = new RuntimeBackground(\n      this,\n      this.autofillService,\n      this.platformUtilsService as BrowserPlatformUtilsService,\n      this.i18nService,\n      this.notificationsService,\n      this.systemService,\n      this.environmentService,\n      this.messagingService,\n      this.logService\n    );\n    this.nativeMessagingBackground = new NativeMessagingBackground(\n      this.cryptoService,\n      this.cryptoFunctionService,\n      this.runtimeBackground,\n      this.i18nService,\n      this.messagingService,\n      this.appIdService,\n      this.platformUtilsService,\n      this.stateService,\n      this.logService,\n      this.authService\n    );\n    this.commandsBackground = new CommandsBackground(\n      this,\n      this.passwordGenerationService,\n      this.platformUtilsService,\n      this.vaultTimeoutService,\n      this.authService\n    );\n    this.notificationBackground = new NotificationBackground(\n      this.autofillService,\n      this.cipherService,\n      this.authService,\n      this.policyService,\n      this.folderService,\n      this.stateService\n    );\n\n    this.tabsBackground = new TabsBackground(this, this.notificationBackground);\n    if (!this.popupOnlyContext) {\n      const contextMenuClickedHandler = new ContextMenuClickedHandler(\n        (options) => this.platformUtilsService.copyToClipboard(options.text, { window: self }),\n        async (_tab) => {\n          const options = (await this.passwordGenerationService.getOptions())?.[0] ?? {};\n          const password = await this.passwordGenerationService.generatePassword(options);\n          this.platformUtilsService.copyToClipboard(password, { window: window });\n          this.passwordGenerationService.addHistory(password);\n        },\n        async (tab, cipher) => {\n          this.loginToAutoFill = cipher;\n          if (tab == null) {\n            return;\n          }\n\n          BrowserApi.tabSendMessage(tab, {\n            command: \"collectPageDetails\",\n            tab: tab,\n            sender: \"contextMenu\",\n          });\n        },\n        this.authService,\n        this.cipherService,\n        this.totpService,\n        this.eventCollectionService\n      );\n\n      this.contextMenusBackground = new ContextMenusBackground(contextMenuClickedHandler);\n    }\n\n    this.idleBackground = new IdleBackground(\n      this.vaultTimeoutService,\n      this.stateService,\n      this.notificationsService\n    );\n    this.webRequestBackground = new WebRequestBackground(\n      this.platformUtilsService,\n      this.cipherService,\n      this.authService\n    );\n\n    this.usernameGenerationService = new UsernameGenerationService(\n      this.cryptoService,\n      this.stateService,\n      this.apiService\n    );\n\n    this.avatarUpdateService = new AvatarUpdateService(this.apiService, this.stateService);\n\n    if (!this.popupOnlyContext) {\n      this.mainContextMenuHandler = new MainContextMenuHandler(\n        this.stateService,\n        this.i18nService,\n        this.logService\n      );\n\n      this.cipherContextMenuHandler = new CipherContextMenuHandler(\n        this.mainContextMenuHandler,\n        this.authService,\n        this.cipherService\n      );\n    }\n  }\n\n  async bootstrap() {\n    this.containerService.attachToGlobal(window);\n\n    await this.stateService.init();\n\n    await (this.vaultTimeoutService as VaultTimeoutService).init(true);\n    await (this.i18nService as BrowserI18nService).init();\n    await (this.eventUploadService as EventUploadService).init(true);\n    await this.runtimeBackground.init();\n    await this.notificationBackground.init();\n    await this.commandsBackground.init();\n\n    this.twoFactorService.init();\n\n    await this.tabsBackground.init();\n    if (!this.popupOnlyContext) {\n      this.contextMenusBackground?.init();\n    }\n    await this.idleBackground.init();\n    await this.webRequestBackground.init();\n\n    if (this.platformUtilsService.isFirefox() && !this.isPrivateMode) {\n      // Set Private Mode windows to the default icon - they do not share state with the background page\n      const privateWindows = await BrowserApi.getPrivateModeWindows();\n      privateWindows.forEach(async (win) => {\n        await new UpdateBadge(self).setBadgeIcon(\"\", win.id);\n      });\n\n      BrowserApi.onWindowCreated(async (win) => {\n        if (win.incognito) {\n          await new UpdateBadge(self).setBadgeIcon(\"\", win.id);\n        }\n      });\n    }\n\n    return new Promise<void>((resolve) => {\n      setTimeout(async () => {\n        await this.environmentService.setUrlsFromStorage();\n        if (!this.isPrivateMode) {\n          await this.refreshBadge();\n        }\n        this.fullSync(true);\n        setTimeout(() => this.notificationsService.init(), 2500);\n        resolve();\n      }, 500);\n    });\n  }\n\n  async refreshBadge() {\n    await new UpdateBadge(self).run({ existingServices: this as any });\n  }\n\n  async refreshMenu(forLocked = false) {\n    if (!chrome.windows || !chrome.contextMenus) {\n      return;\n    }\n\n    await MainContextMenuHandler.removeAll();\n\n    if (forLocked) {\n      await this.mainContextMenuHandler?.noAccess();\n      this.onUpdatedRan = this.onReplacedRan = false;\n      return;\n    }\n\n    await this.mainContextMenuHandler?.init();\n\n    const tab = await BrowserApi.getTabFromCurrentWindow();\n    if (tab) {\n      await this.cipherContextMenuHandler?.update(tab.url);\n      this.onUpdatedRan = this.onReplacedRan = false;\n    }\n  }\n\n  async logout(expired: boolean, userId?: string) {\n    await this.eventUploadService.uploadEvents(userId);\n\n    await Promise.all([\n      this.syncService.setLastSync(new Date(0), userId),\n      this.cryptoService.clearKeys(userId),\n      this.settingsService.clear(userId),\n      this.cipherService.clear(userId),\n      this.folderService.clear(userId),\n      this.collectionService.clear(userId),\n      this.policyService.clear(userId),\n      this.passwordGenerationService.clear(userId),\n      this.vaultTimeoutSettingsService.clear(userId),\n      this.keyConnectorService.clear(),\n      this.vaultFilterService.clear(),\n    ]);\n\n    //Needs to be checked before state is cleaned\n    const needStorageReseed = await this.needsStorageReseed();\n\n    await this.stateService.clean({ userId: userId });\n\n    if (userId == null || userId === (await this.stateService.getUserId())) {\n      this.searchService.clearIndex();\n      this.messagingService.send(\"doneLoggingOut\", { expired: expired, userId: userId });\n    }\n\n    if (needStorageReseed) {\n      await this.reseedStorage();\n    }\n\n    if (BrowserApi.manifestVersion === 3) {\n      BrowserApi.sendMessage(\"updateBadge\");\n    }\n    await this.refreshBadge();\n    await this.mainContextMenuHandler.noAccess();\n    this.notificationsService.updateConnection(false);\n    await this.systemService.clearPendingClipboard();\n    await this.systemService.startProcessReload(this.authService);\n  }\n\n  private async needsStorageReseed(): Promise<boolean> {\n    const currentVaultTimeout = await this.stateService.getVaultTimeout();\n    return currentVaultTimeout == null ? false : true;\n  }\n\n  async collectPageDetailsForContentScript(tab: any, sender: string, frameId: number = null) {\n    if (tab == null || !tab.id) {\n      return;\n    }\n\n    const options: any = {};\n    if (frameId != null) {\n      options.frameId = frameId;\n    }\n\n    BrowserApi.tabSendMessage(\n      tab,\n      {\n        command: \"collectPageDetails\",\n        tab: tab,\n        sender: sender,\n      },\n      options\n    );\n  }\n\n  async openPopup() {\n    // Chrome APIs cannot open popup\n\n    // TODO: Do we need to open this popup?\n    if (!this.isSafari) {\n      return;\n    }\n    await SafariApp.sendMessageToApp(\"showPopover\", null, true);\n  }\n\n  async reseedStorage() {\n    if (\n      !this.platformUtilsService.isChrome() &&\n      !this.platformUtilsService.isVivaldi() &&\n      !this.platformUtilsService.isOpera()\n    ) {\n      return;\n    }\n\n    const getStorage = (): Promise<any> =>\n      new Promise((resolve) => {\n        chrome.storage.local.get(null, (o: any) => resolve(o));\n      });\n\n    const clearStorage = (): Promise<void> =>\n      new Promise((resolve) => {\n        chrome.storage.local.clear(() => resolve());\n      });\n\n    const storage = await getStorage();\n    await clearStorage();\n\n    for (const key in storage) {\n      // eslint-disable-next-line\n      if (!storage.hasOwnProperty(key)) {\n        continue;\n      }\n      await this.storageService.save(key, storage[key]);\n    }\n  }\n\n  private async fullSync(override = false) {\n    const syncInternal = 6 * 60 * 60 * 1000; // 6 hours\n    const lastSync = await this.syncService.getLastSync();\n\n    let lastSyncAgo = syncInternal + 1;\n    if (lastSync != null) {\n      lastSyncAgo = new Date().getTime() - lastSync.getTime();\n    }\n\n    if (override || lastSyncAgo >= syncInternal) {\n      await this.syncService.fullSync(override);\n      this.scheduleNextSync();\n    } else {\n      this.scheduleNextSync();\n    }\n  }\n\n  private scheduleNextSync() {\n    if (this.syncTimeout) {\n      clearTimeout(this.syncTimeout);\n    }\n\n    this.syncTimeout = setTimeout(async () => await this.fullSync(), 5 * 60 * 1000); // check every 5 minutes\n  }\n}\n","import { BehaviorSubject } from \"rxjs\";\n\nimport { ServerConfig } from \"@bitwarden/common/abstractions/config/server-config\";\nimport { ConfigService } from \"@bitwarden/common/services/config/config.service\";\n\nimport { browserSession, sessionSync } from \"../decorators/session-sync-observable\";\n\n@browserSession\nexport class BrowserConfigService extends ConfigService {\n  @sessionSync<ServerConfig>({ initializer: ServerConfig.fromJSON })\n  protected _serverConfig: BehaviorSubject<ServerConfig | null>;\n}\n","import { FileDownloadRequest } from \"./fileDownloadRequest\";\n\nexport class FileDownloadBuilder {\n  get blobOptions(): any {\n    const options = this._request.blobOptions ?? {};\n    if (options.type == null) {\n      options.type = this.fileType;\n    }\n    return options;\n  }\n\n  get blob(): Blob {\n    if (this.blobOptions != null) {\n      return new Blob([this._request.blobData], this.blobOptions);\n    } else {\n      return new Blob([this._request.blobData]);\n    }\n  }\n\n  get downloadMethod(): \"save\" | \"open\" {\n    if (this._request.downloadMethod != null) {\n      return this._request.downloadMethod;\n    }\n    return this.fileType != \"application/pdf\" ? \"save\" : \"open\";\n  }\n\n  private get fileType() {\n    const fileNameLower = this._request.fileName.toLowerCase();\n    if (fileNameLower.endsWith(\".pdf\")) {\n      return \"application/pdf\";\n    } else if (fileNameLower.endsWith(\".xlsx\")) {\n      return \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\n    } else if (fileNameLower.endsWith(\".docx\")) {\n      return \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\";\n    } else if (fileNameLower.endsWith(\".pptx\")) {\n      return \"application/vnd.openxmlformats-officedocument.presentationml.presentation\";\n    } else if (fileNameLower.endsWith(\".csv\")) {\n      return \"text/csv\";\n    } else if (fileNameLower.endsWith(\".png\")) {\n      return \"image/png\";\n    } else if (fileNameLower.endsWith(\".jpg\") || fileNameLower.endsWith(\".jpeg\")) {\n      return \"image/jpeg\";\n    } else if (fileNameLower.endsWith(\".gif\")) {\n      return \"image/gif\";\n    }\n    return null;\n  }\n\n  constructor(private readonly _request: FileDownloadRequest) {}\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { FileDownloadBuilder } from \"@bitwarden/common/abstractions/fileDownload/fileDownloadBuilder\";\nimport { FileDownloadRequest } from \"@bitwarden/common/abstractions/fileDownload/fileDownloadRequest\";\nimport { Utils } from \"@bitwarden/common/misc/utils\";\n\nimport { BrowserApi } from \"../browser/browserApi\";\nimport { SafariApp } from \"../browser/safariApp\";\n\n@Injectable()\nexport class BrowserFileDownloadService implements FileDownloadService {\n  download(request: FileDownloadRequest): void {\n    const builder = new FileDownloadBuilder(request);\n    if (BrowserApi.isSafariApi) {\n      let data: BlobPart = null;\n      if (builder.blobOptions.type === \"text/plain\" && typeof request.blobData === \"string\") {\n        data = request.blobData;\n      } else {\n        data = Utils.fromBufferToB64(request.blobData as ArrayBuffer);\n      }\n      SafariApp.sendMessageToApp(\n        \"downloadFile\",\n        JSON.stringify({\n          blobData: data,\n          blobOptions: request.blobOptions,\n          fileName: request.fileName,\n        }),\n        true\n      );\n    } else {\n      const a = window.document.createElement(\"a\");\n      a.href = URL.createObjectURL(builder.blob);\n      a.download = request.fileName;\n      window.document.body.appendChild(a);\n      a.click();\n      window.document.body.removeChild(a);\n    }\n  }\n}\n","import { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\n\nexport default class BrowserMessagingPrivateModePopupService implements MessagingService {\n  send(subscriber: string, arg: any = {}) {\n    const message = Object.assign({}, { command: subscriber }, arg);\n    (window as any).bitwardenBackgroundMessageListener(message);\n  }\n}\n","import { Component } from \"@angular/core\";\n\nimport { PasswordRepromptComponent as BasePasswordRepromptComponent } from \"@bitwarden/angular/vault/components/password-reprompt.component\";\n\n@Component({\n  templateUrl: \"password-reprompt.component.html\",\n})\nexport class PasswordRepromptComponent extends BasePasswordRepromptComponent {}\n","<div class=\"modal fade\" role=\"dialog\" aria-modal=\"true\">\n  <div class=\"modal-dialog modal-dialog-scrollable\" role=\"document\">\n    <form class=\"modal-content\" #form (ngSubmit)=\"submit()\">\n      <div class=\"modal-body\">\n        <div class=\"box\">\n          <h1 class=\"box-header\">{{ \"passwordConfirmation\" | i18n }}</h1>\n          <div class=\"box-content\">\n            <div class=\"box-content-row box-content-row-flex\" appBoxRow>\n              <div class=\"row-main\">\n                <label for=\"masterPassword\">{{ \"masterPass\" | i18n }}</label>\n                <input\n                  id=\"masterPassword\"\n                  type=\"{{ showPassword ? 'text' : 'password' }}\"\n                  name=\"MasterPassword\"\n                  aria-describedby=\"masterPasswordHelp\"\n                  class=\"monospaced\"\n                  [(ngModel)]=\"masterPassword\"\n                  required\n                  appAutofocus\n                />\n              </div>\n              <div class=\"action-buttons\">\n                <button\n                  type=\"button\"\n                  class=\"row-btn\"\n                  appStopClick\n                  appA11yTitle=\"{{ 'toggleVisibility' | i18n }}\"\n                  (click)=\"togglePassword()\"\n                  [attr.aria-pressed]=\"showPassword\"\n                >\n                  <i\n                    class=\"bwi bwi-lg\"\n                    aria-hidden=\"true\"\n                    [ngClass]=\"{ 'bwi-eye': !showPassword, 'bwi-eye-slash': showPassword }\"\n                  ></i>\n                </button>\n              </div>\n            </div>\n          </div>\n          <div id=\"masterPasswordHelp\" class=\"box-footer\">\n            {{ \"passwordConfirmationDesc\" | i18n }}\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"submit\" class=\"btn btn-primary btn-submit\">\n          <span>{{ \"ok\" | i18n }}</span>\n        </button>\n        <button type=\"button\" class=\"btn btn-outline-secondary\" data-dismiss=\"modal\">\n          {{ \"cancel\" | i18n }}\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n","import { Injectable } from \"@angular/core\";\n\nimport { PasswordRepromptService as BasePasswordRepromptService } from \"@bitwarden/angular/vault/services/password-reprompt.service\";\n\nimport { PasswordRepromptComponent } from \"../components/password-reprompt.component\";\n\n@Injectable()\nexport class PasswordRepromptService extends BasePasswordRepromptService {\n  component = PasswordRepromptComponent;\n}\n","import { Injectable } from \"@angular/core\";\n\nimport { AbstractThemingService } from \"@bitwarden/angular/services/theming/theming.service.abstraction\";\nimport { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService as LogServiceAbstraction } from \"@bitwarden/common/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\n\nimport { BrowserStateService as StateServiceAbstraction } from \"../../services/abstractions/browser-state.service\";\n\nimport { PopupUtilsService } from \"./popup-utils.service\";\n\n@Injectable()\nexport class InitService {\n  constructor(\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private popupUtilsService: PopupUtilsService,\n    private stateService: StateServiceAbstraction,\n    private logService: LogServiceAbstraction,\n    private themingService: AbstractThemingService\n  ) {}\n\n  init() {\n    return async () => {\n      await this.stateService.init();\n\n      if (!this.popupUtilsService.inPopup(window)) {\n        window.document.body.classList.add(\"body-full\");\n      } else if (window.screen.availHeight < 600) {\n        window.document.body.classList.add(\"body-xs\");\n      } else if (window.screen.availHeight <= 800) {\n        window.document.body.classList.add(\"body-sm\");\n      }\n\n      const htmlEl = window.document.documentElement;\n      await this.themingService.monitorThemeChanges();\n      htmlEl.classList.add(\"locale_\" + this.i18nService.translationLocale);\n\n      // Workaround for slow performance on external monitors on Chrome + MacOS\n      // See: https://bugs.chromium.org/p/chromium/issues/detail?id=971701#c64\n      if (\n        this.platformUtilsService.isChrome() &&\n        navigator.platform.indexOf(\"Mac\") > -1 &&\n        this.popupUtilsService.inPopup(window) &&\n        (window.screenLeft < 0 ||\n          window.screenTop < 0 ||\n          window.screenLeft > window.screen.width ||\n          window.screenTop > window.screen.height)\n      ) {\n        htmlEl.classList.add(\"force_redraw\");\n        this.logService.info(\"Force redraw is on\");\n      }\n    };\n  }\n}\n","import { I18nService } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { ConsoleLogService } from \"@bitwarden/common/services/consoleLog.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\n\nexport class PopupSearchService extends SearchService {\n  constructor(\n    private mainSearchService: SearchService,\n    consoleLogService: ConsoleLogService,\n    i18nService: I18nService\n  ) {\n    super(consoleLogService, i18nService);\n  }\n\n  clearIndex() {\n    throw new Error(\"Not available.\");\n  }\n\n  indexCiphers(): Promise<void> {\n    throw new Error(\"Not available.\");\n  }\n\n  getIndexForSearch() {\n    return this.mainSearchService.getIndexForSearch();\n  }\n}\n","import { APP_INITIALIZER, LOCALE_ID, NgModule } from \"@angular/core\";\n\nimport { LockGuard as BaseLockGuardService } from \"@bitwarden/angular/auth/guards/lock.guard\";\nimport { UnauthGuard as BaseUnauthGuardService } from \"@bitwarden/angular/auth/guards/unauth.guard\";\nimport { MEMORY_STORAGE, SECURE_STORAGE } from \"@bitwarden/angular/services/injection-tokens\";\nimport { JslibServicesModule } from \"@bitwarden/angular/services/jslib-services.module\";\nimport { ThemingService } from \"@bitwarden/angular/services/theming/theming.service\";\nimport { AbstractThemingService } from \"@bitwarden/angular/services/theming/theming.service.abstraction\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { AppIdService } from \"@bitwarden/common/abstractions/appId.service\";\nimport { AuditService } from \"@bitwarden/common/abstractions/audit.service\";\nimport { ConfigApiServiceAbstraction } from \"@bitwarden/common/abstractions/config/config-api.service.abstraction\";\nimport { ConfigServiceAbstraction } from \"@bitwarden/common/abstractions/config/config.service.abstraction\";\nimport { CryptoService } from \"@bitwarden/common/abstractions/crypto.service\";\nimport { CryptoFunctionService } from \"@bitwarden/common/abstractions/cryptoFunction.service\";\nimport { EncryptService } from \"@bitwarden/common/abstractions/encrypt.service\";\nimport { EnvironmentService } from \"@bitwarden/common/abstractions/environment.service\";\nimport { EventCollectionService } from \"@bitwarden/common/abstractions/event/event-collection.service\";\nimport { EventUploadService } from \"@bitwarden/common/abstractions/event/event-upload.service\";\nimport { ExportService } from \"@bitwarden/common/abstractions/export.service\";\nimport { FileUploadService } from \"@bitwarden/common/abstractions/file-upload/file-upload.service\";\nimport { FileDownloadService } from \"@bitwarden/common/abstractions/fileDownload/fileDownload.service\";\nimport { I18nService as I18nServiceAbstraction } from \"@bitwarden/common/abstractions/i18n.service\";\nimport { LogService as LogServiceAbstraction } from \"@bitwarden/common/abstractions/log.service\";\nimport { MessagingService } from \"@bitwarden/common/abstractions/messaging.service\";\nimport { NotificationsService } from \"@bitwarden/common/abstractions/notifications.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/abstractions/platformUtils.service\";\nimport { SearchService as SearchServiceAbstraction } from \"@bitwarden/common/abstractions/search.service\";\nimport { SettingsService } from \"@bitwarden/common/abstractions/settings.service\";\nimport {\n  StateService as BaseStateServiceAbstraction,\n  StateService,\n} from \"@bitwarden/common/abstractions/state.service\";\nimport { StateMigrationService } from \"@bitwarden/common/abstractions/stateMigration.service\";\nimport {\n  AbstractMemoryStorageService,\n  AbstractStorageService,\n} from \"@bitwarden/common/abstractions/storage.service\";\nimport { TotpService } from \"@bitwarden/common/abstractions/totp.service\";\nimport { UserVerificationService } from \"@bitwarden/common/abstractions/userVerification/userVerification.service.abstraction\";\nimport { VaultTimeoutService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeout.service\";\nimport { VaultTimeoutSettingsService } from \"@bitwarden/common/abstractions/vaultTimeout/vaultTimeoutSettings.service\";\nimport { CollectionService } from \"@bitwarden/common/admin-console/abstractions/collection.service\";\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { PolicyApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/policy/policy-api.service.abstraction\";\nimport {\n  InternalPolicyService,\n  PolicyService,\n} from \"@bitwarden/common/admin-console/abstractions/policy/policy.service.abstraction\";\nimport { ProviderService } from \"@bitwarden/common/admin-console/abstractions/provider.service\";\nimport { PolicyApiService } from \"@bitwarden/common/admin-console/services/policy/policy-api.service\";\nimport { AuthService as AuthServiceAbstraction } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { KeyConnectorService } from \"@bitwarden/common/auth/abstractions/key-connector.service\";\nimport { LoginService as LoginServiceAbstraction } from \"@bitwarden/common/auth/abstractions/login.service\";\nimport { TokenService } from \"@bitwarden/common/auth/abstractions/token.service\";\nimport { TwoFactorService } from \"@bitwarden/common/auth/abstractions/two-factor.service\";\nimport { AuthService } from \"@bitwarden/common/auth/services/auth.service\";\nimport { LoginService } from \"@bitwarden/common/auth/services/login.service\";\nimport { StateFactory } from \"@bitwarden/common/factories/stateFactory\";\nimport { GlobalState } from \"@bitwarden/common/models/domain/global-state\";\nimport { ConsoleLogService } from \"@bitwarden/common/services/consoleLog.service\";\nimport { ContainerService } from \"@bitwarden/common/services/container.service\";\nimport { SearchService } from \"@bitwarden/common/services/search.service\";\nimport { PasswordGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/password\";\nimport { UsernameGenerationServiceAbstraction } from \"@bitwarden/common/tools/generator/username\";\nimport { SendApiService } from \"@bitwarden/common/tools/send/services/send-api.service\";\nimport { SendApiService as SendApiServiceAbstraction } from \"@bitwarden/common/tools/send/services/send-api.service.abstraction\";\nimport {\n  InternalSendService as InternalSendServiceAbstraction,\n  SendService,\n} from \"@bitwarden/common/tools/send/services/send.service.abstraction\";\nimport { CipherService } from \"@bitwarden/common/vault/abstractions/cipher.service\";\nimport { CipherFileUploadService } from \"@bitwarden/common/vault/abstractions/file-upload/cipher-file-upload.service\";\nimport { FolderApiServiceAbstraction } from \"@bitwarden/common/vault/abstractions/folder/folder-api.service.abstraction\";\nimport {\n  FolderService,\n  InternalFolderService,\n} from \"@bitwarden/common/vault/abstractions/folder/folder.service.abstraction\";\nimport { PasswordRepromptService as PasswordRepromptServiceAbstraction } from \"@bitwarden/common/vault/abstractions/password-reprompt.service\";\nimport { SyncService } from \"@bitwarden/common/vault/abstractions/sync/sync.service.abstraction\";\nimport { FolderApiService } from \"@bitwarden/common/vault/services/folder/folder-api.service\";\n\nimport { BrowserOrganizationService } from \"../../admin-console/services/browser-organization.service\";\nimport { BrowserPolicyService } from \"../../admin-console/services/browser-policy.service\";\nimport { LockGuardService, UnauthGuardService } from \"../../auth/popup/services\";\nimport { AutofillService } from \"../../autofill/services/abstractions/autofill.service\";\nimport MainBackground from \"../../background/main.background\";\nimport { BrowserApi } from \"../../browser/browserApi\";\nimport { Account } from \"../../models/account\";\nimport { BrowserStateService as StateServiceAbstraction } from \"../../services/abstractions/browser-state.service\";\nimport { BrowserConfigService } from \"../../services/browser-config.service\";\nimport { BrowserEnvironmentService } from \"../../services/browser-environment.service\";\nimport { BrowserI18nService } from \"../../services/browser-i18n.service\";\nimport { BrowserSendService } from \"../../services/browser-send.service\";\nimport { BrowserSettingsService } from \"../../services/browser-settings.service\";\nimport { BrowserStateService } from \"../../services/browser-state.service\";\nimport { BrowserFileDownloadService } from \"../../services/browserFileDownloadService\";\nimport BrowserMessagingService from \"../../services/browserMessaging.service\";\nimport BrowserMessagingPrivateModePopupService from \"../../services/browserMessagingPrivateModePopup.service\";\nimport { PasswordRepromptService } from \"../../vault/popup/services/password-reprompt.service\";\nimport { BrowserFolderService } from \"../../vault/services/browser-folder.service\";\nimport { VaultFilterService } from \"../../vault/services/vault-filter.service\";\n\nimport { DebounceNavigationService } from \"./debounceNavigationService\";\nimport { InitService } from \"./init.service\";\nimport { PopupSearchService } from \"./popup-search.service\";\nimport { PopupUtilsService } from \"./popup-utils.service\";\n\nconst needsBackgroundInit = BrowserApi.getBackgroundPage() == null;\nconst isPrivateMode = needsBackgroundInit && BrowserApi.manifestVersion !== 3;\nconst mainBackground: MainBackground = needsBackgroundInit\n  ? createLocalBgService()\n  : BrowserApi.getBackgroundPage().bitwardenMain;\n\nfunction createLocalBgService() {\n  const localBgService = new MainBackground(isPrivateMode);\n  localBgService.bootstrap();\n  return localBgService;\n}\n\nfunction getBgService<T>(service: keyof MainBackground) {\n  return (): T => {\n    return mainBackground ? (mainBackground[service] as any as T) : null;\n  };\n}\n\n@NgModule({\n  imports: [JslibServicesModule],\n  declarations: [],\n  providers: [\n    InitService,\n    DebounceNavigationService,\n    {\n      provide: LOCALE_ID,\n      useFactory: () => getBgService<I18nServiceAbstraction>(\"i18nService\")().translationLocale,\n      deps: [],\n    },\n    {\n      provide: APP_INITIALIZER,\n      useFactory: (initService: InitService) => initService.init(),\n      deps: [InitService],\n      multi: true,\n    },\n    { provide: BaseLockGuardService, useClass: LockGuardService },\n    { provide: BaseUnauthGuardService, useClass: UnauthGuardService },\n    { provide: PopupUtilsService, useFactory: () => new PopupUtilsService(isPrivateMode) },\n    {\n      provide: MessagingService,\n      useFactory: () => {\n        return needsBackgroundInit\n          ? new BrowserMessagingPrivateModePopupService()\n          : new BrowserMessagingService();\n      },\n    },\n    {\n      provide: TwoFactorService,\n      useFactory: getBgService<TwoFactorService>(\"twoFactorService\"),\n      deps: [],\n    },\n    {\n      provide: AuthServiceAbstraction,\n      useFactory: getBgService<AuthService>(\"authService\"),\n      deps: [],\n    },\n    {\n      provide: SearchServiceAbstraction,\n      useFactory: (logService: ConsoleLogService, i18nService: I18nServiceAbstraction) => {\n        return new PopupSearchService(\n          getBgService<SearchService>(\"searchService\")(),\n          logService,\n          i18nService\n        );\n      },\n      deps: [LogServiceAbstraction, I18nServiceAbstraction],\n    },\n    { provide: AuditService, useFactory: getBgService<AuditService>(\"auditService\"), deps: [] },\n    {\n      provide: CipherFileUploadService,\n      useFactory: getBgService<CipherFileUploadService>(\"cipherFileUploadService\"),\n      deps: [],\n    },\n    { provide: CipherService, useFactory: getBgService<CipherService>(\"cipherService\"), deps: [] },\n    {\n      provide: CryptoFunctionService,\n      useFactory: getBgService<CryptoFunctionService>(\"cryptoFunctionService\"),\n      deps: [],\n    },\n    {\n      provide: FileUploadService,\n      useFactory: getBgService<FileUploadService>(\"fileUploadService\"),\n    },\n    {\n      provide: FolderService,\n      useFactory: (\n        cryptoService: CryptoService,\n        i18nService: I18nServiceAbstraction,\n        cipherService: CipherService,\n        stateService: StateServiceAbstraction\n      ) => {\n        return new BrowserFolderService(cryptoService, i18nService, cipherService, stateService);\n      },\n      deps: [CryptoService, I18nServiceAbstraction, CipherService, StateServiceAbstraction],\n    },\n    {\n      provide: InternalFolderService,\n      useExisting: FolderService,\n    },\n    {\n      provide: FolderApiServiceAbstraction,\n      useFactory: (folderService: InternalFolderService, apiService: ApiService) => {\n        return new FolderApiService(folderService, apiService);\n      },\n      deps: [InternalFolderService, ApiService],\n    },\n    {\n      provide: CollectionService,\n      useFactory: getBgService<CollectionService>(\"collectionService\"),\n      deps: [],\n    },\n    {\n      provide: LogServiceAbstraction,\n      useFactory: getBgService<ConsoleLogService>(\"logService\"),\n      deps: [],\n    },\n    {\n      provide: BrowserEnvironmentService,\n      useExisting: EnvironmentService,\n    },\n    {\n      provide: EnvironmentService,\n      useFactory: getBgService<EnvironmentService>(\"environmentService\"),\n      deps: [],\n    },\n    { provide: TotpService, useFactory: getBgService<TotpService>(\"totpService\"), deps: [] },\n    { provide: TokenService, useFactory: getBgService<TokenService>(\"tokenService\"), deps: [] },\n    {\n      provide: I18nServiceAbstraction,\n      useFactory: (stateService: BrowserStateService) => {\n        return new BrowserI18nService(BrowserApi.getUILanguage(window), stateService);\n      },\n      deps: [StateService],\n    },\n    {\n      provide: CryptoService,\n      useFactory: (encryptService: EncryptService) => {\n        const cryptoService = getBgService<CryptoService>(\"cryptoService\")();\n        new ContainerService(cryptoService, encryptService).attachToGlobal(self);\n        return cryptoService;\n      },\n      deps: [EncryptService],\n    },\n    {\n      provide: EventUploadService,\n      useFactory: getBgService<EventUploadService>(\"eventUploadService\"),\n      deps: [],\n    },\n    {\n      provide: EventCollectionService,\n      useFactory: getBgService<EventCollectionService>(\"eventCollectionService\"),\n      deps: [],\n    },\n    {\n      provide: PolicyService,\n      useFactory: (\n        stateService: StateServiceAbstraction,\n        organizationService: OrganizationService\n      ) => {\n        return new BrowserPolicyService(stateService, organizationService);\n      },\n      deps: [StateServiceAbstraction, OrganizationService],\n    },\n    {\n      provide: PolicyApiServiceAbstraction,\n      useFactory: (\n        policyService: InternalPolicyService,\n        apiService: ApiService,\n        stateService: StateService\n      ) => {\n        return new PolicyApiService(policyService, apiService, stateService);\n      },\n      deps: [InternalPolicyService, ApiService, StateService],\n    },\n    {\n      provide: PlatformUtilsService,\n      useFactory: getBgService<PlatformUtilsService>(\"platformUtilsService\"),\n      deps: [],\n    },\n    {\n      provide: PasswordGenerationServiceAbstraction,\n      useFactory: getBgService<PasswordGenerationServiceAbstraction>(\"passwordGenerationService\"),\n      deps: [],\n    },\n    { provide: ApiService, useFactory: getBgService<ApiService>(\"apiService\"), deps: [] },\n    {\n      provide: SendService,\n      useFactory: (\n        cryptoService: CryptoService,\n        i18nService: I18nServiceAbstraction,\n        cryptoFunctionService: CryptoFunctionService,\n        stateServiceAbstraction: StateServiceAbstraction\n      ) => {\n        return new BrowserSendService(\n          cryptoService,\n          i18nService,\n          cryptoFunctionService,\n          stateServiceAbstraction\n        );\n      },\n      deps: [CryptoService, I18nServiceAbstraction, CryptoFunctionService, StateServiceAbstraction],\n    },\n    {\n      provide: InternalSendServiceAbstraction,\n      useExisting: SendService,\n    },\n    {\n      provide: SendApiServiceAbstraction,\n      useFactory: (\n        apiService: ApiService,\n        fileUploadService: FileUploadService,\n        sendService: InternalSendServiceAbstraction\n      ) => {\n        return new SendApiService(apiService, fileUploadService, sendService);\n      },\n      deps: [ApiService, FileUploadService, InternalSendServiceAbstraction],\n    },\n    { provide: SyncService, useFactory: getBgService<SyncService>(\"syncService\"), deps: [] },\n    {\n      provide: SettingsService,\n      useFactory: (stateService: StateServiceAbstraction) => {\n        return new BrowserSettingsService(stateService);\n      },\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: AbstractStorageService,\n      useFactory: getBgService<AbstractStorageService>(\"storageService\"),\n      deps: [],\n    },\n    { provide: AppIdService, useFactory: getBgService<AppIdService>(\"appIdService\"), deps: [] },\n    {\n      provide: AutofillService,\n      useFactory: getBgService<AutofillService>(\"autofillService\"),\n      deps: [],\n    },\n    { provide: ExportService, useFactory: getBgService<ExportService>(\"exportService\"), deps: [] },\n    {\n      provide: KeyConnectorService,\n      useFactory: getBgService<KeyConnectorService>(\"keyConnectorService\"),\n      deps: [],\n    },\n    {\n      provide: UserVerificationService,\n      useFactory: getBgService<UserVerificationService>(\"userVerificationService\"),\n      deps: [],\n    },\n    {\n      provide: VaultTimeoutSettingsService,\n      useFactory: getBgService<VaultTimeoutSettingsService>(\"vaultTimeoutSettingsService\"),\n      deps: [],\n    },\n    {\n      provide: VaultTimeoutService,\n      useFactory: getBgService<VaultTimeoutService>(\"vaultTimeoutService\"),\n      deps: [],\n    },\n    {\n      provide: NotificationsService,\n      useFactory: getBgService<NotificationsService>(\"notificationsService\"),\n      deps: [],\n    },\n    {\n      provide: LogServiceAbstraction,\n      useFactory: getBgService<ConsoleLogService>(\"logService\"),\n      deps: [],\n    },\n    { provide: PasswordRepromptServiceAbstraction, useClass: PasswordRepromptService },\n    {\n      provide: OrganizationService,\n      useFactory: (stateService: StateServiceAbstraction) => {\n        return new BrowserOrganizationService(stateService);\n      },\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: VaultFilterService,\n      useFactory: (\n        stateService: StateServiceAbstraction,\n        organizationService: OrganizationService,\n        folderService: FolderService,\n        policyService: PolicyService\n      ) => {\n        return new VaultFilterService(\n          stateService,\n          organizationService,\n          folderService,\n          getBgService<CipherService>(\"cipherService\")(),\n          getBgService<CollectionService>(\"collectionService\")(),\n          policyService\n        );\n      },\n      deps: [StateServiceAbstraction, OrganizationService, FolderService, PolicyService],\n    },\n    {\n      provide: ProviderService,\n      useFactory: getBgService<ProviderService>(\"providerService\"),\n      deps: [],\n    },\n    {\n      provide: SECURE_STORAGE,\n      useFactory: getBgService<AbstractStorageService>(\"secureStorageService\"),\n      deps: [],\n    },\n    {\n      provide: MEMORY_STORAGE,\n      useFactory: getBgService<AbstractStorageService>(\"memoryStorageService\"),\n    },\n    {\n      provide: StateMigrationService,\n      useFactory: getBgService<StateMigrationService>(\"stateMigrationService\"),\n      deps: [],\n    },\n    {\n      provide: StateServiceAbstraction,\n      useFactory: (\n        storageService: AbstractStorageService,\n        secureStorageService: AbstractStorageService,\n        memoryStorageService: AbstractMemoryStorageService,\n        logService: LogServiceAbstraction,\n        stateMigrationService: StateMigrationService\n      ) => {\n        return new BrowserStateService(\n          storageService,\n          secureStorageService,\n          memoryStorageService,\n          logService,\n          stateMigrationService,\n          new StateFactory(GlobalState, Account)\n        );\n      },\n      deps: [\n        AbstractStorageService,\n        SECURE_STORAGE,\n        MEMORY_STORAGE,\n        LogServiceAbstraction,\n        StateMigrationService,\n      ],\n    },\n    {\n      provide: UsernameGenerationServiceAbstraction,\n      useFactory: getBgService<UsernameGenerationServiceAbstraction>(\"usernameGenerationService\"),\n      deps: [],\n    },\n    {\n      provide: BaseStateServiceAbstraction,\n      useExisting: StateServiceAbstraction,\n      deps: [],\n    },\n    {\n      provide: FileDownloadService,\n      useClass: BrowserFileDownloadService,\n    },\n    {\n      provide: LoginServiceAbstraction,\n      useClass: LoginService,\n      deps: [StateServiceAbstraction],\n    },\n    {\n      provide: AbstractThemingService,\n      useFactory: (\n        stateService: StateServiceAbstraction,\n        platformUtilsService: PlatformUtilsService\n      ) => {\n        return new ThemingService(\n          stateService,\n          // Safari doesn't properly handle the (prefers-color-scheme) media query in the popup window, it always returns light.\n          // In Safari we have to use the background page instead, which comes with limitations like not dynamically changing the extension theme when the system theme is changed.\n          platformUtilsService.isSafari() ? getBgService<Window>(\"backgroundWindow\")() : window,\n          document\n        );\n      },\n      deps: [StateServiceAbstraction, PlatformUtilsService],\n    },\n    {\n      provide: ConfigServiceAbstraction,\n      useClass: BrowserConfigService,\n      deps: [StateServiceAbstraction, ConfigApiServiceAbstraction],\n    },\n  ],\n})\nexport class ServicesModule {}\n","import { A11yModule } from \"@angular/cdk/a11y\";\nimport { DragDropModule } from \"@angular/cdk/drag-drop\";\nimport { LayoutModule } from \"@angular/cdk/layout\";\nimport { OverlayModule } from \"@angular/cdk/overlay\";\nimport { ScrollingModule } from \"@angular/cdk/scrolling\";\n// eslint-disable-next-line import/order\nimport { CurrencyPipe, DatePipe } from \"@angular/common\";\n\n// Register the locales for the application\nimport \"./locales\";\n\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\n\nimport { BitwardenToastModule } from \"@bitwarden/angular/components/toastr.component\";\nimport { JslibModule } from \"@bitwarden/angular/jslib.module\";\nimport { ColorPasswordCountPipe } from \"@bitwarden/angular/pipes/color-password-count.pipe\";\nimport { ColorPasswordPipe } from \"@bitwarden/angular/pipes/color-password.pipe\";\n\nimport { EnvironmentComponent } from \"../auth/popup/environment.component\";\nimport { HintComponent } from \"../auth/popup/hint.component\";\nimport { HomeComponent } from \"../auth/popup/home.component\";\nimport { LockComponent } from \"../auth/popup/lock.component\";\nimport { LoginWithDeviceComponent } from \"../auth/popup/login-with-device.component\";\nimport { LoginComponent } from \"../auth/popup/login.component\";\nimport { RegisterComponent } from \"../auth/popup/register.component\";\nimport { RemovePasswordComponent } from \"../auth/popup/remove-password.component\";\nimport { SetPasswordComponent } from \"../auth/popup/set-password.component\";\nimport { SsoComponent } from \"../auth/popup/sso.component\";\nimport { TwoFactorOptionsComponent } from \"../auth/popup/two-factor-options.component\";\nimport { TwoFactorComponent } from \"../auth/popup/two-factor.component\";\nimport { UpdateTempPasswordComponent } from \"../auth/popup/update-temp-password.component\";\nimport { GeneratorComponent } from \"../tools/popup/generator/generator.component\";\nimport { PasswordGeneratorHistoryComponent } from \"../tools/popup/generator/password-generator-history.component\";\nimport { SendListComponent } from \"../tools/popup/send/components/send-list.component\";\nimport { EffluxDatesComponent as SendEffluxDatesComponent } from \"../tools/popup/send/efflux-dates.component\";\nimport { SendAddEditComponent } from \"../tools/popup/send/send-add-edit.component\";\nimport { SendGroupingsComponent } from \"../tools/popup/send/send-groupings.component\";\nimport { SendTypeComponent } from \"../tools/popup/send/send-type.component\";\nimport { ActionButtonsComponent } from \"../vault/popup/components/action-buttons.component\";\nimport { CipherRowComponent } from \"../vault/popup/components/cipher-row.component\";\nimport { PasswordRepromptComponent } from \"../vault/popup/components/password-reprompt.component\";\nimport { AddEditCustomFieldsComponent } from \"../vault/popup/components/vault/add-edit-custom-fields.component\";\nimport { AddEditComponent } from \"../vault/popup/components/vault/add-edit.component\";\nimport { AttachmentsComponent } from \"../vault/popup/components/vault/attachments.component\";\nimport { CollectionsComponent } from \"../vault/popup/components/vault/collections.component\";\nimport { CurrentTabComponent } from \"../vault/popup/components/vault/current-tab.component\";\nimport { PasswordHistoryComponent } from \"../vault/popup/components/vault/password-history.component\";\nimport { ShareComponent } from \"../vault/popup/components/vault/share.component\";\nimport { VaultFilterComponent } from \"../vault/popup/components/vault/vault-filter.component\";\nimport { VaultItemsComponent } from \"../vault/popup/components/vault/vault-items.component\";\nimport { VaultSelectComponent } from \"../vault/popup/components/vault/vault-select.component\";\nimport { ViewCustomFieldsComponent } from \"../vault/popup/components/vault/view-custom-fields.component\";\nimport { ViewComponent } from \"../vault/popup/components/vault/view.component\";\n\nimport { AppRoutingModule } from \"./app-routing.module\";\nimport { AppComponent } from \"./app.component\";\nimport { PopOutComponent } from \"./components/pop-out.component\";\nimport { PrivateModeWarningComponent } from \"./components/private-mode-warning.component\";\nimport { SetPinComponent } from \"./components/set-pin.component\";\nimport { UserVerificationComponent } from \"./components/user-verification.component\";\nimport { ServicesModule } from \"./services/services.module\";\nimport { AboutComponent } from \"./settings/about.component\";\nimport { AutofillComponent } from \"./settings/autofill.component\";\nimport { ExcludedDomainsComponent } from \"./settings/excluded-domains.component\";\nimport { ExportComponent } from \"./settings/export.component\";\nimport { FolderAddEditComponent } from \"./settings/folder-add-edit.component\";\nimport { FoldersComponent } from \"./settings/folders.component\";\nimport { HelpAndFeedbackComponent } from \"./settings/help-and-feedback.component\";\nimport { OptionsComponent } from \"./settings/options.component\";\nimport { PremiumComponent } from \"./settings/premium.component\";\nimport { SettingsComponent } from \"./settings/settings.component\";\nimport { SyncComponent } from \"./settings/sync.component\";\nimport { VaultTimeoutInputComponent } from \"./settings/vault-timeout-input.component\";\nimport { TabsComponent } from \"./tabs.component\";\n\n@NgModule({\n  imports: [\n    A11yModule,\n    AppRoutingModule,\n    BitwardenToastModule.forRoot({\n      maxOpened: 2,\n      autoDismiss: true,\n      closeButton: true,\n      positionClass: \"toast-bottom-full-width\",\n    }),\n    BrowserAnimationsModule,\n    BrowserModule,\n    DragDropModule,\n    FormsModule,\n    JslibModule,\n    LayoutModule,\n    OverlayModule,\n    ReactiveFormsModule,\n    ScrollingModule,\n    ServicesModule,\n  ],\n  declarations: [\n    ActionButtonsComponent,\n    AddEditComponent,\n    AddEditCustomFieldsComponent,\n    AppComponent,\n    AttachmentsComponent,\n    CipherRowComponent,\n    VaultItemsComponent,\n    CollectionsComponent,\n    ColorPasswordPipe,\n    ColorPasswordCountPipe,\n    CurrentTabComponent,\n    EnvironmentComponent,\n    ExcludedDomainsComponent,\n    ExportComponent,\n    FolderAddEditComponent,\n    FoldersComponent,\n    VaultFilterComponent,\n    HintComponent,\n    HomeComponent,\n    LockComponent,\n    LoginComponent,\n    LoginWithDeviceComponent,\n    OptionsComponent,\n    GeneratorComponent,\n    PasswordGeneratorHistoryComponent,\n    PasswordHistoryComponent,\n    PasswordRepromptComponent,\n    PopOutComponent,\n    PremiumComponent,\n    PrivateModeWarningComponent,\n    RegisterComponent,\n    SendAddEditComponent,\n    SendEffluxDatesComponent,\n    SendGroupingsComponent,\n    SendListComponent,\n    SendTypeComponent,\n    SetPasswordComponent,\n    SetPinComponent,\n    SettingsComponent,\n    ShareComponent,\n    SsoComponent,\n    SyncComponent,\n    TabsComponent,\n    TwoFactorComponent,\n    TwoFactorOptionsComponent,\n    UpdateTempPasswordComponent,\n    UserVerificationComponent,\n    VaultTimeoutInputComponent,\n    ViewComponent,\n    ViewCustomFieldsComponent,\n    RemovePasswordComponent,\n    VaultSelectComponent,\n    AboutComponent,\n    HelpAndFeedbackComponent,\n    AutofillComponent,\n  ],\n  providers: [CurrencyPipe, DatePipe],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","import { enableProdMode } from \"@angular/core\";\nimport { platformBrowserDynamic } from \"@angular/platform-browser-dynamic\";\n\nrequire(\"./scss/popup.scss\");\n\nimport { AppModule } from \"./app.module\";\n\nif (process.env.ENV === \"production\") {\n  enableProdMode();\n}\n\nfunction init() {\n  platformBrowserDynamic().bootstrapModule(AppModule, { preserveWhitespaces: true });\n}\n\ninit();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + \"encrypt-worker\" + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t347: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_bitwarden_browser\"] = self[\"webpackChunk_bitwarden_browser\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [286,902], () => (__webpack_require__(87607)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","remove","BitwardenToast","constructor","toastrService","toastPackage","super","opacity","BitwardenToastGlobalConfig","toastComponent","BitwardenToastModule","static","config","ngModule","providers","provide","useValue","default","numberFormats","Visa","cardLength","blocks","Mastercard","Maestro","Discover","JCB","UnionPay","Amex","Other","CreditCardNumberPipe","transform","creditCardNumber","brand","rules","length","matchingRule","find","r","chunks","total","forEach","c","push","slice","join","TranslationService","I18nService","I18nPipe","i18nService","id","p1","p2","p3","this","t","SearchPipe","items","searchText","prop1","prop2","prop3","trim","toLowerCase","filter","i","propValue","toString","indexOf","UserNamePipe","user","name","email","OrganizationApiKeyType","OrganizationConnectionType","OrganizationUserStatusType","OrganizationUserType","PolicyType","ProviderUserStatusType","ProviderUserType","ScimProviderType","UserTypePipe","value","Owner","Admin","User","Manager","Custom","JslibModule","forRoot","maxOpened","autoDismiss","closeButton","AuthenticationStatus","ForceResetPasswordReason","AuthService","MessagingService","KeyConnectorService","StateService","AuthGuard","authService","router","messagingService","keyConnectorService","stateService","canActivate","route","routerState","authStatus","getAuthStatus","LoggedOut","send","url","Locked","createUrlTree","queryParams","promptBiometric","includes","getConvertAccountRequired","getForcePasswordResetReason","None","LockGuard","homepage","loginpage","redirectUrl","UnauthGuard","PlatformUtilsService","EnvironmentService","platformUtilsService","environmentService","onSaved","showCustom","urls","getUrls","baseUrl","base","webVaultUrl","webVault","apiUrl","api","identityUrl","identity","iconsUrl","icons","notificationsUrl","notifications","submit","resUrls","setUrls","showToast","saved","toggleCustom","emit","EnvironmentUrls","events","keyConnector","obj","Object","assign","urlsSubject","Subject","scimUrl","activeAccount$","pipe","concatMap","setUrlsFromStorage","subscribe","hasBaseUrl","getNotificationsUrl","getWebVaultUrl","getSendUrl","getIconsUrl","getApiUrl","getIdentityUrl","getEventsUrl","eventsUrl","getKeyConnectorUrl","keyConnectorUrl","getScimUrl","getEnvironmentUrls","envUrls","formatUrl","scim","setEnvironmentUrls","next","replace","startsWith","isCloud","isSelfHosted","getFlags","envFlags","JSON","parse","flagEnabled","flag","flags","ClientType","DeviceType","EncryptedExportType","EncryptionType","BrowserEnvironmentService","logService","hasManagedEnvironment","getManagedEnvironment","e","error","settingsHaveChanged","env","Promise","resolve","reject","chrome","storage","managed","get","result","runtime","lastError","environment","setUrlsToManagedEnvironment","BoxRowDirective","elRef","el","nativeElement","ngOnInit","formEls","Array","from","querySelectorAll","formEl","addEventListener","classList","add","onClick","event","target","contains","tagName","inputEl","type","click","focus","EXPECTED_NUM_PARTS_BY_ENCRYPTION_TYPE","AesCbc256_B64","AesCbc128_HmacSha256_B64","AesCbc256_HmacSha256_B64","Rsa2048_OaepSha256_B64","Rsa2048_OaepSha1_B64","Rsa2048_OaepSha256_HmacSha256_B64","Rsa2048_OaepSha1_HmacSha256_B64","EventSystemUser","EventType","FieldType","FileUploadType","HashPurpose","HtmlStorageLocation","HttpStatusCode","KdfType","KdfConfig","iterations","memory","parallelism","DEFAULT_KDF_TYPE","PBKDF2_SHA256","DEFAULT_KDF_CONFIG","KeySuffixOptions","LoginLinkedId","CardLinkedId","IdentityLinkedId","LogLevelType","NativeMessagingVersion","NotificationType","ProductType","ProviderType","SecureNoteType","StateVersion","StorageLocation","ThemeType","UriMatchType","nodeURL","window","inited","isNode","process","release","isBrowser","isMobileBrowser","isMobile","isAppleMobileBrowser","isAppleMobile","global","g","self","str","Uint8Array","Buffer","binaryString","atob","bytes","charCodeAt","fromB64ToArray","fromUrlB64ToB64","parseInt","substr","strUtf8","unescape","encodeURIComponent","arr","buffer","binary","byteLength","String","fromCharCode","btoa","fromB64toUrlB64","fromBufferToB64","b64Str","encodedString","apply","decodeURIComponent","escape","prototype","map","call","x","urlB64Str","output","Error","fromB64ToUtf8","utfStr","fromBufferToUrlB64","fromUtf8ToArray","Math","random","RegExp","test","uriString","isNullOrWhitespace","hostname","validHosts","getUrl","host","parseResult","isIp","domain","search","Map","split","pair","parts","set","prop","a","b","collator","compare","localeCompare","undefined","source","keys","k","Number","isNaN","getUrlObject","s","charAt","toUpperCase","bgColor","threshold","svgTextFill","bgColorHexNums","substring","hash","color","bitwardenContainerService","fromEntries","record","entries","destination","denormalizedPath","win","mobile","navigator","userAgent","vendor","opera","match","ms","setTimeout","generator","of","switchMap","hasProtocol","URL","regexpEmojiPresentation","minimumPasswordLength","DomainMatchBlacklist","Set","init","EncString","encryptedStringOrType","data","iv","mac","initFromData","initFromEncryptedString","ivBytes","macBytes","dataBytes","toJSON","encryptedString","encType","encryptionType","encPieces","parseEncryptedString","headerPieces","decrypt","orgId","key","decryptedValue","getKeyForDecryption","encryptService","getEncryptService","decryptToUtf8","cryptoService","getCryptoService","getOrgKey","getKeyForUserEncryption","Domain","buildDomainModel","dataObj","notEncList","hasOwnProperty","objProp","buildDataModel","notEncStringList","decryptObj","viewModel","promises","theProp","p","then","mapProp","val","all","MasterPasswordPolicyOptions","minComplexity","minLength","requireUpper","requireLower","requireNumbers","requireSpecial","enforceOnLogin","policy","options","CalloutComponent","useAlertRole","calloutStyle","enforcedPolicyMessage","title","icon","getPasswordScoreAlertDisplay","enforcedPolicyOptions","InputVerbatimDirective","appInputVerbatim","condition","disableComplete","renderer","hasAttribute","setAttribute","StopClickDirective","$event","preventDefault","resetEnvironment","EnvironmentComponent","showEditedManagedSettings","navigate","PasswordHintRequest","ApiService","LogService","LoginService","apiService","loginService","successRoute","getEmail","formPromise","postPasswordHint","onSuccessfulSubmit","ValidationService","ApiActionDirective","validationService","ngOnChanges","changes","appApiAction","loading","response","captchaRequired","getSingleMessage","showError","AutofocusDirective","appAutofocus","autofocus","ngZone","isStable","onStable","take","HintComponent","HomeComponent","formBuilder","loginInitiated","formGroup","group","rememberEmail","savedEmail","getRememberEmail","patchValue","getRememberedEmail","markAllAsTouched","invalid","setEmail","setRememberEmail","selfHostedDomain","setFormValues","SecretVerificationRequest","PasswordGenerationServiceAbstraction","PasswordGeneratorPolicyOptions","defaultType","useUppercase","useLowercase","useNumbers","numberCount","useSpecial","specialCount","minNumberWords","capitalize","includeNumber","inEffect","EFFLongWordList","GeneratedPasswordHistory","password","date","DefaultOptions","ambiguous","number","minNumber","uppercase","minUppercase","lowercase","minLowercase","special","minSpecial","numWords","wordSeparator","PasswordGenerationService","policyService","generatePassword","o","generatePassphrase","sanitizePasswordLength","positions","shuffleArray","allCharSet","lowercaseCharSet","uppercaseCharSet","numberCharSet","specialCharSet","positionChars","randomCharIndex","randomNumber","listLength","wordList","wordIndex","appendRandomNumberToRandomWord","getOptions","getPasswordGenerationOptions","setPasswordGenerationOptions","enforcedOptions","enforcePasswordGeneratorPoliciesOnOptions","getPasswordGeneratorPolicyOptions","policies","getAll","PasswordGenerator","currentPolicy","enabled","useUpper","useLower","minNumbers","saveOptions","getHistory","hasKey","getDecryptedPasswordGenerationHistory","encrypted","getEncryptedPasswordGenerationHistory","decrypted","decryptHistory","setDecryptedPasswordGenerationHistory","passwordGenerationHistory","addHistory","currentHistory","matchesPrevious","unshift","Date","now","pop","newHistory","encryptHistory","setEncryptedPasswordGenerationHistory","clear","userId","passwordStrength","emailInput","userInputs","globalUserInputs","emailToUserInputs","finalUserInputs","normalizeOptions","atPosition","index","num","history","item","encrypt","array","j","forGeneration","minUppercaseCalc","minLowercaseCalc","minNumberCalc","minSpecialCalc","CryptoService","VaultTimeoutService","VaultTimeoutSettingsService","PolicyApiServiceAbstraction","PolicyService","InternalPolicyService","vaultTimeoutService","vaultTimeoutSettingsService","policyApiService","passwordGenerationService","masterPassword","pin","showPassword","pinLock","webVaultHostname","forcePasswordResetRoute","invalidPinAttempts","enforcedMasterPasswordOptions","destroy$","load","takeUntil","ngOnDestroy","complete","handlePinRequiredUnlock","handleMasterPasswordRequiredUnlock","logOut","showDialog","unlockBiometric","biometricLock","success","getKey","Biometric","doContinue","togglePassword","input","document","getElementById","doUnlockWithPin","failed","kdf","getKdfType","kdfConfig","getKdfConfig","pinSet","makeKeyFromPin","getDecryptedPinProtected","encKey","getEncKey","protectedPin","getProtectedPin","setKeyAndContinue","doUnlockWithMasterPassword","makeKey","passwordValid","getKeyHash","compareAndUpdateKeyHash","request","serverKeyHash","hashPassword","ServerAuthorization","masterPasswordHash","postAccountVerifyPassword","fromResponse","localKeyHash","LocalAuthorization","setKeyHash","decPin","pinKey","makePinKey","setDecryptedPinProtected","evaluatePasswordAfterUnlock","setKey","setEverBeenUnlocked","disableFavicon","getDisableFavicon","setDisableFavicon","firstValueFrom","masterPasswordPolicyOptions$","requirePasswordChange","setForcePasswordResetReason","WeakMasterPassword","isPinLockSet","supportsBiometric","isBiometricLockSet","hasKeyStored","supportsSecureStorage","biometricText","getBiometricText","usesKeyConnector","getUsesKeyConnector","hideInput","vaultUrl","score","evaluateMasterPassword","BiometricErrors","startDesktop","description","desktopIntegrationDisabled","A11yTitleDirective","appA11yTitle","SafariApp","command","resolveNow","messageId","getTime","floor","MAX_SAFE_INTEGER","browser","sendNativeMessage","responseData","DialogPromiseExpiration","BrowserPlatformUtilsService","clipboardWriteCallback","biometricCallback","showDialogResolves","passwordDialogResolves","deviceCache","getDevice","isFirefox","FirefoxExtension","isOpera","OperaExtension","isEdge","EdgeExtension","isVivaldi","VivaldiExtension","isChrome","ChromeExtension","isSafari","SafariExtension","getDeviceString","getClientType","Browser","opr","addons","isIE","isMacAppStore","isViewOpen","sidebarView","sidebarViewName","extension","getViews","lockTimeout","launchUri","uri","extensionPage","getApplicationVersion","getApplicationVersionNumber","supportsWebAuthn","PublicKeyCredential","supportsDuo","text","body","confirmText","cancelText","bodyIsHtml","dialogId","html","isDev","isSelfHost","copyToClipboard","doc","clearing","clearMs","sendMessageToApp","clipboard","writeText","queryCommandSupported","textarea","createElement","textContent","style","position","appendChild","select","execCommand","console","warn","removeChild","readFromClipboard","readText","resolveDialogPromise","confirmed","has","delete","resolvePasswordDialogPromise","canceled","resolveObj","tryResolve","os","getBrowserInfo","version","authenticateBiometric","sidebarAction","getAutofillKeyboardShortcut","autofillCommand","commands","shortcut","getPlatformInfo","manifestVersion","getManifest","manifest_version","tabsQueryFirst","active","windowId","windows","WINDOW_ID_CURRENT","tabId","tabs","currentWindow","tabsQuery","query","tab","tabSendMessage","sendMessage","message","responseCallback","incognito","callback","onCreated","addListener","getBackgroundPage","openerTab","create","openerTabId","relativeUrl","createNewTab","fullUrl","getURL","parsedUrl","searchParams","windowType","tabToClose","focusTab","onMessage","msg","sender","subscriber","arg","update","highlighted","isWebExtensionsApi","isFirefoxOnAndroid","finally","close","i18n","getUILanguage","location","reload","w","href","application","connectNative","isChromeApi","permission","permissions","action","browserAction","isSafariApi","PopupUtilsService","privateMode","inSidebar","inTab","inPopout","inPopup","inPrivateMode","getContentScrollY","scrollingContainer","getElementsByTagName","scrollTop","setContentScrollY","scrollY","popOut","hrefParts","bodyRect","querySelector","getBoundingClientRect","width","round","height","enableCloseTabWarning","disableCloseTabWarning","unloadSubscription","fromEvent","returnValue","unsubscribe","PrivateModeWarningComponent","popupUtilsService","showWarning","LockComponent","pendingBiometric","isInitialLockScreen","previousPopupUrl","disableAutoBiometricsPrompt","getDisableAutoBiometricsPrompt","biometricError","AuthRequestType","AuthenticationType","PasswordLogInCredentials","captchaToken","twoFactor","SsoLogInCredentials","code","codeVerifier","PasswordlessLogInCredentials","accessCode","authRequestId","decKey","localPasswordHash","PasswordlessCreateAuthRequest","deviceIdentifier","publicKey","SymmetricCryptoKey","macKey","keyB64","encKeyB64","macKeyB64","arrayBuffer","fromString","BaseResponse","getResponseProperty","propertyName","exactName","otherCasePropertyName","ErrorResponse","status","identityResponse","errorModel","responseErrorModel","validationErrors","captchaSiteKey","HCaptcha_SiteKey","statusCode","getAllMessages","messages","prefix","lastSep","lastIndexOf","IFrameComponent","path","iframeId","successCallback","errorCallback","infoCallback","parseFunction","parseMessage","bind","connectorLink","stop","start","iframe","src","contentWindow","postMessage","base64Encode","cleanup","removeEventListener","createParams","URLSearchParams","stringify","parent","v","initComponent","params","validMessage","origin","CaptchaIFrame","parsedMessage","siteKey","locale","translationLocale","CaptchaProtectedComponent","setupCaptcha","captcha","token","info","showCaptcha","handleCaptchaRequired","CryptoFunctionService","AppIdService","AnonymousHubService","cryptoFunctionService","appIdService","anonymousHubService","showResendNotification","twoFactorRoute","resendTimeout","getCurrentNavigation","getPushNotifcationObs$","confirmResponse","startPasswordlessLogin","buildAuthRequest","reqResponse","postAuthRequest","passwordlessRequest","createHubConnection","stopHubConnection","requestId","getAuthResponse","requestApproved","credentials","buildLoginCredntials","loginResponse","logIn","requiresTwoFactor","onSuccessfulLoginTwoFactorNavigate","forcePasswordReset","onSuccessfulLoginForceResetNavigate","setRememberEmailValues","onSuccessfulLogin","onSuccessfulLoginNavigate","rememberedEmail","setRememberedEmail","clearValues","authRequestKeyPair","rsaGenerateKeyPair","getAppId","fingerprintPhrase","getFingerprint","AuthenticateAndUnlock","rsaDecrypt","decMasterPasswordHash","localHashedPassword","SyncService","LoginWithDeviceComponent","syncService","fullSync","FormValidationErrorsService","loggedEmail","formValidationErrorService","selfHosted","validatedEmail","paramEmailSet","queryParamsEmail","setValue","errorText","getErrorToastMessage","saveEmailSettings","clearValidators","updateValueAndValidity","valid","launchSsoBrowser","clientId","ssoRedirectUri","passwordOptions","numbers","state","ssoCodeVerifier","codeVerifierHash","codeChallenge","setSsoState","setSsoCodeVerifier","webUrl","controls","validateEmail","markAsTouched","toggleValidateEmail","getLoginWithDevice","masterPasswordInput","reset","getFormValidationErrors","shift","errorName","errorTag","controlName","res","getKnownDevice","showLoginWithDevice","LoginComponent","showPasswordless","settings","redirectUri","KeysRequest","encryptedPrivateKey","RegisterRequest","masterPasswordHint","referenceData","captchaResponse","kdfIterations","kdfMemory","kdfParallelism","InputsFieldMatch","matchTo","errorMessage","control","inputsMatchError","inputsDoesntMatchError","field","fieldMatchTo","fieldCtrl","fieldMatchToCtrl","setErrors","AuditService","auditService","isInTrialFlow","createdAccount","showTerms","showErrorSummary","minimumLength","confirmMasterPassword","hint","validateInputsDoesntMatch","checkForBreaches","acceptPolicies","acceptPoliciesValidation","validator","validateFormInputsMatch","accountCreated","captchaBypassToken","characterMinimumMessage","registerResponse","registerAccount","buildRegisterRequest","successful","getStrengthResult","passwordStrengthResult","getPasswordScoreText","required","validateRegistration","hasError","isValid","passwordWeak","passwordLeak","passwordLeaked","makeEncKey","hashedPassword","makeKeyPair","orgInvite","getOrganizationInvitation","organizationUserId","postRegister","PasswordStrengthComponent","updatePasswordStrength","masterPasswordScoreColor","masterPasswordScore","masterPasswordScoreText","showText","passwordScoreColor","scoreWidth","masterPasswordStrengthTimeout","setPasswordScoreText","clearTimeout","strengthResult","RegisterComponent","OrganizationApiServiceAbstraction","organizationApiService","continuing","leaving","organization","getManagingOrganization","convert","actionPromise","migrateUser","removeConvertAccountRequired","leave","RemovePasswordComponent","OrganizationUserResetPasswordEnrollmentRequest","SetPasswordRequest","orgIdentifier","ChangePasswordComponent","enforcedPasswordPolicyOptions","strongPassword","setupSubmitActions","remakeEncKey","performSubmitActions","masterPasswordRetype","weakPassword","leakedPassword","OrganizationUserService","organizationUserService","syncLoading","identifier","resetPasswordAutoEnroll","first","qParams","getAutoEnrollStatus","resetPasswordEnabled","getMasterPasswordPoliciesForInvitedUsers","setPassword","onSetPasswordSuccess","getKeys","getUserId","userEncKey","encryptedKey","rsaEncrypt","resetRequest","resetPasswordKey","putOrganizationUserResetPasswordEnrollment","onSuccessfulChangePassword","confirmField","setKdfType","setKdfConfig","setEncKey","setEncPrivateKey","SetPasswordComponent","loggingIn","changePasswordRoute","getSsoCodeVerifier","getSsoState","checkState","getOrgIdentifierFromState","returnUri","includeUserIdentifier","initiateSsoFormPromise","preValidateSso","authorizeUrl","buildAuthorizeUrl","sameWindow","userIdentifier","getSsoUserIdentifier","orgIdFromState","sso","resetMasterPassword","onSuccessfulLoginChangePasswordNavigate","stateSplit","checkStateSplit","SsoComponent","Unlocked","open","TwoFactorService","twoFactorService","onProviderSelected","onRecoverSelected","getSupportedProviders","choose","recover","TwoFactorOptionsComponent","setSelectedProvider","TwoFactorProviderType","TokenTwoFactorRequest","provider","remember","TwoFactorEmailRequest","TwoFactorProviders","Authenticator","priority","sort","premium","Yubikey","Duo","OrganizationDuo","Email","WebAuthn","selectedTwoFactorProviderType","twoFactorProvidersData","getDefaultProvider","webAuthnSupported","providerType","providerPriority","_value","clearSelectedProvider","setProviders","twoFactorProviders2","clearProviders","getProviders","WebAuthnIFrame","webAuthnNewTab","btnText","append","allow","webAuthnReady","selectedProviderType","webAuthn","twoFactorEmail","loginRoute","authing","needsLock","cleanupWebAuthn","providerData","authWebAuthn","Host","sig_request","Signature","submit_callback","f","sig","size","sendEmail","doSubmit","logInTwoFactor","doToast","emailPromise","authRequestAccessCode","postTwoFactorEmail","authingWithPassword","authingWithSso","authingWithUserApiKey","authingWithPasswordless","BroadcasterService","anotherMethod","TwoFactorComponent","broadcasterService","showNewWindowMessage","snapshot","paramMap","isLinux","VerificationType","PasswordRequest","OrganizationUserResetPasswordRequest","UpdateTempPasswordRequest","UserVerificationService","requireCurrentPassword","reason","userVerificationService","verification","MasterPassword","secret","masterPasswordWarningText","newKey","newPasswordHash","newEncKey","AdminForcePasswordReset","updateTempPassword","updatePassword","newMasterPasswordHash","putUpdateTempPassword","buildRequest","postPassword","UpdateTempPasswordComponent","UsernameGenerationServiceAbstraction","AnonAddyForwarder","generate","apiKey","anonaddy","requestInit","redirect","cache","method","headers","Headers","Authorization","website","Request","nativeFetch","json","DuckDuckGoForwarder","address","FastmailForwarder","accountId","getAccountId","using","methodCalls","emailPrefix","fastmail","methodResponses","created","notCreated","primaryAccounts","FirefoxRelayForwarder","generated_for","full_address","ForwarderOptions","FastmailForwarderOptions","AnonAddyForwarderOptions","SimpleLoginForwarder","Authentication","note","alias","wordCapitalize","wordIncludeNumber","subaddressType","catchallType","forwardedService","forwardedAnonAddyDomain","UsernameGenerationService","generateUsername","generateCatchall","generateSubaddress","generateForwarded","generateWord","word","zeroPad","subaddressEmail","atIndex","emailBeginning","emailEnding","subaddressString","randomString","catchallDomain","startString","forwarder","forwarderOptions","forwardedSimpleLoginApiKey","forwardedAnonAddyApiToken","forwardedFirefoxApiToken","forwardedFastmailApiToken","forwardedDuckDuckGoToken","getUsernameGenerationOptions","setUsernameGenerationOptions","charSet","usernameGenerationService","comingFromAddEdit","onSelected","usernameOptions","username","showOptions","avoidAmbiguous","usernameWebsite","typeOptions","passTypeOptions","usernameTypeOptions","desc","subaddressOptions","catchallOptions","initForwardOptions","passwordOptionsResponse","websiteOption","generatorOptions","getGeneratorOptions","regenerateWithoutButtonPress","regenerate","typeChanged","setGeneratorOptions","regeneratePassword","regenerateUsername","sliderChanged","savePasswordOptions","sliderInput","normalizePasswordOptions","saveUsernameOptions","usernameGeneratingPromise","copy","copyOptions","toggleOptions","checked","forwardOptions","validForSelfHosted","SelectCopyDirective","onCopy","copyText","selection","getSelection","rangeCount","getRangeAt","stringEndPos","newLinePos","expand","PopOutComponent","show","ColorPasswordPipe","generateTemplate","character","templateGenerator","passwordArray","colorizedPassword","isSpecial","GeneratorComponent","addEditCipherInfo","getAddEditCipherInfo","cipherState","cipher","login","hasUris","uris","setAddEditCipherInfo","back","SendType","PasswordGeneratorHistoryComponent","SendFileView","sizeName","fileName","fileSize","SendTextView","hidden","maskedText","SendView","accessId","notes","file","maxAccessCount","accessCount","revisionDate","deletionDate","expirationDate","disabled","hideEmail","urlB64Key","maxAccessCountReached","expired","pendingDelete","cryptoKey","fromJSON","SendService","InternalSendService","SendApiService","BrowserPath","DateField","DatePreset","AddEditComponent","datePipe","sendService","sendApiService","onSavedSend","onDeletedSend","onCancelled","copyLink","disableSend","disableHideEmail","sendType","canAccessPremium","emailVerified","alertShown","componentName","File","Text","sendLinkBaseUrl","link","isDateTimeLocalSupported","policyAppliesToActiveUser$","DisableSend","policyAppliesToActiveUser","SendOptions","editMode","sendId","setDates","getCanAccessPremium","getEmailVerified","loadSend","setDate","getDate","hasPassword","files","encryptSend","encSend","uploadPromise","save","handleCopyLinkToClipboard","copyLinkToClipboard","deletePromise","sendData","togglePasswordVisible","copySuccess","BrowserStateService","browserPath","Firefox","Safari","Default","selectedDeletionDatePreset","datesForm","selectedExpirationDatePreset","defaultDeletionDateTime","defaultExpirationDateTime","fallbackDeletionDate","fallbackDeletionTime","fallbackExpirationDate","fallbackExpirationTime","formattedDeletionDate","Never","SevenDays","miliseconds","setTime","formattedExpirationDate","safariDeletionTimePresetOptions","safariTimePresetOptions","DeletionDate","safariExpirationTimePresetOptions","ExpriationDate","nextWeek","datesChanged","deletionDatePresets","OneHour","OneDay","TwoDays","ThreeDays","ThirtyDays","expirationDatePresets","concat","setInitialFormValues","emitDates","valueChanges","onDeletionDatePresetSelect","clearExpiration","initialDeletionDate","toISOString","toTimeString","initialExpirationDate","twentyFourHour","noon","midnight","ams","pms","h","m","hour","minutes","midnightOption","twelveHour","noonOption","amOption","pmOption","validTimes","popOutWindow","EffluxDatesComponent","useExisting","SendAddEditComponent","isUnsupportedMac","showFileSelector","showFilePopoutMessage","showFirefoxFileWarning","showSafariFileWarning","showChromiumFileWarning","appVersion","cancel","SearchService","indexedEntityId","SendComponent","searchService","loaded","refreshing","sends","filteredSends","searchPending","hasSearched","sendViews$","onSuccessfulLoad","selectAll","refresh","applyFilter","timeout","searchTimeout","isSearchable","applyTextSearch","removePassword","onSuccessfulRemovePassword","onSuccessfulDelete","searchTextChanged","clearSelections","selectedAll","selectType","selectedType","searchSends","BrowserComponentState","BrowserSendComponentState","typeCounts","StopPropDirective","stopPropagation","selectSend","copySendLink","SendListComponent","disabledByPolicy","onCopySendLink","onRemovePassword","onDeleteSend","addSend","ComponentId","SendGroupingsComponent","popupUtils","changeDetectorRef","showLeftHeader","calculateTypeCounts","setBrowserSendTypeComponentState","restoredScopeState","restoreState","syncInProgress","loadedTimeout","run","detectChanges","saveState","showSearching","setBrowserSendComponentState","getBrowserSendComponentState","SendTypeComponent","applySavedState","getBrowserSendTypeComponentState","groupingTitle","successfully","refreshTimeout","routeDirection","isMember","org","OrganizationService","CipherRepromptType","CipherType","LinkedMetadata","propertyKey","_i18nKey","i18nKey","linkedFieldOption","linkedFieldOptions","ItemView","InitializerKey","CardView","cardholderName","expMonth","expYear","_brand","_number","_subTitle","maskedCode","repeat","maskedNumber","subTitle","count","expiration","exp","formatYear","year","AttachmentView","FieldView","newField","showValue","showCount","linkedId","maskedValue","IdentityView","middleName","address1","address2","address3","city","postalCode","country","company","phone","ssn","passportNumber","licenseNumber","_firstName","_lastName","firstName","lastName","fullName","fullAddress","fullAddressPart2","addressPart2","CanLaunchWhitelist","LoginUriView","u","_uri","_domain","_hostname","_host","_canLaunch","RegularExpression","hostnameOrUri","hostOrUri","isWebsite","canLaunch","matchesUri","targetUri","equivalentDomains","defaultUriMatch","matchType","targetDomain","matchDomains","matchesDomain","urlHost","Exact","StartsWith","domainUrlHost","LoginView","l","passwordRevisionDate","totp","autofillOnPageLoad","maskedPassword","some","hasTotp","PasswordHistoryView","ph","lastUsedDate","SecureNoteView","n","CipherView","initializerKey","organizationId","folderId","favorite","organizationUseTotp","edit","viewPassword","card","secureNote","attachments","fields","passwordHistory","collectionIds","creationDate","deletedDate","reprompt","localData","Login","SecureNote","Card","Identity","hasPasswordHistory","hasAttachments","hasOldAttachments","hasFields","passwordRevisionDisplayDate","isDeleted","linkedFieldValue","linkedFieldI18nKey","view","CipherService","FolderService","InternalFolderService","CollectionService","EventCollectionService","PasswordRepromptService","cipherService","folderService","collectionService","eventCollectionService","passwordRepromptService","organizationService","cloneMode","onSavedCipher","onDeletedCipher","onRestoredCipher","onEditAttachments","onShareCipher","onEditCollections","onGeneratePassword","onGenerateUsername","collections","showCardNumber","showCardCode","cipherType","ownershipOptions","currentDate","allowPersonal","canUseReprompt","cardBrandOptions","cardExpMonthOptions","identityTitleOptions","uriMatchOptions","autofillOnPageLoadOptions","writeableCollections","loadCollections","PersonalOwnership","personalOwnershipPolicyAppliesToActiveUser","myEmail","Confirmed","defaultOwnerId","cipherId","loadedAddEditCipherInfo","loadAddEditCipherInfo","loadCipher","Generic","organizationChanged","folders$","folderViews$","previousCipherId","collect","Cipher_ClientViewed","restore","encryptCipher","saveCipher","addUri","removeUri","splice","getCardExpMonthDisplay","trackByFunction","share","editCollections","deleteCipher","restorePromise","restoreCipher","Cipher_ClientToggledPasswordVisible","toggleCardNumber","Cipher_ClientToggledCardNumberVisible","toggleCardCode","Cipher_ClientToggledCardCodeVisible","toggleUriOptions","loginUriMatchChanged","useTotp","checkPassword","checkPasswordPromise","matches","repromptChanged","Password","getAllDecrypted","readOnly","createWithServer","updateWithServer","asAdmin","canEditAnyCollection","deleteWithServer","softDeleteWithServer","restoreWithServer","loadedSavedInfo","addFieldType","fieldType","eventType","addFieldTypeOptions","Hidden","Boolean","addFieldLinkedTypeOption","Linked","thisCipherType","setLinkedFieldOptions","firstChange","resetCipherLinkedFields","addField","removeField","toggleFieldValue","Cipher_ClientToggledHiddenFieldVisible","drop","previousIndex","currentIndex","TrueFalseValueDirective","elementRef","trueValue","falseValue","propagateChange","_","onHostChange","ev","writeValue","setProperty","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","multi","AddEditCustomFieldsComponent","toggleUriInput","showAttachments","collectionId","collection","selectedVault","openAttachmentsInPopup","currentUris","setFocus","showAutoFillOnPageLoadOptions","getEnableAutoFillOnPageLoad","delay","destinationUrl","currentBaseUrl","saveCipherState","showCurrentUris","allowOwnershipOptions","EncArrayBuffer","encBytes","ENC_TYPE_LENGTH","throwDecryptionError","b64","FileDownloadService","fileDownloadService","onUploadedAttachment","onDeletedAttachment","onReuploadedAttachment","deletePromises","reuploadPromises","emergencyAccessId","hasUpdatedKey","fileEl","saveCipherAttachment","cipherDomain","attachment","deleteCipherAttachment","download","downloading","canAccessAttachments","getAttachmentData","fetch","encBuf","decBuf","decryptFromBytes","blobData","hasEncKey","reuploadCipherAttachment","admin","saveAttachmentRawWithServer","foundAttachment","a2","saveAttachmentWithServer","attachmentId","deleteAttachmentWithServer","reupload","AttachmentsComponent","openedAttachmentsInPopup","allowSelectNone","onSavedCollections","loadCipherCollections","selectedCollectionIds","saveCollections","saveCollectionsWithServer","CollectionsComponent","VaultFilter","selectedCollection","selectedFolder","myVaultOnly","refreshCollectionsAndFolders","resetFilter","selectedCollectionId","selectedFolderId","resetOrganization","selectedOrganizationId","buildFilter","cipherPassesFilter","TreeNode","node","children","ServiceUtils","nodeTree","partIndex","delimiter","end","partName","nestedTraverse","newPartName","getTreeNodeObject","getTreeNodeObjectFromList","FolderView","DynamicTreeNode","hasId","fullList","storeCollapsedFilterNodes","collapsedFilterNodes","setCollapsedGroupings","buildCollapsedFilterNodes","getCollapsedGroupings","buildOrganizations","organizations","buildNestedFolders","transformation","storedFolders","folders","orgCiphers","oc","nestedFolders","getAllFoldersNested","nestedList","mergeMap","buildCollections","storedCollections","nestedCollections","getAllNested","checkForSingleOrganizationPolicy","SingleOrg","checkForPersonalOwnershipPolicy","nodes","folderCopy","getFolderNested","VaultFilterService","vaultFilter","allVaults","myVault","getVaultFilter","setVaultFilter","filterCipherForSelectedVault","AutofillService","FallbackSrcDirective","onError","appFallbackSrc","cardIcons","RuPay","IconComponent","image","fallbackImage","imageEnabled","setLoginIcon","setCardIcon","hostnameUri","TotpService","launchCipher","ActionButtonsComponent","totpService","onView","launchEvent","showView","userHasPremiumAccess","typeI18nKey","aType","protectedFields","showPasswordPrompt","displayTotpCopyButton","getCode","Cipher_ClientCopiedCardCode","CipherRowComponent","selectCipher","viewCipher","openOverlay","selectMyVault","selectOrganization","selectAllVaults","VaultSelectComponent","shouldShow","enforcePersonalOwnership","vaultFilterService","overlay","viewContainerRef","onVaultSelectionChanged","_selectedVault","BehaviorSubject","isOpen","selectedVault$","asObservable","overlayPostition","originX","originY","overlayX","overlayY","_destroy","handleKeyboardEvent","organizations$","memberOrganizations$","orgs","firstOrganization","selectedOrganization","viewPortHeight","max","documentElement","clientHeight","innerHeight","positionStrategy","flexibleConnectedTo","buttonRef","withFlexibleDimensions","withPush","withViewportMargin","withGrowAfterOpen","withPositions","overlayRef","hasBackdrop","maxHeight","backdropClass","scrollStrategy","scrollStrategies","templatePortal","templateRef","attach","merge","outsidePointerEvents","backdropClick","detachments","dispose","dismissCallout","goToSettings","fillCipher","addCipher","CurrentTabComponent","autofillService","pageDetails","searchTypeSearch","isLoading","showOrganizations","showHowToAutofill","search$","frameId","webExtSender","details","setCallout","debounceTime","searchVault","getActivateAutoFillOnPageLoadFromPolicy","setEnableAutoFillOnPageLoad","setActivateAutoFillOnPageLoadFromPolicy","closePopupDelay","totpCode","totpTimeout","doAutoFill","fillNewPassword","closeOnEsc","loginCiphers","otherTypes","dontShowCards","getDontShowCardsCurrentTab","dontShowIdentities","getDontShowIdentitiesCurrentTab","hasOrganizations","ciphers","getAllDecryptedForUrl","cardCiphers","identityCiphers","sortCiphersByLastUsedThenName","setDismissedAutofillCallout","getDismissedAutofillCallout","setAutofillCalloutText","autofillCalloutText","decCipher","PasswordHistoryComponent","isChecked","onSharedCipher","allCollections","filterCollections","cipherView","orgName","shareWithServer","canSave","ShareComponent","replaceUrl","BrowserGroupingsComponentState","collectionCounts","folderCounts","favoriteCiphers","noFolderCiphers","selectFolder","selectCollection","selectTrash","VaultFilterComponent","showNoFolderCiphers","noFolderListSize","folderCount","browserStateService","deletedCount","showCollections","preventSelected","hasLoadedAllCiphers","allCiphers","setBrowserVaultItemsComponentState","getBrowserGroupingComponentState","replaceState","selectedTimeout","updateSelectedOrg","loadCollectionsAndFolders","loadCiphers","getCounts","loadFolders","allFolders","filterDeleted","searchCiphers","folder","deleted","updateLastLaunchedDate","vaultFilterChanged","colId","setBrowserGroupingComponentState","_searchText","activeCipherId","onCipherClicked","onCipherRightClicked","onAddCipher","onAddCipherOptions","searchPlaceholder","accessEvents","deletedFilter","indexedCiphers","doSearch","rightClickCipher","addCipherOptions","isSearching","changeVaultSelection","VaultItemsComponent","noneFolder","showVaultFilter","getBrowserVaultItemsComponentState","folderNode","collectionNode","getNested","showGroupings","TokenService","tokenService","onEditCipher","onCloneCipher","passwordReprompted","cleanUp","showPremiumRequiredTotp","totpUpdateCode","interval","getTimeInterval","totpTick","totpInterval","setInterval","promptPassword","clone","showPasswordCount","togglePasswordCount","launch","Cipher_ClientCopiedHiddenField","setTextDataOnDrag","dataTransfer","setData","downloadAttachment","clearInterval","half","totpCodeFormatted","intervalSeconds","mod","totpSec","totpDash","totpLow","toggleFieldCount","ColorPasswordCountPipe","colorizedPasswordCount","ViewCustomFieldsComponent","fillCipherAndSave","ViewComponent","loadPageDetailsTimeout","loadPageDetails","doAutofill","loginUri","DebounceNavigationService","navigationStartSub","pairwise","lastNavigation","thisNavigation","navigationSuccessSub","lastNavigationSuccessId","navigationTrigger","AutofillComponent","enableAutoFillOnPageLoad","autoFillOnPageLoadDefault","autoFillOnPageLoadOptions","getAutoFillOnPageLoadDefault","getDefaultUriMatch","setAutofillKeyboardHelperText","updateAutoFillOnPageLoad","updateAutoFillOnPageLoadDefault","setAutoFillOnPageLoadDefault","saveDefaultUriMatch","setDefaultUriMatch","AboutAutofill","autofillKeyboardHelperText","commandSettings","ExcludedDomainsComponent","excludedDomains","existingExcludedDomains","savedDomains","getNeverDomains","loadCurrentUris","loadCurrentUrisTimeout","newExcludedDomains","getNewlyAddedDomians","validDomain","setNeverDomains","newDomain","oldDomain","uriSet","ExportService","exportService","exportForm","format","filePassword","confirmFilePassword","fileEncryptionType","AccountEncrypted","formatOptions","DisablePersonalVaultExport","checkExportDisabled","startWith","adjustValidators","disable","encryptedFormat","doExport","getExportData","downloadFile","collectEvent","warningDialog","verifyUser","FileEncrypted","getPasswordProtectedExport","getExport","getFileName","User_ClientExportedVault","enable","csv","blobOptions","ExportScopeCalloutComponent","scopeConfig","scopeIdentifier","disableRequestOTP","sentCode","processChanges","requestOTP","onChange","OTP","UserVerificationComponent","ExportComponent","FolderApiServiceAbstraction","folderApiService","onSavedFolder","onDeletedFolder","FolderAddEditComponent","folderSelected","FoldersComponent","addFolder","HelpAndFeedbackComponent","launchHelp","launchContactForm","launchForums","AbstractThemingService","saveClearClipboard","updateAutoTotpCopy","updateAddLoginNotification","updateChangedPasswordNotification","updateContextMenuItem","updateShowCardsCurrentTab","updateShowIdentitiesCurrentTab","updateFavicon","updateBadgeCounter","saveTheme","OptionsComponent","themingService","enableFavicon","enableBadgeCounter","enableAutoTotpCopy","enableContextMenuItem","enableAddLoginNotification","enableChangedPasswordNotification","showCardsCurrentTab","showIdentitiesCurrentTab","showClearClipboard","showGeneral","showAutofill","showDisplay","themeOptions","System","Light","Dark","Nord","SolarizedDark","clearClipboardOptions","getDisableAddLoginNotification","getDisableChangedPasswordNotification","getDisableContextMenuItem","getDisableAutoTotpCopy","getDisableBadgeCounter","theme","getTheme","clearClipboard","getClearClipboard","setDisableAddLoginNotification","setDisableChangedPasswordNotification","setDisableContextMenuItem","setDisableAutoTotpCopy","setDisableBadgeCounter","setDontShowCardsCurrentTab","setDontShowIdentitiesCurrentTab","updateConfiguredTheme","setClearClipboard","isPremium","price","refreshPromise","refreshIdentityToken","purchase","manage","PremiumComponent","currencyPipe","thePrice","priceString","goBack","ModalRef","_onCreated","_onClose","_onClosed","_onShow","_onShown","onClose","onClosed","onShow","onShown","shown","lastResult","closed","onClosedPromise","toPromise","DynamicModalComponent","modalService","cd","focusTrapFactory","modalRef","ngAfterViewInit","loadChildComponent","childComponentType","setComponentParameters","componentRef","instance","focusTrap","focusFirstTabbableElementWhenReady","componentType","componentFactory","resolveComponentFactory","modalContentRef","createComponent","destroy","getFocus","autoFocusEl","ModalInjector","_parentInjector","_additionalTokens","notFoundValue","VaultTimeoutAction","ModalConfig","ModalService","componentFactoryResolver","applicationRef","injector","modalList","factoryResolvers","modalCount","topModal","openViewRef","modalComponentRef","openInternal","insert","hostView","replaceTopModal","allowMultipleModals","registerComponentFactoryResolver","closeAll","modal","attachToDom","createModalComponent","attachView","domElem","rootNodes","detachView","setupHandlers","backdrop","modalEl","dialogEl","className","zIndex","prepend","modals","closeElement","WeakMap","showPin","masterPassOnRestart","showMasterPassOnRestart","toggleVisibility","pinProtectedKey","encPin","setProtectedPin","setEncryptedPinProtected","SetPinComponent","ConfigServiceAbstraction","AboutComponent","configService","getFullYear","serverConfig$","form","CUSTOM_VALUE","exceedsMinimumTimout","customTimeInMinutes","MIN_CUSTOM_MINUTES","vaultTimeout","custom","hours","get$","MaximumVaultTimeout","vaultTimeoutPolicy","applyVaultTimeoutPolicy","getVaultTimeout","current","vaultTimeoutOptions","every","onTouched","validate","policyError","minTimeoutError","registerOnValidatorChange","validatorChange","vaultTimeoutPolicyHours","vaultTimeoutPolicyMinutes","VaultTimeoutInputComponent","updateBiometric","updateAutoBiometricsPrompt","changePassword","RateUrls","SettingsComponent","previousVaultTimeout","showChangeMasterPass","vaultTimeoutAction","Lock","biometric","enableAutoBiometricsPrompt","vaultTimeoutPolicyCallout","tap","emitEvent","showOnLocked","vaultTimeoutActionOptions","LogOut","initialValues","getVaultTimeoutAction","saveVaultTimeout","saveVaultTimeoutAction","newValue","setVaultTimeoutOptions","option","vaultTimeoutActionSelectRef","updatePin","ref","clearPinProtectedKey","granted","submitted","heightAuto","buttonsStyling","titleText","iconHtml","showCancelButton","cancelButtonText","showConfirmButton","allowOutsideClick","setBiometricAwaitingAcceptance","toggleKey","race","dismiss","catch","setBiometricUnlock","setBiometricFingerprintValidated","setDisableAutoBiometricsPrompt","lock","twoStep","import","export","about","fingerprint","innerText","div","confirmButtonText","rate","deviceType","SyncComponent","lastSync","setLastSync","sync","syncPromise","last","getLastSync","toLocaleDateString","toLocaleTimeString","TabsComponent","showCurrentTab","routes","redirectTo","pathMatch","component","runGuardsAndResolvers","NoRouteReuseStrategy","shouldDetach","store","handle","shouldAttach","retrieve","shouldReuseRoute","future","curr","AppRoutingModule","useClass","useHash","onSameUrlNavigation","queryShown","optional","queryChildRoute","speed","queryTranslate","direction","axis","to","boxShadow","queryTranslateX","queryTranslateY","inSlideLeft","outSlideRight","inSlideUp","outSlideDown","inSlideDown","routerTransition","fromState","toState","AppComponent","sanitizer","lastActivity","clearComponentStates","activeUserId","runOutsideAngular","onmousedown","recordActivity","ontouchstart","onclick","onscroll","onkeypress","bitwardenPopupMainMessageListener","sendResponse","forceWindowReload","urlAfterRedirects","getState","outlet","activatedRouteData","activatedRoute","setLastActive","sanitize","enableHtml","trustedHtml","timeOut","iconClasses","timer","getIsAuthenticated","WINDOW","MEMORY_STORAGE","SECURE_STORAGE","STATE_FACTORY","STATE_SERVICE_USE_CACHE","LOGOUT_CALLBACK","LOCKED_CALLBACK","LOCALES_DIRECTORY","SYSTEM_LANGUAGE","LOG_MAC_FAILURES","ConfigApiServiceAbstraction","EncryptService","EventUploadService","FileUploadService","NotificationsService","OrgDomainServiceAbstraction","SettingsService","StateMigrationService","AbstractStorageService","AbstractMemoryStorageService","TYPE","UserVerificationApiServiceAbstraction","ProviderService","CollectionData","externalId","CollectionView","hidePasswords","Collection","clearCache","setDecryptedCollections","model","decryptMany","decCollections","getEncryptedCollections","decryptedCollections","getDecryptedCollections","collectionCopy","upsert","setEncryptedCollections","ApiKeyResponse","SsoType","OpenIdConnectRedirectBehavior","Saml2BindingType","Saml2NameIdFormat","Saml2SigningBehavior","SsoConfigApi","configType","keyConnectorEnabled","OpenIdConnect","authority","openId","clientSecret","metadataAddress","redirectBehavior","getClaimsFromUserInfoEndpoint","additionalScopes","additionalUserIdClaimTypes","additionalEmailClaimTypes","additionalNameClaimTypes","acrValues","expectedReturnAcrValue","Saml2","spNameIdFormat","saml","spOutboundSigningAlgorithm","spSigningBehavior","spMinIncomingSigningAlgorithm","spWantAssertionsSigned","spValidateCertificates","idpEntityId","idpBindingType","idpSingleSignOnServiceUrl","idpSingleLogoutServiceUrl","idpX509PublicCert","idpOutboundSigningAlgorithm","idpAllowUnsolicitedAuthnResponse","idpWantAuthnRequestsSigned","idpDisableOutboundLogoutRequests","idpAllowOutboundLogoutRequests","OrganizationSsoResponse","SsoUrls","callbackPath","signedOutCallbackPath","spEntityId","spMetadataUrl","spAcsUrl","BillingResponse","invoices","transactions","balance","paymentSource","BillingSourceResponse","BillingTransactionResponse","BillingInvoiceResponse","hasNoHistory","cardBrand","needsVerification","pdfUrl","paid","amount","createdDate","refunded","partiallyRefunded","refundedAmount","paymentMethodType","PlanResponse","product","isAnnual","nameLocalizationKey","descriptionLocalizationKey","canBeUsedByBusiness","baseSeats","baseStorageGb","maxCollections","maxUsers","hasAdditionalSeatsOption","maxAdditionalSeats","hasAdditionalStorageOption","maxAdditionalStorage","hasPremiumAccessOption","trialPeriodDays","hasSelfHost","hasPolicies","hasGroups","hasDirectory","hasEvents","has2fa","hasApi","hasSso","hasResetPassword","usersGetPremium","upgradeSortOrder","displaySortOrder","legacyYear","stripePlanId","stripeSeatPlanId","stripeStoragePlanId","stripePremiumAccessPlanId","basePrice","seatPrice","additionalStoragePricePerGb","premiumAccessOptionPrice","OrganizationResponse","businessName","businessAddress1","businessAddress2","businessAddress3","businessCountry","businessTaxNumber","billingEmail","plan","planType","seats","maxAutoscaleSeats","maxStorageGb","useGroups","useDirectory","useEvents","use2fa","useApi","useResetPassword","useSecretsManager","hasPublicAndPrivateKeys","SubscriptionResponse","storageName","storageGb","license","usingInAppPurchase","subscription","upcomingInvoice","BillingSubscriptionResponse","BillingSubscriptionUpcomingInvoiceResponse","trialEndDate","periodStartDate","periodEndDate","cancelledDate","cancelAtEndDate","cancelled","BillingSubscriptionItemResponse","quantity","sponsoredSubscriptionItem","OrganizationSubscriptionResponse","PermissionsApi","accessEventLogs","accessImportExport","accessReports","createNewCollections","editAnyCollection","deleteAnyCollection","editAssignedCollections","deleteAssignedCollections","manageCiphers","manageGroups","manageSso","managePolicies","manageUsers","manageResetPassword","manageScim","ProfileOrganizationResponse","usePolicies","useSso","useKeyConnector","useScim","useCustomPermissions","useActivateAutofillPolicy","selfHost","ssoBound","resetPasswordEnrolled","providerId","providerName","familySponsorshipFriendlyName","familySponsorshipAvailable","planProductType","familySponsorshipLastSyncDateString","familySponsorshipLastSyncDate","familySponsorshipValidUntilString","familySponsorshipValidUntil","familySponsorshipToDelete","accessSecretsManager","ProfileProviderOrganizationResponse","ProfileProviderResponse","ProfileResponse","providerOrganizations","premiumPersonally","premiumFromOrganization","culture","twoFactorEnabled","avatarColor","privateKey","securityStamp","PaymentResponse","userProfile","paymentIntentClientSecret","TaxInfoResponse","taxId","taxIdType","line1","line2","ListResponse","dr","continuationToken","OrganizationApiKeyInformationResponse","keyType","OrganizationAutoEnrollStatusResponse","KeysResponse","OrganizationKeysResponse","Organization","isProviderUser","canAccess","isOwner","isManager","isAdmin","canAccessEventLogs","canAccessImportExport","canAccessReports","canCreateNewCollections","canUseAdminCollections","canDeleteAnyCollection","canViewAllCollections","canEditAssignedCollections","canDeleteAssignedCollections","canViewAssignedCollections","canManageGroups","canManageSso","canManageDomainVerification","canManageScim","canManagePolicies","canManageUsers","canManageUsersPassword","isExemptFromPolicies","canViewSubscription","canEditSubscription","hasProvider","Msp","canEditPaymentMethods","canViewBillingHistory","canAccessSecretsManager","isFreeOrg","_organizations","activeAccountUnlocked$","unlocked","getOrganizations","updateObservables","organizationsMap","values","canManageSponsorships","getValue","getFromState","getByIdentifier","setOrganizations","PolicyData","PolicyResponse","PolicyApiService","getPolicy","getPolicies","getPoliciesByToken","getPoliciesByInvitedUser","mapPoliciesFromToken","putPolicy","Policy","ResetPasswordPolicyOptions","autoEnrollEnabled","_policies","policies$","getEncryptedPolicies","policyType","policyFilter","checkPoliciesThatApplyToUser","decryptedPolicies","getDecryptedPolicies","diskPolicies","setDecryptedPolicies","obsPolicies","filteredPolicies","newPassword","toLocaleLowerCase","toLocaleUpperCase","getResetPasswordPolicyOptions","resetPasswordPolicyOptions","ResetPassword","policiesResponse","policyAppliesToUser","setEncryptedPolicies","policiesMap","policySet","Accepted","Provider","isProviderAdmin","canCreateOrganizations","ProviderAdmin","AccountService","InternalAccountService","PreloginRequest","TokenRequest","device","alterIdentityTokenHeaders","setTwoFactor","setPasswordlessAccessCode","passwordlessAuthRequest","toIdentityToken","scope","client_id","deviceName","authRequest","twoFactorToken","twoFactorProvider","twoFactorRemember","PasswordTokenRequest","grant_type","IdentityCaptchaResponse","ServerConfigData","serverConfigResponse","gitHash","server","ThirdPartyServerConfigData","utcDate","EnvironmentServerConfigData","vault","EncryptionPair","ArrayBuffer","decryptedFromJson","encryptedFromJson","DataEncryptionPair","TemporaryDataEncryption","AccountData","AccountKeys","cryptoSymmetricKey","organizationKeys","providerKeys","cryptoMasterKey","initRecordEncryptionPairsFromJSON","decObj","AccountProfile","environmentUrls","pinProtected","serverConfig","AccountTokens","profile","tokens","AuthResult","twoFactorProviders","requiresCaptcha","DeviceRequest","appId","pushToken","MasterPasswordPolicyResponse","IdentityTokenResponse","accessToken","access_token","expiresIn","expires_in","refreshToken","refresh_token","tokenType","token_type","apiUseKeyConnector","masterPasswordPolicy","IdentityTwoFactorResponse","LogInStrategy","tokenRequest","authResult","startLogIn","postIdentityToken","processTwoFactorResponse","processCaptchaResponse","processTokenResponse","buildDeviceRequest","buildTwoFactor","userProvidedTwoFactor","storedTwoFactorToken","getTwoFactorToken","Remember","saveAccountInformation","tokenResponse","accountInformation","decodeToken","addAccount","sub","hasPremiumPersonally","kdfType","setTwoFactorToken","setUserKey","createKeyPairForOldAccount","postAccountKeys","PasswordLogInStrategy","forcePasswordResetReason","makePreloginKey","masterPasswordPolicyOptions","getMasterPasswordPolicyOptionsFromResponse","PasswordlessLogInStrategy","passwordlessCredentials","SsoTokenRequest","code_verifier","redirect_uri","SsoLogInStrategy","newSsoUser","convertNewSsoUserToKeyConnector","getAndSetKey","UserApiTokenRequest","client_secret","UserApiLogInStrategy","setApiKeyClientId","setApiKeyClientSecret","PasswordlessAuthRequest","logInStrategy","pushNotificationSubject","strategy","clearState","Auto","getEverBeenUnlocked","hasKeyInMemory","preloginResponse","postPrelogin","authResponsePushNotifiction","notification","passwordlessLogin","pubKey","encryptedMasterPassword","putAuthRequest","startSessionTimeout","clearSessionTimeout","sessionTimeout","KeyConnectorUserKeyRequest","SetKeyConnectorKeyRequest","logoutCallback","setUsesKeyConnector","userNeedsMigration","loggedInUsingSso","getIsExternal","requiredByOrganization","userIsNotUsingKeyConnector","keyConnectorRequest","postUserKeyToKeyConnector","handleKeyConnectorError","postConvertToKeyConnector","userKeyResponse","getUserKeyFromKeyConnector","keyArr","randomBytes","privKey","setPasswordRequest","postSetKeyConnectorKey","setConvertAccountRequired","setConvertAccountToKeyConnector","getConvertAccountToKeyConnector","_email","_rememberEmail","decoded","setTokens","clientIdClientSecret","setToken","setRefreshToken","setClientId","setClientSecret","getClientId","getApiKeyClientId","getClientSecret","getApiKeyClientSecret","setAccessToken","getToken","getAccessToken","getRefreshToken","clearTwoFactorToken","clearToken","getTokenExpirationDate","d","setUTCSeconds","tokenSecondsRemaining","offsetSeconds","msRemaining","valueOf","tokenNeedsRefresh","email_verified","getName","getIssuer","iss","isArray","amr","UserVerificationApiService","postAccountVerifyOTP","postAccountRequestOTP","VerifyOTPRequest","userVerificationApiService","requestClass","alreadyHashed","validateInput","otp","AccountFactory","accountConstructor","args","GlobalStateFactory","globalStateConstructor","StateFactory","globalStateFactory","accountFactory","createGlobal","createAccount","WindowState","GlobalState","stateVersion","One","UpdateAvatarRequest","_avatarUpdate$","avatarUpdate$","loadColorFromState","getAvatarColor","pushUpdate","putAvatar","setAvatarColor","NotificationResponse","contextId","payload","SyncCipherCreate","SyncCipherDelete","SyncCipherUpdate","SyncLoginDelete","SyncCipherNotification","SyncFolderCreate","SyncFolderDelete","SyncFolderUpdate","SyncFolderNotification","SyncVault","SyncCiphers","SyncOrgKeys","SyncSettings","UserNotification","SyncSendCreate","SyncSendUpdate","SyncSendDelete","SyncSendNotification","AuthRequest","AuthRequestResponse","AuthRequestPushNotification","anonHubConnection","HubConnectionBuilder","withUrl","skipNegotiation","transport","withHubProtocol","MessagePackHubProtocol","build","on","ProcessNotification","SelectionReadOnlyResponse","CollectionResponse","CollectionDetailsResponse","CollectionAccessDetailsResponse","groups","users","assigned","OrganizationConnectionResponse","rawConfig","CardApi","FieldApi","IdentityApi","LoginUriApi","LoginApi","SecureNoteApi","AttachmentResponse","PasswordHistoryResponse","CipherResponse","OrganizationExportResponse","OrganizationSponsorshipSyncStatusResponse","lastSyncDate","ProviderOrganizationResponse","userCount","ProviderOrganizationOrganizationDetailsResponse","organizationName","OrganizationUserBulkPublicKeyResponse","ProviderUserBulkPublicKeyResponse","ProviderUserBulkResponse","ProviderUserResponse","ProviderUserUserDetailsResponse","ProviderResponse","requestDeviceType","requestIpAddress","responseDate","requestDate","requestDateUTC","UTC","getUTCFullYear","getUTCMonth","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","dateNow","dateNowUTC","isExpired","isAnswered","DeviceVerificationResponse","isDeviceVerificationSectionEnabled","unknownDeviceVerificationEnabled","EmergencyAccessGranteeDetailsResponse","granteeId","waitTimeDays","EmergencyAccessGrantorDetailsResponse","grantorId","EmergencyAccessTakeoverResponse","keyEncrypted","EmergencyAccessViewResponse","KeyConnectorUserKeyResponse","PreloginResponse","RegisterResponse","SsoPreValidateResponse","TwoFactorAuthenticatorResponse","TwoFactorDuoResponse","secretKey","integrationKey","TwoFactorEmailResponse","TwoFactorProviderResponse","TwoFactorRecoverResponse","TwoFactorWebAuthnResponse","KeyResponse","migrated","ChallengeResponse","attestation","authenticatorSelection","challenge","excludeCredentials","extensions","pubKeyCredParams","rp","TwoFactorYubiKeyResponse","key1","key2","key3","key4","key5","nfc","BillingHistoryResponse","BillingPaymentResponse","TaxRateResponse","BreachAccountResponse","addedDate","breachDate","dataClasses","isActive","isVerified","logoPath","modifiedDate","pwnCount","GlobalDomainResponse","domains","excluded","DomainsResponse","globalEquivalentDomains","EventResponse","groupId","policyId","providerUserId","providerOrganizationId","actingUserId","ipAddress","installationId","systemUser","domainName","secretId","serviceAccountId","UserKeyResponse","AttachmentUploadDataResponse","fileUploadType","cipherResponse","cipherMiniResponse","SendFileApi","SendTextApi","SendResponse","FolderResponse","SyncResponse","customUserAgent","isWebClient","isDesktopClient","IEBrowser","ChromeBrowser","EdgeBrowser","FirefoxBrowser","OperaBrowser","SafariBrowser","UnknownBrowser","VivaldiBrowser","WindowsDesktop","MacOsDesktop","LinuxDesktop","Accept","identityToken","qsStringify","getCredentials","responseJson","isJsonResponse","TwoFactorProviders2","doAuthRefresh","getAuthRequest","getAuthRequests","getLastAuthRequest","activeRequests","getProfile","getUserSubscription","getTaxInfo","putProfile","putTaxInfo","postEmailToken","postEmail","postSecurityStamp","getAccountRevisionDate","postPremium","postIapCheck","postReinstatePremium","postCancelPremium","postAccountStorage","postAccountPayment","postAccountLicense","postAccountKey","postAccountVerifyEmail","postAccountVerifyEmailToken","postAccountRecoverDelete","postAccountRecoverDeleteToken","postAccountKdf","deleteSsoUser","postUserApiKey","postUserRotateApiKey","getUserBillingHistory","getUserBillingPayment","getCipher","getFullCipherDetails","getCipherAdmin","getCiphersOrganization","postCipher","postCipherCreate","postCipherAdmin","putCipher","putPartialCipher","putCipherAdmin","deleteCipherAdmin","deleteManyCiphers","deleteManyCiphersAdmin","putMoveCiphers","putShareCipher","putShareCiphers","putCipherCollections","putCipherCollectionsAdmin","postPurgeCiphers","putDeleteCipher","putDeleteCipherAdmin","putDeleteManyCiphers","putDeleteManyCiphersAdmin","putRestoreCipher","putRestoreCipherAdmin","putRestoreManyCiphers","postCipherAttachment","postCipherAttachmentLegacy","postCipherAttachmentAdminLegacy","deleteCipherAttachmentAdmin","postShareCipherAttachment","renewAttachmentUploadUrl","postAttachmentFile","getCollectionAccessDetails","getUserCollections","getCollections","getManyCollectionsWithAccessDetails","getCollectionUsers","postCollection","putCollection","putCollectionUsers","deleteCollection","deleteManyCollections","deleteCollectionUser","getGroupUsers","putGroupUsers","deleteGroupUser","getPlans","postPublicImportDirectory","getTaxRates","getSettingsDomains","putSettingsDomains","getSync","getTwoFactorProviders","getTwoFactorOrganizationProviders","getTwoFactorAuthenticator","getTwoFactorEmail","getTwoFactorDuo","getTwoFactorOrganizationDuo","getTwoFactorYubiKey","getTwoFactorWebAuthn","getTwoFactorWebAuthnChallenge","getTwoFactorRecover","putTwoFactorAuthenticator","putTwoFactorEmail","putTwoFactorDuo","putTwoFactorOrganizationDuo","putTwoFactorYubiKey","putTwoFactorWebAuthn","deviceResponse","rawId","getClientExtensionResults","AttestationObject","attestationObject","clientDataJson","clientDataJSON","deleteTwoFactorWebAuthn","putTwoFactorDisable","putTwoFactorOrganizationDisable","postTwoFactorRecover","postTwoFactorEmailSetup","getDeviceVerificationSettings","putDeviceVerificationSettings","getEmergencyAccessTrusted","getEmergencyAccessGranted","getEmergencyAccess","getEmergencyGrantorPolicies","putEmergencyAccess","deleteEmergencyAccess","postEmergencyAccessInvite","postEmergencyAccessReinvite","postEmergencyAccessAccept","postEmergencyAccessConfirm","postEmergencyAccessInitiate","postEmergencyAccessApprove","postEmergencyAccessReject","postEmergencyAccessTakeover","postEmergencyAccessPassword","postEmergencyAccessView","getCloudCommunicationsEnabled","getOrganizationConnection","createOrganizationConnection","updateOrganizationConnection","organizationConnectionId","deleteOrganizationConnection","postProviderSetup","getProvider","putProvider","getProviderUsers","getProviderUser","postProviderUserInvite","postProviderUserReinvite","postManyProviderUserReinvite","postProviderUserBulkConfirm","deleteManyProviderUsers","postProviderUserAccept","postProviderUserConfirm","postProviderUsersPublicKey","putProviderUser","deleteProviderUser","getProviderClients","postProviderAddOrganization","postProviderCreateOrganization","deleteProviderOrganization","getEvents","addEventParameters","getEventsCipher","getEventsOrganization","getEventsOrganizationUser","getEventsProvider","getEventsProviderUser","postEventsCollect","authHeader","getActiveBearerToken","getUserPublicKey","getHibpBreach","postBitPayInvoice","postSetupPayment","handleError","getKeyConnectorAlive","getOrganizationExport","postCreateSponsorship","sponsoredOrgId","getSponsorshipSyncStatus","deleteRevokeSponsorship","sponsoringOrganizationId","deleteRemoveSponsorship","sponsoringOrgId","postPreValidateSponsorshipToken","sponsorshipToken","postRedeemSponsorship","postResendSponsorshipOffer","doRefreshToken","doApiTokenRefresh","decodedToken","deviceRequest","authed","hasResponse","alterHeaders","pathParts","requestUrl","FormData","responseType","responseIsJson","tokenError","isTextResponse","Message","typeHeader","storageService","makeAndGetAppId","getAnonymousAppId","existingId","htmlStorageLocation","Local","guid","hashBytes","hashStart","hashEnding","breachedAccounts","limit","throttleKey","descriptor","originalMethod","allThrottles","throttles","getThrottles","argsThrottleKey","queue","exec","onFinally","err","ServerConfigResponse","ThirdPartyServerConfigResponse","EnvironmentServerConfigResponse","ServerConfig","serverConfigData","getAgeInMilliseconds","expiresSoon","ConfigService","configApiService","_serverConfig","E","buildServerConfig","getServerConfig","fetchServerConfig","setServerConfig","ConsoleLogService","timersMap","debug","write","Debug","Info","warning","Warning","level","log","BaseEncryptedOrganizationKey","EncryptedOrganizationKey","ProviderEncryptedOrganizationKey","decValue","toData","providerKey","getProviderKey","decryptToBytes","sequentialize","cacheKey","caches","getCache","argsCacheKey","platformUtilService","setCryptoMasterKey","storeKey","keyHash","setDecryptedCryptoSymmetricKey","setEncryptedCryptoSymmetricKey","encPrivateKey","setDecryptedPrivateKey","setEncryptedPrivateKey","setOrgKeys","providerOrgs","encOrgKeyData","setDecryptedOrganizationKeys","setEncryptedOrganizationKeys","setProviderKeys","setDecryptedProviderKeys","setEncryptedProviderKeys","keySuffix","inMemoryKey","getCryptoMasterKey","symmetricKey","getKeyFromStorage","retrieveKeyFromStorage","validateKey","clearSecretKeyStore","storedKeyHash","getEncKeyHelper","getPublicKey","inMemoryPublicKey","getPrivateKey","rsaExtractPublicKey","setPublicKey","decryptedPrivateKey","getDecryptedPrivateKey","getEncryptedPrivateKey","keyFingerprint","userFingerprint","hkdfExpand","hashPhrase","getOrgKeys","decryptedOrganizationKeys","getDecryptedOrganizationKeys","getEncryptedOrganizationKeys","encOrgKey","fromData","decOrgKey","orgKeys","getProviderKeys","decryptedProviderKeys","getDecryptedProviderKeys","encProviderKeys","getEncryptedProviderKeys","getCryptoMasterKeyAuto","hasCryptoMasterKeyBiometric","getEncryptedCryptoSymmetricKey","clearKey","clearSecretStorage","clearStoredKey","setCryptoMasterKeyAuto","setCryptoMasterKeyBiometric","clearKeyHash","clearEncKey","memoryOnly","clearKeyPair","keysToClear","clearOrgKeys","clearProviderKeys","clearKeys","salt","pbkdf2","Argon2id","saltHash","argon2","protectedKeyCs","getEncryptedPinProtected","makeShareKey","shareKey","keyPair","stretchKey","makeSendKey","keyMaterial","sendKey","hkdf","hashPurpose","theKey","buildEncKey","plainValue","encryptToBytes","encValue","privateKeyValue","alg","encString","keyForEnc","encBuffer","min","rval","range","bitsNeeded","ceil","log2","bytesNeeded","mask","pow","byteArray","shouldStoreKey","storeAutoKey","getBiometricUnlock","getCryptoMasterKeyBiometric","minimumEntropy","entropyPerWord","hashArr","phrase","hashNumber","remainder","divide","encKeyEnc","getDecryptedCryptoSymmetricKey","decEncKey","encKeyCipher","symmetricCryptoKey","EncryptedObject","EncryptServiceImplementation","logMacFailures","plainBuf","encObj","aesEncrypt","macLen","resolveLegacyKey","fastParams","aesDecryptFastParameters","computedMac","hmacFast","macData","compareFast","logMacFailed","aesDecryptFast","encThing","hmac","aesDecrypt","decryptItems","AttachmentData","CardData","FieldData","IdentityData","LoginUriData","LoginData","PasswordHistoryData","SecureNoteData","CipherData","Attachment","decryptAttachmentKey","toAttachmentData","toCardData","Field","toFieldData","toIdentityData","LoginUri","toLoginUriData","toLoginData","toPasswordHistoryData","toSecureNoteData","Cipher","reduce","promise","decAttachment","decField","decPh","toCipherData","classInitializers","MultithreadEncryptServiceImplementation","clear$","worker","Worker","restartTimeout","jsonItem","defaultIfEmpty","terminate","EventData","eventUploadService","uploadImmediately","orgIds","eventCollection","getEventCollection","setEventCollection","uploadEvents","EventRequest","checkOnInterval","req","clearEvents","CardExport","FieldExport","IdentityExport","LoginUriExport","LoginExport","toView","toDomain","SecureNoteExport","CipherExport","CipherWithIdExport","CollectionExport","CollectionWithIdExport","EventExport","humanReadableMessage","appIcon","appName","userName","userEmail","ip","Folder","FolderExport","FolderWithIdExport","getEncryptedExport","getDecryptedExport","clearText","encKeyValidation","encText","jsonDoc","passwordProtected","encKeyValidation_DO_NOT_EDIT","getOrganizationEncryptedExport","getOrganizationDecryptedExport","getEventExport","padNumber","getMonth","getHours","getMinutes","getSeconds","decFolders","decCiphers","getAllDecryptedFromState","foldersMap","exportCiphers","buildCommonCipher","getAllFromState","exportData","exportPromises","decCol","collectionsMap","orgKey","padCharacter","numString","login_uri","login_username","login_password","login_totp","AzureFileUploadService","upload","renewalCallback","azureUploadBlob","azureUploadBlocks","urlObject","toUTCString","blobResponse","blockSize","getMaxBlockSize","blockIndex","numBlocks","blocksStaged","renewUrlIfNecessary","blockUrl","blockId","encodedBlockId","blockData","blockHeaders","blockRequest","blockResponse","blockListUrl","blockListXml","expiry","utfBlockId","blockIdList","xml","Version","month","day","compareTo","BitwardenFileUploadService","encryptedFileName","encryptedFileData","apiCall","fd","blob","Blob","filepath","contentType","azureFileUploadService","bitwardenFileUploadService","uploadData","fileUploadMethods","Direct","postDirect","Azure","renewFileUploadUrl","rollback","connected","inactive","reconnectTimer","signalrConnection","off","accessTokenFactory","processNotification","onclose","reconnect","isAuthedAndUnlocked","updateConnection","reconnectFromActivity","disconnectFromInactivity","isAuthenticated","payloadUserId","UserId","myUserId","syncUpsertCipher","syncDeleteCipher","syncUpsertFolder","syncDeleteFolder","syncUpsertSend","syncDeleteSend","getApproveLoginRequests","notificationId","OrganizationDomainSsoDetailsResponse","organizationIdentifier","ssoAvailable","verifiedDate","OrganizationDomainResponse","txt","nextRunDate","jobRunCount","lastCheckedDate","OrganizationDomainSsoDetailsRequest","OrganizationUserResponse","accessAll","OrganizationUserUserDetailsResponse","OrganizationUserDetailsResponse","OrganizationUserResetPasswordDetailsReponse","OrganizationUserBulkResponse","OrganizationUserBulkRequest","ids","indexing","immediateSearchLocales","defaultSearchableMinLength","searchableMinLength","locale$","registeredPipeline","lunr","Pipeline","registerFunction","normalizeAccentsPipelineFunction","clearIndex","normalizeSearchQuery","indexCiphers","builder","Builder","pipeline","boost","extractor","uriExtractor","fieldExtractor","attachmentExtractor","results","getIndexForSearch","searchCiphersBasic","ciphersMap","searchResults","soWild","Query","wildcard","LEADING","TRAILING","q","tokenizer","term","sendsMatched","lowPriorityMatched","joined","protocolIndex","queryIndex","searchableFields","metadata","normalize","_settings","settings$","getSettings","setEquivalentDomains","setSettings","getEquivalentDomains","ed","ProviderData","State","globals","accounts","authenticatedAccounts","accountActivity","accountDeserializer","buildAccountMapFromJSON","jsonAccounts","SendFileData","SendTextData","SendData","FolderData","partialKeys","DDG_SHARED_KEY","secureStorageService","memoryStorageService","stateMigrationService","stateFactory","useAccountCache","accountsSubject","accounts$","activeAccountSubject","activeAccountUnlockedSubject","hasBeenInited","isRecoveredSession","accountDiskCache","needsMigration","migrate","setState","createGlobals","initAccountState","updateState","syncAccountFromDisk","storedActiveUser","pushAccounts","diskAccount","getAccountFromDisk","account","setAccountEnvironmentUrls","scaffoldNewAccountStorage","setActiveUser","clearDecryptedDataForActiveUser","clean","reconcileOptions","defaultInMemoryOptions","deAuthenticateAccount","dynamicallySetActiveUser","removeAccountFromDisk","removeAccountFromMemory","getTimeoutBasedStorageOptions","getAccount","saveAccount","getAlwaysShowDock","getGlobals","defaultOnDiskOptions","alwaysShowDock","setAlwaysShowDock","saveGlobals","apiKeyClientId","apiKeyClientSecret","getAutoConfirmFingerPrints","autoConfirmFingerPrints","setAutoConfirmFingerprints","getBiometricAwaitingAcceptance","biometricAwaitingAcceptance","getBiometricFingerprintValidated","biometricFingerprintValidated","setBiometricText","biometricUnlock","getHasPremiumPersonally","getHasPremiumFromOrganization","setHasPremiumPersonally","hasPremiumFromOrganization","setHasPremiumFromOrganization","defaultOnDiskLocalOptions","collapsedGroupings","convertAccountToKeyConnector","nextValue","defaultSecureStorageOptions","saveSecureStorageKey","getCryptoMasterKeyB64","setCryptoMasterKeyB64","getDecryptedCiphers","setDecryptedCiphers","getDecryptedSends","setDecryptedSends","disableAddLoginNotification","disableAutoTotpCopy","disableBadgeCounter","disableChangedPasswordNotification","disableContextMenuItem","getDisableGa","disableGa","setDisableGa","dismissedAutoFillOnPageLoadCallout","dontShowCardsCurrentTab","dontShowIdentitiesCurrentTab","getDuckDuckGoSharedKey","setDuckDuckGoSharedKey","setEmailVerified","getEnableAlwaysOnTop","accountPreference","enableAlwaysOnTop","globalPreference","setEnableAlwaysOnTop","getEnableBrowserIntegration","enableBrowserIntegration","setEnableBrowserIntegration","getEnableBrowserIntegrationFingerprint","enableBrowserIntegrationFingerprint","setEnableBrowserIntegrationFingerprint","getEnableCloseToTray","enableCloseToTray","setEnableCloseToTray","getEnableDuckDuckGoBrowserIntegration","enableDuckDuckGoBrowserIntegration","setEnableDuckDuckGoBrowserIntegration","getEnableFullWidth","enableFullWidth","setEnableFullWidth","getEnableMinimizeToTray","enableMinimizeToTray","setEnableMinimizeToTray","getEnableStartToTray","enableStartToTray","setEnableStartToTray","getEnableTray","enableTray","setEnableTray","getEncryptedCiphers","defaultOnDiskMemoryOptions","setEncryptedCiphers","getEncryptedFolders","setEncryptedFolders","getEncryptedSends","setEncryptedSends","getEntityId","entityId","setEntityId","getEntityType","entityType","setEntityType","getGlobalEnvironmentUrls","everBeenUnlocked","getInstalledVersion","installedVersion","setInstalledVersion","getLastActive","getLocalData","setLocalData","getLocale","setLocale","getMainWindowSize","mainWindowSize","setMainWindowSize","getMinimizeOnCopyToClipboard","minimizeOnCopyToClipboard","setMinimizeOnCopyToClipboard","neverDomains","getNoAutoPromptBiometricsText","noAutoPromptBiometricsText","setNoAutoPromptBiometricsText","getOpenAtLogin","openAtLogin","setOpenAtLogin","organizationInvitation","setOrganizationInvitation","passwordGenerationOptions","usernameGenerationOptions","getSecurityStamp","setSecurityStamp","getSsoOrgIdentifier","ssoOrganizationIdentifier","setSsoOrganizationIdentifier","ssoState","setTheme","setVaultTimeout","accountVaultTimeoutAction","globalVaultTimeoutAction","setVaultTimeoutAction","approveLoginRequests","setApproveLoginRequests","getStateVersion","setStateVersion","getWindow","setWindow","activateAutoFillOnPageLoadFromPolicy","getSMOnboardingTasks","smOnboardingTasks","setSMOnboardingTasks","useMemory","storageLocation","getGlobalsFromMemory","useDisk","getGlobalsFromDisk","saveGlobalsToMemory","saveGlobalsToDisk","useSecureStorage","getAccountFromMemory","getUserIdFromMemory","cachedAccount","setDiskCache","Memory","Both","Disk","saveAccountToMemory","saveAccountToDisk","deleteDiskCache","deepClone","scaffoldNewAccountLocalStorage","scaffoldNewAccountSessionStorage","scaffoldNewAccountMemoryStorage","storedAccount","pruneInMemoryAccounts","requestedOptions","defaultOptions","Session","getActiveUserIdFromStorage","removeAccountFromLocalStorage","resetAccount","removeAccountFromSessionStorage","removeAccountFromSecureStorage","persistentAccountInformation","timeoutAction","deserializer","stateUpdater","updatedState","withPrototypeForArrayMembers","memberConstructor","memberConverter","originalResult","getOwnPropertyDescriptors","withPrototypeForObjectValues","valuesConstructor","valuesConverter","v1Keys","autoConfirmFingerprints","enableBiometric","encOrgKeys","encPrivate","lastActive","ssoIdentifier","stamp","usesConnector","v1KeyPrefixes","currentStateVersion","getCurrentStateVersion","Latest","migrateStateFrom1To2","Two","migrateStateFrom2To3","Three","migrateStateFrom3To4","Four","getAuthenticatedAccounts","migratedAccount","migrateAccountFrom4To5","setCurrentStateVersion","Five","migrateAccountFrom5To6","Six","migrateAccountFrom6To7","noAutoPromptBiometrics","Seven","clearV1Keys","clearingUserId","keyPrefix","defaultAccount","accountSettings","cryptoMasterKeyAuto","cryptoMasterKeyB64","cryptoMasterKeyBiometric","legacyEtmKey","authenticationStatus","authenticatedUserIds","encryptedOrgKeys","globalSetting","newVersion","B32Chars","SteamChars","period","digits","keyB32","isOtpAuth","isSteamAuth","digitParams","periodParam","algParam","epoch","timeHex","leftPad","decToHex","timeBytes","keyBytes","b32ToBytes","sign","offset","fullCode","trunc","b32ToHex","cleanedInput","bits","hex","byteIndex","chunk","signature","lockedCallback","loggedOutCallback","startCheck","checkVaultTimeout","shouldLock","executeTimeoutAction","vaultTimeoutSeconds","currentAction","DecryptParameters","WebCryptoFunctionService","crypto","subtle","wasmSupported","checkIfWasmSupported","algorithm","wcLen","passwordBuf","toBuf","pbkdf2Params","toWebCryptoAlgorithm","impKey","importKey","deriveBits","passwordArr","saltArr","pass","time","mem","hashLen","ArgonType","ikm","outputByteSize","hkdfParams","prk","infoBuf","infoArr","runningOkmLength","previousT","okm","md","valueBytes","toByteString","digest","valueBuf","signingAlgorithm","mac1","mac2","arr1","arr2","getBytes","rand","Uint32Array","putInt32","meta","encKeyByteString","macKeyByteString","parameters","dataBuffer","decipher","finish","rsaParams","impPrivateKey","jwkPrivateKey","exportKey","jwkPublicKeyParams","kty","ext","impPublicKey","modulusLength","publicExponent","generateKey","getRandomValues","buf","WebAssembly","instantiate","module","Module","Instance","SendRequest","fileLength","SendAccessResponse","creatorIdentifier","SendFileDownloadDataResponse","SendFileUploadDataResponse","fileUploadService","getSend","postSendAccess","getSendFileDownloadData","getSends","postSend","postFileTypeSend","renewSendFileUploadUrl","fileId","postSendFile","postSendFileLegacy","putSend","putSendRemovePassword","deleteSend","uploadDataResponse","generateMethods","legacyServerSendFileUpload","generatePostDirectCallback","generateRenewFileUploadUrlCallback","generateRollbackCallback","renewResponse","SendFile","SendText","Send","_sends","_sendViews","sends$","fileData","passwordHash","encryptFileData","parseFile","decSends","reader","FileReader","readAsArrayBuffer","onload","evt","onerror","sendsMap","decryptSends","decryptSendPromises","decryptedSends","CipherFileUploadService","SyncNotifierService","SortedCiphersCache","comparator","sortedCiphersByUrl","timeouts","isCached","addCiphers","Ciphers","resetTimer","getLastUsed","getLastLaunched","getNext","updateLastUsedIndex","lastUsedIndex","lastLaunched","y","getNextIndex","CipherBulkDeleteRequest","CipherBulkMoveRequest","CipherBulkRestoreRequest","AttachmentRequest","CipherRequest","lastKnownRevisionDate","attachments2","attachmentRequest","CipherWithIdRequest","CipherBulkShareRequest","CipherCollectionsRequest","CipherCreateRequest","CipherPartialRequest","CipherShareRequest","settingsService","cipherFileUploadService","sortedCiphersCache","sortCiphersByLastUsed","getDecryptedCipherCache","setDecryptedCipherCache","clearDecryptedCiphersState","originalCipher","existingCipher","existingHiddenFields","hiddenFields","ef","matchedField","encryptObjProperty","encryptCipherData","encryptFields","encryptPasswordHistories","encryptAttachments","attachmentsModel","encAttachments","fieldsModel","encFields","encField","encryptField","fieldModel","phModels","encPhs","encPh","encryptPasswordHistory","phModel","reindexCiphers","userKey","grouped","agg","groupedCiphers","flat","getLocaleSortingFunction","getAllDecryptedForGrouping","groupingId","includeOtherTypes","defaultMatch","getAllFromApiForOrganization","cr","getLastUsedForUrl","getCipherForUrl","getLastLaunchedForUrl","getNextCipherForUrl","updateLastUsedIndexForUrl","updateLastUsedDate","ciphersLocalData","decryptedCipherCache","cached","saveNeverDomain","attachmentPromises","shareAttachmentWithServer","encCipher","shareManyWithServer","encCiphers","unencryptedFile","cData","filename","encFileName","dataEncKey","encData","clearEncryptedCiphersState","moveManyWithServer","deleteManyWithServer","deleteAttachment","aLastUsed","bLastUsed","bothNotNull","aName","bName","softDelete","setDeletedDate","softDeleteManyWithServer","clearDeletedDate","restoreManyWithServer","restores","attachmentView","attachmentResponse","theObj","modelProp","lastUsed","autofillOnPageLoadDefault","clearSortedCiphers","adminRequest","legacyServerAttachmentFileUpload","FolderRequest","FolderApiService","postFolder","putFolder","deleteFolder","_folders","_folderViews","decryptFolders","updates","cId","decryptFolderPromises","decryptedFolders","_sync","sync$","OrganizationData","providerService","forceSync","allowThrowOnError","syncStarted","syncCompleted","needsSync","needsSyncing","syncProfile","syncFolders","syncCollections","syncCiphers","syncSends","syncSettings","syncPolicies","isEdit","localFolder","remoteFolder","shouldUpdate","localCipher","checkCollections","remoteCipher","localSend","remoteSend","syncProfileOrganizations","eqDomains","subscribers","messageCallback","ThemeBuilder","effectiveTheme","configuredTheme","systemTheme","updateSystemTheme","ThemingService","_theme","theme$","monitorThemeChanges","getSystemTheme","monitorConfiguredThemeChanges","monitorSystemThemeChanges","matchMedia","JslibServicesModule","useFactory","deps","language","accountService","deleteAccount","verificationRequest","Observable","cryptoFunctionservice","getOrganizationUser","includeGroups","getOrganizationUserGroups","getAllUsers","includeCollections","getOrganizationUserResetPasswordDetails","postOrganizationUserInvite","postOrganizationUserReinvite","postManyOrganizationUserReinvite","postOrganizationUserAcceptInit","postOrganizationUserAccept","postOrganizationUserConfirm","postOrganizationUsersPublicKey","postOrganizationUserBulkConfirm","putOrganizationUser","putOrganizationUserGroups","putOrganizationUserResetPassword","deleteOrganizationUser","deleteManyOrganizationUsers","revokeOrganizationUser","revokeManyOrganizationUsers","restoreOrganizationUser","restoreManyOrganizationUsers","errors","controlErrors","keyError","getBilling","getSubscription","getLicense","createLicense","updatePayment","upgrade","updateSubscription","updateSeats","updateStorage","verifyBank","reinstate","updateLicense","importDirectory","getOrCreateApiKey","getApiKeyInformation","organizationApiKeyType","rotateApiKey","updateTaxInfo","updateKeys","getSso","updateSso","selfHostedSyncLicense","updateEnrollSecretsManager","defaultErrorMessage","_orgDomains$","orgDomains$","orgDomainId","orgDomain","copyDnsTxt","dnsTxt","orgDomains","existingOrgDomains","findIndex","existingOrgDomain","orgDomainIds","orgDomainService","getAllByOrgId","resultOrgDomain","getByOrgIdAndOrgDomainId","post","orgDomainReq","verify","getClaimedOrgDomainByEmail","ContainerService","attachToGlobal","SyncedItemMetadata","itemBuilder","initializer","initializeAs","keyValuePair","SessionSyncer","subject","metaData","ignoreNUpdates","ReplaySubject","_buffer","observe","sessionKey","updateFromMemory","listenForUpdates","stream","skip","updateSession","updateMessageCommand","updateFromMessage","serializedValue","getBypassCache","unBuiltValue","browserSession","findStorageService","__syncedItemMetadata","__sessionSyncers","buildSyncer","storageSerice","syncer","isMemoryStorageService","sessionSync","buildOptions","BrowserOrganizationService","BrowserPolicyService","handleActivateAutofillPolicy","ActivateAutofill","activated","autofillEnabled","LockGuardService","UnauthGuardService","MemoryStorageService","SystemService","reloadCallback","reloadInterval","clearClipboardTimeout","clearClipboardTimeoutFunction","startProcessReload","cancelProcessReload","executeProcessReload","clipboardValue","timeoutMs","clearSeconds","clipboardValueNow","clearPendingClipboard","NotificationQueueMessageType","ContextMenusBackground","contextMenuClickedHandler","contextMenus","onClicked","cipherAction","commandToRetry","NotificationQueueMessage","AddLoginQueueMessage","uriView","loginView","NotificationBackground","notificationQueue","processMessage","cleanupNotificationQueue","getDataForTab","responseCommand","addLogin","changedPassword","removeTabFromNotificationQueue","retryMessage","saveOrUpdateCredentials","saveNever","forms","getFormsWithPasswordFields","checkNotificationQueue","doNotificationQueueCheck","currentTab","expires","tabDomain","AddLogin","typeData","isVaultLocked","wasVaultLocked","getCurrentTheme","removeIndividualVault","ChangePassword","loginInfo","loginDomain","normalizedUsername","disabledAddLogin","pushAddLoginToQueue","usernameMatches","pushChangePasswordToQueue","changeData","currentPassword","passwordMatches","queueMessage","getDecryptedCipherById","folderExists","newCipher","toCipherView","editItem","senderTab","TabsBackground","main","notificationBackground","onFocusChanged","focusedWindowId","onActivated","activeInfo","refreshBadge","refreshMenu","onReplaced","addedTabId","removedTabId","onReplacedRan","onUpdated","changeInfo","onUpdatedRan","factory","cachedServices","opts","alwaysInitializeNewService","instanceOrPromise","doNotStoreInitializedService","AccountSettings","Account","groupings","logServiceFactory","logServiceOptions","AbstractChromeStorageService","chromeStorageApi","keyedObj","BrowserLocalStorageService","local","BrowserMemoryStorageService","session","LocalBackedSessionStorageService","keyGenerationService","localStorage","sessionStorage","getLocalSession","getSessionEncKey","sessionEncKey","localSession","setLocalSession","sessionJson","setSessionEncKey","setEncryptedLocalSession","setDecryptedLocalSession","jsonSession","encSession","storedKey","makeEphemeralKey","cryptoFunctionServiceFactory","cryptoFunctionServiceOptions","encryptServiceOptions","KeyGenerationService","numBytes","diskStorageServiceFactory","secureStorageServiceFactory","memoryStorageServiceFactory","keyGenerationServiceFactory","stateServiceFactory","service","stateMigrationServiceOptions","stateMigrationServiceFactory","stateServiceOptions","organizationServiceFactory","policyServiceFactory","tokenServiceFactory","appIdServiceFactory","environmentServiceFactory","BrowserMessagingService","messagingServiceFactory","platformUtilsServiceFactory","platformUtilsServiceOptions","apiServiceFactory","apiServiceOptions","BrowserCryptoService","cryptoServiceFactory","systemLanguage","localesDirectory","getLocalesJson","supportedTranslationLocales","defaultLocale","localeNames","defaultMessages","localeMessages","Intl","Collator","numeric","sensitivity","loadMessages","translate","messagesObj","formattedLocale","locales","placeholders","placeProp","content","replaceToken","replaceContent","_locale","_translationLocale","getMessage","i18nServiceFactory","i18nServiceOptions","passwordGenerationServiceFactory","authServiceFactory","keyConnectorServiceOptions","keyConnectorServiceFactory","twoFactorServiceFactory","cipherFileUploadServiceFactory","fileUploadServiceFactory","BrowserSettingsService","settingsServiceFactory","cipherServiceFactory","searchServiceFactory","ROOT_ID","AUTOFILL_ID","COPY_USERNAME_ID","COPY_PASSWORD_ID","COPY_VERIFICATIONCODE_ID","COPY_IDENTIFIER_ID","GENERATE_PASSWORD_ID","NOOP_COMMAND_SUFFIX","MainContextMenuHandler","initRunning","_options","serviceOptions","removeAll","contexts","parentId","menuItemId","loadOptions","sanitizedTitle","sanitizeContextMenuTitle","createChildItem","noAccess","noLogins","NOT_IMPLEMENTED","_args","LISTENED_TO_COMMANDS","CipherContextMenuHandler","mainContextMenuHandler","mv3Create","serviceCache","cipherContextMenuHandler","shouldListen","messageListener","activeTabs","updateForCipher","totpServiceFactory","eventCollectionServiceFactory","eventUploadServiceFactory","AutofillScript","documentUUID","script","properties","autosubmit","AutoFillConstants","UsernameFieldNames","PasswordFieldIgnoreList","ExcludedAutofillTypes","CreditCardAutoFillConstants","CardAttributes","CardAttributesExtended","CardHolderFieldNames","CardHolderFieldNameValues","CardNumberFieldNames","CardNumberFieldNameValues","CardExpiryFieldNames","CardExpiryFieldNameValues","ExpiryMonthFieldNames","ExpiryYearFieldNames","CVVFieldNames","CardBrandFieldNames","MonthAbbr","YearAbbrShort","YearAbbrLong","IdentityAutoFillConstants","IdentityAttributes","FullNameFieldNames","FullNameFieldNameValues","TitleFieldNames","FirstnameFieldNames","MiddlenameFieldNames","LastnameFieldNames","EmailFieldNames","AddressFieldNames","AddressFieldNameValues","Address1FieldNames","Address2FieldNames","Address3FieldNames","PostalCodeFieldNames","CityFieldNames","StateFieldNames","CountryFieldNames","PhoneFieldNames","UserNameFieldNames","CompanyFieldNames","IsoCountries","afghanistan","albania","algeria","andorra","angola","anguilla","antarctica","argentina","armenia","aruba","australia","austria","azerbaijan","bahamas","bahrain","bangladesh","barbados","belarus","belgium","belize","benin","bermuda","bhutan","bolivia","botswana","brazil","bulgaria","burundi","cambodia","cameroon","canada","chad","chile","china","colombia","comoros","congo","croatia","cuba","cyprus","denmark","djibouti","dominica","ecuador","egypt","eritrea","estonia","ethiopia","fiji","finland","france","gabon","gambia","georgia","germany","ghana","gibraltar","greece","greenland","grenada","guadeloupe","guam","guatemala","guernsey","guinea","guyana","haiti","honduras","hungary","iceland","india","indonesia","iraq","ireland","israel","italy","jamaica","japan","jersey","jordan","kazakhstan","kenya","kiribati","kuwait","kyrgyzstan","latvia","lebanon","lesotho","liberia","liechtenstein","lithuania","luxembourg","macao","macedonia","madagascar","malawi","malaysia","maldives","mali","malta","martinique","mauritania","mauritius","mayotte","mexico","moldova","monaco","mongolia","montenegro","montserrat","morocco","mozambique","myanmar","namibia","nauru","nepal","netherlands","nicaragua","niger","nigeria","niue","norway","oman","pakistan","palau","panama","paraguay","peru","philippines","pitcairn","poland","portugal","qatar","reunion","romania","rwanda","samoa","senegal","serbia","seychelles","singapore","slovakia","slovenia","somalia","spain","sudan","suriname","swaziland","sweden","switzerland","taiwan","tajikistan","tanzania","thailand","togo","tokelau","tonga","tunisia","turkey","turkmenistan","tuvalu","uganda","ukraine","uruguay","uzbekistan","vanuatu","venezuela","vietnam","yemen","zambia","zimbabwe","IsoStates","alabama","alaska","arizona","arkansas","california","colorado","connecticut","delaware","florida","hawaii","idaho","illinois","indiana","iowa","kansas","kentucky","louisiana","maine","maryland","massachusetts","michigan","minnesota","mississippi","missouri","montana","nebraska","nevada","ohio","oklahoma","oregon","pennsylvania","tennessee","texas","utah","vermont","virginia","washington","wisconsin","wyoming","IsoProvinces","alberta","manitoba","ontario","quebec","saskatchewan","formData","passwordFields","loadPasswordFields","passwordFieldsWithoutForm","pf","formKeys","formCount","soloFormKey","formKey","formPasswordFields","uf","findUsernameField","passwords","totpPromise","didAutofill","pd","fillScript","generateFillScript","skipUsernameOnlyFill","onlyEmptyFields","onlyVisibleFields","tabUrl","untrustedIframe","allowUntrustedIframe","delay_between_operations","skipLastUsed","Cipher_ClientAutofilled","doAutoFillOnTab","fromCommand","lastLaunchedCipher","doAutoFillActiveTab","getActiveTab","filledFields","fieldNames","hasValue","opid","viewable","matchingIndex","findMatchingFieldIndex","matchingField","fillByOpid","generateLoginFillScript","generateCardFillScript","generateIdentityFillScript","usernames","savedUrls","inUntrustedIframe","setFillScriptForFocus","passwordFieldsForForm","passField","elementNumber","fieldIsFuzzyMatch","fillFields","forCustomFieldsOnly","isExcludedType","attr","isFieldMatch","makeScriptAction","selectInfo","siOptions","fieldAttrsContain","maxLength","colonIndex","fullMonth","fullYear","partYear","makeScriptActionWithValue","pageUrl","containsVal","doesContain","filledState","stateLower","isoState","filledCountry","countryLower","isoCountry","excludedTypes","containsOptions","checkValueContains","cipherData","dataProp","fieldProp","dataValue","doFill","canBeHidden","canBeReadOnly","mustBeEmpty","isPassword","valueIsLikePassword","cleanedValue","readonly","htmlID","htmlName","placeholder","autoCompleteType","passwordField","withoutForm","usernameField","names","fieldPropertyIsPrefixMatch","fieldPropertyIsMatch","property","separator","sepIndex","fieldVal","regexParts","csvParts","csvVals","fuzzyMatch","lastField","lastPasswordField","clearClipboardAlarmName","alarmState","setAlarmTimeInternal","commandName","GeneratePasswordToClipboardCommand","generatePasswordToClipboard","delay_ms","clearAlarmTime","setAlarmTime","AutofillTabCommand","doAutofillTabCommand","collectPageDetails","doAutofillTabWithCipherCommand","ContextMenuClickedHandler","autofillAction","generatePasswordToClipboardCommand","autofillServiceFactory","getIdentifier","parentMenuItemId","Cipher_ClientCopiedPassword","UpdateBadge","existingServices","listenedToCommands","badgeAction","initServices","setBadgeBackgroundColor","setLoggedOut","setLocked","getTab","setUnlocked","setBadgeIcon","clearBadgeText","setBadgeText","countText","isOperaSidebar","setActionText","setSideBarText","iconSuffix","setActionIcon","setSidebarActionIcon","setTitle","setIcon","useSyncApiCalls","lastFocusedWindow","existingServiceCache","BrowserI18nService","BrowserSendService","BrowserMessagingPrivateModeBackgroundService","checkSafari","BrowserFolderService","CommandsBackground","processCommand","onCommand","autoFillLogin","openPopup","collectPageDetailsForContentScript","IdleBackground","notificationsService","idleTimer","idleState","idle","idleHandler","newState","onStateChanged","setDetectionInterval","pollIdle","handler","queryState","NativeMessagingBackground","runtimeBackground","resolver","secureSetupResolve","onAdded","connect","port","connecting","connectedCallback","disconnect","sharedSecret","validatingFingerprint","showFingerprintDialog","showWrongUserDialog","onDisconnect","timestamp","encryptMessage","secureCommunication","getResponse","rawMessage","abs","sendUnencrypted","RuntimeBackground","systemService","pageDetailsToAutoFill","onInstalledReason","lockedVaultPendingNotifications","onInstalled","checkOnInstalled","backgroundMessageListener","popupOnlyContext","bitwardenBackgroundMessageListener","logout","avatarUpdateService","addEditCipherUrl","reseedStorage","autofillTimeout","autofillPage","referrer","tabToAutoFill","loginToAutoFill","WebRequestBackground","pendingAuthRequests","webRequest","onAuthRequired","resolveAuthCredentials","onCompleted","completeAuthRequest","onErrorOccurred","authCredentials","MainBackground","isPrivateMode","backgroundWindow","nativeMessagingBackground","syncNotifierService","that","backgroundMessagingService","containerService","commandsBackground","tabsBackground","_tab","contextMenusBackground","idleBackground","webRequestBackground","bootstrap","forLocked","needStorageReseed","needsStorageReseed","override","syncInternal","lastSyncAgo","scheduleNextSync","syncTimeout","BrowserConfigService","FileDownloadBuilder","_request","fileType","downloadMethod","fileNameLower","endsWith","BrowserFileDownloadService","createObjectURL","BrowserMessagingPrivateModePopupService","PasswordRepromptComponent","InitService","screen","availHeight","htmlEl","platform","screenLeft","screenTop","PopupSearchService","mainSearchService","consoleLogService","needsBackgroundInit","mainBackground","localBgService","createLocalBgService","bitwardenMain","getBgService","ServicesModule","initService","stateServiceAbstraction","AppModule","positionClass","bootstrapModule","preserveWhitespaces","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","__webpack_modules__","O","chunkIds","notFulfilled","Infinity","fulfilled","getter","__esModule","getPrototypeOf","mode","ns","def","getOwnPropertyNames","definition","defineProperty","enumerable","chunkId","globalThis","Function","Symbol","toStringTag","nmd","paths","scriptUrl","importScripts","currentScript","scripts","baseURI","installedChunks","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}